["davidmachadosf, 2023-06-11elenzil, sorry. It's public now! :-)   https://www.shadertoy.com/view/dtKXDc. You will need a monitor or TV with 3d suport to visualize. ;-)", "elenzil, 2023-06-10@davidmachadosf , have you saved your fork as \"Public\" (or \"Public w/ API\") ?   it's 404 for me.", "davidmachadosf, 2023-06-10I do a fork with a little change to implements interlaced 3D. :-)   https://www.shadertoy.com/view/dtKXDc", "Cesium_137, 2023-05-01wait i can figure it out", "Cesium_137, 2023-05-01what is p and what is b for the box", "Raistlin_fuego, 2023-04-03@elenzil !!!!!! How ingenious, now I see it! and with that value modifies the light color. And the opU() function is where it calculates if the object is behind or in front! Wow, you just helped me a lot. Thank you so much. So the approach is very different from how I thought of course... What a dark magic xD!!", "elenzil, 2023-04-03@Raistlin_fuego - map() returns a vec2, where .x is the distance to the nearest surface and .y is a single float for the material.", "this is interpreted in render() as 'm' in:", "col = 0.2 + 0.2*sin( m*2.0 + vec3(0.0,1.0,2.0) );", "", "", "So in this case, raymarching is tracking the material along each step of the march,", "which I agree is a little bit of a performance bummer because it means explicit if()'s in the boolean operations to build up the scene, versus nice tidy min()s and max()s.  I did some experimentation once to avoid this while also only writing a single map() function, but it was a big #define mess.", "Raistlin_fuego, 2023-04-03Sorry for the dilettante comment... Where is the assignment of the colors and the id of each polygon for that assignment?", "", "I have seen in an article of yours about raymarching that you first ask if that point hits something and then if it is true you tell it what color it paints (or whatever shading process it is). That generates 2 ray cycles for each point. One to detect the collision and one to color it.", "", "I don't know if a way to do it would be for you to pass in addition to ro and rd the sdf of the polygon you want. If it collides, calculate again and so you can assign the color and if it does not collide, it would only make the ray once at that point.", "", "I'm sorry for this long message but I can't understand it and maybe someone will give me a hand!", "", "Thank you all very much and congratulations for this great job!", "Poisson, 2022-08-17nice", "ollj, 2022-05-26i want to see how you make such good predictions on what can be skipped.", "xrx, 2022-05-25(familiar with bounding volumes, but this is different layer, at actual raystep generation, not at point check at object sdf)", "this would not need bounding volumes at all,", "as last checked distance would imply the next t point to check object upon, otherwise skip.", "another words its raystep generation not simply +dt, but it is dt per each object, then check t for which object t>tobj_n to do actual new sdf.", "sd array for each objects needed (same count as opU calls)", "bounding volumes only good for separate/non overlapping objects, this one would use dt implied from sd function.", "ollj, 2022-05-25xrx, your approach would need some larger arrays, and webgl is not good with larger arrays. your approach is also much more stochastic or constrained than you may think, not too reliable=predictable.", "", "Having a bounding-volume-hiearchy does indeed help a lot in general, but it significantly increases compile-time.", "", "having a lattice of bound objects with kerned=overlapping smaller shapes also helps (its just a more symmetric multitapping bounding volume), but in 3d you still generally end up with a 9x9 neighborhood for a cubic latticem and each box has its constrains about what it can contain, which in itself constrains movement of object trough the whole lattice (traffic jams)", "iq, 2022-05-25That's the case, only nearby objects are checked for distance (check the map() function carefully). The scene is divided in a grid of bounding volumes (It's not the best subdivision at all, but performance improves dramatically). That's better than doing it per object since you amortize the branching cost. More on the topic here: https://iquilezles.org/articles/sdfbounding/", "xrx, 2022-05-25some thoughts... (although this example focuses on other things)", "ray stepping should not use step based on minimum distance to all objects,", "but instead advance, and check only near by objects, only when (t) is close to scheduled check for that object", "would be huge perf improvement, and affects all raygen shaders.", "new raymarch function needed that returns ray dt, depending on prev t, and according to scheduled t that objects returned distances from prev iteration.", "", "line418: vec2 h = map( ro+rd*t );", "line424: t += h.x;", "", "simple example:", "lets say ray is very close the horizontal plane and advancing very slow due to the distance to it", "other objects are still very far and known from previous check, so those arent needed to reevaluate until (t) reaches time for them.", "Shiv2k3, 2022-02-27How can I rotate them?", "elenzil, 2022-02-07@ttg - thanks! I did not make that connection.  Emailing.", "ttg, 2022-02-05@elenzil You could ask https://www.shadertoy.com/user/reinder to fix that for all users of the app.", "elenzil, 2022-01-15@iq, HW_PERFORMANCE seems undefined on the iOS app.  I'd suggest adding something like", "#ifndef HW_PERFORMANCE", "#define HW_PERFORMANCE 0", "#endif", "archee, 2022-01-08I have some remarks.", "- The fresnel value should be the same  for the sun and sky components, because it's naturally the same.  dot(nor,rd).", "- You need to use mix for reflection and diffuse instead of diffuse + spe*fresnel, because no diffusion is possible in the angle of 100% reflection.", "Though I see little difference in the resulting image", "", "float fresnel = 0.04+0.96*pow(clamp(1.0+dot(nor,rd),0.0,1.0), 5.0 );", "// sun", "{", "vec3  lig = normalize( vec3(-0.5, 0.4, -0.6) );", "vec3  hal = normalize( lig-rd );", "float dif = clamp( dot( nor, lig ), 0.0, 1.0 );", "//if( dif>0.0001 )", "dif *= calcSoftshadow( pos, lig, 0.02, 2.5 );", "float spe = pow( clamp( dot( nor, hal ), 0.0, 1.0 ),16.0);", "spe *= dif;", "lin += mix(col*2.20*dif*vec3(1.30,1.00,0.70),5.00*spe*vec3(1.30,1.00,0.70)*ks,fresnel);", "}", "// sky", "{", "float dif = sqrt(clamp( 0.5+0.5*nor.y, 0.0, 1.0 ));", "dif *= occ;", "float spe = smoothstep( -0.2, 0.2, ref.y );", "spe *= dif;", "//if( spe>0.001 )", "spe *= calcSoftshadow( pos, ref, 0.02, 2.5 );", "lin += mix(col*0.60*dif*vec3(0.40,0.60,1.15),2.00*spe*vec3(0.40,0.60,1.30)*ks,fresnel);", "}", "MMMT, 2021-12-23@ollj Thanks! It's clear now", "ollj, 2021-12-23there is such a thing as \"smallest non-denormal number\" that limits your computatuion precision with IEE-float.", "but the epsilon for a miltitapped estimated first derivative is pretty arbitiary and depends on the schene.", "", "line 553 adds cheap gloss, its core does dot(nor,rd) as basis for BRDF-stuff, that is clamped and exponnted and linearily scaled.", "MMMT, 2021-12-23This is great, thanks for sharing!!", "", "I\u2019ve a copule of questions:", "Line 454: why did you use these specific factors for epsilon? *0.5773*0.0005", "Line 553: is this a Fresnel effect approximation?", "Thanks!", "Krykka994, 2021-09-29I must admit that it is impressive.", "marcosmith, 2021-06-09Thanks for sharing!", "elenzil, 2021-04-28thanks for the reply ollj.", "figured it out: I implemented subtraction wrong. I tested on the negated value, but returned the un-negated value.", "demo here: https://www.shadertoy.com/view/Nd2Szh.", "ollj, 2021-04-28that would mean, that they are (like) unsigned distance functions, and not signed distance functions (that distinguish inside from outside).", "", "sometimes, the interior/sign adds significant complexity.", "elenzil, 2021-04-28I've noticed that adding a subtraction operator to solids in this scene doesn't quite work.  It's as if the solids were merely shells and only renders the front-faces.", "elenzil, 2021-03-22I see. It's preventing loop unrolling by making 0 be un-analyzable at compile-time.  Thanks @ollj !", "ollj, 2021-03-13A #define substitutes code for other code during compilation.", "the important question is, when this changes the compilation result.", "", "it seems, here it does, on purpose, either speed up compilation time, or runtime (or both) (cause/effect/purpose wary between shaders and environments)", "", "by infusing iTime into a loops main conditiom, the compiler can not predict the loop, and has issues unrolling the loop, and may just not even try.", "loop unrolling slows down compile time, and may or may not result in faster code.", "", "the more complex your code gets, the less you want your compiler to unroll the source code loops. it just takes too long, it unlikely is worth it, as a humans complex code likely is already quite optimized, and loop unrolling likely does more harm than good in these cases.", "elenzil, 2021-03-13@iq, what is the ZERO #define doing ?", "iq, 2021-02-03@Aliential, it should record fullscreen, not half. Sounds like a bug, we'll have a look, but it's probably because you are in a 200% zoom mode, either in the browser or the OS. Try setting the brozser to no zoom (CTRL+0) and your display at 100% magnification. That should make it work.", "iq, 2021-02-03@CoolerZ, you are using a 3D pythagoras theorem, while mine is just 2D. Also, your SDF wouldn't work for any torus - you'd need to scale p by t.x and then divide the distance by tx, and replace 0.5 by t.y/t.x. After optimizing it (remove all divisions and the normalize) you'd end up with the formula I have for sdTorus(). It's easier (2D instead of 3D) and also has this nice interpretation (for a donut in the XZ plane):", "", "1. Imagine the torus with 0 thickness and radius t.x. It is just a circle.", "2. Find the closest point on this circle to our point p. This is done by ignoring Y to project p onto the XZ plane p.xz and we call this point x.", "3. Now that we have the closest point on the circle, we can find the distance to the second circle (section), which is length(p - (x,p.y))", "4. We are basically done, every equipotential surface of this function we created is a torus. The only thing left to do is to shift the surface having value/potential 0 by subtracting the thickness of the torus t.y: return length(p - x) - t.y", "", "Basically, the SDF I used is a bit more simple/intuitive (and efficient, since it works fully in 2D, not 3D). But your is based on a similar idea, and you got pretty close, just had to walk the last few steps.", "Zi7ar21, 2021-01-23Ayy 1000 likes", "Actually I lied, 1001 likes", "Aliential, 2020-11-16Awesome. I can't seem to record 1440p videos from this website .webmd format... I installed the unofficial shadertoy chrome extension to have a hotkey to start recording in fullscreen mode, which works fine, but the result resolution is half of fullscreen, the color depth and quality are good for that res though. is there an option? cheers!", "skorodelov, 2020-10-05Great, this is exactly what I needed! Thanks a lot!", "sylvain69780, 2020-10-05Not sure this is what you are looking for, but a pie is an IQ 2D SDF in IQ 2D SDF page", "And you can make extrussion of it", "My", "IQ revolution and extrussion", "skorodelov, 2020-09-29Great setup! Any idea how to make a pie chart segment?", "CoolerZ, 2020-09-03What about this for the sdf of a torus? https://www.shadertoy.com/view/wtBBWh", "", "float donut_d(vec3 p)", "{", "vec3 x = vec3(normalize(p.xy), 0.);", "return length(p-x)-.5;", "}", "CoolerZ, 2020-09-03What about this for the sdf of a torus? https://www.shadertoy.com/view/wtBBWh", "", "float donut_d(vec3 p)", "{", "vec3 x = vec3(normalize(p.xy), 0.);", "return length(p-x)-.5;", "}", "", "It is for a donut in the XY plane. I think of it this way:", "1. We imagine the torus with 0 thickness and unit radius. It is just a circle, specifically the unit circle.", "2. We find the closest point on this circle to our point p.", "This is done by ignoring z to project p onto the XY plane p.xy", "and then normalizing it to put it on the unit circle normalize(p.xy)", "we can convert it back into a 3d point by doing  vec3(normalize(p.xy), 0.)", "we call this point x.", "3. Now that we have the closest point on the circle, we can find the distance to it length(p - x)", "4. We are basically done, every equipotential surface of this function we created is a torus.", "The only thing left to do is to shift the surface having value/potential 0 by subtracting the thickness of the torus", "distance = length(p - x) - r", "", "I find this more intuitive/easier to remember than the one using the pythagoras theorem in 3d.", "Bip, 2020-08-29I apologise. I was tired and frustrated trying to figure out the code and I lashed out like a jerk. After going through the math it makes a lot more sense and the variable names are quite logical, I was just looking at it the wrong way. I'm sorry, if I could delete that comment I would.", "jcyuan, 2020-08-29\"These variable names are absolute trash\".    lol this obvisouly shows you know nothing about shader.", "pickledchickenfoot, 2020-07-13i think they are great too @iq", "iq, 2020-07-01I think they are great! I choose them carefully.", "Bip, 2020-05-30These variable names are absolute trash", "jorge2017a1, 2020-05-22Now you look at the colors better ... I don't remember that it had those colors !!!", "............", "Ahora se mira mejor los colores...no recuerdo que tuviera esos colores!!!", "iq, 2020-05-13Fixed sdCone() - it had a bug on the tip of the cone - and added sdOctogonPrism", "Panicq, 2020-04-06Thx !", "d74g0n, 2019-11-09thank you for this.", "iq, 2019-11-07Added the pyramid primitive", "rishipandey125, 2019-10-17How do you create toruses and other 3d objects in GLSL? Do you import obj files or create them from scratch? Thanks!", "Dogemaster09, 2019-09-12much better than my raymarching project", "vikitux, 2019-07-14Lucky 777 like shader.  ;)", "ollj, 2019-07-08i see a lot of potential in this \"unicorn/Hypercone\" shape:", "https://www.shadertoy.com/view/3tSGRR", "", "its a parametric shape that can [tween between a [cone] and an [ellipsoid]], by being a 3d shadow of a 4d object, that unifies both, sometimes called \"hypercone\", but that term is often confused with a gravity well. this is not a ggravity well, duh!", "", "its main issue is that it has no bound in one direction, unless you max() it with a sphere/plane.", "", "maybe anyone can minify that 3d shadow of a 4d object into something more user friendly and parametric.", "iq, 2019-07-03It's just a bounding box test. If a ray doesn't intersect with the box, it cannot intersect the objects inside of it.", "bratzgirlxoxo, 2019-07-03Are the box you create and the subsequent 'if' statement on lines 309-310 frustrum related calculations?", "ShadowFlare, 2019-06-19Yeah, something seems off in the coloring to me, too.", "tdhooper, 2019-06-14Did the lighting change? it looks more pink than I remember.", "iq, 2019-06-12Added truncated torus", "ReubenScratton, 2019-06-04Something's gone wrong with anti-aliasing since I last looked at this shader, the last 3 shapes in map() have a very visible black border on Mac 10.14.3 (Chrome 74).", "iq, 2019-04-04Added arbitrarily oriented capped cone.", "nexor, 2019-02-21@iq In your article about distance functions the opCheapBend is the same as the opTwist function (only some swizzling is done), if I remember correctly the bending wasn't using any matrices but only sin/cos to achieve the bending.", "tholzer, 2018-11-23Take also a look to the forked Animated 3d Primitives,", "which now can also rendered antialiased!", "https://www.shadertoy.com/view/4lSGRV", ";-)", "pix, 2018-10-27Arthas_me, please make a fork of this page using a procedural texture. It would be so cool", "ollj, 2018-10-27textures are just either uv-mapped 2d to cover a 3d surface, or textures can be 3d gradiends, but with 3-4 channels, like wood", "https://www.shadertoy.com/view/XtyyDh", "https://www.shadertoy.com/view/4tK3DV", "", "textures are either addressed per primitive-shape, and with a minx() function where only one of 2 calues is sorted, and links a textureid with it.", "", "OR", "", "textures are accumulated on each reflection or volume-cloud iteration, which comes down to mixing or alpha-compositing accumulated light with surfaces/dust that is hit (absorbtion).", "", "more realistic models are too excessive for realtime, even  bigHero6 almost never did more than accumulative 16 sub-surface bounces.", "CLPB, 2018-10-24One way of texturing is already demonstrated: use the world position for surface uv values. Alternatively, apply textures based on a dot product of the texture direction and world normal. Not sure about concave geometry though.", "Arthas_me, 2018-10-23wander how to apply textures to  them.", "iq, 2018-10-10Added sdRoundCone()", "Del, 2018-10-08is there a 'textured' version?", "iq, 2018-10-08Just improved the distance estimation for ellipsoids. It works much better now", "csz, 2018-10-05I just found this website! Great shader! Quick tweak: replacing the last line of calcSoftShadows with the following makes the soft shadows look less fake:", "", "res = clamp( res, 0.0, 1.0 );", "return 3.*(res*res)-2.*(res*res*res);", "", "It's a sigmoidal mapping that tries to simulate the shadow from a sperical light source and doesn't trigger the human eye's detection of 2nd derivative peaks (which leads to the optical illusion of lines at the shadow edges)", "iq, 2018-09-26I just modified sdCappedCone() to return the exact distance, not a bound any more.", "LYF, 2018-09-16I create a function like this:", "float myCone1(vec3 p){", "", "vec2 b=vec2(0.15,0.25);", "vec2 q=vec2(length(p.xz),p.y);", "float radio=clamp( (b.y-q.y)/b.y, 0.0, 1.0 );", "float d2=max(q.y-b.y,-q.y);", "float d1=q.x-radio*b.x;", "return length(max(vec2(d1,d2),0.0)) + min(max(d1,d2), 0.);;", "", "}", "but it doesn't work well can you help me", "jcyuan, 2018-04-03I AM YOUR BBBBBBBBBBIIIIIIIIG FFFFFFFFFFFFFFFFFFFFFFFFAN!!!", "songinnight, 2018-03-18Line number 68", "", "const float k = sqrt(3.0); // Not working in IE (Initializer for const variable must initialize to a constant value)", "", "const float k = 1.73205; // <--- would be good", "PeterBzz, 2018-03-09Hello. Can anyone help me rotate things right? I see strange things if I do it like this:", "vec3 rotateVector(vec3 v, vec4 q)", "{", "return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);", "}", "float sdBox( vec3 p, vec3 b )", "{", "p = rotateVector(p, vec4(0, 1, 0, 3.14 * 10.0 / 180.0));", "vec3 d = abs(p) - b;", "return min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0));", "}", "pjdevpl, 2018-01-20Thanks a lot Dave!", "Dave_Hoskins, 2018-01-20Looking the code 'bac' is simulating a backlight from the side, and 'dom' is the light from the general sky dome.", "pjdevpl, 2018-01-20Hi iq, could you explain what do bac and dom stand for?", "iq, 2017-12-25@pix+@benhardy, that's right, AO is the standard acronym for Ambient Occlusion in the game and film industry. Calc is for \"calculate\". Usually I tend to keep function and variable names short to make the code more readable and easy to follow, although I understand that makes it more difficult for the first timers).", "", "@liuliang: the first method is taking differences but instead of using 6 grid aligned points, it computes differentials at only 4 points (in the shape of a tetrahedron).", "", "@MichaelPohoreski: yes, we have to add a stronger forum capabilities (edit, modify, report). It'll come!", "pix, 2017-12-10At a guess, it means Calculate Ambient Occlusion - which is darkening places where ambient light is harder to reach", "benhardy, 2017-12-10Man I love this demo but I sure do wish some of the functions and variables had more descriptive names. e.g. I've got no idea what \"calcA0\" is doing.  Makes it a bit unnecessarily impenetrable.", "liuliang, 2017-10-17Hello, @iq. In the function of calcNormal, you use two methods to calculate normal vectors.", "The first is:", "vec2 e = vec2(1.0,-1.0)*0.5773*0.0005;", "return normalize( e.xyy*map( pos + e.xyy ).x +", "e.yyx*map( pos + e.yyx ).x +", "e.yxy*map( pos + e.yxy ).x +", "e.xxx*map( pos + e.xxx ).x );", ", and the second is:", "/*", "vec3 eps = vec3( 0.0005, 0.0, 0.0 );", "vec3 nor = vec3(", "map(pos+eps.xyy).x - map(pos-eps.xyy).x,", "map(pos+eps.yxy).x - map(pos-eps.yxy).x,", "map(pos+eps.yyx).x - map(pos-eps.yyx).x );", "return normalize(nor);", "*/", ", I have understood the second methods, but the first method does not understand, can you tell the reason of this calculation? Or give me some hints , reference information?  Thanks in advance.", "Lucky4Luuk, 2017-09-16Seeing the comments on a forum, I decided to create a Discord Server for shaders.", "Feel free to join here: https://discord.gg/MapMXyy", "I still need a few people to help set it up, seeing as I literally created it 2 minutes ago, seeing all the posts about wanting a forum.", "movAX13h, 2017-09-15Yes, I'd also welcome a forum, some place to talk more relaxed than below shader masterpieces and no way to edit.", "Dave_Hoskins, 2017-09-15...Or perhaps a forum somewhere?", "MichaelPohoreski, 2017-09-15@huttari Well said !!", "@Vox Please don't spam. It is people like you that no respect for others that cause comments threads to get locked / deleted / disabled.", "@iq Are there any plans in the future to allow comment moderation? Such as removing obvious spam comments, or community policing such as the ability to downvote obvious spam content?", "huttarl, 2017-09-15@vox Shadertoy in general isn't a platform to promote your app and web site. It would be more appropriate to post a comment on your own shadertoy shaders, especially those that are relevant to your new shaders.", "ollj, 2017-09-10the abs() in the marching loops break condition is most useful for the cases when the camera is too close to a surface (or below it). there are other solutions for that case, including proper camera control that avoids that case.", "", "generally the abs() is neglible. Because a distaceFunction returns an UPPER bound of the distance to a surface, therefore it returns >=0. for any point on the ray, approaching a surface, but inlikely ever exactly hitting it, and never getting below it.", "Iif it returns less than its distance to its INTENDED surface (by including a twist function), a high lipschitz-constant will be visible as \"APPARENT overstepping\", \"warping trough an INTENDED solid\", and for these cases, it will still only return >=0;", "", "\"intended != apparent\" because spatial warps deform gradient domains to a point where the intended distance field is very different from the actual warped distance field.", "", "The abs() is useful in contexts for extensions to sphere tracking, that also include fractal orbitals, volume tracking, glass, sub-surface-Scattering , scattering in general, transparency or dynamic epsilon implementations.", "hodapp, 2017-07-12@iq, in the castRay function, shouldn't \"res.x < precis\" be \"abs(res.x) < precis\"? If it's a signed distance function, and you're somehow inside the surface, res.x will be negative, and iteration will stop prematurely. I think I ran into some artifacts from this when transforming shapes in a certain way.", "MichaelPohoreski, 2017-06-28@huttarl Thanks! Like you, I work on this sporadically. I had only documented the low level primitives -- great to see you documented the high level ray marching as well. I'll leave comments on your page their if I have any requests / questions.", "", "Now if we could only get i.q. to fix all the typos on his distfunctions.html page :-)", "huttarl, 2017-06-28@MichaelP - by all means. I've added some new comments there in the last few days so I hope you get those. I'm going to keep working on it sporadically, but if there's a particular part that you think would especially benefit from comments, please let me know and I'll get to it quicker.", "MichaelPohoreski, 2017-06-28@huttari -- Mind if I add some of your comments to my XllGW4 tutorial ?", "iq, 2017-06-28No, ternary operator is way faster than mix+step. Compare (CMP) and conditional moves (CMOV) are naturally faster than trying to emulate the same thing with multiplications and additions (mix). You can try it yourself!", "nexor, 2017-04-17Isn't the ternary operator slower than using the mix-step combination?", "So won't be this union operator be faster than the one in the shader?", "vec2 opU( vec2 d1, vec2 d2 )", "{", "//old: return (d1.x<d2.x) ? d1 : d2;", "return mix(d2,d1,step(d1.x,d2.x));", "}", "huttarl, 2017-02-04For more detailed comments, see ltyXD3", "For a mini tutorial, see XllGW4", "russ, 2017-01-31@pengliu, the signed functions help with getting nice normals. when sampling around the hit-point to get the normal by central differences, you will often sample points inside the shape, you get better normals if these return negative values rather than zero. you also need it if you are gong to do the subtraction trick, like the cube with a sphere cut out here", "pengliu916, 2017-01-25hum... I see what does the s/u means in the function name. But I still don't understand what the advantages we get for using signed functions over the unsigned ones if our ray march will never sample inside those objs...", "pengliu916, 2017-01-25In order to return correct distance when inside a box I think sdBox need to return the abs of the original distance like this:", "", "float sdBox( vec3 p, vec3 b )", "{", "vec3 d = abs(p) - b;", "return abs(min(max(d.x,max(d.y,d.z)),0.0) + length(max(d,0.0)));", "}", "", "or if inside box is never considered a valid case then we should get rid of the min max stuff like the following:", "float sdBox( vec3 p, vec3 b )", "{", "vec3 d = abs(p) - b;", "return length(max(d,0.0));", "}", "Please correct me if I get it wrong. Thanks", "russ, 2017-01-24You don't need to do the whole signed box for the pyramid, just a cutting plane :", "float plane = dot( p , vec3(0,-1,0) );", ".....", "return max(plane, octa);", "iq, 2016-12-24Added!", "MichaelPohoreski, 2016-12-09New primitive:", "", "#define PI 3.14159265", "#define DEG2RAD(deg) (deg*PI/180.)", "", "float sdPryamid4(vec3 p, vec2 h )", "{", "float slopeRadians = DEG2RAD(45.0);", "float s = sin( slopeRadians );", "float c = cos( slopeRadians );", "", "// Tetrahedron = Octahedron - Cube", "float box = sdBox( p - vec3(0,-2.0*h.x,0), vec3(2.0*h.x) );", "", "float d = 0.0;", "d = max( d, abs( dot(p, vec3( -s, c, 0 )) ));", "d = max( d, abs( dot(p, vec3(  s, c, 0 )) ));", "d = max( d, abs( dot(p, vec3(  0, c, s )) ));", "d = max( d, abs( dot(p, vec3(  0, c,-s )) ));", "float octa = d - h.x;", "return max(-box,octa); // Subtraction", "}", "MichaelPohoreski, 2016-12-09Missing 2 useful defines:", "", "#define PI 3.14159265", "#define DEG2RAD(deg) (deg*PI/180.)", "MichaelPohoreski, 2016-12-09Replace hard-coded magic-number on line #66 with slope:", "float s = sqrt( 3./4. ); // slope, i.e. 0.5 = 45 degrees", "float d2 = max(q.x*s+p.y*0.5,-p.y)-h.x*0.5;", "MichaelPohoreski, 2016-12-09sdTriPrism is unoptimized. :-/ Replace Line #67 with simply:", "return max(d1,d2);", "VoidChicken, 2016-11-11Maybe a way to make the ray march faster is make a plane distance field function where:", "", "", "float plane (vec3 p, vec3 d) {", "if (d.y>=0.) return -1.; //Then in the raymarch code, -1 is no hit.", "return (o.y/(-d.y));", "}", "", "", "", "It gave me slight improvement on FPS. But this shader is still really fast.", "VoidDroid, 2016-10-25AAAH my bad, the URL explains everything!", "sorry, and nice work btw.!", "VoidDroid, 2016-10-25could you pls comment your code?", "i dont understand those shortcut names/functions...", "opU? opS? or? to??? whooot????????", "MichaelPohoreski, 2016-09-27@iq When are you going to fix the typos in your distance functions HTML? :-)", "You can see the errors here:", "https://www.shadertoy.com/view/XllGW4", "CaliCoastReplay, 2016-08-30You are pushing the envelope on graphics forward just as Ken Perlin once did...schools should be teaching Quilez voronoise and Quilez raymarching just as they do Perlin noise and Worley noise and so on...", "pickledchickenfoot, 2016-06-12this example is amazeballs.", "akohdr, 2016-04-10I added a couple more primitives here if anyone is interested.", "https://www.shadertoy.com/view/Ms3Sz2", "hackthechad, 2016-02-21Awesome reference IQ--learning a lot! Quick question though. What are the bac and dom variables in your lighting calculations?", "", "float bac = clamp( dot( nor, normalize(vec3(-lig.x,0.0,-lig.z))), 0.0, 1.0 )*clamp( 1.0-pos.y,0.0,1.0);", "float dom = smoothstep( -0.1, 0.1, ref.y );", "iq, 2015-12-20It's not randomly chose. 0.4545 is 1/2.2, which is the standard gamma value for most monitors.", "tyleeer, 2015-06-02I think I found it out, it must be Gamma Correction and the formula is randomly chosen to approximate the ideal curve.", "", "Reference:", "http://en.wikipedia.org/wiki/Gamma_correction", "tyleeer, 2015-06-02Dear IQ,", "", "You did on line 335:", "", "col = pow( col, vec3(0.4545) );", "", "It makes the color of the scene more natural, how do you find out this formula and why.", "", "Tyler", "iq, 2015-05-16You can do reflections without recursion. See ldl3zN for one example.", "Carniphage, 2015-03-23I just tried porting this shader to iOS/Metal.", "I was surprised how well it works (with just a few objects) on the iPad Air (1024x768)", "The full complement of items is a bit too much.", "", "Also tried to add a true reflection, but the shader language does not like recursion.", "denis, 2014-11-17this sample show a solution ... or better identify where the problem is https://www.shadertoy.com/view/Md2SDV", "denis, 2014-11-09I am glad to see the improvements on this sample .", "Playing with the operators I found a side effect in the twist operator. I made a sample to show the effect of twist on the cube-sphere .", "This is the link https://www.shadertoy.com/view/Xs2SDG .", "It is possible to see a wave on the sphere edge using the operator opTwist2 and worst using the operator opTwist the edges sometimes disappears . Is this a problem due to a not enough precision in the cos and sin function ?", "iq, 2014-10-27Fixed sdHexPrism()", "pix, 2014-09-30I have managed to discover it is used to affect colour.", "pix, 2014-09-29Or more generally, what does the vec2.y value represent in all the vec2s in the map function (lines 134-146)", "", "Thanks", "pix, 2014-09-29", "What does the 46.9 mean?", "vec2( sdSphere(    pos-vec3( 0.0,0.25, 0.0), 0.25 ), 46.9 ) );", "iq, 2014-04-16This is a more compact/elegant exact distance computator: float sdCone( in vec3 p, in vec3 c )", "{", "vec2 q = vec2( length(p.xz), p.y );", "vec2 v = vec2( c.z*c.y/c.x, -c.z );", "", "vec2 w = v - q;", "", "vec2 vv = vec2( dot(v,v), v.x*v.x );", "vec2 qv = vec2( dot(v,w), v.x*w.x );", "", "vec2 d = max(qv,0.0)*qv/vv;", "", "return sqrt( dot(w,w) - max(d.x,d.y) )* sign(max(q.y*v.x-q.x*v.y,w.y));", "}", "iq, 2014-04-16Nice!, thanks for doing the comparative plots. I didn't expand qvx in order to make the symmetry  between vvb/qvb and vvx/qvx more apparent (in fact I artificially expanded the equations and rearranged expression until I got d1 and d2 to look \"the same\").", "", "I think your version is beautifully compact and give a good enough approximation, so it's probably better for small-code demos such as 1k and 4k demos. It's true too that the exact one could undergo some compactation.", "tosh, 2014-04-16Should have done before posting - corrected (yet still imperfect) version:", "float sdCone( in vec3 p, in vec3 c )", "{", "vec2 q = vec2( length(p.xz), p.y );", "return bmax( dot(q,c.xy), (-p.y-c.z) / c.x  );", "}", "", "", "Your code looks nice! Mostly regular arithmetic - so wouldn't be too sure that it's more expensive. I like that square domain trick. And it takes radius and height, after all.", "", "Square root argument may flip to a small negative and cause noise - 'abs' underneath solves it. Expanding the expression for 'qvx' may give additional stability.", "", "Distance plots: https://www.shadertoy.com/view/4slSzN (not listed)", "iq, 2014-04-16I've drawn some isolines for your sdCone, but it doesn't seem to be correct. This one is (more expensive I think) but produces equidistant isolines with rounded corners and all: float sdCone( in vec3 p, in vec3 c )", "{", "vec2 q = vec2( length(p.xz), p.y );", "vec2 v = vec2( c.z*c.y/c.x, -c.z );", "", "float vvb = dot( v, v );", "float qvb = dot( v, v-q );", "float vvx = v.x*v.x;", "float qvx = v.x*(v.x-q.x);", "", "float hb = clamp( qvb, 0.0, vvb );", "float hx = clamp( qvx, 0.0, vvx );", "", "vec2 d1 = vec2( hb*(hb-2.0*qvb)/vvb, q.x*v.y-q.y*v.x );", "vec2 d2 = vec2( hx*(hx-2.0*qvx)/vvx,     q.y-v.y );", "", "vec2 d = min( d1, d2 );", "", "return -sqrt( dot(v-q,v-q) + d.x )*sign(d.y);", "}", "iq, 2014-04-16Good point. I've fixed the cylinder for now", "tosh, 2014-04-16'sdCylinder' and 'sdCone' need the \"box maximum thing\" to return accurate Euclidean distances (which cause primitives to be hit or missed within fewer iterations as with an underestimation).", "", "For the cylinder it is simple:", "float bmax( float x, float y )", "{", "return length(max(vec2(x, y),0.0)) + min(max(x, y), 0.);", "}", "", "float sdCylinder( vec3 p, vec2 h )", "{", "return bmax( length(p.xz)-h.x, abs(p.y)-h.y );", "}", "", "", "The cone is trickier: We have one component in normal direction and another one along the cylindrical height, but to use 'length' we need orthonormal axes.", "", "Here is what I came up with:", "float sdCone( in vec3 p, in vec3 c )", "{", "vec2 q = vec2( length(p.xz), clamp(p.y, -c.z, 0.) );", "vec2 n = dot(q,c.xy) * c.xy;", "return bmax( n.x, max( n.y, max(p.y, -p.y-c.z) ) );", "}", "", "", "Clamping restricts the radius to the bounds, then the normal distance from the dot product is multiplied with the normal to get back individual components along 'r' and 'h' axes. The latter gets restricted and the components are box-maxed.", "", "Visible difference in this shader: The shadow of the cone gets nicer.", "mrqzzz, 2013-10-26You can also add", "float sdWobbleCube( vec3 p, float s )", "{", "// Modified cube", "return max (max(abs(p.x)-s +sin(p.y*10.0)*0.05 , abs(p.y)-s) , abs(p.z)-s  ) ;", "}", "Adding more sins can give more complex and fun results", "mrqzzz, 2013-10-26Astonishing! Loved to fiddle with it challenging myself to create a few surfaces. Thanks!", "fb39ca4, 2013-09-21The shadow function should be updated to one that uses the distance field to step along the ray instead of fixed steps. Looks much better and requires less samples. There's one in my Loxodrome shader, and I believe you did the same thing in Fruxis.", "CPU, 2013-09-034 emails about this today, i'm thinking, could we have a \"unfollow post\" button at some point please iq? Or maybe just an option to get emails only on \"owned\" shaders? ;)", "denis, 2013-09-03You are  right! Thank you", "iq, 2013-09-03You need to increase the number of iterations from 60 to something bigger", "denis, 2013-09-03I am playing with this sample , I made a copy and I am trying to figure out the reason of the problem around the cone .", "This is the link https://www.shadertoy.com/view/XdfGWS", "it seem the cone fold the rays around ...", "Do you know why?", "iq, 2013-09-03Fixed", "denis, 2013-09-03One question. Why in the softshadow you get the max from 0.02 and dt where dt is always equal to 0.02 ?", "denis, 2013-07-28Congratulation iq it is a really useful sample!", "dominics, 2013-06-07I absolutely love this site! Tremendous amount of information and techniques!", "", "Could the frame rate be increased if in getNorm (by that time we know what object the ray intersects), the distance is only calculated for the intersected object? This would require keeping track of what object returns the minimum distance in map().", "Roeltje, 2013-04-04This sample was the perfect introduction for me to get started with distance fields. Thanks so much!", "gtoledo3, 2013-03-30Really nice scene.", "ssdsa, 2013-03-28That's very handy. I hope you're attracting new users by this!", "PauloFalcao, 2013-03-26Nice reference", "iq, 2013-03-26I know. Another one: in order to fix the ambient occlusion and actually see it, I had to change the object IDs randomly. Like, the constant literals, from 13.1 to 22.6 and stuff like that, until magically the occlusion was back (which of course has nothing to do with object IDs). This whole WebGL shader compiling thing is really scary, for it's not deterministic and depends on the machine, browsers, temperature in the room, weather, and month of the year...", "Dave_Hoskins, 2013-03-26Nice! On Chrome/Win7 it appears that moving the call to sdHexPrism to be the last in the function fixes the lighting on the cog. Changing it to another shape does not. These compile problems are so illogical, are they optimization problems caused by code ordering?", "movAX13h, 2013-03-26Just read that (your) article yesterday and wanted to start playing with it for learning reasons", "CPU, 2013-03-26Ah i see! Windows again! Yes, i'm also seeing flat colour on the \"gear\". Windows/WebGL is clearly misbehaving!", "iq, 2013-03-26Shadows are soft already. But occlusion, normals and other stuff seem to be broken under Windows", "CPU, 2013-03-26Sweet! a very compact reference. Love that twisted torus", "Great stuff!", "Would the (cheap) \"noise trick\" help soften out the shadows?", "Oman395, 2023-06-04Hey, could we use the height function from this shader (with a couple tweaks) in a mod for the game Sapiens? (No monetization and stuff, and you will be linked in the code and the mod page)", "ath500, 2023-06-01@TDM", "", "This is a GLSL shader script for a beautiful seascape scene. The code is already fairly optimized considering it's a shader running on the GPU, and the complexity of the effects it's creating. Nevertheless, there are a few possible minor optimizations and code quality improvements that could be made, but they are unlikely to significantly affect the performance.", "", "1. **Constants and precomputation:**", "Some values are calculated multiple times, like `uv * octave_m`, `freq * 1.9`, `amp * 0.22`, and `mix(choppy, 1.0, 0.2)`. These could be precomputed and reused, though it's worth noting that modern GPUs are extremely efficient at such computations.", "", "2. **Loops:**", "You have two loops (`map` and `map_detailed` functions) that are nearly identical except for the iteration count. This repetition could be removed by making a function that takes the iteration count as a parameter.", "", "3. **Function Inlining:**", "The GLSL compiler should already be doing a good job of inlining small functions like `hash` and `noise` where appropriate, but you can ensure this by manually inlining them if you want. However, this might make your code less readable and maintainable, so it's not necessarily a recommended practice.", "", "4. **Remove unused variables and functions:**", "If any functions or variables are unused, they should be removed. This is more of a code cleanliness issue than an optimization, but it can help prevent confusion and potential bugs in the future.", "", "Remember, the most important optimizations usually involve high-level algorithmic choices rather than minor code tweaks. The algorithm used here is already quite efficient for the effect it's creating, so there may not be much room for improvement without changing the visual output. It's also important to note that shader performance can be highly hardware-specific, so any changes should be tested on a variety of different GPUs to ensure they actually improve performance.", "Cesium_137, 2023-05-28what is the black lines and the noise", "TDM, 2023-05-26@ath500 you better ask it to do some code optimizations", "ath500, 2023-05-25This is a well-structured and detailed shader creating an impressive and immersive ocean simulation. It effectively represents the sea's surface with great lighting, reflections and wave forms, leading to a realistic ocean visual.", "", "Here's a breakdown of what's happening:", "", "1. **Constants & Sea Parameters**: You have defined some crucial constants, the notable ones being `SEA_HEIGHT`, `SEA_CHOPPY`, `SEA_SPEED` and `SEA_FREQ`, which control the sea's general appearance. `SEA_BASE` and `SEA_WATER_COLOR` dictate the sea's base color and reflected color, respectively.", "", "2. **Math & Noise**: The `fromEuler`, `hash`, and `noise` functions form the basis for the sea surface's randomized yet continuous appearance. The Perlin noise generated by the `noise` function, based on Ken Perlin's work, is a gradient noise, giving the sea's surface a realistic randomness.", "", "3. **Lighting**: The `diffuse` and `specular` functions help to simulate the sea's light absorption and reflection properties. This plays a significant role in bringing realism into the scene by providing depth and color variations based on light interactions with the water.", "", "4. **Sky & Sea**: The `getSkyColor` and `getSeaColor` functions simulate the sky and sea's color based on the given inputs. `sea_octave` function helps to generate the sea surface's wave patterns. The use of a Fresnel term in `getSeaColor` enhances the realism by correctly simulating light reflection and refraction based on the angle of incidence.", "", "5. **Geometry & Tracing**: The `map`, `map_detailed`, `getNormal` and `heightMapTracing` functions are responsible for creating the sea's geometry and performing ray tracing on the generated surface. `heightMapTracing` is particularly interesting as it enables the shader to mimic the camera's perspective and depth effects.", "", "6. **Main**: The `getPixel` function combines all of the above to generate the final color for each pixel. The `mainImage` function applies anti-aliasing, using a 3x3 grid for each pixel to reduce the aliasing effect.", "", "Overall, a highly impressive shader. Great work on capturing the dynamic essence of an ocean surface! The level of detail and realism here is truly commendable.", "VPaltoDance, 2023-03-23I think you have those stripes because of the uniform hash function if you add some more random noise to it - you ll get just ok picture.", "", "float noiseF(vec2 p)", "{", "return textureLod(iChannel0,p*vec2(1./256.),0.0).x; // Gray Noise Medium 256x256", "}", "float hash( vec2 p ) {", "float h = dot(p,vec2(127.1,311.7));", "return fract(sin(h)*43758.5453123) + noiseF(p);", "}", "zero_ou, 2023-01-27Very nice effect!", "fengye, 2022-12-28holy beautiful", "deamonpog, 2022-12-23Amazing <3", "bloxard, 2022-11-26@Cesium_137 \"why does it look like the water is a big sphere.\"", "The philosophical answer is because the curvature of the earth. :-)", "The technical answer is because of line 168.", "At line 168 change 0.14 to 0.0 to avoid this effect.", "Cesium_137, 2022-11-20or like a video from a gopro", "Cesium_137, 2022-11-20why does it look like the water is a big sphere", "Haruluya, 2022-09-11Amazing\uff01", "413707308, 2022-08-16new bee plus", "wyk023, 2022-08-16this is awesome", "TDM, 2022-07-28@charbavito someone posted here this shader with detailed comments years ago. Try to find.", "charbavito, 2022-07-27This is amazing! Do you have any tuto? <3", "imjamespond, 2021-12-07Astonishing!!!", "TDM, 2021-10-19@apanteleev Fixed. Thank you!", "apanteleev, 2021-10-18Nice looking sea!", "One issue with the shader: the heightMapTracing function leaves (p) uninitialized when the point is outside of the tracing range. Which in some cases (I've tried running this shader in a standalone Vulkan app) leads to image corruption.", "jin_x, 2021-09-07Very cool sea!", "cmarangu, 2021-07-31[This comment has been hidden by the shader author]", "zld126126, 2021-07-21beautiful and amazing!", "apollo_eight, 2021-07-19This is VERY nice! Looks very realistic. Could be used to generate vertices for an infinite ocean implementation but would need to add swells like Trochoildal waves.", "mDamonC, 2021-06-30This is beautiful", "cassiopeia11, 2021-06-24[This comment has been hidden by the shader author]", "emart, 2021-06-18\u725b\u903c\u554a", "marcosmith, 2021-06-09[This comment has been hidden by the shader author]", "fl0a1e, 2021-06-03coooooooooooooooooool!", "suoxinkey, 2021-04-25amazing", "neoned71, 2021-03-30amazing!", "cmarangu, 2021-03-13[This comment has been hidden by the shader author]", "0thescientist, 2021-03-11This is super neat! How would you go about applying an effect like this to a piece of geometry, like a sphere?", "DesktopCommando, 2021-03-09Ive created this as an NFT, not to sell but to include it in a guide to show artists how you can bring Shadertoy to NFTs, so sticking by the CC Licence - https://emblem.finance/nft?id=974290", "https://desktopcommando.medium.com/how-to-create-interactive-3d-nfts-c918bc070574", "mafx09, 2021-02-24wow, this is crazy", "saifuxomax01, 2020-11-19[This comment has been hidden by the shader author]", "JiexiangScientist, 2020-09-17amazing", "JiexiangScientist, 2020-09-17amazing", "celifrog, 2020-09-05Wow, it blows my mind that this is code and no playing with 3D objects", "DSProgramming, 2020-08-04How would i actually use this shader in my project? ive copied the shader code and pasted it in a new shader in my project, applied to a 3D object, etc but nothing? just pink, no texture.", "WZSIKW, 2020-08-03very niubility", "WZSIKW, 2020-08-03vey niubility", "maniek798, 2020-06-16The result is amazing, good job!", "cmarangu, 2020-05-28if anyone wants a stab at my roman numerals \"puzzle\" the is simple: same as the binary 1100101 1101110 1100011 1101111 1100100 1101001 1101110 1100111 stuff but in roman numerals. The C_216D: thing at the start is just jibberish to make them regex-searchable", "cmarangu, 2020-05-28C_216D:LXXIII XXXII CXIV CI XCVII CVIII CVIII CXXI XXXII C CXI XXXII CIV XCVII CXVI CI XXXII CV CXVI XXXII CXIX CIV CI CX XXXII CXII CI CXI CXII CVIII CI XXXII CXV CXII XCVII CIX XXXII CVIII CV CVII CI XXXII CXVI CIV XCVII CXVI XLVI", "begoss, 2020-05-28so cool!", "begoss, 2020-05-28so cool!", "shicz86, 2020-05-26\u725b\u76ae", "michelleanaya, 2020-04-23It looks interesting", "dawidePl, 2020-03-25wow", "Gemmin, 2019-12-04love the effect", "EntityBlack, 2019-10-24@CelestialAmber as I know, used hash function is hardware dependent. Glitches are not everywhere. Checkout following hashes:", "https://www.shadertoy.com/view/llGSzw", "https://www.shadertoy.com/view/XlXcW4", "https://www.shadertoy.com/view/4tXyWN", "olka_K_90, 2019-10-23Very cool, nice materia", "CelestialAmber, 2019-10-07For some reason the hash function is what's causing the visual glitches. I tried replacing it with a different has function from this shader(https://www.shadertoy.com/view/4djSRW) and it gets rid of the glitches. Does anyone know why that happens?", "cmarangu, 2019-10-03Anagramme those aren't bugs. Its an intentonal lighting affect", "Angramme, 2019-09-21wow, but there are some bugs (big white spaces)", "cmarangu, 2019-09-21this is probably the best water CG I have ever seen, or at least i have never seein anything surpass its excellence!", "cmarangu, 2019-09-21some sort of noise function raymarched or rayraced with reflections and then something else (the water is blue and green there is some depth somehow) to make it look like a material of water", "silver_gp, 2019-09-10It must be magic.", "dradutu, 2019-09-04yes, indeed, it's the integrated graphics. force your browser to run on your dedicated gpu. for nvidia i had to change it in nvidia control panel and restart the os. just right clicking on my browser and telling it to run on nvidia doesn't work. also restarting the browser without restarting the os does nothing. worked on both laptops with optimus", "dradutu, 2019-09-04if i watch this on my razer blades i get artifacts. 970m and 1060. on my asus 1060 it's smooth. could it be because on my asus the integrated gpu is hardware disabled and on the blades it's still there? the dreaded optimus? can't think of any other difference, unless maybe asdzxcv is also on a razer and this is a razer related thing", "Dave_Hoskins, 2019-08-29@asdzxcv, it still looks fine for me. Have you changed your computer at all?", "asdzxcv, 2019-08-29this is showing some artifacts now", "zzhbeautiful, 2019-08-24double click six  six six", "Brandondorf9999, 2019-07-01Why not make the aspect ratio do vertical if below 16:9?:", "", "if ((iResolution.x / iResolution.y) < (16.0 / 9.0))", "{", "uv /= (iResolution.x / iResolution.y) / (16.0 / 9.0);", "}", "dannews, 2019-06-24amazing!!!", "aipame, 2019-06-05666", "therepo90, 2019-05-24mind blowing, i could spend entire life and ending up in 2d blue and white screen", "Imsure1200q_1UWE130, 2019-05-18there is a bug  Black waves and flickering", "JUMANJI, 2019-05-11Simply amazing wow", "ikuto, 2019-05-11Amazing!", "rebbecamoor, 2019-05-03fantastic", "therainhasgone, 2019-04-03\u725b\u903c\u554a", "AnnaEverson, 2019-03-01Where it is?", "TheRedstoneHive, 2019-02-10Looks great!", "dradutu, 2018-11-17gtx 1060 laptop, works fine, 970m on razer blade with artifacts, but rendered through the resolume source looks fine. tested on windows 10 64 latest chrome on both laptops", "dradutu, 2018-11-17resolume 6 source https://mega.nz/#!l1FXAQbR!HGjv1cSIzhaRwLrr5mr0gNMiP2jeseIkC1Mmh9SdDgU", "djmips, 2018-10-11Or maybe try via his github -> https://github.com/tdmaav", "ttoinou, 2018-10-11You need to ask on Resolume / FFGL / VJing forums", "ttoinou, 2018-10-11You need to ask on Resolume / FFGL / VJing forums", "momsul, 2018-10-11hi can i use this codes resolume arena 6 any idea", "rodo, 2018-10-09Just great", "ttoinou, 2018-07-20Featured in this video  !", "yuletian, 2018-06-19Wow!", "metayan, 2018-05-18Mesmerisingly beautiful.", "pjdevpl, 2018-03-24It seems that those artifacts (line, dots and planes) appearing randomly are Intel-specific errors. After switching to nVidia, they are gone.", "AnnaEverson, 2018-03-23Wow, incredible work", "SummyRen, 2017-12-30why how much stronger", "gaix, 2017-12-19Spectacular. Any idea how to eleminate that white plain \"fields\" appearing sometimes ? Or white lines/dots ?", "ingagard, 2017-11-16TDM this one is really great!    IT!", "", "@zproxy", "That 360 is really great, actually better than the real shader in terms of contrast. Very nice implement.", "arminkz, 2017-10-15hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "zproxy, 2017-09-18360 at", "MarioNaybor, 2017-09-12great one)", "Imsure1200q_1UWE130, 2017-08-02random black things appearing on this shader...", "AlexZhou, 2017-07-27Hi,Here is Chinese friends", "etale_cohomology, 2017-07-24This is so beautiful my heart can barely take it no more", "KittenXilla, 2017-07-24Shader Tater. I like this. Why did i say 'Shader tater'..? Okay, well all i have to say, you are good with shader.", "Bitzawolf, 2017-07-16I'm blown away! This is gorgeous!", "TDM, 2017-06-06nexor, Thanks", "nexor, 2017-06-06At the 54th line you use PI as number and not as the variable you made.", "seaside, 2017-05-30crazy cool!!!!", "Nurutomo, 2017-05-27Wow!Amazing!!!", "RitongaA1991, 2017-05-02how to put in ENB series v0.306", "djmips, 2017-04-10http://i.imgur.com/2QSKDkH.png", "djmips, 2017-04-10For the first time this no longer works for me, tried in two browsers. Some strange artifacts (GTX 1080 - 376.53)", "Heresticus, 2017-03-17This is simply awesome!", "kyfwana, 2017-03-01If I move the camera origin by adjusting the y component of ori, it can only be raised by a little before the results become pretty bad.  Is there anything that I can do to allow the camera to be set to an arbitrary altitude, while still getting good results?", "madcake, 2017-02-20This is awesome", "Could you please link some articles to read about the math behind generating sea waves that you used?", "karl1972, 2017-02-17Cool stuff, you are a genius!!!", "DaniJan, 2017-01-11wow - looks really realistic", "WangYunpeng, 2016-12-20\u770b\u4e0d\u5230\uff1f", "ArtStealer, 2016-12-19amazing", "samuelalderson, 2016-11-16amazing", "CaliCoastReplay, 2016-11-16Things, even!  Though \"thinks\" may be one of my better Freudian slips on any subject lately...I love to ponder the beauty of shaders!", "CaliCoastReplay, 2016-11-16Well said, that I understand fully.  I've often thought ShaderToy (or shaders in general) could advance even further with a really definitive shader desktop app, one that can actually do thinks ST can't easily - introduce custom textures and meshes, and do a lot of vertex work.    I can only imagine how brilliant some of the best shaders on here could be if integrated with mesh tools, user textures, et cetera.", "valentingalea, 2016-11-16@CaliCoastReplay you are right, let me rephrase: originally I wanted to say there is no place for this shader in AAA because of it's over-reliance on (actually exclusively) ALU work: raymarching, noise functions, normals calculations etc. One of the main reasons for these is because of Shadertoy and its principles and limitations. The shader itself, its underlying principles of generating waves, mixing in nice colours and reflections, can be isolated, extracted and redone within other systems.", "", "With all that said, TDM's work still stands on its own and continues to inspire and awe countless people - like the guy I mentioned in my original comment", "CaliCoastReplay, 2016-11-16So - \"there is no room for an effect this heavy in a AAA title\", but \"nothing here [is] so crucial that [it] cannot be replicated\"?", "", "I'm a bit unclear as to what you are trying to say, to put it mildly.", "valentingalea, 2016-11-14@CaliCoastReplay you are overthinking it  without detracting TDM's effort there is nothing here so crucial that cannot be replicated, just excellent detail work", "CaliCoastReplay, 2016-11-14I would guess that one of the reasons this water is so good is that it *doesn't* use vertex animation.  Meshes and vertices produce inaccuracy in the modeling, in much the same way that an MP3 is lossy when it comes to sound - because instead of modeling the actual position of the wave height at any given point between vertices, you're approximating it...now of course with modern shaders you can (and need to) do a lot better than simple lerps, and model actual curves, but even in the best of AAA titles these days I can still usually see a vertex transition that isn't curved well enough if I'm really looking.", "", "But there are many reasons this shader excels - excellent specular reflections, great color choices, and also in particular noise modeling that accurately simulates real ocean surfaces.", "", "I don't know that one would be able to translate this model well to a mesh-based approach somehow - but I don't know that one wouldn't, either.  Perhaps TDM would have an opinion?", "valentingalea, 2016-11-14@CaliCoastReplay hard to say because a lot of this is very shadertoy specific and an explicit exercise in limitations. For example you can drop the raymarching and move to a vertex animation/tessellation system in a proper game.", "", "What makes this water so good btw?  Is it the motion or shapes of the waves? Is it the colors? The reflections? I wouldn't say it's realistic but it offers a bit of everything in a nice round package...", "CaliCoastReplay, 2016-11-14Ahhhhh, I see.", "", "Actually this shader can be made reasonably performant with a few tweaks, but even then it's using a majority of the GPU, so I do understand where you're coming from.", "", "What do you think it'll take to actually allow shaders this realistic in the AAA space, if I may ask?", "valentingalea, 2016-11-14@CaliCoastReplay my post had a sarcastic tone to it that maybe didn't make it thru. There is no room for an effect this heavy in a modern AAA title at the moment.", "CaliCoastReplay, 2016-11-14valentingalea:  Um, the license this was released on is for non-commercial use only.  If the Gears of War 4 team actually used it then Microsoft owes TDM some royalties...", "valentingalea, 2016-11-05the amount of interest for this shader is amazing! I was part of the Gears of War 4 dev team and at some point an environment artist asked me if it's possible to use this  I was like suuuuure", "zhangshuangxue, 2016-09-27very good!I see that the fps is high,but this effect can be realized in the mobile with OpenGL ES 2.0?", "krellex, 2016-08-31what programming language is used for this and how is this made?", "FlashyTheCreeper, 2016-08-27great!", "TDM, 2016-08-26CaliCoastReplay Yes, hit me up with an email: tdmaav@gmail.com", "CaliCoastReplay, 2016-08-26Probably my favorite ShaderToy shader of all time.  Is this available for commercial license?", "pengcaochao, 2016-07-14great work", "pengcaochao, 2016-07-14great work", "hcf, 2016-07-04heightMapTracing() using the binary search,but map(p) is not sorted.", "Takeyoshix, 2016-06-3060fps on GTX1080", "prohell, 2016-06-08\u00e5\u00a4\u00aa\u00e7\u00be\u017d\u00e3\u20ac\u201a\u00e3\u20ac\u201a\u00e3\u20ac\u201a\u00e6\u02c6\u2018\u00e5\u00b7\u00b2\u00e7\u00bb\u008f\u00e6\u2022\u00a3\u00e8\u0090\u00bd\u00e4\u00ba\u2020\u00e4\u00b8\u20ac\u00e5\u0153\u00b0", "qufangliu, 2016-05-28\u00e7\u00ae\u20ac\u00e7\u203a\u00b4\u00e5\u00b8\u2026", "Methexis_Studios, 2016-05-08This is awesome. I am new to shadertoy and I am wondering what can I do with this other than watch it? Can I use this shader anywhere?", "Somian, 2016-04-29works awesome on my 980ti (mac pro with OS X).", "", "however, on my macbook pro with intel graphics it flickers. might be shader precision?", "", "other than that: godly!", "maromero, 2016-04-10Very nice!", "fatcloud, 2016-02-10I fix the problem by making some minor change in computation that avoid direct addition between SEA_TIME and uv here:", "https://www.shadertoy.com/view/MdGGzy", "fatcloud, 2016-02-09This is a great work!", "However I find a bug here. A lot white pixels appears on the sea after running for a while.", "Simply change the line", "", "float SEA_TIME = iGlobalTime * SEA_SPEED;", "", "to", "", "float SEA_TIME = iGlobalTime * SEA_SPEED + 100000.0;", "", "will reproduce the bug immediately.", "It guess the problem might be caused by loss of precision during addition of floating point numbers in uv + SEA_TIME in map and map_detailed.", "CogSimGuy, 2016-01-19So is this completely image based in the fragment shader? By this I mean there's no mesh vertex displacement happening?", "owntheweb, 2016-01-06I love this!", "lirentai, 2015-11-26Wonderful!", "birdkingz, 2015-10-18I dunno when I can only write my own shader like this :'(", "I look at your codes and I totally don't understand what are u doing... lol", "Can someone who can give me some guides on how should I learn shader programming as I'm really interested in it", "lovelyH, 2015-09-30Height map rendering is described on IQ website.", "Root search is commonly known algorithm.", "But how did you come up with sea_octave ?", "Is it some random functions that happened to look good, or is there some advanced math behind it ?", "alfkuhl, 2015-09-13This is Awesome. The AntiAliasing tip D Hoskins made. Would make this perfect!", "jedi_cy, 2015-08-26reeeeally amaaaaaazing", "ArtScott, 2015-07-22I play Box of Rain when viewing.", "https://www.youtube.com/watch?v=b-z7uN9OjyI", "emh, 2015-07-17I'm trying to use this as water plane in my game, or perhaps a sky box eventually.", "Could you help me with passing correctly the THREE js camera position as \"ori\" and angle as \"ang\" in this JSBin: http://jsbin.com/reqali/edit?html,js,output , so that the mouse camera controls work correctly? Currently I have just set a fixed top-down perspective on a plane in my game, but it would be cool to map the shader with correct perspective, perhaps even to a sky box.", "TDM, 2015-05-08now you can try android version of it (as gpu benchmark):", "https://play.google.com/store/apps/details?id=com.nature.seascape", "Aj_, 2015-05-01This make me wonder if the entire universe is a shader program.", "Emuljan, 2015-04-10wow this is really impressive !!!", "valentingalea, 2015-03-02Insane work! Any chance of an article to explain the finer points of how it works? Cheers!", "Dave_Hoskins, 2014-12-30My GTX-680 runs this full-screen at 60fps, so I'm sure there are many many more cards that will:-", "http://www.videocardbenchmark.net/high_end_gpus.html", "saphire280x, 2014-12-30Is there any cards on the market that can run these demos in fullscreen at 60fps ?", "airtight, 2014-12-16I think you might have found the shader that god is running on the actual ocean.", "jiaolu, 2014-12-16registered account to say it's amazing work", "TDM, 2014-10-20true", "nimitz, 2014-10-20I see, and it suffers from the same problem as other interval based methods, that is not being able to predict which root it will converge to. But for cases when you (mostly) have only one possible root, like here, this is great.", "TDM, 2014-10-20it's interpolation search, very fast on linear increasing values (such as distance field). code is mine, algorithm is common.", "nimitz, 2014-10-20Finally got around to reading the code. That technique for heightmap intersection is great, is it your own work?", "McRam, 2014-10-15This is ******* amazing! A masterpiece in 185 lines of code.", "Chameleon, 2014-10-14Looks amazing!", "ayberkozgur, 2014-10-12This is one of the best CGI things I have ever seen. Simply beautiful.", "mrgnou, 2014-10-11Killer.", "abhi_bansal, 2014-10-11Awesome !!", "ac3t1ne, 2014-10-11There is some strange white noise in the first few seconds on my computer, but obviously this is incredible water it looks fantastic!", "garcia, 2014-10-08This is absolutely amazing. Awesome work!", "TDM, 2014-10-07a few days, but i've working on water rendering before.", "epascal, 2014-10-07Amazing best water ever seen, how long did you take to program it ?", "Flavio, 2014-10-06Genius work! AWESOME!", "fizzer, 2014-10-06Awesome!", "ewerybody, 2014-10-01The colors and static looks are almost perfect. But after looking at it for a while.. the waves move kind of linear. I miss this bouncing feel they usually have.", "ewerybody, 2014-10-01Whooooww!! *drool* No shit: This makes me wanna goto the sea!! I need vacation! :|", "CPU, 2014-09-29awesome!", "4rknova, 2014-09-28Amazing!", "gloinart, 2014-09-28Best water Ive seen", "Passion, 2014-09-27Incredible I love it. This is so damn impressive.", "Dave_Hoskins, 2014-09-26So true!", "TDM, 2014-09-26yeah, good idea. also, we can get squared length by dot(dist,dist).", "Dave_Hoskins, 2014-09-26Hello again! I have a tip for cheap anti-aliasing, if you want it.", "Pass the distance to the surface to the getNormal function like:", "vec3 dist = p - ori;", "float d = length(dist);", "vec3 n = getNormal(p, d*d*.0003);// Or whatever value that suits.", "", "", "And use the second parameter passed as the epsilon in the normal function.", "This smooths distant details and prevents the shimmering pixel effect.", "TDM, 2014-09-26poljere, thanks! you can uncomment line 172 to enable fog.", "poljere, 2014-09-26Looks great TDM. Love the water color! You could also add a bit of fog towards the horizon to make the transition between the water and the sky smoother", "TDM, 2014-09-26yep, thank you!", "Dave_Hoskins, 2014-09-26The ITER variable needs to be a constant at compile time, so passing a variable gives an error (GTX 680) on line 98.", "It looks great setting the loop to a straight 5 though.", "jerryjames, 2023-05-28sick", "FatalSleep, 2022-11-24Looks super neat if you invert the output color. Also looks super cool if you combine it with the default Shadertoy color shifting shader. Awesome work.", "FabriceNeyret2, 2022-04-25clicking \"fork\" then redoing what you did should be reachable ;-)", "Aw_Man3703, 2022-04-25", "@Dave_Hoskins you're right tho", "Aw_Man3703, 2022-04-25@Dave_Hoskins i'm really not that good of a programmer haha, i just changed a few functions. also if you divide line 16 by 2. or higher you get a lot more colors", "Dave_Hoskins, 2022-04-24@ Aw_Man3703, hey man, why not fork this shader and make you\u2019re own multi-styled version?", "Aw_Man3703, 2022-04-24some interesting effects can also be achieved by `clamp()`ing sin(l*9.-z-z) between -.5 and .5", "Aw_Man3703, 2022-04-24line 17 - if you replace 'abs()' with 'floor()' it looks like the light reflections behind CDs", "Aw_Man3703, 2022-04-24very nice, could watch this for hours", "", "also if you replace sin(x)+1. with sin(x)+.5 (line 17) the initial flash gets more colorful", "femalefaust, 2021-08-25hey i did this based on yr work, gave you credit of course:", "https://www.shadertoy.com/view/fstGDN", "zmbhcm, 2021-06-07Bravo!!! Change the number 2.0 in line17 to speed up and have more color", "coyote, 2021-05-26189 chars (-1 ch by dividing p by r.y within the first lenght, and -1 ch by f[i++]):void mainImage(out vec4 f,vec2 q){", "", "vec2 r = iResolution.xy,", "p = q-.5*r;", "", "float l=length(p/=r.y),z=iTime;", "for( int i=0; i<4; )", "f[i++] = .01/length(fract( q/r + p/l* (sin(z+=.07)+1.) * abs(sin(l*9.-z-z)) )-.5) / l;", "}", "me_123, 2021-05-24opps.", "wow 197 chars is amazing (:", "FabriceNeyret2, 2021-05-22hey, I just see in the history of this forum that I already golfed it down to 197 chars more that 2 years ago.", "FabriceNeyret2, 2021-05-22-1: -z-z", "-5: length(abs : abs useless", "\u2192 191 chars", "FabriceNeyret2, 2021-05-22i must be initialized. +2", "", "golfing:", "-12: t used just once, so inject it", "-8: just define r using vec2", "-8: directly use f instead of c", "", "BTW why defining p and l in loop ? doesn't seem to save something.", "-10: just p=(q-.5*r)/r.y,", "+ misc", "", "\u2192 197 chars :-D", "void mainImage(out vec4 f,vec2 q){", "", "vec2 r = iResolution.xy,", "p = (q-.5*r)/r.y;", "", "float l=length(p),z=iTime;", "for( int i=0; i<4; i++)", "f[i] = .01/length(abs(fract( q/r + p/l* (sin(z+=.07)+1.) * abs(sin(l*9.-z*2.)) )-.5)) / l;", "}", "me_123, 2021-05-20247 chars:", "", "#define t iTime", "#define r iResolution.xy", "void mainImage(out vec4 f,vec2 q){", "vec4 c;", "float l,z=t;", "for(int i;i<4;i++) {", "vec2 p=q/r,u=p;", "p-=.5;", "p.x*=r.x/r.y;", "z+=.07;", "l=length(p);", "u+=p/l*(sin(z)+1.)*abs(sin(l*9.-z*2.));", "c[i]=.01/length(abs(fract(u)-.5));", "}", "f=c/l;", "}", "turboplay, 2021-03-08Top class", "henrmota, 2020-11-05After line 17:", "", "l *= mix(1., 0.1 * sin(z * l * 0.1) * 0.5 + 0.5, cos(z)* 0.5 + 0.5);", "henrmota, 2020-11-05after line 17:", "", "l *= 0.1 * sin(z * l * 0.1) * 0.5 + 0.5;", "zeichlicht, 2020-08-13... thanks ... i'm a bit new to all this ... i have copied and made a minor change ... if there is a problem please let me know ... thanks ...", "Danguafer, 2020-08-11@ciphered, cool! It looks nice too when you add", "", "l=pow(l,4.0);", "", "after line 17 (uv+=...)", "ciphered, 2020-07-24Amazing shader.", "I found a nice effet by adding", "", "l*=l;", "", "after", "", "l=length(p);", "zevanrosser, 2020-06-20this is so amazing - never get tired of looking at it", "zevanrosser, 2020-06-20this is so amazing - never get tired of looking at it", "Pingas, 2020-06-20I tried to understand what's going on here and made some mistake while rearranging shader. Look at this:", "", "// http://www.pouet.net/prod.php?which=57245", "// If you intend to reuse this shader, please add credits to 'Danilo Guanabara'", "", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "float t  = iTime;", "float dt = iTimeDelta;", "", "vec2 res = iResolution.xy;", "", "float a = res.x / res.y;", "", "vec3 color = vec3(0.0);", "", "float z = t;", "", "float l;", "", "vec2 uv = (fragCoord.xy + 0.5) / res.xy;", "vec2 p = uv - 0.5;", "p.x *= a;", "", "float r = length(p);", "", "for(int i=0;i<3;i++)", "{", "", "z += 0.07;", "", "", "uv += p / r * (sin(z) + 1.0) * abs(sin(r * 9.0 - z * 2.0));", "", "color[i] = 0.01 / length(abs(mod(uv, 1.0) - 0.5));", "}", "", "fragColor = vec4(color / r, 1.0);", "}", "amtk, 2020-06-13I'm noob in shaders and have problem with porting this shader to unity3d..", "Shader works, but without symmetry, help me please!", "This is my code: Shader \"Silexars/Creation\"", "{", "", "Properties{", "//_MainTex(\"MainTex\", 2D) = \"black\"{}", "}", "", "SubShader", "{", "Tags { \"RenderType\" = \"Transparent\" \"Queue\" = \"Transparent\" }", "", "Pass", "{", "CGPROGRAM", "", "", "#pragma vertex vert", "#pragma fragment frag", "#include \"UnityCG.cginc\"", "", "#define t _Time.y", "#define r _ScreenParams.xy", "", "struct appdata {", "float4 vertex : POSITION;", "float2 uv : TEXCOORD0;", "};", "", "//uniform sampler2D  _MainTex;", "", "struct v2f", "{", "float2 uv : TEXCOORD0;", "float4 vertex : SV_POSITION;", "float4 screenCoord : TEXCOORD1;", "};", "", "v2f vert(appdata v)", "{", "v2f o;", "o.vertex = UnityObjectToClipPos(v.vertex);", "o.uv = v.uv;", "o.screenCoord.xy = ComputeScreenPos(o.vertex);", "return o;", "}", "", "fixed4 frag(v2f kiba) : SV_Target", "{", "", "fixed3 c;", "fixed l,z = t;", "", "", "", "[unroll(100)]", "for (int i = 0;i < 3;i++) {", "fixed2 uv, p = kiba.uv.xy ;", "//fixed2 r = i.uv.xy / 1;", "uv = p;", "p -= .5;", "p.x *= r.x / r.y;", "z += .07;", "l = length(p);", "uv += p / l * (sin(z) + 1.)*abs(sin(l*9. - z * 2.));", "c[i] = .01 / length(abs(fmod(uv, 1.) - .5));", "}", "return fixed4(c/l,t);", "}ENDCG", "}", "}", "}", "", "Shader works, but not like on this website", "Example:", "FabriceNeyret2, 2020-04-29yeah, who's calling ?", "jerrypoiu, 2020-04-29God?", "Danguafer, 2020-02-26@rory618, lol. I like how it looks", "chrisjj, 2020-02-21OK, got it. Thanks. Well, that's a tiny difference compared to some other iTime-sensitive shaders here that go completely haywire after a day.", "rory618, 2020-02-20The difference is the smooth transitions become hard edges and the framerate is reduced. You can do #define t iTime+1e6 to skip the week of waiting", "chrisjj, 2020-02-20New look?? You pic seems very similar to the normal look here.", "chrisjj, 2020-02-20New look?? You pic seems very similar to the normal look here.", "", "[img=https://i.imgur.com/hzf3mbs.png]", "FabriceNeyret2, 2020-02-20\"I ran this shader for a week by accident\" (mistakenly computing, like, 10^30 operations).  Only in the XXIies :-p", "rory618, 2020-02-20I ran this shader for a week by accident and eventually it gets a new look when precision starts to run out:", "athlete, 2020-01-03Brilliant!", "hyunxi, 2019-10-26@FabriceNeyret2", "I notice there are some tricks on displaying 3D in 2D using matrix. Currently I use geogebra if 3d is heavily involved.  True, I love shadertoy where I can comment the code and test out each piece of the code step by step, super useful.", "FabriceNeyret2, 2019-10-23Desmos vs 3D: you have to hack a little bit more to have it ;-) https://desmosgraphunofficial.wordpress.com/", "", "PS: the good thing with shadertoy is that you can do destructive tests to understand somebody else shader :-D  (modify, cut, etc).", "hyunxi, 2019-10-23@FabriceNeyret2 Thank you for the answer, already join the FB group. There are a lot of interesting information there!", "I am using desmos to read and test out some shader code, but desmos does not have a 3d version. This makes testing  col = f(x,y) rather difficult. Just wonder if you have a workaround ?", "This part : a lot of function , .01/length(abs(mod(uv,1.)-.5)) reading it alone is not too hard, however conbining the previous result and still produce the right looking result if rather difficult to understand.", "", "Again, appreciate your help !", "FabriceNeyret2, 2019-10-23@hyunxi:", "", "NB: you might be interested in the facebook shadertoy discussion group ;-) https://www.facebook.com/groups/147749602472741/", "", "formulas: it might help you to plot and play thems in https://www.desmos.com/calculator", "", "still, many shaders are poorly written, for instance because it was just artist clay to play with the look, or code-golfing party to get the shortest possible code, or just beginners code.", "For instance in length(abs(mod(uv,1.)-.5));", "abs does absolutely nothing that length is not already doing,", "mod(x,1) is fract.", "if uv was just the screen coordinates normalize to ~ 0..10,", "then fract(uv)-.5 creates ~10x10 tiles with local coordinates in -.5 .. .5", "length() thus just grows radialy, while const/length make an intense central spot and vanish radialy.", "Here it's just a bit more complicated because uv is more or less modified in the loop.", "hyunxi, 2019-10-22Hi there, I am a newbie for fragment shader and want to ask some basic question. It would be nice if any of you can give me some direction.", "I want to know how do you design a fragment shader like this? Do you try out a lot of parameters or  do you know the function for the curves and write it out ?", "The ripple pattern part : abs(sin(l*9.-z*2.) I can understand,   the time interval to offset the RGB color I can understand. But when it comes to  \".01/length(abs(mod(uv,1.)-.5))\" I don't understand . I can see the result , and what this function is doing but I wonder how you find out this function will have good result? and how do you find out 0.5 is the parameter to use to make it work?", "", "Lots of question....", "", "Appreciate if you can help me.", "clarab, 2019-08-11you did an amazing job", "Brandondorf9999, 2019-07-01Whoops. Meant this one:", "", "if (r.x/r.y < aspectcondition)", "{", "p/=(r.x/r.y)/(aspectcondition);", "}", "Brandondorf9999, 2019-07-01It would be great if the aspect ratio can vertically extend using these lines:", "", "#define aspectcondition 1.7777777777778", "#define zoom 1.0", "", "p*=zoom;", "p.x*=r.x/r.y;", "if (r.x/r.y < aspectcondition)", "{", "p*=(r.x/r.y)/(aspectcondition);", "}", "FabriceNeyret2, 2019-03-13argh, right !", "coyote, 2019-03-13@Fabrice, you don't need abs if you are taking the length of it. (-5 chars)", "Dave_Hoskins, 2019-03-01@AnnaEverson, whatever you can imagine.", "AnnaEverson, 2019-03-01hey, what is it?", "FabriceNeyret2, 2019-01-14nice !", "", "some remarks:", "", "uv , p , l should better be initialized before the loop.", "Beside, the aspect-ratio correction trick is kind of ugly compare to just not distorting at first.", "", "why using #defines rather than variables ?", "", "mod(uv,1.) = fract(uv)", "", "c[i]: c useless, fragColor could be modified directly", "", "-> cleaned-up version ( 210 chars rather than 302 )", "void mainImage( out vec4 O, vec2 u ){", "", "vec2 r = iResolution.xy,", "U, p = ( u - .5*r ) / r.y;", "float z = iTime, l = length(p);", "", "for( int i=0; i<3; i++ ) {", "z +=.07;", "U = u/r + p/l * ( sin(z)+1.) * abs(sin(l*9.-z*2.));", "O[i] = .01 / length( abs(fract(U)-.5) );", "}", "O /= l;", "}", "", "", "with more extreme golfing, this can goes down to 196 chars:", "void mainImage( out vec4 O, vec2 u ){", "", "vec2 r = iResolution.xy,", "p = u - .5*r;", "float z = iTime, l = length(p /= r.y);", "", "for( int i=-1; i++ < 3; z +=.07 )", "O[i] = .01 / length( abs(fract(u/r + p/l * ( sin(z)+1.) * abs(sin(l*9.-z-z)))-.5) ) / l;", "}", "", "", "( and with new webGL2 extended line using \\ , we can even go down to 182 chars:  :-)", "#define mainImage( O, u )                    \\", "vec2 r = iResolution.xy,                 \\", "p = u - .5*r;                       \\", "float z = iTime, l = length(p /= r.y);   \\", "for( int i=-1; i++ < 3; z +=.07 )        \\", "O[i] = .01 / length( abs(fract(u/r + p/l * (sin(z)+1.) * abs(sin(l*9.-z-z)))-.5) ) / l", "", ")", "AudioMaverick, 2018-10-15How do I get permission to use this in my Virtual DJ display? I don't do clubs... special events.", "Danguafer, 2018-08-19Sabooo, yes, but please use the credits (it's in the code now)", "bluedrop, 2018-06-21AAAAAAAAAAAmazing!", "soulscape, 2018-05-25Divine!!", "CLPB, 2018-05-19Love the colors!", "Sabooo, 2018-04-24Hi I like your shader may I adapt it and use it for my game?", "chrisjj, 2017-12-21Anyone analysing this may find useful this simplified version https://www.shadertoy.com/view/MtlBDf .", "chrisjj, 2017-12-20sambaridli, z+=.07 ensures R G and B differ.", "chrisjj, 2017-12-20What's the purpose of t on line 19?", "jniac, 2017-09-15oh gosh", "Dave_Hoskins, 2017-09-04In my DSP CPU software I use the standard 'sqrt' because it's been implemented in hardware since then, and don't forget the  SIMD instructions. We don't even how a particular compiler rearranges this code for optimisation purposes.", "Ebanflo, 2017-09-03The article said it was off by only .175% at most, right? I would be suprised if invsersesqrt was anything else because it said that calculating sqrt the same way then performing a division is 4 times slower.", "Dave_Hoskins, 2017-09-03We don't know they use that estimation. I thought 'inversesqrt' was at least accurate.", "Ebanflo, 2017-09-03don't think so https://en.wikipedia.org/wiki/Fast_inverse_square_root", "Dave_Hoskins, 2017-08-31I'd like to know if 'inversesqrt' is just a helper function that has a divide inside it?", "Ebanflo, 2017-08-31actually that's 7 divisions", "Ebanflo, 2017-08-31This might be optimized by the compiler, but you can save yourself 2 divisions by letting", "l=inversesqrt(dot(p, p)); and then multiplying by l instead.", "chenwanwan13, 2017-08-29Amazing !!!Your code is so short!", "Ebanflo, 2017-04-25c is a vec3 and l is just a float, so c/l is a vec3 as well", "sambaridli, 2017-04-17Hey Danguafer, it seems like the R, G and B components are getting the same value, but how is it that we see the colours separate out? I observed that when all the loop code except line 17 was moved out, the effect is similar but completely white. And also while incrementally moving the previous lines out of the loop, some different effects seem to be coming. Could you explain why all this is happening?", "", "PS: I'm new to shaders, just starting to pick them up.", "wizgrav, 2016-08-31I combined your code with some music analysis I'm working on. Your shader is a very good fit for fast rhythmic tracks http://wizgrav.github.io/aframe/music/index.html", "denzen, 2015-05-28This is awesome.", "iq, 2015-04-08Very pretty", "Dave_Hoskins, 2014-06-04It might help if this site acknowledges the 'Post' button when it's pressed because people are re-hitting it thinking the button didn't work.", "designcity, 2014-06-04my net speed is low ,sorry..", "designcity, 2014-06-04\u00e5\u00be\u02c6\u00e5\u00a5\u00bd \u00ef\u00bc\u0161\u00ef\u00bc\u2030", "simesgreen, 2014-05-08beautiful, the RGB diffraction effect totally makes this.", "Danguafer, 2014-05-03Thanks, guys!", "mu6k, 2014-04-29Amazing! So short and it looks so awesome!", "Dave_Hoskins, 2014-04-29I like the way you access the vec3 as an array. It's quite shocking how small the code is, nice one.", "FabriceNeyret2, 2023-05-11@ollj: yep, the wyatt's engine is very sensitive to resolution since some terms are in  normalized coordinates and some not. Plus probably some forces should be normalized by the total amount of segments.", "ollj, 2023-05-11it quickly collapses to all-black in 933x524px resolution", "altunenes, 2023-04-19 apologize for the confusion - I meant to say that I'm experiencing the same issue as another user: ShnitzelKiller. I saw her/his comments below, and it seems that he/she was also experiencing a similar problem.", "((iphone's autocorrect sometimes behaves unusually (\"peculiar???\" what is this lol))))", "FabriceNeyret2, 2023-04-19I don't understand why you mention user ShnitzelKiller here.", "Are you telling about a problem with the present shader, or another ?", "Anyway note that it is ultra dependent to window resolution, so not very robust.", "altunenes, 2023-04-19In case you want to know:", "", "I'm experiencing a peculiar problem with @ShnitzelKiller. I have an RTX 3060, running Chrome on Windows 11 with all the latest updates installed. When I run it, I notice a sudden, fast-moving line that appears on the screen, followed by a complete black.", "works perfectly fine in the thumbnail.", "xef6, 2023-04-07thank", "xef6, 2023-04-074#>https://www.youtube.com/watch?v=nUgcYVrJzDA", "patrykjankowski, 2023-04-05nice", "HunterX, 2023-02-16wonderful!", "FabriceNeyret2, 2023-01-19@jib: you mean it degenerates in fullscreen ? or black from the beginning ?", "( when you go fullscreen, do ALT-down to reset then ALT-up to restart )", "jib, 2023-01-19I agree it is great, and also confirm that it blacks out in fullscreen in my comp too (Windows 11 22621, AMD Radeon R7 M340)", "Raistlin_fuego, 2022-12-08!!! Beautifull", "Matyldabaranowska, 2022-10-14wow, nice", "ttoinou, 2022-09-27Incredible", "drmelon, 2022-08-06Looks awesome! Love the wriggly string effect.", "beherca, 2022-07-10@FabriceNeyret2 ,  I have read your comments on my shaders, and thank you for all your advices.", "FabriceNeyret2, 2022-06-03pb is that \"normal\" view resolution differs for everybody, or just if you resize the browser window :-)", "ok for me at 640x360.", "hesitating but seems ok at 800x450.", "at fullscreen (for my screen) ok but many crossings.", "won't make a heart but doesn't explode at 512x288", "", "The main issue is that the code don't rely on normalized coordinates. Now maybe there are also some portability issue (e.g. if lack of some initialization).", "ShnitzelKiller, 2022-06-02For me, it works in the thumbnail, and in fullscreen it mostly works except the heart is incomplete, but in \"normal\" view there's a few white bits that immediately vanish leaving a black screen.", "unoti, 2022-05-21I learned so much from you, thank you!", "FabriceNeyret2, 2022-02-24but the it no longer work at 640x360 ( or in the icon, I guess ).", "Several numbers should probably be resolution dependent ( but it's Wyatt's code, I don't masterize it ;-) )", "morimea, 2022-02-24@bitRAKE edit > float const in G1 function (line 11 Common) from 0.3989422 to smaller  value, for example I found 0.0398 works for 1080p resolution", "then test", "bitRAKE, 2022-02-24I go full screen then hit the <space> key in Chrome to reset. It appears to be non-deterministic. Sometimes it will devour itself, having growths that never stabilize within the heart, and sometimes coalesces to the attractor. It's quite poetic in 2160p and 1440p.", "FabriceNeyret2, 2022-02-22@patu: behavior seems to be resolution-dependent.", "morimea, 2022-02-22@patu you can try to change float const in G1 function (line 11 Common) from 0.3989422 to smaller  value, for example I found 0.0398 works for 1080p resolution", "and tell what value works for you", "patu, 2022-02-21black screen, 1200x675", "FabriceNeyret2, 2022-02-09note that I changed very little to wyatt's shader.", "- trim most of Image tab", "- lines #12,13, 40 in BuffA", "elenzil, 2022-02-09shane, noise() changes the appearance a bit for me. with noise === 0 the loops are a bit closer to layers.", "Shane, 2022-02-08Such a great example. I've seen these rendered as single closed curves with forces applied to them, and as single lines over time. I've never looked into it myself, but I'm guessing the Processing crowd probably know the specifics.", "", "By the way, the noise function seems to have no bearing on my machine. I can set it to return zero, and it doesn't change anything. I'm guessing the \"heart\" function itself provides the randomness? I haven't tried to decipher this yet, so I'm in random guess mode.", "", "On a side note, the noise function can be reduced to use fewer \"fract\" calls, etc. Whether the compiler cares or not, I wouldn't know, but fewer fract calls is a good thing, right?", "float noise(vec2 p){", "", "vec4 w = floor(p).xyxy + vec4(0, 0, 1, 1);", "p -= w.xy; // Fract.", "", "float", "x1 = mix(hash(w.xy), hash(w.xw), p.y),", "x2 = mix(hash(w.zy), hash(w.zw), p.y);", "return mix(x1, x2, p.x);", "}", "", "Of course, we each have faster noise functions that could be dropped in.", "elenzil, 2022-02-08I'm not sure how to get 800x450. For me the next step down after 960x540 is 768x432.  Which does mostly work but there's that strange attractor on the right-hand edge.", "morimea, 2022-02-08@FabriceNeyret2 I made custom shader yesterday where I reset every buffer to 0, and it has same behavior like this shader now with reset button, but idk maybe I missed something... (obviously I thought it may be because interpolation because texture, but changing to texelFetch(Common) still does not fix resize)", "", "I think it may be because float constant in G1 function (in Common)", "changing it to 0.0398 make shader work in 1080p resolution fullscreen for me (ofc its bad bruteforce debugging idk how to fix it correctly)", "FabriceNeyret2, 2022-02-08strange. now, the outcome are very resolution dependent, so maybe problems too.", "", "For me its ok at 800 x 450, 640x360, ,  512x288 , 420x236  (but then strangely attached to the right in these 2 cases ) and even in fullscreen.", "but maybe there is something not initialized ?", "elenzil, 2022-02-08for me it has to be run at 960x540.", "larger or smaller fizzles out as @ShnitzelKiller says, or has other artifacts.", "ShnitzelKiller, 2022-02-08The original shader also fizzles out instantly.", "morimea, 2022-02-08@FabriceNeyret2 thanks for adding reset, but my point was not only about adding reset - this shader \"lines burn itself\" on fullscreen on reset, and on resolution different to 800x450 also has some weird behavior.", "", "> plugin", "I do not like to install any plugins in browser, sry", "FabriceNeyret2, 2022-02-08ok. space to reset.", "FabriceNeyret2, 2022-02-08@morimea: even with the plugin ?", "morimea, 2022-02-08@FabriceNeyret2 Shadertoy hotkeys does not work for me, idk", "FabriceNeyret2, 2022-02-08maybe you need the shadertoy unofficial plugin for that ? ( good for some many things, anyway :-D )", "fancyzero, 2022-02-08the alt+bottom arrow never worked", "FabriceNeyret2, 2022-02-08rest: well, aren't the rewind button or ALT + bottom arrow enougth ?", "morimea, 2022-02-08to add reset key: (R)", "in BufA BufB add Keyboard to iChannel2", "to line 3 BufA, line 8 BufB", "bool reset = bool(texelFetch(iChannel2, ivec2(82, 0), 0).x);", "and ||reset to line 35 BufA, line 29 BufB", "", "For some reason on fullscreen or resolution smaller than 800x450 curves dont connect and disappear or leak.", "morimea, 2022-02-07wow! super!", "works as expected Nvidia OpenGL", "FabriceNeyret2, 2022-02-07@ShnitzelKiller: was the original working ? https://shadertoy.com/view/fsjyR3", "jeyko, 2022-02-07hm, it looks moreso like some kind of rope simulation.", "Differential line growth is this algo: https://www.youtube.com/watch?v=XQtmWXheowA&ab_channel=DavidFerreira", "ShnitzelKiller, 2022-02-07NVIDIA 2060 super RTX btw", "ShnitzelKiller, 2022-02-07I just briefly see some white particles, then it's black forever. Can't draw anything either.", "FabriceNeyret2, 2022-02-07@jeyko: what do you mean by \"differential growth\" ?  the rest length of \"springs\" is pretty hardcoded.", "Growth would really be better.", "elenzil, 2022-02-07this is amazing !", "FabriceNeyret2, 2022-02-07Ideally we should start with a circle of few particles, then subdivide the curve as it grows.", "jeyko, 2022-02-07is this differential line growth?", "jeyko, 2022-02-07haha, i was waiting for your take on it, v cool", "Cesium_137, 2023-05-28they should have a recommendations for shadertoy based on what you have liked and who you're following and what you search for", "Qendolin, 2022-09-22@Ric3cir121 Thanks, I've added it", "Ric3cir121, 2022-08-31you should also init fragColor, the shader doesn't work on linux", "", "fragColor = vec4(0);", "tomachi, 2021-11-14Very very very close. Closest ever. It is so close.... it is actually more like the Amiga1200 version of the same saver. The fade out is too hifi (its better than original). That is an odd quantity of views. Maybe an entire national has set this as their national lanaguage screen saver yeah?", "Shane, 2021-05-28That's pretty cool, and nostalgic.", "Andre, 2021-04-03Cool, one of the 1st shaders i made here was of the same thing. I've been using this as coding demo since 1987.  There was a game qix who also did this", "https://www.shadertoy.com/view/Xsl3z2", "SarahC, 2021-03-03So many views?  High tec systems barely imagined when mystify was written displaying a good reproduction of the screensaver... old skool on high tec graphics hardware!", "Qendolin, 2020-12-18how did this get so many views?", "dandyandy, 2023-05-28The clouds are quite nice", "ath500, 2023-05-25This shader is a wonderful illustration of both an animated grid pattern and an atmospheric rendition of a sun setting behind a stylized Mount Fuji. It's impressive to see the intricate detailing put into the geometry of the scene.", "", "The use of the sun function creates a vivid sunset feel, with the 'bloom' effect giving a soft halo around the sun. It's interesting to see how the battery parameter is used to modulate the sun's intensity and position.", "", "The grid effect created in the grid function is interesting, it gives the feeling of a flowing river or a shifting landscape, with the intensity again controlled by the battery parameter.", "", "Your manipulation of signed distance functions in the sdCloud function to create the clouds is artful. The clouds provide a dynamic element to the scene and are nicely detailed, using the interaction of multiple sine and cosine functions to simulate their soft, puffy appearance.", "", "The overall image is indeed reminiscent of a serene evening at the base of Mount Fuji. The colours chosen for the final image, specifically the mix of purples, blues, and oranges, really contribute to the creation of an endearing and tranquil mood.", "", "My only suggestion would be to perhaps add some user control - possibly through mouse input - to adjust the 'battery' level in real-time, which could make the scene more interactive.", "", "Well done on creating such an aesthetically pleasing shader!", "Raistlin_fuego, 2022-11-09Incredible...", "babaQwer, 2022-09-26waoooo", "jaszunio15, 2022-02-21If you remix the shader, give author credit, shaders have CC BY 3.0 license by default, thanks", "Nice mod though", "https://www.shadertoy.com/view/3t3GDB", "phrank, 2022-01-02(: It's a beautiful thing!", "subby187, 2021-07-10would it be cool if i used this for a music stream?", "warptarium, 2021-03-28woahhh this is amazing!", "kaiware007, 2021-03-23Thanks! Good music!", "dot23, 2021-03-19https://www.youtube.com/watch?v=lSY1tyuR3WQ&t=209s", "", "Acid Mount Fuji by Susumu Yokota is ideal soundtrack l)", "savegor, 2020-11-27Yeah! Cool!", "poljere, 2020-01-29Nice!", "PixelPhil, 2020-01-28I love it.", "The grid could use some sort of multi-sampling or antialiasing to ease out the moire patterns.", "Nimajamin, 2020-01-28As an 80's child.... niiiiiiiiiiice", "FabriceNeyret2, 2022-09-02@derhenryschmidt: I guess you have no idea who you are talking to ( or you would find his contact info trivially ). ;-)", "derhenryschmidt, 2022-09-01can we make Bussiness together? please give me your contact, email or discord or WeChat?", "", "I need some new shaders to make. I am the artist", "Dominic_Cole, 2021-12-24This is great", "sandiMexicola, 2021-05-29Lovely", "Insidious_Scripter, 2021-03-19nice use of volumetric noise!", "raabix, 2021-03-04This looks just beautiful. Another amazing piece of work by the godfather of shadertoy.", "FabriceNeyret2, 2021-02-02have you tried switching the frame coordinates so as rays correspond either to the u, v or w texture axis ?", "AFAIK, 3D textures are stored as flat piles of z-curve encoded 2D textures, so there should be an asymmetry in the efficiency.", "", "Cache: well, even if they could be stored in every texture processor cache, their pages still happen to be loaded on demand (even if they can stay). This takes time, + competition between the texture processors ( there are several burst mode specific to textures, but I don't think there are broadcast modes ).", "", "BTW the starting of threads + the end of threads are classical issues in parallelism: the start because there is often a huge competition to access data, and the end because the whole process often wait for the last outliers thread to finish - could be very few so no longer really \"parallel\".", "On Cuda you can try to organize the code smartly to spread init access + to equalize chunks of thread content (e.g. scheduling rays segment), but on GLSL we generally can't do much.", "iq, 2021-02-02Interestingly, using the 3D texture is slightly slower than sampling the 2D texture twice and doing the interpolation by hand, even with LOD off. At least that's what I see on my laptop (1070 GTX M) with true WebGL (Angle) and with a whole screen super-sampling of 20 (necessary for highlighting any perf differences). That is surprising, I was expecting the tiny 3D grayscale texture (32x32x32 = 32kb) to be always in the cache and be ultra fast to sample.", "FabriceNeyret2, 2020-09-28I have the impression that starting noise with x = mod(x-50.,100.); would help ?", "", "Now this code is very very old, and use trick to emulate volumes, which may not help.", "-> replacing with the true volume texture would help.", "", "I see that if I map a rand volume in channel 0 and replace", "", "also, the mapN trick can now be simplified as noise() with", "float noise( in vec3 x )", "{", "return -1.0+2.0*texture(iChannel0,x*32./1024.).r;", "}", "there is no long problems with big iTime.", "", "float map( vec3 p, int n )", "{", "vec3 q = p - vec3(0,.1,1)*iTime;", "float f, w = 1.;", "for(int i=0; i<n; i++, w*=2.1 )", "f  += .5/w * noise( w*q );", "", "return clamp( 1.5 - p.y - 2. + 1.75*f, 0., 1. );", "}", "", "then replace MAPLOD by map(LOD)", "chubujin, 2020-09-27Hi, I have a question, after running for a long time, why does the noise become uneven ?", "i tested it by setting (iTime) to (iTime+100000.0),", "FabriceNeyret2, 2020-09-01Note that if a high-freq LUT is added to density (e.g. to show cloud skin only) the technique get very aliased.", "-> preintegrated segment shading fix this : https://www.shadertoy.com/view/3tjfWD", "", "Beside, isn't it a proper dt missing in  MARCH ?", "col.w should be den*dt *const , not den*.4 ,  especially with dt steps being not regulars.", "positivepig, 2020-05-12amazing", "SabRango, 2020-01-07xd!", "FabriceNeyret2, 2019-08-02for several reasons:", "- iq hardcoded the texture size. line 14, replace 256. by iChannelResolution[0].xy (and maybe elsewhere).", "- this noise texture is special: r planes are equal to g planes with an offset, which allows mimicking volume, thus line 13. hard to fake for other textures.", "- texture flag vflip must be unset  and linear instead of mipmap", "ZzEeRO, 2019-08-02why I can't change this noise texture?If I use other textures,it goes wrong.", "iq, 2019-06-23There are quite a few tutorials and beginner videos on raymarching in the internet, they should cover all you need to get started. Google for \"raymarching shader\", \"sdf raymarching\" or \"volumetric raymarching glsl\" and similar combinations, you'll find them.", "0thescientist, 2019-06-23Any chance that somebody could provide a breakdown of what is actually going on in the code here?  I feel crazy since everybody commenting seems to understand it.  For example, what are these map functions doing?  What geometry is represented by the variable names, e.g. \"ro\", \"ta\", \"ca\", \"rd\", etc.?  I'm trying to adapt this shader to wrap volumetric clouds around a sphere, but it's very difficult without more background.", "ollj, 2019-05-09UnityEnginge can do raymarching-spheretracking, but", "- To mix polygon meshes with the z-buffer that you get from raymarching, you use the (deferred shading) pipeline of unityEngine. to a point where most people call ANY spheretracking within Unityengine just broadly \"deferred shading\" (as it often tends to also include particle systems that are not necessarily fluidSimulation or density-fields)", "- This is done verywell in at least 3 different UnityEngine plugins, most of them are only documented in japanese, as their main purpose is to make composites of rigged-polygon-mesh models for MMD dancing, with more complex spheretracked sceneryand special effects. the result is that you can post-processing screenspace-CSG with rigged-mesh-models.", "- all others are less sophisticated, mostly only do spheretracking of fractals within unityEngine.", "- they use a lot of FrameBufferObjects, many parameters per pixel, and call the z-buffer a \"g-buffer\".", "- these plugins most likely do not work with older unityEngine versions. newer versions come with more opengl/directx support, that is mandatory for them.", "Frogger, 2019-04-30Does anybody already adopted this code to use it in Unity? I would appreciate any help.", "@pp did you achieve it?", "FabriceNeyret2, 2019-03-15@henry: several peoples have done something cousin to that here: browse the best off, read and ask there ;-) .", "Or how do you expect that someone can answer here on such an ultra large and ultra technical question, which correspond to several different scientific papers or blogs ?", "henry, 2019-03-15How would i make a sunset emulator with dozens of different shaped clouds lit orange and red on one side and dark on the other, at different altitudes?", "ShadowFlare, 2019-03-15How would I make this more fog-like?", "rthriller, 2019-03-07Is there a way to run this in Natron shadertoy plugin? Thanks", "ttoinou, 2018-11-08Yes but seems way easier to get into it ;)", "Lanlost, 2018-11-08... ... Is this the new demo scene?", "bigmi, 2018-08-21amazing purfect effect, thanks for share. Have any test on a model not a postprocess?", "spacetug, 2018-08-17@Dave_Hoskins it's the texture. but it's not flipped. I was relying on android framework PNG decoding and upload and looks like it is messing the channels (I guess it might be flipped ;) ).", "", "Thanks for the hint", "Dave_Hoskins, 2018-08-16@spacetug, It looks to me like your texture is flipped vertically. The alignment of the texture is important to retrieve the correct 3D data.", "ttoinou, 2018-08-16spacetug, maybe you should ask on the facebook group : https://www.facebook.com/groups/147749602472741/", "spacetug, 2018-08-16Hello there,", "I'm building a shadertoy client for Android and I'm getting strange artifacts on several shaders.", "They look like precision issue but as I'm new to this, don't know how to solve (I'm quite sure I've set precision do highp).", "I've uploaded captures on a Pixel 2 XL here:", "https://photos.app.goo.gl/5TAwa23tk4mXPZ7b7", "Notice the \"rings\" on `Clouds` and the camera going straight in `Volcanic`", "", "Any ideas?", "thanks!", "ttoinou, 2018-07-20Featured in this video  !", "FabriceNeyret2, 2018-04-25simply means the R(x,y) = G(x+37,y+17).", "It' a hack to fake 3D volumes (that where not available at that time).", "Just manually interpolating between the R and G slices (obtained in one single fetch) is like interpolating in a volume slice.  then when floor(z) pass to the net slice you just offset xy index by (37,17) for continuity.", "starforce08, 2018-04-24Thanks a lot. This texture works. But still I am not sure what \"G and A channels are R and B translated by (37.,17.) \" means, and why we can obtain faker 3D cloud volume from it. Still a lot to learn~", "FabriceNeyret2, 2018-04-23explanation about these noise textures: https://shadertoyunofficial.wordpress.com/2016/07/20/special-shadertoy-features/", "chrisjj, 2018-04-23starforce08, download here https://i.imgur.com/Wpq1UDJ.png . Next time you could download Synthclipse -- it contains all the ST textures.", "starforce08, 2018-04-23Hi,Dear IQ,I tried to realize this demo in local OpenGL context. However, I found the texture iChannel0 have become an important issue. I generate a RGBA noise texture by myself to replace it, but some serious aliasing occured. Then I tried to enable the VFlip option online, the same aliasing occured too. So I assume this is not a random noise texture, but a kind of LUT with certain order. I'm wondering where can I download this texture, or how can I generate it by myself. Best regard!", "chrisjj, 2017-12-26I just tried Firefox 56 - the failure is gone.", "iq, 2017-12-26Yeah, textureLod is part of the WebGL 2 standard, a browser cannot claim to be doing WebGL 2 without implementing textureLod(). It works great here in Firefox.", "chrisjj, 2017-12-23F, yes.", "", "This browser supports WebGL 2", "Platform: \tWin32", "Browser User Agent: \tMozilla/5.0 (Windows NT 6.1; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0", "Context Name: \twebgl2", "GL Version: \tWebGL 2.0", "Shading Language Version: \tWebGL GLSL ES 3.00", "Vendor: \tMozilla", "Renderer: \tMozilla", "Antialiasing: \tAvailable", "ANGLE: \tYes, D3D11", "Major Performance Caveat: \tNo", "FabriceNeyret2, 2017-12-23is your overall system webGl2 compatible ? test http://webglreport.com/?v=2", "chrisjj, 2017-12-23\"I wonder if you are using textureLod (gsamplerCubeArray)\"", "", "Scratch that. I get the same failure even without gsamplerCubeArray https://www.shadertoy.com/view/ltlfWl", "", "So, I'm wondering textureLod EVER works on 3.30.", "chrisjj, 2017-12-23IQ, you might like to know most of your shaders fail for me https://www.shadertoy.com/view/XslGRr on latest Firefox with WebGL GLSL ES 3.00 .", "", "This one's failure is with an error \"textureLod no matching overload found\". I wonder if you are using textureLod (gsamplerCubeArray) (unsupported on 3.30) but the ST UI gives me no way I can see to determine the iChannel0 argument type.", "FabriceNeyret2, 2017-12-03NB: costmap:", "- costlier pixels ( = far clouds ) are only 40% costlier than the average.", "- free sky pixels cost the same than mid-cloud pixels.", "ingagard, 2017-11-16This is hands down the best shader on this site to learn cloud tracing from. Iq, your code is so clean and organized. Very much", "appriciate.", "ollj, 2017-11-07I tried 2 small things with this shader, but only small sucesses.", "", "mostly because its whole fbm noise differential volume marching function is nice and fast, but also coarse and overly specific.", "hard to change,reshape, generalize,optimize.", "ollj, 2017-10-10i once made a VERY SMALL fragment shader boilerplate==envelope==wrapper. only 20k, has mouse input, can print text to show fps and other values. has a (manual) bridge to shadertoy and glslsandbox (it bridges namespaces over to shadertoy),  does not support any buffers (too simple)", "i still use it to quickly backup and watch a lot of shadertoy stuff.", "its utility is its simplicity, small size, being very minimalist (except for its benchmarking code ability to print bitmap text, that one is slightly more involved 7k of header code)", "", "its one messy library now:", "", "iit is a bit sorted, sort by the .html files size, start with the 2d ones, and just dive into them.", "Donoph, 2017-10-10@CaliCoastReplay", "If TarrDashie is using OpenGL or DirectX then the vertex portion of the pipeline is needed. Otherwise the fragment portion of the shader has nothing to work with.", "Under the hood shadertoy is also using a vertex shader.", "CaliCoastReplay, 2017-10-10TarrDashie:  Throw vertices out of your head when dealing with raymarching.  There is no traditional geometry, there are no triangles.  Everything is a \"fragment\", so to speak.  Specifically, each pixel is calculated via algorithms that more closely resemble old-school raycasting/raytracing - except that, instead of seeking precise calculations and calculating ray bounces (which still can't really be done in realtime), the raymarcher takes a certain number of steps through the scene and stops when it hits something.", "", "Here is a very, very good introduction to raymarching:", "", "http://www.michaelwalczyk.com/blog/2017/5/25/ray-marching", "Donoph, 2017-10-10When I converted this example to pure OpenGL. I applied it to a 2D plane that was stretched across the screen. The vertex shader was kept very simple handling only the texture coordinates and vertex position.", "Using legacy OpenGL it could look something like this.", "", "varying vec2 fragCoord;", "void main()", "{", "fragCoord = gl_MultiTexCoord0.xy;", "gl_Position = vec4(gl_Vertex.xyz, 1.0);", "}", "TarrDashie, 2017-10-10Hi, I'm a bit new here. I am trying to visualize how this would work in the context of a vertex and fragment shader program. I understand that we are sampling values from a texture and using that and the ray marching algorithm to compute the color of the fragments. But how is that being applied? We are setting the fragment color but is that being applied to the positions in the scene?", "Donoph, 2017-09-20@ollj", "I'll give those noise algorithms a try. Thank you for the help.", "ollj, 2017-09-10noise is a subjective fickle beast. This shader can show you the hyper-planes of a Linear Congruental Hash/Generator:", "", "#define HASHSCALE1 .1031", "float noise(vec3 p3){p3 =fract(p3*.001* HASHSCALE1); p3+=dot(p3, p3.yzx + 19.19);return fract((p3.x + p3.y) * p3.z);", "}//https://www.shadertoy.com/view/4djSRW", "", "you might want to use some blurry simplex noise or blurry  voronoi-noise instead. the blur hides he tessellation by interpolation, creating smoother pseudo-normal-distributions. but under that veil, they all boil down to fractal LCGs.", "pp, 2017-08-09@Donoph", "thank you !you are right , i have achieve it , just need to convert ivecn to intn .Next, i need to do is make sure how the algorithm is implemented.", "Donoph, 2017-08-08@pp", "ivec is just a vector of signed integers.", "I've never used Unity before, but if it runs glsl shaders then ivec shouldn't be giving you any trouble.", "pp, 2017-08-08beautiful! i want to use it in unity ,but i don't know how to deal 'ivec'...", "Donoph, 2017-07-07Very nice shader! I was hoping you could share how you created your noise texture. When I use my randomly generated noise textures I get a lot of artifacts in the clouds.", "CHIMAIRA, 2016-12-31It's really Nice.", "jcyuan, 2016-09-07so cool!", "CaliCoastReplay, 2016-08-28Dear Mr. Quilez;", "", "Will there ever be a ShaderToy marketplace allowing creations to be sold/used/remixed for commercial purposes?  A lot of the creations here really ought to be seen by the world...", "MichaelPohoreski, 2016-02-26No texture version -- pitch the camera up/down & replace lines 6-14 with with iqnoise() from:", "", "//  https://www.shadertoy.com/view/4sfGzS", "float iqhash( float n )", "{", "return fract(sin(n)*43758.5453);", "}", "", "float noise( vec3 x )", "{", "// The noise function returns a value in the range -1.0f -> 1.0f", "vec3 p = floor(x);", "vec3 f = fract(x);", "", "f       = f*f*(3.0-2.0*f);", "float n = p.x + p.y*57.0 + 113.0*p.z;", "return mix(mix(mix( iqhash(n+0.0  ), iqhash(n+1.0  ),f.x),", "mix( iqhash(n+57.0 ), iqhash(n+58.0 ),f.x),f.y),", "mix(mix( iqhash(n+113.0), iqhash(n+114.0),f.x),", "mix( iqhash(n+170.0), iqhash(n+171.0),f.x),f.y),f.z);", "}", "MichaelPohoreski, 2016-02-26Grrr, line 12", "MichaelPohoreski, 2016-02-26@Dave_Hoskins Yup, meant line 1 -- I forgot I had a noise function inserted. Thanks for the texture filter fix!", "Dave_Hoskins, 2016-02-26I guess you mean Line 12? -100.0 just really means the highest detailed bitmap available. You can now remove the bias altogether and just set the texture channel to 'Linear.'", "MichaelPohoreski, 2016-02-26Does anyone have a better bias for line 16?  I've found you don't need -100; and  -4 is too low:", "", "vec2 rg = texture2D( iChannel0, (uv+ 0.5)/256.0, -8. ).yx;", "valentingalea, 2015-10-01some of the techniques used are found here: http://http.developer.nvidia.com/GPUGems/gpugems_ch39.html", "davepl, 2015-09-19I'd give you a dollar to comment it... I get what the individual functions like the noise and map do, but an overall \"Here's where I was going before I got here\" explanation would be great.", "EvilTak, 2015-08-23Awesome shader iq, been following your website too for quite some time!", "", "windoze, thanks for the much much needed explanation. Now I can modify the code the way I want it.", "windoze, 2015-08-02notes about this code:", "noise() samples from a noise texture, I think the texture has been generated such that by linearly interpolating by fract(x), you can get a continuous smooth noise function.", "", "the map() functions sample the noise at increasing detail. this technique is called the fractional brownian motion. what it means is you sample several noise functions and add them together, the lower frequency noise functions have heavier weight (0.5) vs the higher frequency noise function (0.25 etc). Not using *2 to avoid aliasing and artifacts.", "", "Raymarch steps from ro (ray origin) along rd (ray direction) and adds a light computation along the way. The lighting is pretty simple the brightness is linear with cloud density, and there is some extra glow added if dif is large. Dif is an approximate occlusion test - the density in the sun direction is calculated, and if it is clear then assume the sun can reach the cloud and make it glow.", "gsingh93, 2015-06-24iq, did you come up with those map functions or are they some standard noise functions? Are the values 2.01, 2.02, etc. any better than just using 2.0? And is the equation in the clamp line arbitrary as well?", "uNiversal, 2015-05-31This would be even more fantastic if the camera went a around randomly as if you were flying around, however as is indeed fantastic enough. Love it.", "tommywuhaojie, 2015-04-30iq could you tell me how to add this cloud to UNIGINE(some sort of game engine) to replace its existing cloud.", "tommywuhaojie, 2015-04-30iq could you tell me how to add this cloud to UNIGINE(some sort of game engine).", "Emuljan, 2015-04-10this is unbelievable amazing!!! and less than 3k chars", "dila, 2015-02-09iq should write a book. I would buy it", "rgbk, 2015-02-09better mouse controls:", "", "vec2 mo = vec2(0.0,0.0);", "", "void main( void )", "{", "vec2 p = (-iResolution.xy + 2.0*gl_FragCoord.xy)/ iResolution.y;", "", "if(iMouse != vec4(0,0,0,0))", "mo = (iMouse.xy / iResolution.xy) * 2.0 - 1.0;", "", "// camera", "vec3 ro = vec3(cos(mo.x*3.14), mo.y*1.5+2.5, sin(mo.x*3.14));", "vec3 ta = vec3(0.0, 2.0, 0.0);", "huss93, 2015-01-25hey possible copy code for shader minecraft seus v10.1 or 10.2 ??", "iq, 2014-10-31Back when I wrote this shader WebGL was still using DirectX9, and \"break\" wasn't implemented really or was too slow, and \"continue\" was a much faster alternative. These days WebGL uses DirectX11 with proper and real flow control (most of the time) and \"break\" is implemented, so yes, it can (should) be used.", "eddieparker, 2014-10-31Pardon my ignorance, but is there a reason why in the raymarch code there's an if(sum.a > 0.99 ) continue;?  Shouldn't it be a break, seeing as how the code doesn't modify sum.a before that point?", "zarpar7755, 2014-10-04how have you done this?", "weyland, 2014-08-11It's so much faster now, still awesome", "iterationsteppa, 2014-08-08i feel i should post a link to this \"making of\" video for someone that did raymarching of clouds obsessively: http://vimeo.com/6357535", "jctwood, 2014-06-10This is beautiful", "iterationsteppa, 2014-02-09this may work as the iteration line  f=(1.0-cos(x * 3.1415927))* 0.5;", "f= a*(1.0-f)+b*f;  instead of f=f*f... could be interesting", "iterationsteppa, 2014-02-07how can i tell if     return fract(n*543.5988)*fract(n*43758.5453)is faster than the fract(sin(n)*5435.543)", "iterationsteppa, 2014-02-07your hash is based on hash-sin function... Sin is great because it is nonlinear, although there is an even cheaper perhaps funtion which is simply (x*x) (frac(x)^2) is perhaps faster than Sin sometimes.", "iterationsteppa, 2014-02-07I've made a pic of this noise fucntion to assess it's forms,  using a more random hash value from cpu, here is it in full glory, note the xyz axes should be absolute: http://i.stack.imgur.com/97UKq.jpg", "JellyBean, 2013-08-08iq - can you recommend a good reference on noise for someone new to shaders?  thanks", "Dave_Hoskins, 2013-07-05Have you tried halving the step values and doubling the ray-march for-loop?", "- Looks astonishing!", "iq, 2013-07-04I removed the per-octave rotation in the fractional brownian motion (thx Simon Green), and I went from 50 to 60 fps without much noticeable isotropic artifacts (although it only seems to work fine for clouds, which are very transparent - if I try it in solid raymarching I can see alignment artifacts).", "Dave_Hoskins, 2013-07-04Artifacts gone!", "iq, 2013-07-03I have brought it here and optimized it a lot (there was lots of shared computations between the two noise layers), and now it's pretty fast again.", "", "I have published a reference implementation here: https://www.shadertoy.com/view/4sfGzS", "Dave_Hoskins, 2013-07-03Hmm, if you use the same noise function as your 'Volcanic' shader, the artifacts disappear, it's not quite as fast though, but still worth it.", "srtuss, 2013-07-01Yep, its fast as hell. However, there are some visible artifacts now.", "iq, 2013-07-01I replaced the noise computations from a pure procedural version to a LUT based one (and linear interpolation instead of cubic). That went from 16 fps to 60 fps in my machine.", "atomek, 2013-04-13incredible. I am speechless.", "weyland, 2013-03-25absolutely stunning composition", "neave, 2013-03-01Stunning! But verrrrry slow", "mmword, 2013-02-28nice!, raymarch got future", "rotomonkey, 2013-02-27Ahh...looking forward to 52 weeks of beauty iq!", "PauloFalcao, 2013-02-27Gorgeous!", "", "Can't wait for the next ones :P", "poljere, 2013-02-26You should definitely write somewhere that this is the 1st of the 52 shaders (one per week) you want to write this year ;)", "mlepage, 2022-01-22FYI I believe your rotation matrices are backwards because in the matrix constructor, the vectors are column vectors. (I.e. swap sign on sine.)", "unindicated, 2019-07-19Thanks for your shader and article - really clear and helpful.", "It's probably a bit late now, but can you also do:", "", "vec3 estimateNormal(vec3 p) {", "float pDist = sceneSDF(p);", "return normalize(vec3(", "sceneSDF(vec3(p.x + EPSILON, p.y, p.z)) - pDist,", "sceneSDF(vec3(p.x, p.y + EPSILON, p.z)) - pDist,", "sceneSDF(vec3(p.x, p.y, p.z  + EPSILON)) - pDist", "));", "}", "", "For the normal?", "smkgames, 2017-11-06Fantastic!!!", "This is best tutorial", "Thanks for sharing your wisdom and experiences.", "Juhtahel, 2023-06-12@matthatter419 In the series he is showing he takes out a certain number of indexes, that is the filtering step. You can look up Fourier series and Fourier filtering.", "Andre, 2023-05-29I bought a new gaming PC for my son, so I had to test this beautifull shader again:", "100fps on 1200 x 675 windowed", "AMD 5800X3D + Radeon 6800XT", "matthatter419, 2023-04-16In the accompanying video (with timestamp: https://youtu.be/BFld4EBO2RE?t=1158), Inigo says we can essentially band-pass filter the landscape at synthesis time. I don't see anything in the code that does this filtering, yet the output is clearly filtered (if you remove the tree envelope, it's easy to see).", "", "Where is this filtering happening in code?", "quantum_rose, 2022-11-05Awesome!", "xilliah, 2022-09-09Inspiration", "dkirkby, 2022-08-18I am learning a ton from your code and accompanying video, thanks!!", "iq, 2022-08-18It was a leftover. Removed.", "dkirkby, 2022-08-17Is line 308 a typo, or what is its purpose?", "Andre, 2022-07-15On my windows machine (core i7 6700K and GTX1080ti) it does 30 fps on 1800x1013 and 60 fps on 1200x675. If I zoom to mobile mode on my 4k desktop (by zooming in with the browser) I can get it to run at 2577x1124 at around 16fps and around 10fps on 3610 x 1405 (I'm guesing it syncs to the refresh rate to a divider of 60).", "Dave_Hoskins, 2022-07-12Casually, from visual tests in a shop(!) I'd guess the M1 in their iMac's is about the equivalent to my old GTX 1060, which isn't really all that bad.", "I have a 2017 Intel iMac (Radeon Pro 580) that does about 22fps at 1280x720", "On my main dev machine, I'm getting 60fps at 1200x675. I can't get it to render any larger on Windows 10 without going full screen, I don't know why, but the text editor wants to take up a lot of the screen on Windows. This is on a 4K monitor with no DPI scaling.", "Andre, 2022-07-12@iq It's apple there is hardly anything to configure ;) Theoretical fp32 performance should be around 5 TFLOPS for FP32. Angle is configured to use OpenGL, I ould set it to Metal (Apple's vulkan like API) but  I've had bad experience with that since the chrome support for that is lagging behind.", "", "Safari does 20-25fps on 1280x720 resolution, the M1 is an ARM processor with an IGP. There are no fans running as far as i can hear", "FabriceNeyret2, 2022-07-12I have 4.5 fps at 640x360 on my  nVidia Quadro K2100M.", "Sometime perfs are very different on OpenGL vs Windows", "jt, 2022-07-12(in 800x450 resolution)", "jt, 2022-07-12Firefox on Linux with AMD Radeon Vega 3 Graphics (RAVEN2) 4.5 fps", "iq, 2022-07-11I don't know anything about Mac computers, but 31-38 fps is really slow, I'm getting 60 fps in my 7 years old laptop. Maybe you have hardware rendering disabled or some other thing misconfigured.", "Andre, 2022-07-09Notebook Mac M1 Pro 16\" 16-core GPU version in chrome", "1280 x 720 on laptop screen between 14 and 18 fps", "800 x 450 on tv screen between 31 and 38 fps", "nilrem, 2022-05-13Another datapoint for 3080 12GB on debian 11 (xfce, no wayland, no overclock):", "Fluid 60fps in 1920x1200 in chromium, stuttery <60fps in firefox", "ollj, 2022-04-29GTX 3080 benchmark:", "constant 60 fps in 945x531 on all browsers", "constant 60 fps in 1805x737 in some browsers (firefox and operaGX underperform, not having constant 60fps, MicrosoftEdge performed best in win11)", "easily 55 fps in 1796x1054 via MicrosoftEdge (my fullscreen resolution is lower, this is mousewheel-up oversized-canvas)", "30 fps in 1710x1686", "Higher resolutions still maintain 30 fps, but I can't tell the resolution due to suboptimal formatting on smaller displays.", "ollj, 2022-04-25col *= 0.5 + 0.5*pow( 16.0*p.x*p.y*(1.0-p.x)*(1.0-p.y), 0.05 ); //is like a vignette, darkening the border-", "col *= 0.5*pow( 16.0*p.x*p.y*(1.0-p.x)*(1.0-p.y), 0.55 ); //is an exaggerated variant", "ejosiah, 2022-04-25What is the post-processing you're doing on the color using the uv?", "BenVlodgi, 2022-04-18I love these math paintings you create, and the explanation videos are excellent! Good Job!", "cxm, 2022-03-15[This comment has been hidden by the shader author]", "elenzil, 2022-03-14stunning!", "ocb, 2022-03-06Extraordinary shader", "lz, 2021-06-14Extremely beautiful.", "ollj, 2021-05-06The loop counters are scalar", "Gaktan, 2021-05-06@iq I checked the difference of loop unrolling using a certain vendor shader compiler software", "1. The shader is 43028 bytes with loop unrolling, but only 20120 bytes when forcing loops. Having bigger size is terrible, because it actually causes a lot of cache thrashing", "2. LDS is used with loop unrolling. Not sure why it's used, but using it will introduce some waits when multiple threads access the same LDS.", "3. Looks like forcing a loop increases the scalar ALU, so maybe some operator become scalar instead of vector? Very hard to say for sure though.", "unroll:", "Scalar ALU:           318", "Vector ALU:           7363", "force loop:", "Scalar ALU:           327", "Vector ALU:           3223", "", "I think the biggest win is the binary code size, which makes sense.", "Andre, 2021-02-23Sorry for the small windoiw, i'm working on a 4k television. The UI still needs updates for smaller screens. I'm working on controls rendered by shaders so you can build synthesizer front panels with it as well. My current plan is to finish it to a complete synth builder and DAW, then seperate it into a musicians part and a programmers part. Programmers can then push their synth creations for the musicians to use, i allready bought the synthastic.com domain for the musicians part.", "FabriceNeyret2, 2021-02-22cool ! but the code window is really small.", "Andre, 2021-02-22@FabriceNeyret & @iq What do you think of my new hobby project.", "https://shadersynth.com", "I'm making a synthesizer that runs on shaders, I got inspired by the sound shader here. You can create instruments and effects with shaders like here. It plays midi files, it currently loads \"Great gig in the Sky\" by Pink Floyd and you can start it with the \"play\" button. It doesn't have a backend yet and stores everything in local storage for now.", "FabriceNeyret2, 2021-02-22thanks !", "it's no longer chrome.exe --use-angle=gl  ?", "Andre, 2021-02-22I forcesd chrome to use OpenGL by setting \"Choose ANGLE graphics backend\" on OpenGL in chrome://flags. Compile time for both is now around 0.5 seconds and fps is also consistent around 32fps. Must be something in combination with D3D. Modern GPU's do have loop and branch support, didn't realy think about the branch predictor remark, but it does indeed make sense a GPU doesn't have any since it runs blocks of code parallel.", "FabriceNeyret2, 2021-02-22NB: all functions get inlined. There is no stack on GPU.", "And it seems very unlikely there is branch prediction as well.", "FabriceNeyret2, 2021-02-22@Andre: could you please force your firefox/chrome to OpenGL mode and proceed the same benches ?", "Andre, 2021-02-22Compile time goes from 9.2 secs to 1.6 secs on my GTX 1070  Windows 10. FPS goes from 11 to 32fps (1200 x 675). (changed define of ZERO to 0 for 1st results)", "", "Maybe the noise functions get inlined, that together with loop unrolling could lead to large code size which is maybe bigger then the GPU's fastest code cache? Branch prediction has also grown over the years so maybe the penalty for not unrolling isn't as high as it used to be.", "FabriceNeyret2, 2021-02-20@iq: 1.2x faster [by]\u00a0preventing loop unrolling", "", "How strange ! is it true on OpenGL too ?", "Very strange, preventing unrolling generally slow things, and for good reasons.", "Code cache: I once add to an Nvidia tech, and it seems almost impossible to fail the code cache (of course, but with dedicated code, plus these guys don't always know how extreme our shaders are :-D ).", "Now, for the optimizer there seem to be windowed range, so who knows in this case.", "But first, I'm curious whether the gain is in the same direction in OpenGL vs Windows, or Nvidia vs else. Also, the recent Vulkan-based compilers react very differently (sometime worse perfs, sometime better).", "", "Detail: for the first minute or so the perfs oscillate really a lot, before stabilising at 8.6 fps at 640x360.", "iq, 2021-02-20Now the shader runs 1.2x faster and compiles almost 4 times faster. For the curious, all I did was preventing loop unrolling for all the fbm() functions. That lowered the compile time from 4 seconds to 1 for me. On the other hand I'm not sure why that improves performance, but it does. All I can hypothesize is that perhaps there's a code cache in the GPU to speed up instruction fetching and loops help keep the relevant code in the cache for a longer time? Regardless, it helped with a 40% speedup in my GPU. I used that extra performance to tweak the visuals and make the shader look better, while still leaving a 1.2x overall performance improvement. So, triple win.", "FabriceNeyret2, 2021-02-06@jarble: well, your depth buffer cuts the trees on the silhouette !", "jarble, 2021-02-05I tried adding a depth buffer to speed up the framerate. It seems to be only slightly faster.", "FabriceNeyret2, 2021-01-27again, webGL is not ADA, I doubt the norm now forbid patterns for style issue (and efficience is coder busyness).", "Also, the point is absolutely not about the scope: global variables are still permitted. It is only about where there initialization is done. On a compiler point of view, I don't see how init at global declaration differs to init at the beginning of main(). It could even be compiled that way.", "ollj, 2021-01-26it is lazy bad style to have global mutable.", "you want short scopes for efficiency.", "", "in webgl2 you can more easily have longer lists and have more types in them, or invert large matrices, and that may just crash a lot more of parsing or runtime, if long lists have global scope, in some deconstructing ANGLE parsing.", "FabriceNeyret2, 2021-01-26Yes. My question was: what was the motivation to no longer allow this, while it was ok in webGL1: what is the constraint on compilers that suggest one should better no longer allows it.", "ollj, 2021-01-26No global mutable outside of functions.", "FabriceNeyret2, 2021-01-26@ollj   WebGL 2 obviously still does global variable. It just no longer allows their non-const global initialization at declaration.", "( I wonder the motivation behind this change, though ).", "ollj, 2021-01-25my compatibe shaders share a [compatibility core] for WebGL 1.", "main issue are; no ivecN() types, no integer modulo, no inverse(), many list restrictions.", "WebGL 2 no longer does global variables.", "ado1928, 2021-01-25After managing to get the shader working with WebGL 1, I'm seeing a stable 10 FPS on 576 x 324 on a GTX 260. Works in fullscreen too, but it's, judging by eye, about 1-2 fps.", "Serg, 2021-01-03on a 3090 its smooth at 3840x1600", "me_123, 2020-12-08So goood", "ollj, 2020-11-01similar, even on newer GPU this doesn't quite reach 60fps.", "camjay, 2020-10-01Getting 25 fps on 4K fullscreen using RTX 3080 FE. Otherwise, 60 FPS.", "iq, 2020-09-02Make sure Chrome/Firefox/Edge is running on your GeForce card instead of the integrated GPU. It is a heavy shader, runs at 60 fps on my laptop but at 2 fps on my phone. I should probably take a pass at optimizing something.", "Aesthetical, 2020-09-01My iGPU is having a HORRIBLE time rendering this.", "JasonLee, 2020-03-20cool", "realcyg, 2020-02-08says 1.1 but its much more like 0.1 fps @ 800 x 450 on my \"Intel integrated\" lolz", "0X800007D0, 2019-12-08I am only getting mid 40's fps with a 1070 gtx at 640x360", "Cotterzz, 2019-09-20I meant to say... 40 fps at 640x360. Went down below 10 fps at 1080x1920. pity because it's incredible at that resolution.", "Cotterzz, 2019-09-20Wowser, hovering around 40fps on my nvidia g980 win7 chrome.", "Reminds me of the scenery in Crysis, only better", "kinglarfy, 2019-08-12nice", "ShadowFlare, 2019-06-27@Teppich It works extraordinarily well. In fact, I couldn't see a difference except in speed for the rainforest when I did it. I did it in one of the raymarching loops, along with once the point is returned, before it gets rendered. Also, one other speed improvement is checking for the camera storage positions before raymarching.", "Teppich, 2019-06-27@ShadowFlare I've been looking into terminating rays early when they're less than half a pixel away from an sdf 'surface'. How did you know when to discard the ray? As in, how does rasterization + comparison work for you?", "ShadowFlare, 2019-06-24I was also able to boost the fps to 30 on my gpu by doing a few tricks which didn't make it lose any quality, such as discarding raytracing if the pixel difference wouldn't be visible on the screen via rasterization of the points and comparing them.", "ShadowFlare, 2019-06-21Got the river, just need to figure out why it isn't fading out properly.", "ShadowFlare, 2019-06-21I think I'm gonna add a small river in the background, in the canyony part. Is there any way to label that part?", "Mary_Cream, 2019-05-20it looks so awesome. Keep up the perfect job", "Geralt_of_China, 2019-05-05965M\uff1a15.5-17.9fps", "scratch13764, 2019-03-06Thanks, that helps explain it. I also saw something else (I think it was by P_Malins) that helped too.", "spawner64, 2019-01-31@scratch13764 He's using a small portion of the ch0's output buffer to store the current camera transform (ca[0], ca[1], ca[2]), so that he can read it in the next frame as oldCam.", "", "Then he transforms the current frag's world space position to screen space and reverts (undoes) the screen space shifting o in order to get an aligned frame (o is used to slightly shift the rendering, so that when mixing with the new frame, partial super-sampling is effectivelly achieved - this is one of the most clever and effective AA techniques I've seen).", "", "After that, he goes from screen space to raster space, samples the old frame (texLod(ch0, spos)) and mixes in the new color. The output is essentially used as a IIR history / accumulation buffer.", "scratch13764, 2019-01-16Can someone explain how the old frame averaging works in this? I can see that the frame is mapped to the terrain and it's really freaking me out how it works.", "yuletian, 2018-06-19Amazing!", "FabriceNeyret2, 2018-05-10for mouse control camera rotation (only slow movements, please :-) :", "add in bufA line 834", "vec2 A = 3.14*(2.*iMouse.xy/iResolution.xy-1.);", "#define rot(a) mat2(cos(a),-sin(a),sin(a),cos(a))", "ta = vec3(0,0,1); ta.xz *= rot(A.x);  ta.yz *= rot(-A.y);", "ta += ro;", "FabriceNeyret2, 2018-05-10looks like the sight from my living room :-)", "akhgary, 2018-05-03Next project: GTA V", "songinnight, 2018-03-18It's awesome graphics!!!!!", "", "TIP: if you want to run in IE change \"textureLod\" to \"texture\"", "jpupper, 2018-01-03Insane. Level god.", "iq, 2017-12-26@hammedshh, because it's raymarched, because there are no meshes, because it's running on WebGL, because your GPU is not meant to run this. In normal OpenGL this would be full framerate in HD. But this is not what Shadertoy is about", "Dave_Hoskins, 2017-12-11@hamedshh - That's nearly a 6 year old gfx card!    I have a gtx680 and that's 26fps in a window...", "hamedshh, 2017-12-11why is it run slowly with 8.8 fps on my PC whereas i have GT630 as Graphic card and core i5 as CPU", "ollj, 2017-11-08i think a [foggy valley] would look good (as in, easily believable and high geometry detail) and have good performance, even when valleys are seeded noise.", "Fog in valleys basically replaces the occlusion that a mountain would have there otherwise.", "", "most people do distance fog poorly, by making it spherical around the camera, and not making it diminishing fog with increasing height. google image search [fog valley] for inspiration. most photos look down into valleys, because looking out of a fog is just not as characteristic.", "", "diminishing fog by height (volume marching a cloud in a valley) makes it easy to look \"up\" from inside a foggy valley, so you likely see birds and nearby mountain peaks.", "This mostly diminishes looking nearly-horizontally along or trough a foggy valley.", "Then you put all your high detail geometry inside a foggy valley  (along rivers), where it is more realistically occluded by fog and surrounded by either mountains or more valley-fog.", "", "you can fly into valleys and over them, giving the illusion of more detail than there is per frame, from memory of what you saw there.", "jcyuan, 2017-11-08so sick!! but yes, a bit heavy load.", "Uneclipsed, 2017-10-21Looks beautiful. I just wish my GPU did better than 26fps. (1070)", "Osgrot, 2017-09-01Awesome colors  Thats great", "Docculd, 2017-08-31Colours and shading are amazing.", "zproxy, 2017-05-21[This comment has been hidden by the shader author]", "dagelf, 2017-05-20I can hear the rainforest inside my laptop when this runs.... \"Whooosh\"", "etale_cohomology, 2017-04-0930fps on a Titan X (Maxwell), Ubuntu, for me. Is the 1080 simply better than the old Titan X?", "Passion, 2017-02-26Very nice lush colors", "Damasko, 2017-02-22I\u00f1igo, cada vez estoy m\u00e1s impresionado de tus habilidades. Incre\u00edbles tus trabajos.", "jt, 2017-02-17Wow", "mag, 2017-02-02TAA = Temporal Anti Aliasing", "SarahC, 2017-02-01What's TAA refer to in the source comments?", "casty, 2016-12-30It looks like Intel is not affected by this weirdness: 5fps in chrome in both desktop and Angle modes", "iq, 2016-12-30Canvas: 800x450, Windows 10, GTX 980 Mobile", "", "RainForest: 23 fps Microsoft Edge", "RainForest: 15 fps Chrome (Angle)", "RainForest: 35 fps Chrome with --use-gl=desktop", "RainForest: 15 fps Firefox (Angle)", "RainForest: 28 fps Firefox with Disable.Angle (and zero compilation time)", "", "Snail: 30 fps Microsoft Edge", "Snail: 44 fps Chrome (Angle)", "Snail: 60 fps Chrome with --use-gl=desktop", "Snail: 34 fps Firefox (Angle)", "Snail: 44 fps Firefox with Disable.Angle (and zero compilation time)", "", "Clearly, Angle (Firefox and Chrome's WebGL/GLSL to DirectX/HLSL translation layer) is fucking things up quite a bit...", "", "Rainforest: https://www.shadertoy.com/view/4ttSWf", "Snail: https://www.shadertoy.com/view/ld3Gz2", "manolopm, 2016-12-30Canvas : 800x450, Chromium, Debian Linux, GTX 1070", "Snail: 60fps", "RainForest: 60 fps", "Andre, 2016-12-30Ok, Canvas 800x450, Chrome Win 10 GTX1070", "Snail: 60 fps", "Rainforest: 30 fps", "Right click, inspect in chrome and you can also read the size of the canvas in the attributes of the canvas", "casty, 2016-12-30To those people getting 60fps in this shader with 1060/1070", "", "Could you please test theIQ's Snail shader and tell me the fps? Please make sure you are in the 1080 layot and canvas is 800x450 (you can check the canvas size with Fabriceneyret2's iResloution shader)", "iq, 2016-12-29Thanks for the detailed info Andre. Let me know Casty how your investigations go", "Andre, 2016-12-286700K and a GTX1070 here on Chrome and Win10.", "60fps on smallest browser window (canvas is 500x281)", "14 when i make browser window bigger (canvas is 1200x675)", "", "Edge browser gives me 20fps on largest in browser (canvas 1200x675)", "Firefox ~23fps varies between 20 and 28", "casty, 2016-12-28IQ,", "", "I'm getting 20fps which is way more than any Intel can do. And it is shader dependent, Snail and pool shaders do run at their theoretical speed. So it has to be something else. At least other ppl are running at 60fps so I should be able to troubleshoot it.", "", "Thanks", "Jacoby, 2016-12-28Browser seems to make a big difference: 54.1 fps in Chrome, 60.0 fps in Firefox, on a 1080 (Windows 10).", "Jacoby, 2016-12-28Absolutely incredible. Thanks for sharing!", "manolopm, 2016-12-28Awesome!!!. 60 Fps on 1070", "iq, 2016-12-28Also, a friend said the 1060 was balcklisted on his Chrome, he had to enable it by hand, otherwise the Intel was kicking in for him too.", "iq, 2016-12-28It should run at about 60 fps on your 1060 Casty. Are you in a laptop? You are probably using the Intel integrated card (close all browser tabs and restart Chrome with right_click + Nvidia GPU). We have tested on a 1060M, it does run full framerate. It is 16 fps on my (now old) 980M.", "casty, 2016-12-27@834144373 I don't know why I'm getting only 20fps with my 1060, are you using the 1080 layout?", "siuyy, 2016-12-27Brilliant!! Love your works so much!", "I hope I can code such beautiful things like all genius here.", "Unfortunately, I have no graphic mathematics concepts. How to learn from the beginning?", "834144373, 2016-12-27haha... 50.5fps on GTX1060", "revers, 2016-12-26Outstanding, as always! ^^", "", "@keelo", "\"fbm\" stands for \"Fractal Brownian Motion\"", "Phi, 2016-12-25Very impressive !", "public_int_i, 2016-12-24I'm in awe, beautiful work.", "GregRostami, 2016-12-24Please tell us you're working on a new demo. I REALLY would love to see Elevated 2.", "keelo, 2016-12-23gorgeous! what does fbm stand for?", "stb, 2016-12-23Great work!", "flockaroo, 2016-12-23padauz!! so much detail... i really like the clouds falling over the mountains", "drift, 2016-12-23Amazing. The best looking single shader terrain scene to date.", "iq, 2016-12-23Fixed, I hope!", "coyote, 2016-12-23@iq, in renderTerrain function out variables teShadow and teDistance are not initialised/set in all program paths. Because of the uninitialised teDistance on mac mini the sky is corrupted. I can't see the difference due to teShadow, but surely it should be initialised.", "btw 25 fps in smallest resolution (500x280) on mac mini with intel iris. 13 fps in 640x360.", "KylBlz, 2016-12-23The sense of magnitude in this scene is great, appears far from finite!", "Draedrus, 2016-12-23Wow...", "starea, 2016-12-22Beautiful, beautiful terrain running at 19 fps on my workstation!", "dila, 2016-12-22Awesome!", "BigWIngs, 2016-12-22A little slow, but looks incredible!", "Unix, 2016-12-22Incroyable ! Are you working for the \"next Avatar movie\"or just preparing the next elevated 4k - 10th  happy birthday ? ;-p", "zproxy, 2016-12-22excellent. 0.7 fps in rdp software mode", "Duke, 2016-12-22", "casty, 2016-12-22It is a bit strange, I'm getting 20 fps with the GTX1060, but the old Quadro 4000M (equivalent to GTS 450) is showing 7 fps", "", "In other shaders I get the theoretical 700% diference (Snail and Pool to name a couple)", "Dave_Hoskins, 2016-12-22 the lack of aliasing! Nice clouds and backdrop too. It is very slow though.", "kuvkar, 2016-12-22It's insanely good. Almost can't believe my eyes.", "shau, 2016-12-22Gobsmacked. Pure Magic!", "xeronimo74, 2016-12-22few lines?? have you missed the 'Buf A' tab? ;)", "iapafoto, 2016-12-22fantastic!", "PauloFalcao, 2016-12-22This is Incredibly Awesome! WOW!!!", "Shane, 2016-12-22 A movie quality scene constructed with a few lines of text by one person. Utterly amazing!", "mantra, 2016-12-22Awesome.", "russ, 2016-12-221fps in fullscreen on a GTX950. Totally worth it :-D", "coyote, 2016-12-22Hell Yeah! Brilliant!", "Can't stop watching it...", "GregRostami, 2016-12-22Breathtaking!", "blackjero, 2016-12-22It looks stunning! quite literally as I have been staring at it for more than 20 minutes...", "The strokes in the clouds are intriguing, very painterly.", "s23b, 2016-12-22This resembles a photograph. Both in realism and framerate", "xeronimo74, 2016-12-22Amazing!", "FabriceNeyret2, 2023-05-17the number of views generally means nothing deep.", "more significant is here the number of likes. probably the tuto/syllabus reason, then. ( and it it's a tuto, peoples are connected and thus can like, oppositely to a simple webcrawler visit ).", "FabriceNeyret2, 2023-05-17@FrederickAmpsUp: it's not famous, it has been \"viewed\" a lot.", "- it'd old so crawlers had time ( plus the flux of new shaders was smaller then )", "- given the name, it's probably part of some syllabus or tuto somewhere, giving the URLs. more students, more crawlers.", "FrederickAmpsUp, 2023-05-17how does this have so many views", "nice work but i mean why is this so famous", "vegardno, 2021-12-30WARNING!!! As others have said, rayDirection() should be dividing z (or size.y) by 2 for the fieldOfView parameter to be correct.", "FabriceNeyret2, 2021-12-12no, every participants to this forum got notified.", "luckduck, 2021-12-12\u96be\u9053\u8bf4 Am I the only one who can\u2019t read this\uff1f\uff1f\uff1f\uff1f\uff1f\uff1fwuwuwuwu", "asneakyfatcat, 2021-05-06thanks, I didn't know if there was a reason or not why vertical fov was used compared to horizontal. I always pictured as the fov angle affecting the  horizontal but I guess it doesn't matter, just depends on how you want to setup your projection", "asneakyfatcat, 2021-04-09Can someone explain to me why size.y is used when calculating Z? I'm having trouble understanding. Why wouldn't it be (size.x/2.) / tan(radians(fieldOfView) / 2.0);? Does this just assume the aspect ratio is 2:1?", "zcvonly, 2021-03-07Thanks", "opheliagame, 2020-01-30@FabriceNeyret2 oh right, I didn't understand that it works like any other function and has to return. Thank you for helping me!", "FabriceNeyret2, 2020-01-28fragColor is either vec4(0,0,0,0) or vec4( 1 , 0,0,1) depending on dist > MAX_DIST", "opheliagame, 2020-01-28I am sure that I am missing a key part in my understanding. But since the fragColor is constant, how is the circle actually being shown?", "wcfairytale, 2019-08-14@tju_demon, I think you are right", "tju_demon, 2019-06-18I think in the rayDirection function, the caculation of z should be mul by 0.5 which should be like this:", "float z = size.y * 0.5 / tan(radians(fieldOfView) / 2.0)   since the size.y is the height of the screen.", "Geralt_of_China, 2019-05-03\u770b\u4e86\u60a8\u7684\u4ee3\u7801\uff0c\u6211\u7ec8\u4e8e\u61c2\u4e86\uff0c\u8c22\u8c22", "EricClapton, 2018-11-12Many Chinglish users found : )", "Yuchen, 2018-09-21It was pretty fun to do this. Thanks man. I will follow more of your stuff!", "JohanFlod, 2018-07-02thanks for sharing!", "Hitokage, 2016-10-30Thank you very much andro. I will check them out. I understand everything in there just this part was somehow unclear to me.", "andro, 2016-10-30Hi Hikotage, this example doesn't make it very clear to a beginner (though it is a great tut that only focues on the absolute basics), heres a few links to other tuts that helped me out with getting started . https://www.shadertoy.com/view/XllGW4    https://www.shadertoy.com/view/XlBGDW", "Hitokage, 2016-10-29Hello, can anyone please explain me the rayDirection function? I understand that the first line moves the values so the 0,0 is the center of the plane but what does the float z equation?", "flexelektro, 2016-07-16Thanks a lot. Thats a good way to start", "andro, 2016-07-13If possible in the future I'd love to see an example of how to add a texture to a sphere. This is something thats difficult to find a clear example of (as people approach the technique in so many different ways), keep up the good work !", "jlfwong, 2016-07-12This is part 1 of many. Later steps will have lighting, affine transformation, and CSG. The many parts will be tied together as part of a blog post", "FabriceNeyret2, 2016-07-12for who is aimed this tutorial ?", "Wouldn't some shading make it looking more like a ray-traced sphere ? ;-)", "Shane, 2022-04-25Pretty.", "stb, 2020-01-28On second thought, the performance isn't too bad for what's going on.", "stb, 2020-01-28Pretty! but a bit expensive. Are you tracing forward? If so you can implement adaptive depth control (adc) and bail out when you know the further steps won't contribute much to the final color. Keeping track of alpha is an easy way to do this. (Apologies if you already knew this or are currently doing that.)", "jeyko, 2020-01-28very nice, reminds me of some lsdlive shaders", "spalmer, 2023-06-13don't forget to gamma correct output!    good catch, @viciw17", "invivel, 2023-04-01On line 103 and 105, it's okay to change argument N to p? I don't see any difference in the result.", "RisingMoon, 2020-12-02Its' very helpful", "mojozart, 2020-08-13# iPad", "precision highp float;", "Monkeyspeare, 2020-07-27Love ur tutorial! but there seems to be a insignificant mistake while calculating the normal. to be mathematical correct, we need to divide each component by their own epsilon(in case they're not the same).", "aikaramba, 2020-06-071", "viclw17, 2019-09-23You have to clamp the dotLN to remove the harsh lighting transition.", "line105: float dotLN = clamp(dot(L, N),0.,1.);", "EricClapton, 2018-11-12Tracer loves you", "laserdog, 2017-11-24you're a good man, jamie.", "Vizalkar, 2017-05-16Thanks, best raymarching tutorial out there by far !", "benzrf, 2017-03-05This tutorial is great", "metta, 2017-02-07Massive Gratitude", "Hitokage, 2016-10-30Thank you very much for this.", "spalmer, 2020-07-27If these are intended to be tutorials, you should certainly try to get the output gamma correct here, and in the other tutorials, since otherwise people will copy it assuming it's correct, and be misled.", "metta, 2017-02-09@jlfwong Thanks for the reply, I think this thing snuck its way into my dreams last night...", "Glad I'm not losing the plot here.... Indeed, indeed, I could feel it was some normalisation shizzle of the function itself - but like you, couldnt understand why gluLookAt would be any different?", "Thanks dude, you saved me alot of confuddlings...", "jlfwong, 2017-02-09@metta That is an excellent question!", "", "This nerd sniped me super hard, and spent the last hour trying to understand the problem.", "", "I believe the problem is, in fact, a bug in the viewMatrix function!", "", "With the bug, the side vector \"s\" is defined as cross(f, up).", "", "I believe the correction should be vec3 s = normalize(cross(f, up));", "", "What I can't figure out is why the man page for gluLookAt doesn't normalize. Looking around for implementations of gluLookAt, it looks like this might be a bug in the docs?", "", "I guess I should go through all the shadertoys and the blog post and fix that!", "metta, 2017-02-08Why is it that setting the line:", "vec3 eye = vec3(8.0, 5.0*sin(iGlobalTime), 7.0);", "Moves the camera vertically, looking at vec3(0.0, 0.0, 0.0), but the apparent size of the cube does not change? (as the eye gets further from the target)", "Yet - Conversely, vec3 eye = vec3(8.0*sin(iGlobalTime), 5.0, 7.0);", "gives the expected horizontal effect?", "jlfwong, 2016-08-26@TriBar the camera angle isn't specified directly. Instead, the position of the camera is placed, and the center of view is specified (this is what the first two arguments to viewMatrix represent).", "", "If you *did* want to specify a camera angle directly, you can make eye (the camera position) a function of an angle.", "TriBar, 2016-08-26Hello! Thank you for the excellent tutorial.", "I have a problem with the second challenge.", "What part of code stands for camera angle? I tried playing with up vector, it turns a bit but on large numbers it starts to zoom out.", "a_python_script, 2023-04-12I ported your shader to Godot's shading language: https://godotshaders.com/shader/fractal-pyramid/", "and put it on YouTube: https://www.youtube.com/watch?v=YvIqu7_hVFA", "iestyn, 2023-02-05Gorgeous! Great use of step count to create 'god rays'. Such short code too...", "bradjamesgrant, 2022-04-23@nojoe", "I'm not sure what you mean by main right rotation speed. If you want to change an axis's rotational speed, you can change t in the map function either when it's initialised (which will slow or speed up the entire anim), or change t where it's rotating xz or xy independently. Does that help you?", "nojoe, 2022-02-22Hi, i changed this a bit to my need for running on rpi4 / LibreElec.", "I didn't geot it managed to change the main right rotation speed.. Can you give me a hint or a #define ROTATION_SPEED <0-200> or something like that plz?", "aiekick, 2021-06-13very pretty", "roman380, 2021-03-13Very nice!", "savegor, 2020-11-27Excellent!", "BigWIngs, 2020-06-04Nice colors!", "bradjamesgrant, 2020-05-03sorry, you said glow not flare effect. I add colour to the pixel for each step through the raymarch. If a ray gets close to hitting an object yet still doesn't, it will still add alot of colour to it, as it will have marched many times", "bradjamesgrant, 2020-05-03[This comment has been hidden by the shader author]", "mosaic, 2020-05-03Looks great,  I like the gradual color transition", "What line/s are the glow done in?", "ollj, 2022-06-24MOOTH and RS are simple wrapper for smoothstep(). you may just want such as shortcut.", "https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/smoothstep.xhtml", "", "smooth is made unnecessarily slightly dumb (slow and low precision), as it seems to be identical to", "#define SMOOTH(r,R) (smoothstep(R+1.0,R-1.0, r))", "", "RS is 2 smoothsteps multiplied, using the same [x==R], and this is just bad style for this use case here, because RS can use smooth as subroutine:", "#define RS(a,b,x) ( (1.-SMOOTH(x,a))*SMOOTH(x,b) )", "and even more, because RS only is used within triangles() and i can already tell you, that the triangles() function is very inefficient and can easily be improved by adding some basic symmetry.", "stevenschronk, 2022-06-22Trying to understand what SMOOTH and RS calls are designed to do.", "", "Seems like they are gradient, but have some special properties?", "Supine, 2022-03-19It will look better if `bip2` will lower opacity based on outside ripple radius.", "jpkelly, 2018-04-09This is very nice! May I use it as part of a VJ set?", "chrisjj, 2017-10-24Did I miss something, or is \"29 d = normalize(d);\" completely redundant?", "ollj, 2017-07-30b*b=length(p)*length(p)=dot(p,p);", "b=length(p)=sqrt(dot(p,p))=pow(dot(p,p),.5) = euclidean (diagonal shortest) distance from vec2(0,0) to vec2(p.x,p.y)", "", "a*a=dot(d,p) is a simple matrix projection", "the youtube channel [ 3blue1brown ] explains the dot-product nicely, it is identical to a projection matrix, projecting one vector on another vector.", "", "dot(d,p)/dot(p,p) divides one SQUARED distance (vector length) by another SQUARED distance (vector length).", "a*a/b*b=dot(d,p)/dot(p,p); in the context of a and b being euclidean distances.", "", "dot(d,p)/dot(p,p) is a subroutine that is commonly used to get the distance to a line segment.", "", "search \"line segment\" on shadertoy to see it wrapped and used in simpler contexts.", "FedFod, 2015-12-16Hey ndel great shader! I'm studying it at the moment, but I'm a real beginner. I got everything in the movingLine function except the l at line 28. Why do you do the dot product of d and p? Thank you for any answer!", "jameswilddev, 2015-01-02Red... thingy... moving... toward... the... green... thingy.  I think... I think we're the green thingy.", "iq, 2014-11-19Very nice looking", "gloinart, 2014-11-14Cool", "iq, 2023-03-18Well, the maximum slope of the terrain is bounded by 4.5 or so, so the step size should ideally be 1/4.5= 0.22. However the average slope is about 2.5, so in practice a step size is 1/2.5 = 0.4 will do great. In the very rare cases where the ray happens to penetrate the terrain a little, the backtracking implemented with the abs() in line 128 will take care of it and fix it.", "", "(one theorethical overestimate upper bound for the derivative is 120 * 0.003 * 1.5 * 16 = 8.64, but that's a gross overestimate)", "VPaltoDance, 2023-03-17Wow. Thanks for your answer - appreciate that. But I still wonder why are we not afraid of overdamping thin terrains when our ray is high enough and h * 0.4 will overjump the thin terrain in a next step. Is this possible, or am I missing something?", "ollj, 2023-03-16And then i came up with the logarithmic bijection from [1/b..b] <=> [0..2] for", "https://www.shadertoy.com/view/tlf3zj", "With that you may just define \"zfar==2\" for your model and march anything in that as logarithmic/inverse as you want over time and space.", "This dares to translate between the VERY asymptotic simple function 1/x and a linear graph. And now you just have to \"guess/tweakFor\" the \"base+offset-that-works-best-for-your-gpu and when you plug that in, you get a perfromance-auto-tuning raymarcher, that just looks a bit worse, when the view gets \"too concave\", BUT you essentially tell it your target-fps, and it can reach that and hold it.", "ollj, 2023-03-160.4 understeps, because the height-map is not a 3d gradient.", "near-parallel rays are a big issue.", "some shapes even have near-singularities (polar-transforms always have this), where you lose steps much faster than in near-parallel cases.", "", "a naive but working compromise is a logarithmic-scaled epsilon. instead of seeing is \"step length < epsilon\" we see if a a logarithm of \"how many steps have i walked\" times \"how long was my last step\" is smaller than a threshold, and because its logarythmic, we can square or cube one or 2 of those parameters of the \"we are close enough now\" condition. This has with the following side effects:", "- with VERY few exceptions, rays need much less iterations, and this lets us do MUCH more iterations on the near-parallel/singular/asymptotic cases (100000 steps become feasible in 30 fps for such cases, but such large values are less compatible)", "- is very good for very distorted (hwightmapped or polar-deformed) shapes.", "- close to the camera it understeps a LOT, allowing for VERY good reflections, ad very little extra cost.", "- it oversteps only further away from the camera, where this is not as bad (only noticeable for reflections that need more precision), but it sure DOES overstep (its just not as visible because its FAR away)", "- further away from the camera, objects blow up like baloons, till they completely fill all convex-areas. this makes logarythmic-epsilon worse for caves and it needs fine tuning for vonvexity of the set. This can be fine tuned against, but often is barely noticable. one trick is to just diter this (only every 2nd pixel is logarythmic)", "VPaltoDance, 2023-03-16Hi, I wonder, how did you came with the idea of taking a step of 0.4*h (line 129) during raymarching.", "And shouldn`t there be:", "1) A problem with \"overjumping\" thin terrain parts when high terrain goes right after its` low part, where we sample the ray and get high 0.4 * h value.", "2) A problem when h decreases quickly on slopes quite parallel to the ray, so the steps get too small and the ray never hits the surface.", "Kaung_Sett, 2022-04-19realistic  terrain", "nol, 2022-01-13", "In this shader I calculate the analytical normal of the terrain, which seems to give a small performance increase. Please disregard my (uninformed) comment below, I cannot seem to delete/remove it.", "nol, 2021-12-29Hey, I read your article on using the noise derivatives to modify the FBM construction, like is done to generate the Elevated terrain. I was wondering whether in that case the analytical derivatives of the resulting FBM terrain can still be computed? I tried multiplying the \"default\" FBM derivative (such as the one in the Rainforest by the 1.0+dot(d,d) term every iteration, but that seemed to give incorrect results..", "jarble, 2020-12-11I made a few changes to this shader to improve the rendering speed.", "foxes, 2020-10-02I look at your projects primarily as interesting creative examples designed for better hardware. And although the question is obvious to me, but I want to hear first of all your opinion that such works can not be an example of how to make everyday applications.", "iq, 2020-09-28I've improved the motion blur, it had a quantization issue that was creating some artifacts before. They are gone now.", "felipunkerito, 2019-02-27The motion blur is awesome!", "felipunkerito, 2019-02-27How come I didn't like this shader! Done!", "scratch13764, 2019-01-20Nice servers by the way...", "scratch13764, 2019-01-20Smooths out the camera by averaging the camera position over 1 second in each direction.", "scratch13764, 2019-01-20Smooths out the camera by averaging the camera position over 1 second in each direction.", "scratch13764, 2019-01-20Line 260: ro.y = 0.;", "for (float i = -.3; i <= .3; i += .1)", "{", "ro.y += terrainL( camPath(time + i).xz);", "}", "ro.y /= 5.;", "ro.y += 19.0*SC;", "zproxy, 2017-10-17360 at", "stduhpf, 2017-09-23This shader is awesome, but i think the extra texture read line 20 is pretty much useless, since the color is already stored in \"data.rgb\".", "MacroMachines, 2017-07-14@iq what did you use to do the 3d render video you posted?  brilliant work as always, learning so much from you.", "ollj, 2017-05-06[This comment has been hidden by the shader author]", "red1939, 2017-03-27I've seen the part of noise derivative in the blog but I was wondering if someone know from where the calculation of a += b*n.x/(1.0+dot(d,d)); (line 91). My understanding is that we use cubic noise interpolation (together with derivatives) and before calculating final noise value we differentiate once more to go from cubic to quintic. Btw what is the\"m2\" matrice? A domain wrapping shift to change the sampled noise position?", "iq, 2017-03-24I rendered a 360 version of this shader, if you are curious to see in your mobile or GearVR headset or something:", "webber, 2016-04-26iq, I find there is flashing in the adjacent frames, especially the areas far away the camera, if there is any method avoid the flashing.", "jt, 2015-10-28iq, your work is very inspiring - thank you for sharing it with us!", "liyonghelpme, 2015-03-31fantacy, you are genius", "TekF, 2015-01-26Yeah, it's black for me too. It used to work.", "bolt304, 2014-12-12I'm not seeing anything (everything is black)  I've tried changing some stuff, and it seems that has something to do with the interesct function (if i comment the else i see the mountains but not the sky)", "I'm on chrome at windows 7 with a NVidia GeForce GTX 760", "tholzer, 2014-09-25Ohh.. it's fantastic to fly over that snowy mountain landscape...", "Ever thought to add a keyboard handling to steer the camera by hand?", "diegoperini, 2013-10-05Incredibly unique! If only there were more comments on the code.", "Yosh, 2013-09-03Well, I always wanted to wander in original Elevated - now, I can:", "", "//vec3 ro = camPath( time );", "//vec3 ta = camPath( time + 3.0 );", "vec3 ro = vec3( iMouse.x, 0.0, iMouse.y );", "vec3 ta = vec3( iMouse.x, 0.0, iMouse.y + 1000.0 );", "", "", "", "Thanks!", "bebensiganteng, 2013-07-02wow, how one should do to be this good?", "jobromedia, 2013-06-25This is totally awesome! I wouldn't mind using a picture from this shader as my facebook cover picture.", "myk45, 2013-05-22Mindoblowing!", "ahrimen, 2013-03-14First of all, this is amazing!", "", "And being that I can't find anyone asking about this I feel like the odd man out.", "Where do the numbers in the hash and noise functions come from?? To be specific the 43758.5453123, 57, 113 etc...", "", "I mean they are not even prime numbers.", "", "If there is a place where this is talked about please point me to it.", "If these are numbers that where found through experimenting just say so, I could except that as an answer. It would be easy to believe that someone who could make this incredible shader would have a good gut instinct on what magic numbers to use.", "Mipmap, 2013-02-26Thanks for putting together this site!  A wonderful playground for the mind.", "poljere, 2013-02-26wow++;", "eloinischith, 2013-02-25wow!!", "jmk, 2013-02-16Amazing, as usual. ;)", "XT95, 2013-02-15Awesome! Good to see the code,thx !", "PauloFalcao, 2013-02-15Incredibly beautiful! Just awesome!", "saidwho12, 2023-01-08views glitch???", "marc00077, 2022-11-06Delightfull", "algrio, 2022-07-21me likey", "edankwan, 2021-02-26Because it is a demo entry of https://cineshader.com/ I think shadertoy count the viewing via API as one view hence the result.", "Gaktan, 2021-02-19Question is, why do you have 49000+ views?", "Zi7ar21, 2021-01-29Imagine having 45799 views and only 1 comment", "chrk120, 2020-12-23hi there, may I ask how I could have the commercial usage permission?", "deepmother, 2020-11-18\t\tz = r * vec3(cos(theta)*cos(phi + iTime), sin(theta)*cos(phi + iTime), sin(phi + iTime)) + p;", "jmc, 2015-03-10Hi,", "", "We are the developers of FL Studio (formerly known as Fruityloops) and for our OpenGL visualizer we are looking for talented script writers like you.", "", "Would you be interested in a cooperation here ? Usually very little changes are required to make the script run.", "", "Please drop me an email ( jmc at image-line.com ) if you are interested.", "", "Regards,", "Jean-Marie Cannie", "Fred1024, 2015-03-05Love it ..", "Flavio, 2014-12-28awesome shader, this color palette is absolutely magic.", "EvilRyu, 2014-05-04Is this a problem of webgl? can't use any \"break\" or \"return\" inside a loop? but I saw you also use \"break\" in your shaders. T_T", "I already changed them, hope it can work on everyone's machine now...", "iq, 2014-05-03The shader is broken in Windows (not your fault, but the GL to DirectX convertor's), we see nothing in the screen. However, if you change the \"break\"s in lines 35 and 83 into \"continue\", and remove line 63, the shader works again.", "joemiggs82, 2021-06-27Love this! Keep it up!", "apachon, 2023-05-22wow", "DoBetter, 2023-01-12wow\uff0cawesome\uff01", "yah, 2022-10-17It looks so real, incredible", "Xg_jiang, 2022-09-14Its absolutly amazing!", "newJasper, 2021-12-16Amazing", "hiPeeps124816, 2021-11-14Beautiful even though it runs slow on my 8 year old mac", "eekee, 2021-07-04Lovely! And I'm all for rendering speed improvements, especially on my old rig. ;)", "lz, 2021-06-14Amazing.", "iq, 2021-04-29I improved the rendering speed by 30% (1.3x) by adding a bounding volume to the snail", "Mr_Gu, 2021-04-16it looks so beautiful!", "oneshade, 2021-01-23Amazing work!", "Stephenhe, 2019-10-21Like it", "poljere, 2019-05-09Nice! Runs very smoothly on my laptop now!", "iq, 2019-05-09I fixed the color underflow in the antennas and neck, and simplified/optimized some code.", "nylki, 2018-12-05Love everything here!", "The sub-surface-scattering, the material system, bezier curve based objects and the animated snail antennae! <3", "zhimo, 2018-11-14unbelievable!!!", "zhaishengfu, 2018-10-26wonderful", "ttoinou, 2018-10-24Follow the tutorials for your shader load plugin...", "momsul, 2018-10-23hi iam new beginner in shader toy i want know how can use this code in resolume arena 6 .plse someone can help me", "ttoinou, 2018-07-20Featured in this video  !", "Waylon_J, 2018-07-02How do you add your own texture resources", "akhgary, 2018-05-05god like", "rhgrafix, 2018-01-01Epic!", "eclectic, 2017-11-18This shader is one of my favourites from I\u00f1igo, it looks so realitic and beautiful... I'm amazed", "ollj, 2017-11-17I see a trend here. therefore have a longer response. sorry, this got too long. Just to put this in nice spin, consider yourself today's lucky 10000 on, lets call it; [critical hypocrisy].", "ingagard, 2017-11-17@Ollj!", "How come you can be rude enough and say things like:", "", "-\"there are a few \"this appears like it was coded drunk\" segments in this shader.\";", "", "The same goes for my shaders. It\u00b4s insulting and stupid. I think you should show some respect and use a better vocabular.", "This is a great shader, no matter what you trying to say.", "ollj, 2017-11-07something like", "1.-smoothstep(a,b,c)=smoothstep(b,a,1.-c) is an almost-identity, right ?", "ollj, 2017-11-07there are a few \"this appears like it was coded drunk\" segments in this shader.", "like, [4.0*0.25*], twice.", "and a lot of [1.0-.smoothstep( ] is usually easily optimized by changing the sign of he last parameter and swapping first with second parameter. or something like this. it replaces one subtraction with a negation.", "ollj, 2017-11-06you only use getClosest() once, and with repeating differentials of input parameters.", "A specialized variant of getClosest() has a lot of differentials cancel each other out, making it faster.", "voz, 2017-09-27@Lucky4Luuk", "", "Sorry to have upset you. I went ahead and made my own version of this where I can spam all I want:", "https://www.geometricalgorithm.com/edit?algorithm=IQ_Is_The_Man&", "Lucky4Luuk, 2017-09-16@vox Please don't spam that everywhere.", "Dain, 2017-03-18hu this used to kill my machine, now it runs at 30-40 fps nice!", "sawass, 2016-12-17i'm in love with this shader, it's awesome", "Flavio, 2016-12-07Ninja!", "russ, 2016-11-09great work, shame the machine to run it doesn't exist yet ;-) Threw this bad boy at a GTX1080 full-screen with AA = 2, got about 5 fps. One day...", "ollj, 2016-07-08but i wanted a pony!", "dello32, 2016-07-04it's truely a crazy work... oO", "ollj, 2016-06-24there is a time lapse \"making of\" youtube video of this, not much of a making of but it shows the construction an union of the elements.", "ollj, 2016-04-18great image and i finally can see it on a fast enough fragmentshader in realtime. would benefit a lot from any border-smoothening function. ootherwise the borders of any object break the illusion.", "huttarl, 2016-04-14I agree with haxiomic and velocity, it would be wonderful to see this as a live coding session.", "YamSquirrel, 2016-02-02Great Master", "iapafoto, 2016-02-02hum... Sorry to make this remark but actually the shell is reversed !", "", "I suggest :    p.x *= -1.;   line 771 !", "Unix, 2016-01-27Superbe !", "lowww, 2016-01-04You are a legend.", "Rackdoll, 2015-12-28jawdroppin' :O", "Vel0city, 2015-12-27That is insane. Looks beautiful.", "I'd love to see the progression of the code like @haxiomic suggested, maybe next time use Github?", "aiekick, 2015-12-27", "haxiomic, 2015-12-27@iq This is unbelievably good work! Thanks for the making of video, is there someway we can see the progression of the code?", "vgs, 2015-12-26Epic!", "iq, 2015-12-26I saved more than a dozen intermediate steps, so I could easily create a breakdown of the process as I improvised my way to the final image:", "834144373, 2015-12-26@drift : hahaha...Game? Do you know \"ShaderToy Engine\"?", "The game made by it...", "It should include these:", "1.model system", "2.render system", "3.UI system", "4.physics system", "5.logic system", "6.procedural texture system", "If you can create the Engine,the game just begin.", "knighty, 2015-12-25Incredible!", "kakka, 2015-12-25Runs ~5fps on iPhone 6s, marvellous job!", "jt, 2015-12-25WOW!", "Atrahasis, 2015-12-25Awesome !! Can render at 8 fps on smartphone (adreno 330) but fails on my laptop (i5 HD3000)", "drift, 2015-12-25Game over, everyone else go home.", "iq, 2015-12-25Dave, I didn't use any photo reference. Well, I did a google search for water drops to see what they look like at this scale. I also discovered there's lots of cute snail pictures online at some point, but this image was freestyled, like the rest of my previous shadertoys (except for Arlo and Eve, which I used google images for reference shapes).", "anastadunbar, 2015-12-24Actually works now at 8 FPS. But I really love this.", "anastadunbar, 2015-12-24My computer can't handle the code.", "Harha, 2015-12-24I absolutely love this. It's amazing, the BSSRDF material alone looks just awesome and then the leaf and caustics created by the water on top of that and so on...", "strikemedown1981, 2015-12-24Incredible! Too bad I can only see it on iPhone at 5fps. Not working in Chrome or IE on Win10 with GTX980 (Failed to create D3D shaders)", "Dave_Hoskins, 2015-12-24 it! I thought the thumbnail was photo at first! Hey iq, did you use a photo reference quite a lot with this?", "candycat, 2015-12-24Amazing again!", "lovelyH, 2015-12-24It doesn't compile on chrome on GTX 690.", "But screenshot look amazing.", "MacSlow, 2015-12-24Dude... wtf... most impressive! I still have a long way to go", "gigatron, 2015-12-24iq=alien :!", "tomkh, 2015-12-24Looks awesome. Top hardcoding skills (modeling/lighting/shading). Unfortunately, it's not real-time, at least not on a consumer GPU. Will it ever be 60FPS in HD (not to mention VR)? ;-)", "zproxy, 2015-12-24ha. display driver crashed for intel 3300", "keep up the awesome work!", "antonOTI, 2015-12-24Whaaaat !!!", "this is so cool !", "iapafoto, 2015-12-24Just perfect!", "u2Bleank, 2015-12-24Wow !", "coyote, 2015-12-24Perfection!", "trapzz, 2015-12-24Amazing, I love the subtle detail on the leaf from iChannel3.  This blows my mind.", "AndrewNZ, 2015-12-24Incredible Quality   Totally agree - this is the new leader for realistic shaders.  Inigo sets yet another benchmark for others to strive toward.", "iq, 2015-12-24Yes, I just fixed it a few minutes ago", "mplanck, 2015-12-24Absolutely jaw dropping!  Getting an artifact for mapLeaf(p) on a 15\" mac powerbook running Yosemite with a AMD Radeon R9 M370X 2048 MB.  It seems to be fixed with this change on line 291:", "", "r = max(0.01, r*(1.0-r)*(1.0-r)*6.0);", "otaviogood, 2015-12-24This is the new best looking shader!", "Shane, 2015-12-24This is quite possibly the most visually pleasing shader I've ever seen, and it's certainly the most clever usage of minimal resources.", "ZigguratVertigo, 2015-12-24Epic!", "OneManBand, 2015-12-24I can't believe this... Amazing.", "biertje72, 2023-05-09My goodness, look at that....", "photonic, 2021-12-15Holly fk this is amazing!!", "Farini, 2021-06-07It makes up a very nice transition between scenes both in games and movies <3", "Yusef28, 2021-05-27This phantom stuff is great. I really like the direction you went here.", "Andre, 2021-04-03Very nice, hypnothic to watch. I wouldn't show this to an epileptic person.", "avin, 2020-01-29very beautiful \u2764\ufe0f", "Logos, 2020-01-28Cool!", "DeadMan, 2022-01-20Was playing around with the ray-sphere intersection function and I realized maybe there's an optimization? Why do you do float a = dot(rd, rd) when that's always 1? And why do you multiply and divide by 2 or 4 a lot? Removing those doesn't appear to change anything, but should improve performance a bit.", "", "float raySphereIntersect(vec3 r0, vec3 rd, vec3 s0, float sr) {", "// - r0: ray origin", "// - rd: normalized ray direction", "// - s0: sphere center", "// - sr: sphere radius", "// - Returns distance from r0 to first intersecion with sphere,", "//   or -1.0 if no intersection.", "vec3 s0_r0 = r0 - s0;", "float b = dot(rd, s0_r0);", "float c = dot(s0_r0, s0_r0) - (sr * sr);", "if (b*b - c < 0.0) {", "return -1.0;", "}", "return (-b - sqrt((b*b) - c));", "}", "Shane, 2021-06-19I like the soft reflections. Very nice. I find it hard to go back to so-called regular rendering after using global illumination, pseudo GI, etc.", "", "I've been playing around with realtime GI for a while now. For a basic static scene with a slowly moving camera, you can use a buffer and some camera reprojection to give the impression of a much higher sample count without the cost -- even with glossy reflections and so forth. Unfortunately, once you start moving the objects within the scene, moving the camera faster or increasing the complexity of the scene itself, things start to go wrong and you're left wishing computers were twenty times faster.", "jorge2017a1, 2019-09-09muy bonito trabajo!!!", "JoshScholar, 2019-09-0860 fps on an rx 470, that's got to be the fastest ray tracer here.", "alighazi, 2021-09-13WOW", "kekwizard, 2021-02-12Trippy!", "jt, 2017-11-24weirdly nice :-)", "ollj, 2017-11-16because evolution has a bias for occlusion (and collision) avoidance, favoring L-systems and fractals that avoid (self) occlusion.", "ingagard, 2017-11-16Looks like the broccoli I ate to dinner. LOL", "Well made buddy! Really nice!", "FabriceNeyret2, 2017-11-15strangely nice ! :-)", "farhanAtWork, 2017-11-15anyone knows how can i use shadertoy in 2dkit? it says we can use this in 2dkit. I cannot find any tutorials or any sample codes on where to start and use this", "aiekick, 2017-11-15really great. cool to see the code since your instagram video", "iq, 2017-11-15Nice", "MartinRGB, 2023-06-11nicely done!", "Peace, 2022-06-24that's very good", "cgbooker, 2019-12-29it is so cool,", "Canta, 2023-06-11Oh, BTW, just for you to know, about minute 7 it gets broken: cross ripples stop happening, as every new bounce clears the previous ripples and we get just a new circular ripple from the last contact point. Didn't bothered me, so I let it that way in my video.", "Canta, 2023-06-11Hi there tdhooper.", "", "I loved this shader, and did a video about the 2000s where I used it as background. It's here: https://www.youtube.com/watch?v=rHNWNJzKcDI", "I don't do for-profit videos, and usually use shadertoys as background (because they look so cool!), so I just use them. But please let me know if that's not ok with you, and I'll change my video.", "", "Thank you.", "ChrisXPZ, 2023-01-24It hit the corner!! That took forever!", "Also the ripples seem to get stronger and stronger til they kill eachother eventually only allowing one on screen at a time", "ollj, 2022-05-06i like shaders, that look like they need +1 frame buffer, but that clearly can be made almost just as fast wothout one.", "Almost as much as shaders, that turn a long loop into a single modulo, or a 4-tap to 9-tap neighborhood around a modulo subroutine.(eucleadian rythm all the way)", "floopfloop, 2021-12-19line 34: float d = halfEllip(p, vec2(.8, .05));", "", "sus", "JoshScholar, 2021-06-09I thought of this music https://youtu.be/75V4ClJZME4", "Pelegefen, 2021-04-11Awesome! Made me giggle lol", "gschian0, 2020-12-16awesome", "FMS_Cat, 2020-12-02lmao, the logo is too well done", "julianlumia, 2020-04-18haha would be way more entertaining like this", "felipunkerito, 2020-02-07Amazing project!", "iq, 2022-07-24Made it 1.3 times faster by adding bounding planes, so in 4k resolution now it runs at 7.5 fps on my old mobile gtx 1070 notebook.", "inc, 2022-03-12rtx 3090 in full screen: stuttering . not possible to view in 4k", "AlainBandon, 2021-01-27Thanks for the link @iq, I sis not read this article yet. As you said there we normaly use a 2d noise on xz to displace along y a plane. So it's like using the noise result as a y offset on a plane using f(x,z) = y or consider that as g(x,y,z) = y- f(x,z) = 0.", "My main problem is when I want to create some noise based bump on any object's surface, I want a 3d noise on a varying 2d surface. I came out with this formula that seems to work normalize(-e.xyz - (dot(-e.xyz,n)-1.0)*n), where n is the point's surface normal and e the partial derivatives vector. It works on any continuous surface object but not on a cube for example.", "", "But in this example I really fail to understand what the 3d noise result is actually doing. Is it telling if after a certain level of noise the point is actually filled with matter or not, or is is displacing some surface point on a certain direction? From the normal calculation I would say it's the first solution, but I'm not so sure.", "iq, 2021-01-27Right, totally failed to save the shader for some reason", "Dave_Hoskins, 2021-01-25Link? The function 'calcNormal' uses 6 samples on this shader.", "iq, 2021-01-25This is a 3D shape, not a 2D height-map, so the way the normal is computed is correct. You can follow the link I left in the function to learn if you are curious why the gradient computation can use 4 samples rather than 6.", "AlainBandon, 2021-01-22My bad, it's not an elevation but a level of minimum noise to tell if there is actually matter or void... so I guess this normal calculation is actually correct here.", "AlainBandon, 2021-01-22@iq: Is it me totally wrong or the normal calculation of a 3D noise used to elevate along Y axis should be", "vec3 calcNormal( in vec3 pos, in float t )", "{", "vec3 eps = vec3( max(0.01,0.001*t),0.0,0.0);", "#if 1", "return normalize(  vec3(", "mapTerrain(pos+eps.xyy) - mapTerrain(pos-eps.xyy),", "eps.x,", "mapTerrain(pos+eps.yyx) - mapTerrain(pos-eps.yyx)));", "#else // original code", "return normalize( vec3(", "mapTerrain(pos+eps.xyy) - mapTerrain(pos-eps.xyy),", "mapTerrain(pos+eps.yxy) - mapTerrain(pos-eps.yxy),", "mapTerrain(pos+eps.yyx) - mapTerrain(pos-eps.yyx)) );", "#endif", "", "}", "", "because it's actually a 4d normal computed from vec4(-ddx, -ddy, -ddz, eps) in 4d space where you cancel the Y dimension and use the W dimension as the noise value along the Y axis. So you should end with Vec3(-ddx, eps, -ddz). Am I right?", "jeyko, 2019-05-01i also like it withhout blur! btw, your code is very readable and informative, thank you !", "denosya, 2018-11-22Newbie question ! At line 323 (Buffer A), why don't you use :", "vec3 cpos = (wpos - oldRo) * oldCam ;", "Redline, 2018-08-24I prefer it without motion blur.", "ttoinou, 2018-07-20Featured in this video  !", "songinnight, 2018-03-18It's awesome graphics!!!", "", "if you want to run in Inter Explorer", "fix texutreLod to texure function (textureLod is not supported in IE)", "ollj, 2017-11-08tylerbata, currently your best be to work around [lipschitz constants >1](due to (twist) transformations of the distance field/gradient, or due to fractals with insufficiently precise orbit traps) is dynamiceps. It adjusts epsilon for the \"close to surface\" break condition, based on last step distance and distance to camera, for more precision closer to the camera, and more distortion further away from the camera, for more convergence and longer render distance (and as many reflections as steps).", "Osgrot, 2017-09-01Beautiful, in full screen it looks perfect.", "tylerbata, 2017-05-06Thanks! Yeah I kind of figured it would be a precision error.  I tested it by marching only 0.75 of the estimated distance and it fixed the problem...only thing is that adds a lot of cost.  So I think I will likely have some sort of dynamic precision based off the distance.  I also think I might try some sort of newton like method over shooting then fixing back...This could cause issues with thin objects like grass.", "ollj, 2017-05-06raymarching being iterative raytracing, you easily end up accumulating more precision errors than in an analytical approach.", "", "every iteration it estimates the closest distance o a defined surface.", "sometimes it is easier to define an upper bound for a distance.", "some transformations make it very hard to estimate even an upper bound.", "often a faster lower-bound is \"close enough\" but lads to overestimation of distances, and you march into or trough a \"solid\"", "jpryne, 2017-04-04Let's be sure we're on the same page:", "", "Are you referring to the \"shimmering\" effect that's pretty much everywhere, at the pixel-level?", "", "Or are you referring to the flip-flop from black to light here and there along the edges of shadows?", "tylerbata, 2017-04-04Thanks, I'm trying to figure out why fractal terrain will always flicker in some places.  Is the distance field not correct?  I have tested the noise function by itself and several variants but it still flickers.  I've seen it occur on other distance fields as well.", "jpryne, 2017-04-03Ok, my guess is this relates to volumetric surfaces with normals ~perpendicular to the light source. Tricky. My thought is applying a CLAMP function to the shadow color would solve the issue, rather than a binary function going straight from opaque black to transparent. Thoughts, anyone?", "jpryne, 2017-04-03Ah, wait, sorry, at first I didn't notice the issue you speak of. You're talking about the splotches of black among the rocks? That's different than the issue I described below. This is definitely a question for Inigo.", "jpryne, 2017-04-03Tylerbata, my guess is this would disappear with oversampling. Without oversampling, fractal terrain will most always flicker, I should think. Feel free to correct me, anyone.", "tylerbata, 2017-04-02Why does the flickering occur?  Is there anyway to create it without it?", "iq, 2017-01-08The texture is used for surface shading, and needs mipmapping, hence I cannot make it linear and need the -100. The true solution is to remove the -100 and use texture2DLodEXT() instead, with 0 as mip level.", "afoksha, 2016-08-25Figured this out ---- values in G channel are assumed to be (37,17) shifted values in R channel. Nice idea. This saves one texture read as I understand. BTW, I set texture filtering mode to GL_LINEAR and then LOD = -100 is not necessary.", "", "Now the shader completely works and shows me amazing picture.", "", "BTW, awesome math happening here (in this demo and on this site).", "I love it, sir. Good work.", "afoksha, 2016-08-25Should the noise function be just smooth gradient- or simplex- like ? If so I think can implement it on my own.", "Also what is the point of 3rd argument (-100) in texture2D call ?", "", "texture2D( iChannel0, (uv+ vec2(0.5,0.5))/256.0, -100.0)", "", "Thanks.", "afoksha, 2016-08-25Tried your shader in a simple glfw-based application. It works. Three textures are needed -- the last two (iChannel1 and iChannel2)  can be more or less arbitrary as I understand. But the first (noise texture) should satisfy some properties which I cannot guess looking at the code. With random (uniformly) generated rgb components the geometry is visually torn. How can I generate suitable texture image for it?", "", "Thanks.", "ollj, 2016-04-18i kinda want o steer a hot air baloon through it, being affected by its surrounding and my mouse position.", "ollj, 2016-04-18added a constant factor to line 226, resulted in pseudorandom refraction, as if everything was made of glass", "", "vec3 pos = ro + t*rd*0.5;", "ollj, 2016-04-17[This comment has been hidden by the shader author]", "ollj, 2016-04-17show this to every 10 year old manchild who gets easily excited by the minecraft terrain generator.", "nenovrak, 2016-01-26Inigo, again mindblowing work.... Also, thank you for all the tutorials, example code etc. You're freaking awesome  bro!!", "fred41, 2015-07-03... very impressiv, great work and thanks!", "peet, 2014-10-30this shader alone is inspiration enough to use this site... awesome! great work", "dantronic, 2014-08-24Wow, if you swap the iChannel0 source for a different texture and it becomes a completely different landscape!  I must investigate to understand this mapping...", "frankwer, 2013-07-18I can feel the heat...hehe...nice details, massive effect.", "bekre, 2013-07-08Just wow!", "gyabo, 2013-07-07Awesome!", "jpryne, 2013-07-07Simply outstanding! An inspiration to those of us who are just getting started with programmable pipelines.", "iq, 2013-07-06I rendered it with motion blur and depth of field (at about 3 seconds a frame in my laptop at 1920x1080 HD): http://www.youtube.com/watch?v=QfvzfWgW6H4&hd=1", "iq, 2013-07-03Not really. I have made the epsilon in the gradient/normal computations bigger than the quantification error of the textured noise, but small enough to capture the actual geometry. Basically, making your deltas a bit bigger in calcNormal() should fix it. Hopefully! (unless you get really close to the surface of the model, that is). If not, maybe I should add textures in float16 format as an option...", "Dave_Hoskins, 2013-07-03Yeah I've tried it for height maps before, but it showed the stepping problems on the texel gradients, which I found quite interesting. I guess you've hidden the errors in the squiggles.", "iq, 2013-07-03Yep. It suffers from precision problems though, but it can be a good alternative in some cases. Not only is faster, but WebGLSL seems to be less sensitive to fail compilation with this one that with the procedural/hash based one.", "Dave_Hoskins, 2013-07-03I've just this 3D noise idea in one of my old shaders, and it's speed enabled much finer steps. Thank-you iq!", "vanburgler, 2013-07-03Really cool", "Dave_Hoskins, 2013-07-03Brilliant! And that smoke really makes it 2X so!", "CPU, 2013-07-03OMG! WOW! Incredible! I love it!", "cxm, 2022-03-201st than u", "tomorrowevening, 2020-01-29changing to:", "fragColor = vec4(col, sum.a);", "gives better extrusion in Cineshader ;)", "VEShaderStuff, 2023-01-16I'm actually surprised this has no comments", "gyabo, 2015-09-30Thanks! Able to see great shader! ;-)", "Shane, 2015-09-30I'd saved it in \"draft\" mode. Just changed it to \"private.\" It should work now.", "", "By the way, the distance function in my next shader is loosely based on this one. Naturally, I've made note of that.", "gyabo, 2015-09-30And, link was broken...?", "gyabo, 2015-09-30Shane - san", "", "Thanks!", "Applyed that nice noise reduction solution. This shader got more good edge.", "Shane, 2015-09-30I really like this. Using \"abs(dir)\" to add some color to the scene was pretty cool.", "", "By the way, I took the liberty of making some very subtle changes that may give you a little more speed and accuracy... or they could make it worse.", "https://www.shadertoy.com/view/ltSSWD", "", "On the last line, I've changed \"map(ip - 0.1)\" to \"map(ip - 0.1)-tt.\"", "", "I could be wrong, but I think \"map(ip - 0.1)\" is based on the directional derivative lighting calculation. Therefore, taking away \"tt,\" or \"map(ip)\" should give a tiny bit of extra accuracy... but I'm not 100%. On my machine, I notice a distinct reduction in the amount of speckling around the edges.", "", "I've also made some changes to your raymarching block, and rearranged the map function, but they're not as important.", "felipunkerito, 2019-03-23Nice! Next step, 3D fluid dynamics instead of noise.", "834144373, 2015-07-31nice!very nice! love it.", "I reeally want to try to use the \"windows 10\" system.", "samerce, 2022-01-28@tomorrowevening, i hear you and totally understand! i just asked them if they would be willing to allow me to use their work via your fork. if they say yes, would you approve as well?", "tomorrowevening, 2022-01-27@samerce With all due respect, no - I don't even use this on my portfolio site because its roots were written by @WAHa_06x36 in their sine puke shader.", "samerce, 2022-01-23hi @tomorrowevening! this is just so delicious. pure eye candy. nice work! may i please use it on my portfolio site? it's a showcase of my work, i don't sell anything. i will credit you there and the website code itself is CC-share alike.", "gschian0, 2021-06-30AWESOME!", "WAHa_06x36, 2014-02-15Ooh, that is the nicest variation on my old sine puke I've seen so far, out of all the ones people have tried!", "algoes, 2020-11-04essai", "algoes, 2020-10-31Hi is it possible to personalise logo", "bloodnok, 2022-10-28Could you lower the framerate on the animation of ED-209 (while leaving the camera motion smooth?) The original movie had the stop-motion miniatures animated at a lower rate, giving it that classic 80s B-movie vibe.", "dean_the_coder, 2022-01-07Thanks @FutureBoy - I should have spotted that!  Now fixed.", "FutureBoy, 2022-01-07I am the author of iOS app 'Shadertoy Viewer'. After hours of simplifying the code and ruling out irrelevant lines, I just found what makes it not work on iOS 'Shadertoy' app: It seems that in OpenGL ES, a variable should be assigned to a default value before used. In line 15, the variable 'glow' is not initialized. Just giving it an initial value of 0. makes it work fine on iOS.", "FutureBoy, 2022-01-07Wonderful! I am also a fan of the \"Robocop\" movie. This is definitely one of the most horrifying scenes in my childhood memory", "GCScholar, 2021-09-12Impressive!!", "Andre, 2021-04-03That's the 2nd time this week i encounter him", "https://www.youtube.com/watch?v=V9tqzYNBEf0", "Nice shader remix btw", "404Glaciergargamel, 2020-12-23Remix: https://www.shadertoy.com/view/WltyR7", "zproxy, 2020-11-14epic", "TobberH, 2020-11-13I LOVE IT!!!", "dean_the_coder, 2020-11-06YouTube version here: https://youtu.be/KIJc-AwCe3Q", "hahnzhu, 2020-11-06That's amazing!", "munrocket, 2020-11-05I am normalized it, please don\u2019t kill!", "neriakX, 2020-10-30wow, amazing work! keep going!", "Duke, 2020-10-30Cool!", "dean_the_coder, 2020-10-30Thanks everyone!", "dean_the_coder, 2020-10-30@FabriceNeyret2 At the moment I think it would look more of a 'jaunty skip' that the 'enforcement droid stomp' in the film.", "iq, 2020-10-30Really nice modeling!", "pjkarlik, 2020-10-29OMG - amazing! and the original Robocop is the best! I mean Peter Weller! Now I want to make something from Buckaroo Banzi!", "FabriceNeyret2, 2020-10-29( but too bad we can never see the leg walk )", "FabriceNeyret2, 2020-10-29great !", "jorge2017a1, 2020-10-29Excellent work ... it looks very good ... a movie scene ... well it's good for animation !!!!", "......", "Excelente trabajo ... se mira muy bien .... una escena de pelicula ... bueno ya es bueno para animacion !!!!", "BackwardsCap, 2020-10-29This is awesome. Great job", "shau, 2020-10-29Wow! Super modelling and animation", "Raistlin_fuego, 2022-12-05Incre\u00edble!!", "jorge2017a1, 2019-06-14excelente trabajo!!!", "metalim, 2019-06-07@jeyko, what is ql??", "jeyko, 2019-03-31Wow, looks like a water ripple with the first q.x in the func() function set to    q.x += 3.*sin(0.27*iTime+ql*4.1);", "Daimoth, 2019-01-31Gorgeous. I've decided to take shaders more seriously lately, so I found my way to this site. So far, this is my favorite shader by a wide margin. Reminds me of things I've seen on LSD trips. And Jupiter.", "FabriceNeyret2, 2018-07-24@iq: NB: you could change one different digit in the magic numbers in each shader just to build the tree of copy-pastes flowing from them ;-p", "iq, 2018-07-24LOL. I leave traps behind me so those who blindly copy code. Speaking of, I've seen too many people using bad fract()sin()) based noise() functions because they copied my or other's Shadertoy code form when we couldn't do integers arithmetics. I keep updating shaders over time to minimize damage, but....", "FabriceNeyret2, 2018-03-28aaaargh, so *you* are one of the responsibles for so many people messing-up with aspects-ratio and 3-4 lines involved uv normalization instead of just doing simply", "vec2 p = (2.*fragCoord - iResolution.xy ) / iResolution.y;", "Would your high-school math teacher be happy reading that, hmmm ?  :-p", "metalim, 2017-01-05Accidentally (or is it?) I'm listening to \"Warping Clouds\" by \"Out of Gravity\".", "CPU, 2013-04-11Ah, thank you sir!", "iq, 2013-04-11i have fixed it (lines 46 and 47 were the problem)", "CPU, 2013-04-10Very nice! i may try to fix the long-term stability! Any hints from the author?", "kingofthebongo2008, 2023-03-08yes, i do  haha.", "afl_ext, 2023-03-06@kingofthebongo2008 probably something to do with time variable getting bigger and bigger, would be best to cycle it somehow, are you putting this somewhere as a relaxing always on background ?", "kingofthebongo2008, 2023-03-06if one leaves the shader open in a browser for 24 hours a noise pattern starts to appear in the highlights, looks like a quantization issue in a floating point number, like time or something", "afl_ext, 2022-08-13@iq thanks! corrections saved", "iq, 2021-03-28You can make the shader faster by removing the normalize() in line 28 which is redundant, and also the two normalize() calls inside cross() in lines 61 and 62 which are also redundant.", "FabriceNeyret2, 2021-03-28this shader is crashing the driver on OpenGL :-(", "makc, 2021-03-22this shader has a interesting effect when leaving full screen: https://i.imgur.com/dVBxwjA.png", "jarble, 2020-11-12I made a slightly faster version of this shader, decreasing the precision as the scene gets further away from the camera.", "icaroleles1, 2020-01-29is this kind of thing suitable for real time ?", "Cotterzz, 2019-09-21Isn't the actual ocean wave pattern a superposition of many differently sized simple sine waves?", "Or am I missing something here? cos I figure that using noise to simulate water is a hack, but using many different waves of different sized and directions is what actually cause this pattern on seawater.", "The only difference is the method use to produce the random variation.", "afl_ext, 2019-08-08mds2, I fixed some stuff so it looks better", "mds2, 2019-08-08Anyway, this shader has a surprisingly compelling sky for non-physically-based hacks.", "mds2, 2019-08-08I like the sin trick for the ocean.  For a while I'd been on a \"how crudely can I approximate rayleigh scattering and still get a decent sky\" kick.  I still haven't gotten this approach to give me good sunsets (although I'm sure this is possible)", "afl_ext, 2019-08-08mds2 yes this is a deliberate approximation that have no physical foundation, made yo be super fast not exactly precise", "mds2, 2019-08-08I'm curious to learn more about the function \"extra_cheap_atmosphere\".  Did it arise as a deliberate approximation to rayleigh and mie scattering?  I see a \"mymie\" term in there.  But I also see a lot of numbers and some variables labelled \"special_trick\"", "JoshScholar, 2019-07-13Can you get rid of the triangular mesh look?", "rigel, 2017-11-04So fast and realistic !", "nomadiclizard, 2017-10-19UHHHF! That mind blown feel when you suddenly realise you can CLICK and it suddenly becomes so much betterer", "afl_ext, 2017-03-09erichlof, thanks, changed it", "erichlof, 2017-03-09Hi afl_ext, awesome shader!  You might want to change the power exponent on line 6 from 4.0 to 5.0.  This instantly removes the visual artifacts and creates a believable ocean-like surface.  Thanks for sharing!", "ollj, 2023-01-22do you really overlap 3 circles for the iris, when you can just overlap an iris-painted-ring onto a circle, replacing a PD-composition with an abs() in terms of complexity? because inner and outer circle inside and outside of iris have identical black-eye-hole colors.", "welann, 2022-04-19Incredible work!", "plasticarm, 2022-03-04So amazing! I'm going to be studying this code for many long hours!", "bhupendra_bhudia, 2022-01-10Wow - totally amazing!!!!", "winlandiano, 2022-01-04Truely amazing piece of art!", "Dominic_Cole, 2021-12-24Incredible work!", "lazy_lvalue, 2021-12-07exponentially good \ud83d\udc9b", "DimaRich, 2021-11-21I'm speechless. It says for itself.", "brianhaak, 2021-10-18Incredible work! What's going on inside of the mind of a genius?!", "Michael_Hutton, 2021-10-07You sir, are a genius. This is mind blowing. Well done.", "Krykka994, 2021-09-29you have tremendous talent", "iq, 2021-09-20I prefer to do the super-sampling in perceptual space, looks much better and handles nicely the cases where a pixel has large variance samples.", "ahcox, 2021-09-06It doesn't move the fps at all but may as well do gamma after the AA loops:", "```", "// gamma", "// col = pow( col, vec3(0.4545) );", "tot += col;", "#if AA>1", "}", "tot /= float(AA*AA);", "#endif", "", "// gamma", "tot = pow( tot, vec3(0.4545) );", "```", "miloszmaki, 2021-09-04Awesome work!", "coreC, 2021-08-18I was not very clear on what i mean.  The explanation on YouTube makes it real for me: the calculations, the seperate steps.. knowing how/why/what.       When i open this shader, from this shadertoy page, fullscreen at 4K,  then the quality reveals a lot more details (than from the default 840x472 view).  Obvious even without wearing my glasses.  My videocard is excited too then.        AA set to 2 makes especially the dreads look better.            You are quite skillful in your presentations. It inspires people, because your explanations make it sound so \"simple\".      Gracias", "iq, 2021-08-18Thanks! The Youtube video is 1080p, not 4k. But I think I know what you mean, I believe you are reacting to the high quality, antialiased and motion blurred rendering, which makes it feel \"realistic\".", "coreC, 2021-08-17gracias.. the youtube video makes it real for me.", "The skin looks exceptionally great at a 4K resolution.", "Great work iq", "romeosoft, 2021-08-12Michelangelo", "forzasport, 2021-08-11Perfect!", "spatial, 2021-08-05absolutely amazing work", "marcosmith, 2021-06-09Looks very impressive!", "jt, 2021-04-28awesome", "sylvain69780, 2021-04-04It's very realistic, she closes her eyes on the preview photo, which is exactly what usually happens when you want to take a photo of your teenager.", "Andre, 2021-04-03Wow, this looks so nice, all those details the hair, the cloth, the skin etc. Very very impressive", "shau, 2021-03-06It was fun watching you put this together. Thanks for sharing the code", "Jaapio, 2021-01-24Impressive!", "xavierseb, 2020-12-17<3 Pixar quality in a shader! so awesome", "BTW, The expression in our faces when seeing this is the same as the expression in the girl's face!", "oneshade, 2020-12-16Impressive modelling!", "knighty, 2020-12-14. the hair in particular.", "soundmasteraj, 2020-12-12I.Q. has a high I.Q.", "soundmasteraj, 2020-12-12Thank you Inigo!  I shared the vid on my socials because I can't think of a better way of inspiring people to love and learn mathematics, than to watch a brilliant person share and teach with art and artistic expression!  Intense respect!", "monsterkodi, 2020-12-10f*ckng awesome!", "and great video as well!", "Atchafalaya, 2020-12-07Wow! Great painting (I love the way you talk of your work as paintings) and great video.", "Thank you for breaking down the techniques you used. It definetly helps a lot", "neoneye, 2020-12-05Incredible beautiful.", "ChutneyPot, 2020-12-03This is sooo good! Love your work!", "vax, 2020-12-02If her gaze followed the mouse cursor movement, that'd add a nice touch to showing that it's indeed real-time.", "kay_D, 2020-12-01I'm paying more attention to nature now that I know the formula behind it. We also should start teaching some math using shadertoy - I would surely have spent more time with it  Thanks for sharing and explaining the math in your youtube tutorial, too.", "PixelPhil, 2020-12-01Mind blowing.", "jessus25, 2020-11-30Amazing Inigo! The day when the math make something bigger than make money, singularity in the demo. But I'm not sure your face or your new shader on youtube video, haha. use mask, stay safe, amazing, anyway", "along, 2020-11-30iq\uff0c\u4f60\u771f\u662f\u4e2a \u5929\u624d&\u827a\u672f\u5bb6", "lambmeow, 2020-11-30Love this. Your work will never fail to amaze me", "ocb, 2020-11-29Fabric and braids are incredible. I love the forest behind.", "dila, 2020-11-29expert", "jashan, 2020-11-29Wow, this is amazing! I did a little Avatar-remix: https://www.shadertoy.com/view/WdyBzD", "jorge2017a1, 2020-11-29Thanks also for the video Iq ... it is very detailed and very well explained ... I see that it is a lot of work .....", "gracias tambien por el video Iq...es muy detallado y muy bien explicado...miro que es mucho trabajo.....", "iY0Yi, 2020-11-28Amazing!!! Thank you for your great tut video, too", "JonasBuckner, 2020-11-28Six months ago, I was really impressed with raymarching primitives.", "gigatron, 2020-11-28mat4(A, W, E, S, O, M ,E, 0.0, A, L, I, E, N, 0.0, I, Q);", "sylvain69780, 2020-11-28What I looked like when I discovered your shader this morning ! wowwwww", "germangb, 2020-11-28This is amazing!!", "", "Weirdly, it took a couple refreshes for Firefox 83.0 (on Ubuntu 20.04.1 LTS) to compile the shaders :/", "CoolerZ, 2020-11-28Did you make the youtube video here as well? or did you use a proper 3d program like 3dsmax or Maya for that?", "CoolerZ, 2020-11-28I don't even have the words for this. Nice job!", "dean_the_coder, 2020-11-28Beyond awesome.", "zproxy, 2020-11-28masterpiece. extra points if picture is available for all directions for to allow a 360 render.", "PauloFalcao, 2020-11-28Wow iquilezles ! You really exceed yourself this time! This version with the background, animation and all the details is truly amazing!", "Dave_Hoskins, 2020-11-28Nice work! Very Pixar-ish. The bump mapped pores and hair are a great addition that most of us wouldn't bother with!", "sylvain69780, 2020-11-28There is so much details, we can see the wonderfull artistic work, and at the same time the procedural rendering that makes everybody voiceless. So much emotions !", "iapafoto, 2020-11-28Super amazing! Thank you!", "line 309: hair intersecting forehead could be solved with", "vec4 pres = sdHair(pos,vec3(-0.25, 0.57,0.8),", "Roninkoi, 2020-11-28Beautiful! Once again demonstrating the true power of SDFs", "pjkarlik, 2020-11-28Fabric and Hair just blow me away - so amazing and only 4.5 second compile time!!", "jorge2017a1, 2020-11-28@Moniewski,", "by the way ... Moniewski, the nose is very good ... and real !!!! ... without taking the credit from IQ ...", "por cierto ... Moniewski, la nariz es muy buena ... y real !!!!...sin quitar el credito a IQ...", "samhattangady, 2020-11-28This is incredible. Thanks for the breakdown on YouTube!", "Shane, 2020-11-28 Amazing.", "Moniewski, 2020-11-28I played a bit with nose shape.", "", "// nose", "eos = pos-vec3(0.0,-0.081+animData.y*0.005,0.86);", "eos.yz = rot(eos.yz,-0.23);", "float h = smoothstep(0.0,0.26,-eos.y);", "d2 = sdCone( eos-vec3(0.0,-0.02,0.0), vec2(0.03,-0.25) )-0.04*h-0.01;", "eos.x = sqrt(eos.x*eos.x + 0.001);", "d2 = smin( d2, sdSphere(eos-vec3(0.0, -0.26,0.07),0.06 ), 0.06 );", "d2 = smin( d2, sdSphere(eos-vec3(0.08, -0.28,0.01 ),0.04 ), 0.06 );", "d2 = smax( d2,-sdSphere(eos-vec3(0.07,-0.325,0.03),0.02 ), 0.035 );", "d = smin(d,d2,0.05-0.03*h);", "arkan, 2020-11-28And just when I thought it could not get better.. Woww  Imagine what you could do with a true SDF modeler that outputs the shader code ;)", "BigWIngs, 2020-11-28Masterpiece.", "morimea, 2020-11-28crazy!", "JoshScholar, 2020-11-28My God, how do you do it?", "jorge2017a1, 2020-11-28wow .... those lips are very sexy ..... an excellent job, and excellent technique .... thanks for sharing Tips IQ. !!!!", ".......", "guao .... esos labios son muy sexy ..... un excelente trabajo ,, y excelente tecnica .... gracias por compartir Tips IQ. !!!!", "flockaroo, 2020-11-28crazy cool stuff !!", "purple_marine, 2020-11-28GOD", "GregRostami, 2020-11-28STUNNING!!!!", "michael0884, 2020-11-28OMG its even animated, crazy", "337240552, 2023-06-11It costs too much time rastering on mobile phone", "Poisson, 2022-10-28Nice! I love the white version, it's look like watercolor.", "meowyih, 2022-06-20I know it's not my business. But I just google \"Las^Marcury+shader\" for curious, and there are at least 3 different website/blog copied this shader word-by-word but removed the license/creator in code. :-( *sigh*", "meowyih, 2022-06-20Simple and creative method to create fire. Cool!", "VPaltoDance, 2022-05-06I like that noise.", "SteelyWing, 2022-01-12@XT95  I see you permit others to use your other shader in commercial project, is this shader also share like a CC0 / CC-BY license ?", "SteelyWing, 2022-01-12So cool, Can I port this shader to Godot ? Is this copyright or other license ?", "Dominic_Cole, 2021-12-24Wonderful", "Rinoka_Oshiro, 2021-09-27Wow! That's all I can say", "blacklion, 2021-07-20what is license for this shader? can i put this to my application? @XT95", "deffe, 2021-07-08Oh that was nice.", "Hongbo_Miao, 2019-03-29Arts!", "scratch13764, 2018-11-08That was like a year ago and now I know what noise is xD", "coldshine, 2017-03-06Also, narrowing the area of raymarching gave me fps boost from 15-20 to 40-50. Though have to be careful not to cut off the flame.", "", "line 56:", "float limits = 0.5;", "vec4 p = (v.x > -limits && v.x < limits) ? raymarch(org, dir) : vec4(0.);", "coldshine, 2017-03-04Does the numbers in the noise function at line 4 were pre-calculated?", "scratch13764, 2017-03-01I just have no idea how you could possibly make something so complicated!! Maybe I'm just a newbie at this?", "sgamerw, 2016-08-17I've tried this shader in cocos2d-x, it didn't work and the 'raymarch' function made cpu 100%", "ss_shader, 2016-02-04Very exciting.", "leomondream, 2015-12-30So amazing~ \u00f0\u0178\u02dc\u201e", "Jack41EL, 2015-10-19Simple yet beautiful.", "mememaestro, 2015-10-15Very hot", "davepl, 2015-09-16Very cool work.  That's a lot of trig :-)", "Any suggestions on how to constrain it to the quad itself (so it doesn't have a flat top)?  I've been tinkering but to no avail yet, the noise can push it quite high.", "arafat5547, 2015-04-25it's so cool~flame effect is common~but this look real cool~", "cyanux, 2014-06-14Hypnotic, so \"realistic\".", "XT95, 2014-02-18@revers : Hi, what a great tool you have here ! No problem for using this shader, i'm glad you share it !", "sumingnan, 2013-07-21cool.", "Eybor, 2013-03-14Nice one dude !", "shabtronic, 2013-03-02so good! lush looking flames - enjoyable and not scary!", "Conan, 2013-02-26Love it!", "CPU, 2013-02-20Excellent!", "poljere, 2013-02-16Impressive!", "PauloFalcao, 2013-02-16Very cool", "FabriceNeyret2, 2022-10-05... or use libraries having already done the tedious job for you ;-)", "ollj, 2022-10-04i once made something VERY shadertoy-webgl compatible. crunched down to 64k by removing the WYSIWYG editor and the involved java libraries, and by removing some minor options, BUT webgl implementations change a lot in just 6 month, and this tens to decrease compatibility over time.", "", "the smaller ones seem to no longer work well, but an older larger v303 still somehow mostly works and its a single html file (all needed libraries are merged into the html text) with webgl+webaudio and minimal css (it also exports to mpeg).", "", "https://www.shadertoy.com/view/3slSRl (try me)", "https://www.shadertoy.com/view/tlGGzm (try me)", "https://www.shadertoy.com/view/tly3Rm (likely no longer works well)", "https://www.shadertoy.com/view/3slSRl (v307 likely no longer works)", "does work on a samsung s8.", "FabriceNeyret2, 2022-10-04@shaderJoy:", "there are some libs here. Not sure how 100% compatible they are for modern shadertoy", "https://shadertoyunofficial.wordpress.com/2017/07/25/extending-shadertoy/", "shaderJoy, 2022-10-03New to shaders but interested in learning!", "", "Can I experiment with this locally in my laptop (simply copying this code to a local .js file), or does it require online libraries?", "", "Sorry for the dumb question!", "wednesdei, 2022-09-12@iq, did you ever end up making that article? Would love to read it", "ttoinou, 2022-04-20Yes it'd be an interesting article !", "elenzil, 2022-04-08True, that works well for imprecision in floating-point representation, but with these technologies there is still inherent error in deriving a coordinate system from the real world.  eg SLAM and so on.", "iq, 2022-04-08There's a much more elegant solution than having multiple origins, and that's to use double precision for the computations, then convert all to viewer/camera space in double precision, and only then cast al to single precision (float) before updating to the GPU. With this trick you can have a solar system sized world with a single origin, and still have artifact free rendering in the GPU with float32. I currently use this in Quill. I should write an article about this.", "elenzil, 2022-04-08Similar precision issues come for Augmented Reality applications, where you want to anchor some 3D thing to the real world.  You can't just have a single root origin for the world, you need to switch the origin depending on where the viewing rig is physically.   This is both because of floating point error as distances get large and because of inherent tracking error independent of floating point precision.", "ollj, 2022-04-08finite address space be damned. best just to teleport-loop the camera/scenePos.", "", "The game OuterWilds has similar precision issues (noticeable with distant collisions of the scouter camera), which is why the player camera is always fixed at vec3(0) and it never rotates, and any camera \"movement\" is just the reverse movement of the whole set (a model scale solar system), including reversed offset rotations of the whole solar system.", "Also, to not accumulate too much precision loss, there is a time loop AND almost all gravity is not inverse-squared, but just inverse-linear (which works fine for model scale solar systems, BUT it makes players wrongly assume that a small orbit is stable, when the orbit is FAR from stable).", "elenzil, 2022-04-07thanks for the explanation! that matches my understanding.", "iq, 2022-04-07Yes of course, once iTime losses precision it will propagate all over the place. But that's a second problem, I think the problem he has is that world space distance values are losing precision (while iTime is still healthy). So the mod(iTime) will contain the camera position around the origin and will fix his problem.", "", "Then the inevitable will still occur some time later (hopefully an order of magnitude or two later) which is the pollution / loss of precision of iTime itself. To fix that (ie, delay it further), the mod() should be done in full 64 bit in the Javascript layer, before the iTime gets sent to the GPU.", "elenzil, 2022-04-07iq, won't the mod() approach eventually run into trouble as well, as iTime becomes very large ?", "iq, 2022-04-07Yes, that's expected, that's how floating point numbers work. You can add a mod() to the time variable line 466) in order to cycle camera positions back to the origin after some time. With a bit of care on the animation variables the whole cycle could be done periodic for  seamless transition.", "Oleksii, 2022-04-07And I'd like to say it is absolutely amazing and amusing work, thanks for sharing", "Oleksii, 2022-04-07Hello iq, after few running the Happy Jumping it looks like a precision mistake growing (raycasting, raymarching, some objects movement became step-like), the gif screenshot by the link", "https://drive.google.com/file/d/1HsrVKhMDgd2qF1_BO3z4kkuHx-_C8aOR/view?usp=sharing", "FabriceNeyret2, 2022-04-01sometime, strangely, things happen to work directly :-p", "", "( Note that Picasso would have said that indeed you prepared it your whole life ;-) )", "iq, 2022-03-31Surprisingly, this one was actually among the fastest I've done, it took a total of 10 hours in two sessions of 5 hours (two separate days). They usually take me a bit longer, more in the 15 hours range.", "BrownAleks, 2022-01-08\u042d\u0442\u043e \u043b\u0443\u0447\u0448\u0435\u0435 \u0438\u0437 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u044f \u043a\u043e\u0433\u0434\u0430 \u043b\u0438\u0431\u043e \u0432\u0438\u0434\u0435\u043b!", "infundo, 2021-09-13Very nicely done!  You have great explanations in your videos on YouTube.  Thank you for sharing your knowledge of math.  I have learned so much, that i wish I would have studied more about.  I am learning now though, thanks again, much much thanks.", "eekee, 2021-07-10This makes me absurdly happy and I can hardly stop watching it!", "wigglewiggle, 2021-07-07He is so cute!!!", "Nifley, 2021-02-03I let it run for about a week accidentally... eek https://imgur.com/a/P3K7TEQ", "michaelzfreeman, 2021-01-08Possibly the happiest Shadertoy I have ever seen !!! LOL.", "xjorma, 2020-10-16Awesome!, if you want to watch it in VR check this out", "https://youtu.be/qlHdIobRteA", "andremichelle, 2020-10-08Hi Inigo, we would like to feature an audiotool.com track with your shader. We hope you like it. For some weird reason, it feels like a perfect match  If you like different credits, please leave me a note. https://www.youtube.com/watch?v=FPnOejYJAlI", "boeroboy, 2020-09-25I suspect the RTX hardware accelerated ray tracing is better at complex models and scenes.  These are just using basic surface formulas for distance calculation.  Ray marching definitely has its own advantages though and I'm definitely a convert for things like this.", "voland, 2020-09-25Interesting, would it be some benefits using raytrace-accelerated graphics (like Nvidia RTX 3080) for doing distance field rendering with raytracing instead of  shadertoy's raymarching?...", "flockaroo, 2020-08-29@Ric3cir121: i guess thats float-precision related.", "...made me curious:", "try adding \"#define iTime (iTime+300000.0)\" at the begining (or maybe only +1000.0 in your case - the float precision on your machine might be not too high, if this happens after 15 minutes already).", "Ric3cir121, 2020-08-29Weird stuff happen if you wait 15 minutes", "cascade256, 2020-08-02Amazing work on this!", "", "I took boeroboy's suggestion of adding Jump Around, and tweaked the shader a bit to take it to the next level  https://www.shadertoy.com/view/3tsfRM", "wasaka1, 2020-06-23thanks", "boeroboy, 2020-06-02I can't get enough of this one.  Still I keep adding House Of Pain's song Jump Around as iChannel0.", "", "https://soundcloud.com/cafedelantaarn/house-of-pain-jump-around", "forestgril, 2020-05-06...Well, a Friend is missing but this guy looks like actually searching for one", "forestgril, 2020-05-06Heaven confined in 500 LOC", "iq, 2020-03-26I made this one in a Gefpoce 1070 Mobile, it run at 60 fps for me I think. These single-fragment-shader programs are not made with performance in mind though.", "MacroMachines, 2020-03-25IQ, what GPU do you use cause I have tried some top end ones and I have rarely gotten 60fps from any of your insane incredible works.  I basically use them to benchmark and stress test every computer I come across haha", "iq, 2020-03-09Good point. Fixed!", "adenzila, 2020-03-09Awesome learning resource, thanks! The bounce wave center following the character while it's in the air didn't make sense to me. The location of the impact can be stabilized per bounce replacing the ground with the below:", "", "// ground", "float btime = atime+0.05;// bounce time", "float bf = floor(btime);", "float bt1 = fract(btime);", "float bt4 = abs(fract(bf*0.5)-0.5)/0.5;", "", "vec2 bcen = vec2( 0.5*(-1.0 + 2.0*bt4),", "bf + pow(bt1,0.7) -1.0 );", "", "float fh = -0.1 - 0.05*(sin(pos.x*2.0)+sin(pos.z*2.0));", "float k = length(pos.xz-bcen);", "float tt = bt1*15.0-6.2831 - k*3.0;", "fh -= 0.1*exp(-k*k)*sin(tt)*exp(-max(tt,0.0)/2.0)*smoothstep(0.0,0.01,bt1);", "float d = pos.y - fh;", "cyperus, 2020-02-29Wow.Cool! Thanks for the documentation and shadertoy.!!!", "Armaciek, 2020-02-17Love it", "babarzor, 2020-01-24absolutely awesome", "snekjar, 2019-12-07very very cool...so much learned, very smart optimizations..nice to see great \"science and art\" stuffs like this...it will deserve that one invents a word for this sort of mixture ... rarely coders have the cinematographic eye like you !", "blurryroots, 2019-11-09Amazing. And thank you for the great breakdown / making of. You are truly inspirational.", "superflyer, 2019-10-31\u8001\u54e5\u6709\u70b9\u4e1c\u897f\u554a", "zhengxiangkui, 2019-10-24oh! my ladygaga", "Lanza, 2019-09-30Yes ! This is what math and computing is all about ! Boing.", "PixelPhil, 2019-09-25Oh my...", "xyproto, 2019-09-21This is so inspirational. Thanks for creating this, Inigo Guilez.", "Angramme, 2019-09-21wut how", "wavesequencer, 2019-09-11wow", "hyse, 2019-09-10boing~ boing~", "Kali, 2019-08-29OMG. Incredibly well crafted, superb quality...  And runs fast on my old gpu, even with AA and motion blur. I have to watch your live deconstruction yet. What to say, thanks as always for sharing all your knowledge, creativity and talent.", "favreau, 2019-08-29Awesome!", "randomstars, 2019-08-29Witchcraft!", "pthextract, 2019-08-28Cool", "wcfairytale, 2019-08-27mama don't ask me why am crying... my god...", "_polymath, 2019-08-22This is incredible.", "PixelFiddler, 2019-08-22I'm amazed by this. Didn't think such a thing was possible with a few lines of code.", "frankwer, 2019-08-21Awesome idea and execution.", "aiekick, 2019-08-21lol", "ttoinou, 2019-08-20aiekick I didn't realize you were french until I saw how you write \"oups\"", "ikuto, 2019-08-19cool", "aiekick, 2019-08-14@jephgoody, a big value of time affect float precision for many shader, and some glitch appen. add 13000 to time and you will see what im speacking, a possible fix is to mod time, need kno the time value for loop", "simplex_gamedev, 2019-08-14The bubbles have some artifacts, for some reason. After removing most of the variables, they seem to happen at the same frequency, as the guy bounce.", "", "More visible, if rad = vec3(1.0), siz = 1.0, no displacement, no multiplying with atime in the fract.", "jephgoody, 2019-08-14background animation starts to lag when the frame counter is about 13000 fps", "Dave_Hoskins, 2019-08-09I love the way you've added the motion blur to the anti-aliasing. Two birds with one stone, as the old saying goes. Nice one.", "iq, 2019-08-09I fixed the shadow popping that happened sometimes, it's all smooth now.", "MacSlow, 2019-08-09Terrific!", "ollj, 2019-08-08squash and stretch animation sure goes well with smin/metaball", "iq, 2019-07-31No that i know of. But that one is  very nice shader!", "aiekick, 2019-07-31oups it was a question", "aiekick, 2019-07-31inspired by this one", "dr2, 2019-07-29Real cool...", "jorge2017a1, 2019-07-28digo,, estos graficas y codigos , se estan haciendo muy avanzados, y duros de enteder!!!!  ;)", "shau, 2019-07-27So cute", "felipunkerito, 2019-07-27Really nice! I was gonna say it had a Pixar look, but I rather say Lucy in the sky... Pixar look instead", "PauloFalcao, 2019-07-26Amazing work!", "ssell, 2019-07-26iq always has the best scene lighting. Great job once again.", "Dave_Hoskins, 2019-07-26\"Look at THAT, AND that, and that over THERE!\" One Happy jumper indeed. \ud83d\ude01", "FMS_Cat, 2019-07-26what surprised me was the code is very clear and can be apprehended so easily, this is the best \"how to be a raymarching master\" tutorial I've ever seen", "anclin, 2019-07-26Amazing! Who thinks these techniques could be the future for content creation?", "moritzw, 2019-07-26Pure magic, thank you for sharing your mastery with us!", "GregRostami, 2019-07-25Just AWESOME!!", "iq does it AGAIN!", "Stashiocat, 2019-07-25Change line 147 to \"d = sdEllipsoid( h-vec3(0.0,0.15-4.0*hq.x*hq.x,0.15), vec3(0.1,0.04,0.2) );\" to make him look terrified.", "OliverSchaff, 2019-07-25Very very cute!", "TLC123, 2019-07-25I found this happy song very suitable", "https://soundcloud.com/melody-shakers/catching-bubbles", "gam0022, 2019-07-25super cool! incredible short code!", "CooperVarley, 2019-07-25amazing", "Klems, 2019-07-25Looks very fluid! Nice", "TambakoJaguar, 2019-07-25Awesome as always, iq!", "", "You can make him sing if you replace the mouth code by this (line 145)", "// mouth", "{", "float mm = 0.26*smoothstep(-3.3, 3.3, 0.7*sin(atime*5.5)+0.8*sin(atime*9.3)+1.0*sin(atime*14.2)+1.2*sin(atime*21.5)+0.8*sin(atime*35.4));", "d = sdEllipsoid( h-vec3(0.0,0.15+4.0*hq.x*hq.x,0.22-mm), vec3(0.1,0.04,0.2) );", "res.w = 0.3+0.7*clamp( d*150.0,0.0,1.0);", "res.x = smax( res.x, -d, 0.02 );", "}", "reinder, 2019-07-25Very nice and beautiful! I really like the camera bounce.", "iapafoto, 2019-07-25Super fantastic", "FabriceNeyret2, 2019-07-25wow !", "( what kind of mushroom did you smoke ? :-p )", "kaneta, 2019-07-25woooow!", "elenzil, 2019-07-25wow! there's no sound but it's so expressive i hear sound anyhow - Broinngs, Booms, Laughing.", "Shane, 2019-07-25 Wow! That is beautiful to watch.", "coyote, 2019-07-25Super nice!", "And he blinks too!", "Haven't noticed it at first, but then I disabled AA and slowed down the time to enjoy it in slow motion...", "seb0fh, 2019-07-25Nice one!", "ShnitzelKiller, 2019-07-25looks like something Blender Foundation would put out.", "flockaroo, 2019-07-25:-D super cute!", "bitnenfer, 2019-07-25holy shit! this is amazing :O", "BigWIngs, 2019-07-25I love it. Super nice style and colors!", "ddsol, 2019-07-25Nice job, as always.", "Netgfx, 2023-01-08Awesome work. Is the part under // line glow responsible for creating the orange edges? Or is there something more?", "aiekick, 2022-08-20yep it seems guyss dont care about licenses", "iq, 2022-08-19Definitely not cool. Do you happen to have more details like the name of the DJ, venue, etc?", "pb, 2022-08-19I saw this playing on a large video screen to music via Virtual DJ in a club along with many other shadertoy shaders.  Just want to make sure you are aware...", "Trainertemper1, 2022-03-18Serious question, how would someone who knows various js 3d libraries mostly, go about learning how to do something like this? How long would it take? What did you guys use to learn doing this?", "aiekick, 2022-01-03", "iq, 2022-01-02Fixed!", "aiekick, 2021-12-30it seems the mouse behavior is broken on this one", "hiPeeps124816, 2021-11-14when you get stuck in a computer with Minecraft open", "Lumos, 2020-06-16Very nice  Could i use your shader when VJing?", "iq, 2020-05-06None in particular, just an arbitrary deformation. Might as well have been p *= 0.85 + sqrt(r2)*0.15; or any other similar radial deformation.", "metalim, 2020-05-05Line 272 - could you clarify what kind of projection is that?", "TinyTexel, 2020-05-01mm = step(dis.xyz, dis.yzx) * step(dis.xyz, dis.zxy); in castRay does not guarantee only one components of mm to be 1 (happens more often than one would think).", "Fix: mm = step(dis.xyz, dis.yzx) * (1.0 - step(dis.zxy, dis.xyz));", "Jadwigga166, 2020-01-09Epic!", "parsar, 2019-10-12Can you comment the code, please?", "jorge2017a1, 2019-06-19muy buen trabajo!!!", "jt, 2019-06-13looks fantastic!", "khlorghaal, 2019-04-19Im getting 404'd on fb39ca4", "pilot, 2019-01-29cool", "liuhongyi, 2018-12-18cool", "yuletian, 2018-10-08Love it", "dawsx, 2017-09-14How difficult would it be to make voxels in shapes other than cubes? I was looking at 3D honeycomb shapes and thought it would be interesting to see a voxel engine that uses rhombic dodecahedra or octahedron/tetrahedron patterns", "Imsure1200q_1UWE130, 2017-06-04just to shorten the code:", "float lineglow = smoothstep( 0.4, 1.0,     uv.x )*(1.0-va.x*(1.0-vc.x));", "lineglow += smoothstep( 0.4, 1.0, 1.0-uv.x )*(1.0-va.y*(1.0-vc.y));", "lineglow += smoothstep( 0.4, 1.0,     uv.y )*(1.0-va.z*(1.0-vc.z));", "lineglow += smoothstep( 0.4, 1.0, 1.0-uv.y )*(1.0-va.w*(1.0-vc.w));", "lineglow += smoothstep( 0.4, 1.0,      uv.y*      uv.x )*(1.0-vb.x*(1.0-vd.x));", "lineglow += smoothstep( 0.4, 1.0,      uv.y* (1.0-uv.x))*(1.0-vb.y*(1.0-vd.y));", "lineglow += smoothstep( 0.4, 1.0, (1.0-uv.y)*(1.0-uv.x))*(1.0-vb.z*(1.0-vd.z));", "lineglow += smoothstep( 0.4, 1.0, (1.0-uv.y)*     uv.x )*(1.0-vb.w*(1.0-vd.w));", "Imsure1200q_1UWE130, 2017-06-04cool shader! but why do the voxels move away from the camera  jk.", "I like the orange black effect", "nolibab, 2017-04-23fantastic!", "mds2, 2016-01-21Awesome shader!", "", "Any particular reason you are using `f = f*f*(3.0-2.0*f);` instead of `f=smoothstep(0.0, 1.0, f);` ??", "", "Is this a \"best practice\" that I should use whenever I don't need the \"clamp\" functionality of smoothstep, or are you just used to writing out the polynomial and prefer it for aesthetic/readability reasons?", "etale_cohomology, 2016-01-18I LOVE this shader! How can I port it to PyOpenGL?", "demofox, 2016-01-14black screen here too unfortunately", "anastadunbar, 2015-09-20I only see a black screen.", "Dave_Hoskins, 2014-07-18Even then there's the occasional mad flicker!", "Dave_Hoskins, 2014-07-18It's broken in Chrome 36. Replacing the two 'continues' with 'break' and  replacing the long 'if' statement in line 178 with: \tif( t<0.0 )", "{", "gl_FragColor = vec4( 0.0 );", "return;", "}", "Seems to get it working again! But it's only a quick guess.", "bmackenzie, 2013-10-13Really digging this shader! I've been working on a game and when I saw this something just click. That said, any chance of a port? Or at least a pointer to how one might go about porting to shader lab? (with permission and credits of course).", "iq, 2013-09-10Done!", "iq, 2013-08-14I'll give it a try later this week, it shouldn't be too difficult", "mu6k, 2013-08-14Awesome! I wish you solved those corners.", "Dave_Hoskins, 2013-08-14I  the Tron vibe to it, iq!", "Dave_Hoskins, 2013-08-14Hey 'fb39ca4'. If I convert your code to use vec's intead of ivec3's there is no speed difference between this and your code (on my Mac anyway). I'm guessing it's the 'steps' and the twice as many multiplies iq uses in each ray move? Even though iq's inner loop looks much smaller.", "fb39ca4, 2013-08-14It looks great! I'm honored that you decided to build on top of my work.", "jeffbustercase, 2022-09-17Omg I thout I was playing kasfkawjefojaweofij", "FabriceNeyret2, 2022-04-21@xiewei: well, on shadertoy there is also Doom, an Apple I emulator, and many games...", "xiewei, 2022-04-21wow,Is this still a shader?", "ccc9527, 2022-01-21It's so cool", "m_, 2022-01-20wh", "cxm, 2022-01-13awe", "Doobius, 2022-01-09That is freaking insane.  I love it!", "jianinz, 2021-12-29wow, really awesome!!!", "donnerbrenn, 2021-12-21This is insanly cool. :-D", "akaihaoshuai, 2021-09-30Excellent", "ArunJangir, 2020-12-11Just can't believe", "PaterBytes, 2020-10-09Why we tend to click the screen?", "darkfox, 2020-06-08Great!", "tonywu, 2020-01-29that amazing,can't believe it", "utterboredom, 2020-01-22Good god.  This is just amazing!", "propagant, 2019-11-27You just did your own textures... Dude..", "d74g0n, 2019-11-09wow, just wow.", "PixelPhil, 2019-09-27This made my day. Did you generate some of this code?", "hk_shao, 2018-08-28loooove it!", "akhgary, 2018-05-03Scary part is when you take a look at size of the code. Impressive", "jpechevarria, 2018-04-13Just AWESOME!!!", "chrisjj, 2018-02-08I take 'shader update' to be the point where the animation resumes after the pause that starts when I press play, \">\", or ALT+Enter  By that measure, adding a blank line in Image after 1425 and pressing play shows the compile time is sometimes <~1s and otherwise ~3s.  Pressing instead ALT+Enter shows the compile time is always <~1s. This is on Windows 7 Chrome.", "knarkowicz, 2018-02-08After first load shader will be cached. In order to measure compile time, change something (e.g. add a blank line) and then count the time between pressing play and shader update.", "chrisjj, 2018-02-07Image compile time is <1s here - 3.5GHz quad-core Intel. How can one measure the complete compile time accurately?", "chrisjj, 2018-02-07Image compile time is <1s here - 3.5GHz quad-core Intel. How can one measure the complete compile time accurately?", "scratch13764, 2017-03-05it took me the entire time to realize that I wasn't controlling the jumps by clicking.", "metalim, 2016-12-15It won't be pixel perfect unless you implement Mario's gravity system: on falling slope gravity is 3 times higher - lack of it is immediately visible.", "FabriceNeyret2, 2016-07-21Oooh man ! :-)", "", "I thought all competitors were already showing their work, but you're right, there might be a dozen secret projects currently out of the radar :-)", "knarkowicz, 2016-07-21I didn't add tag \"game\", because IMHO this tag is more suited for real interactive games (with multi-pass).", "", "I spend a lot of time making this shader (~100-150h), as it was my first Shadertoy and I had to learn a lot of stuff and I wanted to make everything pixel perfect to the original Mario. Music and sound part was very hard to make and took a lot of time, as I didn't know anything about that and have no talent for music. But, hey! I'm a seasoned game developer with countless crunches under my belt and this thing was quite fun to make.", "", "Yes, it's not far from a game and it would be fairy easy to make a nice [SH16C] entry from it, but that would be too easy. So I'm cooking something more crazy for the [SH16C] .", "Dave_Hoskins, 2016-07-21I know what you mean. Even with the sprite data automatically produced it's a bit of a nightmare.", "FabriceNeyret2, 2016-07-21BTW, I'm curious: how many time one spends to develop such a 48000 chars shader ???", "FabriceNeyret2, 2016-07-21Oh you're right, I just got a look at several of them and did not noticed. oops.", "", "( but with all the work behind, is there really far to a working game ? the most tedious is the art, I guess you already have some objects engine, etc. )", "Dave_Hoskins, 2016-07-21It's not playable though, so a 'game' tag wouldn't be quite right?", "FabriceNeyret2, 2016-07-21you should add the tag \"game\" !", "", "NB: several new ones thanks to [SH16C] competition :-) https://www.shadertoy.com/results?query=%5BSH16C%5D", "MichaelPohoreski, 2016-05-20Hold down the mouse button near the top of the screen to make Mario jump higher at the end flag, once you change line 1315 :-)", "marioJumpAmplitude\t= iMouse.y * 0.5; // 76.0 * 0.45", "nenovrak, 2016-01-19*kabooooom* ..... Mind. Blown.", "knarkowicz, 2016-01-05Unfortunately, there is no multi-pass for sound, so it's not possible to run SFX at moments defined by user's input. On the other hand, now I can implement proper CRT post processing (with blur etc).", "aiekick, 2016-01-04now  (and not no) i would say", "aiekick, 2016-01-04no with multipass its time to do a real game", "jt, 2015-12-17Wow!", "aiekick, 2015-08-21not playable on sahdertoy, because you must saved state of some vars, but on a dedicated webgl content outside of shadertoy it will be possible indeed", "lamxung, 2015-08-18Good!", "knarkowicz, 2015-08-17Thanks! I don't think I can make it playable as Shadertoys are stateless.", "Mourtz, 2015-08-15wow! could you make this playable somehow?", "movAX13h, 2015-08-09wow, now it's complete! 60fps on my slow gpu ... perfect!", "RavenWorks, 2015-08-09Completely stunning", "", "It sounds like the sound is all an octave too low, though..? Is it just me?", "poljere, 2015-08-06Yes!!!! Love the new flagpoint end!", "knarkowicz, 2015-08-04Thanks! I just added did some small tweaks: added flagpoint end, tweaked coin speed, added some flag interaction and a raising castle flag at the end.", "NBickford, 2015-08-04!!!", "That is all.", "GregRostami, 2015-08-02It works perfectly on my Mac now.", "What an incredible shader!! Congratulations.", "revers, 2015-08-01Wow! this is awesome! ^^", "vgs, 2015-08-01OMG this is so crazy! 37128 chars!", "Good job! The shadertoy competition will be really interesting!", "DelvarWorld, 2015-08-01this is completely insane and awesome!!!", "knarkowicz, 2015-07-31I've optimized compilation times. Initial version was compiling ~10s on my PC and now it's down to 3s. I don't think I can optimize significantly more without obfuscating code by expanding all conditions using an offline pre-processing step.", "dila, 2015-07-31took ages to load/compile but well worth the wait", "834144373, 2015-07-30It's a great work!", "amazing!", "", "(my browsers crashed if i open the shadertoy website,", "but Open alone is ok!)", "knarkowicz, 2015-07-30@GregRostami Which GPU does this Macbook Pro have?", "@aiekick Yes there should be some interaction. It's a popular demand, so maybe I'll add it later.", "@coyote Thanks! Sadly I don't have access to any Mac, so I couldn't test on it. I added this fix of yours. I'm also working on compilation time improvements. It would make my life easier if Shadertoy could display compilation time somewhere. Now I have to profile using a stopwatch .", "Dave_Hoskins, 2015-07-30Now, that's a lot of work!  it!", "4rknova, 2015-07-30Wow, amazing!", "FabriceNeyret2, 2015-07-30it totally hang my linux/chrome browser and almost even the whole window manager, as soon as the iconic view: it makes shadertoy home page a dangerous trap. solve urgently !  :-(", "coyote, 2015-07-30Excellent!!!", "Just one small thing... Initialise \"float ret=0.;\" in sound program. Otherwise sound is corrupted on mac.", "Btw, works on mac mini with iris and chrome in 60 fps with sound.", "Safari is very slow, about 3 fps, until I click on the close at the sound tab. Sound tab doesn't disappear, but the image shader is working in 60 fps then. (Although, I must admit, sound is not working in any shader in Safari on my computer. Don't know why...)", "Btw, compiling of your shader takes about 15 seconds for me. Among the longest of any shader I've tried here! It seems that I'll have to deactivate live previews again...", "aiekick, 2015-07-30but nice", "aiekick, 2015-07-30at the end there is no interact betweend the flag and mario ? it was not in the orginal ?", "otaviogood, 2015-07-30That's insane. The only way to top that is to ray march it. :P", "GregRostami, 2015-07-30It crashes my browser. Macbook Pro, crashes on both Chrome and Safari.", "strikemedown1981, 2015-07-29Very, very nice!", "iq, 2015-07-29Pretty amazing!", "jorge2017a1, 2020-12-28very amazing work .... fast .... good design ..... interesting technique, ..... thanks for sharing !!!!", "...........", "muy asombroso trabajo .... veloz .... buen dise\u00f1o .....interesante tecnica,..... gracias por compartir !!!!", "GCScholar, 2020-10-04uao great work!! Perfect textures !!", "AnnaEverson, 2018-08-09nice one!", "zproxy, 2017-10-17360 at", "reinder, 2017-09-08@tosh: done.", "pthextract, 2016-12-10Guten tag!", "MehediAhmed, 2015-08-23This is super cool!", "Optimus, 2014-09-26Not only awesome but very fast.", "pailhead, 2014-06-02Amazing stuff!", "reinder, 2014-03-31and thanks for all the comments", "reinder, 2014-03-31I have tried to convert this shader to 2k of javascript for a competition: demo and source.", "tosh, 2013-09-28Awesome!", "", "Though someone not remembering the game could easily conclude we're all bloody Nazis now.", "", "As this is a public site, adding an explicit statement that it's the scenery of a shooter game to the description wouldn't hurt - or just implement demo mode and enemies :-)", "Dave_Hoskins, 2013-09-26Here's a link to Wolfenstein's 2D ray-tracing code, if anyone's interested...", "https://github.com/id-Software/wolf3d/blob/master/WOLFSRC/WL_DR_A.ASM", "simesgreen, 2013-09-26wow. i love the way the textures are completely procedural, and then pixelated!", "mmalex, 2013-09-26insanely good! my new favourite shader on shadertoy. It's so hilarious to jump thru all those hoops to replace texture fetch, but I love it! it's a tour de force. made my morning! thankyou!", "morgan3d, 2013-09-26The texturing work is fantastic.", "fb39ca4, 2013-09-25Damn. I was thinking of doing something like this, but you beat me to it. Ah well, there's still Doom.", "Antonalog, 2013-09-25how is it this even works in webGL! miraculous!!!", "PauloFalcao, 2013-09-25WOW! Super cool, and fast! I loved this game!", "poljere, 2013-09-25Amazing!", "megaton, 2013-09-25Almost forgot! Awesome work by the way!", "megaton, 2013-09-25Also to smooth out rotation one can do something like this =)", "Instead of line 425:", "", "vec3 prev = path( time-0.1 );", "vec3 dir = normalize( ( ta - ro ) + ( ro - prev ) );", "", "rdcenter = rotate( dir, 0.3*cos(time*0.75) );", "reinder, 2013-09-25Thanks! I was just looking at those lines - trying to figure out how I could avoid the branches ;). Thanks!", "iq, 2013-09-25Super cool!!! And it runs super fast. Even at full screen I get a fluid framerate. Incredible!", "", "One can replace lines 356 to 363 with this branchless version, dunno if that helps at this stage given that it's all full of branches anyway.", "", "var2 mpos = vec2( dot(vec3(-nor.z,0.0,nor.x),pos), -pos.y );", "float sha = 0.6 + 0.4*abs(nor.z);", "Dave_Hoskins, 2013-09-25Fantastic work, those door and flag textures are perfect. I realise that a lot of the constants are the same, but I'm still amazed this runs in Angle with Chrome without bombing out.  it.", "DragonShader, 2023-06-06Someone needs to make this a real object.", "yozic, 2023-03-06WHAT", "", "this is *so* awesome", "samatui2020, 2022-11-22that is great,thx", "eekee, 2021-07-10Gorgeous! Doesn't *quite* look like refraction, but still a really nice effect.", "morimea, 2021-06-11Made animation loop from this shader, 4k YouTube video:", "Full YouTube playlist with other my shader-animation-loops.", "Farini, 2021-06-10Beautiful \ud83d\ude4c", "mountain, 2021-05-17amazing!", "Roboticol, 2021-04-29looks great", "TundrumMax, 2021-04-22this is so cool", "birdie, 2021-04-14This is so beautiful!", "tuxi04, 2021-04-13@morimea, finally I set it with an extension called \"Shader Wallpaper\", and it works like a charm, but thanks anyways", "morimea, 2021-04-10@tuxi04 I made scripts and instruction to use this shader as live Desktop Wallpaper in Linux with Gnome and KDE (only scripts, everything opensource and free)", "", "Follow instructions there:", "for KDE https://store.kde.org/p/1505365", "for Gnome https://www.gnome-look.org/p/1505898/", "morimea, 2021-04-09@tuxi04 il test my self and post links to solution tomorrow or day latter (il make KDE and Gnome support) please check comments on this shader then", "tuxi04, 2021-04-08How I use this as a desktop wallpaper? I'm in openSUSE KDE", "jmparis, 2021-04-04I's so so beautiful!", "Congrats", "01000001, 2021-04-03Incredible!  One thing I noticed though, that's not true internal reflection... the reflected images do not match the main spiral in the middle.  They seem to be copies of the spiral as opposed to reflections.", "MForce, 2021-04-02\u725b\u903c\u554a\uff0c\u8d5e\uff01", "Himred, 2021-03-29OMG, this is so nice !", "Best cube ever", "morimea, 2021-03-29@andremichelle that cool thanks for link back", "morimea, 2021-03-29[This comment has been hidden by the shader author]", "andremichelle, 2021-03-29Loving it. We used it for a featured track music video | https://www.youtube.com/watch?v=B3zbg0XIkVI If you like different credits, we are happy to change them.", "TobberH, 2021-03-27This is AMAZING!!!", "morimea, 2021-03-26@spawner64 about CineShader I have no idea how they did it, I think they not use SSR so maybe its just default simple - put additional cameras on every surface and use those cameras to make real time reflections. I saw this method used in Godot Godot-Planar-Reflection look screenshots there.", "spawner64, 2021-03-26Beautiful. Also, I'm intrigued by the light transport in CineShader. @morimea: How is CineShader doing those reflections and GI in real-time?", "Dave_Hoskins, 2021-03-25The dark box vignette borders really help this feel solid.", "whiskets, 2021-03-25oh my god", "dila, 2021-03-24really amazing, very nice work from you", "jorge2017a1, 2021-03-24It is strange I had left it long ... that is, I had not seen it  .... It is a very good effect !!!!", "..........", "es raro lo habia dejado de largo ... es decir no lo habia visto  ....es un efecto muy bueno!!!!", "scherzo, 2021-03-24Really nice! Especially with some nice slow animation", "mrange, 2021-03-23Very nice", "FMS_Cat, 2021-03-23whoa", "MrOkiDoki, 2021-03-20Wow.", "Carandiru, 2021-03-17\"best usage of refraction\" award.", "PauloFalcao, 2021-03-15Super nice!", "TheNosiriN, 2021-03-14wow", "Shane, 2021-03-13So pretty.", "ocb, 2021-03-13Super nice. And fast. I wish it could be my screen saver.", "iq, 2021-03-13It looks truly beautiful!", "morimea, 2021-03-13this shader in 36kb exe can be found here pouet link", "two 4k screenshots - first screenshot and second screenshot", "morimea, 2021-03-13thanks Dave_Hoskins", "Dave_Hoskins, 2021-03-13It looks very realistic for an unreal thing! Lovely rendering here.", "oneshade, 2021-03-13Beautiful!", "Orm, 2021-03-13yeah beautiful", "shau, 2021-03-13beautiful", "morimea, 2021-03-13thanks for comments", "lz, 2021-03-13Amazing", "aiekick, 2021-03-13wow, beautifull", "Taron, 2021-03-13Absolutely gorgeous! Beautiful presentation. It just looks crisp and clean and nothing is missing visually. Congrats!", "dean_the_coder, 2021-03-13This is ART. Awesome.", "jeyko, 2021-03-13so beautiful! and without raymarching? what is this sorcery", "charstiles, 2020-03-20great work! I can't see any change when I click and drag over the view, am I missing something, should I look at a specific spot?", "lukasharing, 2020-02-25Because it is a closed enviroment where the marcher gives always true, you can avoid the intersection test:", "if( tmat.z>-0.5 )", "scratch13764, 2018-10-30Mike + Lightning McQueen = Mike Kachowski", "iq, 2018-09-05Trial and error in Shadertoy, it's simple enough that doesn't require much trial-and-error actually", "rhgrafix, 2017-12-31That's amazing that you modeled that with code, was it trial and error or do you have a way to convert a Blender or AutoCad etc object with software?", "rhgrafix, 2017-12-30I love it! Try line 153: h = sdSegment( vec3(5.0, -1.2", "smkgames, 2017-11-11Holy Shader!", "Lovely!", "Amazing!", "VoidChicken, 2017-01-01The back of the horn is all black.", "tholzer, 2016-01-21Isn't Mike a sympathetic guy?", "Btw. viewing the differences of smin usage is not actually working.", "If you delete the word 'bool' in line 277 it's running as expected...", "birdkingz, 2015-10-18What ?! You modeled Mike with codes ?!", "That's crazy.....", "iq, 2015-02-04Line 90", "aiekick, 2015-01-26where do you do the symetry of arms ?", "iq, 2014-07-21It renders almost 3 times faster now", "iq, 2014-07-21Oh, I must have lost the code at some point. Thanks for noticing. It's back now, I just fixed it.", "RavenWorks, 2014-07-21Does this still work? There doesn't seem to be a difference between the left and right sides, and I remember there being a noticeable one previously...", "cyanux, 2014-06-14Penumbra... wow", "iq, 2013-06-05No.... not at all... Line 16 is a noise function, a so called \"Value Noise\" in fact (little to do with a smoothstep): http://en.wikipedia.org/wiki/Value_noise", "", "Only line 16 could be rewritten (but made slower) as a smoothstep: f = smoothstep( 0.0, 1.0, f );", "", "In the other hand, line 35 is interpolating the range (the output) of the cubic shape, while the code you propose is remapping the domain (the input), not quite the same.", "", "In fact, one shouldn't use the cubic falloff x\u00c2\u00b2\u00c2\u00b7(3-2x), but the quintic one x^3\u00c2\u00b7(6x\u00c2\u00b2-15x+10) just to be save regarding lighting and bumps and such. In practice though, for these type of mini informal shaders, it doesn't really matter.", "Chaeris, 2013-05-31At line 16, the whole function.", "Isn't that a smoothstep ?", "", "smoothstep(edge0, edge1, x)", "", "see the reference for more details.", "", "I'm sayin'it but you should actually already know ^^.", "Good work!", "Now let's make sulley!", "And we want real hairs!", "skumancer, 2013-05-06+1 on Sulley!", "reality3d, 2013-05-06Fantastic work !", "poljere, 2013-05-06+1 Now it is time for Sulley!", "aki, 2013-05-04This is exactly my facial expression when I saw this :O", "CPU, 2013-05-03Even more strange is that it works fine with Angle on Chrome 22.0.1229.94 but not with Chrome 26.0.1410.64 m !!", "CPU, 2013-05-03It's strange xchip. I've just updated the driver as you suggested and it still says \"Shader Error\" and crashes. The driver version reported by Win7 is 12.104.0.0 and the date is 28/03/2013. Maybe because it's x64? Is your Win7 x64?", "frankenburgh, 2013-05-03Very cool! I like Mike... now it's time for Sulley?! ;)", "xchip, 2013-05-03I have an AMD and no crash at all, update your drivers!", "reinder, 2013-05-03Wow, the stereo effect is really cool .", "iq, 2013-05-03CPU, reinder, I fixed it. Thanks for the good catch!", "P_Malin, 2013-05-03 This is too good!", "reinder, 2013-05-03Yes, changing line 402 to mate.x += 0.1*vec3(1.0-z).z; solves the problem and makes it work on my mac. Very nice!", "CPU, 2013-05-03Wow! super cool! AMD crash crash! Line 402? \t\t\tmate.x += 0.1*vec3(1.0-z); - z and x are both float? It doesn't stop the crash crash AMD though!!", "rafacacique, 2013-05-03Wow! Impressive as always! =)", "What to say? You keep challenging yourself!", "I particularly love the mouth & teeth. =)", "There are some weird artifacts in the shadow.", "4Xsample, 2023-05-15Anyone has made any progress on using this shader into obs?", "kumfi, 2023-04-04Great thanks for respond,  it is also not working if i record on this side, if i go for full build it is very low graphics like 144p so i will try it next days with OBS.", "For sure i will link your page ! Maybe i can sent you sometime a very nice shader that i saw in a technoclub maybe you can reproduce it ? =)", "stduhpf, 2023-04-04@kumfi I exposed the amplitude of the vibrations as a macro (line 21) for you.", "Feel free to use it as you want, though it would be nice to link to this page in the description.", "", "To record, I think you can use shadertoy's \"REC\" button on the bottom-right of the player, though I never got that to work on my own machine.", "If it's not working, you could screencap it with OBS or something like that?", "kumfi, 2023-04-04okay i put some soundcloud music in, can i change the vibration of the waves? its a bit to much i think", "kumfi, 2023-04-04@stduhpf thanks alot ! im back now after a year to record my techno sets and use that as visuals. how is the best to record this and is it open/legal to use it for some youtube content?", "renkin4, 2022-10-30@kumfi     jTime = mod((iTime * 0.25)-dt*iTimeDelta*.25,4000.);", "", "(iTime * 0.25). the 0.25 is the speed.", "stduhpf, 2022-08-12@kumfi change the speed value defined line 4 with whatever value you want.", "kumfi, 2022-08-11how can i do it bit slower? its for some electronic music but it is pretty fast! but nice artwork! ;)", "DimaRich, 2020-07-24This is AWESOME, this is LOVE", "protez, 2022-11-13Tremendous!", "DaSpider, 2021-11-18What happened to the VR button next to REC?", "AbacusAvenger, 2021-03-26Amazing!", "TheNosiriN, 2021-01-11the high settings is even faster than very low settings?!?!? how?!?! compiled on an old intel HD graphics", "jorge2017a1, 2020-05-27impressive ... without words .... a huge job !!!! ... very well done !!!! .. the planet very beautiful .... and the sea equally elegant !!!", "............", "impresionante...sin palabras....un trabajo enorme!!!!...muy bien hecho!!!!..el planeta muy bonito....y el mar igual elegante!!!", "xavierseb, 2019-04-23OMG", "ttoinou, 2018-11-08Just code", "Lanlost, 2018-11-08... Is this real life?", "scratch13764, 2018-11-04The ocean has tons of places where the ray never seems to hit it and there's just a black dot.", "ttoinou, 2018-07-20Featured in this video  !", "Beatrix, 2018-02-25my daughter really loves space and she really likes this !!!!!!!;)", "CaliCoastReplay, 2016-08-06This is nuts beyond the capacity of minds to understand", "shau, 2016-08-03You should work for NASA", "cubby208, 2016-04-15Really cool! I tried higher settings however when I compiled web-gl all about froze! I have a gtx 980 so probably not your issue though!", "ciberxtrem, 2016-04-02Amazing!", "tehsauce, 2016-04-01oh my god", "KylBlz, 2016-03-25Awesome work, one of my favorites for sure", "zel, 2016-03-24This feels like an opening to a movie. Very well done.", "Klems, 2016-03-24Very noice! It's very dreamy.", "iq, 2016-03-23Wow!", "jt, 2015-11-18Fantastic! And runs even on my tiny eee-box :-)", "tajjada, 2015-05-03My Tegra K1 laptop fails to even load this. When loading the page, the screen freezes for 5-10 sec and then WebGL dies. Will have to try this on a better GPU.", "reinder, 2015-04-01I have also rendered a video of this shader:", "movAX13h, 2015-03-30Haha, I just saw the deer, welldone!", "Dave_Hoskins, 2015-03-30Very smooth, I really like the closeup of the rings.", "", "In the sound code...", "1.-smoothstep(23.5,25.5, time);", "...can also be,", "smoothstep(25.5,23.5, time);", ".. which I use quite a lot for fading in and out of signals.", "GregRostami, 2015-03-30SOOO much work! Thank you.", "jimmikaelkael, 2015-03-30wow... nice movie", "reinder, 2015-03-30Seamlessly fly from space to the surface of Planet Shadertoy. This was the shader I intended to make for the 'space compo' @ NVScene 2015.", "", "Please use chrome without angle (or a Mac) and run this shader on med, or high settings (line 4 or 5) to get the full shader (including terrain) and see the level of detail I was aiming for.", "", "This shader is a tribute to all the great shaders on Shadertoy. It uses code from the following shaders:", "", "Wet stone by TDM", "Atmospheric Scattering by GLtracy", "Seascape by TDM", "Elevated and Terrain Tubes by IQ", "LLamels by Eiffie", "Lens flare by Musk", "zxy_aaron, 2022-07-06is beautiful", "aiekick, 2022-05-30@TotallyReal, if you check my alst comment, i have created a commented version with some widgets you can open and tune in NoodlesPalte. not sure if all comment are exacts by the way, but made sens to me", "TotallyReal, 2022-05-29This is amazing.", "Any chance of adding a bit of documentation, or maybe just some keywords that I can search for to understand what happens here?", "I recognize some of the elements you are using here, but not all, and even in those that I do, I am not sure about the details. For example, in the noise computation inside the map(.) function, how did you choose the updates for p and d? Is it just some general noise function, or has something that is specific for more \"cloud like\" noise?", "Canta, 2022-04-25Hi there nimitz.", "I've used this shader as background for a video, here: https://www.youtube.com/watch?v=Cd6DQpOgoCg", "It's of course non-profit stuff, and there's a credits link in the video description, but I wanted to inform you anyways through here. Hope it's ok to use it.", "aiekick, 2021-11-20you have here a widgeted version for NoodlesPlate.", "so you have the code file", "marlodamartian, 2021-11-18can you please make an API version", "Taron, 2021-08-22I wonder, if this will for ever be the most beautiful tunnel by itself. It still most certainly is glorious!", "kkiej, 2021-07-14very nice!", "finofinissimo, 2021-06-05dude, this is so wicked. congrats for the thinking", "Zavie, 2021-04-11This is gorgeous.", "raabix, 2021-03-22This is the most awesome and mesmerizing shaders on shadertoy. The lighting, just everything is perfect. Really well done", "jeyko, 2020-12-17what a weird noise", "jeyko, 2020-12-17what a weird noise", "xjorma, 2020-10-16Export in Stereo 360", "https://youtu.be/LdUEJjADbMA", "yorgaraz, 2020-10-10To remove the rotating effect, make disp() return vec2(.0, .0) and comment out line 121", "", "i can actually use this as my desktop background (may have to slightly tweak out the colors to my liking first)!", "andremichelle, 2020-10-07We are using this as background visuals for a featured track on audiotool.com https://www.youtube.com/watch?v=yHkZJgEmJdM If you like different credits, please contact me. Thanks!", "j1mmie, 2020-07-01I used this for a recent experiment in Unity: https://www.reddit.com/r/Unity3D/comments/hjfl00/i_hacked_that_shadertoy_demo_from_the_other_day/", "markuszeller, 2020-04-18This needs to be my desktop background!", "saidwho12, 2020-03-20\u0627\u0646\u0627 \u0647\u0648 \u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0647\u0648 ,\u0627\u0642\u0631\u0627 \u0627\u0633\u0645\u064a", "knighty, 2020-03-11\u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0647\u0648", "knighty, 2020-03-11\u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0647\u0648", "xactac, 2020-02-18*Doctor Who music starts playing*", "umurgdk, 2019-12-03Can you please mark your shader available to api too? So we can watch it on our devices, and apps.", "omarzonex, 2019-11-25wowwwww  very cooool", "nockieboy, 2019-09-23Amazing- absolutely beautiful!", "Mipmap, 2019-09-13Amazing!", "huseyinozkilic, 2019-07-18doctor who fans here?", "JKG2, 2019-07-04wow that looks really amazing, especially when the tone gets warm and the vortices are really interacting", "entr0cks, 2019-07-03Inspiring!", "macangel, 2019-06-25me encanta este shader , comop lo puedo descargar para usarlo con el virtual dj?", "KylBlz, 2019-06-09Super nice, will study. Like right out of a Disney movie", "jt, 2019-06-04wow", "hjd3481, 2019-06-04Amazing work", "TobberH, 2019-06-04WOW this looks amazing!!!!!", "FMS_Cat, 2019-06-04holy aaaaaa", "rivvumevents, 2019-06-03Simply beautiful, no other words for this, would be lovely if this was available as API to work with Virtual DJ", "gongzixiaobai, 2019-06-03six six six", "Dave_Hoskins, 2019-06-01Great mapping idea, and it looks looks amazing.", "Hadyn, 2019-06-01Absolutely stunning!", "GregRostami, 2019-06-01OMG!!! Gorgeous!", "patu, 2019-05-31best", "mmerchante, 2019-05-31This is insanely inspirational!", "BigWIngs, 2019-05-31Wow, thats beautiful!", "polymonster, 2019-05-31amazing !!", "flockaroo, 2019-05-31huh, excellent!!!", "Draedrus, 2019-05-31This is insane nimitz !", "Raphael188, 2019-05-30This is super cool", "teadrinker, 2019-05-30amazing work!", "nimitz, 2019-05-30Thanks everyone! it means a lot to get thumbs ups by such a remarkable collection of shader coders.", "", "Fabrice: Cleaned up the code, I like that way of setting up coordinates too, will use a variation of it, thanks!", "Flavio, 2019-05-30OUTSTANDING!!!!", "mantra, 2019-05-30Awesome", "granito, 2019-05-30here's an attempt I made at speeding it up : https://www.shadertoy.com/view/wlSGWR", "elenzil, 2019-05-29nimitz, could you save as \"public + API\" so it shows up in the shadertoy ios app ?", "FabriceNeyret2, 2019-05-29wow, so cool !", "", "some remarks:", "", "rot_x , y , z functions not used ;-)", "mg2() unused", "", "mag2: note that overloading can be avoided using #define mag2(p) dot(p,p)", "why is mg2() a separate func ?", "", "coordinate normalization:", "I personnaly find this more easy to read:", "vec2 R = iResolution.xy,", "q = fragCoord/R,", "p = (fragCoord - .5*R ) / R.y,", "mo = iMouse.xy;", "mo = ( mo==vec2(0) )", "? vec2(.15)", ": ( mo - .5*R ) / R.y;", "blackjero, 2019-05-29So short, so fast and so good... the first seconds triggered a sort of brain stimulation wave of goodness, thanks for sharing!", "saidwho12, 2019-05-28Incredible!", "tehsauce, 2019-05-28Beautiful work!", "iq, 2019-05-28Probably the prettiest shader in this site, especially the first 8 seconds when all is orange/yellow. So good!", "elenzil, 2019-05-28wow!", "Carandiru, 2019-05-28wow i wish i had this kind of talent. Why am I a good programmer but not so good when it comes to complex mathematics? I've been researching game development and programming for 10-12 years and i can't figure this shit out. Goddamn.", "TinyTexel, 2019-05-28:O", "granito, 2019-05-28amazing", "Shane, 2019-05-28 Very nice, and clever, as always.", "Klems, 2019-05-28This is amazing!", "hornet, 2019-05-28amazing, both artistically and technically \\o/", "reinder, 2019-05-28Super beautiful!", "aiekick, 2019-05-28wow wow wow", "FabriceNeyret2, 2019-05-28entering Jupiter cloud layer ? ;-p", "iapafoto, 2019-05-28beautiful!", "bitnenfer, 2019-05-28This is so beautiful! Even a still frame looks like an awesome painting.", "felipunkerito, 2019-05-28Shader of the week?", "PauloFalcao, 2019-05-28One of the best shaders I've seen lately! WOW!", "belfry, 2019-05-27Really nice!", "fizzer, 2019-05-27Wow!!", "shau, 2019-05-27amazing", "rez, 2019-05-27totally mindblowing, and artistically perfect! \u2764\ufe0f", "Duke, 2019-05-27WOW, Very nice!", "farazfp, 2019-05-27This is by far one of the most beautiful shaders I've ever seen, and it's so smooth! :O", "bignobody, 2019-05-27Gorgeous!", "crocidb, 2019-05-27Astounding!", "michelleanaya, 2020-04-23It is magic", "greje656, 2020-03-24wow  very cool", "PauloFalcao, 2019-08-22what kind of sorcery is this", "ollj, 2019-05-05this varies a lot, depending on display (crtGaussianfilter, distance, resolution, rates,focsus) and on the scaling/blur of the webgl context.", "", "it might help to counter any blur, that may be added by a context around this shader, with a constrast-enhanching sharpening function. 9-tap that thing and multiply it by a sharpening matrix.", "", "inoticed a big distrepancy of likes among the shaders, that are tagged or named  [fovea]:", "https://www.shadertoy.com/results?query=fovea", "ollj, 2018-10-16magiceye images trained me precise control over my stereo-focal point, which lets me control the fovea radius consciously.", "zproxy, 2018-01-08lol. for a moment. the rdp session forze and stopped em all", "bloodnok, 2017-06-04I'm surprised how we can see at all...", "shau, 2016-07-02My brain has just turned to jelly", "oldtaku, 2015-07-21I find using the mouse cursor as a focus point really helps, otherwise my gaze tries to slide all over. Just put it in the center of the screen, stare at that, and the effect gets very strong. A few inches just around it spins, and outside of that the whole screen just slowly breathes like the surface of a pond.", "", "Very nifty, thanks.", "nimitz, 2014-04-27The moving sharp gradients you get from the edges of your grid are easy to detect by the peripheral vision. In order for this to work you need \"smoothness\". Both in movement delta and in color intensity delta, which is why the coloring helps the effect.", "FabriceNeyret2, 2014-04-27I'm curious: how it is that it does not work for https://www.shadertoy.com/view/ldsXRM ?", "I would have think that resolution is too poor out ov fovea to detect moving details, but my test somehow cancels this interpretation. Is there something special about orientations and rotations ?", "", "(also, I see that varying colors decrease the global perception of motion, otherwise I see moves everywhere).", "volkovino, 2022-11-08@FabriceNeyret2 thank you... I joined discord server...hope \"#general\" section is suitable to ask that type of question.", "volkovino, 2022-11-08My final is like this... ... 150 random points in 1024 x 600 screen and if all 3 edges length are less than 110 pixels, the triangle will be drawn...", "FabriceNeyret2, 2022-11-08@volkovino: the best place for general discussion is one on the social network mentioned on the page footer", "volkovino, 2022-11-08I do not know that this is the right place to ask....", "I NEED A DELAUNAY TRIANGULATION method to construct an ALPHA SHAPE. http://cgm.cs.mcgill.ca/~godfried/teaching/projects97/belair/alpha.html", "So, This is a good shader to clarify VORONOI BORDERS for NON TILED BASE POINTS CLOUD.", "Is there anybody to tell me which values can be used to construct DELAUNAY TRIANGLES with this shader base?", "volkovino, 2022-11-08It is a good experimental as a tutorial for me. I have checked the article too.", "NON TILED BASE VORONOI... Points are tottally random... not in a range... Thanks for the efforts for our training...", "antovsky, 2019-03-14Something like this, basically: https://www.shadertoy.com/view/wslSWl", "antovsky, 2019-03-14This is really cool! I've been trying to do this with non-isotropic underlying grids, so that the cells have a sort of \"dominant direction\" to them (for lizard scales and such), but I can't seem to find any way of having it be artefact free without also looking at more neighbors (there seem to be missing chunks in my version unless I crank the search radius proportionally to the non-uniformity).", "Is there some good way of doing that or is non-uniform scaling of the grid just problematic? I suspect this is the case, since it scales x and y separately, but in \"grid space\" rather than relative to the local cells (which is what's needed here).....", "FabriceNeyret2, 2017-10-16with well placed modulos. See https://www.shadertoy.com/view/ltjyRm.", "stangogh, 2017-10-16How would you change this to enable multiple ones of these to be tiled seamlessly/to wrap around? i.e. to have the cells on the left use points from the cells on the right?", "FabriceNeyret2, 2017-08-23note that the trick no longer work for non-L2 distances (e.g. Manhattan distance, see https://www.shadertoy.com/view/MtlyR8)", "etale_cohomology, 2017-07-21@ollj What you mean is that addition is no longer associative =) Commutative means something else!", "tomkh, 2016-09-30Nice try, but unfortunately it's not mathematically correct. Here is counter-example and my improved version that is also slightly faster (32 vs 34 iterations). Also here you can find some faster variants.", "ollj, 2016-09-29steverock", "using type float, addition is no longer commutative, due to rounding errors. (a+b)+c != a+(b+c)", "relevant because some compilers may dare to optimize the code, assuming commutativity were this is not too precise.", "using type conversions float(), comparators become a bit too unpredictable between hardwares.", "mobile hardware often rounds sin() and cos() so much, it becomes useless for hashes. (does not apply here)", "", "gl_es can be parsed very differently on different systems.", "this becomes relevant when comparing -0.0 with 0.0 .", "", "the variable \"md\" is used to take care of most of these border cases, where, when 2 dots get too close to each other, they merge into one double-cell, and within that cell the used functions break down. the constant in line 68 is very relevant here, increase it to see its effect", "cyanux, 2014-06-14My favorite 2D distance", "iq, 2014-04-25browser --> angle --> directx --> os --> driver --> gpu.", "", "There are just too many places where things can go wrong. Yay computers!", "steverock, 2014-04-24awesome. i guess for some reason the math functions weren't returning deterministic values..? I thought the universe's laws of math had changed on me or something :P", "iq, 2014-04-24(i worked around it for now by using texture/LUT based random values)", "iq, 2014-04-24That's a recent bug in Chrome (and Firefox), it rendered correctly before. If runs correctly on Internet Explorer 11.", "steverock, 2014-04-24Awesome work - I've copy/pasted this code so many times  but does it look like this for everyone: http://i.imgur.com/wnvWi5E.png  note the large regions of solid orange. is that correct?", "SnazzyFiend, 2014-04-10this is very inspiring", "fb39ca4, 2013-07-08This would make a great screensaver.", "huttarl, 2013-05-28Very nice!", "pixelandpolygon, 2013-05-24Very nice!", "srtuss, 2013-05-23So stylish! Also an excellent article.", "jcponcemath, 2023-06-08@Ena Thanks", "Ena, 2023-06-07@jcponcemath The title of the song is 8-bit mentality", "It was released first in 2015 iirc, as a demo soundtrack at Euskal Encounter convention", "jcponcemath, 2023-04-05This is awesome. What is the title of the song? Thanks", "Kali, 2023-02-16@ElsernSchild Thanks! I can't believe its been so many years!", "Kali, 2023-02-16@greerishere no prob, but please contact me at okimkali@gmail.com", "greerishere, 2023-02-13I would love to use this as an intro at some point for live streaming, will credit as well, just wanted to ask first!", "EisernSchild, 2022-11-07Today is 9 years after release  Congrats... always awsome to watch this one", "rhgrafix, 2022-08-14This reminds me of my Peter Max lunchbox back in the late 60's. Incredible code to make so much happen!", "Trainertemper1, 2022-03-18Serious question, how would someone who knows various js 3d libraries mostly, go about learning how to do something like this? How long would it take? What did you guys use to learn doing this?", "yunhai, 2021-08-01Haha, such an interesting art", "GOD, 2021-03-20Oh, and did I mention?: NICELY DONE art! That art is very MY style in some ways. I love CMY design though, so maybe that is a reason why.", "GOD, 2021-03-20PS: Should add a UNICORN or PEGASUS option also. Should be easy to swap out the cat and put those at the front of the rainbow.", "GOD, 2021-03-20WHERE is the HMD edition of this? There deserves to be an SBS edition viewable in an HMD.", "", "There also should be a version of it that can be \"looked around inside\" by wearing an HMD.", "", "Thanks in advance!", "nachetedj, 2021-01-02Muchas gracias, lo tengo todo actualizado pero no funciona. \u00bfSera que no es compatible con MAC?", "", "Thank you very much, I have everything updated but it does not work. Is it not compatible with MAC?", "Kali, 2021-01-01@nachetedj I've just enabled api, try now", "nachetedj, 2020-12-30Siento no saber como funciona eso de la API", "", "Sorry I don't know how that API works", "nachetedj, 2020-12-30Hola!! No puedo instalarlo, me dice que contacte con el creador", "", "Hello!! I can't install it, he tells me to contact the creator", "jarble, 2020-11-07It seems to render more quickly when I replace d>det with d>det*totdist", "jarble, 2020-11-07It seems to render more quickly when I replace d>det with (d>det*totdist.", "sylvain69780, 2020-05-11Love it !!!", "DmitryGashko, 2020-01-26Really cool!", "SabRango, 2020-01-21amazing", "rhgrafix, 2019-11-28 I keep thinking that the sun is Lisa Simpson and she's going to pop up and play her clarinet.", "Poyo, 2019-11-28F!", "pjkarlik, 2019-09-18amazing - just amazing!", "Kali, 2019-07-16Done", "DJ_MC_Phoenix, 2019-07-06Is it possible to get an api?", "ldm0, 2018-11-09I can watch this shader all day! :-p", "JohanFlod, 2018-07-08This is Epic! so cool", "chrisjj, 2018-07-04@eiffie \"and then some more to remove the fog at 168 & 169\" I found that fog at 159 - perhaps the line numbers have changed since I tried with https://www.shadertoy.com/view/lsGBW3 . And that was the trick. Thanks.", "eiffie, 2018-01-04...and then some more to remove the fog at 168 & 169", "eiffie, 2018-01-04You need to change a few things all in the march loop", "RAY_STEPS, totdist<25. and exp(.13*totdist).", "You need more steps, more distance and a smaller detail cutoff.", "chrisjj, 2018-01-04There's a far limit on draw distance that cuts the terrain off in front of the sun. Can anyone tell me how to increase this? I've tweaked the obvious candidates - without success. Thanks.", "chrisjj, 2018-01-03Anyone interested in the shape generation part my find this reduced version useful. https://www.shadertoy.com/view/llBBRw", "rhgrafix, 2017-12-30Which part of this code would I cut n paste into this other Shadertoy so it could be capable of orbital viewing? Destination Toy: https://www.shadertoy.com/view/MsXGWr Shows Mike the green cyclops dude, lol. Thanks!", "stefanozet, 2017-12-27it's fantastic!!! I love thes", "rhgrafix, 2017-12-26That is so amazing!", "Shaun, 2017-09-27Love it! Was thinking of good songs to fit this. Came across a song called \"Amazon\"  - https://www.youtube.com/watch?v=kppUpvkxhcA", "", "Anyone got other song suggestions?", "rthavi, 2017-04-29This is one the best anythings I've ever seen, anywhere.", "Poyo, 2017-01-25^~^", "Wowshade, 2017-01-18 It's night time in Fractal land", "sohale, 2016-09-28badass", "Kali, 2016-07-19@bergi, I just saw your fulldome video (I was away from computers for a while),  nice work!", "@bnvisuals - yes, contact me at paulandrewlee77@gmail.com", "bnvisuals, 2016-07-19Hi @Kali, this is really great. Can I send you a mail?", "bergi, 2016-04-09Hi Kali!", "In admiration of your work (and a lot other's) i made this fulldome piece:", "http://vimeo.com/defgsus/shadertoy", "Enjoy!", "jt, 2016-01-02Spaced out", "FatumR, 2015-03-27Cool!!", "BTW, add at line 144 following at least:", "} else { break;}", "That will rise your FPS in window mode up to 60.;)", "Metzger, 2015-03-09This is the best thing ever..  Need this on Oculus.", "Kali, 2015-02-21 thanks... glad to be back... IQ: I'd love to have a message board in the site for global posting and reading among all users ;)", "reinder, 2014-12-03Yes, really, really, nice!", "EDawg, 2014-12-03Hey Kali - I think this is really nice! Good stuff!", "nimitz, 2014-12-03Thanks for this, if you could re-up the Rubik cube and Tetris ones that would be great.", "vgs, 2014-12-02The epic Fractal Cartoon is back!", "eiffie, 2014-12-02Glad to see these come back!", "iapafoto, 2014-12-02It's back !!!  :-)", "Kitai, 2013-12-18Love it! <3", "ByDesignGames, 2013-11-23@dislo", "8bit Mentality", "https://soundcloud.com/stage7/8-bit-mentality", "", "Great work on this shader! Love indeed!", "dislo, 2013-11-18hello. what song is it?  fits so well", "huttarl, 2013-11-13Awesome! The nyan cat was a nice touch too...", "demofox, 2013-11-13Wow very cool!", "Bier, 2013-11-13ti*= 10.0; is also great  (In path(float ti) )", "WAHa_06x36, 2013-11-10Can we just have all the shaders look like this from now on, I don't want to look at anything else!", "iterationsteppa, 2013-11-09Its the simpsons dream inception!  am waiting for full simpseption movie", "frankwer, 2013-11-08Haha, cool one.", "knighty, 2013-11-08Nice shader... and candy colors :o)).", "eiffie, 2013-11-08Aaah it works for me now. Lovely! The sun is a perfect touch - so different from the mood of Britney's Spaceship but almost the same layout. You could have nyan cat dancing on the screens.", "iq, 2013-11-08Ouch, now the shader doesn\\'t compile anymore...", "iq, 2013-11-08Super cute!!", "", "(it looks very cool with a bit of ambient occlusion too)", "chalky, 2013-11-07Wonderful! And a nice pastel colour scheme", "morgan3d, 2013-11-07Original and beautiful!", "Danguafer, 2013-11-07This is the kind of stuff my children will watch", "Kali, 2013-11-07And now is not a test shader anymore", "Kali, 2013-11-07Also I improved it with more normal samples", "Kali, 2013-11-07Nice! I implemented it by default, thanks!", "WouterVanNifterick, 2013-11-07Cool..  when the colors are negative you get some sort of cartoon-like effect. I just tried this instead of line 120:", "", "return 1.0-vec3(edge+(2.*norm+totdist)*0.1);", "tuxifan, 2022-02-25@dmitrico it's called SDF", "djanitesh, 2019-01-16how to work ?", "dmitrico, 2018-12-28How it works? I cant understand how we can draw complex 3d object without its model.", "Nect3r, 2018-12-28How do I put on my Virtual DJ Software?", "vamoss, 2017-08-30The traverse regular grid is a good trick, could you explain how it works?", "MiSTRFiNGA, 2016-08-16So in Resolume I am having difficulty getting the cubes to bounce. if I use a layer below it it will bounce, but if I sent the opacity down to see the effect, it stops. Any suggestions??", "shau, 2016-06-18Love it  So many thanks for making all this stuff so accessible. Your a star!", "atamusic, 2016-04-28Sweet!", "quad_damage, 2016-02-02When I first saw that, it so reminded me of the QUARTO boardgame: https://en.wikipedia.org/wiki/Quarto_(board_game)", "", "Thank you IQ :-)", "Shaderfrenzy, 2015-10-27Sick Shader. It shows the potential of Webgl like languages. Now a direction should be chosen in codevelopment with browser developers. Really sick shader. some sort of parralax technique ?", "andyborrell, 2015-03-14This is really nice. I think there is a bug in your box intersection code though. Line 113 should call a \"mincomp\" function since what you want is the nearest point the ray passes a box plane.", "The code obviously works as it is, but you would avoid some unnecessary raymarching with this fix.", "iq, 2013-07-15See https://www.shadertoy.com/view/Xds3Rr and https://www.shadertoy.com/view/XdlGzr", "fb39ca4, 2013-07-15How does the shader sample the music? Does it get a 1d texture similar to the bars you can see in the texture selection window?", "tsone, 2013-05-15Really nice!", "movAX13h, 2013-03-09For some reason this shader and the new julia set do not work on my graphics adapter. I guess it is connected to the usage of some higher version of GLSL, right?", "andgonro, 2013-03-05hahaha, very nice I\u00c3\u00b1igo, even I could play a bit with the lighting and the camera", "c3d, 2013-03-05If you run this on Safari on a Mac, you get close to a denial-of-service when you close the window. I lost keyboard and mouse for a while. Not sure why exactly. I also had it in Chrome at the same time.", "iq, 2013-03-04it's a shader error, it happens to me too  i should fix it one day", "rinf, 2013-03-04Hm, looks great, but on my system the cubes do show some black pixel errors in the textures and white pixel errors at the edges.", "", "Are these errors related to the graphics card or the shader code?", "ollj, 2023-01-27smoothstep() between 2 values can be substituted by a similar function, that uses clamp(cos()*a-b),0.,pi*.5)*c-d with some offset+scaling instead. that cos()-step is almost never worth it.", "Main difference is continuity and a very slightly lower precision of cos() on mobile hardware, and we also irrationally scale the time domain by pi.", "cos() has infinite-continuity while smoothstp is just cubic-hermite-sigmoid.", "https://en.wikipedia.org/wiki/Smoothstep", "https://en.wikipedia.org/wiki/Continuity", "for FM-synthesis, more interesting than cos()-with-offset+scaling is ANY other (half+sigmoid), may as well go all in like that", "https://en.wikipedia.org/wiki/Window_function", "and just do the Hann-function as a more general and sharper clamp(step,0,N*.5)", "loathsome, 2023-01-27How could I use this function to approximate linear interpolation, for example color A to color B and color B to color C.", "", "Would an implementation of that function using cosines in some way be faster than simply lerping or just be redundant?", "AndrewNZ, 2019-10-24Line 24 for anyone else who is asking the question: are they moving or is it just my eyes?", "", "Answer; yes, yes they are.", "laggyluk, 2018-10-10Stealing this to use in my painting mini-game ;*", "ollj, 2018-10-08[This comment has been hidden by the shader author]", "akhgary, 2018-05-03lovely colors", "nabr, 2017-11-11keep on dropping the red pills!", "ollj, 2017-07-05Dave_Hoskins, this shader is (a single iteration of) the simplest fm synthesis in 3 domains at once for 3 \"musical instruments\" called ; \"red, green, blue\".", "", "https://en.wikipedia.org/wiki/Frequency_modulation_synthesis", "you just need to set it up so that 3 modulated cosines have the same local maximum, while other parameters (y-offset, x-phase, frequency, amplitude) are different over x (over time).", "", "Fourier transform is useful here.", "forthcharlie, 2016-03-27If you want to easily design your own gradients w/ this system, check out: http://dev.thi.ng/gradients/ - it's for a Clojure port, but uses same logic/coefficients and has realtime preview...", "bpt, 2015-11-14@Dave_Hoskins, blending top to bottom with a white to black good enough for your use?", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "vec2 p = ( fragCoord.xy / iResolution.xy );", "vec3 col = pal( p.x, vec3(0.5,0.5,0.5),vec3(0.5,0.5,0.5),vec3(1.0,1.0,1.0),vec3(0.0,0.33,0.67) );", "fragColor = vec4( mix( col.rgb, mix( vec3(0.0,0.0,0.0), vec3(1.0,1.0,1.0), p.y ), 1.0 - sin( pow( p.y, 1.5 ) * 3.141592 ) ), 1.0 );", "}", "Dave_Hoskins, 2015-10-31@iq, is there any simple way I could get a complete spectrum, like the bottom one, but including white? I can't seem to find it without compromising the simplicity.", "Mourtz, 2015-08-15For an odd reason I get an incredible low framerate of 30, while in other way too complex shaders I get higher.", "ChristinaCoffin, 2015-06-09sweet reference! thanks!", "You can also squeeze out some extra+weird variations from this function by channel swizzling at the end (vec3 AnotherColor = col.gbr) or doing a vec3(1.0)-col if you  dont want to call pal() again with new values", "Dave_Hoskins, 2015-06-04A lovely demo, iq.", "Nrx, 2015-06-03Oh... this new hsv2rgb function (using cosine) is actually slower on my Mac than my original function (tested with 5000 iterations per pixel: the fps is slower):", "vec3 hsv2rgb (in vec3 hsv) {", "return hsv.z * (1.0 + hsv.y * clamp (abs (fract (hsv.x + vec3 (0.0, 0.6667, 0.3333)) * 6.0 - 3.0) - 2.0, -1.0, 0.0));", "}", "Nrx, 2015-06-03Interesting... So, we can approximate the HSV to RGB function:", "vec3 hsv2rgb (in vec3 hsv) {", "return hsv.z * (1.0 + 0.5 * hsv.y * (cos (6.2832 * (hsv.x + vec3 (0.0, 0.6667, 0.3333))) - 1.0));", "}", "DavidBraun, 2015-06-03Awesome technique. Thanks.", "yufengjie, 2023-06-12very amazing\uff0cI can't imagine the visual effects caused by these variables.", "Cubeleo, 2023-03-28I think iMouse.w here wants to be iMouse.z for the interactivity to work.", "jt, 2022-01-04very interesting, thanks a lot!", "iq, 2021-06-26Not really, there's no bug, o.xy goes from 0 to 1, multiplying it by 0.5 would not cover the whole range of the cell.", "Pingas, 2021-06-26it has little bug:", "34: vec2  d = g - fr + 0.5 * o.xy;", "Here must be coefficient 0.5 so cell point will be in its bounds", "jaszunio15, 2020-06-03@iq, security certificate of your site has expired :c", "wcfairytale, 2019-09-23Is there an error in line 60?", "", "1.414 = sqrt(2), should be 2*sqrt(2) = 2.828 ?", "eoviya, 2018-12-24That's awesome!", "But I had a question, when I try to insert a new line after line 70 as follow:", "------------------------------", "//......", "vec2 uv = fragCoord.xy / iResolution.xx;", "uv += 233.33333f; //[ADD THIS]", "", "vec2 p = 0.5 - 0.5*sin( iTime*vec2(1.01,1.71) );", "//......", "------------------------------", "", "It seems like a bad random features.", "Why that happens? Is that because of float precision broken?", "revers, 2017-08-04Cool idea, but one disadvantage of voronoise that I can see is that magnitude of its gradient can exceed 1.0 (and quite often do). It looks less smooth, more edgy in comparison to classical Perlin noise.", "etale_cohomology, 2017-07-26Try saying \"Voronoise\" in an Australian accent =)", "Serg, 2016-09-25This is awesome", "Isn't this a great way to help anti-alias voronoise?", "CaliCoastReplay, 2016-08-10IQ, have you presented at SIGGRAPH?", "CaliCoastReplay, 2016-08-05To be honest, this is kind of exciting research in the noise space.  I wonder if one day computer science students will study voronoise/Quilez noise the way we currently study Perlin noise.", "API_Beast, 2015-06-11I allowed myself to deconstruct and reformat the code so it's more readable.", "https://www.shadertoy.com/view/ltfSzr", "guil, 2015-02-26You could replace the 5x5 kernel with a 4x4 kernel this way :", "lines 52 and 53 :", "for( int j=-2; j<=1; j++ )", "for( int i=-2; i<=1; i++ )", "line 57 :", "vec2 r = g - f + o.xy+.5;", "", "I see no visible degradation", "huttarl, 2014-05-29Very cool idea! Have you found any examples where Voronoise gives better results than regular noise, because grid artifacts were visible?", "vgs, 2014-02-10Thank you iq!", "reality3d, 2014-02-10Really nice insight iq!. I can discern progress on procedural patterns based on this!", "iq, 2014-02-09Here: http://iquilezles.org/www/articles/voronoise/voronoise.htm", "vgs, 2014-01-15Really interesting! I'm looking forward to the article/tutorial.", "ttoinou, 2018-07-20[This comment has been hidden by the shader author]", "txk, 2017-12-02amazing", "ollj, 2016-04-17maybe if you add one sideways fractal to make it look like evergreen forests.", "davepl, 2015-09-20Yes, comments.  I wish people would document their work so that others could learn from it.  This shader is amazing, but it might as well be a Youtube video with respect to educational purposes - if you already know how to do this, you don't need to know how to do this!", "jamesford42, 2013-12-16Nice work! If you have the time... some inline comments to walk us through the reason behind some of the math would be a great read for us", "frankwer, 2013-07-18Stunning, just love how the clouds makes shadows on the trees/lakes. And the sunglare on the water...impressive. Fantastic composed and coded.", "4rknova, 2013-07-04Amazing!", "CPU, 2013-07-03Excellent!", "iq, 2013-07-02More than fur, is like my old volumetric cloud shader but with only one octave of noise (and compressed horizontally). Which looks like fur of course! I have some grass experiments too with more complex mappings than just planar, it looks cool too", "w23, 2013-07-02oh god this is so awesome.", "CBS, 2013-07-02Love it", "simesgreen, 2013-07-02beautiful composition, as always! looks like my fur shader mapped to a plane", "iq, 2013-07-01Thx Dave. In fact, the noise is a bug. Mipmapping should be kicking in, producing the expected smooth reflections. In fact, depending on random variatons of the shader, sometimes is works as expected, which makes me believe this is a bug. I've isolated it to a very small repro case, I'm thinking of filing it as a bug to Angle/Chrome...", "vanburgler, 2013-07-01Wow! Has a very nice atmosphere.", "Dave_Hoskins, 2013-07-01Perfect colours, and perfect shadows! Nice one, the tree height variation makes appear very real. Perhaps the lake's specular noise is not needed?", "srtuss, 2013-07-01beautiful scenery.", "WOW, 2021-08-31\u770b\u5230\u8fd9\u4e2a\u53ef\u7231\u7684\u5c0f\u4f1e\u5c31\u77e5\u9053\u662f\u4e50\u4e50\u5973\u795e", "zcx, 2019-05-06\u54c8\u54c8\uff0c\u4e00\u770b\u8fd9\u4e2a\u5c31\u60f3\u5230\u4e86\u4f60\u90a3\u4e2aCSDN\u4e0a\u7684\u4e13\u680f\uff0c\u4f60\u73b0\u5728\u8fd8\u5728\u505aopengl\u5f00\u53d1\u5417\u5927\u59d0", "ollj, 2017-11-11cuteness is proportional to aspect ratio.", "Imsure1200q_1UWE130, 2017-10-17Hi  *OI*", "isak, 2017-10-13This is eye candy!", "", "Love the colors and the minimalism!", "marktubu, 2017-10-09@\u840c\u840c\u54d2", "zcheng, 2016-07-25@candycat1992 \u00e4\u00bd\u00a0\u00e5\u00a5\u00bd\u00ef\u00bc\u0081", "Friedslick6, 2016-06-04Viewing this on a vertical resolution has the added effect of elongating the umbrella stem which I think adds extra charm to the shader.", "Hanley, 2016-03-25So Cute!", "ffhacker, 2015-11-05@candycat \u00e8\u00bf\u2122\u00e4\u00bc\u017e\u00e5\u00a5\u00bd\u00e8\u0090\u0152\u00e5\u2022\u0160\u00ef\u00bc\u0152\u00e8\u2021\u00aa\u00e7\u00ab\u2039\u00e8\u2021\u00aa\u00e5\u00bc\u00ba\u00e7\u0161\u201e\u00e5\u00a6\u00b9\u00e5\u00ad\u0090\u00ef\u00bc\u0081\u00e6\u0153\u20ac\u00e8\u00bf\u2018\u00e5\u0153\u00a8\u00e7\u0153\u2039\u00e4\u00bd\u00a0\u00e7\u0161\u201eblog\u00ef\u00bc\u0152\u00e5\u2020\u2122\u00e5\u00be\u2014\u00e5\u00a5\u00bd\u00e7\u201d\u00a8\u00e5\u00bf\u0192\u00e5\u2018\u00a2\u00e3\u20ac\u201a\u00e6\u0153\u0178\u00e5\u00be\u2026\u00e5\u2021\u00ba\u00e4\u00b9\u00a6\u00ef\u00bc\u0081", "StoneFinal, 2015-11-04\u00e5\u00be\u02c6\u00e6\u00a3\u2019\u00e5\u201c\u00a6\u00ef\u00bc\u0152\u00e4\u00b9\u2039\u00e5\u2030\u008d\u00e5\u0153\u00a8CSDN\u00e4\u00b8\u0160\u00e8\u00bf\u02dc\u00e7\u0153\u2039\u00e5\u02c6\u00b0\u00e4\u00bd\u00a0\u00e7\u0161\u201e\u00e8\u00bf\u2122\u00e4\u00b8\u00aa\u00e5\u2018\u00a2\u00ef\u00bc\u0152\u00e6\u0153\u0178\u00e5\u00be\u2026\u00e4\u00bd\u00a0\u00e7\u0161\u201e\u00e4\u00b9\u00a6", "834144373, 2015-10-30@candycat @EvilRyu", "\u00e4\u00bd\u00a0\u00e4\u00bb\u00ac\u00e5\u00a5\u00bd\u00e5\u2022\u0160\u00ef\u00bc\u0152\u00e9\u0161\u00be\u00e5\u00be\u2014\u00e7\u0161\u201e\u00e5\u00b0\u008f\u00e4\u00bc\u2122\u00e4\u00bc\u00b4\u00ef\u00bc\u0152\u00e7\u02c6\u00b1\u00e6\u00ad\u00bb\u00e4\u00bd\u00a0\u00e4\u00bb\u00ac\u00e5\u2022\u00a6\u00ef\u00bc\u0081", "@all \u00ef\u00bc\u0161I love everyone and every shader.Happy code shader!", "candycat, 2015-10-30@EvilRyu \u00e5\u201c\u02c6\u00e5\u201c\u02c6\u00ef\u00bc\u0152\u00e6\u02dc\u00af\u00e5\u2022\u0160\u00ef\u00bc\u0081\u00e5\u00be\u02c6\u00e5\u2013\u0153\u00e6\u00ac\u00a2\u00e4\u00bd\u00a0\u00e7\u0161\u201eshader\u00ef\u00bc\u0152\u00e5\u0090\u2018\u00e4\u00bd\u00a0\u00e5\u00ad\u00a6\u00e4\u00b9\u00a0:\u00ef\u00bc\u2030", "EvilRyu, 2015-10-30@candycat wow \u00e9\u0081\u2021\u00e5\u02c6\u00b0\u00e5\u203a\u00bd\u00e5\u2020\u2026\u00e5\u00b0\u008f\u00e4\u00bc\u2122\u00e4\u00bc\u00b4\u00e4\u00b8\u008d\u00e5\u00ae\u00b9\u00e6\u02dc\u201c\u00e5\u2022\u0160:P", "candycat, 2015-10-30@EvilRyu \u00e5\u201c\u2021\u00ef\u00bc\u0152\u00e5\u00a5\u00bd\u00e6\u201e\u008f\u00e5\u00a4\u2013", "EvilRyu, 2015-10-30@834144373 \u00e4\u00bd\u00a0\u00e5\u00a5\u00bd\u00e5\u2022\u0160", "EvilRyu, 2015-10-30Love the color", "834144373, 2015-09-14\u00e5\u201c\u02c6\u00e5\u201c\u02c6,nice work,", "\u00e6\u0152\u00ba\u00e8\u0090\u0152\u00e7\u0161\u201e\u00e6\u201e\u0178\u00e8\u00a7\u2030", "candycat, 2015-09-08I'm very glad you like it!", "iq, 2015-09-07Super cute", "Artoo, 2015-09-06Cute!!", "Mik0, 2023-03-02\ud83d\udc4f", "jonasfrey, 2022-11-04epic!", "huzenan, 2022-09-02This is crazy!!amazing!!!", "oneshade, 2022-02-20Amazing!", "romeosoft, 2020-11-25Thank you iq a lot for sharing everything!", "ollj, 2019-11-12while this is a good approach to a polyphonic freeForm sequence, better performance (and precision) is generally achieved by implementing as much EXPLICIT/specific fract() modulo-arithmetic as possible, where ever a pattern is repeated, or parametric (key changes or repetitions with small variety).", "", "polyphony/chords are also achieved by modulo-arithmetic, with band filtering.", "", "ideally, the only remaining base-sequences are (almost like) short costasArrays, with modifiers to make them less pattern-free than absolutely pattern free, and then you define the differential between a costasArray and any music sequence with a wrapper that uses a lot of fract()/mod()", "cmarangu, 2019-10-19why are, like, all of u shaders completely insane??", "jmdeejay, 2019-09-22This fixed the stars for me:", "```", "sky += smoothstep( 0.95,1.0,texture( iChannel1, p ).x);", "sky += smoothstep( 0.85,1.0,texture( iChannel1, p ).x);", "```", "JoshScholar, 2019-05-27The stars look messed up on my machine (rx 470), they're lines at right angles.", "ollj, 2018-10-15the chord rasterization and filtering over time and frequency can likely be speed up with", "https://www.shadertoy.com/view/Xl3BD4", "being used by something like", "https://www.shadertoy.com/view/XtGyW3", "where for each instrument a loop goes over each key_frequency of an instruments range for the current time, on a function that returns the waveform, set by a  modular-arithmetic sheetmusic function that returns start and end time of the last note of a pitch on a sheet, before time t.", "", "that last function greatly benefits from, when there are chords or very constraining note keys (ie, a sequence that does not touch black piano keys)", "https://www.shadertoy.com/view/Xl3BD4", "ollj, 2018-10-14[This comment has been hidden by the shader author]", "smkgames, 2017-07-25\u0627\u0648\u0648\u0648\u0641 \u062f\u0645\u062a \u06af\u0631\u0645 \u062f\u0627\u062f\u0627\u0634 \u062d\u0627\u0644 \u06a9\u0631\u062f\u0645", "Amazing!!!!", "1565454272, 2017-05-03\u5927\u795e\uff0cplease accept my knees", "BigWIngs, 2016-11-24Love the atmosphere!", "CaliCoastReplay, 2016-08-17Still my favorite shader ever.   You are one of the geniuses of our time.", "", "By the way, while I am not worthy to kiss the hem of your robe, I find that if I turn lines 46-47 from 0.25 * p up to 0.75 * p, I get stars that twinkle better and size to fullscreen better", "dila, 2015-10-06i come back to this every now and then. it's a really lovely scene, perfect atmosphere.", "jeannekamikaze, 2015-10-04Could someone kindly provide any pointers on procedural sound synthesis? Thanks.", "mar, 2015-09-23i don't know if this is the right place to post this but I got an idea", "what about adding a new extended version of mainSound, say mainSoundPoly( float time, int channel )", "this way the player could generate n shaders (say 8 or 16)", "and simply pass 0..n-1 as channel (if substring is found),", "compilers should be clever enough to optimize away unused code", "it would shrink shader size a lot (allowing more complex sequencing)", "and allow for longer music (4 minutes should be ok as that's 44 megs of 16-bit stereo samples;", "not sure about rendering times though)", "fred41, 2015-07-03... really, really nice, thanks ...", "teana, 2014-08-21Beautiful!", "", "", "Great one!", "", "", "How to achieve this effect in Flash AS3.0?", "Saorel, 2014-08-11Nice ! I loved it ! It is pretty cool ! On my mac book pro, the modulo line  49 (Sound) doesn't work.", "If i replace the line by float t = mod(time,60) and replace time by t. It works. Thanks Iq to give us this incredible tool !", "vgs, 2014-08-07Oh yeah, it was always ALT+ENTER... that's what I get for not using Shadertoy for a month.", "And this was the fail of the day, sponsored by me. lol.", "iq, 2014-08-07You mean, ALT+ENTER. Maybe you have an old version of the code... Try refreshing the page (F5) repeatedly until it updates?", "vgs, 2014-08-07I cannot compile shaders by pressing CTRL+ENTER anymore. =(", "hat, 2014-08-06No way! Shadetoy with sound!? love it!", "ciberxtrem, 2014-08-06WOW. With the music it is even better !", "demofox, 2014-08-05now works for me (:", "demofox, 2014-08-04doesnt work for me on latest chrome / win7 64 bit", "MakinMagicFractals, 2014-08-01Works fine in Firefox on my MacPro - dual 6-core + ATI Radeon 5870", "otaviogood, 2014-08-01+1 for working on the mac", "erucipe, 2014-08-01Now it works! great!", "otaviogood, 2014-08-01iq, neither of those suggestions helped on my mac.", "erucipe, 2014-08-01it's wierd. it have to be commenting line 49 and uncommenting line 50 in the first place. but this doesn't affect any for now. and then removing some sin() wave make it works. and after this, if i revert commenting 49, 50 line. it still works.", "erucipe, 2014-08-01First method does not help. Second method does help. if it's too big, adding more sound tab can may solve the problem in an ugly way?", "iq, 2014-08-01If you comment line 49 and uncomment 50, does it help?", "", "Also, if in the instrument() you leave only the first sin() wave and remove the others, does it help?", "otaviogood, 2014-08-01iq, you're hitting some limits on the Mac. Running on mac/intel/chrome, I got the same problem where there's just a pop. Everything is also terribly lagged on this one like the computer is wanting to crash. When I comment out half of the note defs on doChannel2(), the program works again.", "Antonalog, 2014-07-31haha, I'm hearing this song everywhere now... popular with school orchestras", "poljere, 2014-07-31Where is the boat Inigo!!! Pirates with no boat are no pirates ;)", "erucipe, 2014-07-31for my iMac (Intel Iris Pro GPU) with Chrome & Firefox browser, i can hear only a \"pop\" sound once. i can listen Mario, Harry Potter, Pulsating musics. Only this one doesn't work for me.", "337240552, 2023-06-11Great!!", "protez, 2022-11-13masterpiece.", "lagolagoa, 2022-08-12woooooww!!!", "ercantomac, 2022-08-12This is unbelievable... I'm blown away!", "arrizalk, 2022-06-24anyone can help, how to add function drawing on foggy window with mouse in shadertoy, please help", "meowyih, 2022-06-12Wow, this is... AMAZING!! @_@!!", "blackbird, 2022-05-17I love it, it's atmospheric", "Rinoka_Oshiro, 2021-09-27It is incredibly)", "Blackdragon3108, 2021-07-28it's excellent, thanks for the contribution", "BigWIngs, 2021-04-10@losmikeos email me and lets me know what your project is about and we can see.", "LosMikEos, 2021-04-09Hi @BigWIngs,", "what a stylish and heartwarming shader, really great work!", "May I ask you to build on your code and use some parts maybe in my next commercial project?", "And yes, I've read your License notice, but I'm hoping maybe for a short personal permission.", "Many thanks & kind regards,", "LosMikEos :-)", "turboplay, 2021-01-22Converted to HLSL and added to Turbo Play", "Metin, 2020-11-24Very nice! But if you look closely you can spot some vertical lines. It looks like some drops are cut off. Anyone know the reason for that? Tested on Firefox (Windows, Ubuntu, Android) and Edge. Always see these vertically cut off droplets.", "oneshade, 2020-11-11Beautiful.", "PaterBytes, 2020-10-09\ud83d\ude32\ud83d\ude25", "chamorrov1, 2020-07-06Anyone helpme?... I'm new in this website... How I can do a music with this background?", "JohanFlod, 2018-07-19super nice shader! thanks for sharing the code", "Draedrus, 2018-03-21Wow", "SteelSpine, 2018-03-20Amazing.....", "bleak, 2018-01-29@BigWIngs, I see thank you!", "warlock, 2018-01-29OMG! We need a button with +1000", "plumberry, 2018-01-29Wow, so amazing. I love this.", "BigWIngs, 2018-01-28@bleak -> the blur effect makes use of the mipmap levels of the texture. I imagine the video doesn't come with mipmaps, thats why the blur doesn't work.", "bleak, 2018-01-24Hey, really nice effect!", "@BigWIngs I'm was playing around a little before trying to port it out and I noticed that the fog/blur effect does not work with video input in the channel0, why is that so? I'm fairly new to all this shader stuff so there's surely something I'm missing out", "GregRostami, 2018-01-24Very poetic! I love it.", "tehsauce, 2018-01-09Wow", "Flavio, 2018-01-01AWESOME!!!!", "archee, 2017-12-28Excelent idea", "coyote, 2017-12-26", "smkgames, 2017-12-25I love it\u2764", "BigWIngs, 2017-12-23@tyler1992 - I am not sure, perhaps the texture you are using as a background has a watermark? Do you have a link?", "@other - thanks!", "daveyrocket, 2017-12-22Great Job! Its fantastic", "Tyler1992, 2017-12-22Hey I'm trying play with this in TouchDesigner and it seems to have loaded alright with no compile errors but I'm getting this really low resolution text in the background that looks like it says: \"[WIKI]\" any idea on how to get rid of that?", "KylBlz, 2017-12-21looks nice", "MacSlow, 2017-12-18Very impressive!", "flockaroo, 2017-12-18wow, superb! and without buffers...", "iapafoto, 2017-12-18@BigWIngs - Yes it is fixed now. Just fantastic!", "aiekick, 2017-12-18very well done", "jt, 2017-12-18Great rain effect!", "BigWIngs, 2017-12-18Thanks everyone!", "@iapafoto - thanks for pointing that out. For some reason my random number generator doesn't work very nicely on intel graphics. I tweked the values a bit and it should be better now. Can you confirm?", "Shane, 2017-12-18 That is really well done.", "Dave_Hoskins, 2017-12-17Nice, atmosphereic melancholy.", "shau, 2017-12-17Superb. .. and it's raining in London today", "rigel, 2017-12-17Wow. So realistic ! A very big  ...", "slerpy, 2017-12-17This is the most beautiful thing I've ever seen on this website", "kuvkar, 2017-12-17very nice", "ocb, 2017-12-17I've got the same on my window...", "I feel sad now!", "weyland, 2017-12-17so good", "iapafoto, 2017-12-17wow, very realistic effect", "however, here (win7 - chrome) the small droplets patern semms very reguar (repetitive horizontals lines)", "mds2, 2017-12-17I'm going to have to read this carefully later to find out how you did it without any feedback buffers.", "Duke, 2017-12-17Very nice!", "starea, 2017-12-17Awesome sound and visual effects!", "coyote, 2021-05-28@iq, yeah, and what's really interesting is that it is also faster in execution! (at least on an old intel iris gfx mac mini) In 640x360 resolution, it is about 5-10% faster. For the first 5-10 seconds I see about 20 fps while, without the forced loop, it gets 18-19 fps.", "Compile time from 2 secs goes down to less than 1 sec. Btw, from my experience mac mini always compiles shaders much faster than windows pcs. On pc, it's hard to browse shaders with preview disabled, while on mac it's rarely a problem. It doesn't matter if the pc is a strong desktop with dedicated gfx or a laptop with an integrated gfx, compile times are always significantly worse than on puny mac mini... Why is that? ANGLE layer perhaps? Aggressive optimization? More inlining and unrolling?", "iq, 2021-05-28I was able to reduce the compile time from 5 seconds to 2 by changing calcNormal to vec3 calcNormal( in vec3 pos )", "{", "// inspired by tdhooper and klems - a way to prevent the compiler from inlining map() 4 times", "vec3 n = vec3(0.0);", "for( int i=min(iFrame,0); i<4; i++ )", "{", "vec3 e = 0.5773*(2.0*vec3((((i+3)>>1)&1),((i>>1)&1),(i&1))-1.0);", "n += e*mapSimple(pos+0.0005*e).x;", "}", "return normalize(n);", "}", "oneshade, 2021-05-09WOW! This is amazing!", "AbacusAvenger, 2021-03-26This is fantastic!", "kinglarfy, 2019-08-12Amazing\uff01\uff01My god", "JoshScholar, 2019-02-05A version with fake antialiasing added with post processing", "https://www.shadertoy.com/view/tsBGzK", "Feel free to copy the changes over", "tachen, 2019-01-01I'm trying to move the code to unity, Just finished the terrain and sky render:https://drive.google.com/file/d/1A5NOmlVXD2hx9c0SN-Q2mLtekpAK2vBb/view; Thany for your work", "scratch13764, 2018-10-15If nobody told me, I would think this was from the real ps4 game! Did you get all the data from the actual game files??", "leacasas, 2018-07-29Amazinggggg", "ttoinou, 2018-07-20Featured in this video  !", "FlorianDuf, 2018-06-21This is poetic.", "Nice work", "Shakemayster, 2018-06-04Thank you very much for the kind comments everybody. Means a LOT!", "CLPB, 2018-05-19holy excrement", "akhgary, 2018-05-04I wish i could walk around!! this is amazing", "akhgary, 2018-05-04I wish i could walk around!! this is amazing", "ingagard, 2017-11-16Great stuff. Excellent tribute!", "jcyuan, 2017-11-08big WOW!", "DerrickHall, 2017-09-19nice", "MarioNaybor, 2017-09-12fantastic job)", "zproxy, 2017-09-01360 render at", "ttoinou, 2017-08-10Cool thanks. I'll use the night preset which is very nice. And I also adapted the shader for 2.35 aspect ratio, and made the camera move forward", "Shakemayster, 2017-08-10Hi @ttoinou, yes sure. Feel free. Regards", "ttoinou, 2017-08-09Hi I'm doing a shadertoy best of video, could I use your shader in it ? thanks", "Shakemayster, 2017-07-26Hi @Ruzzyr,", "That is so nice to hear man. Very sweet of you and I am honestly humbled by your comment. Please feel free to ask any questions. But can I recommend DMing me on twitter @shakemayster and we can have a conversation around what ever you want to know?", "Ruzzyr, 2017-07-24You have won my heart. I revisit this shader almost daily since the day I saw it a few months back. I am so impressed with this, it brings tears to my eyes. I have a ton of, somewhat silly, questions and if you have a moment to respond I would greatly appreciate it!", "Have you written this entirely on shadertoy website? Have you used any other software? What is your background? I.e. how long have you been writing shaders for, have you done extensive mathematics degree or compsci? Do you have a good book you'd recommend or may be advice for aspiring shader enthusiasts? If you do not feel comfortable answering these I would understand.", "tachen, 2017-07-10Thanks, I will try move this shader to unity", "Shakemayster, 2017-06-24@huttarl, unfortunately the game is a PS3/PS4 exclusive. But totally worth having a console for IMO", "huttarl, 2017-06-24I hadn't heard of this game. Now I want to see if it can be played on PC.", "Shakemayster, 2017-06-07@salafh, also the code is right here and there are so many cool shaders on this website. So just jump in and start playing around. Some times that is the best way to learn.", "salafh, 2017-06-07really thank you.", "Shakemayster, 2017-06-06Thanks for kind messages every one. @salafh, the best place to learn these kind of shaders would be:", "http://iquilezles.org/www/articles/raymarchingdf/raymarchingdf.htm", "salafh, 2017-06-06beautiful   .how to learn that...i want to learn too", "jt, 2017-05-10beautiful", "masterxilo, 2017-05-09Wonderful.", "Shakemayster, 2017-05-04Thanks again for all the lovely comments @zhaolei1458 @rafaccique and @starea", "zhaolei1458, 2017-05-04Very Very Very Beautiful\uff0cGood\uff01\uff01\uff01\uff01\uff01\uff01", "zhaolei1458, 2017-05-04WOW\uff0cCool", "rafacacique, 2017-05-03Wow, absolutely amazing! You guys always manage to push the standard higher and higher!", "starea, 2017-05-02Beautiful scene! I love it!", "Shakemayster, 2017-04-18Thank you very much @vgs. So nice to read everybody's kind words. Thanks", "vgs, 2017-04-15I am in love with this shader. This is just pure beauty! Thank your for all of your hard work!", "Truly amazing!", "cexlearning, 2017-04-11amazing\uff01", "Shakemayster, 2017-04-10Hi @redpix_, Not sure what is causing that issue. Can you kindly let me know what hardware and web browser you are running and I will do my best to fix. Thanks for dropping by", "redpix_, 2017-04-10why is it completely white? only music is playing :/", "Shakemayster, 2017-03-28Thanks @disorder and @duke for your kind words and indeed it is a beautiful game", "disorder, 2017-03-28Super amazing! Love this game too", "Duke, 2017-03-26Awesome!", "Shakemayster, 2017-03-23Thanks Arturo for dropping by and your amazing comment", "ArturoNereu, 2017-03-23Dude, this is amazing! Thanks for sharing and congratulations on the amazing art tribute you just made!", "Shakemayster, 2017-03-22Thanks FabriceNeyret. Have removed the unused functions. My plan was to eventually remove all the rotation functions and just do a mul with pre-calculated matrices. I made a start on it, but then lazyness/work got in the way. one day", "FabriceNeyret2, 2017-03-21some small remarks:", "", "unused funcs: sdCone, smax_mat,", "", "smoothcurve is exactly smoothstep !", "", "rot: why not just defining one single 2D rot func returning matrix mat2(cos,-sin,sin,cos) and do p.xy*=rot(a), p.yz*=rot(a), etc ?", "Shakemayster, 2017-03-21Ah finally  Glad to hear that it is working as expected now. Hey, am based in Eurozone too, UK to be precise", "Aiekick, am not sure what could have caused that, none of the changes were in the function that does the movement of the ruban. But I will inspect it again tonight, to see if I accidentally messed something up. Does it look different or different and bad?", "EntityBlack, 2017-03-21@Shakemayster not sure what you did but now it is running even faster.", "FabriceNeyret2, 2017-03-21@Shakemayster:  no problemo (Europe time-zone here) :-)", "Now working, both on home and office computers.", "aiekick, 2017-03-21the ruban of the monsters not move like tihe original ? normal ?", "Shakemayster, 2017-03-21Added the final, night time color scheme. Hope it all works now.", "Shakemayster, 2017-03-20Fixed a couple more silly issues. Thanks FabriceNeyret2 for sharing the compatibility document. Could you kindly give it one more try ( I know you are probably tired of it by now ) But thank you very much for your patience", "Shakemayster, 2017-03-20Thanks for sharing that FabriceNeyret2. I will have a read through that document. Does the shader work for you as expected now? I posted a picture earlier, and would be good to know if it matches the image I shared? Thank and my apologies again.", "FabriceNeyret2, 2017-03-20it's  a classical mistake on Windows (see https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/ ) because windows adds many abs() where they shouldn't be.", "Dave_Hoskins, 2017-03-20Perhaps you got the clamp parameters in the wrong order but it fell through the instruction with no later consequences.", "Shakemayster, 2017-03-20But the question is, why does it work on mine? Actually I developed parts of it on four different machines (Three of which ran it at exactly 3.000009 fps ) but none of them complaint about the clamps. I was planning on converting all the clamps to saturate: glad I didn't do that", "Shakemayster, 2017-03-20*on", "Shakemayster, 2017-03-20LOL - Yup \"Works one mine!\"", "Dave_Hoskins, 2017-03-20\"it didn't cause any issues for me\" - a phrase coined by many a game developer!", "Shakemayster, 2017-03-20Thanks Maurogik, and my apologies that you had to find those issues. I have updated all the clamps to be proper way around, there was one more on line 1366. Surprised that it didn't cause any issues for me, but hopefully will fix the shader for a lot of people. Thank you so much!", "Maurogik, 2017-03-20mmm, In the 'I can't believe that ever worked' category :", "l35 = #define saturate(a) clamp( 0.0, 1.0, a )", "l1507  = heightTerrainMix\t\t= clamp( 0.0, 1.0, heightTerrainMix );", "l 1355 = heightFog\t\t= clamp( 0.0, 1.0, heightFog );", "Should be clamp( a, 0.0, 1.0) and similar for the others. There could be more, but those are the one that fixed the issue for me.", "", "By the way, I can't believe I thought it look nice before that... it's so much better now !", "Shakemayster, 2017-03-20markusm, if you ever come back, do let us know how you enjoy the game", "Shakemayster, 2017-03-20Seems like it is broken in that case. This is what it is supposed to look like: https://twitter.com/shakemayster/status/842846846972133376", "Unfortunately, I do not have a machine with Ubuntu, but I will try and see if I can install on one and see any issues. Thanks for informing me and apologies for the issue.", "FabriceNeyret2, 2017-03-20a volcano like shape was there a few hours ago (on my home laptop), but no longer now (on my office desktop, both ubuntu/chrome/nvidia).", "Shakemayster, 2017-03-20Sorry, the big mountain in the distance,  through which the sun is shinning? Please let me know if you can't see it, in which case I will see if I can fix it. Thanks", "FabriceNeyret2, 2017-03-20which mountain ?", "Shakemayster, 2017-03-20Thanks iapafoto", "FabriceNeyret2,No specific reason, I started off with the random vectors texture, but liked the look of the font texture more on the big mountain in the back.", "FabriceNeyret2, 2017-03-20what's the idea behind using the font texture rather than the random texture for noise() ?", "iapafoto, 2017-03-20Best oniric shader of all time!", "iapafoto, 2017-03-20wowowowowowowowowow", "markusm, 2017-03-20Just bought the game after looking at this shader for some time .... has to be great!", "Shakemayster, 2017-03-19Thanks aiekick. That would be amazing, though the fact that people like yourself think that this shader is cool, is pretty awesome too", "aiekick, 2017-03-19next shader of the week", "nikosbit, 2017-03-19Thank you for sharing, just beautiful !!!", "Shakemayster, 2017-03-19Thank you very much Entity Black and really such a compliment. I feel so honoured to be considered next to some of the amazing guys here on Shader Toy. ( I know they are far more awesome )", "Over the last couple of days, I have received a lot of love and positivity around this shader ( on social media especially ) and I can't thank everybody enough for their kind words. Actually there probably is no way I can express my gratitude, except that I am on cloud 9 right now. Thank you all once again!", "EntityBlack, 2017-03-19This is just so beautiful! O.o The color balance... I think we have new magician here on Shadertoy :]", "poljere, 2017-03-18+1 Amazing.", "Shakemayster, 2017-03-18Dila, you are a legend! Have taken your changes and it all seems fine to me  - I have to say it would be amazing if other people contribute and it keeps on getting better and better", "dila, 2017-03-18+1 superb! (diff with this to see my systems glsl bug fixes http://pastebin.com/xWxDky03)", "MM, 2017-03-18This is absolutely fantastic!", "Shakemayster, 2017-03-18Worth a play. Will try as soon as I can get back on a machine, where I can see the detail. Ideally we want it to be faint very close, then go very strong around the traveller and upto first and second dune, and then fade away gently.", "Dave_Hoskins, 2017-03-18I'm just more than happy to help. I was wondering if you could get rid of the aliasing sand texture in the distance by not forcing a particular texture LOD? i.e...", "float textureGlitter  = texture(iChannel1,pos.xz * _TerrainGlitterRep, -2.).x * 1.15;", "Which just uses a little bit of bias.", "...Or other such numbers.", "Shakemayster, 2017-03-18I am not sure what the protocol is, but have added you as Other contributors Dave. Hope that is OK?", "Dave_Hoskins, 2017-03-18", "Shakemayster, 2017-03-18Done!. Thanks Dave. Hope it s better. Can someone confirm please, I am running on my old 10fps laptop", "Dave_Hoskins, 2017-03-18You can smooth the camera transitions as Klems suggested by added a smoothing formula to your noise function:-", "insert[1602]    fc = fc*fc*(3.0-2.0*fc);", ".. and perhaps reduce _CameraMovement.w a little bit.", "flockaroo, 2017-03-18wow - really really good!", "Shakemayster, 2017-03-18Thanks Maurogik,", "I am glad you noticed the details. I actually spend most of my time playing with values and getting the details to a point I was comfortable with. Such an amazing feeling to know that it's being noticed. Thanks", "Maurogik, 2017-03-18This is amazing, love the attention to detail here, you even got the sand moving in the wind !", "coyote, 2017-03-18WOW!!!", "Shakemayster, 2017-03-18Thank you all very much for your love and kind support. Means a LOT, a LOT, a LOT!", "Shane, 2017-03-18Really pleasant to look at. The sand trail makes it for me. I love games done in this aesthetic, and you've managed to produce it very well - all within the confines of a shader.", "Nimajamin, 2017-03-18Stunning work my friend", "Klems, 2017-03-18This is awsome! I think the camera should have smooth movements tho.", "aiekick, 2017-03-18oh my god AWESOME", "Shakemayster, 2017-03-17Thanks iq. Super proud to have the seal of approval of the super Meastro himself!", "iq, 2017-03-17Super good job!!!", "Shakemayster, 2017-03-17Please do dila", "dila, 2017-03-17Hi, sorry there are other errors. I will come back and +1 when I get a system upgrade 8>", "Shakemayster, 2017-03-17Thanks BigWings. Appreciate the like", "BigWIngs, 2017-03-17That is amazing! You really managed to get the look right. Liked!", "Shakemayster, 2017-03-17Hi Dila, I have removed suffix. Can you kindly try again. Though am not sure if it will work on cards that don't support GLSL ES 3.0", "dila, 2017-03-17I wish I could see this, but I get http://i.imgur.com/rghA4lO.png", "Can someone tell me if my browser or OS is causing this problem because it seems to be just me", "Shakemayster, 2017-03-17Thanks Dave. Well I have learnt a lot from others who have done some amazing stuff here. Glad you like it", "Dave_Hoskins, 2017-03-17Welcome to Shadertoy. First shader? Masterful!!", "P_Malin, 2017-03-17Wow!", "jeffbustercase, 2022-09-11I think the colors on the ball is one of the key points in this...", "imjamespond, 2021-12-23A M A Z I N G !!", "Trospy, 2021-12-17It's Awesome", "jt, 2021-09-10awesome!", "TekF, 2020-02-03The waves function is a simple ridged multi-fractal. It takes a smooth noise function, adds a crease in the middle of the range, and then adds multiple octaves of noise at different scales, here's a nice example: https://www.youtube.com/watch?v=sK4IaSnSjBo", "I animate it by using 3D noise functions, sampling them on a plane, and then sliding that plane along the 3rd dimension so the noise appears to change over time.", "icaroleles1, 2020-02-03Can you tell me something about the Waves function? Do you have any material or thoughts on that.", "xavierseb, 2019-04-20so amazing", "scratch13764, 2018-11-04This is really cool, but the waves are too small and it makes the buoy look really big.", "TekF, 2017-06-01Thank you! Glad you like it.", "Refraction is fairly simple in ray tracing. The whole scene is drawn by firing a ray from the camera for each pixel and working out what it hits. When it hits the water I bend the ray according to the refractive index of water, then fire a new ray to find out what it hits underwater.", "\"Boat to world\" transforms points on the buoy (it was originally going to be a boat!) into world space - so when the buoy moves the pattern on its surface moves with it.", "Imsure1200q_1UWE130, 2017-06-01Idk whats boat to world. OH THIS SHADERS IS SOO BEAUTIFUL! how did you refract im still a child so idk how to refract but seriously this shaders is soo good!", "TekF, 2016-06-25Sorry, I'm not sure where you can get the texture from. Probably a question for the creators of Shadertoy. The one I'm using is the 256x256 rgba noise.", "cyrilp, 2016-06-25i mean the right png noise file to use for ichannel0. i have tried the tex11 and tex16 from this site but i'm getting very flat waves. where can i find the png file you are using ?", "TekF, 2016-06-24Sure I'm on twitter, @TekF. Not sure what you mean by the \"right\" texture. If you set iChannel1 and read iChannel1 it should work.", "cyrilp, 2016-06-24Thanks ! another question, i'm struggling to set the right texture. what file do i need to use ? none of those provided in the texture dialog is like the one used. what should the texture size be ?", "Any way to contact you directly ? i would be glad to show you the result running on a watch", "TekF, 2016-06-24The water quality is the easiest thing to tweak: reduce the value of octaves in Waves() and WaveDetail(). Also you can replace calls to NoisePrecise() with the cheaper Noise().", "cyrilp, 2016-06-24I'm running the shader on a phone, what parameter can i change to make it quicker at the expense of some quality loss ?", "TekF, 2016-06-22You need .rgb on the end.", "", "albedo is a vec3, texture2D returns a vec4.", "cyrilp, 2016-06-22albedo = texture2D(iChannel1, vec2( atan(pos.x,pos.z)/tau, asin(pos.y)*2./tau+.5 ) );", "", "is giving me this error:", "'assign' : cannot convert from \"lowp 4 component vector of float\" to highp 3-component of float\"", "TekF, 2016-06-22Tau is 2*pi. http://tauday.com/", "", "Mapping something to the visible side means knowing where the camera is and then constructing a 3x2 matrix to transform position into uv. It's probably easier to just position the camera so it's looking along one axis, and then use the other 2 axes as the texture coordinates.", "cyrilp, 2016-06-22First one looks great.", "In fact my idea is to wrap a texture showing a watch face: camera position will be fixed. Is there a way to wrap the texture only on  the visible side of the buoy ?", "", "In second option, what is \"tau\" ?", "", "Thanks again for taking the time to answer !", "cyrilp, 2016-06-22Thanks ! i'll try with this", "TekF, 2016-06-22It might be easier to start with a simpler scene!", "", "Texturing a sphere is a bit tricky, because you have to decide how to map a flat texture onto a curve, which creates distortions.", "", "The simplest way is a planar projection, so you just take the x & y coordinates and ignore the z. e.g. albedo = texture2D(iChannel1, pos.xy*.5-.5).rgb (and bind a texture to iChannel1).", "", "Or you can compute polar coordinates to wrap the texture round the sphere like a map of the earth. Something like texture2D(iChannel1, vec2( atan(pos.x,pos.z)/tau, asin(pos.y)*2./tau+.5 ) ).", "", "My favourite technique is triplanar mapping, here's an example: https://www.shadertoy.com/view/Xd3XDS", "cyrilp, 2016-06-22Thanks for you quick reply.", "I'm just starting to learn shaders. Could you help me more and tell me how to wrap a texture on the buoy in this function ?", "TekF, 2016-06-21Of course. The colour is defined by the variable \"albedo\" in the \"ShadeBoat\" function.", "cyrilp, 2016-06-21Looks great! any way to use a texture for Buoy ?", "ollj, 2016-04-2914 fps on 2007 hardware. shows that you should use whatever method makes most sense to maximize performance. but i see many moving lines of dotted white pixels. refraction code seeminaccurate for 2007 hardware.", "FabriceNeyret2, 2015-09-15strange: all is ok up to t = 2.85981, then the image get pure grey... (chrome/linux)", "cubby208, 2015-08-01THIS IS CRAZY AMAZING! Seriously though really really realistic.  I could watch this for a long time!", "jackdavenport, 2015-06-12Modified it a bit to add cubemap reflections, and it looks pretty nice: http://i.imgur.com/aypCrB7.png", "peteralba, 2014-10-27Great stuff! how would one go about adding a skin/image to the buoy? If anyone could give me a hint, it'd be much appreciated", "huttarl, 2014-05-10Never mind, my machine's crashing on all the shaders now.", "huttarl, 2014-05-10Crashes on my machine: \"Unknown error.\" (Intel HD Graphics 4000.)", "AGP, 2014-02-04I appreciate your quick response. Would you mind terribly e-mailing me so I can ask more questions? :- )", "If not, my address is bernardoratto@hotmail.com. Thanks in advance.", "TekF, 2014-01-24Ray needs to be different for each pixel. If you look at the code generating ray you can see it's based on gl_FragCoord.", "", "You'd want something like ray = localRay*cameraMatrix (with localRay computed the way it is now), then pass cameraMatrix as a uniform variable.", "", "BTW, please respect the creative commons license I've put on this: http://creativecommons.org/licenses/by-nc-sa/3.0/", "AGP, 2014-01-23Hello. I would like to use your excellent (a slightly simplified version of it without the buoy, actually) shader in a 3d engine named jpct. For that, I must first know what the values cam and ray are. Please excuse the Java code, but I'm sure it won't be hard to read it. Obviously the method setUniform updates uniform variables (into which, it follows, I turned your cam and ray variables). The following is what I'm doing. All I get is a black plane. Thanks in advance for any help you may provide.", "", "public void update(SimpleVector cameraPosition) {", "shader.setUniform(\"iGlobalTime\", (timeF+=.1f));", "shader.setUniform(\"pos\", cameraPosition);", "shader.setUniform(\"ray\", waterPlane.getTransformedCenter().calcSub(cameraPosition).normalize());", "}", "TekF, 2013-12-12I've added a little anti-aliasing to the buoy's albedo, because the jaggies were bugging me.", "blevin, 2013-11-11Nice work!  And that is a clever technique with the noise texture -- the way it connects samples that neighbor by (37,17) packs the bracketing samples into XZ / YW.  I have been smiling about the cleverness of that all day.", "PauloFalcao, 2013-09-23Very cool", "Dave_Hoskins, 2013-09-22To put my oar in regarding the water line, looking at pictures of these things they are usually really black or algae covered and scummy around the water line.", "srtuss, 2013-09-19maybe it could help to discard high frequencies in the water function to do so.", "TekF, 2013-09-19struss - I think that would work! I'd been wondering if there's a way I could do that. I will have to try it. Only problem is I'd need lots of samples to cover the last few frames.", "4000103, 2013-09-19raytraycing, pretty nice", "srtuss, 2013-09-18that's my favourite water simulation at shadertoy so far. very cool!", "", "could you make the buoy look wet at the places the water hit it? maybe travel back time in the wave function and change lighting according to that. that would make it perfect", "Antonalog, 2013-09-13so good!", "Dave_Hoskins, 2013-09-11Sorry for being sarky.", "Cool, the buoy fits in much better BTW.", "TekF, 2013-09-11Another update: It's now gamma correct, and I've added some blurry specular to the buoy.", "", "Dave - you saw it when I was part way through adding specular, it's lost the sharp highlight now. ;)", "Dave_Hoskins, 2013-09-11That sun's bright for such a grey day!", "TekF, 2013-09-11Update: I've freed up the camera movement a bit more, so you can now get the camera really close to the waves.", "TekF, 2013-09-10Thanks! I'd been wondering how I could fix the aliasing noise in the distance, that's a really simple solution.", "", "I think they look whiter because you'll see more pixels reflecting the sky, because you're flattening the normal. Actually I like how it looks, waves in the distance are at a shallower angle so fresnel reflections should look whiter, so I'll change the shader to do that.", "Dave_Hoskins, 2013-09-10Thanks!", "I've just noticed I can anti-alias the waves by increasing the '.01' in the line 278 according to the distance from the camera, with some clamping. They appear a little bit too white on the top though for some reason.", "TekF, 2013-09-10Of course! The reason I share code is so people can learn techniques to use elsewhere. (I'd appreciate credit if that's possible.)", "Dave_Hoskins, 2013-09-10I've seen those lines before when experimenting with my mountain shader. I guess the filtering is as good as it needs to be for normal texturing. Looking at the bottom left corner on your water, there's only very slight diagonal lines, but they're there when using both techniques, on my 'puter anyway.", "This has to be the best way to do water, I'm going to have to use your code in something else, if that's ok?", "TekF, 2013-09-10Dave - That's quite likely. I've had problems with the precision of the bilinear filtering on my graphics card at home in some other things I've written, but I haven't tested it on other systems. The error was pretty obvious - hard lines on the water surface.", "Dave_Hoskins, 2013-09-10In the noise function I can't tell the difference between the single and the 4 texture look-up version. It that hardware a dependent issue?", "Dave_Hoskins, 2013-09-10The white bits on the water help make it look completely believable, top work TekF!  it.", "iq, 2013-09-10Damn, I had the same shader (island version instead of buoy, no need for refraction) in the workings for this weeks shader. Time to destroy I guess. Need to think of something else.", "", "I like the refraction a  lot", "4rknova, 2013-09-09The water and the reflection look awesome!", "TheoWU, 2021-05-24I am learning from your youtube channel! I learnt graphics lessons before but mostly theoretical, coding gives me another enjoyment. Thank you~", "Qcenzo, 2021-05-22\u610f\u5883\u7f8e", "oneshade, 2021-05-21Really creative use of bokeh!", "BigWIngs, 2020-09-28@andremichelle looks and sounds nice!", "andremichelle, 2020-09-24Hi Martijn! We are using your shader for a featured track on audiotool. Hope you like it. If you want different credits, please contact me. https://www.youtube.com/watch?v=1dn9CpZKiFo", "victorqribeiro, 2019-09-15My project is being featured on hackernews, so I thought this was a good time to post the link here and invite more artist to contribute more shaders to the project. no ads, no money... just beautiful art with good music.", "", "https://github.com/victorqribeiro/radio", "BigWIngs, 2019-06-05@zisko  No problem. Curious to see the final result! Drop me a link.", "zisko, 2019-06-05This is beautiful! I'm going to use a modified version for my personal website (and will credit/link you!)", "BigWIngs, 2019-03-14@victor", "Yeah you can use this on any non-commercial project as long as you put me in the credits and supply a link.", "", "@justPlayin", "I guess you are right. I'm too lazy to change it now though. You can change it on your own version if you follow the tutorial", "victorqribeiro, 2019-03-14by the way, the code is totally open source and you can check it out here: https://github.com/victorqribeiro/radio", "victorqribeiro, 2019-03-14Hi man, how are you? My name is Victor Ribeiro and I'm a software engineering undergrad. I'm working on a personal project that is visualizations for webradios. I'm not making money off of it. I writing to asking you if you mind me using this shader on my project. All credits to you, I'm only gonna make the port to webgl using three.js.", "the link for the project is https://victorribeiro.com/radio. All the radios available on the project have given me green light to use their stream. Anyways, thanks a lot. Love the work.", "JustPlayin, 2019-03-11Impressive effect.  I hope you don't mind me making a suggestion (not a critisism!).  I tried to change the code to illustrate my point but I'm not good enough to make it work!  As you're travelling at speed the headwind would make water droplets move up the windshield. I think the staggered movement you have would look fine, just reversed.  If you could simulate the ~30 degree slope of the screen rather than the flat plate that would be icing on the cake", "neoneye, 2019-03-08pretty!", "victorqribeiro, 2019-02-11dude, i've been following on youtube. you rock!!! thanks a lot for the videos.", "smart61, 2018-10-04Beautiful!", "ROAG99, 2018-08-21Respect bruv", "devshin, 2018-07-18nice...", "akhgary, 2018-04-27lovely", "prohell, 2018-04-11That's Cool,man", "prohell, 2018-04-11That's Cool,man", "aiekick, 2018-03-17oups https://www.shadertoy.com/playlist/featured", "aiekick, 2018-03-17there is also the playslit for featured  [url=https://www.shadertoy.com/playlist/featured]https://www.shadertoy.com/playlist/featured(/url]", "purple_marine, 2018-03-15Sweeet", "FabriceNeyret2, 2018-03-14don't you guys know that there is now a playlist associated to each categorie ? :-) SotW: https://www.shadertoy.com/playlist/week . But I didn't found another occurence here (but I missed some). Maybe it was the other category.", "GottZ, 2018-03-14ye i think it was shader of the week before. around the time i commented first. 2017-07-06", "BigWIngs, 2018-03-13Oww Shader of the week! Thanks ShaderToy gods ;)", "@P|NG - was this already shader of the week sometime? I wasn't aware of that.", "FabriceNeyret2, 2018-03-13it was a very long week :-p", "PlNG, 2018-03-13Shader of the week again. Nice!", "metalim, 2018-03-13Why, oh why, you don't have sound volume slider, Shadertoy...", "piero, 2018-03-13Magical!", "mlkn, 2018-03-13Incredible!", "Fettmops, 2018-01-25very nice", "up209d, 2018-01-25You re rock Mr GIANT WIngs", "jpupper, 2018-01-03Beautifull. love the music also", "Passion, 2017-11-27rain drop effect is nice", "BigWIngs, 2017-11-19@heliumsoft - I'm doing a video tutorial series on this shader. I haven't gotten to the rain yet, but will get there soon. Then you can just make it yourself.", "", "If you want to use the whole effect, as is, then send me a mail countfrolic@gmail.com", "heliumsoft, 2017-11-17How are you?", "I did check your effect and wondering.", "I am developing mobile video app and want insert your rain effect in that app.", "Then license is \"Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\"", "How can i get rain effect license.", "Thanks.", "ingagard, 2017-11-16Very relaxing. Great idea and really good implementation.", "BigWIngs, 2017-11-13I came up with the 2 step idea because it felt more intuitive and was easier to explain step-by-step in previous videos.", "However, you obviously know your stuff when it comes to computer graphics and you seem to feel more strongly about your approach than I feel about mine so I'll be sure to do it your way the next time I make a video", "FabriceNeyret2, 2017-11-13\"for the sake of understanding\" : it's the point I totally disagree with.", "If you didn't had OpenGL classes explaining the series of frame transforms, you would never have come with this 2-step idea.", "While if you had in mind the basic algebra for geometry you learn at age 15, you know that scaling is multiplying coordinates by some scalar (later only you learn how to scale with distortions... that we don't want here).", "That's why I say it's a corruption of mind by OpenGL (plus CS assassinating one's very basic math skills).", "If it was only an optimization issue, I won't be so deeply annoyed by this pattern so frequently seen here. (Now, I'm more a math-phys scientist that's a CS guy. This may count :-) ).", "BigWIngs, 2017-11-13@FabriceNeyret - Hehe... I was waiting for you to say something about it. ;)", "I think that for the sake of understanding, the aspect ratio approach is better and it only costs one extra instruction. You are right though, your solution is cleaner and more performant. I'll be sure to use yours next time.", "FabriceNeyret2, 2017-11-13Oh no, the life tutorial starts with the horrible aspect ratio thing, which is really knowledge of graphics pipeline corrupting people's mind !", "-> to scale without distortion is just applying a real simple scaling by a float, the very first one people saw at school before long. -> just do / R.y .", "And if you want to center, just translate to center, period.", "->     vec2 uv = ( fragCoord - .5* iResolution.xy ) / iResolution.y;", "FabriceNeyret2, 2017-11-13so great, perfect in minimalism look and still conveying all aspects; how did I missed that in July ?", "Imsure1200q_1UWE130, 2017-11-06THIS IS SOO BEAUTIFUL", "It looks like dusk when you uncomment #define DROP_DEBUG tho..", "arminkz, 2017-10-31hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "jay3sh, 2017-10-27Beautiful! Can you add a wiper?", "Zavie, 2017-10-26This is really great, and completely captures that moment we've all experienced. I was about to suggest to add a turn signal, but you already did. This is perfect.", "XT95, 2017-10-25Wonderfull! Great execution", "P_Malin, 2017-10-25This is beautiful. You should turn the wipers on and focus on the road though.", "Sebquismoke, 2017-08-01@BigWings - Thank you very much!", "BigWIngs, 2017-07-21@MacroMachines - Thanks, added your fix.Regarding the real-time rain displacement, there are some racing games these days that have amazing rain.", "@Sebquismoke  - the rain is built into the camera. If you steal my cam function and use it in your own raytracer you should get the same drops. I'll see if I can lift it and make a simple effect you can use with a texture.", "@everyone else - Thanks for your nice words!", "MacroMachines, 2017-07-19Super cool, love bokeh and I did rain displacement on this ford gig I did a while back: https://youtu.be/FOL9B-e2Oz8 and that took crazy time to render, loving getting into realtime.", "MacroMachines, 2017-07-19to fix mobile I had to make the float stp into a const,", "line 336", "#ifdef GL_ES", "const float stp = 1./8.;", "#else", "float stp = 1./8.", "#endif", "", "and then wrap the #ifdef HIGH_QUALITY with #ifndef GL_ES and #endif", "Dave_Hoskins, 2017-07-18This would make a great art exhibition piece. Relaxing too.", "Sebquismoke, 2017-07-17Very nice!", "How can i do if i'd like to replace the background by another image (iChannel1 for example)?", "Thank you for your answer.", "visuality, 2017-07-09This is really beautiful and clever.", "dcbrwn, 2017-07-06This shader is so cool, it should be illegal! XD", "poljere, 2017-07-06Very cool!", "GottZ, 2017-07-06this deserves more visitors", "BigWIngs, 2017-07-04@flockaroo - it's an artifact from mirroring the streetlights to get better performance. It should be better now.", "@everyone: thanks!", "flockaroo, 2017-07-04very cool!!", "the yellow bokeh's o the right side are clamped towards the middle - is that only on my system?", "kuvkar, 2017-07-04looks great", "glkt, 2017-07-04wow! true work of art", "BigWIngs, 2017-07-03Thanks everyone!", "GregRostami, 2017-07-03Just gorgeous!!", "Shane, 2017-07-02\"As abstract examples go...\" - It'd be great to have a comment editing feature.", "Shane, 2017-07-02A abstract examples go, this is really well done.", "duvengar, 2017-07-02Amazing", "Yrai, 2017-07-02Some real raindrops, I'm impressed. 1 buffer also... Hella' good job.", "ttoinou, 2017-07-02Wow this is incredible. You should upload a video to YT with this", "shau, 2017-07-02Beautiful", "ocb, 2017-07-02Very cool. So nice drops.", "knarkowicz, 2017-07-02Pretty!", "jTobergte, 2017-07-02Wow! That's cool..", "krotos139, 2021-10-26Hello Zavie.", "Very cool effect. Great work!", "I was wondering if I can use part of this code for commercial project?", "Thanks.", "ollj, 2021-06-09Square tiling is likely faster, but it requires to muti-tap a large neighborhood of tiles for each pixel, to restore LOCAL continuity after doing mod or floor.", "", "The larger the ripples, (in number of tiles), the larger the neighborhood, that needs to be tapped.", "", "You can smother out the multui-tapping with kerning ==overlapping tiles", "", "kerning is a useful shadertoy tag,too.", "", "This all only makes sense for tiles in 1d or 2d (of infinite height), as neighborhoods get exponentially bigger with each dimension, it becomes very slow in 3d.", "multi tapping is likely faster in barycentric coordinates, but no one ever put that to the test.", "Yon, 2021-06-08I want to computer it into a render texture and sample it tilling, but I find that it's not square continuous, is there any way to solve this problem? Thank you and great work!", "eastnie, 2021-04-28great work!  Can you tell me how to specify the location of the ripples, such as only at the edge of the image", "LosMikEos, 2021-04-19Hi @Zavie,", "this is a very stylish shader, great work!", "May I ask you to build on your code and maybe use some parts in my personal commercial project?", "Many thanks & kind regards,", "LosMikEos :-)", "Daryashd, 2020-06-15Great effect ! I have a commercial proposal for you, if you're interested - it will be great to cooperate) I represent a company of Belarusian programmers and wanna to contact you directly)", "Zavie, 2020-03-23@sander666: thank you.", "The shader doesn't have a straightforward way to control the number of circles. You can, however, change how fast a circle is going to reappear after it has faded out.", "Line 61, by changing the constant factor (for example: 0.3*iTime), you can change the frequency of the drops.", "Line 63, by adding a constant factor (for example: 10.*t), you can compensate the speed of the circles.", "Line 70, by replacing (1-t)*(1-t) by something like, for example: pow(1-t, 25), you can change how fast the circles fade out.", "Although it's not very handy, I hope this helps.", "oskycar, 2020-03-06finaly, finaly, the correct anster is use uv2 to get the source colors. the code should like this:", "", "vec2 uv = fragCoord.xy / iResolution.y * resolution;", "vec2 uv2 = fragCoord.xy / iResolution.xy* resolution;", "", ".....", "", "vec3 color = texture(iChannel0, uv2/resolution - intensity*n.xy).rgb + 5.*pow(clamp(dot(n, normalize(vec3(1., 0.7, 0.5))), 0., 1.), 6.);", "oskycar, 2020-03-06finnaly ,that's an error on line 45,fix it like this", "", "vec2 uv = fragCoord.xy / iResolution.xy * resolution;", "oskycar, 2020-03-06fix 77 in the follow cold would make the video looks like scaleed bigger... how to fix this problem??", "oskycar, 2020-03-06there has an error on line 77, int should write like this:", "vec3 color = texture(iChannel0, uv/resolution*(iResolution.y/iResolution.x) - intensity*n.xy).rgb + 5.*pow(clamp(dot(n, normalize(vec3(1., 0.7, 0.5))), 0., 1.), 6.);", "", "you can open an video to check it.", "sander666, 2019-10-16Hi Zavie,", "", "very cool shader. Can you tell me how to make less overall ripples, so maybe adjustable so that there are only 3 or 4 ripple generated? Is this connected to the hash functions? I tried to play with those, however did not have success. Thank you.", "Zavie, 2018-06-29Hello LeeTheDev, for a non-commercial open source project, feel free to use this code as long as you keep the header with it.", "LeeTheDev, 2018-06-19Hello, mind if I use this for a little non-commercial open source project?", "d1kkop, 2018-05-18Very nice!", "jpkelly, 2018-04-10Awesome Thank you!", "Zavie, 2018-04-10Hello jpkelly, yes no problem for a VJ set.", "Just keep the header comment in the shader please.", "jpkelly, 2018-04-10Hello Zavie.", "May I use this shader for an upcoming VJ gig?", "JP", "Zavie, 2018-01-11Hello heliumsoft. Sorry I am only noticing your message now.", "You may use the effect, as long as you include a mention of \"Ctrl-Alt-Test (http://www.ctrl-alt-test.fr)\" in the credits.", "heliumsoft, 2017-11-24Very nice effect.", "Can i use your code for commercial project?", "I am developing Video Editor for Mobile, I need your effect like this.", "Thanks.", "ollj, 2017-05-05seems to be simpler than vorRain() of", "https://www.shadertoy.com/view/ldByDw", "", "because all fragment code runs in parallel dFdx() and dFdY() give decent first derivatives almost for free.", "ttoinou, 2017-03-13Impressive", "Zavie, 2017-03-13Done. Thanks for the suggestion.", "FabriceNeyret2, 2017-03-13suggestion:", "float resolution = 10. * exp2(-3.*iMouse.x/iResolution.x);", "ollj, 2022-08-21does work well in VR, BUT the very low resolution makes it very weird/imprecise.", "noirnerd, 2022-01-15Takes me back aha awesome", "jorge2017a2, 2022-01-02go back to look at this Toy .... and it is an excellent job ... very professional ... also the sound is very good .... excellent .... quality  .... happy new year to all", "P_Malin, 2021-06-10Hey Dave! Hope you're well.", "Thanks. Yeah, I butchered this a bit earlier to get rid of some globals for .hlsl. It should be working again now. Cheers.", "Dave_Hoskins, 2021-06-10Hey Paul. We can't enable sector 31 or others because you don't include the ray in the calls.", "P_Malin, 2021-06-10Now running in Windows Terminal... https://twitter.com/P_Malin/status/1403037027650707459", "JimmySLot, 2021-04-20cooool really!", "zproxy, 2021-03-28hey have you done a render for duke3d/blood yet?", "P_Malin, 2020-11-21Oh thanks. I'll take a look when I'm at a computer.", "It works if I add a blank line before the first #define line on my phone.", "Plento, 2020-11-20Not compiling anymore. For some reason it doesn't like this: #define N(T,N) t+=float(T); if(x>t) r=vec2(N,t);", "Line #1 in sound tab.", "I'm on windows on chrome if that matters.", "jorge2017a1, 2020-07-03 Excellent Sound .... classic Nes sound .... Very good work ... very nice !!!!", "................", "Excelente Sonido .... cl\u00e1sico de sonido de Nes .... Muy buen trabajo ... muy bonito !!!!", "P_Malin, 2019-10-16Thanks onak - this is the single stateless shader version. A multi-pass playable version with the whole level is here: https://www.shadertoy.com/view/lldGDr", "onak, 2019-10-15you did what? this is fantastic...", "zproxy, 2017-10-17360 at", "drone1, 2016-04-26Not bad", "finalman, 2016-04-09Absolutely mental! Great job!", "anastadunbar, 2015-05-02I wish I could see it, but the shader won't work.", "archee, 2014-11-19This hit the world like another September 11. attack  (date of release)", "Forceflow, 2014-11-19So amazing. Great work!", "ac3t1ne, 2014-10-11Love Doom; love this!!", "demofox, 2014-09-25so good... ::drool::", "Luther, 2014-09-24My god, what have you done", "Nrx, 2014-09-19Just amazing - I can't say more! Congrats!", "Optimus, 2014-09-18This is the best shader I have seen in this site ever!!! There is so much identical detail, even a lot of defines to play with.", "P_Malin, 2014-09-17No, I only made the textures needed for this scene. Unfortunately this shader is right on the limit of not compiling. If I add a single instruction or even change some of the values it no longer compiles so I'd have to cut it back to add any more effects.", "I do have a shader with the rest of the map data though:", "https://www.shadertoy.com/view/XdBXDR", "fizzer, 2014-09-17Nice . Did you convert any textures that you didn't end up using? If so, it would be cool to see them. Also I have a couple of ideas: 1) Trace a second ray and have light coming from the sky through that window. I know that's nothing like Doom but maybe it could look pretty cool? 2) Put your procedural textures into a modern Doom engine.", "P_Malin, 2014-09-17Thanks fizzer. Yes, that was exactly my workflow. I have my own Shadertoy equivalent with a slider to go from the original texture to the shader version.", "fizzer, 2014-09-17This is a seriously impressive achievement!! What was your 'workflow' for making the textures? Did you set up a small tool for easily flipping between an original texture and your own shader?", "P_Malin, 2014-09-15The lighting wasn't quite right. I changed the way the depth fade works a little. It is a bit brighter now and the outdoor section looks a lot more authentic.", "Dave_Hoskins, 2014-09-14You are a king of shaders!", "LOL at function 'CorpseSprite'!", "Can it all be a little bit brighter? It feels a little dark to me.", "iq, 2014-09-14Ohhh yeahhhhh!", "P_Malin, 2014-09-13iq, I added an automatic camera, and also... barrels", "I hope this still compiles for everyone. Its very close to the limit now.", "P_Malin, 2014-09-13Yes, it is different. I read the sector data and render that directly. The extra edges introduces by rendering convex subsectors actually made my shader more complex.", "Dave_Hoskins, 2014-09-13Concave? OK that's different from the actual Doom map data:- Doom Engine code review", "Which only uses \"convex SubSectors.\"", "P_Malin, 2014-09-13Yeah I actually tried that with the music (and lots of other crazy things) but it ended up not compiling with *fewer* notes. It wasn't exactly what you did but similar. None of your longer midi pieces compile on my laptop or work pc. And yes, I'm planning on revisiting the music at some point too.", "P_Malin, 2014-09-13Sure, I'm working on a flythrough", "As soon as you hold down the mouse *and move the mouse a little* you should be moving relative to the start position.", "Also, correction to my explanation above, sectors can be *concave* and have holes (stupid brain).", "iq, 2014-09-13As for the music, it could add much, much longer scores by splitting the score by notes. Not only is less data and hence longer songs, but also allows polyphony! See https://www.shadertoy.com/view/ldXXDj", "iq, 2014-09-13Truly amazing!! Incredible work!", "", "The only problem is that I don't know how to move the camera or navigate, as soon as I move the mouse I'm in empty space. But I want to explore the scene. Could you add an automatic camera (even if intersects walls, it doesn't matter). I want to see the sector!", "PauloFalcao, 2014-09-13Wow!!! Incredible! Amazing work!!!", "reinder, 2014-09-13Wow, wow!!! This is really great work. I like it very much.", "vgs, 2014-09-12Truly amazing! This is impressive in so many ways!", "CPU, 2014-09-12I finally got this to run with my ATI6850 on Win7/Chrome, very impressive work P_Malin! I think it was a DirectX issue, not specific to my GPU but because I disallow outgoing connections on the firewall. I installed Windows6.1-KB2670838-x64.msu to fix-up DirectX11 for Win7.", "Dave_Hoskins, 2014-09-12Thanks for the explanations, it sounds like you've also partially using Doom's rendering techniques.", "P_Malin, 2014-09-12Thanks, I fixed LIMIT_RESOLUTION.", "The sectors are a list of edges which define an enclosed space. This can be convex and have holes.", "The shader brute-force tests every edge and does a z-buffer like test to keep track of the closest edge that was hit (the fHitT < fClosestT condition).", "The 'interesting' part is how the floor and ceilings work. At the start of each sector in BeginSector() it works out the floor and ceiling intersection depth and stores the resulting depth values in vSectorState.xy. As it tests each edge for the sector, if the edge's depth is greater than the floor or ceiling test it increments the value vSectorState.zw.", "", "vSectorState.zw += step(vSectorState.xy, vec2(fHitT));", "", "By the end of the sector (EndSector), the even-odd state of vSectorState.zw stores whether the floor/ceiling point was contained in the sector polygon or not. If it was we update the hit info, again with a z-buffer like test.", "This is like doing a ray-casting point in polygon test http://en.wikipedia.org/wiki/Point_in_polygon using the floor / ceiling intersect depth as a starting point and seeing how many edges are crossed between that depth and far clip.", "Dave_Hoskins, 2014-09-12If I recall correctly, these sectors are enclosed areas in the original binary tree, with their own texture and lighting references. But I can't figure out how you're tracing through them here.", "BTW, removing LIMIT_RESOLUTION doesn't compile.", "P_Malin, 2014-09-12Thanks Dave. Yeah, it took a lot of tweaking of the sector / sidedef functions to get something working reliably. Splitting the sector code into functions, each accumulating a local result seemed to help. I actually had a version running with the whole level at one stage! Its pretty random when it works though. It might just be luck", "", "I wish I knew exactly what caused things to not compile. I tried all sorts of (really funky!) stuff in the midi code to get a longer tune but to no avail. Is it just the constant count or the code complexity? If I had a good idea of what caused it maybe there could be workarounds somehow...", "Dave_Hoskins, 2014-09-12Now THAT'S a lot of work. Very very brilliant work. How is this actually working in Firefox/Windows!? There's so much data.", "poljere, 2014-09-12Once again, amazing", "AndrewNZ, 2014-09-12!! AMAZING ON SO MANY LEVELS !!  You've taken an icon and truly done it justice.  The outdoor background - wow.  It's even pixelated full screen!", "", "(Sorry for shouting.  I wanted to convey the emotional response you evoked.)", "gee8sh, 2023-04-26Impressive!", "FabriceNeyret2, 2022-08-20527 chars golfed version ( from 1147 )", "#define rot(a) mat2(cos(a),sin(a),-sin(a),cos(a))", "", "void mainImage( out vec4 O, vec2 u )", "{", "float t = iTime*.01+.25, s=.1, f=1. ,a,l;", "vec3  R = iResolution,p,", "D = vec3( ( u - .5*R.xy ) / R.x*.4 , .5 ),", "M = 2.*iMouse.xyz/R,", "o = vec3(1,.5,.5) + vec3(t+t, t, -2);", "O-=O;", "mat2 r1 = rot(.5+M.x),", "r2 = rot(.8+M.y);", "D.xz *= r1; o.xz *= r1;", "D.xy *= r2; o.xy *= r2;", "", "for (int i,r=0; r++<20; f*=.73, s+=.1 ) {", "p = abs( mod( o + s*D ,1.7) -.85 );", "a=t=0.;", "for ( i=0; i++<17; t=l )", "l = length( p= abs(p)/dot(p,p) - .53 ),", "a += abs(l-t);", "", "a *= a*a;", "r>7 ? f *= min(1., .7 + a*a*.001 ) : f;", "O.rgb += f + s*vec3(1,s,s*s*s)*a*.0015*f;", "}", "", "O = .0085*O + .0015*length(O);", "}", "lv2lrn4lf, 2022-05-25Hello, I'm trying to  convert your code to javascript/webgl here my attempt, i don't know what i'm doing wrong? https://jsfiddle.net/lv2lrn4lf/ck9tqapu/3/", "Mijin, 2022-05-15I have been trying to debug the flickering long distance stars. The effect is more obvious on some devices than others, and some mods of star nest suffer worse than the original. It happens when the axes of p all become aligned, so dot(p, p) becomes close to zero, and so 'a' rockets off to huge values. It seems to only happen in the last slice. So far I've tried setting a minimum value for dot(p,p), which removes the tiny stars but also removes all the other white from the image. So still working on it.", "neozhaoliang, 2022-05-10@Kali Hi, this is very great work, we hope to export this shader to mobie devices and make it a screensaver for https://www.oppo.com/en/ smartphones. May I ask what's the license of this work? If you are interested, we can talk about this in email.", "50tu, 2022-02-08How Amazing and concise!", "vivavolt, 2021-12-24hey Kali, fantastic work here!", "", "I'm working on a space shader for a non-commercial OSS game (https://zkga.me/) and used some of your code as a starting point. You're credited in the code already but please let me know if you'd like a more visible credit? Thanks for sharing", "tlecoz, 2021-12-02waow !!!", "guillermolmr, 2021-07-16Can it be used for a game with commercial purposes?", "AhnthinkgooD, 2021-04-29Nice Wokr ! It is Amazing!!", "Mgraterol, 2021-02-27Hi Kali, amazing work! I used it here: https://vimeo.com/user134601848 please let me know if the credits are correct. Thanks!", "Kali, 2020-10-14@hypnothalamus very nice!", "hypnothalamus, 2020-10-10This is great! I just wanted to let you know that I used it here:", "http://codepen.io/hypnotau/live/e6982e3bbb74e745502723670e7c359d", "milesWaugh, 2020-09-14Wow", "Kali, 2020-09-14@andremichelle no prob, thanks for using it, and credits are ok", "andremichelle, 2020-09-14Hi Kali! We used your video for a featured ambient track on audiotool.com. Hope you are okay with that. If not or you want different credits, please contact me. https://www.youtube.com/watch?v=tk6T5vaFFIM", "Lunic, 2020-08-24Is there any way to stop (or reduce) the flickering of the single-pixel stars?", "Kali, 2020-08-04@harism no prob, and good luck with your demo", "harism, 2020-08-03cool i like this effect alot - hope you don't mind me borrow it for my realtime demo i am creating for macos? i need convert it to apple metal language and will credit you properly on github where i release full source code once ready.", "", "here's a brief wip where i am currently;  https://youtu.be/FpKo4Db_d48", "microfx, 2020-02-21wizard. you are my king.", "kingcoopa, 2019-08-20thicc", "sschmidtix, 2019-05-17Simple and elegant. Really nice.", "jeyko, 2019-05-03thats one dense galaxy", "Kali, 2018-08-02@SpicyCrab email sent", "SpicyCrab, 2018-07-25Kali, Stellar work! I would like to hire you/ license your work for a project. I cannot find any way to contact you... Please contact us at fauxoperativegames@gmail.com, we may be able to come to a mutually beneficial arrangement.", "CloudyWater, 2018-02-23Super cool! I modified this to work in Unity's ShaderLab: https://gist.github.com/CloudyWater/9dc32b60f73e4a3c300e067c11caa027", "nekoflux, 2018-02-06Is there a way to adjust the movement direction?", "colonel_hilbert, 2017-10-10Try this modification:", "l.41: vec3 pw = vec3(sin(iTime/6.)*0.08 + 1.);", "...", "l. 51:     p=pow(abs(p), pw)/dot(p,p)-formuparam; // the magic formula", "", "(I think it's neat - stars pop into existence, and then evaporate.)", "kev7774, 2017-01-07Wow, amazing! And with so few lines of code too!", "Artonn, 2016-12-17We would very much like to come in connact with you, please write to rollabolla@outlook.com", "pthextract, 2016-11-23Super. And looks even better in fullscreen.", "dila, 2016-11-09No textures? Just astounding!", "henry, 2016-09-25how come it looks 3d, and when i you try to zoom it forwards on the z axis or with the zoom parameter and time, it sparkles like the 3d structure is buggy?", "henry, 2016-09-25Is it possible to add a 3d perlin function to affect the density and brightness of the star zones, and then fly forwards through a star field where stars are agglomarated into large patterns surrouned by dark void areas that you can see far into? it would by like flying through some galaxies? https://www.youtube.com/watch?v=vwAd-7uQMmk various things in space are small spirals and sinus based orbital fields with 2-3-4 simple symmetries, actually atomic orbital patterns of different numbers of electrons have a lot in common with quasar types of space cloud patterns. the large and the small are similar. could be cool to add that in if someone know how to do it.", "Olivier, 2016-06-19Is there a way to remove big stars but keep smaller ones and nebulas ? ^^", "jt, 2016-01-02Cool!", "Kali, 2015-02-27Haha, yes! because is my same shader, I gave my permission to that guy when I first published it, but then I erased all my shaders here, and now I'm putting them back", "Ayak973, 2015-02-27Nice shader, but look very much like http://casual-effects.blogspot.fr/2013/08/starfield-shader.html", "chrleon, 2014-01-31Wow I love this. Hearted", "inferno, 2014-01-18sorry! \\nits http://logik-matchbook.org/shader/crok_stars_nebulae", "inferno, 2014-01-18wow...", "", "i made a matchbox version out of it. this version will work inside Autodesk's Fame / Smoke compositing software. if you want to see what that means, please take a look: http://logik-matchbook.org/shader/crok_stars", "huwb, 2013-10-23This is an utterly awesome shader. In case its interesting i made a variation where the camera can move forward smoothly without aliasing (you constrain the camera to move forward in increments in your other shaders but this only works if the camera is moving quickly enough).", "", "I wasn't sure if it was worth listing but so I decided to  make it public and link it here: https://www.shadertoy.com/view/4dl3Ws", "WAHa_06x36, 2013-10-16Actually, what would be even greater would be to add relativistic distortions to this. Length contraction, redshift and blueshift...", "WAHa_06x36, 2013-10-16Ok, I am also tempted to steal this as the basis for generating skycubes for a toy game project. Or maybe I should animate it for warp effects too, if I can assume people have enough GPU for that...", "morgan3d, 2013-08-03You rock! Thanks. I posted mine to http://casual-effects.blogspot.com/2013/08/starfield-shader.html since it requires some infrastructure not available in Shadertoy.", "Kali, 2013-08-03Done!", "morgan3d, 2013-08-03This is fantastic!", "", "I tuned it for use as the background in a game jam project. Would you consider marking your shader as under the MIT license in a comment, so that I can release my game?", "", "The default shadertoy license is non-commercial share alike.  I'm happy to release my shader mods but don't want the license to virally infect the whole game codebase.", "4rknova, 2013-06-29This is just mind blowing.. well done.", "chaotic, 2013-06-22truly awesome", "simesgreen, 2013-06-19wow, i have no idea how this looks so good with so little code!", "Dave_Hoskins, 2013-06-17Brilliant! I love the massive red suns that drift by.", "iq, 2013-06-17i agree, yes it does!", "Kali, 2013-06-17Thanks! I just enhanced the contrast, I think it looks better now.", "iq, 2013-06-17pretty cool as usual!", "weyland, 2013-06-17No need to apologize, keep the goodness coming", "aiekick, 2022-05-28the sphNormal fucntion is not present in https://iquilezles.org/articles/spherefunctions", "Proger, 2022-01-27<h1>good job</h1>", "marcthenarc, 2020-05-03VR is fantastic on this one.", "JasonLee, 2020-03-20nice", "ttoinou, 2018-07-20Featured in this video  !", "Plento, 2018-05-16one of my fav", "akhgary, 2018-05-03Scary and beautiful at the same time", "arminkz, 2017-10-15hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "hcf, 2016-07-10float sphDistance( in vec3 ro, in vec3 rd, in vec4 sph )", "{", "vec3 oc = ro - sph.xyz;", "float b = dot( oc, rd );", "return sqrt(dot(oc,oc)-b*b)-sph.w;", "}", "hcf, 2016-07-10FIX:", "float sphDistance( in vec3 ro, in vec3 rd, in vec4 sph )", "{", "vec3 oc = ro - sph.xyz;", "float b = dot( oc, rd );", "return sqrt(dot(oc,oc)-b*b)-sph.w;", "return d;", "}", "hcf, 2016-07-10hi iq, sphDistance could be simpler.", "float sphDistance( in vec3 ro, in vec3 rd, in vec4 sph )", "{", "return sqrt(dot(oc,oc)-b*b)-sph.w;", "}", "This result the same effect.", "aiekick, 2016-04-28arg bad link, Space Curvature Planet + Moon", "aiekick, 2016-04-28@ollj with moon Space Curvature Planet + Moon", "djmips, 2016-04-28oops, I meant line 217 , 5 lines after  // raymarch stuff", "djmips, 2016-04-28@pix & @aiekick you could also make it more dynamic by changing line 163 to", "vec3 pos = ro + t*rd + iGlobalTime * 0.5;", "asneakyfatcat, 2016-04-28amazing", "aiekick, 2016-04-28@pix you can do this at line 109 : vec4 sph1 = vec4( cos(iGlobalTime), 0.0, sin(iGlobalTime), 1.0 ); by example", "Phi, 2016-04-27Einstein himself would this demo! :-)", "pix, 2016-04-27Probably something simple like a function call", "pix, 2016-04-27How hard is it to make the planet move and the space deform accordingly?", "envy, 2016-04-27You are a god...", "TambakoJaguar, 2016-04-26WOW, simply amazing!!", "ollj, 2016-04-17could look much more impressive if you have a moon in orbit and their curvatures add up a little.", "djmips, 2016-01-19I love your simple effective sound effects.", "mrlem, 2015-04-27Wow: this is art", "vgs, 2015-04-04Perfect!", "jimmikaelkael, 2015-03-21Really nice! The sounds are great too, really deep.", "Branch, 2015-03-20i think i live there.", "tomkh, 2015-03-20Great work iq!", "I was keeping track of your progress in \"live\" feature and it encouraged me to participate as well.", "Nrx, 2015-03-20Love it! (And it's really fast indeed!)", "aki, 2015-03-19Its surprising how smooth it renders on my crappy GPU.", "iapafoto, 2015-03-19Rhooooo !!!!", "Dave_Hoskins, 2015-03-19The anti-aliased grid is so cleanly rendered.", "archee, 2015-03-19Gol!     Looks really good. The clouds should either animate or be stationary over the ground.", "Xor, 2015-03-19What is NV15? It sounds interesting.", "nimitz, 2015-03-19Really liking that background, simple and effective.", "EvilRyu, 2015-03-19magnificent!... and it's very fast.", "aiekick, 2015-03-19wow, very nice", "fl0a1e, 2022-03-15godlike!", "ttoinou, 2018-07-20Featured in this video  !", "hornet, 2017-02-07Appears to have been used in this music video https://vimeo.com/116943241", "Artonn, 2016-12-17We would very much like to come in connact with you, please write to rollabolla@outlook.com", "hiramegl, 2016-08-02Great shader! I would like to use it in commercial app. How does it work with the license? Can anybody use your code for commercial use? Good job!", "532789623, 2015-12-30cool sun and cool music", "jackdavenport, 2015-08-06Lobe the particles!", "uNiversal, 2015-05-29This looks fantastic here", "However, those if statements are going to kill performance, I suffer similar issues with another visualiser and no idea how to fix it.", "LordadmiralDrake, 2015-01-29Great shader :O That would fit my space sim project perfectly", "flight404, 2013-04-24I want to make more! Too busy though. I look forward to learning more glsl from all the great examples that have been posted. Wonderful resource.", "iq, 2013-04-23We want more!", "rafacacique, 2013-04-02Wow, this is awesome, congrats!", "P_Malin, 2013-03-16This is great! It looks so bright it burns my eyes!", "jcowles, 2013-03-15this is... awesome", "micronox, 2013-03-14hey there! Love the shader.  I'm working on a project and would love to chat with you some more about your work.  Shoot me an email at Larry@marqueeworld.com!", "PauloFalcao, 2013-03-13Cool sun!", "iq, 2013-03-12Looks very cool! (and welcome man!)", "Dave_Hoskins, 2022-12-31LOL. I've always said it goes wrong eventually, but it is still better than using transcendental functions.", "morimea, 2022-12-31@Dave_Hoskins", "> implementation that  does not produce the same results with this, ANGEL or OpenGL. Using my recent sea shader is an example.", "", "I compare AMD to Nvidia in yours shader Rough Seas https://www.shadertoy.com/view/dtXGW4 - there is difference.", "I think noise on screen look different because fract-hash, but \"shape of sea\"(that spot on middle) - maybe it because sincos:", "", "To test add this: (and remove * fader(299.0, 294.0, iTime) on line 344)", "#define iTime (8998.3+floor((900./37.)*1000.+float(min(iFrame,0)))/1000.)", "On this gif Red is AMD and Green is Nvidia, everything OpenGL:", "", "", "Also you can not drop that fact that shader-constants are pre-compiled on CPU, and it does generate difference also:", "if you remove +float(min(iFrame,0)) from my define iTime above - comparison gif link.", "Because this fract-hash is inconsistent on CPU vs GPU, and as I mention in my comment below - my City shader had broken look in one building because CPU calculate hash for normals and GPU calculate it for lighting because loops GLSL-compiler act like this in my case.", "", "Also, may be not related to fract hash - this how Rough Seas shader look on Nvidia Vulkan (in AMD Vulkan its fine, same as in OpenGL).", "To test just lanch Chrome with --use-angle=vulkan", "Screenshot when set my define above - screenshot Rough Seas shader Nvidia Vulkan", "This \"lines\" visible even at time 0, but after 100 sec they very clearly visible everywhere, and on my 9000+ sec iTime they very large.", "jt, 2022-12-31That's amazing", "Dave_Hoskins, 2022-12-31It was ok with a 256x256  https://youtu.be/-L_C3VMt4wM when I tried it.", "FifthStateOfMatter, 2022-12-31Wouldn\u2019t using a texture make it repeat pretty regularly? I need it for procedural terrain.", "Dave_Hoskins, 2022-12-31That\u2019s why I agreed with using a texture as a solution. Like the Shadertoy Noise textures.", "FabriceNeyret2, 2022-12-30\"I meant visual results\": while I guess that for FifthStateOfMatter's application, any difference could break things.", "Dave_Hoskins, 2022-12-30Wait, I have never said ALL languages. It was always about shaders for me.", "Dave_Hoskins, 2022-12-30Hey Fabrice, no, I meant visual results from graphic shaders that use it in multiple  frequencies. Which is all I want to use it for. Sorry.", "FabriceNeyret2, 2022-12-30@Dave_Hoskins:", "when you say that you get the same result whatever the OS/GPU/browser/language, do you really mean the exact same floats, up to the last decimal ?", "FabriceNeyret2, 2022-12-30I think you may adapt the integer hash algo to signed ints ( with much care to every details ).", "FifthStateOfMatter, 2022-12-30@all the only problem I can imagine is that my JS unsigned ints aren\u2019t actually unsigned ints. I\u2019ll double check everything when I have access to a computer.", "Dave_Hoskins, 2022-12-30Amazingly, I have yet to find an implementation that  does not produce the same results with this, ANGEL or OpenGL. Using my recent sea shader is an example. Don\u2019t forget everyone was using transcendental functions, like sine, as there were no integers.", "ttg, 2022-12-30@FifthStateOfMatter @FabriceNeyret2 Javascript can indeed do exact 32-bit integer operations, and also float32 operations - but these require various tricks - such as \"(a op b) | 0\" (but not for multiply), Math.imul, Math.fround.  There may be some guides on these \"asm.js techniques\" - the principle is that Number in ECMAScript spec has sufficient properties that exact behavior of integer operations is obtainable, and most Javascript engines will recognize such patterns and optimize them down to native integer CPU instructions.", "ttg, 2022-12-30@Dave_Hoskins I don't mean obscure / highly constrained systems, I mean that OpenGL implementations for common GPUs may do algebraic substitutions that cause consistency problems for your hashes.  Since such inconsistency did not present itself in your testing in 2014 - either the way the functions are written makes them unlikely to be reordered by these common optimizers in any context, or you were lucky that the scene you used them in did not present a problematic context.  It may seem pedantic but the point is that apparent consistency through testing and guaranteed consistency by way of OpenGL specification are two very different claims to be making.", "Dave_Hoskins, 2022-12-30@ttg When I said 'all systems' I meant GPU OpenGLs I tested it on in 2014. Not 1950s mainframes, or your toaster!", "Dave_Hoskins, 2022-12-30Yes! You should use a random texture for both. Note, you\u2019ll need to make sure you can do float textures. I have done this in Unity3D before, when building collision mesh patches. The only caveat is that the texture should be less than 512x512, because there\u2019s going to be a lot of texture cache thrashing, and you don\u2019t want it to chug!", "morimea, 2022-12-30@FifthStateOfMatter integer hash work same in GPU and CPU(include JS and anyting), if it is not working same for you - you are making something wrong.", "Second way to have same hash-random on CPU/GPU - generate noise-hash texture and read it on CPU and GPU instead of generating real time random.", "FabriceNeyret2, 2022-12-30true integers in JS ? argh, apparently not. It so, you are screwed ( but this is hard to believe ).", "cf https://www.tutorialsteacher.com/javascript/javascript-number#:~:text=Numbers%20can%20be%20positive%20or,integers%20larger%20than%2015%20digits.", "Now they mention BigInts, used via var int3 = 9999999999999999999n;", "But you have to understand the maxint values and the behavior with bounds ( wrapping or not ? ) do as to be sure to have really equivalent calculation in typed languages.", "FabriceNeyret2, 2022-12-30\"correct ?\":", "absolutely not. This is just a float that happen to be containing a number that is positive and integer in terms of math properties.", "This is not an INT32 or UINT32 formating of the bits, and what happen during computations is totally different.", "There are no true ints in JS ?", "FifthStateOfMatter, 2022-12-30I\u2019m using arrays for vectors in the JS. A float converted to unsigned 32-bit int in JS would be something like floor(abs(n));, correct?", "FabriceNeyret2, 2022-12-30integers hash must give the same result on any language and system but if", "- compatibility/bug issues, like % on negatives and other bounds effects ( negatives shifts, or > 32, etc ).", "- systems with less than 32bits.", "- it is crucial to be sure your consistently deal either with signed or unsigned 32bits ints ( can you be sure in JS ? )", "FifthStateOfMatter, 2022-12-30@FabriceNeyret2 I tried multiple integer hashes and they did not give equal results in GLSL and JS. I have no problem creating functional hashes in both, I just can\u2019t get them to give consistent results in both languages.", "", "I\u2019m not quite sure what you\u2019re referring to in the second part of your comment. I need this for a WebGL project in a separate webpage which contains a fragment shader I wrote here on Shadertoy. The rest of the webpage is off-site. I\u2019m not sure if that clarifies anything or not.", "FabriceNeyret2, 2022-12-30@FifthStateOfMatter: what was your problem with interger hash ( which seems the perfect solution ) ?", "Just the storage in shadertoy buffers ( which have solution addressed below by ttg ) ?", "FifthStateOfMatter, 2022-12-30Ah, ok thanks. I read a few articles on integer hashes and I tried a few different ones but none seemed to work on both. I might just try to find a way to read collision information from the frag shader into the JS instead of calculating everything twice. It would be relatively easy to do so from the vertex shader, but the fragment shader is pretty limited when it comes to sending data so I'm not sure how best to do that... I've only started getting into WebGL fairly recently, so I'll need to do some more research on those areas. Thanks everyone for the help.", "ttg, 2022-12-30Ah, no, your questions are welcome, I meant that I was repeating something I commented about a long time ago (2nd oldest comment dated 2021-06-13) !", "", "I don't know any way around the inherent consistency problems of shader procedures that involve a high degree of sensitivity to float rounding behaviors.  One might experiment with:", "c = intBitsToFloat( floatBitsToInt( a * b ) | runtime_zero ) where", "runtime_zero is a global scope int which is initialized to min(0,iFrame) or similar from mainImage - this should act as a barrier to what the optimizer will see through, at the cost of one logic-op instruction per component per usage of this trick, which are costly but maybe this can save something in performance compared to using fully integer operation hash.  Using a constant 0 is not sufficient to defeat the optimizer.", "FifthStateOfMatter, 2022-12-30@ttg the reason I'm not asking the same question over again. The answers given help but give me more questions. I haven't been able to find much useful info elsewhere online. An integer hash has problems that I can't find a way around, so I'm asking if anyone else knows a way around. Sorry if the notifications are inconvenient. I'll try to figure something else out.", "ttg, 2022-12-30Sorry to repeat myself but I doubt these hashes are really \"same on all systems\".  The hash behavior can also be dependent on the surrounding shader code, which could invalidate consistency assumptions when using the same hash in two different shaders or different parts of a single shader - see https://www.shadertoy.com/view/WlyBR3 .  Such inconsistencies may occur since, while the GPU internally has IEEE754-binary32 compliant arithmetic units, OpenGL provides no control over their use as the compiler is free to do algebraic substitutions.", "", "@FifthStateOfMatter : Either design your project around the hash being defined and used exactly once in one shader in your whole project and accept variations between platforms, and use readback to get values from GPU back into javascript, or use integer-operations hash as suggested many times.", "FifthStateOfMatter, 2022-12-30I still need to be able to replicate it in JavaScript, though. The current problem is not just creating a hash in GLSL and JS, it's making both hashes exactly the same. I'm generating terrain in the frag shader of a WebGL webpage and I'm controlling player movement in the main script. I'm using an SDF for rendering and to determine if the player gets within a certain distance of the ground. The JavaScript noise modifying the SDF for collisions is not lining up correctly with the GLSL noise modifying the SDF for rendering. I looked at potentially checking for collisions in the GLSL and sending that data to the JS but it doesn't seem like the most practical way of doing things.", "jt, 2022-12-30For vec3 input how about using the triple32 function from that integer hash with something like:", "uint uhash(vec3 v)", "{", "return triple32(floatBitsToUint(v.x) + triple32(floatBitsToUint(v.y) + triple32(floatBitsToUint(v.z))));", "}", "", "(although the repeated hash-function application may be somewhat slow).", "FifthStateOfMatter, 2022-12-29@jt that would be great, but I'm using it for procedural terrain generation and so I need a vec3(); input.", "jt, 2022-12-29@FifthStateOfMatter; for example take a look at [url=https://www.shadertoy.com/view/WttXWX]\"Best\" Integer Hash[\\url].", "FifthStateOfMatter, 2022-12-29I\u2019ll look into it, thanks!", "Dave_Hoskins, 2022-12-29Sorry, when I say integer, I meant one that uses bit operations internally on integer numbers. They commonly use XOR, multiplications and bit rotations. My \"Hash without Sine 2\" shader uses bit manipulations, and there's many to find on Shadertoy, and the Internet - it's a big subject!", "Note that most code you'll find keep a state value, which changes on every random function call. You don't have that luxury on GLSL, so you have to use a seed value every time.", "FifthStateOfMatter, 2022-12-29@Dave_Hoskins ok, that\u2019s what I was thinking. By \u201cinteger hash\u201d you mean something like this? I\u2019m fairly new to random number generation.", "Dave_Hoskins, 2022-12-29@FifthStateOfMatter . I think JS uses IEEE-754 doubles to store floats, and all the little differences add up, especially with massive numbers. And I don't know the accuracies of JS sinewaves or even how it implements them with massive values. For proper consistency you'll probably need an integer hash that uses actual bits to guarantee the same results everywhere.", "FifthStateOfMatter, 2022-12-29I\u2019ve been attempting to re-calculate sine-based noise in a landscape in the JavaScript in WebGL to check for collisions on a game but it isn\u2019t lining up. Is it possible that GLSL and JS process sine differently?", "morimea, 2022-11-15Nvidia shader pre-compiler can ruing fract-hash, I did not expect that...", "Static const floats calculated by Nvidia compiler can be not correct compare to GPU floats - https://www.shadertoy.com/view/mdfSz8", "Dave_Hoskins, 2022-10-20This was made because I noticed a the sin() hash function was inconsistent between different GPUs on a landscape I was making - I spent ages tweaking a mountain range, only to find it was different on a Mac and different again on a mobile. Nightmare! Something was needed to fix this.", "I realised shaders are designed for shading, not putting a rocket on the moon, so I'm not surprised something like sin(50000.0) be a little inconsistent between manufacturers, they all want to be the fastest so different approaches were used it seems.", "If you're using P5 or any other WebGL1 locked library, then this is for you. Otherwise just use an ancient integer hash! \ud83d\ude01", "morimea, 2022-10-20@FabriceNeyret2 old hash good Only on Nvidia OpenGL, even on same Nvidia with Vulkan youl see \"broken sin hash\"", "you can test it by launching Chrome with --use-angle=vulkan parameter", "/usr/bin/google-chrome-stable --use-angle=vulkan", "and open this shader https://www.shadertoy.com/view/stK3WG - youl see right side of image broken there", "FabriceNeyret2, 2022-10-20( but the trap with old hash is that it is good on a large range on my OpenGL Nvidia computers, but not on some other devices ).", "FabriceNeyret2, 2022-10-20It would be important to give the conditions on parameters to get good results.", "Apparently we shouldn't have parameter sampling < 1 ?", "( but not > 10^5 ? )", "Old hash give correct results from 0.1 to 10\u2074 sampling, yours seems ok between 10\u00b2 and 10\u2074", "", "For instance just drawing hash12(uv) :", "", "", "hash12(10.*uv) :", "morimea, 2022-07-14@MisterSirCode I think you scale too little or scale too much input coordinate p (by your image look like it low scale)", "in this code you can achieve similar to your image by adding", "p*=0.08; //to line 37 Common", "", "fix is - multiply your p in your code by some large value like p*=1000.;", "ollj, 2022-06-10MisterSirCode, these moire/galoisFields are usually an effect of scaling/zooming the noise.", "They emerge from bad modulo arithmetic on type-float, or on modulo arithmetic with too strong patterns in it.", "", "You can try to noise-filter such bad hashes, to get some mediocre blue-noise (with much less any longer frequencies = less large-scale-patterns) in it.", "", "You can just have a pattern-free-basis function, like I keep poorly/lazily trying with [costas] arrays/noise, and prime-factorize the shirt prime-length-pattern-free-sequences into longer permuted/composite-hashes. (doing it intenrionalyl lazily, to see if even a lazy implementation is \"good enough\")", "", "You can just skip to permuting 2 (or more) simple linear-feedback-shift-registers, to make them a LOT more unpredictable=noisy.  [PCG = permuted (=less linear) congruential generator]", "", "You can factorize (unique) quadratic fields (using outerproduct() ), that share no prime factors [pqfm= prime quadratic field matrix] for some efficient look-ahead functionality with 1 input returning up to 16 outputs (mat4) on a long pseudorandom interval, because a lot of quadratic fields (especially golden ratios) efficiently evade self occlusion (and occlusion of other quadratic fields), and that alone makes them prsudorandom/unpredictable, unless you know the involved primes, than \"look-ahead\" is a piece of cake (fsaster lookAhjead than for PCG].", "", "usually one of the above is good enough.", "Dave_Hoskins, 2022-06-09I don't know what you're using it for. Have you tried an integer hash? Like this one:", "https://www.shadertoy.com/view/XdGfRR", "MisterSirCode, 2022-06-09I tried that and it didnt work either.", "Dave_Hoskins, 2022-06-08This was supposed  to work with integer spaced values and up., like in noise functions. If that one doesn\u2019t work then I\u2019ll fix it later, but KyBlz has the right idea.", "KylBlz, 2022-06-08Hash functions can be limited by the characteristics of the input. Try doing hash14(input * 100.0) or something that upsets the correlation between neighboring pixels calling the hash function.", "MisterSirCode, 2022-06-07Yeah it definitely has some problems on my end.", "MisterSirCode, 2022-06-07thankyou", "Dave_Hoskins, 2022-06-07@MisterSirCode,  I just put in a hash14 for you, but it's not fully tested. Although it appears to be OK.", "MisterSirCode, 2022-06-07Can we get ones that take in a vec4? Ive been trying to find a float noise before that takes in just a vec4 (4 in, 1 out)", "FabriceNeyret2, 2022-06-05@jarble: then it's not a hash function, it's a random generator ;-)", "Not the same use.", "jarble, 2022-06-04A hash function that works with no inputs:", "float p1 = 0.;", "float hash10()", "{", "float p = p1;", "p = fract(p * .1031);", "p *= p + 33.33;", "p *= p + p;", "p1 += 1.0;", "return fract(p);", "}", "elenzil, 2022-02-19late to the party here, but this is a great page, thank you!", "FabriceNeyret2, 2021-08-19the articles about that are very old. The base is \"max decorrelation of bits\". The fine tuning is by experiments ( several constants have been benched ).", "But these approaches give not so good quality, starting with portability issues. Now that glsl have ints, better to use int-based hash.", "asforever123, 2021-08-19Why the constant is 43758.5453", "FabriceNeyret2, 2021-06-16not-so-recent public presentations by some nVidia guys ! :-)", "( + questions/answers for clarification, maybe. don't remember, was a few years ago ).", "ttg, 2021-06-16How recent Nvidia?  Who did you hack into / ask to violate NDA to find out? ;-)", "FabriceNeyret2, 2021-06-14anyway, why do you dream of  float-based hash ? what for ?", "int used to be less performant, but frac(sin(matrixmu)) may get costlier !", "Beside, on recent nVIDIA float and int are separate units, so a few interleaved int op is not a problem.", "Or is there something else ?", "ttg, 2021-06-13\"emulating an integer hash on floats\"", "I never figured out how that could be done without either performing worse than ints or having same kinds of optimizer arithmetic inconsistencies.", "FabriceNeyret2, 2021-06-13@ttg: yep: for that you would have to be sure that the compilers do exactly the same operations whatever the platform, and that the optimizer never swap formulas, which is both wrong in GLSL. Beside, the very nature of hash makes it sensitive to small differences.", "But a solution could be to emulating an integer hash   on floats ;-)", "ttg, 2021-06-13I'd like to believe there could be a float-based hash that is consistent across full-precision GPUs (for performance reasons vs. integer), unfortunately thanks to https://www.shadertoy.com/view/WlyBR3 effects I don't trust it.", "ttg, 2021-06-13@Zi7ar21 just cast the signedness of the inputs and outputs, it costs nothing (In fact, there is no such thing as signed and unsigned version of integer addition, subtraction, and multiplication, they are one and the same thanks to properties of modular arithmetic).", "FabriceNeyret2, 2021-04-17just search hash or integer hash. iq published several references.", "Zi7ar21, 2021-04-17Is there any good integer hashes you know of that take regular ints or at least how to convert a unsigned int hash into an int one? I am gonna be dealing with 3D coordinates, negative values included", "FabriceNeyret2, 2021-04-17beside, it was an early hack before availability of integer operations that are now there, allowing more standard hash generators.", "ollj, 2021-04-17this hash without trigonometry was never commonly extended to return a vec4, as it optimizes for speed over quality, and by the time you do anything with a vec4, you commit to a vec4, you also commit to do significantly more quality than speed.", "", "because, by the time you do vec4, other methods are better, and you either go simplex() or cellular() or pqfm() (wich can use sin() or mod()).", "", "https://www.shadertoy.com/view/WdGfRw", "https://www.shadertoy.com/view/XlVyDK", "have my hash collection (likely old and very identical)", "and you are going to love my left-endian-semicolon style in almost all my shaders.", "Zi7ar21, 2021-04-17Wait where is hash14, hash24, and hash34", "I am making worley noise and a 4th component would be useful for removing artifacts when using multiple octaves", "ollj, 2021-02-04this is on the other end of the spectrum of a PCG=permutedCongruentialGenerator or even a [recursed-2d-costasArray noise]", ", which easily outperform this one in terms of quality, and can be scaled down (to 16 bit or 8 bit) to gain similar performance.", "Dave_Hoskins, 2021-02-03I remember integer bit twiddling pseudo-random number generators back in the early 1980s, and I guess they went way further back than 40 years.", "xjorma, 2021-02-03@FabriceNeyret2 it's why I would love to have a library like this one, not a \"float hash(int) with only one set of value.", "I often finishing doing h1 = hash(v); h2 = hash(v+ 1234); h2 = hash(v+ 421); h2 = hash(v+ 31415) or something like that if I need 4 floats", "I don't aim to be a hashing expert, just know the good one to use .", "FabriceNeyret2, 2021-02-03Why risking biased results instead of relying on the constants carefully chosen and tested by professional specialists ? ( this was also true for the fractsin float noise, BTW ).", "You can find papers where, years after, a mathematician painfully improved the previous best constant (measured through various quality tests).", "xjorma, 2021-02-03@FabriceNeyret2 taking a second look at the IQ code i believe it's easy to make all variation. Still don't know exactly how to choose the perfect numbers. I noticed most of them was \"prime\" but but all of them. I replace the none \"prime\" with \"prime\" and the result looked great too (didn't do an extensive testing) maybe one day I will take a bit of time to write all variations.", "xjorma, 2021-02-02@FabriceNeyret2 thank for your tips, I always learn something when reading your comments.", "But the things I really like on this page is not much the \"quality\" of the hash, but the fact the \"common\" tab have a great collection of variation hash11 12 13 14 21 22 22 24 ...", "But you have the opportunity to be my new favourite page (For that it worth  ) if you do the same for the integer hash. Sometime I try doing it myself, by changing some value to have for example 6 value from a float, I am typing some random number and it seems to work, but i don't really know that I am doing and I hate, I don't know the science of those magic number (I believe they are big primes)", "FabriceNeyret2, 2021-02-02well, now we are in 2021, integers in webGL are now a thing, and many \"professional\" integer hash have since be introduced in Shadertoy ;-)", "https://www.shadertoy.com/results?query=integer+hash", "Typically, iq Interger Hash || is pretty standard.", "", "Whatever the float hash, beside its intrinsic properties, you are never sure they give the same result on different computers.", "Zi7ar21, 2021-02-02I just made a new shader, and I used a bunch of these.", "https://www.shadertoy.com/view/ttcfRH", "Zi7ar21, 2021-02-01@xjorma So accurate, I come here daily", "It's because it's super easy and there is virtually a noise function for every input/output type", "There is better Entropy noises out there from Michael which I use for montecarlo but this certainly would suffice as a easier and probably still sufficient method", "xjorma, 2021-01-30It's my favorite ShaderToy, I go here almost every two weeks.", "Dave_Hoskins, 2021-01-20@oneshade Thanks, although that depends on the entered coordinates, you're right, it needed mixing up a bit more. I think I've fixed it now.", "oneshade, 2021-01-19Btw, hash13() appears to have diagonal symmetry on the xy plane.", "oneshade, 2020-12-12The hash on the right looks like a bunch of bands for me. Must be because of sin", "jcyuan, 2020-11-13super! thanks a lot!!", "FabriceNeyret2, 2020-10-20New: evaluated in this new paper http://www.jcgt.org/published/0009/03/02/.", "See also https://www.shadertoy.com/view/XlGcRh", "FabriceNeyret2, 2020-10-11@CyberDain: man, it was in 2014, in the prehistory of webGL !", "now we have integer operations, so we can do proper xorshift, etc.", "", "Beside, I could tell that with your fix, result is totally biased for microscopic values.", "jorge2017a1, 2020-10-10and by the way I didn't know anything ... about shader or shadertoy .... I was lost on the web .... browsing ... listening to music ..... and watching youtube !!!!", "...........", "y por cierto yo no sab\u00eda nada ... sobre shader o shadertoy .... Estaba perdido en la web .... navegando ... escuchando m\u00fasica ..... y viendo youtube !!!!", "jorge2017a1, 2020-10-10if not wrong, I remember, this was the first shader I looked at in shadertoy ... it was in the year ...., 2017-05-26 .....", "................", "si no mal, recuerdo, este fue el primer shader que mire en shadertoy... fue en el a\u00f1o ...., 2017-05-26", "Dave_Hoskins, 2020-10-10The reason the multiply iTime by 1500 is there, is to get the values in the correct range of approximate integer stepped values per frame to prevent across frame similarities.", "Dave_Hoskins, 2020-10-10@CyberDain, dude, I don't know why this is so popular, if you don't want to use it then don't. I've personally found it useful for noise functions on Mac and Windows.", "CyberDain, 2020-10-10replace", "iTime * 1500.  with", "iTime", "then glithes on the left screen will appear, but right screen is fine", "CyberDain, 2020-10-10the problem of your hash, it will not work with input value >= 1000000000 (1bil), because * .1031 - fract part of the result is completelly discarded.", "chubujin, 2020-09-28oh\uff0ci see\uff0c thank u", "FabriceNeyret2, 2020-09-28I'm not telling to replace all use of iTime.  Just iTime used as parameter of hash. (which would be a strange idea for clouds, BTW).", "chubujin, 2020-09-28yes, i have tried,  please refer this:   https://www.shadertoy.com/view/XslGRr", "i use mod(iTime,2.0) to replace iTime, and the cloud will repeat regulary and give a sudden jitter", "FabriceNeyret2, 2020-09-28a code still directly running after 6 year: how web coding is superior to desktop code ! :-p", "Dave_Hoskins, 2020-09-28To get anything useful out of this you need to need the right numbers, which are at least WHOLE NUMBERs apart!", "Like the input to a noise function. The values in can't be too small. This shader was a demonstration of getting the same results from my Mac AMD PC and a Windows Nvidia PC on WebGL1, because graphics card trig functions vary enormously in quality - also note the date of the shader.", "FabriceNeyret2, 2020-09-28have you tried ?", "- The results will repeat: no, and I explained why", "- will have a jump: seriously. what means a jump in a uniform random sequence ?", "chubujin, 2020-09-28but when i use fract(iTime), or mod(iTime,100.), The results will repeat, but the screen will have a jump from end of mod() to start of mod()", "FabriceNeyret2, 2020-09-27use something like fract(iTime), or mod(iTime,100.) it its the order of magnitude of coordinates. It will never exaclty have the same value, anyway.", "Anyway if you want high quality hash, bettter using the nowaday available interger-based hash.", "chubujin, 2020-09-27thanks,", "how should i set it up so that it works good all the time?", "FabriceNeyret2, 2020-09-27because of numerical precision:", "IEEE floats only have about 5 or 6 digit precisions.", "adding10000 thus kills the digit below 0 or 0.1 .", "chubujin, 2020-09-27Hi, I have a question, after running for a long time, why does the noise become uneven ?", "i tested it by setting (iTime) to (iTime+10000.0),", "chubujin, 2020-09-27Hi, I have a question, after running for a long time, why does the noise become uneven ?", "i tested it by setting (iTime) to (iTime+10000.0),", "chenrui960, 2019-12-10cool\uff0cso useful\uff01", "JoostDev, 2019-11-20Super awesome, thank you so much!", "Dave_Hoskins, 2019-11-20Here you go  - it is now an MIT licence.", "JoostDev, 2019-11-20I'd love to use these hash functions, but unless I'm interpreting the license incorrectly, I'd need to make my entire game ShareAlike in order to do so, which is not an option for a commercial production. Is it possible to share these under a more permissible license?", "Dave_Hoskins, 2019-03-23OK due to the popularity of this code I've decided to remove the defines and use immediate values. To get hash values smaller then integer step sizes, you'll have to multiply them up (see Sound tab). I don't see this as a problem. \ud83d\ude0e", "I sure they can be shrunk even more somehow, but then again just use integer hashes!", "Dave_Hoskins, 2019-02-16Thanks.", "RV, 2019-02-16line 29 :", "//#define HASHSCALE4 vec3(443.897, 441.423, 437.195, 444.129)", "->", "//#define HASHSCALE4 vec4(443.897, 441.423, 437.195, 444.129)", "Dave_Hoskins, 2018-10-30Aagh the double post thing is back!!", "Dave_Hoskins, 2018-10-30All I cared about 4 years ago was, 'why don't my mountains look the same on my crappy Mac as they do on my Windows machine?' Then I realised that the trig functions are designed for display purposes, not for real mathematics. And there was no proper integer stuff in WebGL back then. I didn't really care for any Hyperplanar Folds in high-dimensional Hilbert-space! Sorry.  - thanks anyway.", "Dave_Hoskins, 2018-10-30All I cared about 4 years ago was, 'why don't my mountains look the same on my crappy Mac as they do on my Windows machine?' Then I realised that the trig functions are designed for display purposes, not for real mathematics. And there was no proper integer stuff in WebGL back then. I didn't really care for any Hyperplanar Folds in high-dimensional Hilbert-space! Sorry.  - thanks anyway.", "ollj, 2018-10-30all (close to)  equidistributing hashes will have linear-line hyperplane-patterns.", "its hard to do a hash without a (permutation that resembles a) dotprodict, and its inherend point2Line projection, and that generates \"hyperplanes\"", "", "equidistributing hashes end up projecting down a higher dimensional hilbert-space, and its folds are hyperplanar.", "", "i think a simpler approach to hashing involves quadratic fields (of [integers that share no priome factors]), and a mat4 of those can define a hash1To16(), sine is used for differentials, could use (capped) trianggle-wage, too.", "FabriceNeyret2, 2018-10-30it plays with lowest bits so it depends on the hardware math precision, especially if input param get big.", "scratch13764, 2018-10-30The sin function one has really obvious patterns in it for me. Huh.", "FabriceNeyret2, 2018-10-29@ollj:", "NB: here you are commenting the old fashion hash given for ref, not the integer hashes proposed here.", "- The dot(p,vec3(3 magicValues)) is just the classical (poor) decorrelator of x,y,z.", "- I did a long bib search about the 43758.54 . It come from very old times, without math justification but deep experimental tests of best scrambling of bits. For some strange reason 4e5 is real not so good for instance, despite not a \"round\" power of 2 (and thus should scramble as well).", "ollj, 2018-10-29replace all instances of", "iTime", "with", "fract(iTime*n)", "where N is a period length", "or you will have invremental precision loss over iTime, due to increasing differentials in substraction/division inputs.", "ollj, 2018-10-29a dot() sure folds a hash into something more fractally self-similar.", "there are extensions of this hash, that add more dot()s (permuting iterations) to it, to make the hash/noise more fractal.", "", "a hash11 has issues of failing to be self-similar/fractal, without any folds/iterations, and dot() works here.", "ollj, 2018-10-29what is the emytological origin to scaling something by", "43758.54", "and then fract(sin()) ing that.", "i know why that is used and works well mostly.", "i just want to know why", "43758.54", "is used as a seed, as it seems not as arbitiary as it is.", "Dave_Hoskins, 2018-08-31@rodolphito, you're probably correct. The whole thing was built on a single idea of including the dot product to introduce more randomness, the HASHSCALE1 value should probably be HASHSCALE3. But it was changed for efficiency reasons.", "rodolphito, 2018-08-31Why is hash11 the way it is? The code seems to be nonsensical, it carries around the same data in 3 channels for no reason apparently. Wouldn't it be the same as just doing", "p = fract(p * HASHSCALE1);", "p *= p + 20.19;", "p *= p * 2.0;", "return fract(p);", "FabriceNeyret2, 2018-08-02yep. a reminder that the technique is really about amplifying the less significative bits. while", "- Angle + browser rearange some of the code", "- Windows transpile the glsl code to html", "- different drivers have different compilers", "- and target GPU are not identical with generations", "- besides, some cards have 24bits flloats, or at least not always full precision all along the process.", "so...", "Dave_Hoskins, 2018-08-02Large sine accuracy varies dramatically between systems it seems.", "CLPB, 2018-08-02Does sine precision vary between implementations? On my GTX 1050 after t=30 or so there are some very visible artifacts from loss of precision and by 60 I'm seeing obvious diagonal horizontal bands.", "Ecter, 2018-04-19@FrabriceNeyret2 Thanks for the link!", "FabriceNeyret2, 2018-04-19iq has published several integer hash, including some standard ones (e.g. GLIBC)", "https://www.shadertoy.com/view/XlXcW4", "Ecter, 2018-04-19Ok I fixed the issue, it was on my side.  in simplex I forgot to add offsets for corners instead of use them as the corners themselves, so I was using simpex corners like corner0, (0,1,0,) (1,1,0) and corner0 + 1.0 instead of corner0, corner0 + (0,1,0,) corner0 + (1,1,0) and corner0 + 1.0, and I also need to make sure I rescaled your values to -1.0 and 1.0 via (x * 2.0) - 1.0.  I get a 30% to 50% performance boost via using your method than my uint based solution.", "Dave_Hoskins, 2018-04-19If it doesn't work then don't use it, there are plenty of other hashes about the place. Perhaps it's because each vector component affects the other. So a change in Y will effect both X & Z. Or perhaps you should try multiplying them up a little. I really can't help you apart from that, sorry.", "Ecter, 2018-04-19oops I forgot floor(-1.1) would be -2.0 not -1.0.   Regardless, using hash 33 gives too many artifiacts to be useful in 3D perlin or simplex noise, I'm using whole numbers btw.  if you want pictures I can show.", "Dave_Hoskins, 2018-04-19floor() returns the lowers integer. So yeah, 0 to 1 returns.", "This hash function is specific for whole number calls like in a standard noise functions. If you want to call it with smaller numbers read the comments in the shader.", "Ecter, 2018-04-19demofox I'm not sure that is true https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/fract.xhtml does not define fract to be between 0 and 1, but instead x - floor(x). Negative values are certainly possible here.  I'm also getting some pretty bad artifacting when replacing my hash function with this.  I don't think you can use this for coherent noise", "demofox, 2018-04-19They are 0 to 1. You can tell because the last line is fract, which returns the fractional part of the argument (aka 0 to 1!) (:", "Ecter, 2018-04-19what is the range on these functions, is it 0-1 or -1 to 1?", "Dave_Hoskins, 2017-10-21...don't want xyz to be equal, for the sake of randomness (sorry, clicked post accidentally during editing  )", "Dave_Hoskins, 2017-10-21On the other hand, it might be better to use a vec3 scaler because I don't want x, y, z don't want to be equal, f", "Dave_Hoskins, 2017-10-21I've used HASHSCLE1 as much as possible for a reason. - speed. In simple tests of many thousands of calls multiplying by a single float turned out to be faster than using a vec3.", "FabriceNeyret2, 2017-10-20... of #define hash11 and hash12 as hash13(vec3(p))   or p.xyx.", "", "Too sad we can't use vec3(p,p,p) in a #define hash13  (which would work for p = float, vec2, vec3): vec3(4 args) is not accepted while vec3( vec4 ) is, and vec3(mat2 as well)", "abje, 2017-10-20p3 in hash11 doesen't need to be vec3 because x, y and z is equal", "", "float hash11(float p)", "{", "float p3  = fract(p * HASHSCALE1);", "p3 += 3.0*p3*(p3+19.19);", "return fract(2.0*p3*p3);", "}", "", "This gives the same results, but i see that all the hash functions have the same pattern.", "Dave_Hoskins, 2017-10-18@abje  Thanks for spotting that!", "abje, 2017-10-18really useful hash function, but i noticed HASHSCALE4.x is 1031.0, i think it should be 0.1031", "MichaelPohoreski, 2017-07-22Oh wow, never realized just how bad the \"hashOld12\" hash and my Random are!", "", "float hashPoho1( vec2 p )", "{", "vec2 r = vec2(", "23.14069263277926, // e^pi (Gelfond's constant)", "2.665144142690225 // 2^sqrt(2) (Gelfond\u00e2\u20ac\u201cSchneider constant)", ");", "return fract( cos( mod( 12345678., 256. * dot(p,r) ) ) );", "}", "", "// This eventually becomes unstable @ 15 sec, but is WAY better then hashOld12 which starts to break down at 6 seconds!", "float hashPoho2( vec2 p )", "{", "vec2 r = vec2(", "23.14069263277926, // e^pi (Gelfond's constant)", "2.665144142690225 // 2^sqrt(2) (Gelfond\u00e2\u20ac\u201cSchneider constant)", ");", "return fract( cos( dot(p,r) ) * 12345.6789 );", "}", "etale_cohomology, 2017-07-14@jorge fract() es una function que toma un float (ej. 9.123) y se queda solo con la parte fraccional (ej. 0.123)", "jorge2017a1, 2017-05-26Que hace la funcion  fract", "vec3 p3  = fract(vec3(p) * HASHSCALE1);", "Dave_Hoskins, 2017-03-14Thanks.", "I like to think of the  wrapping of numbers around 1 as like taking photos of a fast spinning car wheel - you can figure out the angle the wheel will be at because of its speed, but all the photos appear to just be random orientations.", "alleycatsphinx, 2017-03-14You're consistently one of the best, Dave. I studied this stuff for a while (in particular, why are constants like 1234.5678 so common (oh, there are reasons!) and how to characterize these sorts of functions in terms of their power spectrum, domain, period, input resolution, and so forth. Love it!", "", "Sorting out the \"magic numbers\" is an ongoing goal. Also, I too recognized this fract vs sin thing a while back when making landscapes (no, iq, not trying to \"get clever\" by using triangle waves instead of sin... ; )", "", "What do you think of this substitute (div input by PI for sin)", "", "float wave(float x)", "{", "bool p \t= fract(x*.5)<.5;", "x\t\t= fract(x)*2.;", "x \t\t*= 2.-x;", "x \t\t*= 1.-abs(1.-x)*.25;", "return  p ? x : -x;", "}", "", "mat2 rmat(float t)", "{", "float c = wave(t);", "float s = wave(t-.5);", "return mat2(c, s, -s, c);", "}", "", "Not faster, but that's not the goal...", "TechEpic, 2017-01-30Favorited this for future reference, thank you so much.", "Dave_Hoskins, 2017-01-06Hmm OK. As I said in its current state the hash functions work best for integer scaled values (1.0, 2.0, 8.0,28.0 etc) So fract(p) would not really work too well here. It's all a matter of fiddling with new tricks and hours of testing TBH.", "demofox, 2017-01-06I wonder how hard it would be for GPUs to give us an instruction for deterministic seeded random numbers? It would be nice also to have the option of both white noise and blue noise :P", "kev7774, 2017-01-06@Dave", "The \"*p\" was a typo. It was just supposed to be fract(p). Starting with a fract() might seem like a bad idea at first, but ends up being fine in practice (it does help if you multiply p with a multiplier before taking the fract; 0.0618034 seems like a good value for this). But I haven't tested it on AMD or Apple, since I don't have any devices with those architectures.", "", "About the HASHSCALE value, I was just playing around with different values and found that a value of about 60-80 times higher seems to give better results for this demo (on my computer at least). However, now that you mention it, I guess the results would degrade faster as the inputs got larger (I didn't watch the results all that long, so I didn't notice).", "Dave_Hoskins, 2017-01-06@kev7774   I presume the 'p*)' is a fraction to enable floored values of p, like in Perlin or value noise? Starting with a fract() doesn't do this.", "Also have you tested this on AMD and iPads? Does it return the same values?", "The whole point of different HASHSCALE values is to set a range, as mentioned in the comments. Although the ranges seem to be wider than with sin().", "kev7774, 2017-01-06Another thing I found is that the the cheapstep function invented by stubbe (https://www.shadertoy.com/view/4ldSD2) works as a good drop-in replacement for sin (if you use the tweak I mentioned in my previous post) ,and is probably faster too.", "float cheapstep(float x)", "{", "x = 1.0 - x*x;\t// MAD", "x = 1.0 - x*x;\t// MAD", "return x;", "}", "float hash12(vec2 p)", "{", "p  = fract(p*)", "return fract(cheapstep(p.x + p.y * 0.618034) * 43758.5453);", "}", "", "The above works very well for me on my Intel iGPU. The only issue is that the output is noticeably periodic for this test case, because when any two input values of p have the same fractional part, the outputs will be the same, and the inputs happen to repeat every 125 pixels in this case (in short because your input is position(an integer) multiplied by v, which is t+1 (an integer) * .152, and the first integer multiple of .152 is .152 * 125 = 19). If you change the constant 152 on line 199 to .1727661, the periodic behavior disappears.", "", "An alternative fix is do  \"p = fract(p*.1)\" instead of just fract(p) inside of the hash12 function. This makes the period 10x longer, and thus impossible to notice in this case.", "kev7774, 2017-01-06I think the reason the sine based one fails so badly on Intel is because sin has very poor precision on large arguments. Adding \"p = fract(p)\" at the beginning of hashOld12 solves the problem for me on my Intel GPU. Actually, it looks better (more random) than your hash12. But your hash12 can be improved by multiplying HASHSCALE by some number like 60 or 80. Then yours has a slight edge again.", "Dave_Hoskins, 2016-12-29Thanks for doing the tests Fabrice, this was all about getting the same results for Mac and PCs and/or AMD and Nvidia. Not using sines enabled that.", "FabriceNeyret2, 2016-12-28Note that it's not a totally fair comparison: precision issues are not due to sin alone, but to the multiplication by huge numbers ( ~ 4E5 ).", "Conversely, sineless noise is ultra correlated for near values ( dx < .2), and should thus be used with un-normalized Ucoords. Independant hash stream must not be done by rnd(U+0.1), but larger offsets.", "I did various quality test here https://www.shadertoy.com/view/4tVXR1", "Dave_Hoskins, 2016-11-20@KylBlz, sure yeah thanks. It looks a little neater that way.", "KylBlz, 2016-11-20might i suggest moar swizzle (not faster, just less typing); for example, here's hash44 before:", "return fract(vec4((p4.x + p4.y)*p4.z, (p4.x + p4.z)*p4.y, (p4.y + p4.z)*p4.w, (p4.z + p4.w)*p4.x));", "and after:", "return fract((p4.xxyz + p4.yzzw) * p4.zywx);", "Dave_Hoskins, 2016-09-08I mean the main reason why this exists is...", "Dave_Hoskins, 2016-09-08Oh that's good, it does loose randomness though, especially for audio stuff. The main reason for this is that it gives the same result on PCs and Macs/iOS etc. which is useful. The sine stuff varies a lot between GPUs.", "demofox, 2016-09-08It seems to hold up well even after 75 minutes:", "http://imgur.com/a/yU15n", "demofox, 2016-09-08How long does it take before the noise goes bad Dave? PS are you on twitter? (@Atrix256 here fwiw)", "Dave_Hoskins, 2016-07-21That shader link doesn't work. What sort of scales are you using? See commented section at lines 19+", "hcf, 2016-07-21Hi,I am using these functions, and it doesn't look that normal.Can you help me?", "I tried it there https://www.shadertoy.com/view/4ld3D8", "Dave_Hoskins, 2016-02-18OK it's put back to the original, for some of the functions.", "Dave_Hoskins, 2016-02-18Oh no! Thanks for the heads up. I guess HASHSCALE has to be a vector for those others. What a shame.", "paniq, 2016-02-18e.g. hash31() (and others) doesn't make a lot of sense... it returns the same value in all three channels", "Dave_Hoskins, 2016-01-20 I'm glad it's useful. I'll post any other changes on here, but I doubt there will be anything else I can alter without it losing something.", "vladstorm, 2016-01-20im using these functions so much. thank you for your work.", "Dave_Hoskins, 2016-01-20Oh you're right, a last minute name change that didn't catch everything. Sorry about that.", "vladstorm, 2016-01-20is it normal that first time its called HASHSCALE and second RANDSCALE?", "before it was the same name", "Dave_Hoskins, 2016-01-18OK I'm back again.  I've changed the vec3 scale to a single value, which with 2000 iterations managed to get ~12% faster, which is interesting and a little puzzling.", "Dave_Hoskins, 2016-01-02As there is no moveable program counter in shader code, both sides of the if/else are evaluated, and one is ignored, although I don't know the real cycles used, sorry.", "Besides it looks neater, and keeps reminding me that it's not CPU code.", "Mixing with smoothstep is also really useful.", "davidjonsson, 2015-12-31Is it really more efficient to calculate both a and b and mixing them with a step function instead of making a branch like", "if (uv.x < .5) {", "a += hash12(pos);", "} else {", "b += hashOld12(pos);", "}", "jt, 2015-12-28Wow, the hash-function on the left looks MUCH better/more random (at least on my system)! Very usefull!", "Dave_Hoskins, 2015-05-19For calling with integer ranges please use the alternate MOD values (see line 23)", "FatumR, 2015-05-19I've tried hash13 in my shader and it doesn't work well. Some steps are visible on the cave walls.", "I tried it there: https://www.shadertoy.com/view/MtsGDf", "Dave_Hoskins, 2015-02-07No probs. I clearly wanted to say 'Sure, OK!' instead of 'Sue'", "nimitz, 2015-02-07That was quick, thanks!", "Dave_Hoskins, 2015-02-05Sue, OK! Please note my Integer Hash shader will be more useful if you're doing noise functions that use ranges more suited to whole numbers.", "nimitz, 2015-02-05Any plans on making this non-restrictive license?", "Dave_Hoskins, 2014-09-03Thanks, I think I tried one of those, there's a bit more code and they didn't quite work evenly. I may have used it wrongly though, feel free to compare.", "CeeJayDK, 2014-09-03Brian Sharpe has also written several sine-less shader PRNGs.", "His blog with articles on them: http://briansharpe.wordpress.com/", "His github with the code: https://github.com/BrianSharpe", "Dave_Hoskins, 2014-09-03The following link has some people discussing the Tegra 4 as using 20 bit floats, so that might explain some things:", "http://www.linkedin.com/groups/Anandtech-exposes-more-details-on-139581.S.204999622", "Trisomie21, 2014-09-02note: I opened this page on a tegra4 device.  Left side is black, right side is kind of noisy be degrade within the first frame.", "Maybe this this tweak to remove the streaks with Iter of 1:", "return fract(sin(dot(mod(p, 3.1416),vec2(1e1,1e3)))*1e4);", "", "Since this extract the lowest bit its very sensitive to architecture differences, so doesn't address what you originally wanted to solve. (Just the bits about being quickly unstable)", "Dave_Hoskins, 2014-09-02Re-worked this a little bit. I've removed the first addition, and moved the values around so it works better with fractals on different chip-sets.", "I'm using it in Alps which looks the same on OSX(AMD) & Win(NVidia). *phew*", "Ramocles, 2014-09-02awesome!  good job!", "Dave_Hoskins, 2014-09-02Nice, but I get a lot of horizontal streaks with that when the iteration is set to one, which is how most of us will be calling it. It's also a bit slower on my AMD/Mac, and returns very different results from a GTX card.", "I wonder if OpenCL has the same issues? I should imagine not... .. .", "Trisomie21, 2014-09-01You can somewhat control the input this way, behave better on my AMD card.", "(But I dont think this address HW with low trig precision.)", "", "return fract(sin(dot(mod(p, 3.1416),vec2(1e0,1e2)))*1e4);", "Andre, 2014-09-01Good work, also looks better for smaller numbers. If you change lines 92 and 93 to", "{code]", "a += hash12((position * v*0.0002 + iGlobalTime * .000032 + 50.0));", "b += hashOld(position * v*0.0002 + iGlobalTime * .000032 + 50.0);", "[/code]", "", "you can see the patterns of them both.", "squid, 2014-09-01This hash looks way more random, at least on my phone", "Dave_Hoskins, 2014-09-01Thanks for the feedback. Intel graphics cards hey? Who needs 'em.", "nimitz, 2014-09-01Very nice, GPU ShaderAnalyzer shows that it runs as fast on most AMD gpus. It is slower in the HD2XXX series.", "Dave_Hoskins, 2014-09-01There's still a slight differences between Mac and Windows results, I suppose it depends on float range and accuracy of every architecture.", "Dave_Hoskins, 2014-09-01It does seem to have quite small range. Both routines are valid of course, it was consistency between OSX and Windows that bothered me the most.", "vgs, 2014-09-01In my machine the sine function gets completely stretched after just 2 seconds.", "Dave_Hoskins, 2014-09-01The magic numbers were chosen by mashing the number pad, until it looked OK!", "The initial vec(.54321, .12345) add in the 12 & 22 functions is just offsetting the similarities with the X,Y values. It doesn't mean anything significant, in case people were wondering!", "vgs, 2014-09-01This is interesting. I'll use it in my next shader.", "Dave_Hoskins, 2014-09-01On my Mac the sine function seems to really affect the random values from the start.", "ollj, 2018-10-08you are not tracing the conic sections of the dolphin, so you might as well smoothMin() them (more)", "ttoinou, 2018-07-20Featured in this video  !", "ollj, 2016-04-17thats one fast way to splashing water. i think it can be made look muhch better over time.", "Emuljan, 2015-04-10this is just crazyy wow", "Dave_Hoskins, 2015-01-04This is now fixed for me! Did you change something or did re-installing the drivers fix it for me?", "TekF, 2014-09-08I'm seeing the same error here. It definitely worked when it was first published, so must be something to do with Chrome's changes.", "Dave_Hoskins, 2014-09-05It's very strange, if I enable HIGH_Q_NOISE it renders correctly most of the time(!?), and occasionally goes dark as if there's no lighting! If I then press pause I can make it flicker to dark at certain camera angles with the mouse. Of course, none of that actual makes any sense. I'll play around with the ifs, as I've had weird problems with them before, if you remember.", "iq, 2014-09-05And the water looks broken too in that screenshot. Weird. Of course, I cannot reproduce it so I don't know what to do about it", "Dave_Hoskins, 2014-09-05I expect it's just me, but I'm getting this with the new Chrome 36+", "It appears the stripes flicker on and off randomly.", "chaotic, 2014-02-15Looks awesome on Titan.  46 fps in preview, 2.5fps at fullscreen (2560x1920)", "", "So what's the deal, iq?  Were you sent from the future to show us what's possible?", "Dave_Hoskins, 2014-02-04Hey, I couldn't help mucking around with it! Here's some dodgy refraction:-", "(113) if (p.y < 1.2) p.y *= 1.0-min((1.2-p.y)*.7, .5);", "It bends the ray down increasingly through a fixed water level so the actual level isn't a hard defined line. Shame it breaks the tale fin a little.", "reinder, 2014-02-04wow, super cool!", "iq, 2014-02-04I know... but I think no. I cannot afford casting a second ray against the dolphin, it'd be too expensive (and it cannot be done with a single ray, for parts of the dolphin are above the water and require no rippler refraction distortion)", "Dave_Hoskins, 2014-02-04Any chance of bending the Y axis after the water position to simulate the refraction?", "", "Oh come on.", "iq, 2014-02-03Glad people like it. For those with slow GPUs or broken browsers, here goes the video (5 seconds a frame for full motionblur):", "PauloFalcao, 2014-02-03IQ continues to push the limits! WOW!", "aki, 2014-02-03Even water splashes! This is awesome", "hat, 2014-02-03shocking!!!", "fizzer, 2014-02-03Looks amazing, but I'm getting the same issue as Dave_Hoskins. Windows 7, GTX 670, R332.21", "avix, 2014-02-03nice scene + superb execution.  superb", "Dave_Hoskins, 2014-02-03Those water splashes are amazing.", "Antonalog, 2014-02-03Insert long chain of superlatives here!  Too superlative to comprehend!", "iapafoto, 2014-02-03Crazy !!!", "Dave_Hoskins, 2014-02-03I'm getting a black screen on my Windows 7 box. It does show up if I set NUMI/F to 8, and it looks great but I'm guessing not at its best with those settings.", "CPU, 2014-02-03WOW!!! Superb! Unbelievable! Gob-smacked!!", "", "iq does it again", "Caineluo, 2022-04-05nice", "DanielXMoore, 2022-02-26@BigWIngs Thank you for the tutorials, it really helped me!", "BigWIngs, 2022-02-09Fancy!", "browric2, 2021-11-10@DanielXMoore at okay haha, awesome work with the shader though", "DanielXMoore, 2021-11-10@browric2 Glad you like it! I can't take any credit for the music,  it's called 8 Bit Mentality and is included in the default list of ShaderToy audio channel inputs.", "browric2, 2021-11-10Looks and sounds sick! Sick! What's the tune?", "Poisson, 2022-10-28Very nice colors!", "Dave_Hoskins, 2022-09-13BTW. You can\u2019t see the bat in iOS app.", "wednesdei, 2022-09-12This is sick, wow!", "zznewclear13, 2021-11-08After several failed attemps, I changed line 262 in Buffer A to:", "balPosVel.zw = reflect( balPosVel.zw, vec2(0.0, 1.0) );", "And finally I won the game", "Quadrizoid, 2018-08-30Yall have got any more of those...", "...BRICKS", "iq, 2018-02-20Yes, the iOS is kept up to date, it should be working fine: https://itunes.apple.com/us/app/shadertoy/id717961814?mt=8", "neosettler, 2017-05-02Thank you demofox, your feedback is greatly appreciated. I've noticed that this Shader does not work on the iOS app. After digging into the code, I couldn't tell why. The iOS app does not seems to be maintained and I'm not sure if it did work at some point. Does anyone have some insight on this topic?", "demofox, 2017-05-02I can help with that (:", "32 is the ascii character code for space.  0.5 is added to that because in a texture, the color of a pixel is in the center of the pixel.", "Here are some other ascii character codes if you want to find other keys:", "http://www.asciitable.com/", "neosettler, 2017-05-02Nice work, about this line:", "", "const float KEY_SPACE = 32.5/256.0;", "", "How did you come up with 32.5? Could you elaborate on the logic of mapping keyboard keys?", "tajjada, 2017-03-26The speed of the player/paddle seems to be framerate-dependent. The game is almost unplayable on my 144Hz monitor, as the paddle moves very fast.", "scratch13764, 2017-03-05I am quite confused as to how you got a moving object working, but this is fantastic!", "hjw3001, 2017-02-14This is great! I've almost completed the level, but it's tough!", "Ruins, 2016-10-26I win!!! full ready game only on gpu it is really unreal XD", "ollj, 2016-09-23good template. i like how the game code is one shader and its shell for style is a second shader.", "", "", "A distance function comes down to a gradient were y=brightness=distance. and it is pretty easy to apply a simple f(x) function that modifies a linear gradient into something with a fuzzy glowinf brder, like smax(step(0.,1.,x),smoothstep(0.,1.,x+1.)) ?", "a glow effect can come down to a variantt of many smax() smooth maximum functions. glow comes down to quadratic functions.", "", "some are simpler, as this has lines 273 274 275 just sum up 3 colors that glare with exp(square function) scaled with with sin(time) and scaled wih some events.", "pix, 2016-07-18I can't find any doc on the buffers feature (Buf A, Buf B etc). Is there a paragraph or 3 anywhere?", "bytewave, 2016-04-15132 Effect O.O", "demofox, 2016-01-29Nevermind about my corruption.  My system has some strange gfx issues with things besides shadertoy that other systems don't have... maybe some driver or hardware problem.", "squeakyneb, 2016-01-27Buf A, line 95, do this", "", "float paddlePos = loadValue( txBallPosVel ).x;", "", "And it plays itself which is quite entertaining.", "cubby208, 2016-01-13I am curious, lets say for those edges.  Lets say you had a traditional solid orange line.  How do you make it look like a glowing line?", "wax78, 2016-01-12Damn, outstanding", "demofox, 2016-01-12Hey IQ, I seem to get what looks to be corruption in the image.  Check this out to see what i mean:", "http://imgur.com/gclMfMv", "", "win 7 enterprise, chrome 47.0.2526.106 m", "", "Let me know if there's any more info I can provide!", "fizzer, 2016-01-12Fantastic! Very awesome presentation.", "Andre, 2016-01-10@iq", "You should be able to use cross origin textures if you set crossOrigin='' on the image element before loading.", "If the server returns a \"access-control-allow-origin:*\" header it is allowed, a lot of image sites already do this.", "", "http://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html", "", "The philosophical issue still remains though ;)", "DRMASTER, 2016-01-09Amazingly cool! Only issue is I feel like a lousy programmer comparing myself to this :P", "warlock, 2016-01-08Buffers!! And the shader is perfectly awesome! ))", "Klems, 2016-01-08Great job! How large is the default buffer? I assume it is as large as the current resolution and has 4 channels.", "For those who want to see the gameplay buffer, add in line 293:", "if ( fragCoord.x < 56.5 && fragCoord.y < 56.5 ) col = texture2D(iChannel0, fragCoord.xy/iResolution.xy/4.0).rgb; Might want to set the filter to nearest BTW.", "aiekick, 2016-01-07weird, on different pc, the ball not have the same speed.", "knighty, 2016-01-07super hyper uber cool!", "aiekick, 2016-01-07it may be cool to permit buffer use by sound shader for doing some sound for any event like ball on paddle, ball on wall, or ball on brick. its not possible ?", "tomkh, 2016-01-06iq/poljere:", "Great to see more and more features on ShaderToy after", "some time of relative stagnation!", "I love the new render buffer addition for its simplicity and usability.", "It is definitely great for shadowmaps and feedback effects.", "Maybe a bit hacky for game logic, but in some sense those hacks have its charm ;)", "", "At the same time, I couldn't resist to port your game example to PolyCube that is featuring (from some time already) GLSL translation to JS, so you can run your game logic in a bit less hacky way on a CPU:", "http://polycu.be/edit/?h=06yXe2", "I hope you don't mind ^^", "dine909, 2016-01-06iq, totally understand, in a sense too, keeping the limitation is enforcing creativity, which is an important sentiment.", "jcowles, 2016-01-06Congrats on the new feature guys, and nice demo!", "834144373, 2016-01-06Nice game!And the BackBuffer is very cool on shadertoy!", "532789623, 2016-01-06IT IS SOOOOOOO COOOOOOOOOOOL!!!!!", "optimizer, 2016-01-06This is great! You've reduced a powerful modern GPU to the power of an Atari 800 through massively inefficient techniques. \u00f0\u0178\u02dc\u201a", "", "PS: It's a joke", "dirkadirkadan, 2016-01-05....aaaaand there goes my social life!", "iq, 2016-01-05dine909, WebGL doesn't allow external images (cross domain textures, that is). The only way would be if Shadertoy itself hosts the images, but then that's a bigger discussion. Also, even without that limitation, there's still philosophical issues with custom textures. We'll see, it might happen, maybe, or maybe not, or maybe yes.", "jt, 2016-01-05Cool!!!", "dine909, 2016-01-05Amazing!! Please though, PLEASE can we have a source fo external image?", "iq, 2016-01-05You can also set gameSpeed to 15.0  in line 26 to speed the process up. Too high values will break the game though, because I had to limit the number of collision detections per game step to 3, otherwise the compiler would crash.", "poljere, 2016-01-05haha love the hack! Demo mode", "rodolphito, 2016-01-05AMAZING!", "I love the win screen at the end!", "", "For those who can't play but want to see the awesome grand finale at the end: set Buf A line 143 to paddlePos = balPosVel.x;", "", ";)", "aiekick, 2016-01-04what is this feedback buffer ?", "revers, 2016-01-04BTW It is possible to cheat in the game. Press \"pause\", then press \"reset time\". Now you can move paddle using arrow keys and the game will be only updated when some key is pressed.", "revers, 2016-01-04Wow! This is amazing! Great job!", "public_int_i, 2016-01-04WOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO!", "", "Thanks for multi-pass and feedback buffer Beautypi !", "nimitz, 2016-01-04Oh wow, both history and multi-pass rendering at once!!", "", "Also, please add a second of wait before the game begins.", "aiekick, 2016-01-04and it seems to be that this feature is not supported by my mobile (black screen on my BB Passport for all the multipass shaders)", "dila, 2016-01-04hmm, i guess my GPU isn't supported. it seems to draw OK and can move the paddle, but the ball is flickering and can't play  ubuntu+intel gpu", "Dave_Hoskins, 2016-01-04OH NO!!", "TekF, 2016-01-04THIS", "CHANGES", "EVERYTHING!!!", ":-0", "PauloFalcao, 2016-01-04WOW!!!! A New World!!!", "Mourtz, 2016-01-04think how awesome it would be if you could export this into a single executable file.", "antonOTI, 2016-01-04Hey I have a question that I assume is basic:", "In Buf A line 72 you specify 3 param for texture2D, what is the use of the third one ?", "There is no mimpmap, right ?", "vgs, 2016-01-04LEELOO DALLAS MULTIPASS!", "I'm sorry for the awful joke... :P", "", "Thank you for the render buffers!", "Nrx, 2016-01-04Wow... great!!", "reality3d, 2016-01-04Great job. Congrats!", "reinder, 2016-01-04Wow, really nice !", "iapafoto, 2016-01-04Shadertoy is dead, long live Shadertoy!", "antonOTI, 2016-01-04Thanks iq!", "aiekick, 2016-01-04great  i cant inmagine a thing like this was possible with shader . thanks shadertoy", "poljere, 2016-01-04Welcome games to Shadertoy! Multipass is here", "cmarangu, 2019-11-05uhhhhhhhhhhhhhhh hhow did u do that", "pyBlob, 2016-07-25doing it for the shadows too would be awsome", "hertz, 2016-02-10Derived all the equations by hand, no more questions :-) Should have probably used MathCAD though", "hertz, 2016-02-03Could you, please, explain why do you use one quarter of iResolution.y squared for calculating the pixel area?", "Also I seem to not get it why do you call the last argument to projectSphere both \"fov\" and \"fle\", is it z-near or field-of-view angle, or neither? :-)", "Thanks!", "cubby208, 2015-08-01Would this be more efficient then sending a all the triangles that are in a sphere to the shader, then running tessellation?", "quickleee, 2014-06-21iq, thanks a lot for this and all the rest of your shaders. awesome work!", "it looks like your cam matrix for this one should look like this:", "mat4 cam = mat4( uu.x, vv.x, ww.x, 0.0,", "uu.y, vv.y, ww.y, 0.0,", "uu.z, vv.z, ww.z, 0.0,", "-dot(uu,ro), -dot(vv,ro), -dot(ww,ro), 1.0 );", "otherwise the projection is wrong for case where cam_pos.y != cam_target.y (e.g vec3 ta = vec3( 0.0, 1.0, 0.0 );)", "jtorres, 2014-05-30Great!! it works in my own implementation (js + webGL + linux), but the shader does not work in linux (chrome/firefox). Also you are not using r4, z4, l4 and r6 so they could safely be removed of the shader. The shader is working like a charm in windows.", "", "Thank you very much!", "iq, 2014-05-30Fixed", "jtorres, 2014-05-30Definitely the area value when radius =! 1.0 seems to be wrong, at least in my computer, can you reproduce it?", "jtorres, 2014-05-30See the yellow sphere for example, it seems it occupies less pixels when it becomes more ellipsoidal (near the screen), wich seems not correct...", "iq, 2014-05-30Radius is 1.1, 1.2 and 1.3 for the yellow, green and red spheres", "jtorres, 2014-05-30Great shader! Maybe I'm missing something, but I can't make it work when the sphere radius != 1. Any hints?", "KiO, 2021-01-26Thanks iq!", "Sorry for necroing an article from 2011, but your resources are the most diverse and accessible, as well as extending into some very complex ideas, on the internet. It is a shame that raymarching, and shader-writing in general, seems to be a rather small niche of the programming world. It embodies the beauty of maths so well.", "A lot of your approaches integrate optimisation so heavily that I am struggling to read the logic in the code, as I am not that good at visualising mod functions yet. I can understand \"iteratively subtract the cross\" - I have made fractals before, but I do not understand how", "...", "vec3 a = mod( p*s, 2.0 )-1.0;", "s *= 3.0;", "vec3 r = 1.0 - 3.0*abs(a);", "...", "d = max(d,c);", "", "achieves the iterative subtraction of the crosses... I get why individual numbers are there - the 3 scales the cross as it gets smaller, the \"1.0-\" moves it into the middle of the next smaller grid. But if I try to derive these ideas from scratch myself my code does not produce what I want it to...", "iq, 2021-01-25I fixed the article. Sorry for that!", "KiO, 2021-01-23Thank you to iq for all the amazing tutorials about raymarching.", "", "However, for those who came here from http://www.iquilezles.org/www/articles/menger/menger.htm, please be aware that there is currently a mistake in one of the implementations of this sponge, prior to optimisations.", "", "Current code is:", "vec3 map( in vec3 p )", "{", "float d = sdBox(p,vec3(1.0));", "", "float s = 1.0;", "for( int m=0; m<3; m++ )", "{", "vec3 a = mod( p*s, 2.0 )-1.0;", "s *= 3.0;", "vec3 r = 1.0 - 3.0*abs(a);", "", "float c = sdCross(r)/s;", "d = max(d,-c);", "}", "", "return vec3(d,0.0,0.0);", "}", "", "Note that the last line in the loop has to read d = max(d,c), without the minus. Otherwise it does not work.", "", "I will never get these two hours of my life back, but I am sure all the hair I tore out will eventually grow again...", "", "I have no clue what is happening with all the mods and abs still, but that is a different story.", "betairya, 2018-11-25Hello, I'm just be confused for several hours on that magic math around those lines:", "a = mod(p * s, 2.0) - 1.0; r = abs(1.0 - 3.0 * abs(a))", "It might be some wrong with my brain, but for me it is really hard to figure out what was going on.", "I think the following calculation is much more clear for me:", "a = mod( (p + 1) * s, 2.0 ) - 1.0; r = abs(3.0 * a); and replace c by -c (c = -(min(...) / s)).", "Although they are equal (at least visually, I have not checked it), I think the second one is more easier to understand... ( for me lol", "Thanks for those brilliant works! xD", "fb39ca4, 2014-12-08Menger fractals with iterated rotations always remind me of high rise apartment buildings.", "iq, 2014-11-17Not really, the results are different. If |a|<1/3, your formula won't spit out the right values...", "EvilRyu, 2014-03-23For this line: vec3 r=abs(1.0-3.0*abs(a)), is the outer abs() necessary? I think 3.0*abs(a)-1.0 would suffice", "iq, 2013-08-20Yes it is, but the titles don't match. It's the \"iterative shapes\" under the \"fractals\" section", "fb39ca4, 2013-08-20The URL should be http://www.iquilezles.org/www/articles/menger/menger.htm. Also, that particular article is not listed on the articles page of your website.", "johnmarinelli, 2019-02-14@joric, commenting out line 22 of the \"Image\" tab (uv += ...) will remove the wobbliness.  keep in mind this makes the movement of the edges more obvious", "joric, 2018-09-05Why camera is so wobbly? How to disable it?", "Davislast19, 2017-07-01Looks good", "ollj, 2017-05-06checkSame() to honor, and i found that calculating 2 raymarch distances with 2 different epsilon within the same raymarching loop gives a neat translucend volumetric \"cellshader\"", "https://www.shadertoy.com/view/lsSyRd", "", "void rm3(vec3 o,vec3 r,inout float t,inout float t2){for(int i=0;i<rmIterations;++i){", "float d2=df(o+r*t2);", "if(d2>eps)t2+=d2*.5;", "float d=df(o+r*t);", "t+=d*.5;", "#ifdef dynamicEps", "d=pow(d,pow(t,.5));", "#endif", "if(d<eps*.05)break; }}", "", "{", "float t=0.,t2=0.;//2 distances to the distanceField, with different epsilon.", "rm3(RayOrigin,RayDirection,t,t2);", "p=o+r*t2;//p is surface.xyz for t1 measure, within a distance field that is modulo repeated on 3 dimensions by fract(x)", "p=fract(p)*mod(p,3.)*t2*t2/(t*t*t);//t is color. making distance cubes darker.", "}", "chaosink, 2017-01-28Awesome!", "jt, 2016-11-16very cool!", "drone1, 2016-04-28Love it!", "dila, 2016-04-17cool stencil", "candycat, 2016-04-14@FabriceNeyret2 haha, you found it!", "FabriceNeyret2, 2016-04-14NB: also works with Britney's video and music as texture :-D", "candycat, 2016-04-14Thanks all! Now add more descriptions.", "FabriceNeyret2, 2016-04-14nice !", "( you should tell in description that mouse is available.", "and you could add tags like NPR, cartoon. )", "iapafoto, 2016-04-14Super idea and very nice realisation", "musurca, 2016-04-14rad!", "asneakyfatcat, 2023-03-29@nat573 https://soundcloud.com/virgill/4klang-rhodium if you click on the sound buffer you can grab the soundcloud link", "Nat573, 2022-09-09This is so dope. What is the name of the tune?", "neriakX, 2020-09-24hammer!", "t4ggno, 2019-05-21Amazing", "alysius, 2017-11-24echt fett!", "chaosink, 2017-11-04Amazing!", "834144373, 2017-09-01yep,that's so cool!I love the color and transparent.", "Osgrot, 2017-09-01Colours and shading are amazing.", "dagelf, 2017-05-20The demoscene is the primordial soup for the universes we think we'll create...", "PrzemyslawZaworski, 2017-01-24Unity3D CG version of Rhodium Liquid Carbon shader:", "", "https://raw.githubusercontent.com/przemyslawzaworski/Unity3D-CG-programming/master/rhodium.shader", "", "In Unity3D editor, add 3D Object/Quad to   Main Camera, then bind material to the quad. Set quad position at (x=0 ; y=0; z=0.4;). Play", "huyiyuan, 2017-01-21nice\uff01 but i don't koow what shader i should to learn,because i used unity3d to  program,it support CG/HLGL more better.someone can tell me?", "Virgill, 2017-01-16jmc, thx! You\u00b4ve got mail ;)", "jmc, 2017-01-16Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Here's a quick demo of other Shadertoy shaders in our Visualizer :", "", "https://www.youtube.com/watch?v=KiAfOQgtxO0", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "asneakyfatcat, 2016-11-15holy shit", "drift, 2016-10-25Beautiful shader. One of my favourite shaders ever from one of the best 4k intros ever.", "Thanks for sharing all your work Virgill.", "bioccular, 2016-10-24This is an awesome shader.", "bostelk, 2016-10-23absolutely, amazing. thank you for sharing your work!", "reddevild271, 2016-10-22I love all the art that shows up on here, thanks for promoting such a great community iq! Is there a forum that you all share ideas on? (While typing this comment, just found a bug that doesn't move a word to the next line if there are too many letters in a line.)", "", "http://i.imgur.com/k8nIq7v.png", "dila, 2016-10-21i saw the demo. its really nice. congrats", "bwestlin, 2016-10-21Totally stunning!", "noonan, 2016-10-20Great tune also.", "Amazing shadertoy can repeat a soundcloud song, while soundcloud has none of that functionality.", "CaliCoastReplay, 2016-10-19Insane brilliance", "public_int_i, 2016-10-18Beautiful, in full screen it looks perfect.", "mlkn, 2016-10-18Magnificent!", "coyote, 2016-10-17 Fantastic!", "iapafoto, 2016-10-17fantastic !", "_pwd_, 2016-10-17This is so supernice!", "PauloFalcao, 2016-10-17Superbe !", "iq, 2016-10-17Super super nice!!", "Shane, 2016-10-17 Very nice.", "nimitz, 2016-10-17Amazing!", "Unix, 2016-10-16Superbe !", "Dave_Hoskins, 2016-10-16Beautifully hot!!! And a great use of blurring", "aiekick, 2016-10-16wow", "FabriceNeyret2, 2016-10-16wow !", "834144373, 2016-10-16nice!", "Duke, 2016-10-16Very cool!", "kuvkar, 2016-10-16wow!", "decrooks, 2016-10-16Amazing", "shau, 2016-10-16Stunning. Now I'm not sure which part I like best", "frankenburgh, 2016-10-16Looks very nice, Virgill!", "qNemo, 2023-01-25Well done! What license is your version under?", "Zavie, 2019-05-23@bernie_freidin I just tested and you are right indeed, there is a difference in brightness. The difference suggests there is a bias in the next event prediction (which is a concept I wasn't familiar with when I wrote this shader). I guess the solid angle used for next event prediction is not correctly estimated or taken into account.", "", "If I recall correct the lightSourceVolume was an approximation of the visible part of the emissive sphere (which is much bigger than the small white disk we see).", "bernie_freidin, 2019-05-20@Zavie, i'm trying to figure out the discrepancy in the converged image when ENABLE_NEXT_EVENT_PREDICTION is enabled/disabled. it appears that turning off next event prediction significantly darkens the image - i'm assuming this is a bug?", "", "also, like @kakaxizhhgjh mentioned, it seems odd that lightSourceVolume differs from spheres[8]. i assume you did this to avoid having to randomly sample from the disk instead of the hemisphere?", "", "my local changes are in https://www.shadertoy.com/view/WtB3R1", "baptiste_f, 2017-02-23this guy is a beast :o", "Zavie, 2016-10-18@kakaxizhhgjh: lightSourceVolume is used for next event prediction. We know the light source is a small volume at the top, so we try to shoot rays directly at it to get a better yield than with pure random bounces.", "kakaxizhhgjh, 2016-08-20Hi, why there is a lightSourceVolume? why not use spheres[8] directely?", "vgs, 2016-01-05@Zavie please update this shader to use multipass!", "The code is here: https://www.shadertoy.com/view/4dtGWB", "Warn me when you do so that I can delete my port.", "PauloFalcao, 2013-10-03Cool! I love these images full of noise, reminds me of my first raytracing experiments 12 years ago, actually were path tracing based on the great Global Illumination Compendium and on Eric Veach, Ph.D. dissertation, I was using java! LOL I had to wait a long time for the image to converge and become nice with low noise. Now I use OpenCL for this kind of stuff and for more complex shaders, BTW OpenCL is great for doing complex shaders!", "fb39ca4, 2013-09-13I think it looks better with the wall behind the camera turned green instead of being black.", "Zavie, 2013-09-07I updated the shader: with 20 samples, native GL/Firefox/Windows, I see about 10% speedup. It's the same change I tried before, weird.", "Zavie, 2013-09-07Interesting, thanks. I see a slight speed up with your version. When I last tried, it was actually slower with the array.", "", "By the way, I made a version that converges over several frames: http://glsl.heroku.com/e#10908.0", "iq, 2013-09-06I got quite some speed increase by putting the spheres in an array and indexing them directly, almost twice faster (didn't publish it, but it's here for referene if you want: https://www.shadertoy.com/view/XdsGWB. That was only in Linux, though. In Windows the performance doesn't change, for it's all unrolled I think and both versions generate the same code.", "Zavie, 2013-09-06Shoot, you're completely right. Should work better now.", "Zavie, 2013-09-06The camera is a wide angle, moving along a plane while aiming at the center. Maybe I should have it out of the room with a more usual orbital move.", "simesgreen, 2013-09-06Nice, but the camera seems a bit distorted when you move it?", "iq, 2013-09-04It works great", "Zavie, 2013-09-04Thank you, I included the fix.", "gleurop, 2013-09-04The image is very corrupted for me, changing line 106 to vec3 e = vec3(0); fixes it.", "ollj, 2022-05-05This shader challenges the best pc grapic cards, good.", "hiPeeps124816, 2021-07-28i don't think macOS catalina includes glsl 3, which means i have to risk updating to macOS big sur which is known for bricking my computers model", "Dave_Hoskins, 2021-07-20If you get GLSL ES 3.00 only errors at around line 437 in buffer A, then the device you\u2019re using is not quite up to the job!  (made by Apple? \ud83d\ude00)", "hiPeeps124816, 2021-07-19'min' : no matching overloaded function found", "'=' : cannot convert from 'const mediump float' to 'highp int'", "Do I need to update my graphics drivers or something?", "iq, 2021-05-31So now it's 10 fps, down from the 20 fps of 4 months ago and the original 30 fps. No code changes happened at all; WebGL can be amazing sometimes", "alwaysmine, 2021-02-06.....", "FabriceNeyret2, 2021-01-30drivers, also: when they re-wrote compilers from scratch around Vulkan base, they change many arbitrations and thresholds, with sometime this consequence. Plus many new bugs, also :-/ .", "Or do you mean a more recent change ?", "iq, 2021-01-30It used to be 30 fps in my old laptop, now it's 20 fps in my new one, which has a more powerful GPU. Each version of Angle (Chrome/Edge/Firefox) makes shaders slower, it seems", "Velctor, 2021-01-2330fps on my RTX3090.Oh My God", "FabriceNeyret2, 2020-04-19missspelling for tag \"procedueal\"", "ShadowFlare, 2019-04-12I think there is a way that you could progressively raymarch it, but I'm not that good at these things yet.", "technobaboo, 2019-02-2120-23fps on 1070ti for me, but slows everything else to a crawl while doing so. Still, very amazing!", "marsipan, 2018-07-14Wow, amazing! :-) But makes my 1080ti stutter!!...", "eclectic, 2018-07-05This shader and the one with the snail are the most amazing shaders here. I love them!", "yuletian, 2018-06-19But Amazing", "yuletian, 2018-06-1912fps on GTX1066", "metalim, 2018-03-13@etale_cohomology, yes, computers are too slow for programs that calculate whole scene geometry 4 million times every frame.", "etale_cohomology, 2018-03-10(computers are still WAY too slow for the rigors of unconstrained computer graphics!)", "etale_cohomology, 2018-03-10Runs at 16fps with an NVIDIA Titan V (linux driver 390.30)", "jcyuan, 2018-01-23oh my......", "MacSlow, 2017-12-05I'll never feel bad about my heavy shaders again... but then they are not remotely as complex and slick as this one... so maybe I'll still fee bad ;)", "", "Just had to think back at the first GLSL example I saw on some GPU from 3Dlabs (http://prideout.net/archive/shots/glsldemo.png) and thought \"Geez, OpenGL came a long way from the old SGI-times!\"... and here we are today, able to write whole rendering-systems in a shader on the web.", "BlurBusters, 2017-12-03zproxy, nice 360 video. (Readers -- remember to click pause on the above ShaderToy before playing the YouTube video)", "zproxy, 2017-11-29360 at", "tetsuo, 2017-11-29\"mapCrapInTheAir\" hahah", "ingagard, 2017-11-27Iq, brilliant picts there. You\u00b4re a great source of inspiration to me. Thanks for all work.", "jt, 2017-11-24Brilliant! Looks very real :-)", "slerpy, 2017-11-23I'm beyond speechless", "rs, 2017-11-23@FabriceNeyret2 Thx. I see what you mean.", "834144373, 2017-11-23wow\uff0camazing\uff01", "12.5 FPS on GTX1060", "FabriceNeyret2, 2017-11-22wow, super report; thanks !", "iq, 2017-11-22@Fabrice, this is a summary of the process (click on the image to see the original):", "", "", "As it says in the image, I'll talk more about it soon in my Patreon page (https://www.patreon.com/inigoquilez) and my website (http://www.iquilezles.org/). You can also see another typical breakdown in the video this page: http://iquilezles.org/www/articles/raymarchingdf/raymarchingdf.htm", "iq, 2017-11-22Of course it runs faster if you reduce the voronoi search size. But, also of course, I chose those loop limits for a good reason -", "reducing them breaks the image (for the grass elements span beyond 2 grid cells). So that's not an option for me.", "", "The only way to reduce the loops, as I said, is to generate the grass/moss elements in a way that allows you to know the direction of growth (and hence cell overlap) beforehand without evaluating the full distance field. Then you can explore only the relevant part of the grid. Since that's not easily done at runtime, an option is to precompute it in the first frame of the animation and store it in a buffer where each texel encodes the xmin,xmax,ymin,ymax of the smallest search box for each grid cell that gives correct results.", "", "A classic trick in real applications that render vegetation is to reduce the amount of elements with distance, dof and mblur, and make them thicker to compensate for the lost pixel coverage. That works great for images with a big dynamic range of distances. In this case all the content is concentrated in small distance and with a long lens, so not much can be done. You can still try it by doing     int km = ( pos.z>1.0 ) ? 1 : 2;", "for( int k=0; k<km; k++ ) in line 300 and float d2 = se2.x - (0.02 + 0.03*se2.y)*((km==2)?1.0:2.0); in line 336. Still, all you get is a win of 1.03x. Probably, because of the way WebGL is unrolling these loops.", "", "Anyway. Yes, I did look into all the alternatives I could think of (and believe me, rendering massive amounts of vegetation efficiently is something I know about).", "", "I might try dr2's hexagonal pattern next time, a 2-ring search should involve 19 cells instead of 25, so there's that, although the density will decrease, so that might require a 3-ring search, defeating the point. We'll see.", "Dave_Hoskins, 2017-11-22I think iq already explained that he wants the grass to cover more area continuously, although I'm sure there's ways around that with smaller loops.", "dr2, 2017-11-22If you want it to run 3x faster, reduce the Voronoi loop counts:", "", "In mapGrass -", "//for( int j=-2; j<=2; j++ )", "//for( int i=-2; i<=2; i++ )", "for( int j=-1; j<=1; j++ )", "for( int i=-1; i<=1; i++ )", "", "In mapMoss:", "//for( int k=0; k<2; k++ )", "for( int k=0; k<1; k++ )", "", "I have done this in https://www.shadertoy.com/view/llXfRM (unlisted) - I also omitted the DoF to see if the extra buffer slows things (only a slight effect).", "", "If you use the hexagon-based Voronoi, as in https://www.shadertoy.com/view/MlsBzN (Succulent Forest), you will get this speedup (perhaps even slightly more), without the visual artifacts that the extra square Voronoi cells are needed to prevent.", "", "As they say, just my 2c. Of course YMMV", "FabriceNeyret2, 2017-11-22@iq: BTW, any idea how much time  you spent on the making ?  and possibly, on the raw making vs the fine tweaking ?", "smkgames, 2017-11-22Amazing!!!", "iq, 2017-11-22@Fabrice, if I disable the materials I still get pretty much the same FPS (well, it improves by a 1.03x)", "FabriceNeyret2, 2017-11-21@rs: for a convex component, testing dot(rayDir,obj-raySamplePos) before considering its distance. But this test is about the same cost as the distance evaluation (for base objects), so it is doubling the cost in all the cases while saving maxi 50% in some cases.", "rs, 2017-11-21@iq Wow.", "rs, 2017-11-21@FabriceNeyret2 \"backface culling (ignoring backsided distances)\" how would you do that in a distance field?", "PauloFalcao, 2017-11-21WOW! So beautiful!", "pellicus, 2017-11-2129fps on my 1070 alienware....  man it's so amazing!", "FabriceNeyret2, 2017-11-21@iq:", "- \" /dot(b,b) pre-computed since the lengths are fixed,\": Isn't the optimizer is supposed to find this by itself ?", "- shading cost: uh, in material(), adding a return at first position doubled the fps, but not if added right after \" matNor = nor;\". ok, then :-)", "- backface optimisation: yep, the (unlikely) peak best to gain is 50%, but the additional cost is probably way more.", "iq, 2017-11-21Yeah, the cost of shading is 0. So not only it's useless to optimize shading, but trying to conditionally simplify based on DOF would probably make it more expensive.", "", "The cost of shadows is almost 0 too (since shadows are found so early on). Not worth trying to reduce number of steps or casting the ray from light to surface instead of surface to light (classic trick to speed things up sometimes). Shadows are not the issue. All the cost is in the intersection/raymarch of the primary ray.", "", "Geometrically, the cost is not the mushroom nor the ladybug. Still, both use bounding spheres right now, but that helps nothing.", "", "All the cost is in the grass and moss intersection. The 5x5 and 3x3 search kernels are necessary to prevent missing intersections, since moss and specially grass are bent and cross one or two cells. Since the bending is in arbitrary directions, the \"offset search by 1 and reduce range\" trick cannot be applied.", "", "I think the optimization effort should go into either micro-optimizations inside the moss and grass inner loops (for example, the sdLineOri calls on moss could have /dot(b,b) pre-computed since the lengths are fixed, or replacing the sin/cos rotations with a reflect in lines 327), or go all the way and do higher level optimizations such as raymarching with over-stepping + correction?", "FabriceNeyret2, 2017-11-20shadow loop down to 50 save nothing", "intersec loop down to 100 save 6% (no visible change)", "decentered finite difference for N save 13% (no visible change)", "Small gain.", "FabriceNeyret2, 2017-11-20oops sorry, mapGrass is Grass geometry, not texture.", "still, material() cost 48% ( which is strange: no loop or Perlin noise inside. Is adding a return at the beginning really testing the right way ? )", "FabriceNeyret2, 2017-11-20well, the cost of mapGrass is 55% of the total, and all the rest (marching + other maps) is 45% ;-)", "dila, 2017-11-20such amazing quality", "FabriceNeyret2, 2017-11-20Also, the grass probably  does not need noise in its color when out of focus. Maybe the backProjected CoC (generalisation of MIPmap LOD) could be  considered at shading for minimum scale of noise evaluation. ( Anyway, it might be that this part of the cost is almost nothing compare to marching cost).", "FabriceNeyret2, 2017-11-20Here is the heat map showing the cost of each 8x8 pixel blocks in fullscreen  (computed herehttps://www.shadertoy.com/view/ltfBzN ).", "Color scale:", "Blue: < 25%*average.  Green/yellow : average cost. Violet : > 200%*average.", "", "- Why is the left side more costly than the right side ?", "- Silhouettes are costly. Could we do some \"backface culling\" ? (ignoring backsided distances)", "aiekick, 2017-11-20its very nice, as usual, but very slow alos on my gpu, 3.5fps snif", "kuvkar, 2017-11-20oh wow, it's like animated photograph!", "FabriceNeyret2, 2017-11-20indeed it's precisely", "vec3 col = textureLod( iChannel0, q, log2(coc) )", "with coc as defined line 31", "FabriceNeyret2, 2017-11-20a very cheap version of the Depth of Field using MIPmap (cheap in cost and quality ;-) ):", "", "float depth =  texture( iChannel0, q).w;", "vec3 col = textureLod( iChannel0, q, clamp(depth-2.,0.,3.)).rgb;", "", "(and set MIPmap for bufA)", "stb, 2017-11-20Beautiful scene, iq! Is it possible to implement separable blur for a few more FPS?", "GregRostami, 2017-11-20So Pretty!! Amazing as always.", "Dave_Hoskins, 2017-11-20Hey iq, I've just noticed your intercept loop could be 100 and your calcShadow loop < 50 or less. Not to mention the 25 loops of the mapGrass stuff where a large percent of it gets discarded anyway.", "Dave_Hoskins, 2017-11-20@lamogui If you want it webGL 1 compatible just replace all 2x2 by 2 and all 3x3 by 3. I don't know why iq has done that, probably part of an experiment.", "lamogui, 2017-11-20Doesn't compile on firefox with Nvidia 780 Ti", "", "Line 153 mat2x2 : no matching overloaded function found", "Line 686 mat3x3 : syntax error", "Nesvi7, 2017-11-20Looks awesome iq! It's running at 30 fps on my Titan X (windows-chrome).", "knarkowicz, 2017-11-20Perfect!", "dr2, 2017-11-20Looks like the moss and grass are the killers (they even totally killed my machine...)", "In the k-loop at line 300, set the upper limit to \"1\" for 50% speedup without much visual impact.", "rigel, 2017-11-20Wow! This level of quality is simply amazing... Almost photographic.", "FabriceNeyret2, 2017-11-20I'm curious: do you use some BBbox or sphereBox before testing intersection with the ladybird and mushroom ? or all the cost is spent on the grass anyway ?", "( I dream of a way to have a heat map giving the cost of each pixel, or anything close ).", "FabriceNeyret2, 2017-11-20funny, I recognized the style before seeing the name ;-) .", "", "gorgeous, but 3-4\" of compilation and 1.5 fps, though.", "dr2, 2017-11-20Such realism. Does it fly?", "otaviogood, 2017-11-20Looks great. I would have stopped once I had a nice looking ladybug. That's a lot of different stuff.", "Shane, 2017-11-20Gorgeously exquisite rendering. Considering how long it'd normally take to render a scene like this, I'd say it's running pretty quickly. By the way, I like how you randomized the grass direction with the \"reflect\" vector.", "ingagard, 2017-11-20Perfect coloring btw!", "ingagard, 2017-11-20You already know what I think. Sad it only gives me 2fps.", "I think the for loops inside the for loops hurt the performance for me.", "balkhan, 2017-11-20Impressive as always ! Those mushrooms look so good !!", "BigWIngs, 2017-11-20Wow dude, that is insanely good!", "Dave_Hoskins, 2017-11-20In the UK we confusingly call them Ladybirds", "Lovely rendering IQ, nice work. And I like the 'worldTo' transforms - very neat.", "zproxy, 2017-11-20did the bug just move its hands?", "DELTRON, 2017-11-20Fantastic job iq!", "flockaroo, 2017-11-19phew!!! supernatural! a photograph couldn't look as real ;-)", "ngodrich, 2023-04-11@drift this is still to beautiful - amazing how it's stood the test of time so well. Would be so thrilled to use it in a non-profit website I'm building about looking after the environment - would of course be keen to credit you. Do let me know if it might be possible. Thank you so much", "andresmi, 2022-10-10I am seeking permission to use your code in my commercial project. I have no problem adding you to the credits (and a link back if you wish) or keeping your name out of the credits if you do not want that for some reason or anything you want. Let me know. Thank you!", "luolin, 2021-12-07666", "fawadtariq, 2021-02-15Did it: https://www.shadertoy.com/view/3tdBDS", "Thanks for this amazing shader. Now that I am done with it, can I please use it in my project?", "fawadtariq, 2021-02-15Hi there, I am very new to shaders, I want to adjust this so that only the clouds are visible on a transparent background I tried much but no use. Also, need to convert this to GLSL for Pixi.js. Can anyone please help or guide me in the correct direction?", "beatfix, 2020-12-15Hello drift,", "", "Similar to others here, I would like to use your shader as a background texture in an art piece that will be part of a commercial display.  If you have any objections let me know; I would be more than happy to send you photos after install.  Thank you kindly for sharing your work with others; the rendering here is really excellent, as is the ability to customize through the exposed variables.", "", "cheers,", "Jeff", "drift, 2020-10-14jmc, sure thing, go for it!", "jmc, 2020-10-14Hi Drift,", "", "Did you consider letting us use it in FL Studio (formerly known as Fruityloops) as well ?", "", "Grtz,", "Jean-Marie Cannie", "drift, 2020-10-14dmitrykolesnikovich, you have my permission to use it for anything you want. Just let me know if you make something cool with it!", "dmitrykolesnikovich, 2020-10-13I would like to use your shader in my commercial project. What should I do? Thanks in advance.", "Andre, 2019-01-19Very nice, if you replace the h*h*h*h with pow(h, vec3(5.0 + sin(iTime))) you can even make the clouds come up and (almost) disappear", "fxfactory, 2019-01-16Super-cool. Is this technique (the math behind it) discussed in any article? How would one go about changing the direction of the wind to an arbitrary angle?", "fxfactory, 2019-01-16Super-cool. Is this technique (the math behind it) discussed in any article? How would one go about changing the direction of the wind to an arbitrary angle?", "nuthinking, 2018-12-28Very performant!", "tcr, 2018-12-28Wonderful. On line 27 in the noise function, try adding more *h.  Try:", "h*h*h*h*h*vec3", "and", "h*h*h*h*h*h*vec3", "Looks like different types of clouds, but still realistic and still beautiful.", "eoviya, 2018-12-21\ud83d\udc47 he said \"I've tried in my Unity, it's awesome.\"", "SixGodCN, 2018-12-15\u641e\u5230unity\u91cc\u8bd5\u4e86\u4e0b\uff0c\u5f88\u8d5e", "JJJK, 2018-12-08Hey neat, Groundhog Day is starting!", "mlkn, 2018-12-06Great!", "CaliCoastReplay, 2017-08-28Wow, utterly amazing.", "jmc, 2017-01-16Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Here's a quick demo of other Shadertoy shaders in our Visualizer :", "", "https://www.youtube.com/watch?v=KiAfOQgtxO0", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "FreeFull, 2017-01-15Fantastic!", "kev7774, 2017-01-11Really nice, looks better than most volumetric 3D clouds.", "jt, 2016-11-16nice!", "poljere, 2016-11-15Very nice", "kuvkar, 2016-11-14Best 2D clouds I've seen, thanks for sharing!", "Shane, 2016-11-14Really nice. The opening cloud scene in that \"XX\" demo is beautiful.", "flockaroo, 2016-11-14cool! very convincing!", "tomkh, 2016-11-13Best quality*fps/size ratio!", "iapafoto, 2016-11-13Super real and super fast !", "aiekick, 2016-11-13wow", "public_int_i, 2016-11-13Looks real and wow it runs very fast too!", "Duke, 2016-11-13", "CPU, 2016-11-13Excellent!", "FabriceNeyret2, 2016-11-13very good !", "dila, 2016-11-13almost real, wish i could do this kind of noise", "shau, 2016-11-13Looks like real clouds", "ollj, 2023-06-13this is a slower paradigm shift", "DaCuteRaccoon, 2023-06-12TWOPI? use TAU instead, it's a better name", "mizyukurify, 2022-12-12I have had a good look at them from 1 to 28.", "I decided to start learning GLSL with this shader.", "Thank you so much.", "nllorcajr, 2022-10-04Thank you for this!", "Great help for beginners!", "volkovino, 2022-07-29https://godotforums.org/d/30669-2d-fragment-shader-tutorial-series-beginner-to-advanced-gles-20", "volkovino, 2022-07-29https://github.com/Volkovina/GLES-2.0-2D-Fragment-Shader-Tutorial-Series-in-Godot-Beginner-to-Advanced", "volkovino, 2022-07-28https://github.com/Volkovina/GLES-2.0-2D-Fragment-Shader-Tutorial-Series-in-Godot-Beginner-to-Advanced", "https://godotforums.org/d/30669-2d-fragment-shader-tutorial-series-beginner-to-advanced-gles-20", "lucpena, 2021-09-04thank you for this!!", "kinesphere, 2020-08-31hi @shader_boy. Thanks for the help. I think I understand now, it's what I had suggested earlier. The negative numbers in the condition are mapped to positive, so if we have:", "if (r.x - 0.5 < 0.) this function becomes the same as if (r.x < 0.5)", "The values are pushed up to positive.", "Whereas with ABS the negative values are not output, but the function still pushes the values up and then we can define a new \"0.\" to have the line thickness..it's just a way of creating an offset. I got it now! thanks!!", "shader_boy, 2020-08-31@kinesphere . Consider the blue line, we go along the x axis between 0 and 1 then shade a part of the axis blue, specifically between 0.54 and 0.55 on the x axis.", "if (r.x < 0.54 && r.x > 0.55) pixel = color1;", "", "However we could consider the distance from 0.545 on the x axis. The line should be filled in if (r.x > 0.545 and r.x < 0.55) or (r.x < 0.545 and r.x > 0.54).", "This is equivalent to (r.x - 0.545 > 0 and r.x - 0.545 < 0.005) or (r.x - 0.545 < 0 and r.x > 0.54).", "", "Consider |r.x - 0.545| = r.x - 0.545 if r.x - 0.545 is positive or 0", "0.545 - r.x if r.x - 0.545 is negative", "", "Suppose |r.x - 0.545| < 0.005 then if r.x - 0.545 is positive or 0 we have:", "0 <=  r.x - 0.545 < 0.005", "0.545 <= r.x < 0.55", "or if r.x-0.545 is negative we have:", "0 < 0.545 - r.x < 0.005", "-0.005 < 0.54 - r.x < 0", "r.x < 0.545 and 0.54 < r.x", "so 0.54 < r.x < 0.545", "", "This means that given r.x , it is either (positive or 0) or negative so it fulfills this inequality.", "0.54 < r.x < 0.55", "", "To now explain what you were asking about, we are never working with inequalities on negative number.", "abs x =  x if x >= 0", "-x if x   < 0", "", "Try putting in anything and you will see abs(5) = 5, abs(-5) = 5, abs(0) = 0, abs (-3.1415) = 3.1415 etc..., they are never negative. The comment misses out this crucial 'abs' function.", "", "I hope this is clear but if you need to see it visually get a piece of paper, draw a number line from 0 to 100, then consider abs(x - 30) < 10. Try thinking of random x and seeing which fits. You'll see that this is a line from about 1/5 of the paper to 2/5 of the paper.", "kinesphere, 2020-08-31@shader_boy thanks for replying. I don't understand those Axioms, my maths knowledge is basic. What puzzles me is that the negative pixels seem to be written as positive. Another example:", "", "if((r.x - 0.5) < 0.) pixel = color2;", "", "This still fills up half the screen. I would expect it to be empty, since these pixel coordinates are negative. Does it make sense? Maybe my way of thinking is too \"linear\" or I am missing something obvious..", "shader_boy, 2020-08-31@kinesphere", "", "This is because let k = r.x then if k - 0.2 < 0.3 we can add to both sides to get k < 0.5.", "", "See the real number axioms: https://en.wikipedia.org/wiki/Construction_of_the_real_numbers#Axioms", "", "I'm a bit confused what are you trying to ask?", "kinesphere, 2020-08-30I'm trying to understand Tutorial 8 and the ABS function is making me crazy. Could anyone help me?", "", "I understand that ABS is absolute value, that's fine. But I think my problem starts with this syntax, for example:", "", "if (r.x - 0.2 < 0.3) pixel = color2;", "", "Why does this make the same as:", "", "if (r.x < 0.5) pixel = color2;", "", "The subtraction should give these pixel values: -0.1, 0., 0.1, 0.2 and 0.3! Why does it go up to 0.5? Does the function remaps automatically in GLSL, taking the negatives up to 0., 0.1, 0.2, 0.3, 0.4, 0.5??", "vug, 2020-06-18", "@shader_boy Thanks! Fixed it. ^_^", "shader_boy, 2020-06-18For tutorial 12, I believe that the colours are commented wrong. The off centre circle is said to be yellow not red.", "r366y, 2020-06-04Thank you very much for your tutorial. It helped a lot!", "im_paul_hi, 2020-04-18Love it.  Thank you for sharing!", "Morbo, 2018-12-30Ok, I got letter 'O'", "15.+pow(2.,4.)+pow(2.,7.)", "+pow(2.,8.)+pow(2.,11.)", "+pow(2.,12.)+pow(2.,15.)", "+pow(2.,16.)+pow(2.,17.)+pow(2.,18.)+pow(2.,19.)", "Morbo, 2018-12-30Great tutorial thx !", "What's the compressed character logic ? It could be handy for me", "CyanSprite, 2018-12-11in tutorial 24", "you can use", "y = mod(y, 2.5) - 1.1;", "in the first part to make it a smooth transition from top to bottom", "CyanSprite, 2018-12-11tutorial 12", "vec3 col2 = vec3(1.00, 0.329, 0.298); // yellow -> red", "vec3 col3 = vec3(0.867, 0.910, 0.247); // red -> yellow", "CyanSprite, 2018-12-11actually, axis x will also scale better", "if( abs(r.y-.001)<0.008 ) pixel = axesColor;", "CyanSprite, 2018-12-11That is, if you are using 1920x1080", "CyanSprite, 2018-12-11Tutorial 11, axis for y", "if( abs(r.x-.001)<0.008 ) pixel = axesColor;", "capitancrunch, 2018-10-03Thanks scarletshark!", "scarletshark, 2018-10-03Also read the comments.", "scarletshark, 2018-10-03They are in the code. Change #define TUTORIAL 0 to some number between 1 and 28.", "capitancrunch, 2018-10-02Hi, new here , Where are the 28 tutorials ?", "jonasaugust, 2018-05-14@vug  Thanks.  My worry isn't just the single \"image\" code block, but about being complete and correct in getting all the code (multiple tabs, per buffer), and presumably textures per buffer.  None of it particularly difficult, but when the purpose is tutorial, even doing those copies flawlessly itself requires something beyond zero sophistication.  For example, one must understand (or at least ape) the distinction between textures, buffers, image, and common, using a skeleton documentation and while the texture selection UI occasionally misbehaves.  Thanks again.", "vug, 2018-05-13@jonasaugust I don't think there is a fork feature on  this site. But you can totally copy-paste the code into new shaders. ^_^", "jonasaugust, 2018-05-13I would like to save the changes to this shader (e.g., progress in line 13), but I can only add it to playlist, or cut and paste the code into a new shader and manually select the textures.  Is there a \"fork\" like github, so I can merrily modify?", "ollj, 2017-08-22This shader is terribly inefficient at many things. but that is just fine.", "This is not teaching efficiency, but bare basic functions and concepts, before any optimization.", "", "Efficiency optimizations (with contextual biases to what to optimize for) are extensions to these basics, to be taught later on. they require advanced knowledge on how things function, which often turns esoteric too quickly, and that gets outdated within a decade, where VulkanAPI becomes a more used low-Level Virtual-machine that does real-time optimizations automatically anyways.", "", "for very general optimization, there is one core thing to start with, the concepts of utilizing symmetry, the functions sign() and fract(), which can be understood as being subroutines of; mod(a,b)=fract(a*b)/b; and; abs(a)=sign(a)*a;", "", "and for the sake of tesselation, otd() si the better start;", "", "the modulo with offset, most commonly (used as subroutines of other functions);", "", "//mod(p,s) with an offset of s*.5", "float pMod1(inout float p,float s){float c=floor((p/s)+.5);p=(fract((p/s)+.5)-.5)*s;return c;}", "mercury.sexy/hg_sdf/", "", "//mod(p,s) with an offset of s*.5 , every odd tile mirrored. every even tile identical to the central tile.", "float pModMirror1(inout float p,float s){float c=pMod1(p,s);p*=mod(c,2.)*2.-1.;return c;}", "mercury.sexy/hg_sdf/", "", "both functions modify p to become the local tile-coordinate while the return value is the tileID==tileIndex==tilePosition", "", "-----", "", "There are also countless ways to use smoothstep() and clamp(), some just generally more elegant, but the less elegant ones are not worse because of that.", "i just prefer:", "float fsaa=1./min(iResolution.x,iResolution.y);", "d=smoothstep(fsaa,-fsaa,d);", "because it keeps the antialiasing centered and independent from screen resolution", "", "---", "", "i salute people who use quaternion rotation where it is more efficient, and i am almost fine with people who use Euler rotation, even where quaternions would clearly be the better choice.", "", "I cringe at many if(a)d=b;else d=c; branches that could easily be converted into a more efficient; d=c+.5*(sign(a)+1.)*(b-c));", "likely more elegant for all contexts where \"sign(a)+1.) is worth being buffered for being used repeatedly, or where it makes sense to turn \"+1\" into a variable, or where c and c partially cancel each other out.", "that one goes by my label of;", "https://www.shadertoy.com/results?query=bisymmetry", "till i find a better label", "scarletshark, 2017-08-22A couple quick things about your scaling section:", "", "vec3 axesCol and vec3 gridCol are unused.", "", "I noticed you're doing a lot of 1-smoothstep().  Why not just swap the edge0 and edge1 parameters?", "", "Ticks: A for-loop causes issues when scaling due to the loop only supporting a finite number of ticks.  If you zoom out (for instance, make scaleFactor=0.5), the x grid stops outside of (-2 : 2).  When teaching the grid system, this is a good opportunity to teach the mod() function.", "", "When scaling you must consider the impact of scaling your anti-aliasing.  Zooming in causes fuzzy edges.  In my solution, I scale my \"clamp\" value to fix this issue. (consider introducing to your rectangle and circle operations as well).  The only snag here is that you also must pass in a scaleFactor to your coordinateGrid().", "", "Result:", "// a function that draws an (anti-aliased) grid of coordinate system", "float coordinateGrid(vec2 r, float scaleFactor) {", "float ret = 0.0;", "", "// Draw grid lines", "// Added a couple additional variables for cleaner lines", "const float tickInterval = 0.1;", "const float tickWidth = 0.001;", "float tickClamp = 0.005 / scaleFactor;", "float tickBounds = tickWidth + tickClamp;", "", "// Got rid of loop. fixes issues where grid is zoomed beyod (-2 : 2)", "float xTickVal = mod(r.x, tickInterval);", "float yTickVal = mod(r.y, tickInterval);", "ret += smoothstep(tickBounds, tickWidth, xTickVal);", "ret += smoothstep(tickInterval - tickBounds, tickInterval - tickWidth, xTickVal);", "ret += smoothstep(tickBounds, tickWidth, yTickVal);", "ret += smoothstep(tickInterval - tickBounds, tickInterval - tickWidth, yTickVal);", "", "// Draw the axes", "const float axisWidth = tickWidth * 3.0;", "float axisBounds = axisWidth + tickClamp;", "", "ret += smoothstep(axisBounds, axisWidth, abs(r.x));", "ret += smoothstep(axisBounds, axisWidth, abs(r.y));", "", "// if we clamp, no need to divide the result later", "return clamp(ret, 0.0, 1.0);", "}", "", "And in the main:", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "// ...", "", "// original", "ret = mix(ret, col1, coordinateGrid(r, 1.0));", "// scaled", "float scaleFactor = 4.; // zoom in this much", "vec2 q = r / scaleFactor;", "ret = mix(ret, col2, coordinateGrid(q, scaleFactor));", "", "// ...", "}", "vug, 2017-08-14@yanntayasui Thanks for asking! I've a full-time job that takes all my time.  Unfortunately, I can't be of help. Best.", "yanntayasui, 2017-08-14Hi,", "I'm looking for a coder to customise and write some shader for me.", "Would you be available for such a job ?", "WoodlandSpirit, 2017-08-13Some good lessons to learn in here, gonna help me heaps, well done!", "YopSolo, 2017-07-12man ! thx a lot", "alvarobyrne, 2017-05-16did this: http://jsdo.it/alvarobyrne/6Gk2", "vug, 2017-04-22@Etilawin The only reason could be that I didn't know about the length() function back then. :-) I changed sqrt it with length now. Thanks!", "Etilawin, 2017-04-21On line 1444 (what a good number) you use sqrt(r.x*r.x+r.y*r.y) which is by definition length(r)", "Is there any reason why you don't use it?", "vug, 2017-04-21@Etilawin and @fermion Thanks for finding the mistakes! I fixed them according to your suggestions. ^_^", "", "@SolGlass @JBlackCat @fatamoto @chris83734 @felixdeimling @signedzero @c2okie you are welcome!", "Etilawin, 2017-04-19I think you wrongly commented on line 1091, I  think you meant rectangle and not disk ;)", "fermion, 2017-04-19There is a small error in tutorial #22, on line 1193, you define a variable scaleFactor = 2.0", "", "But this variable is never used. Judging by the name, I would think it should go on line 1196, like so:", "", "vec2 q = r / scaleFactor;", "SolGlass, 2017-03-30THANK YOU VERY MUCH!", "JBlackCat, 2017-03-28Thank you soooo much for this. Helps me understand what is going on much better than trying to rely on Book of Shader alone.", "fatamoto, 2017-02-04Big THX man!", "chris83734, 2016-12-27thank you for that!!!", "felixdeimling, 2016-10-20thx. super usefull..", "vamoss, 2016-09-23Hi @signedzero, I recommend you read this material:", "http://www.patriciogonzalezvivo.com/2015/thebookofshaders/", "signedzero, 2016-08-26Thx for tutorial. What to do next?", "c2okie, 2016-07-20AWESOME! Thank you!", "vug, 2016-07-05@tkoram20 @kwikshot you are welcome! Glad it helped.", "", "@dhdkdf Thanks for the explanation!", "dhdkdf, 2016-06-23For those who are interested why \"#define TUTORIAL 08\" doesn't compile \u00e2\u20ac\u201d leading zero means octal literal and therefore '8' and '9' characters aren't allowed. '0x' is prefix for hex literal and I didn't find if binary literals exist in glsl. For example:", "\"8 == 010 == 0x8\", \"12 == 014 == 0xC\", \"64 == 0100 == 0x40\"", "tkoram20, 2016-06-20Thank you. This is extremely useful for us newbies!", "kwikshot, 2016-06-14This is a really great tutorial, thanks", "zeitoon, 2016-06-02this rocks! <3", "thr4nduil, 2016-05-15thx a lot, it makes sense but this is more clear when you think : fragCoord varies in all the pixels of the screen, it's pratctically the same logic, but with another reasonnement and one should verify all his steps", "vug, 2016-05-15@thr4nduil Thanks! I'm glad this is useful for you.", "", "What I meant with center and width was: center = x-coordinate, width = thickness of the line. I changed the code to make it more understandable:", "", "// a different way of expressing a vertical line", "// in terms of its x-coordinate and its thickness:", "float lineCoordinate = 0.4;", "float lineThickness = 0.003;", "if(abs(r.x - lineCoordinate) < lineThickness) pixel = color2;", "thr4nduil, 2016-05-14it's really appreciable to read this tutorial, and very useful to work with", "thr4nduil, 2016-05-14Hi, please what do you mean by center in this phrase :", "// a different way to express a line, in terms of its center and width.", "float lineCoordinate = 0.4;", "float lineWidth = 0.003;", "if(abs(r.x - lineCoordinate)<lineWidth) pixel = color2;", "thx", "thr4nduil, 2016-05-14Hi, can i know please what do you mean by center in this phrase :", "// a different way to express a line, in terms of its center and width.", "float lineCoordinate = 0.4;", "float lineWidth = 0.003;", "if(abs(r.x - lineCoordinate)<lineWidth) pixel = color2;", "thx", "vug, 2016-05-12@santope Thanks! I guess that is because I wrote it as a beginner too. :-)", "alvarobyrne, 2016-05-12@cubby208 this might help : https://www.shadertoy.com/view/Xl2XWt. also https://www.shadertoy.com/results?query=tag%3Dtutorial", "vug, 2016-05-12@ambriel, @alvarobyrne you are welcome!", "vug, 2016-05-12@cubby208 Thank you! I'm waiting the GTX 1070 to be released. Then I'll buy get and start learning doing 3D stuff using GLSL. ^_^ But, in the mean time, if you'll find any good tutorial please share it with me too.", "santope, 2016-05-12I like the style of these tutorials.", "They make sense, and seem to go straight to the questions I am asking myself as as beginner.", "alvarobyrne, 2016-05-12thanks", "ambriel, 2016-05-11Thanks for this great tutorial, learned a lot from you.", "cubby208, 2016-05-07This tutorial was great! Anyone know a good tutorial for 3d? I have worked with 3d theory and polygons using opengl, however drawing in 3d without a geometry shader makes me confused.", "vug, 2016-05-06@ollj Thanks! It's hard to believe that 90s were ~20 years ago. :-)", "ollj, 2016-05-06has some good fiunctions explained. the 90s are leaking in.", "vug, 2015-12-31@Lucanio. Thanks! I swapped the comments! Laylay...", "vug, 2015-12-31@mikatalk Thanks for the advise! You are right. Using a loop is the wrong way of drawing a grid here. This is GLSL where everything is calculated in parallel, so mod fits much better. I changed tutorial 10 with your suggestion. Laylay...", "Lucanio, 2015-12-27line 446 and 447 are backwards (col2 is red col3 is yellow).", "mikatalk, 2015-10-29Hey this is really helpful, I'm half way down and learning a lot, thanks!!! One thing that slowed me down is that you use for loops to draw a grid in tutorials ~8-10. It sounds weird to loop through every pixel when the shader i ran on every pixel. I may be wrong but wouldn't it make more sense to to use something like modulo instead? Something like:", "if( mod(r.x, .1) < 0.004 ) pixel = gridColor;", "vug, 2015-10-27I guess my brain conceptualizes rectangles by their topLeft and bottomRight corners. :-P", "danim, 2015-10-26Not really an error but little misleading:", "in line 1094:", "float rectangle(vec2 r, vec2 topLeft, vec2 bottomRight)", "the params should be", "float rectangle(vec2 r, vec2 bottomLeft, vec2 topRight)", "don't you think?", "vug, 2015-10-25@danim You are totally right. \"6*t^5 - 15*t^4 + 10*t^3\" is the calculation on line 754. Good catch! Thanks!", "danim, 2015-10-24D'oh! I mean", "6*t^5 - 15*t^4 + 10*t^3", "danim, 2015-10-24The comment on the line 753:", "// 6*t^2 - 15*t^4 + 10*t^3", "It's not correct. It should be:", "// 6*t^5 - 15*t^5 + 10*t^3", "right?", "vug, 2015-10-02@slon_ru You are welcome!", "", "@joeloud Thanks for pointing out the mistake! You are totally right. I fixed it.", "", "@buksy I'm glad that you are having fun! I really want to make a tutorial for 3D shading stuff. Mostly, because I want to learn how to do 3D fractals and 3D shapes via distance functions. :-) I just finished my PhD and started a new job. Maybe I'll have enough free time in the text few months to start this new project. :-) Laylay...", "buksy, 2015-09-25Great tutorials, lot of fun while reading it  ... Now, will there ever be a basic 3D tutorial?", "joeloud, 2015-09-22In tutorial 17, Part I, line 798, your expression there is backwards. Currently it is:", "x0*m + x1*(1.0-m)", "Which makes m = 0.0 fully x1, and m = 1.0 fully x0, opposite of what the comments above it say. It should be as it is correctly written in Part II:", "x0*(1.0-m) + x1*m", "in order to behave as the mix function does.", "", "Enjoying the tutorial so far. Just thought I'd point that out as I just came to it. Thanks for writing this up!", "slon_ru, 2015-06-30Thank you!!", "vug, 2015-06-29@gsingh93 Oh, great point! Thanks for solving the mystery of \"08/09\" behavior. ^_^", "vug, 2015-06-29@calx and @mateun: I'm glad that these shaders were helpful!", "vug, 2015-06-29@flush_11 I guess, at tutorial 7, I wanted to make the component-wise division of two vec2s explicit to the reader. That's why the shorter version was not used. But you are right, vec2 r = fragCoord/ iResolution.xy; is much shorter. ^_^", "gsingh93, 2015-06-21The reason 08 and 09 don't work is because in C (and GLSL) numbers that start with 0 are in octal (base 8), and 08 and 09 are not valid octal numbers, which have digits between 0 and 7, inclusive.", "", "Also, thanks for the tutorial. It was helpful.", "mateun, 2015-06-14Very cool, thanks a lot for setting this up!", "calx, 2015-05-14This is great - I've been hoping someone would do something like this. Thanks so much.", "flush_11, 2015-04-25I\u00e2\u20ac\u2122m study shader with your tutorials.", "Now I\u00e2\u20ac\u2122ve read Tutorial 7, and I found that we can write", "", "vec2 r = fragCoord/ iResolution.xy;", "instead of", "vec2 r = vec2(fragCoord.x / iResolution.x, fragCoord.y / iResolution.y);", "It can make this code shorter.", "", "thank you!", "moritzw, 2015-03-09You're welcome", "vug, 2015-03-09Oh, I get it now. It is really an interesting behavior. :-) I'm curious why it is happening.", "", "I removed the leading 0's from the tutorial list, so that people won't get confused with this buggy behavior. Thanks!", "moritzw, 2015-03-09When I use", "", "#define TUTORIAL 08", "or #define TUTORIAL 09", "", "then both won't compile, however if I use", "", "#define TUTORIAL 8", "or #define TUTORIAL 9,", "", "both will work.", "This problem only occurs with those both tutorials - tutorials 1-7 all work both ways, wether or not I use e.g. \"01\" or just \"1\"...  Got it?", "vug, 2015-03-09You are welcome! I am glad that these tutorials are useful for you. Shadertoy is great! I am eagerly waiting to finish my dissertation and return to this site. :-)", "", "What do you mean by \"leaving in the leading 0\"? I didn't understand. Laylay...", "moritzw, 2015-03-09This is what I'm looking for! I'm considering refreshing my coding skills and shadertoy seems like the most fun thing to use for this!  So thanks a lot, this seems like a great starting point. Btw: Tutorial 8 and 9 strangely enough are the only ones that don't compile when I leave in the leading 0... Took me a moment to figure out they work perfectly fine if I remove the leading 0", "vug, 2014-05-04Thanks raja! You are right. I intended to demonstrate smootherstep there. I'm glad that people are really reading these tutorials. ^_^", "raja, 2014-05-04I believe, there is a typo is line 881.", "Instead of,", "m = smoothstep( radius-0.005, radius+0.005, length(r - vec2(1.0*xMax-0.4,0.0)) );", "you wanted this to be:", "m = smootherstep( radius-0.005, radius+0.005, length(r - vec2(1.0*xMax-0.4,0.0)) );", "vug, 2014-03-10Thanks for the warning! I made the changes you mentioned.", "", "There is a comparison at line 1769 \"quotient == 1.\" Now quotient is a float. Wasn't comparing two floating point numbers with a \"==\" sign a sin? :-P I guess, it is not. ^_^ Laylay...", "iq, 2014-03-10It doesn't compile for me, the literal values of G, L and S are too big (I believe integers can't be bigger than 65535. I changed them to be floating point numbers, and modified the character() function to work with floats (had too add a floor() in the division at line 1763. The the shader works.", "MrSynAckSter, 2022-11-30Is this the technique from https://developer.nvidia.com/gpugems/gpugems/part-vi-beyond-triangles/chapter-38-fast-fluid-dynamics-simulation-gpu?", "lemonbottle, 2022-07-25Anyone know how to get rid of the line in the middle of the screen? Is there some kind of window offset in the code? (I'm totally inept at java btw, just changing number values)", "martinortiz, 2022-03-02Inside my \"Image\" file, I have BufferA setup like this, like it is here...", "#iChannel0 \"file://BufferA.glsl\"", "#iChannel0::MinFilter \"Linear\"", "#iChannel0::MagFilter \"Linear\"", "#iChannel0::WrapMode \"Repeat\"", "martinortiz, 2022-03-02Here's a better screen cap of problem", "https://i.ibb.co/tJZrtZq/shadertoy2.png", "martinortiz, 2022-03-02I tried this in Visual Studio Code (with Shadertoy plugin)", "It looks the same, except on the borders, where I get these lines.", "On top,bottom, left, right, I get this artifact of lines.", "On shadertoy BufferA, in the Image tab, on bottom, BufferA has Wrap = Repeat", "If I set it to Clamp, it will produce the same artifacts as what I get in Visual Studio Code.", "But I set the wrap mode to \"Repeat\", so how come I get these artifact lines?", "Screencap link, below...", "https://i.ibb.co/rcrsyDy/shadertoy.png", "celifrog, 2020-09-08Holy, I've melted bismuth before and this looks similar! :O", "Zi7ar21, 2020-05-13bruh", "SabRango, 2020-01-21length of the code", "SabRango, 2020-01-21XD!", "krystof_bruha, 2019-12-17@flockaroo thank you for the advice!", "flockaroo, 2019-12-16thanks guys!", "@krystof_bruha: sure, you'd just have to use some input from the microphone texture instead of \"0.003\" in line 71 - Buffer A.", "krystof_bruha, 2019-12-16it looks beautiful! Would it be possible to change the mouse input for a microphone?", "Shane, 2019-12-12Very nice. I've played around with algorithms along these lines before, but they never turn out as nicely. When I get time, I'm going to look this over and find out why.", "Gemmin, 2019-12-04amazing, so calming", "flockaroo, 2019-11-29thanks, man! love your truck! :-)", "BigWIngs, 2019-11-28oohhh.. so smooth. I love it!", "Spotwich, 2022-02-18omg", "gm_big_city", "UrbanClubProfessional, 2020-11-13Oh, it does work!", "jarble, 2020-11-13The framerate improves slightly when I replace (abs(distAndMat.x) < smallVal) with (abs(distAndMat.x) < smallVal*(1.0+t))", "UrbanClubProfessional, 2020-11-11This shader has been remixed by me here: https://www.shadertoy.com/view/wscfW4", "UrbanClubProfessional, 2020-11-11This shader has been remixed by me here: https://www.shadertoy.com/view/wscfW4", "ollj, 2018-10-08the space-folding of the cars into a single vehicle sure is something special.", "", "Cubeleo, it seems that noise2d() is fine with a NaN-input-value, possibly because it is noise anyways. and it is explicitly only using fract() and floor() parts of the input.", "", "this begs the question what is fract(infinity) and what is floor(infinity), in the context of sphere-projections. it seems to be just fine, in all contexts?", "ttoinou, 2018-07-20Featured in this video  !", "youdiansao, 2018-04-18niubi\uff01\uff01", "Cubeleo, 2017-12-05In reading this shader, I noticed that the fog calculations pass rayDir.y == 0 to GetEnvMap, and then all the lines with /rayDir.y are dividing by zero.  It seems like this is just producing an output of 0, resulting in a clean image, rather than some flavor of NaN/pure white/garbage bits.", "otaviogood, 2016-07-21@pix - Changing the value of PI will actually change the textures on the sides of the buildings. You'd probably only notice close up. It will also affect the manual camera mode, but that has to be turned on (line 16).", "pix, 2016-07-18Also congrats that this toy was used in davidbargo's SH16B Speed challenge https://www.shadertoy.com/view/ltt3z7", "pix, 2016-07-18It's interesting that any value of PI  (3.14, 0, -1000, +1000) seems to have no baring on the final image.", "Phi, 2016-05-03Very, very beautiful shader!", "dr2, 2016-04-18Traffic lights available in", "https://www.shadertoy.com/view/XljXR3", "ollj, 2016-04-18longing for a stepping functiin that allows to switch traffic lights over time, with cars obeying the stepping function.", "otaviogood, 2016-04-06To speed it up, you can try bringing down maxDepth on line 510. Also cut the ray march iterations,line 514. Try getting rid of antialiased procedural texture on line 638. And if that's not enough, get rid of ambient occlusion, line 573.", "Simplo, 2016-03-29Sorry for the double comment.. the forum told me they weren't posted", "Simplo, 2016-03-29Very great job Otavio! Thank you! It would take me about 1500 years to do something similar!", "My poor PC is struggling with FPS. Any suggestion for increase FPS?", "I just need an high visual, so I think I can do without cars, lines o the road and many reflections if it helps.", "I tried turning off cars and road, but it seeems FPS is always low.", "Thank you in advance if you want to help me.", "Simplo, 2016-03-29Very great job Otavio! Thank you! I was looking for a realtime skyline to use in my pojection and yours is perfect. It would take me about 1500 years to do something similar!  The only matter is that I need to use it in realtime and my poor PC is struggling with FPS. Any suggestion for increase FPS? I think I can do without cars, lines o the road and many reflections if it helps. I just need an high visual. I tried my patentend attempt, commenting random code, but it doesn't worked!  Even turning off cars and road FPS is always low.  Thank you in advance if you want help me.", "Bers, 2016-03-10Wow, so many details! Superb at dusk/sunset.", "jt, 2015-12-15Very cool!", "meta, 2015-12-02Dude.", "VJSpackOMat, 2015-11-034k uhd 2160p rendering https://www.youtube.com/watch?v=asxGdILn8kk", "lowww, 2015-10-28this is so good that makes me wanna quit my job as a programmer, because I will never be able to do this. cogratulations looks great.", "Andre, 2015-10-08Wow amazing.", "You should make GTA6 if you can make this in just 17.7K you could probably do the whole world in the 60GB they use for GTA4 ;)", "MacSlow, 2015-10-07I'm floored... \"just\" a fragment-shader... very impressive!", "jackdavenport, 2015-10-07I have no words. This is absolutely incredible! A phenomenal use of only two triangles", "yamahabob, 2015-10-06Incredible detail, and so inspiring!!", "tsherif, 2015-10-06This is nuts.", "dcoombes, 2015-10-06Mind blown!!!", "dakrunch, 2015-10-06Wow, that's something i could look at for a long time", "AndrewNZ, 2015-09-30That is just insane my friend.  Much kudos to you!", "dila, 2015-09-27really amazing, love the sunset", "P_Malin, 2015-09-25Wonderful! The procedural architecture is awesome. I love the minimal car model and reflections! This was on my shadertoy bucket list too. Maybe I don't need to bother now", "I would hate to be driving East-West in this city.", "GregRostami, 2015-09-25HOLY SH**!! Stunning!", "EvilRyu, 2015-09-25WOW..my jaw dropped", "shaderology, 2015-09-24phenomenal!", "consoleartist, 2015-09-24That is incredible. I would recommend adding fresnel reflections to the windows as it would make this rock even more ;)", "poljere, 2015-09-24Insanely good!", "otaviogood, 2015-09-24If anyone has any questions about how it works, let me know and I will try to explain and / or comment the code. I tried to make sure it's commented and has descriptive variable names so people can understand, but it is a bit complicated.", "public_int_i, 2015-09-24Wow the sunset is perfect, beautifull job Otavio .", "vgs, 2015-09-24So much detail! And such a smooth framerate!", "Mind blowing!", "VJSpackOMat, 2015-09-24the shader of the year ;) incredible fast even in fullscreen!", "Dave_Hoskins, 2015-09-24Very beautiful and detailed! The window reflections make it for me, plus thousands and thousands of cars...", "[ I wouldn't want to live there though, I can almost hear the noise and feel the smog in my lungs]", "weyland, 2015-09-24WOW, it even does 'Manhattanhenge' <3", "4rknova, 2015-09-24Amazing!", "SharkyUK, 2015-09-24Superb and beautifully realised!", "aiekick, 2015-09-24WOW !!", "Nrx, 2015-09-24Waoooo... just amazing!", "dr2, 2015-09-24Amazing... But you forgot the car number plates inscribed with runic symbols.", "otaviogood, 2015-09-24Thanks.  I'm happy the cars look as good as they do. They are very simple. Each car is 2 boxes with a smooth blend and a mirrored cylinder. That's about all I could afford.", "iq, 2015-09-24This is pretty amazing! I love it when the camera is at street level.", "FabriceNeyret2, 2015-09-24wow ! and even the cars !", "(I'm sure the woman in red dress is somewhere :-p )", "Shane, 2015-09-24This is pretty awe inspiring... and given the complexity, the framerate is so good, it leaves me a little mystified.", "nimitz, 2015-09-24Just...WOW..", "scherzo, 2018-06-13line 17 : vec3 p = init + s * pow(s, 50.0*(sin(time*0.01)*0.5+0.5)) * vec3(uv, 0.05);", "Dave_Hoskins, 2015-11-16Thanks. There's a lot of small changes that can alter the whole thing in unexpected ways, which is all part of the fun, of course.", "834144373, 2015-11-16Haha!", "Great again!", "the \"(iGlobalTime-1.0)*60.0\" looks perfect !", "It is like the light of god appeared gradually.", "Shane, 2015-11-16This is great. I'm still amazed by the simplicity of that fractal star algorithm, or whatever it's officially called. Moving a camera through a bunch of streaked, layered cylinders can give interesting results too.", "Dave_Hoskins, 2015-11-13But then it won't have that blue flash I like near the beginning.", "834144373, 2015-11-13here:", "float time = (iGlobalTime+20.)*60.0;", "->", "float time =  iGlobalTime     *60.0;", "jarble, 2020-12-11I modified this shader to improve the rendering speed. It renders much faster if I slightly decrease the raymarching precision with each step.", "ollj, 2017-08-11[This comment has been hidden by the shader author]", "kev7774, 2017-01-05\"Same concept as Elevated\" - What? This one has overhangs and even bridges! Now I'm poring over the code trying to figure out how you did it.", "Phi, 2016-04-23Very beautiful shader, I like it so much !", "marsermd, 2015-06-23omfg. Can it BE more cool? Four textures, four hundred lines of code, 1 rectangle. 1 WHOLE WORLD!", "henry, 2014-12-02I just switched on the Interstellar soundtrack by Hans Zimmer and this page popped up, and it's a great combo. gliding an alien world listening to planet coloniser film kindof music.", "Dave_Hoskins, 2014-05-20(BTW, it crashes Win7 Chrome 'Canary' build here)", "rafacacique, 2014-02-19OMG man, this is insane. Really building worlds with 2 triangles!", "iq, 2014-02-14The same thing rendered to video:", "Dave_Hoskins, 2014-02-13There's some lovely areas in there, and it's fun playing with the textures. I'm getting distance-field related problems around the tops of things, its only minor though. Beautiful lighting as usual.", "gloom, 2014-02-12PS: didn't mean to report your shader, but web conventions kind of dictate that you ask for a confirmation on such things - especially on icons that might mean a lot of different things", "gloom, 2014-02-12Dear lord.", "jcyuan, 2022-04-20so realistic water.", "yuletian, 2020-04-01Nice water", "oskaryy, 2020-03-12", "it's interesting", "oleek, 2020-03-10I like it", "cailuming, 2020-03-06great, try to learn it", "Disati, 2020-02-22Ultra Quality is jaw-dropping.", "jmc, 2020-02-19Hi Paul,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "ttoinou, 2018-07-20Featured in this video  !", "zproxy, 2017-11-30360 at", "P_Malin, 2017-08-14Hi yann. Sorry but I'm afraid that not is something I'd be able to take on right now.", "yanntayasui, 2017-08-14Hi,", "I'm looking for a coder to customise and write some shader for an artistic project.", "Would you be available for such a job ?", "Best regards,", "yann", "P_Malin, 2016-02-19I made a version with postfx here: https://www.shadertoy.com/view/XdG3zd", "P_Malin, 2016-02-17Sorry rafacacique, I'm not sure what to suggest. Unfortunately shader compilers get a bit quirky with shaders of this size. This is one of my more compatible long shaders", "P_Malin, 2016-02-17Thanks Dave, that works really well. I added a define to enable it.", "Dave_Hoskins, 2016-02-11If you want to get rid of the textures, try using nimitz's triangle noise function:-", "https://www.shadertoy.com/view/4ts3z2", "", "float tri(in float x){return abs(fract(x)-.5);}", "vec3 tri3(in vec3 p){return vec3( tri(p.z+tri(p.y)), tri(p.z+tri(p.x)), tri(p.y+tri(p.x)));}", "", "float triNoise(in vec3 p)", "{", "float z=1.4;", "float rz = 0.;", "vec3 bp = p;", "for (float i=0.; i<=4.; i++ )", "{", "vec3 dg = tri3(bp*2.);", "p += dg;", "", "bp *= 1.8;", "z *= 1.5;", "p *= 1.2;", "", "rz+= (tri(p.z+tri(p.x+tri(p.y))))/z;", "bp += 0.14;", "}", "return rz;", "}", ".............", "// Calling example...", "surface.m_normal = normalize(surface.m_normal +triNoise(surface.m_pos*2.));", "surface.m_albedo = vec3(.9,.65,.45)*triNoise(surface.m_pos*1.3)+vec3(.2, .1,.05);", ".............", "rafacacique, 2016-02-10Ah, bummer, it's not working on my machine  its a GTX 750i. It looks so awesome!", "In the shader window, I get: \"Failed to create D3D shaders\"", "In the chrome inspector window, I get:", "1476BE09]GL ERROR :GL_OUT_OF_MEMORY : GetProgramiv: <- error from previous GL command", "Any ideas?", "otaviogood, 2016-02-09Nice looking water. I missed this the first time around. Maybe I only saw it before all those additions you made based on the comments.", "P_Malin, 2015-09-17Thanks Shane!", "I quickly put some tri-planar mapping in. Yes, improving materials is generally a pretty cheap way to improve quality (compared to additional raymarches etc.) as the code is only evaluated a few times per pixel. It's a good idea and I'll definitely have a think about it. I'd love to replace the terrain texture with something procedural as it is the only texture read left in the shader.", "Shane, 2015-09-16I love this, and it seems to be faster than when I first looked at it. I like how you've done the riverbed.", "", "I was playing around with the code by mixing in an extra texture and applying some bump mapping. You're probably pushed for cycles as it is, but the extra detail really sets it off. In fact, just swapping the XZ mapping for tri-planar texture mapping mapping gives the terrain a little extra dimension. No pun intended.", "P_Malin, 2015-09-15Now with animated FBM for the water normal (instead of a texture). Each octave of FBM applies a different scaling of the flow direction vector. Using FBM means the water no longer tiles and I can do interesting things by adding the derivatives in the FBM differently for foam vs water (more peaks for foam and more rounded shapes for foam).", "P_Malin, 2015-09-14Ok I simplified the flow and foam a lot (thanks Fabrice), updated the lighting and fog and added ENABLE_ULTRA_QUALITY - try this option if you have a fast GPU!", "P_Malin, 2015-09-13Aah yes, that was one of this shader's many special and unique bugs. Hopefully that one is fixed.", "Dave_Hoskins, 2015-09-13Very cool. Removing the foam define just seems to remove the reflection of the sky for me...", "P_Malin, 2015-09-13Yeah, my laundry list for this shader is pretty big. Right now I also have actual laundry to do", "dila, 2015-09-13really nice, though only the thumbnail runs at full framerate for me", "FabriceNeyret2, 2015-09-13advertising: for a complete interactive faked flow, see http://maverick.inria.fr/Publications/2009/YNBH09:-D .  (but not really adapted to shadertoy).", "FabriceNeyret2, 2015-09-13very nice !", "", "You might try to add a faked force field to prevent water to traverse rocks. e.g., with A the angle from upstream (assumed to be y positive axis) and V the velocity modulus, add a term dv = V * vec2( sin(A),abs(cos(A)) ) * smoothstep(dmin,dmax,d)", "iq, 2015-09-13I'd add a bit moreforam, specally when the water intersects the terrain or the mini islands", "iq, 2015-09-13Wow!!! So good!!", "Pingas, 2020-08-06vec3 map( vec3 p )", "{", "mat3 rot = mat3(", "vec3(cos(1.0), sin(1.0), 0.0)", ", vec3(-sin(1.0), cos(1.0), 0.0)", ", vec3(0.0, 0.0, 1.0)", ");", "", "float k = 1.0;", "float m = 1e10;", "for( int i=0; i<22; i++ )", "{", "p = rot* p;", "", "m = min( m, dot(p,p)/(k*k) );", "p = (mm*vec4((abs(p)),1.0)).xyz;", "k*= s;", "}", "", "", "float d = (length(p)-0.25)/k;", "", "float h = p.z - 0.35*p.x;", "", "return vec3( d, m, h );", "}", "jaapzwart, 2019-04-28Yeah, but it is nice anywayzzzz.", "ollj, 2018-10-08there are faster and better ways to do mountainous terrain than with a kaleidoscopic fractal of a few (dozen) iterations.", "", "terrain is usually fine with (a long permutation of a few samples of different primes of) shorter intervals, than an aperiotic kaleidoscope.", "terrain is usually fine with 2d (spherical) uv (height) mapping, whereas most KIFS are nowadays in 3d.", "the upper bound of traversing a (teselated) height-map is much faster than traversing a (CSG) kifs.", "", "terrain doesn't even need a good/slow/filtered hash to look good, white noise suffices.", "terrain benefits a lot from analytic derivatives, which seems much trickier (or at leas less common to do) for a kifs.", "", "Kifs do shine a bit in modelling more organic streets of old capital cities with lots of straight roads and a lot of different intersection angles, like paris.", "henry, 2016-11-27Can you please plot clever raycast an X*Y array of these to decorate a landscape of mountains? perhaps it's possible to plot them as X-Y array so that there can bi giant fields of them growing like plants? There are cone ones, round ones, spiral ones, horn ones, so it would make sense to do them around a landscape? is it computationally expensive because for every dot you have ot do 5 times more ISOsurface tests to see which fractal is at the forefront in every raycast? IS THERE A CLEVER RAYCAST FAST WAY TO DO X-Y ARRAY OF THOSE?", "ph0ng, 2016-10-29This is absolutely incredible work. I can't believe it's rendering at 60FPS.", "Atrahasis, 2015-12-01wow !!", "jt, 2015-10-30fantastic!", "iterationsteppa, 2014-07-20 boohoo, i can't fullscreen it. it's very amazing because the colors and lighting are fairly organic, same as a coral reef sea cucumber coloflower type thing.", "cyanux, 2014-06-14Fractal beauty!", "rogerdahl, 2014-05-18This one just completely blew me away. Wow!", "eniac, 2013-11-15simply amazing... so much to learn here, i'm at a loss for words. you guys are all really talented, this site rocks!", "iq, 2013-09-21Well, I started in computer graphics with fractals, so it's always good to come back. Higher quality render here (make sure you play it in HD):", "PatHightree, 2013-09-19Absolutely mesmerizing", "emin, 2013-09-19Amazing!", "PauloFalcao, 2013-09-19Beautiful!", "DwayneBrah, 2023-02-07This is beautifully organic. Wow.", "Tara, 2021-10-10@Rapideye: Ahh, I see. I'm afraid I can't really help with that, sorry.", "Rapideye, 2021-10-05@Tara thanks for the link, however, i know how the basic reaction diffusion works, but results dont usually look that detailed. i was wondering what exactly makes this particular RD how it is. maybe it is the vortex_pair_warp aspect, i'm not sure what is the purpose of that.", "Tara, 2021-09-11@Rapideye: This video might help: https://youtu.be/BV9ny785UNc", "Rapideye, 2021-07-08really cool, do you have any documentation or description on how everything works together?", "Tara, 2020-11-13@ollj: You have to hit the \"reset time\" button. I am experiencing the same behavior with any sound cloud shader.", "ollj, 2020-10-10and now it works again, strange hickup", "ollj, 2020-10-10this used to work up to 1 years ago, but now its just a yellow glow dot.", "I tried multiple browsers, i upgraded my graphics card.", "cbrpnk, 2019-02-17Whoa. I really have to look into reaction-diffusion.", "Daimoth, 2019-02-01Reminds me of Beksinski's work for some reason. It's the wrinkled skin thing, I think.", "NAME_REDACTED, 2019-01-14Fantastic!  Looks just like an effect I saw at a Pink Floyd show.", "Glcomar, 2018-10-25Shader of power!", "desertbeaver, 2018-10-25Has anyone tried this is TouchDesigner? I can't get this result due to the loop in Buffer A", "ollj, 2018-10-08this does not compile in all my environments, it seems i actually need Angel-parsing enabled to parse this (in non-native opengl)", "Nackgi, 2018-09-21Incredible!", "thewhiteambit, 2018-09-13i love this one", "sameloop, 2018-03-04That is amazing. Trippy AF", "smkgames, 2018-02-10Super nice!", "frideal, 2017-10-11so beautiful.", "DeMaCia, 2016-10-07so beautiful!!!", "sherwood, 2016-05-10Wow!", "", "Is there a way to control the speed of the reaction?", "laserss, 2016-04-17fucking pure art", "dila, 2016-04-17Looks amazing", "obuhhh, 2016-04-14Magic... :o", "Flexi, 2016-04-14@tajjada: I actually use a R9 280X and Win10 64 bit myself. That should not be the problem. It could happen though that the noise texture is not yet loaded on the first try and you must restart it with F5.", "tajjada, 2016-04-13Hmm. I am not seeing anything happen. The shader doesn't seem to be working for me. Maybe it is my driver?", "", "GPU: AMD Radeon R9 Nano, OS: Win10 64-bit, Driver: latest AMD Radeon Crimson.", "", "Are all of you guys using NVIDIA or something? Nobody else on AMD? ;)", "quisten, 2016-04-12instant love!", "StoneFinal, 2016-04-12Amazing!!!", "candycat, 2016-04-12Wow!", "ciberxtrem, 2016-04-12Super cool!", "taitomagatsu, 2016-04-12The sheer beauty of this... <3", "calx, 2016-03-10Amazing.", "lowww, 2016-02-29beautiful!", "Shane, 2016-01-18Gorgeous effect.", "", "Thanks for posting this. I wanted to make a reaction-diffusion based shader at some stage, so your code is really helpful... Much better than the way I'd planned to go about it.", "knighty, 2016-01-10So awesome! so fast!", "newemka, 2016-01-08Shadertoy's fullscreen should hide the mouse pointer.", "Eybor, 2016-01-08Nice, love it!", "Dave_Hoskins, 2016-01-08It looks like ice forming.", "iq, 2016-01-07Very pretty!", "aiekick, 2016-01-07ho my god", "Tetane, 2016-01-07Awesome work, I love it!", "The normal mapping of the light looks really cool on this.", "poljere, 2016-01-07Seriously, beautiful.", "SebH, 2023-05-09@ngodrich you can use it yes, this shader is \"public+api\".", "ngodrich, 2023-04-11@SebH sorry, I forgot to add: it's a non-profit!", "ngodrich, 2023-04-10Hello, this is amazing! I'd love to use it on my website - might you be so kind to give permission? I would of course credit you as the author.", "jt, 2022-10-16Wow!", "SebH, 2020-07-23@arycama Hi, yes it works for any type of ray marched volumetrics, especially if you are trying to follow the physically based principles of volumetric lighting (you need a correct extinction sigmaE value anyway)", "arycama, 2020-07-22Fantastic! I'm working on a Unity implementation of this at the moment for an upcoming game.", "", "Would the analytical integration improvement also work for calculating atmospheric scattering? (And would it provide any benefit, eg under heavy mie-scattering?)", "yamanee, 2020-04-03Sorry, silly question I should have look at the comments first. Thanks for sharing that shader !", "yamanee, 2020-04-03Hey ! Very nice work ! I'm trying to fully understand the code and I'm not quite sure what the dd variable represent in the traceScene function. Is it the next step size ? I mean, shouldn't we integrate with the current step size and not the next one ?", "starea, 2019-12-17Great work! Simple and effective!", "Ecter, 2019-10-09@YangR If I understand correctly, they are just using something called an Isotropic phase function, the probability of scatter is the same in all directions, http://www.pbr-book.org/3ed-2018/Volume_Scattering/Phase_Functions.html.  Henyey-Greenstein (or HG) does not have the same probability in all directions, and can create more interesting effects, but this is just a demo.", "YangR, 2019-10-09Hi, It's really an impressive shader and a beautiful scene!!", "I want to ask somehow a silly question, I read about the pixar paper that u provided about volume rendering, the paper says that the most widely used phase function is Henyey-Greenstein phase function, but as far as I can see that your phase function is just about 1/4Pi, I am wondering how can this function works too?", "SebH, 2019-06-06Good if getting there! You are welcome, happy if all hose things help you!", "", "- first line you mention: yes this is lighting on opaque.", "- second line: blending of participating media over opaque yes (assuming grey shadow). And yes That blend over any background. This shader toy feature a color medium and shadow https://www.shadertoy.com/view/MdlyDs.", "johnyboy94, 2019-06-06Ah I think I can manage by looking at your code. It's becoming much clearer now.", "In fact I already implemented the improved scattered light formula yesterday and it fixed extreme varying in luminance ( I can't afford enough steps to converge the other way, it's supposed to run real time so it's 64 for now, maybe more after some optimization lets it happen).", "Is this", "\" vec3 color = (albedo/3.14) * evaluateLight(finalPos, normal) * volumetricShadow(finalPos, LPOS);\"", "accounting for opaque objects (walls here) and then combining them with the influence of participating media", "\"color = color * scatTrans.w + scatTrans.xyz;\" there?", "I'm wondering should I just blend with some predefined sky background color instead in a similar manner, as this tool assumes no opaque objects behind clouds.", "Thank you for the slides, notes and the texture tool, it's very educational and fun to follow em!", "SebH, 2019-06-06Hello,", "The integration loop is in that shadertoy in the traceScene function. sigmaS and sigmaE are the scattering and extinction coefficients and dd is the stepSize. Also do not forget to compute the transmittance from light to the current sample to get correct shadowing (see volumetricShadow).", "", "That is all that should be needed for single scattering integration with raymarching. If you post your shader somewhere maybe I can have a look yes.", "johnyboy94, 2019-06-05Hello. I read your presentation about Frostbite's physically based sky. I am trying to make a tool for generating clouds and am struggling with light calculations right now... I was hoping you could help clear something up for me.", "Scenario - camera is at the ground, I intersect two spheres with each ray (planet center with radii of planet radius + cloud bottom/top) and then sample some textures in between to get shapes. Nothing too special. However, when I accumulate light it all goes WILD! Clouds either darken too quickly or everything is way too bright based on how I'm trying to do it.", "I'm trying to do it the way Real time rendering book explains - phase  * visibility * incident light * PI at each step for inscattering, exp(-density * stepSize) for extinction... don't want to blow this comment too long. If I put my shader here on shadertoy I was hoping if someone knowledgeable like you would give me a few pointers on why it's so wrong...", "I don't expect anyone to do it for me, but I simply lack understanding on how to combine these elements and how to integrate them properly, and a few tips on that would be great.", "Sorry for the novel size comment", "Duke, 2018-12-11Thanks for the answer. I tried to do this, but the result is not realistic enough. I'm trying to make a hybrid with the method I used in my previous shaders, but there must be a mistake somewhere. I will try to sort this out.", "SebH, 2018-12-04Hi,", "Indeed. You should just need to add the emitted radiance towards V to the scattered radiance in the S variable. Then the rest of the formula should automatically work. (never tested it but I do not see why it should not work today, it would be the proper integration over a range)", "Duke, 2018-12-04Hello,", "You have never mentioned adding emissions to your volume integration method. What is the right way to take it into account for this method?", "SebH, 2018-09-07ah indeed mu is supposed to be sigma, that was a mistake. I'll fix it, thanks!", "Ecter, 2018-09-07Thanks for the resources!  So mu is actually supposed to be sigma?  As far as I can tell none of those resources refer to coefficients using mu (\u03bc), but do use lower case sigma (\u03c3), though I may have missed something.", "SebH, 2018-08-29And while I am at it, I have also written the new chapter about volumetric rendering in the new edition of Real-Time Rendering book (among other things) https://www.crcpress.com/Real-Time-Rendering-Fourth-Edition/Akenine-Moller-Haines-Hoffman/p/book/9781138627000. If it helps", "SebH, 2018-08-29oh and to answer your last question, in scattering is the muS (scattering) coefficient. Out scattering is accounted by extinction (sum of absorption and scattering coefficients). It is all explained in details in the volumetric course (first link).", "SebH, 2018-08-29Hello,", "Thanks for your comment, I can try to help. I think you should read about physically based participating media representation. Here are some links", "- https://graphics.pixar.com/library/ProductionVolumeRendering/paper.pdf", "- https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/s2016-pbs-frostbite-sky-clouds-new.pdf", "- https://cs.dartmouth.edu/~wjarosz/publications/dissertation/chapter4.pdf", "Density is only a sub part of what makes participating media and this is the one actually making little sense. Particles property such as scattering and absorption together with phase function defines it in greater details. Over distance you care more about optical depth for instance.", "The 2015 Horizon presentation is not really physically based but more art driven: nothing wrong with that, just a different approach.", "Ecter, 2018-08-29what are muS and muE? Are those densities for a given value sample? It seems the only difference between muS and muE is that muS is allowed to be zero.   The frostbite slides mention \"extinction over range\" which makes very little sense.  According to other cloud renderers based uppon the 2015 Horizon Zero Dawn presentation, muE would actually be the density over the distance, and is usually combined (since it has to be integrated) into \"density along light ray\".  And how do you account for in-scattering in this situation? I've not seen how this is accounted for in the frostbite slides either.", "zproxy, 2018-07-16360 at", "SebH, 2017-10-08Ok ok  I have updated the function now : )", "ollj, 2017-10-08vec3 evaluateLight(in vec3 pos)", "{", "vec3 lightPos = LPOS;", "vec3 lightCol = LCOL;", "vec3 L = lightPos-pos;", "return lightCol * 1.0/dot(L,L);", "}", "nimitz, 2017-06-15Just spotted a non-negligible speed optimization, in evaluateLight(in vec3 pos) you are computing the euclidean distance and then squaring it. It would be much faster to simply use dot(L, L).", "", "And thanks for sharing the technique in shader form, great stuff!", "rammoskar, 2017-01-17Beautiful", "archee, 2016-12-20amazing.", "tehsauce, 2016-08-07Amazing", "SebH, 2016-05-22Thank you all for the kind words", "aiekick, 2016-05-17wow i missed a great shader", "elzeru, 2016-05-17Super great !", "Jacoby, 2016-05-17Fantastic!", "tomorrowevening, 2016-05-17Wow! Beautiful, and love the options", "alexh, 2016-03-21Coooooool!  thank you!", "SebH, 2016-03-21@alexh ahah thanks. You can contact me at from http://sebastien.hillaire.free.fr/index.php?option=com_contact&view=contact&id=1&Itemid=55 and then you will get my mail automatically when I answer.", "alexh, 2016-03-19Master! how can I contact you?", "SebH, 2015-09-05Thank you all", "andru, 2015-09-05Really sweet", "Duke, 2015-09-02Wow!", "weyland, 2015-09-01The transmittance in the fog and the super smooth shadows are gorgeous", "public_int_i, 2015-08-31Really impressed by the speed of this, this is awesome.", "SebH, 2015-08-31Thanks!", "reinder, 2015-08-30wow, this is really nice", "me_123, 2022-10-10Geek temple", "ollj, 2021-05-25point/=scalarA;", "ollj, 2021-05-25instead of making false-perspective, how about putting a sphere inside another sphere. each sphere has its own distanceField, that is also scaled by a different scalar (before and after) mapInner() is the distance field, closest to the camera (whatever is in frame)", "mapOuter() is all background content (liminalSpace);", "", "#define scalarA 8.", "", "float mapOuter(vec3 p){ //only executed, when mapInner misses or reaches its zFar (which is the boundary between the 2 spheres that seperate FramedSpace from liminalSpace ).", "point*/=scalarA; // by shrinking down p, we scale up the distanceFieldision.", "float r=sdBox(p-BoxOffset,boxSize);", "return r*scalarA ;}", "", "//we may defer the r*8 scalar as much as possible. this may mean, that mapOuter() and mapInner() may have different epsilon for marching/derivatives/shadows , by simply scaling down the distanceField, by resacaling the Point and the disanceToObject.", "iq, 2021-05-25Took a quick pass and made it render 1.5x faster by adding some basic bounding volumes. It's 60 fps now in my PC at 1800x1013.", "niels747, 2021-01-28How is this even possible?", "LQC, 2020-03-14really amazing", "dmitrykolesnikovich, 2019-11-28666 lines?", "scratch13764, 2018-10-29I know all of your shapes are some kind of formula, so I made this with an online graphing calculator:", "https://www.desmos.com/calculator/ra2y0cpwp3", "leacasas, 2018-07-28Ridiculous... just ridiculous.. in a very good way", "ttoinou, 2018-07-21Featured in this video  !", "dila, 2017-08-28wonderful, works for me on Linux with Firefox (now the browser of choice for Shadertoy). too bad i only get 3.5fps!", "etale_cohomology, 2017-07-27Compiles on Windows but not Linux (with a Titan X):", "", "'texelFetch': no matching overloaded function found", "jt, 2017-05-10wow", "BigWIngs, 2017-05-09That's gorgeous!", "flockaroo, 2017-04-29boah! jaw is dropping...", "shau, 2017-04-27I've been itching to see this as I'm having similar problems to gtoledo2 with new WEBGL on older mac. New PC loves it. The wait was worth it. Most impressive IQ", "gtoledo3, 2017-04-26Oh, ok.", "", "No, OS X El Capitan, Safari browser. Maybe relatedly, Shadertoy basically does not work in Chrome anymore. Not sure if it's a new WebGL standard, or what exactly changed.", "iq, 2017-04-26texelFetch( tex, px, 0 ) ---> textureLod( tex, vec2(px)/iResolution.xy, 0.0 )", "", "But.... are you running on a phone or something?", "gtoledo3, 2017-04-26What do you think is the most efficient way to replace texelFetch on non supported machines?", "starea, 2017-04-25Wow, this is beautiful! Really wish the coding session for UPENN is recorded and available online!", "iq, 2017-04-25Youtube video for those with slow computers", "masterxilo, 2017-04-24This is stunning.", "knarkowicz, 2017-04-24Incredible!", "P_Malin, 2017-04-24Beautiful results! Great composition and fantastic lighting iq. Inspiring as always.", "pthextract, 2017-04-24Nice aestethics. Postcard.", "Shakemayster, 2017-04-24Inspring, beautiful shader!", "iapafoto, 2017-04-24iq quality shader", "but just 2.5 fps on my poor laptop", "Shane, 2017-04-24 Awe inspiring.", "tehsauce, 2017-04-24There really ought to be a shadertoy museum or art gallery of some kind", "nolibab, 2017-04-23wow!", "Virgill, 2017-04-23IQ has super human abilities!", "mmerchante, 2017-04-23I love that fake GI! Runs at 40fps on a 1070m.", "", "Thanks for the coding session btw, your work is inspiring!", "frzi, 2017-04-2321 fps with a GTX 1080. Canvas size 1200x675.", "This beautiful shader is worth every sacrificed frame. \ud83d\udc4c", "aiekick, 2017-04-2310.6 fps with angle 16 fps with openg on 750 ti. nice shader as usual", "balkhan, 2017-04-23Beautiful ! Love the sunset.", "Same performance issues as maurogik on same graphic card.", "GregRostami, 2017-04-23OMG!!", "Yrai, 2017-04-23Hory shitoo..", "PauloFalcao, 2017-04-23Beautiful! Awesome work!", "Maurogik, 2017-04-23That looks fantastic ! (though 4 fps on my 660 laptop, I'll have to try it at work ;) )", "kuvkar, 2017-04-23Looks awesome! 50fps on my desktop.", "iq, 2017-04-23Fixed the function name. Your machine must be broken, I get 30 fps in my laptop...", "ollj, 2017-04-23line 315 textureCube(), what? well it is reserved namespace. should rename the function", "", "0.2 fps in a small preview. looks like iq is back to still images.", "jeyko, 2020-12-20i think(?) the shadertoy api was changed a bit and now line 79 should be", "if( iMouse.z<=0.00001 ) mo=vec2(0.0);", "Zibri, 2017-09-27Hmm interesting.. add music to channel1 then shake it in rythm", "I did:", "// shake", "ro += 0.1*(-1.0+2.0*textureLod( iChannel1, iTime*vec2(0.010,0.014), 0.0 ).xyz);", "ta += 0.1*(-1.0+2.0*textureLod( iChannel1, iTime*vec2(0.013,0.008), 0.0 ).xyz);", "But I know nothing about shaders and sure it could be done better...", "CaliCoastReplay, 2016-08-10Brilliant movie quality stuff", "FabriceNeyret2, 2015-10-23it is to break the correlation between components.", "e.g. with x+y, all the points along (k,-k) would have the same value !", "drone1, 2015-10-23Can someone help me understand the significance of the numbers 37.0 and 17.0 in the noise function on this line?", "", "vec2 uv = (p.xy+vec2(37.0,17.0)*p.z) + f.xy;", "", "If I mess with them at all, I begin to see artifacts -- but I'm not seeing how they might relate to texture resolution or something of that nature. Thanks a lot!", "vtlmks, 2013-10-16Yeah, Hell it is, I recognize it from my last trip there.. ;) Awesome!", "vtlmks, 2013-10-16Yeah, Hell it is, I recognize it from my last trip there.. ;) Awesome!", "movAX13h, 2013-09-04", "triggerHLM, 2013-08-09Hell Yeah! This is freaking sick and has great performance", "Antonalog, 2013-08-04that rulez!", "iq, 2013-08-01No, not at all. I simply didn't clean the code, I published it in a rush as soon as I found something interesting. Let me clean that and the rest of the code.", "FabriceNeyret2, 2013-08-01man, you are so good at tweaking parameters !", "BTW, what is the treak behind these -1.0*vec3() on lines 31..36 ? multiply faster that sign change ?", "poljere, 2013-08-01Beautiful", "simesgreen, 2013-08-01Very nice, the shaky camera really adds to the feel of it!", "JoeShader, 2022-02-13@RaphaelK12 - I have similar problem after testing. My input is a relatively small 16x9 single channel texture populated with similar values i.e. it has low dynamic range. I am trying to interpolate and rescale this to 1920x1080 resolution. Is there a known solution to this?", "RaphaelK12, 2021-04-16For textures with high variation, such as noise textures, this technique works very well, but unfortunately for common textures it doesn't work, it gives a pixelated aspect.", "I was so happy to see such a good result and decided to do the tests, I wanted to remove the bilinear artifacts from the normal map textures without using an expensive bicubic function, unfortunately in my case the results were worse than bilinear filtering on softer textures, but being very useful only in textures with high variation, as a texture for fine details.", "spawner64, 2021-02-15You're totally right, it is faster. I've added a + vec2(i) to both expressions just to keep both in the loop and I get the cubic actually being ~2X faster than the sine. Though I wonder about the glitch. Why isn't the cubic expression taken out of the loop, since by all means it can be cached.", "iq, 2021-02-15I usually prefer the cubic over the raised cosine (https://en.wikipedia.org/wiki/Raised-cosine_filter) because it's slightly faster (about 1.25x times faster in my measurements). I think your code is not measuring what you think it is measuring. You always get maximum framerate with the sin() version because the compiler is taking it outside of the loop, since the  expression doesn't change with the index i. For some reason the cubic version is not being taken out, seems like a glitch in the Angle compiler. Try doing uv a function of uv (init uv to fuv) so you actually force the computations to happen in each iteration, and you should be able to reproduce the 1.25 speed up I am seeing.", "", "Anyways, the raised cosine is a good option if you need continuity in higher order derivatives.", "spawner64, 2021-02-15@iq: Why no use sine interpolation? GPUs are very efficient at computing sin(). By replacing the smoothstep (fuv*fuv*(3.0-2.0*fuv)) with sine interpolation (sin((fuv - 0.5) * 3.141592653589) * 0.5 + 0.5) you get similar visual results, but 35X! faster (I get 2fps vs 70fps):", "", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "vec2 p = fragCoord.xy / iResolution.x;", "vec2 uv = p * 0.1;", "", "float textureResolution = 64.0;", "uv = uv*textureResolution + 0.5;", "vec2 iuv = floor( uv );", "vec2 fuv = fract( uv );", "vec2 fuvAcc = vec2(0);", "int numSamples = 2000000; // you may want to start with very low value (10K) and gradually increase in order to avoid freezing", "for (int i = 0; i < numSamples; i++) {", "#if 0", "uv = fuv*fuv*(3.0-2.0*fuv); // 2.0 fps on 1080Ti with 2 mil. samples", "#else", "uv = sin((fuv - 0.5) * 3.141592653589) * 0.5 + 0.5; // 70fps on 1080Ti with 2 mil. samples", "#endif", "fuvAcc += uv;", "}", "", "fuvAcc /= vec2(numSamples);", "uv = iuv + fuvAcc;", "uv = (uv - 0.5) / textureResolution;", "vec3 colB = texture( iChannel0, uv ).xyz;", "fragColor = vec4( colB, 1.0 );", "}", "nimitz, 2014-10-27Finally got around to reading that article (I needed quality filtering). This is great stuff.  paniq: it is indeed the exact same thing, but iq's version gives a loc with two less ADD instructions.", "paniq, 2014-05-19smoothstep(0.0, 1.0, fuv); does about the same thing as fuv*fuv*(3.0-2.0*fuv); right?", "CPU, 2013-04-24Very useful for fine detail where every pixel counts! Are there any optimisations that can be derived from this code that can be used for the 'bump' lighting calculation, perhaps with a view to using noise rather than image? it would be good to use the hardware derivative functions but i believe they have discontinuity between the blocks of four?", "grzesieKRK, 2020-08-13It doesn't display for me,  but I trust it's great ;)", "Janek232, 2020-08-07My father-in-law is an astronomer. I'll show it to him", "xiewei, 2020-06-23wow!!!", "jannw, 2020-06-22Sehr sch\u00f6n!", "Maartia, 2020-06-18Like a star :P", "maziulka11, 2020-06-16I like this!", "caroline89, 2020-06-15Ah, the memories! Nice one!", "LeoMakesMusic, 2020-06-13Beautiful!", "noshade, 2019-07-08visually impressive narrative complemented by excellent audio, good work", "ttoinou, 2018-07-21Featured in this video  !", "cabbibo, 2017-08-10@ttoinou I would be honored if you used it!!!", "ttoinou, 2017-08-10Hi cabbibo, I'm doing a Shadertoy Best Of video could I use this shader in it ? thx", "starea, 2017-04-13This is fantastic!", "CaliCoastReplay, 2016-08-06Oh my.  This impresses.", "cabbibo, 2015-06-05@StoneFinal thanks!!! also, @triynko , good call! I wish that I had thought of that during development", "triynko, 2015-06-05Change line 160 to take the mouse position into consideration for an excellent angle.  Just add \"an +\" inside the cosine function like so:", "float x = ( timeInLoop/2. + 2. ) *cos( an + 1.3 + .4 * timeInLoop - .3 * extraSweep );", "", "Withing clicking at all, it still looks great, but you can also just click near the middle of the animation and try dragging left or right for some nice angles.", "StoneFinal, 2015-06-05Cool", "cabbibo, 2015-03-28@coyote Thanks so much! It actually fixed a few other visual problems I was having on other machines as well!", "coyote, 2015-03-26Phenomenal!", "Btw, some small changes are needed in both image and sound part for it to work correctly on my mac mini.", "Image:", "vec3 planet (line 32) needs initialisation.", "Sound:", "vec2 sig in sineLoop (line 184), and vec2 sig in chimeTrack (line 202) need initialisation too.", "tholzer, 2015-03-25surprising wonderful - but the end sooo sad and dark... :-(", "cabbibo, 2015-03-24@vgs Thanks! Its nothing compared to that creepy bacteria you made though", "cabbibo, 2015-03-24@Dave_Hoskins thanks so much! Your work has been really really inspirational to me!!!", "Dave_Hoskins, 2015-03-24Coooool!", "vgs, 2015-03-22this is the most awesome shader I've seen in a long time! =D", "Reymenta, 2015-03-21Cabbibo rocks!", "poljere, 2015-03-21Congrats for winning the Shadertoy Hackathon at NVScene 2015!", "Branch, 2015-03-20shiet dude", "iq, 2015-03-19woooooooow", "cabbibo, 2015-03-19@iapafoto @cpu Thanks!!!! By this time tomorrow is should be finished for real!", "iapafoto, 2015-03-19wow very classy", "CPU, 2015-03-18very cool!", "iq, 2021-07-13Fixed, thanks for letting me know", "abje, 2021-07-13mouse drag doesn't work because iMouse.w has changed, but if you swap it with iMouse.z it works just as before. you already know this of course.", "", "everything about this shader is excellent, the colors are really nice and the heightmap has a lot of energy.", "felipunkerito, 2018-09-30Damn this is a technical master piece it runs at 60 FPS on my shitty mac on fullscreen!", "ollj, 2018-09-24[This comment has been hidden by the shader author]", "jorge2017a1, 2018-02-20sorprendente tu codigo, se puede trasladar este codigo a vb6!!!", "iq, 2014-07-09Hm, I don't think so, this was inspired by https://www.shadertoy.com/view/4djGWR which is a 3D grid traverser. So I decided to make it 2D, which is even faster. Viusally, inspired by https://www.shadertoy.com/view/Msl3Rr", "nimitz, 2014-06-25Out of curiosity. Was that inspired by \"Random spheres\" from chalky?", "https://www.shadertoy.com/view/4s23zR", "iq, 2014-02-03yep indeed", "fb39ca4, 2013-12-14You could make an optimized version of Cubescape using this.", "rgbk, 2013-12-12Saw this on twitter. Had to heart it.", "rabit, 2013-12-11Amazing!  Reminds me of Texas by Keyboarders but a lot less terrifying.", "optika, 2018-10-10I love it , thanks for sharing, how can I record it in a bigger resolution?", "ttoinou, 2016-11-04Upgraded this one here : https://www.shadertoy.com/view/MttXz8", "Tup, 2016-07-17I created a generalized version: https://www.shadertoy.com/view/4tt3Dn", "adammaj1, 2014-01-10I have made some changes : to understand your code", "https://www.shadertoy.com/view/4djGWm", "adammaj1, 2014-01-08Great. See also :", "https://archive.org/details/mightymandel_2013-09-04", "https://archive.org/details/hairy_julias_2013-06-18", "makc, 2021-05-02so I was borrowing this code today and like @piluve ran into artifacts. so I tried modified version by @TekF from https://www.shadertoy.com/view/4dsGRl however it only aligns them differently. but it was the comment there (\"this artefact doesn't seem to show up in chrome, so I suspect firefox uses different texture compression\") that made me poke around and eventually Ive found the line to make it go away in firefox: gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE) \ud83c\udf89", "jackdavenport, 2019-06-29@pjdevpl I'm assuming it means that the Y texture coordinates of the texture are flipped.", "pjdevpl, 2018-03-24I am implementing offline version of shadertoy. I noticed some problems with the noise, when checking the \"VFlip\" option. Apparently, it seems that it is the default setting, when I am loading a texture in OpenGL. Does anybody know what \"VFlip\" setting actually means?", "rtepub, 2017-06-14Anyone know how you'd go about using this to create the derivatives at the same time (as in https://www.shadertoy.com/view/XsXfRH)? I just used this LUT technique in @iq's Rainforest shader and saw a nice ~5ms speedup by just replacing the noise( vec3 ) method there (only used for the trees from what I can tell). I wonder how fast it'd be if all the noise() / noised() methods were using LUTS like this.", "piluve, 2017-02-15Ok, I finally got it working, first of all, I'm using the code from this shader (https://www.shadertoy.com/view/4dsGRl ) to generate the value noise using the LUT texture, it has some diferences with the one made by @iq. Then, I generate the LUT texture using the algorithm by @Dave_Hoskin (http://pastebin.com/Kk9UJfnn) I had some problems with my FBM method (it produced some nasty artifacts) but I got it working. Thanks to all! And hope this will help somebody.", "piluve, 2017-02-15Actually I\u00b4m checking first here and the non procedural version actually has some artifacts. (http://i.imgur.com/hKsbWxA.png) I\u00b4m using the following parameters: linear,repeat and vflip off.", "Im using chrome and a GForce GTX 960 (378.66).", "piluve, 2017-02-12@Dave_Hoskins alright I'll give it a try this week.Thanks!", "Dave_Hoskins, 2017-02-12The vec2(37.0,17.0) in noise() has to correspond to the random texture creation. So doing -17.0 will work. Or reversing the polarity of the texture creation Y.", "piluve, 2017-02-12@iq, yes , that's what I tried to do in the shader because here in shadertoy, UNPACK_FLIP_Y_WEBGL it's being used but it's not available on desktop gl. Anyway, just by fliping the Y on the shader should be enough?", "iq, 2017-02-12@piluve, you probably need to flip it vertically", "piluve, 2017-02-03I cant get the LUT version working on a desktop project :C. I did the texture as @Dave_Hoskins said and it looks ok (http://i.imgur.com/QPGNExA.png). I\u00b4ve been trying to emulate the VFlip thing in the shader (uv.y = 256.0f - uv.y), (uv.y = 1.0f - 256.0f) but it still has the banding artifact. Any ideas? Thanks guys!", "yefeiying, 2016-11-01sdsadsad", "raRaRa, 2016-02-09Does 3D value noise have any cons or pros (I assume it's a lot faster) over Simplex noise when it comes to creating height map for terrain rendering? I'm trying to look for something that allows me to zoom in on the noise without losing much precision at around level 15, which happens with Simplex noise. Of course I could emulate FP64 which I'm currently looking into now, but this is very interesting.", "bjarkeck, 2015-11-15Ah i figured it out, sorry. It's https://www.shadertoy.com/presets/tex16.png, and also image number 16 in the \"Selct Input\" popup. You just need to disable VFlip, which its enables by default when you change image.", "bjarkeck, 2015-11-15I would also love to get a hold of that texture as well  It's not selectable from the \"Select Input\" popup.", "drone1, 2015-10-23Aha! Finally, this is the source for the elusive duo, the numbers 37 and 17!", "cabbibo, 2015-10-13@Dave_Hoskins / @iq Do you have that texture available for download anywhere? Was trying to use the same texture, and keep on getting noise, but only along one access. Like this image: http://imgur.com/a/b3zVz  I'm assuming its because of the offset / texture , instead of my own stupidity, but I could be very wrong about that", "Dave_Hoskins, 2015-07-07... the 'x, y' should be normal 2D array access thing like in the next loop.", "Dave_Hoskins, 2015-07-07In case anyone is interested, the colour texture is made using something like this:-", "Where 'colour' is your square texture memory...", "for (int y = 0; y < 256; y++)", "{", "for (int x = 0; x < 256; x++)", "{", "colour[x, y].r = RandomNumber();", "colour[x, y].b = RandomNumber();", "}", "}", "", "for (int y = 0; y < 256; y++)", "{", "for (int x = 0; x < 256; x++)", "{", "int x2 = (x - 37) & 255;", "int y2 = (y - 17) & 255;", "colour[x][y].g = colour[x2][y2].r;", "colour[x][y].a = colour[x2][y2].b;", "}", "}", "", "I've used this code to reproduce a shadertoy of mine outside of this site.", "thomaschengwei, 2015-05-19ask as same question with frizzil.please give some answer thanks", "Frizzil, 2015-03-31Hi iq -- First off, this technique is very useful, so thanks for providing it!  Does the texture you're using conform to the 37,17 offset rule you list in the comment above?  In my experiments, your sampling method is broken along the z axis with the texture provided by shadertoy, as well as with a completely random texture of my own... but it *does* work when the green channel of every pixel equals the red channel of the pixel offset from it by (37,17), which makes sense deducing things from the code.  The reason I ask is that your shader here *isn't* broken, which is isn't what I would expect after reproducing this technique.", "gjaegy, 2013-12-18iq, I was wondering if there is any way to compute the derivatives (i.e. normals) efficiently using the LUT approach, in a similar way described in one of your article (http://iquilezles.org/www/articles/morenoise/morenoise.htm) ?", "I can't get my head around...", "notlion, 2013-10-13Can you explain a bit how you created the LUT image? Also, what does the -100 bias do?", "fb39ca4, 2013-07-12It doesn't matter which one I use, I get 60FPS fullscreen.", "srtuss, 2013-07-09that is really smart, cant wait to use this", "simesgreen, 2013-07-04Yeah, it's a real shame GLES 2.0 doesn't have 3D textures, this would save quite a lot of instructions.", "", "BTW, doing the rotation for each noise octave is also quite expensive (matrix mul = 3 dot products), I find it doesn't much look different if I remove the \"*m\" on lines 121-121.", "CPU, 2013-07-04Yes of course, sorry. The FBM part is only executed once per pixel here so the overhead of the set-up code is dominating the ratio. These 'core' code fragments can make a huge difference when you're heavily loading the GPU.", "iq, 2013-07-04It's really faster in more complex scenarios, especially in the ALU bound ones (say, a raymarcher). In this test, the noise is the cheap part of the image anyway. If you go to the Clouds shaders you can also swap the texture based noise for the procedural, and there you should see a 250% speed up or so.", "CPU, 2013-07-03Thanks iq, very useful!", "Strangely, it's only 17% faster than \"USE_PROCEDURAL\" on my 6850! It would be interesting to know if other GPUs have similar ratios.", "kishimisu, 2022-11-10Hey, I've stumbled upon this shader today, it left me completely amazed and I really wanted to add mouse interactivity to it, so I made a fork that adds a light ray at the mouse intersection with the sphere: https://www.shadertoy.com/view/mdjGWG", "derhenryschmidt, 2022-09-15can we add a response to the mouse? now we can rotate the ball. instead if we click- the we can place one ray on that position?", "", "that behavior will be a reason to pay for....", "kamilkamilowski, 2022-07-27looks amazing", "zyc, 2022-07-04amazing", "yunhai, 2021-09-19cool stuff!! I have this toy in my home, really cool", "celifrog, 2020-09-09Wow looks like something you'd buy. :P", "khlorghaal, 2019-05-23great reference https://www.youtube.com/watch?v=Oij-BdIkPgQ", "OliverSchaff, 2019-04-12Really, really nice!", "kiyamada96, 2019-01-16wow!!", "ttoinou, 2018-07-20Featured in this video  !", "ttoinou, 2017-08-09Hi could I use your shader in a shadertoy Best Of video ?", "drewdus42, 2017-02-20how to swap out the texture source for noise math", "bwestlin, 2016-10-17It's stunning!!", "ShakingSafeguard, 2016-10-17It's amazing!!!", "reach334, 2016-08-30@PuffPuffPuff. Replace the first 3 lines with following, and then u can drag the sphere with mouse.", "", "vec2 um = iMouse.xy / iResolution.xy-.5;", "vec2 p = fragCoord.xy/iResolution.xy-0.5;", "p -= um;", "p.x*=iResolution.x/iResolution.y;", "PuffPuffPuff, 2016-07-08awesome. one thing though. which parameter needs to be changed to move the origin of the sphere to another place in the screen ? Im still new to shader syntax so got no intuition....", "bwestlin, 2016-06-30Wow!", "Flavio, 2014-12-28Awesome!", "fizzer, 2014-10-04Great work!", "Zavie, 2014-09-28Very good looking. I was expecting to have an arc when clicking on it.", "PauloFalcao, 2014-09-13Cool!", "poljere, 2014-09-12Beautiful!!", "mzadami, 2014-09-11Nice.", "CPU, 2014-09-11Excellent!", "AndrewNZ, 2014-09-11Love at first sight!  Wow.  I will have to find my one IRL now...  I miss it.", "nimitz, 2014-09-11Thanks iq! (and nice catch, updated.)", "iq, 2014-09-11(you can remove the 2.0 in line 143, the 4.0 in line 145 and 2.0s in line 147 - no speed gain of course, but do it for the karma)", "iq, 2014-09-11Fantastic!!!!!!!!!!! I love love love it", "morimea, 2022-07-13I just want to point some small mistake everyone do using this code:", "If you use this filtering method - notice that UV of surface in this shader scaled by 20x (line 185/186)", "When you will use this code for your texture - where int sx sy set in clamp( 4.0*... change 4.0 to something larger and check if it will work for your texture.", "iq, 2020-01-13antovsky - it is offset by 0.5, but id doesn't matter. The GPU's derivatives for mipmapping, equivalent of dPdx() etc, are offset 0.5 as well (to the left or to the right, depending on whether the pixel is even or odd, on top of that it's computer at half resolution, and still works pretty well for filtering (all you need is an approximation).", "ollj, 2018-10-30[This comment has been hidden by the shader author]", "antovsky, 2018-10-10Thanks for the great tutorial! One question:", "The rays used to compute the footprint are offset by (+1,+1) pixels from the ray through the center of the pixel. I believe OpenGL defines samples to be at the middle of the texel (or in this case screen pixel), so would it be more correct to sample the texture between the rays formed by offsets (-0.5,-0.5) to (+0.5,+0.5) in pixel space? In other words, is this implementation biased by 0.5 pixels to the upper right? Or am I misunderstanding something... (or maybe does it not matter", "foxthreefire, 2018-06-30It seems the branching in sampleTextureWithFilter needs a swap, since #if 1 seems to be the ray tracing situation.", "MichaelPohoreski, 2018-05-21Can simplify line #186 without loss of fidelity", "float id = fract(sin(dot(ip,ip)));", "sulphux, 2016-08-30nicely commented finally !", "ollj, 2016-04-17performs better than expected, then again i cam wit h no expectations. should be very easy to add a uniform constant to any application/frame", "revers, 2013-11-09Nice. I like very much your educative shaders.", "BenatEA, 2022-10-07Awesome work!", "cmarangu, 2019-10-22gee whiz this is amazing", "scratch13764, 2018-10-30There's a lot of what look like ray missteps on my computer, not sure why. (No dedicated GPU if that helps)", "Dave_Hoskins, 2017-12-16Hi, you can get me on 'daveh (at) quikquak (dot) com.", "cullend, 2017-12-16Hey Dave - super super cool work. Was wondering if I might be able to email you about a project I'm working on? Thanks a bunch!", "Dave_Hoskins, 2017-11-30zproxy, the 360 vid works fine now YouTube has loaded it up properly, just needed a little time.", "zproxy, 2017-11-30\tDave_Hoskins, by \"doesn't work for me\", what you  mean?", "Dave_Hoskins, 2017-11-17@zproxy, thanks, but it doesn't work for me, yet, nor the weather one!", "zproxy, 2017-11-17360 at", "SalikSyed, 2017-02-23This is awesome! wow It would be cool to train a drone to fly around terrain using this you could pass the shader output straight to a neural net", "theGiallo, 2017-01-02Very nice!", "xwize, 2016-08-22Nothing short of amazing Dave!", "dila, 2016-06-29This is really great. A whole terrain engine in a single shader.", "nicosol_br, 2015-08-05hi my name and I nickolas sun Brazil I was almost crying so perfectly when I was in my texta unity gave error and did not catch, as you learn to do that so beautiful it was a course?I could teach to make a similar if I criace a game I could use it? help me please answer me.", "Emuljan, 2015-04-10wooow", "Dave_Hoskins, 2014-07-08Just removed the need for derivatives, which gave me room to do the trees better.", "Dave_Hoskins, 2014-05-18Yeah it'a a big shader and some people just can't see it for some reason. I've been trying to get it compatible across the range for ages now. What OS are you using?", "tony_kero, 2014-05-18it just doesn't work for me :/, using firefox, waterfox, or Chrome (same if i delete the data of navigation, i just get a transparent or black image, but i've seen your video so ;)", "Dave_Hoskins, 2014-03-23Thanks. I'm currently writing this in Unity, so hopefully there will be plenty of monster creatures in it!", "cedric, 2014-03-23Really amazing ! Where is the giant spider^^ ?", "trx, 2013-08-22gosh... 20 years ago 60 sec of this kind of animation took 2 days to render with vistapro... :P", "Dave_Hoskins, 2013-07-05OK, my AMD laptop produces a bunch of java script errors, trees or no trees.", "Dave_Hoskins, 2013-07-05Works OK here and nothing has changed!  Does it work if you remove the TREES define?", "movAX13h, 2013-07-05here it's not working anymore now  win7/chrome", "Dave_Hoskins, 2013-07-03Thanks Kali, I can't get it to go wrong here on Firefox/Win7/GTX680 so I'm not sure what to do. Are you using the latest version of FF?", "Dave_Hoskins, 2013-06-12OK, I've made the mountains more rolling, and shrank and dithered the trees. Also mouse X shifts through time!", "Dave_Hoskins, 2013-06-12Thanks, although there are places on Earth than have low snow covered mountains, I know what you mean about scale, and it was emphasized by the trees going in. I was going to change it, but I like the overall shape, so it stayed!", "iq, 2013-06-12coolio! very impressive! instant \"love\"", "", "there's something looking off to me with scales, though... i feel like the mountains are about 1.5 times higher/steeper and the trees about 5 times bigger than they should?", "", "still, super cool!", "mu6k, 2013-06-09Good news! This is one of those rare shaders that work on firefox but fail on chrome... Usually it's the other way around... So it's not because my pc is too old (but that might be a factor)", "Dave_Hoskins, 2013-06-09Hmmm, I have it working on an old AMD laptop, a 3 year old iMac, and a new Win7 PC all running Chrome. *bangs head against wall*", "I did need to change the for loop in line 443 to integer only for the laptop.", "mu6k, 2013-06-09Great job. Unfortunately it's too many instructions, I had to copy paste it to a new shader and reduce the for loop to 140 iterations. Also, this works nicely with the visuals http://www.youtube.com/watch?v=gxyVY7ObZls&t=1410", "Dave_Hoskins, 2013-06-09OK I've put in some rudimentary trees. The ray-marching errors create a layered branch effect (hopefully), but they are a bit abstract. Use the define at the top to remove them.", "Dave_Hoskins, 2013-06-09Thank-you, the terrain code has been the main focus of learning OpenGL for me, but it has taken me ages.", "Trees?! OMG, please stop trying to make me think of doing this!", "Chaeris, 2013-06-09Nearly perfect:", "The only two things you might think to add, but that's really to make a pure perfection (your shader is already the best I've ever seen) are,", "- Trees", "- Some caves (you don't go inside the caves, you just see little holes in some mountains)", "", "And this would get better than any other thing!", "", "Best shader, really awesome job man!", "fizzer, 2013-06-08Damn nice! =)", "bitek, 2013-06-08This is really amazing!", "w23, 2013-06-07This is great! Challenge accepted .", "Dave_Hoskins, 2013-06-07Hey thanks CPU! Yeah, I tried the lower octaves but it just meant less accuracy, so not necessarily above the final terrain heights. It might have worked if I subtracted each octave in the design I suppose.", "CPU, 2013-06-07ah... Looks awesome Dave! After i wrote that, i thought that perhaps the best way to do it would be to sample the terrain with less octaves for the camera, but then maybe it's more complicated than that!", "", "Great shader!", "Dave_Hoskins, 2013-06-07OK, there's a new camera using multiple height influences.", "Dave_Hoskins, 2013-06-07I'm working on the camera height at the moment. Already done a two point average, it probably needs more.", "CPU, 2013-06-07WOW OMG    Amazing work!  May i suggest a low pass filter on the camera's vertical position, so it does not follow the higher frequencies of the terrain? A bit more 'floaty' !?!", "Dave_Hoskins, 2013-06-07Thanks, I've changed the water, and added some clouds.", "simesgreen, 2013-06-07very nice. the water could be more shinier, it looks like fog!", "movAX13h, 2013-06-06I don't think it can get better than this 0_0", "xiaorui_yang, 2023-05-24Hi magician0809, would you mind sharing your contact information? I'm interested in potentially licensing this shader from you.", "lz, 2021-06-14Still looks amazing.", "Pjbomb2, 2021-01-11how do you handle the lights in this?  this doesnt look to be pathtracing, so how do you handle multiple emmissive materials?", "andremichelle, 2020-08-21Very soothing. We are using this shader to feature an audiotool trap song. https://www.youtube.com/watch?v=AMxK2AXe1Ek If you like different credits, please contact me.", "reinder, 2020-05-08@sarmad: That shouldn't be a problem, but can you send me an email (see my profile) with details first?", "sarmad, 2020-05-08Hello @reinder, can I please use your shader Tokyo for my lyric video. Thank you.", "Taum, 2019-06-13Mesmerizing and tranquilizing. Thank you.  I took the liberty of adding sound effects and music to posting a video with link credits to you here: https://youtu.be/6y8vkLwI8dI", "reinder, 2019-04-26@ttoinou, nice! thank you", "ttoinou, 2018-07-20Featured in this video  !", "jpkelly, 2018-03-12I have been there many times and this brought me back to Tokyo.", "Thank you!", "zproxy, 2017-10-05360 at", "reinder, 2017-09-04@ttoinou, sure you can.", "ttoinou, 2017-08-09Hi reinder, Can I use your shader in a shadertoy Best Of video ? thx", "rockeyda, 2015-06-27its amazing how something so intense can come out of a lil box of code.", "noahks, 2015-02-19This is awesome!", "Dave_Hoskins, 2015-02-18The letterbox effect comes from lines 357 & 358, but I don't think negative power variables are allowed.", "dantronic, 2015-02-18You can fix the driving direction (reverse whole image) by pasting at line#296: q.x = (1.0 - q.x);", "I love this scene!! Curious about the \"letterbox\" bars, I took them out by commenting #300-303 and there are still shadowy lines there, wonder why?", "Harha, 2014-12-11This is just awesome.", "elias, 2014-12-09Great scene! I'll be there in 13 days", "otaviogood, 2014-12-09Wow! Amazing style.", "GregRostami, 2014-12-09Reminds me of Blade Runner!!", "4rknova, 2014-12-08This is absolutely amazing!", "poljere, 2014-12-08Just beautiful!", "CPU, 2014-12-08Amazing! Very well done!", "pix, 2014-12-07\u00e3\u0081\u2122\u00e3\u0081\u201d\u00e3\u0081\u201e \u00e3\u0081\u00a7\u00e3\u0081\u2122 \u00e3\u201a\u02c6. Evidence that you have not been to Japan is noticeable from the fact that in Japan they drive on the left. ;o) I have been there, and the atmosphere you present is strikingly authentic. \\o/", "vgs, 2014-12-07One of the best shaders ever in shadertoy!", "reinder, 2014-12-07Thanks! @Dave_Hoskins: I've added LIGHTINTENSITY (line 9), which you can use to adjust de intensity of the lights.", "Dave_Hoskins, 2014-12-07Very nice,  Reinder! It's kinda Film Noir. Can the lights be a little brighter?", "eiffie, 2014-12-07Wow again reinder. You always impress.", "frankwer, 2014-12-07Once again getting impressed by stuff on Shadertoy. Really stylish and atmospheric.", "iapafoto, 2014-12-07wow !", "iq, 2014-12-07Wow!", "Zi7ar21, 2020-08-19Cute! I wonder if there is anything modelled behind.. ;)", "jorge2017a1, 2020-08-14In general, the scene looks very good ... the beach is excellent, it looks very real .... and also pleasant .... the boy's eyes and his hair are very fine details !!! great job ... thanks IQ for sharing this artwork !!!", "............", "en general la escena se mira muy bien ... la playa es escelente , se mira muy real....y ademas agradable....los ojos del chico y su pelo son detalles muy finos!!! buen trabajo...gracias IQ por compartir esta obra de arte!!!", "grzesieKRK, 2020-08-13Love this one, seems like something straight out of a top Disney movie ;)", "3SvBop3F, 2020-08-13can someone point out where the model data is? I'm super curious about the techniques used", "FabriceNeyret2, 2020-08-12one of the very few iq self-portraits. collector :-p", "wj, 2020-08-11cool.. it is unfortunate that the reset of the wave animation is quite noticable.. would be nice if that could still be fixed", "57ar7up, 2020-06-18Buffer C @ 13", "0.14, 0.45,  0.7)*p;", "LOL!", "hl123456, 2019-03-01kepwewew wew", "starea, 2019-01-15Another masterpiece!", "joshuakeler, 2018-12-27nice", "CLPB, 2018-11-27Who needs Renderman? We've got two triangles.", "Pr0fed, 2018-11-27I love showing your works to 3d artists and seeing their eyes after i tell them this is a pixel shader  Nice job as always!", "duvengar, 2018-11-26 Amazing piece! Very inspiring.", "EvilRyu, 2018-11-26WOW! Incredible", "mmerchante, 2018-11-24Whoa insane modeling work, and very cool detail on the hair and hat!", "dila, 2018-11-24this is ridiculously good", "adx, 2018-11-23Changing smin/smax to regular min/max (exposing the underlying primitives) reveals just how precise the modelling really is - very impressive! And with everything else (composition, lighting etc.) also top notch, you've definitely raised the bar.", "GottZ, 2018-11-22what the fractal.. duuude", "flockaroo, 2018-11-22wow! so good. and performs really well with that amount of detail.", "blackjero, 2018-11-22Crazy amazing as always... the waves/foam work so well too, the brain extrapolates all the intricate water animation detail... (it doesn't loop properly on this machine though I think?)", "rcrookie, 2018-11-22Wow, Amazing!!!", "Kali, 2018-11-22You are amazing, did I tell you that before?", "GregRostami, 2018-11-21Soooo Amazing! Bravo!!", "Shane, 2018-11-21 Mind blowing, on many levels.", "KylBlz, 2018-11-21huh, nice trick in the normal calculation; somehow missed that until now.", "saidwho12, 2018-11-21Amazing! I can't even comprehend this...", "jmaasing, 2018-11-21What is this sourcery!? Jaw drops.", "Dave_Hoskins, 2018-11-21Brilliant!", "wyatt, 2018-11-21incredible!", "vgs, 2018-11-21Mind blowing shader!", "reinder, 2018-11-21Beautiful! Really nice.", "P_Malin, 2018-11-21Superb! The modelling of the eyes is crazy but really works. The code is all so fantastically simple and the end result is so good.", "PlNG, 2018-11-21I hope to be as good as you someday. Another masterpiece from the master.", "PauloFalcao, 2018-11-21WOW, nice scene! Looks awesome!", "Antonalog, 2018-11-21Shadertoy The Movie!", "Del, 2018-11-21awesome as usual.", "jt, 2022-10-06Cool!", "neozhaoliang, 2021-09-14@mla Haha, yes it's a mix of your work and @mrange's. I'm still working on the code, so no comments/credits are added yet.", "mla, 2020-02-18Added a derivative of this here: https://www.shadertoy.com/view/ttdXDl", "mla, 2017-12-11@Fabrice: Jos Leys has an explanation here: http://www.josleys.com/articles/Kleinian%20escape-time_3.pdf", "FabriceNeyret2, 2017-12-10wrap():", "(x-a*floor(x/a)) = mod(x,a)", "-> #define wrap(x,a,s)  ( mod(x-(s),a) + s )", "", "void TransA(inout vec2 z, float a, float b){", "z = vec2(b,a) -z/dot(z,z);", "z.x = -z.x;", "}", "", "KleinR,KleinI: would be interesting to know the analytic form giving these constants", "FabriceNeyret2, 2016-12-30mesmerizing !", "_kitzume_, 2018-12-19\ud83d\udc95 That's hot! \ud83d\udd25", "zproxy, 2018-07-27360 at", "Del, 2018-03-08wow! This is such a fantastic shader!", "knarkowicz, 2017-10-12Thanks Dudeson! Yes, it was inspired by NRW style in general. Yes, more reflections would be nice. I did that on an ancient GPU, so full reflections were too slow, and I just did fast sky reflections.", "anastadunbar, 2017-06-04I'm sorry that I'm late by the way.", "anastadunbar, 2017-06-04This looks awesome and it's also entertaining.", "chadiik, 2016-12-03This is insane!", "Ignitron, 2016-09-06Even restarting didnt fix the problem :S. But no worries, it worked on my old firefox ^^", "", "Loved that camera sequences, awesome shader. Congrats knarkowicz!", "Dave_Hoskins, 2016-09-0553 works OK for me. Try restarting your browser?", "Ignitron, 2016-09-05In windows with chrome 53.0.2785.89 m (64-bit) fails.", "On the Buf A tab that doesnt compile you can read:", "warning X3570 : gradient instruction in a loop with varying iteration, attemping to unroll the loop.", "Unknown error: Failed to create D3D shaders.", "", "Its a  pity, because it seems quite a fancy shader", "xdaimon, 2016-08-22Yess !!!", "CaliCoastReplay, 2016-08-16Brilliance", "vgs, 2016-08-16Superb!", "dila, 2016-08-16really cool. dashboard view is a nice touch", "and, 2016-08-16This is great! Love it!", "knarkowicz, 2016-07-30Thank you guys!", "@jackdavenport Nice trick! I updated the shader. Thanks!", "jackdavenport, 2016-07-30Looks amazing! Congratulations on winning the comp", "You can replace line 706 with this code:", "gTime       = iChannelTime[3];", "", "to make sure the shader is always in sync with the music!", "GregRostami, 2016-07-29HELL YEAH!!", "PauloFalcao, 2016-07-19Wow! Superb!", "Shane, 2016-07-19Awesome on so many levels.", "warlock, 2016-07-18", "CPU, 2016-07-18love it!", "Bananaft, 2016-07-18Now add steering and you are set for third challenge.", "pix, 2016-07-18Soundcloud track contains a theme from Tron: Legacy soundtrack (Daft Punk). Thumpingly good choice IMHO. <3", "SharkyUK, 2016-07-17Superb!", "Bananaft, 2016-07-17Amount of content is unbelievable. Heck, there is even a dashboard view.", "EvilRyu, 2016-07-17Incredible!", "mlkn, 2016-07-17Awesome!", "Dave_Hoskins, 2016-07-17Classic colours. Nice one!", "knarkowicz, 2016-07-17It's time to cyber dinosaurs shooting lasers from the eyes and this entry will be complete.", "knarkowicz, 2016-07-17I've added some volumetric fog for extra epicness", "flockaroo, 2016-07-17wow, thats great!", "knarkowicz, 2016-07-17@Maurogik Sorry, I'm trying to add some more stuff and I saved current progress by mistake.", "Maurogik, 2016-07-17This is epic.", "Also, I had a few compile errors, all in the SmoothNoise function, my compiler doesn't like the 'f' at the end of floats, it also doesn't know 'LinearPointWrapSmp' (iChannel0 ?) and lerp. Other than that, it works beautifully !", "iq, 2016-07-17Wow! This is really epic and cinematic!", "kch_86, 2016-07-17Fantastic.", "knarkowicz, 2016-07-17I was listening to Far Cry Blood Dragon soundtrack when the theme of the 2nd challenge was announced, so just decided to go with the flow and started hacking.", "ambi, 2016-07-17Superb. Great choice of music. Maybe a song by Dance With the Dead next time.", "GCScholar, 2022-09-16Thanks for the explanation \ud83d\ude4f", "Dave_Hoskins, 2022-09-15@GCScholar - with this particular mapping, it produced a closer approximation to the surface. I've tried doing other ways, like abs(h) distance, but I'm increasing the step over distance so save on loop size, so this helped a lot. So it's there to fix the larger jumps. It's probably not ideal.", "GCScholar, 2022-09-14What is the binary subdivision employed here ? I wonder ...", "Dave_Hoskins, 2022-01-03@Synthesoft, thank-you! It was probably a result of hacking stuff around as usual. Who knows - it was 8 years ago \ud83d\ude01", "Synthesoft, 2021-12-31This is really an incredible piece of art.  I've spent countless hours tinkering with the code and swapping functions in/out just to see what happens with nary a dull moment.   During my experimentations I think I found a cut-n-paste bug. On line 290, bri should be briSun.  The change is pretty subtle visually unless you brighten the sun a bit on line 283.", "jorge2017a1, 2021-03-19I think there should be Remnant X- vII", "...........", "Pienso que deberia de existir  Remnant X- vII", "jorge2017a1, 2021-03-19the fractal is very good .... the music sounds good ..... but the fractal I think loses the good images. !!!!", "el fractal es muy bueno .... la musica se escucha bien ..... pero el fractal pienso que pierde las imagenes buenas. !!!!", "oneshade, 2021-03-19The sound is absolutely amazing!", "chrk120, 2020-12-23Definitely, I will let you know once I use it and refer your name! Thanks a lot Dave!", "Dave_Hoskins, 2020-12-23@chrk120, of course you can, but please credit me somewhere. Ta.", "chrk120, 2020-12-23hi there, may I ask how I could have the permission to use for one commercial project?", "wasaka1, 2020-06-27WOW", "Dave_Hoskins, 2020-06-21Here's some \"Marching Cubes\" code http://paulbourke.net/geometry/polygonise/", "Priam, 2020-06-21Thank you Dave, still love this thing, haven't gotten there yet, but really appreciate it now, P", "Dave_Hoskins, 2020-06-21To make a mesh you\u2019d probably use something like the confusingly name \u2018marching cubes\u2019 algorithm: https://youtu.be/M3iI2l0ltbE", "Priam, 2020-06-21Hi @Pingas thanks for posting that, do you have any idea how to extract a polygon mesh out of a raymarched fractal? I would love to print that stuff, P", "Pingas, 2020-06-21@jarble, the principle is the same as in raymarching: you can just use distance function. Watch https://www.youtube.com/watch?v=9U0XVdvQwAI", "jarble, 2019-10-15I wish I knew how to add gravity and collision detection to this fractal. It would make a really interesting game.", "Dave_Hoskins, 2019-02-10They have enough buffer space for 3 minutes  now.", "scratch13764, 2019-02-10Wait how did you to get the music to go over 1 minute?", "scratch13764, 2018-10-30The music is so Sp00ky. Amazing.", "croxomusic, 2017-10-30Hey Dave_Hoskins ! Can I use this shader to my music player in my homepage?", "Contact me at croxomusic@gmail.com best", "Priam, 2017-10-10BTW I would definitely love to 3D print that stuff if I get around the implementation one day, cheers! P", "Priam, 2017-10-08Hello Dave thanks for the advice, appreciated! Eager to see what you will come u with next. I will have to find the easy ones 1st and climb up :-) Cheers.", "Dave_Hoskins, 2017-10-08Thanks. To be honest the best learning material is right here on Shadertoy, before using Shadertoy I had never done shader coding before. The trick is to get stuck right in and do something, anything, because thinking about it (or procrastinating) is just not good enough!!!  I started off tinkering with other people's shaders just to find out what they were doing - like reducing loops and changing what I thought were colours etc. Also, Inigo has a very good site for resources (despite the typos  )", "http://www.iquilezles.org/", "Priam, 2017-10-08Hello, very beautiful fractal and great \"dust effect\" camera work when entering solid parts!, I can watch that for hours definitely. I am starting to get really interested in learning some GLSL and am looking for learning resources (already got the Book of Shaders), any suggestions from the best?", "SalikSyed, 2017-02-23wow!!", "Dave_Hoskins, 2017-02-12Just discovered the glow effect was erased by the background, oops. Fixed now.", "pthextract, 2016-12-04Like the music.", "coyote, 2015-04-14Beautiful! Especially with Rift...", "For Oculus Rift (or for cross eyed viewing) add right after \"vec2 uv = ...;\" in mainImage the following two lines:", "float sg = sign(fragCoord.x-0.5*iResolution.x);", "uv -= sg*vec2(0.5*iResolution.x,0)/iResolution.y;", "And then right after \"mat3 camMat = ...;\" add the following line:", "cameraPos += sg*camMat*vec3(0.01,0,0);", "For cross-eyed watching just subtract instead of adding to cameraPos.", "Of course, leave #define STEREO commented. This is for anaglyph red blue glasses.", "Kali, 2015-02-18Love. It.", "movAX13h, 2014-09-27Oh wow, nice music!", "Dave_Hoskins, 2014-09-24Thanks. I've just added a blue flash effect, got it working on Mac AMD (had to unroll the sub-division code for unknown reasons), and changed the lead tune into a weird vocal effect with vibrato!", "nimitz, 2014-09-24Colors and lighting are just superb, really adds to the mood. Very nice.", "iq, 2014-09-24Very beautiful!", "AndrewNZ, 2014-09-23Incredible world and very moreish!  Colours, lighting and background are spot on - and once again 'dot fade' gives a gentle transition.  I hope your technique catches on.", "", "Your camera path seems to visit the boundaries a lot.  Perhaps give more focus on the more interesting bits of the fractal?", "Dave_Hoskins, 2014-09-23This is a rewrite of one I accidentally lost a few days ago.", "rocky02009, 2023-04-19The burning is because the inexacted floating-point calculation.", "To fix this, just change \"i<=1.0\" to \"i<1.001\",and change -15.0 to +1.0", "FabriceNeyret2, 2022-11-27this is burning on my linux as well, I think it is on purpose due to the -15 in the normalization.", "BTW, note that this filter isn't really Gaussian.  rather 1/|d|", "devhontran, 2022-11-26@FabriceNeyret2", "", "Thank you for your service master, when I view it on Mac, the blur burns bright than on windows, my temporary solution is", "", "", "vec2 res = iResolution * PR;", "", "float Pi = 6.28318530718;// Pi*2", "", "// GAUSSIAN BLUR SETTINGS {{{", "float Directions = 8.0;// BLUR DIRECTIONS (Default 16.0 - More is better but slower)", "float Quality = 2.0;// BLUR QUALITY (Default 4.0 - More is better but slower)", "float Size = 8.0;// BLUR SIZE (Radius)", "// GAUSSIAN BLUR SETTINGS }}}", "", "vec2 Radius = Size/res.xy;", "vec4 Color = texture(tDiffuse, i_uv);", "", "// Blur calculations", "for (float d=0.0; d<Pi; d+=Pi/Directions)", "{", "for (float i=1.0/Quality; i<=1.0; i+=1.0/Quality)", "{", "Color += texture(tDiffuse, i_uv+vec2(cos(d), sin(d))*Radius*i);", "}", "}", "", "// Output to screen", "Color /= Quality * Directions + ((Directions / 2.) - 1.);", "if(PR < 1.1){", "Color/=(((.5 + (PR / 2.))) - (PR / 8.));", "}", "FabriceNeyret2, 2022-11-25@devhontran: please be more specific ;-)", "devhontran, 2022-11-25bug on macOs", "shastabolicious, 2021-04-27this shader samples 49 times per pixel (16 directions times 3 quality plus the fragcoord). also I don't see how this is gaussian. also it brightens.", "FabriceNeyret2, 2018-10-24no problemo, here is a cool place to learn :-)", "Kernel: this is more a signal-processing term, if you understand the notion of \"filtering an image\" as \"applying a convolution\". The kernel is a 2D function or small matrix containing the coefficients applying to each neighborhood pixels. A Gaussian(x,y) is a very good filter (better that all coefficient = 1, which is the box filter), and it has the nice property than  Gaussian(x,y)=  Gaussian(sqrt(x\u00b2+y\u00b2)) = Gaussian(x)*Gaussian(y), so you can just filter the x values with a 1xN filter, store the result, then apply a Nx1 filter along the y.", "", "MIPmap is how textures in graphics and especially in OpenGL can allow very cheap antialiasing: the texture are already precomputed are 1/2, 1/4, 1/8 .... resolution, each obtain by averaging 4 neighbor pixels. By default the \"mipmap\" flag is set in texture pannel, so that when you zoom out the texture it is automatically blurred (not-perfect, but almost free). Since this data is there, smart algorithms can take advantage to mix thin and coarse texture pixels to compute the sum.", "You can explicitely access this data using  textureLod() instead of texture(), with extra parameter = LOD level.", "existical, 2018-10-24Sorry, I am very new to shaders, and still learning so the words kernel and MIPmap don't say anything to me )))))", "FabriceNeyret2, 2018-10-24so as usual the trick is to do 1D loops or very coarse 2D loops AND have top quality.", "existical, 2018-10-24Thank you for your comment. This shader will become '1D loop' and much faster if the 'Quality' variable is set to '1.0', but of course the visual quality won't be as good but could be acceptable for some projects like mobile games where the speed is very important.", "FabriceNeyret2, 2018-10-23welcome to the gang !", "", "well, to get fast blur, classical massively efficient strategies are:", "- use separable kernel (replace 2D loop by 2 1D loops). This can even take into account Gaussian profile.", "- use MIPmap (3rd texture() parameter).", "", "From there, you might add optimizations ;-)", "Your approach just ignore many pixels, which could cause aliasing, and there is no kernel decreasing with distance.", "For instance you could increase the MIPmap level as you go out of center (+ decrease weight), in order to keep a hole-free coverage.", "cyperus, 2023-02-19// f(x,y) (top left)", "float ellipse1(vec2 p)", "{", "float f = abs( length( p*vec2(a,b) ) - r );", "", "return f;", "}", "", "// f(x,y) divided by analytical gradient (top right)", "float ellipse2(vec2 p) {", "float f = ellipse1(p);", "float g = length( p*vec2(a*a,b*b) ) / length( p*vec2(a,b) );", "", "return f/g;", "}", "", "", "The functions are equivalent.", "But the meaning of the variables f and g in the cases (top left) (top right) is not the same as in (bottom left) (bottom right). I suppose iq wrote it this way to optimize the calculations.", "", "Thanks !", "pk1234, 2022-04-11@Gijs Implicitly using |x| >= x is simple enough that I would still put the argument under \"triangle inequality\".", "Gijs, 2022-04-11@pk1234, I know the reverse triangle inequality! Notice that if the reverse triangle would have been applied the correct statement in the article would be", "|f(x)+grad f(x)e| >= ||f(x)|-|grad f(x) e||", "but this is not what is stated, instead Inigo has in his article:", "|f(x)+grad f(x)e| >= |f(x)|-|grad f(x) e|", "which is wrong (notice the missing absolute value).", "pk1234, 2022-04-08@Gijs The triangle inequality in the form of ||a| - |b|| <= |a+b| can be applied, sometimes it's called the reverse triangle ineq. but often it's grouped into \"triangle inequality\".", "MillerHimself, 2021-03-09I used this to make a heartbeat shape", "https://www.shadertoy.com/view/ttyfDt", "Gijs, 2020-07-18@iq, I would like to mention that the derivation in your article has a slight error. Specifically the part: \"the first inequality being due to the triangle inequality...\". There is no way to apply any triangle inequality to get the desired result. Which means the notion that the final approximation is an upper bound is also wrong. The correct derivation is here: https://imgur.com/5hEZSXl .", "chrisjj, 2017-12-24Anyone looking for a concise demo of just the analytical technique might find this reduced version easier: https://www.shadertoy.com/view/4tSfRz", "chrisjj, 2017-12-24IQ, thanks for this. Note: \"modulo of its gradient\" should read \"modulus of its gradient\".", "ollj, 2017-06-07[This comment has been hidden by the shader author]", "eiffie, 2013-04-30Love the education I am getting here. Thanks!", "CPU, 2013-04-27muy apreciado!", "Zi7ar21, 2021-06-07(I don't have the case, I just used the image)", "Zi7ar21, 2021-06-07I found this by typing in the shadertoy phone case", "FabriceNeyret2, 2021-02-14Greg version ( de-macroized) remains shorter: 258 chars", "oneshade, 2021-02-14Way too late but with -2 chars with a swizzle:", "float f(vec3 p)", "{", "p.z+=iTime;return length(.05*cos(9.*p.y*p.x)+cos(p)-.1*cos(9.*(p.z+.3*p.x-p.y)))-1.;", "}", "void mainImage( out vec4 c, vec2 p )", "{", "vec3 q=vec3(0,1,2), d=.5-vec3(p,1)/iResolution.x,o=d;for(int i=0;i<128;i++)o+=f(o)*d;", "c.xyz = abs(f(o-d)*q+f(o-.6)*q.zyx)*(1.-.1*o.z);", "}", "FabriceNeyret2, 2021-01-08\"From 2018 the max size of the Tweet is now 280 characters.\":", "this doesn't change our thermometer, that is \"traditional old tweet size\".", "sylvain69780, 2021-01-07From 2018 the max size of the Tweet is now 280 characters.", "It is also possible to compress it in some ways.", "Checked what P_Malin is doing with the BBC Micro bot !", "FabriceNeyret2, 2020-05-23you can get rid of the function, but it's not saving anything:", "#define f(p) ( length( .05*cos(9.*p.y*p.x)+cos(p+iTime*v.xxy) \\", "- .1*cos(9.*(p.z+iTime+.3*p.x-p.y)))  \\", "-1. )                                         //", "#define mainImage(c,p)                                        \\", "for(vec3 d=.5-vec3(p/iResolution.x,0), o=d, v=vec3(0,1,2);\\", "c.w++<99.; o += f(o)*d )                              \\", "c.xyz = .1*abs( f((o-d))*v + f((o-.6))*v.zyx ) * (9.-o.z)", "GregRostami, 2020-05-22244 chars:", "float f(vec3 p){", "p.z+=iTime;", "return length(.05*cos(9.*p.y*p.x)+cos(p) - .1*cos(9.*(p.z+.3*p.x-p.y)))-1.;}", "#define mainImage(c,p)                                              \\", "for(vec3 d=.5-vec3(p/iResolution.x,0), o=d, v=vec3(0,1,2);      \\", "c.w++<99.;o+=f(o)*d)                                        \\", "c.xyz = .1*abs( f(o-d)*v + f(o-.6)*v.zyx ) * (9.-o.z)", "jeyko, 2019-07-28very elegant code! Learned 2 things: cheap way of computing diffusion and this great way to visualize functions!", "GregRostami, 2018-06-09246 chars:", "float f(vec3 p){", "p.z+=iTime;", "return length(.05*cos(9.*p.y*p.x)+cos(p) - .1*cos(9.*(p.z+.3*p.x-p.y)))-1.;}", "", "#define mainImage(c,p)                                      \\", "vec3 d=.5-vec3(p/iResolution.x,0), o=d, v=vec3(0,1,2);\t\\", "while(c.w++<99.)                                        \\", "o+=f(o)*d;                                              \\", "c.xyz = .1*abs( f(o-d)*v + f(o-.6)*v.zyx ) * (9.-o.z)", "GregRostami, 2017-11-16251 chars:", "float f(vec3 p){", "p.z+=iTime;", "return length(.05*cos(9.*p.y*p.x)+cos(p)-.1*cos(9.*(p.z+.3*p.x-p.y)))-1.;}", "", "#define mainImage(c,p)\t\t\t\t\t\t\\", "vec3 d=.5-vec3(p/iResolution.x,0),o=d;\t\\", "for(int i=0;i++<99; o+=f(o)*d )\t\t\t\\", "c.xyz = .1*abs( f(o-d)*vec3(0,1,2) + f(o-.6)*vec3(2,1,0) ) * (9.-o.z)", "GregRostami, 2017-11-14I started golfing this shader. I know I can squeeze more chars out of this one ...", "", "254 chars:", "float f(vec3 p)", "{", "p.z+=iTime;", "return length(.05*cos(9.*p.y*p.x)+cos(p)-.1*cos(9.*(p.z+.3*p.x-p.y)))-1.;", "}", "#define mainImage(c,p)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\", "vec3 d=.5-vec3(p,1)/iResolution.x,o=d;\t\t\t\t\t\t\t\t\t\\", "for(int i=0;i++<128; o+=f(o)*d )\t\t\t\t\t\t\t\t\t\t\\", "c.xyz = abs(f(o-d) * vec3(0,.1,.2)+ f(o-.6)*vec3(.2,.1,0)) *(10.-o.z)", "GhettoWolf, 2013-05-27The problem was I was trying to port it to cG and for some reason the compiler didn`t like the comma syntax", "GhettoWolf, 2013-05-27Thank you!", "iq, 2013-05-27You can use a coma to separate variable declarations in most languages derived from C, such as GLSL. That line is equivalent to:", "vec3 d=.5-gl_FragCoord.xyz/iResolution.x;vec3 o=d;", "GhettoWolf, 2013-05-27Excuse me if I'm completely stupid, but what is `o`? It isn`t declared and used, and I don`t understand the vec3 d=.5-gl_FragCoord.xyz/iResolution.x,o=d syntax because of the comma after the division. Why isn`t it a semi colon?", "Daniil, 2013-05-22https://www.shadertoy.com/view/ldlGW8", "Daniil, 2013-05-22Line 10<br>", "Change i < 99 to", "i < int(mod(iGlobalTime*50.0,80.0))", "JoshP, 2013-05-20!! Wow. Simply. Absurd.", "weyland, 2013-05-18Yup, I love this", "WAHa_06x36, 2013-05-17Hahah, that's hilariously small.", "jt, 2022-10-11Epic!", "PelicanPolice, 2020-11-05Holy crap that looks good", "jorge2017a1, 2020-09-04wuaaooo it is a surprising explosion as it says .... oooh .... it is a great explosion ... I hope it does not explode in my head ... hahaha !!!!! good work looks EXCELLENT !!!!", ".............", "wuaaooo es una sorprendente explosion como dice....oooh .... es una gran explosion ... espero no explote en mi cabeza ... jajajaaj !!!!! buen trabajo se mira EXCELENTE !!!!", "Janek232, 2020-08-07", "just wonderful", "mamalka89, 2020-07-23great!", "laura996, 2020-07-20Love it", "ewerybody, 2020-07-10Whow nice!! I couldn't help but play around with the noise amount in line 59 to come in fast and make it slow down towards the end:", "float n = .19 * exp(-mod(iTime * 0.6,-3.)) -0.8; // noise amount", "Einheit101, 2020-07-08Why does the explosion not start at a full black screen?", "jannw, 2020-06-22Great!", "maziulka11, 2020-06-16Amazing!", "Zi7ar21, 2020-06-13space engine", "Quazar, 2020-05-22WOW!", "Fab48, 2020-05-19ouaw ! sooooo cool ! awesome job.", "Duke, 2017-10-18Thanks Yes it was intentional. You can comment \"#define BOTH\" on the beginning and you'll see one side of the effect on the full screen. Just read comments above and below this string. To show this effect I had an option to make two separate shaders which will be differ by one string of code or make one shader with this line. I decided to chose second variant.", "twenkid, 2017-10-17Great shader! On my machine (Intel mobile HD4000, Chrome browser) there's a straight discontinuous line in the middle, like texture coordinates are misaligned or something. I don't know if it's intentional in order to show dark and light, but I managed to fix it by adjusting in mainImage after #ifdef BOTH, line 196:   d = uv.x < 0.5 ? abs(d)+0.07 : d;", "to either ... uv.x< 0.1 or lower (or so, the line moved to the left) or: d = uv.x < 1.0 ? abs(d)+0.07 : d;", "The line is removed \"to the right\".", "Shane, 2016-06-17 Wow, this is really good.", "Duke, 2016-06-16Upd.: Added LOW_QULITY option which can significant increase performance.", "Duke, 2016-06-16Thanks", "flockaroo, 2016-06-16supernice supernova", "TDM, 2016-06-16Amazing!", "s23b, 2016-06-16Witchcraft! How can something look this amazing and be so fast at the same time?", "otaviogood, 2016-06-16Wow. such a nice looking explosion.", "aiekick, 2016-06-15very nice", "kiRyy, 2019-09-16Can i use it in my game? any copyright?", "otri, 2017-01-28Incredible this is all being solved simultaneously per every single pixel.  Really impressive, looks beautiful.", "iapafoto, 2017-01-24super Wow !!!", "pthextract, 2017-01-13OK. This is amazing.", "Jacoby, 2016-12-17Really cool", "w450468524, 2016-08-11it's like a tunnel under the very deep of the water, really fantasic!", "MortenSkaaning, 2016-07-20nice", "Shane, 2016-07-19Such a clever idea, and really pleasant to look at.", "tholzer, 2016-07-18Ooooh ... how nice!", "This is the first musical wormhole.", "An absolute Sci-Fi rarity.", "This is the way I want to travel through universe ;-)", "flockaroo, 2016-07-17oh beautiful!!", "BenatEA, 2022-10-07Awesome work!", "spalmer, 2020-12-04I like it better with a much faster retina blur screen smear when turning the camera, like changing the constant on BufferA line 254 from 7. to 27. or more", "denosya, 2020-11-16I love it.", "UrbanClubProfessional, 2020-11-10This shader was remixed by me in here: https://www.shadertoy.com/view/WdtBWH", "oneshade, 2020-11-05Beautiful! The \"relaxation marching\" idea is quite interesting.", "z0rg, 2020-11-05Amazing job !", "milesWaugh, 2020-09-14Woah.", "zproxy, 2017-09-18360 at", "bloodnok, 2016-04-05Mars demo 2016!", "ming, 2016-03-30Cool optimization techniques, it can run on my adreno 510 mobile GPU at ~17 fps", "dcoombes, 2016-03-29Amazing!", "iapafoto, 2016-03-29Veryvery  realistic !", "dila, 2016-03-28superb!", "TDM, 2016-03-20Looks like a movie poster.", "FabriceNeyret2, 2016-03-19what about trying this weter style, now ? :-p http://www.shutterstock.com/video/clip-12661208-stock-footage-flight-over-the-morning-earth.html", "Shane, 2016-03-18Gorgeous scene. One of my favorites in recent times.", "jt, 2016-03-17wow, pretty", "Alkama, 2016-03-17Absolutely fantastic !", "coyote, 2016-03-17Beautiful!", "Duke, 2016-03-17Excellent!!!", "PauloFalcao, 2016-03-17Wow!!!! Amazingly AWESOME!!!", "nimitz, 2016-03-17Thanks guys!", "", "Also, fixed the issue on Mac/Linux by normalizing myself.", "iq, 2016-03-17Wow!!! Amazing", "FabriceNeyret2, 2016-03-17not compiling on linux.", "because line #7, const cannot be initialized by a formula ( normalize )", "GregRostami, 2016-03-17This shader REALLY needs the sound of the Martian wind lightly blowing across the landscape.", "Like this: https://www.shadertoy.com/view/Xls3D2", "patu, 2016-03-16", "revers, 2016-03-16Amazing view!", "poljere, 2016-03-16Awesome.", "CPU, 2016-03-16lovely.", "GregRostami, 2016-03-16Instant LOVE!!", "Dave_Hoskins, 2016-03-16Lovely lighting/fog effects on this. Plus a nice terrain function.", "psonice, 2016-03-16For some reason Buf A line 7 errors on OS X - it doesn't like assigning \"non-constant\" values to a const vec3 (the result looks very constant to me  )", "", "Looks great when working (I replaced that line with a pre-calculated vec3, no normalise() function fixes it)", "FabriceNeyret2, 2022-05-27@sidd519:  what do you mean ?", "sidd519, 2022-05-26where is download?", "Hadyn, 2017-10-11Nice! Thanks Fabrice, there's a lot I can learn from that", "FabriceNeyret2, 2017-10-10golfed:", "void mainImage( out vec4 O, vec2 u )", "{", "vec2  R = iResolution.xy,", "U = 10.* ( u -.5*R ) / R.x * mat2(1,1,-1,1)*.7 +5.,", "F = fract(U);", "F = min(F,1.-F);", "float s = length( ceil(U) -5.5 ),", "e = 2.* fract( ( iTime - s*.5 ) / 4.) - 1.,", "v = fract ( 4.* min(F.x,F.y) );", "", "O = mix( vec4(1),", "vec4(.5,.75,1,1),", "smoothstep( -.05, 0., .95*(e < 0. ? v : 1.-v) - e*e)", "+ s*.1 );", "}", "FabriceNeyret2, 2017-10-10nice !", "", "simplifications:", "", "vec2 uv = ( fragCoord -.5*  iResolution.xy ) / iResolution.x;", "uv *= mat2(1,1,-1,1)/sqrt(2.);", "uv += .5;", "(and forget aspect)", "", "rep = min(rep,1.-rep);", "float dist = 2.*min(rep.x,rep.y);", "", "mix(value, 1.0-value, step(1.0, edge));", "->  value = edge < 1. ? value : 1.-value;", "", "", "vec4(1.0,1.0,1.0,1.0) -> vec4(1)", "", "", "value = 2.*abs(dist-.5);    : cancelled by the next value=", "", "void mainImage( out vec4 O, vec2 U )", "{", "vec2 uv = ( U -.5*  iResolution.xy ) / iResolution.x;", "uv *= mat2(1,1,-1,1)/sqrt(2.);", "uv += .5;", "uv *= 10.;", "", "vec2 rep = fract(uv);", "rep = min(rep,1.-rep);", "float value = fract ( 4.* min(rep.x,rep.y) ),", "squareDist = length( floor(uv) -4.5 ),", "edge = 2.* fract( ( iTime - squareDist*.5 ) / 4.) - 1.;", "", "value = edge < 0. ? value : 1.-value;", "value =   smoothstep( -.05, 0., .95*value - edge*edge)", "+ squareDist*.1;", "", "O = mix( vec4(1),vec4(.5,.75,1,1), value);", "}", "BigWIngs, 2017-10-09Very nice!", "poljere, 2017-10-09Classy.", "Hadyn, 2017-10-09Great - thanks again!", "s23b, 2017-10-09it works now", "Hadyn, 2017-10-09Thanks for the heads-up! I've replaced it with a fract operation and condensed it into the initialisation on line 13... hopefully that works a little better", "s23b, 2017-10-09On my setup it gives a \"LHS of operator % must be an integer\" error. Replacing line 14 with rep = mod(rep, 1.0); fixes it.", "", "looks good, btw", "aiekick, 2017-10-09very pretty", "icegibbon, 2023-05-23Happy 10th Anniversary! Crazy", "c64zottel, 2022-05-30This peace of art has a little bug, it does not start right away.", "You have to press pause and start to enjoy some very nice tunes.", "Doobius, 2021-12-24Just getting a black screen", "", "GTX 1060 in latest Chrome on Windows 8.1, for what it's worth.", "JoshScholar, 2019-02-03Oh it works IF the sound works.  I had to click to start the sound.", "JoshScholar, 2019-02-03I'm just getting a black screen on an rx 470", "b3yond, 2015-10-23dope !", "Flavio, 2014-06-25My Gosh!", "lahn, 2013-08-26This is fantastic. I'm very new at this - how do I go about making it work in Quartz Composer?", "JosSs, 2013-03-24Superb work man, just a pleasure to let ya play with my noise!!!", "PauloFalcao, 2013-03-23Very cool! I guess Shadertoy will be the next platform for demos!", "mifterious, 2013-03-23this whole site here is amazing! Kudos!", "iq, 2013-03-23Thanks   Making this one made me realize we totally need a timeline/sequencing tool in Shadertoy, otherwise it's just a pain to synchronize things. Coming soon!", "XT95, 2013-03-23I love it !", "cmarangu, 2019-12-05impressively realistic and beautiful and also very lag (7.3FPS)", "MindFlyer, 2019-01-30You are seriously confused about binary search. What a convoluted and fundamentally incorrect explanation!", "zproxy, 2018-11-12360 at", "CaliCoastReplay, 2016-08-17Godlike.  I would love to see this genuinely prerendered...", "brookesi, 2014-09-20Hiya, I need a shader like this for an iPad game, please can you advise the licensing for this, or contact us at info (at) brookevickers . com, thank you, Brookesi", "iq, 2013-04-08yep, it's back! thanks so much dude", "frankenburgh, 2013-04-08Ok, currently removed the self-shadowing stuff - hope it's working well again!?", "iq, 2013-04-08It used to work for me a few days ago, but today it's not working anymore   (it wors if i remove the sclouds elfshadowing, though)", "flight404, 2013-04-08I switched from the Radeon HD 6750 to the Intel 3000 HD and it works (albeit very slowly). But wow, it is gorgeous. I will try it on a PC tomorrow to get the full framerate.", "flight404, 2013-04-08Crap. Oh well. I tried it on a different Macbook Pro and same issue. Compounded by the fact you are on the front page at the moment.", "frankenburgh, 2013-04-07Hmmm strange.. just installed Chrome 26 on my MacMini(Core2Duo,2007, OS10.8.3) and it works, also with Firefox. Also running in Win7/64bit. So I currently cannot reproduce, sorry", "flight404, 2013-04-07Not working for me on Chrome 26 on Mac. Breaks WebGL and no other shaders will work until a relaunch. I tried turning off all the defines but no luck. Any suggestions? I'd love to see it working.", "PauloFalcao, 2013-04-06Awesome!", "frankenburgh, 2013-04-05Thx a lot! BTW: Added simple cloud-self-shading option (which make the clouds look more voluminous, see code)...", "iq, 2013-04-04very nice!", "Andrenator, 2013-04-04Very cool, Mr. Frankenburgh ;-))", "huttarl, 2013-04-02This one ought to be featured on the front page!", "Virgill, 2013-04-02Amazing Mr. Frankenburgh!!", "poljere, 2013-04-02Awesome!", "iq, 2013-04-01oh yeah!", "CPU, 2013-04-01Excellent! - God Rays are working fine on Win7/WebGL", "reinder, 2013-04-01beautiful!", "frankenburgh, 2013-04-01The \"God-Rays\" are currently disabled by default because of the low performance (and a \"shader error\" on some machines?). If you want God-Rays, simply set the \"#define RENDER_GODRAYS\" definition to \"1\" (or swap the comments)", "socalledsound, 2021-02-09wow I learn so much from your  stuff, thank you", "sgoal, 2017-09-11cool,how to design polynomial?", "iq, 2016-10-08I designed the polynomial by hand to give me this shape", "revers, 2016-08-17Cool shape! Did you discover the polynomial \"(13.0*h - 22.0*h*h + 10.0*h*h*h)/(6.0-5.0*h)\" by yourself? Was it by accident or did you exactly know what kind of two polynomials you need to divide to get shape simiar to a heart?", "", "BTW, code:", "// color", "float s = 1.0-0.5*clamp(r/d,0.0,1.0);", "s = 0.75 + 0.75*p.x;", "", "", "can be replaced with just:", "// color", "float s = 0.75 + 0.75*p.x;", "", "since you are overwriting the initial value.", "iq, 2016-08-09No problem, man", "larry_kof, 2016-07-13I'm Larry and I,m sorry for uploading your heart shader for some reasons.", "That was my first shader which I started learning.", "Now,I have modified the drawing parts of animation and shape.", "So I think I can upload right now.", "I'm sorry again.And thank you for understanding", "ollj, 2016-04-17think of a hitpoint meter of multiple hearts on playing cards in a game that would beat like that.", "Hex, 2015-04-06https://play.google.com/store/apps/details?id=com.vpgame.art.animatedheart looks like this guy nabbed ur shader.", "befree, 2014-01-28Hi, iq! Can u help(little bit) me with code (\thttps://www.shadertoy.com/view/MsS3zV", "AshenFlowersFalling, 2022-06-20@FabriceNeyret2 @paniq made a fork of this with added comments! One or two things are still bugging me though, namely the convergence rate and the possible values that \"chance_limit\" is limited to that allows the algorithm to converge.", "", "https://www.shadertoy.com/view/sdVyWc", "FabriceNeyret2, 2022-06-07@panic: yep, it would be cool to add some comments to explain the algorithm ;-)", "", "@AshenFlowersFalling: yep, looks like simulated annealing but the important thing is what is optimized and in which neighborhood.", "", "mask simplifies to  ivec2( maskf * (1.+ framef) * iResolution.xy )", "but I dont see how this differs from hash(frame)*res", "", "I dont understand the if ( uv = (( ( uv^mask)%sz ) ^mask ) % sz", "if resol was a power of 2 it would be always true, right ? but what happen if not ?", "the swap position seems potentially anywhere in the image.", "But quantify_error does a lot of things, including its own fetches in a 40x40 neighborhood around the 2 values, so who knows what can happen.", "AshenFlowersFalling, 2022-06-06Is this based on simulated annealing but instead of swapping two pixels per frame you're swapping, well, potentially a lot more?", "iq, 2021-05-28Very cool!", "", "(also, not that performance is going to change much, but Buffer A can be deleted, right?)", "FabriceNeyret2, 2021-03-31hey, I missed that !", "paniq, 2019-07-10oops you're right. fixed.", "Diede, 2019-07-10Nice work! How does this relate to Simulated Annealing? Does this \"change limit\" work the same way as temperature in Metropolis?", "", "One discrepancy I spotted in the code: in \"quantify_error\" your kernel ranges from -R to R2, which seems odd. Shouldn't it range from -R to R?", "paniq, 2019-06-02the chance limit check is because the simple xor performed to transform p0 to p1 swaps entire block regions as the bit masks don't have enough entropy. so if we allow all swaps, it just swaps everything all the time, and nothing converges.", "demofox, 2019-06-01Weird observations:", "", "you can remove the force_limit and it seems to converge in 1/10th the time (2s instead of 20s for me).  You mentioned that it helps shuffle the data, but neat to know that if you started with (good histogram) white noise that maybe that'd be a way to go.", "", "Removing the chance limit check (regardless of whether force limit check is there) makes it really blocky though and it doesn't converge, which i'm surprised about!  Do you know why that is?", "", "If not, I wonder if it's because it's the max of two chances so isn't uniform anymore?", "", "Is it really swapping just 2 pixels every frame? Maybe it isn't and the 50% chance to swap helps avoid problems?", "", "I can drop chance_limit down to 0.1 and if no other changes are made, it seems to converge at the same rate.", "Mr_F, 2019-05-31Maybe", "paniq, 2019-05-31Mr_F: That's just your brain's pattern detection leading you on a wild goose chase. :-)", "Mr_F, 2019-05-31Here is it: http://geom.io/bluen_ver.png", "paniq, 2019-05-31Mr_F: could I see a screenshot of that?", "Mr_F, 2019-05-31Nice. I can see some vertically repeating values though, almost 12px lines", "paniq, 2019-05-30The output has different brightnesses on different computers because the technique only performs pixel swaps and the original seeding image contains a disproportionate number of values due to the unpredictable window size of shadertoys. Ideally, each value should occur with the same frequency.", "Sh8ly, 2021-04-12Vizzy.io are using your shader, congrats <3", "wecall, 2021-03-20Beauty!", "lannix, 2021-01-26Nice!", "Lumos, 2020-07-20Very nice shader  Could i use it when VJing?", "toto263, 2020-04-28@CBS, Thank you!", "rawoul, 2020-04-26Awesome result ! Would you mind making it available in public+api visibility ? That would allow showing the shader in a third party shadertoy viewer. Thanks !", "CBS, 2020-04-25Feel free to use it. I am happy you all enjoying this shader so much.", "toto263, 2020-04-25Can I use your code in my commercial music player?", "cmarangu, 2019-12-05i was moved by this", "xxyxxy, 2019-06-18galaga '19", "CBS, 2019-02-13Feel free to use the shader as you wish. :-)", "jpkelly, 2018-04-10This is beautiful!", "May I please use it for an upcoming VJ gig?", "lq_ys, 2017-12-14nice job!!!", "utgarda, 2016-01-13CBS, it's awesome, and we just love it. You didn't put any license info, means it's under ShaderToy's default non-commercial share-alike. We really want to use it in a videogame. Could we discuss that?", "shihuadan, 2015-09-10Look so beautiful!", "garcia, 2015-04-07This is so amazingly beautiful. The choice of music is absolutely perfect. I could literally watch this for hours. Well done!", "Zethell, 2014-11-07For an ever more beautiful experience, change line 24 to", "float strength = 15. + .03 * log(1.e-6 + fract(sin(iGlobalTime) * 4373.11));", "antonOTI, 2014-09-01this goes so well with the music", "Cool_Flow, 2013-09-03Very beautiful and amazing.", "CBS, 2013-08-21Thanks Guys", "zle597, 2013-06-17max cool !", "poljere, 2013-06-15Like it!", "Danguafer, 2013-06-15Beautiful indeed", "iq, 2013-06-14pretty cool", "CBS, 2013-06-13Thank you :-)", "srtuss, 2013-06-13beautiful.", "demofox, 2017-12-22Thanks for the link to the paper about this technique!  It uses finite differences, that makes me wonder if it could be improved by using dual numbers for automatic differentiation?", "Duke, 2017-12-21Cool!", "ljw, 2022-08-01Giving you a Chinese world niubi!", "jt, 2022-01-14Awesome", "phomo, 2021-04-04This is really cool, thanks for sharing!   I'm researching procedural weather systems to drive the clouds around planets in my space game, and this is the kind of stuff I'm on the lookout for", "oneshade, 2020-11-14If you put the code and channels for the Image tab into Buffer D you could then set up the Image tab to either draw Buffer D or project Buffer D onto a sphere (maybe raymarching?) based on the toggle state of a key. The toggle states for keys is in the second row of the keyboard input.", "oneshade, 2020-11-14Wow!", "davidar, 2018-07-05Thanks everyone", "", "I added an option to display an elliptical map projection, projecting it onto a sphere properly will take a little more effort.", "FabriceNeyret2, 2018-07-02what about reprojecting this on the sphere ? (could be a keyswitch)", "tversteeg, 2018-07-02Wow, amazing! Can't find to see the final epic shader where you combine everything", "BigWIngs, 2018-06-30haha.. my first reaction was literally 'Woaahh'. I guess I wasn't the only one ;)", "", "WOAHHH!", "aiekick, 2018-06-30super nice", "wyatt, 2018-06-30woah!!!", "Dave_Hoskins, 2018-06-30Super nice.", "I've always loved this one:- https://earth.nullschool.net/#current/wind/surface/level/orthographic=-8.77,36.76,490/loc=-29.247,40.865", "FabriceNeyret2, 2018-06-30wooow !", "davidar, 2018-06-30Thanks", "", "I ran out of room in the description - this is what the actual wind flow patterns look like, for comparison:", "", "https://nbviewer.jupyter.org/gist/davidar/229193b04bdb0dd8cba20dc31592625a", "", "A noticeable seasonal change is the South Asian Monsoon, where the wind direction reverses for part of the year.", "MacSlow, 2018-06-30Wow, that is massive... very nice!", "iq, 2023-01-13I defaulted to the mathematically correct version by default, try again", "me_123, 2023-01-13it looks wrong when the sphere is close to the ground", "iq, 2021-06-29I removed the pow(), and no need for square roots neither", "Jodie, 2021-06-29another cheap approximation that works well (without pow)", "res = .5*(res+1.-sqrt(1.-1./h2));", "cmarangu, 2018-10-05yummy", "thewhiteambit, 2018-09-12hey, great work. stumbled here in research of your nice quad-mapping shader. could not resist to slightly improve sphere intersection speed when no distance is needed. Another improvement can be to assume sph.w is stored in a squared form. but since a unit-sphere w=1 is used this has at least no effect here.", "", "have a look at sphIntersect vs. sphDistance here, you might find it usefull:", "https://www.shadertoy.com/view/XlVyzG", "smallpoly, 2018-08-26This is so frigging nice.", "Ikaros, 2015-09-28Jeez, of course you already did that in your repelling shader ;_;", "Ikaros, 2015-09-28Assuming you can use the to-sphere vector ((sph.xyz - pos) / sph.w) as input without adding calculations, and also assuming you don't need intersection, this gives the same result:", "", "float sphOcclusion(vec3 di, vec3 nor)", "{", "float sqL = dot(di, di);", "return dot(nor, di) * inversesqrt(sqL * sqL * sqL);", "}", "iq, 2014-11-13I don't know, I haven't tried... Intuitively I'd say \"it shouldn't work\", but it's always good to try...", "Dave_Hoskins, 2014-11-11So I can scale 'di' to make ellipsoids? It didn't look quite right when I tried it.", "iq, 2014-11-10This technique became popular a few years ago, in demos and games ^__^.", "", "Readyatdawn's The Order 1886 uses this too, through capsules skinned to the characters to cast analytic occlusion in the environment. It seems they came with an closed formula (or they have backed it into textures).", "", "The UE4 demo for the Crescent Bay VR hardware from Oculus also uses this technique for creating contact shadows of the characters on the ground.", "", "There was another game who's name I forgot that was using the same technique as well.", "", "This is what I used in this shader as well to do both occlusion and emission https://www.shadertoy.com/view/4sB3D1", "Dave_Hoskins, 2014-11-10A very nice demo! Does this hold true if I multiply 'di' in sphOcclusion to make ellipsoids?", "", "I'm asking because I think the game 'The Last of Us' uses this technique for soft shadows from characters.", "Ref.: http://miciwan.com/SIGGRAPH2013/Lighting%20Technology%20of%20The%20Last%20Of%20Us.pdf", "Although they pre-compute the falloff into a texture.", "Raistlin_fuego, 2022-12-06Incredible!! :o", "SadTShaders, 2022-02-01So beautiful!", "Trospy, 2022-01-01I love it", "jarble, 2021-03-01The stream seems to get narrower as it falls: there must be a way to make the radius constant instead of tapering.", "Imsure1200q_1UWE130, 2018-10-25one things.", "HOW IS IT 60fps in my pc?!!!!!!", "vadevaman, 2018-10-02this looks amazing, have you noticed the artefact, that it produces, can easily be converted to depth of field! X)", "agnesska, 2018-08-28Awesome! I like it", "squeakyneb, 2013-12-13Same results as PauloFalcao. Cranked the iterations up, ran WAY faster than I expected it to. I don't even have a particularly high-end GPU (ATi 6770M). This is just a super-smooth bit of code. I didn't notice any improvement past about 100 iterations, but I could turn it up to 400-500 before I noticed any frame-rate drop in fullscreen mode (1366x768). Fantastic work. Hella fast implementation.", "jesaro, 2013-04-01Black Magic", "huttarl, 2013-03-19Very nice. The adjustable quality setting is appreciated - my graphics hardware is not like Paulo's! But yes, looking at it makes me thirsty!", "ushiostarfish, 2013-03-15unbelievable", "ushiostarfish, 2013-03-15unbelievable", "PauloFalcao, 2013-03-08I'm thirsty! LOL Very, very nice", "On my current macbook pro (13-inch, Mid 2010) i have almost no compilation time, less than one second. And I can change kRaymarchMaxIter to high values like 256 with no significant performance diference, although I do not notice a big visual difference after 128 value.", "CPU, 2013-03-08wow - looks like mercury in high quality mode!", "_pwd_, 2013-03-08damn nice.", "Voltage, 2013-03-08Wow!", "poljere, 2013-03-08Really really great stuff!", "ushiostarfish, 2013-03-08It is magic.", "iq, 2013-03-07impressive, as usual!", "Animals_A, 2016-03-17Nice!", "Here is converted version for Unity (my first try): http://pastebin.com/G6T1SYYV", "dynamite, 2014-08-13Thanks", "antonOTI, 2014-08-13Congratulation", "TDM, 2023-04-12@iq sure", "iq, 2023-04-07Hi TDM, any change you disable supersampling by default or at least reduce it from 9x to 4x? It's running very slowly even in high end PCs ^__^", "Koagula19, 2023-03-16it looks good", "pizzahollandaise, 2023-01-27Great", "zero_ou, 2023-01-27I wonder if you could squeeze any blood out of it?", "mikeyaboy, 2023-01-26rock", "yendo19, 2022-09-09Mm yes very wet indeed. Moist", "raabix, 2020-04-08That's the proof: GLSL can be turned into rock", "Ecter, 2019-08-26Seeing some strange artifacts, probably due to use of sin and cos at large input values.", "ttoinou, 2018-07-20Featured in this video  !", "domvalles, 2018-02-21Noob question: What's the nrm value in the specular component all about?", "TDM, 2017-08-10@ttoinou", "Hi, i don't mind", "ttoinou, 2017-08-10Hi TDM, I'm going to use this shader (and the Seascape one) for a Shadertoy Best Of video !", "EntityBlack, 2017-03-15@iq @TDM", "wow, really thanks for that. I can see this now:", "https://www.dropbox.com/s/mzesf6xca3ly6pt/wet-stone-fixed.jpg?dl=0", "There are few artifacts but it is working much better", "", "PS: preview with Intel HD 515", "TDM, 2017-03-15Tried to fix that. Is it works on Intel now?", "iq, 2017-03-15The problem on the Intel cards can be solved by changing the random generators from using huge numbers to small numbers, and then changing the EPSILON from such a small number to something bigger. Then I get the rock to look good as expected on my Intel card.", "EntityBlack, 2016-05-19@MichaelPohoreski", "I tried, it doesnt help :-/ (I also tried to reinstall the driver, both older and newer versions, and run Intel diagnostical test, nothing).", "The problem is with hash/noise function for sure. Other demos based on this are bugged too. The result of gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT):", "WebGLShaderPrecisionFormat {rangeMin: 127, rangeMax: 127, precision: 23}", "", "Could someone confirm this particular noise function should work well with precision above?", "MichaelPohoreski, 2016-05-17@EntityBlack Looks like a bug in the GPU driver.  Does it work if you add this line at the start?", "precision highp float;", "EntityBlack, 2016-03-09My stone look like this (Intel HD 515):", "https://www.dropbox.com/s/4na0rdi8tclptvf/damaged_stone.png?dl=0", "", "Could someone try to explain it? I have problems with other demos too.", "jt, 2015-11-19Awesome!", "vortex, 2015-09-14Better than many off-line renders!", "anastadunbar, 2015-05-12The displacement and lightning made it look very realistic.", "MichaelPohoreski, 2015-01-25@P_Malin I see what you did there :-)", "P_Malin, 2014-11-07This rocks!", "Andre, 2014-11-05You found the formula for stone ;)", "jmpep, 2014-11-05Amazing! Actually doubly so: not only the results are incredible but also the code is very well organized and easy to follow... thanks for that!", "2SilentJay, 2014-11-04beautiful stone simulator!", "morgan3d, 2014-10-22Wow!", "poljere, 2014-10-22Beautiful!", "yonatan, 2014-10-21Sorry, I must have made a mistake somewhere, this still crashes though I could swear it worked when I tried it earlier. The sqrt() version still works for me: https://www.shadertoy.com/view/ld2XRK", "", "I'm stumped as to what could be the reason for all this...", "TDM, 2014-10-21fixed. thank you!", "yonatan, 2014-10-21Beautiful, but crashes here (linux, chrome and firefox, 8500gt w/ndivia binary driver).", "", "It works if I rewrite diffuse() (line 87) as either:", "return pow(max(dot(n,l),0.00001), p);", "or:", "return sqrt(max(dot(n,l),0.0)); // since p is 0.5", "otaviogood, 2014-10-21It looks like someone put a photo of a rock on shadertoy. Looks amazing.", "iq, 2014-10-20Looks fantastic, super super good!", "Dave_Hoskins, 2014-10-20Thanks, it really adds to the freshly scuffed edge look.", "TDM, 2014-10-20yes, you're right. edges are getting by tracing along negative normal. it's the same technique as ambient occlusion.", "Dave_Hoskins, 2014-10-20This is great!", "Looking through your code, I see it's a sphere with spherical chunks removed from the outer area plus some 3D noise displacement. Nice one, so effective.", "What I'm not sure about is how your doing the sandy edges, are you burying into the object through negative normals to find a density? I can't quite figure it out.", "Thanks.", "gloinart, 2014-10-20I really love your work TDM", "iapafoto, 2014-10-20Incredible !!!", "frankenburgh, 2014-10-20Wow! This really rocks ;)", "4rknova, 2014-10-20Awesome!", "PauloFalcao, 2014-10-20Looks pretty real", "vtlmks, 2014-10-20Really nice!", "davidar, 2022-05-16Thanks", "", "@thepinkpanzer Pretty much, yeah. There is a heightmap but it isn't being used for any kind of displacement in the rendering", "thepinkpanzer, 2022-05-14Awesome! So is this just a normal map on top of a sphere then?", "jt, 2022-01-14Fantastic!", "MacSlow, 2018-07-13Oh, that's a very nice moon!", "ocb, 2018-07-08Perfect in full screen!", "Nice improvement.", "davidar, 2018-07-08Thanks", "", "Updated with Shane's suggestions, fullscreen should work now", "iq, 2018-07-08Very nice!", "aiekick, 2018-07-07very very cool", "BigWIngs, 2018-07-07This is awesome! Shane is right on with the aliasing trick, its simple, and would make this thing perfect.", "Shane, 2018-07-07Love it. Really pretty. If you wanted, you could take advantage of the fixed camera and hack in some antialiased edges with something along the lines of the following:", "", "// Second last line.", "fragColor.rgb = mix(fragColor.rgb, vec3(0), smoothstep(0., .02/length(p), length(p) - .93));", "", "As for fullscreen, I usually store the current screen resolution in one of the channels, test for a change, then update accordingly. Catering for screen changes can be tiresome at times. Something that looks nice in a small window might not look the way you want it to at fullscreen, so you wind up having to do extra work making variables resolution dependent, etc.", "ocb, 2018-07-07When I switch to full screen, the sphere becomes plain gray.", "Is there a way to restart shader once in full screen?", "ocb, 2018-07-07Nice!", "davidar, 2018-07-07How close of a match do you mean?", "zproxy, 2018-07-07sweet. can you make one where the craters match the real moon?", "ferhatico, 2020-08-03Wow, awesome work.", "SabRango, 2020-01-07XD!", "Daimoth, 2019-02-01Gorgeous.", "akhgary, 2018-05-05holly.... size of the code", "ceci, 2017-12-03love this >.<", "fatcloud, 2017-07-16This looks sooooo good. Is this available for commercial license?", "CaliCoastReplay, 2016-08-06This is AAA level and should be in a AAA game or movie", "cejockel, 2015-09-09eye candy <3", "bitek, 2015-06-27A mazing!", "sqlin, 2015-06-25I want to write GLSL shader like this ,but I do not know what to learn.Can you tell me? Thank you very much", "gyabo, 2015-06-24Cool!", "w23, 2015-06-24insane", "dila, 2015-06-24this is really good. i need a new computer", "noby, 2015-06-23The lens flare, the lens flare!", "Kali, 2015-05-17Hats off! Loved it since the thumbnail, very impressive use of color and contrast, gives an amazing mood and ambientation.", "Dave_Hoskins, 2015-04-16Oh that's VERY nice, especially the spoked pentagram lens effects.", "coyote, 2015-04-16WOW! This is phenomenal!", "Lio, 2015-04-16Super!", "iapafoto, 2015-04-16wow wowo wow !!!", "GregRostami, 2015-04-16Sooooooo PRETTY!!", "otaviogood, 2015-04-16wow, pretty cool that you can change planet!", "aiekick, 2015-04-15love it", "kuvkar, 2015-04-15looks awesome!", "iq, 2015-04-15super pretty!", "jt, 2022-10-28Fantastic!", "tbgilson, 2021-01-18This runs at 60fps on a 13-year old dell laptop with intel 4000 graphics.", "gcstudio, 2019-02-26now i can make my fluff ball game", "Holanderman, 2016-05-12I cleaned up scene and mainImage, this should run much faster.", "", "vec4 scene(vec3 ro,vec3 rd)", "{", "vec3 p = vec3(0.0);", "const float r = 1.0;", "float t;", "bool hit = intersectSphere(ro - p, rd, r, t);", "", "vec4 c = vec4(0.0);", "", "if(!hit) {", "return c;", "}", "", "vec3 pos = ro + rd*t;", "", "// ray-march into volume", "for(int i=0; i<furLayers; i++) {", "vec4 sampleCol;", "vec2 uv;", "sampleCol.a = furDensity(pos, uv);", "", "float validSample = float(sampleCol.a > 0.0);", "float inValidSample = float(sampleCol.a <= 0.0);", "sampleCol.rgb = furShade(pos, uv, ro, sampleCol.a) * validSample + sampleCol.rgb * inValidSample;", "// pre-multiply alpha", "sampleCol.rgb *= sampleCol.a * validSample + inValidSample;", "c = (c + sampleCol*(1.0 - c.a)) * validSample + c * inValidSample;", "", "pos += rd*rayStep;", "}", "", "return c;", "}", "", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "vec2 uv = fragCoord.xy / iResolution.xy;", "uv = uv*2.0-1.0;", "uv.x *= iResolution.x / iResolution.y;", "", "vec3 ro = vec3(0.0, 0.0, 2.5);", "vec3 rd = normalize(vec3(uv, -2.0));", "", "vec2 mouse = iMouse.xy / iResolution.xy;", "float roty = 0.0;", "float rotx = 0.0;", "", "float greaterThanZero = float(iMouse.z > 0.0);", "float lessThanOrEqualZero = float(iMouse.z <= 0.0);", "rotx = rotx * lessThanOrEqualZero + (mouse.y-0.5)*3.0 * greaterThanZero;", "roty = roty * lessThanOrEqualZero + -(mouse.x-0.5)*6.0 * greaterThanZero;", "roty = roty * greaterThanZero + sin(iGlobalTime*1.5) * lessThanOrEqualZero;", "", "ro = rotateX(ro, rotx);", "ro = rotateY(ro, roty);", "rd = rotateX(rd, rotx);", "rd = rotateY(rd, roty);", "", "fragColor = scene(ro, rd);", "}", "cyanux, 2014-06-14Good, good and good", "Nema, 2013-10-25this is really awesome!", "simesgreen, 2013-06-17fizzer - Ok, I made your change to get rid of the seam, although a rotate per pixel is more expensive", "fizzer, 2013-06-13Ah and well, I should have been more precise - you shouldn't just replace line 30, you need to also move the new line up to above the declaration of uv since the replacement rotation needs to occur before uv is initialised. I'm sure you can understand what I mean!", "fizzer, 2013-06-13Damn, you beat me to the punch with this one! =D. This is very very nice, except there is a visible seam. You can remove this seam by replacing the '// curl' line (should be line 30 I think) in cartesianToSpherical() with the following:", "", "p = rotateX(p.zyx, -cos(iGlobalTime*1.5)*t*t*0.4).zyx;", "", "That is, provided that you move rotateX() above cartesianToSpherical() so as to avoid an undefined call error. Of course this results in more work being done, but the seam should disappear. =)", "Danguafer, 2013-06-11gloom, the necessary information for measuring the mouse movement derivative is not there. So, he wouldn't make it.  In fact, no information from the previous frame is accessible.", "gloom, 2013-06-11Since there is mouse-control, is there any way to get it to shift the \"fur\" in relation to that? Rotating it with the mouse now does not change those, unfortunately.", "Danguafer, 2013-06-11By changing the texture, it really feels like a furball", "CPU, 2013-06-05great stuff", "simesgreen, 2013-05-30Eiffie - thankd, well spotted! It's a good thing I don't do this for a living, err...", "eiffie, 2013-05-30Love it but also had black screen so simply skipped furShade accumulation when furDensity equals zero. The problem is in calculating the normal which is zero length.", "simesgreen, 2013-05-30Yeah, it's fun to change the textures - channel 0 determines where the hairs start, and 1 is the color map. You can also modify the value \"furThreshold\" in the code to change the density of the fur (the threshold above which a pixel emits hair).", "movAX13h, 2013-05-30It looks very realistic with the wood texture on channel 0 and any of the darker textures on channel 1. Like short cat fur!", "iq, 2013-05-29Sure, sure. It's useful too for mid-ground trees. But it's always cool to see such things here. Also, I think your executions is pretty good.", "simesgreen, 2013-05-29thanks for the feedback everyone!", "", "iq - cheers, although there's lots of prior art for raymarching though shells (see \"parallax occlusion mapping\" etc.)!", "", "I cleaned up and optimized the code a bit, and made that change for the stupid Mac compiler.", "raja, 2013-05-29Changing line 156 to", "", "float diff = max(0.0, dot(N, L)*0.5+0.5);", "", "helps on a Mac as well.", "Chaeris, 2013-05-28Furmark makes me have 40FPS... And looks less complicated than this one!", "movAX13h, 2013-05-28It's so fluffy!", "Dave_Hoskins, 2013-05-28I guess all of the noise/fbm/hash functions can be deleted? Not that it matters. ;)", "iq, 2013-05-28I can confirm that indeed, that change makes the shader work in Linux. I cannot explain why, though.", "bekre, 2013-05-28> Black screen on a Mac !!", "", "Works for me under Windows, but I get a black screen when using Linux, too.", "", "But changing line 156 to", "", "float diff = max(0.0, dot(N, L)*0.5+0.5);", "", "helps (at least for my Linux system).", "iq, 2013-05-28This is seriously good, man. Not the shading as much as the raymarching through the shells. Super cool!", "raja, 2013-05-28Black screen on a Mac !!", "Dave_Hoskins, 2013-05-28Wow!", "FabriceNeyret2, 2020-04-22@CyberMousey : could you make a list of differences and requirements for VDJ compatibility ? ( maybe rather in the facebook community group that here )", "CyberMousey, 2020-04-22Can we get an update to this shader so it works in VDJ 2020", "Armaciek, 2020-02-17Ah, the nostalgia. Nice!", "Nina9, 2020-02-10pacman, i love it", "FabriceNeyret2, 2020-02-06or better:", "fragColor = .3* texelFetch(iChannel0,ivec2(fragCoord)/8,0); return ;", "FabriceNeyret2, 2020-02-06in first line of main, #280,", "type fragColor = texelFetch(iChannel0,ivec2(fragCoord)/8,0); return ;", "and see :-)", "JoshScholar, 2020-02-06Is the basic design of these kinds of shaders that every single processor makes the same decision that all of the others do - ie you're running the same game logic redundantly for every pixel?  Where is state stored.  Is it stored once and shared or stored in a buffer once per pixel with the game state redundant times the number of pixels?", "spalmer, 2020-01-31Please try https://www.shadertoy.com/view/tl3XR4", "If and when you feel confident enough, maybe an experimental \"interactive sound\" tab so existing toys aren't affected?  Would need BufferA access.", "spalmer, 2020-01-30Nice.  It works fine for me.  I see you tried ScriptProcessor.  I haven't uploaded the webgl2 version yet, but you may want to see it.  I've been getting by with buffers 1/4 the size of yours.  But I'm running the glsl async so when onaudioprocess gets called, all it must do is copy some floats over.  Seems key to ensure it keeps up with such small buffers.  IMHO it's better to have dynamic sound with poor latency than completely non-dynamic sound.  Best of luck in any case.", "iq, 2020-01-30I have experimented a lot with realtime synthesis in WebAudio+WebGL in the past, no worries. This is one of the (many) experiments, http://iquilezles.org/trastero/soundtest/, but unfortunately it just doesn't work well enough. I have a few ideas to try, but the chances I am able to get it to work successfully with technology of 2020 is still very low.", "spalmer, 2020-01-29early version of tech prior to adding glsl shaders:  https://www.shadertoy.com/view/3lGGW3", "Further comments there, please.", "realcyg, 2020-01-29Please somebody add sound. I have very little Idea about how this code works but it is amazing. spalmer, do you have a link or something ?", "spalmer, 2020-01-29I wrote a 6kiB WebAudio page that uses WebGL2 to compute the buffers just in time, low latency.  Only tested in Firefox on Windows 10 so far.  If you're interested, I'd be happy to show and discuss.  Let me know.", "spalmer, 2020-01-07Can we get some sound please?  You are like 2 steps away from having a full on game hosting platform.    That plus a custom-sizeable state buffer, and we're all set.  Oh, maybe joystick support.  Persistent storage.  Minor stuff at this point.", "Taron, 2019-07-25Yah, you're my hero, iq! Too flipping clever and very pretty at it, too! Fantastic job!", "ollj, 2019-03-08looks like iq was too busy for 3 years to add a second paccman level ;)", "gcstudio, 2019-02-26this is a piece of art by itself.", "realcyg, 2018-06-04wow", "Zibri, 2017-09-27Best possible CRT shader I have seen so far:", "https://github.com/libretro/glsl-shaders/blob/master/crt/shaders/crt-geom.glsl", "duvengar, 2017-09-13Unbelievable shader iq! I loved to play!", "Dave_Hoskins, 2017-09-09See: http://gameinternals.com/post/2072558330/understanding-pac-man-ghost-behavior", "..they have sophisticated behaviours", "Dave_Hoskins, 2017-09-09In the original Pac-man game, Iwatani's ghosts move very differently, and in a very specialised way!", "Skalbe, 2017-09-09First time in my life I actually beat the first level of this game. I`m 29.", "soup, 2017-09-07download button where you hiding on this page .....", "sgoal, 2017-09-06NB!!!", "tamasaur, 2017-01-17the glow is really nice!", "Tom94, 2016-06-05wow, this is amazing!", "Ippokratis, 2016-06-02cubby208 I had a hard time understanding it myself, I watched this video http://on-demand.gputechconf.com/gtc/2016/video/S6717.html and I made this simplified shader https://www.shadertoy.com/view/4sVSDm", "The idea is that you take the user input in BufA, map it to a color for the texture BufA and then use the BufA texture color to define movement of a dot in the Image.", "cubby208, 2016-05-16I see how you appear to be holding game data inside of a texture.  How exactly did you create this texture? Also can you show me a line of code where the buffers send data between each-other?  I am trying to wrap my head around this.", "tjohnman, 2016-05-14You never fail to blow my mind... 8.", "iapafoto, 2016-04-25Incredible work !  PacMan", "MatHack, 2016-04-18Oh my god ! Nice", "ollj, 2016-04-18error code in buffA on win7 chrome browser geforce960:", "", "\"refference can not be used as an l-value, not natively addressable, forcing loop to unroll\"", "error x4505 \"maximum temp register index exceeded\"", "//above error appears 3 times.", "\"failed to create d3d shader\"", "bytewave, 2016-04-14thats sooo cool as always", "ProgC, 2016-04-10Awesome!!", "Shane, 2016-04-08Awesome, and so compact. Playable too. Sending the eaten ghosts (their eyes, in particular) back to the center box via a shortest path algorithm would make a nice addition, but I'm guessing this shader is already complicated enough.", "iq, 2016-04-08Added filter ^_^", "iq, 2016-04-08Yes, got it for pacman (line 171) but didn't have time for doing the ghosts, so I backed up. I should do that, and some CRT filter ala Timothy Lottes (XsjSzR). and wait time between retries.", "Dave_Hoskins, 2016-04-07I like the way they glow, it adds that CRT flavour to it.  it.", "Couldn't you do sub block movement?", "AndrewNZ, 2016-04-07OK, now I've looked at the code.  Amazing!  For such a thing to be done in a shader I was expecting spaghetti.  No, this is a beautiful design.", "AndrewNZ, 2016-04-07Incredible.  I haven't even looked at the how, but the result is amazing.  You are the master.", "Artoo, 2016-04-06Amazing", "Kastor, 2016-04-06OMG ! So cool", "FabriceNeyret2, 2016-04-06well, 7791+6803=14594, still :-) .", "", "But I like the nice design of things like the map, for instance, or the store/load API !", "P_Malin, 2016-04-06Nice, where is the rest of the code? Its so tiny!", "FabriceNeyret2, 2016-04-06yeeees ! finally ! :-)", "otaviogood, 2016-04-06This must be what you live-coded at the nvidia conference this year. :P", "GregRostami, 2016-04-06Unbelievable!!", "demofox, 2016-04-06Totally awesome, of course!  Nice one iq (:", "", "For 2D games, I've been kinda thinking it might be neat to render a sprite sheet in advance.  Not sure though if that would buy anything worth while, but seems like there might be.", "qintianchen, 2022-11-05Hi, knarkowicz, I wonder why it is multiplied by (MATH_PI * ndotl) in the ending when computing specular?", "jt, 2022-09-17wow!", "manhnt9, 2022-06-21Thanks for the demonstration !", "I'm wondering how do you create the reflection map (the blurry one) ?", "Is there a way to determine max reflection blur based on roughness, or it's just try a blur threshold and see from experience?", "Rrrrichard, 2022-05-10Nice Illustration!", "elenzil, 2021-11-06wow!", "firegump, 2021-01-14cool!", "mosaic, 2019-07-16This shader was linked to on https://learnopengl.com/PBR/Theory", "Nice one", "nyu, 2019-07-16if I have to nitpick there is no explanation when you click on \"Lighting\" on how diffuse is mixed with specular. you have to find the line 493 \"color = diffuse + specular;\" to know that it's \"added\"", "ArchJay, 2019-07-16Nicely done!", "demofox, 2019-07-16Very cool, thank you for making this and sharing it", "shau, 2019-05-13Thank you", "knarkowicz, 2019-05-13Env map is computed by mixing three sources (unfortunately at that time it wasn't possible to prefilter a cubemap in Shadertoy). Diffuse version is SHIrradiance (Spherical Harmonics coefficients), rough specular is iChannel1 and glossy is iChannel2. So all three of those need to be changed at once - or someone would need to replace all those hacks with proper cubemap prefiltering .", "", "Regarding light color - it's a mistake, I've just added missing multiply into the source code.", "shau, 2019-05-12A couple of years too late but thanks for sharing this. I've been using it for some time now without fully understanding it. I have a few questions?", "If I have a scene with reflections would I plug the reflection colours into the env1 variable?", "If my light source was coloured would the diffuse light term contain the colour? From what I can tell from this example only the specular term is effected by the lightColor variable. If I have multiple light sources what terms would I need to add/mix.", "Sorry for so many questions", "Kind regards", "knarkowicz, 2019-01-10@ejosiah Hello, I started from https://iquilezles.org/www/articles/distfunctions/distfunctions.htm It's a great explanation how all this stuff works.", "ejosiah, 2019-01-09Hi knarkowicz, I'm trying to understand the maths behind the boolean operations you used to create the model, is there any article or links you can suggest for this?", "knarkowicz, 2018-12-01Yes, light's fresnel looks weird, most likely due to the light position. I didn't implement light's rotation, so it's hard to say. Anyway, light's fresnel should computed with ldoth, as it's an angle between light's direction and microgeometry normal - h, which describes how much of light's energy is reflected and how much refracted. See https://blog.selfshadow.com/publications/s2013-shading-course/hoffman/s2013_pbs_physics_math_notes.pdf for in depth description (also explains why EnvBRDFApprox uses a different angle).", "CliqCity, 2018-11-28Thanks for posting. This is really helpful to solidify a lot of concepts found in PBR literature.", "", "I've got a few questions about the fresnel term. I noticed that isolating the fresnel term returns the environment specular color. I modified the code to return fresnel term and was surprised to notice that I see only a solid base color instead of brightening of the base color along the edges of the geometry where the ndotv vectors approaches 0. When calculating the fresnel term with ndotv I see more of what I'd expect, which I see is an input into EnvBRDFApprox.", "", "All this to ask why is fresnel calculated with ldoth or vdoth instead of ndotv or ndoth?", "Hexus, 2018-01-23This is absolutely wonderful!", "Duke, 2017-11-16Very nice!", "knarkowicz, 2017-09-15Don't worry. When I was working on my first Shadertoy, everything was also hard for me.", "", "Most branches (especially small ones should be) are compiled to cmov's (static branches). Everything is still processed no matter what conditions you will have. Using if/else would just save me one cmp instruction here or smth.", "ingagard, 2017-09-15How the heck did you come up with that control panel?? Beutifully done!", "Shit this is true skill.... this makes me feel small in the world programmers. LOL", "", "One question...... Why do you use if, if, if and not if, else if, else if. Doesn\u00b4t shaders care about that and continue processing after one condition in an if else case is met?", "zproxy, 2017-08-05cool", "Harha, 2017-08-03This is very nice.", "ollj, 2017-08-01ideologies on text display:", "", "yes, using \"sprite sheets\" for anything is good for repetitive things, like glyphs.", "", "the trick to text performance is tesselation, 1 tile per glyph, using pMod2() of hg_sdf, or something simpler with more constrains. the important part is to NOT make a loop like in a tesselated voronoi, and to NEVER care for neighbor glyphs for other reasons than typesetting linebreaks or non-uniform glyph widths (typesetting is done before printing).", "", "non overlapping tiles == non overlapping glyphs result in much better performance. you should only have 1 glyph per frgment and address the tileID per a=uv.xy; fract(fract(a)*b+c)*d+e... glyphs should be as atomic as possible, like a toy-train-track that only allows 90deg turns, like lego blocks. note that they do not allow overlapping in 3d space, treat your shader like that. Glyphs may share the same subroutines, enveloped by transformations. Glyphs can be composed of smaller tesselated sub-glyphs. Glyphs may be defined as array of smaller sub-glyphs in a tesselation that is smaller than a glyph. 2 different glyphs may or may not share the same sub-tesselation. it may make sense to rotate a sub-tesselatio for glyphs with more diagonal lines.", "if a glyph is defined as array on a tesselation, it can modulo-shift on a grid that is smaller than the glyph.", "", "you may chose to use multiple overlapping tesselations for seamless offsets or multy-layers, but this usually makes things less efficient. it makes more sense if one tesselation is scaled or offset differently from another tesselation:", "[url=https://www.shadertoy.com/view/Xt23zG]4 offset ovrlapping tesselations[url]", "", "it is \"relatively\" easy to define non univorm tiles quadtree) without overlap for traversal or typesetting: the context of defining tand addressing them for typesetting may be tricky and novel extension to https://www.shadertoy.com/view/Xs2czK", "", "treat any glyph as a combining character on tiles where tiles to not overlap, but may have sub-tiles and transformations.", "", "You then can tread a text as a glyph that is composed of an array of glyphs.", "kuvkar, 2017-08-01excellent example, thanks for doing this", "knarkowicz, 2017-08-01Thanks you for nice comments!", "@reinder: No problem. Cool that you found that useful. I wrote a special encoder app for that, but I guess you already have your own", "@MrShoor:", "1. It looks different, because I use a more correct height correlated Smith term (it may not be well visible here, as I don't have a properly prefiltered HDR env map).", "2. There is gamma space conversion at line 515 of DrawScene.", "MrShoor, 2017-07-31Hello. Your GGX geometry term is incorrect. GGX G is Smith based GSF. This is mean symmetric shadowing from light direction and view direction. Because it should be the multiplication of View term and Light term. But you used summ: return 0.5 / max( visV + visL, 0.00001 ); You can try this function:", "", "float VisibilityTerm_ (float roughness, float NdotV, float NdotL){", "float roughnessSqr = roughness*roughness;", "float NdotLSqr = NdotL*NdotL;", "float NdotVSqr = NdotV*NdotV;", "float SmithL = (2.0 * NdotL) / (NdotL + sqrt(roughnessSqr + ( 1.0-roughnessSqr) * NdotLSqr));", "float SmithV = (2.0 * NdotV) / (NdotV + sqrt(roughnessSqr + ( 1.0-roughnessSqr) * NdotVSqr));", "float Gs =  (SmithL * SmithV);", "return Gs;", "}", "for looking at differences between your geometry term and correct geometry term.", "", "And one more thing. Apply PBR for nonlinear color space - is wrong. Good way of raw approximation is pow function after DrawScene like this:", "DrawScene( color, p, s );", "color.rgb = pow(abs(color.rgb), vec3(1.0/2.2));", "Shane, 2017-07-31Awesome effort, as usual.", "reinder, 2017-07-31Super nice (and useful  presentation!", "", "I have 'borrowed' your method of rendering large amounts of text for my own shader. I hope that is fine with you. It reduced the compile time a lot.", "knarkowicz, 2017-07-31I'm already here at SIGGRAPH (from Saturday).", "GregRostami, 2017-07-31Are you coming to Siggraph in LA?", "knarkowicz, 2017-07-31Text is encoded just like sprites (with 4 chars per uint). This really helped compilation and perf, as now entire text block rendering boils down to a single texture fetch. Anyway, it's time to upload this shader and enjoy Siggraph", "nasana, 2020-01-30> Dave_Hoskins", "Thanks for your comment!", "I chose this color to match the cineShader visualization.", "https://cineshader.com/view/WtdXR8", "", "Your post is also nice!", "I particularly like Tileable Water Caustic.", "Dave_Hoskins, 2020-01-30Looks very nice, especially for such short code. Have you thought about adding colour?", "abje, 2017-10-08very nice, but in distfunc i see that if(rnd<1.0/8.0) and if(rnd<5.0/8.0) does the same thing, and 2.0/8.0 and 6.0/8.0 and so on, i think you should have have 1.0-cellpos.z at 5.0/8.0 to 8.0/8.0", "jt, 2015-12-14Very nice!", "coyote, 2015-09-26Very nice!", "To see it in cross eye 3d you can do the following:", "Change line 68 from \"vec3 ray_pos=vec3(\" to:    vec3 ray_pos=m*vec3(-sg*.05,0,0)+vec3(", "And then add the following two lines after line 55 \"vec2 coords=...\":    float sg=sign(gl_FragCoord.x-0.5*iResolution.x);", "coords.x-=sg*0.5*iResolution.x/length(iResolution.xy);", "For parallel or oculus rift just offset the camera in other direction by removing the minus sign before sg while calculating ray_pos.", "Nema, 2013-10-25gosh! fantastic!", "frankwer, 2013-08-02Awesome, runs fast and looks good.", "calcarus, 2013-08-02iq, you need to have a heart/like buttom for comments, I would totally heart your first comment!!", "Great shader as well.", "tsone, 2013-05-15Holy shit it's great looking.", "ssdsa, 2013-05-01Great!", "raizor, 2013-05-01Lovely stuff", "huttarl, 2013-05-01Awesome ... I love truchet tiles (3D too). It's pretty fast also.", "PauloFalcao, 2013-04-30I Love it!", "WAHa_06x36, 2013-04-28Actually, on second thought, I fixed the reflection calculation, and then just distorted the texture lookup a bit. If it's too recognizably reflecting something, it doesn't look as good as if it is just vague reflected stripes and shapes.", "WAHa_06x36, 2013-04-27Oh, you're right. That wasn't intentional. But if I fix it, it doesn't look as good any more. So I'll just leave it, and that will be one more piece of fakeness to add to the pile of fake in that code.", "iq, 2013-04-27Btw, your reflection vector is wrong, it should be ray_dir - 2.0*normal*dot(ray_dir,normal), or simply reflect(ray_dir,nor). Is you lack of \"normal\" in the formula the fake thing you were referring to?", "srtuss, 2013-04-27That's amazing. Such a clean look and an excellent framerate.", "CPU, 2013-04-27beautiful! great combination of wow!", "WAHa_06x36, 2013-04-27The shiny shading is the most amazingly fake thing I have ever written.", "iq, 2013-04-27Love it. It looks so shinny and cleat i wanna lick it!", "Petra, 2023-05-24Incre\u00edble textura", "aitor10995, 2022-10-03is it possible to change the background and distorted?", "instead of a flat blur use one image?", "Dave_Hoskins, 2022-08-27Yes, the RGB values are the vec3 on line 37", "420mangojuice, 2022-08-27is it possible to change the water color", "terryspitz, 2021-01-16I implemented an accurate caustic shader here: https://www.shadertoy.com/view/tlyyRR", "Dave_Hoskins, 2018-10-31The is no warping. It's all down to a mixture of different scaled added cos and sine waves in the for-loop at line 30. Trying editing some parameters to get the feel of what it's doing, like reducing MAX_TER.", "scratch13764, 2018-10-31How does the warping work? I don't see anything that looks like it would generate some kind of noise.", "zzx, 2017-05-25\u600e\u4e48\u4e0b\u8f7d\u56fe\u7247\u8d44\u6e90", "dila, 2016-06-29Would look cool projected in a 3d scene.", "aceslowman, 2016-01-20trying hard to warp a video in a similar fashion, any advice on how to accomplish that?", "jt, 2015-11-22Fantastic :-)", "MichaelPohoreski, 2015-01-24Wow! Beautiful!", "ewerybody, 2014-04-16Lovable! \u00e2\u2122\u00a5", "iq, 2014-04-08Nice!", "morgan3d, 2014-04-07A very handy tool!", "jt, 2016-01-27I like DLA", "knighty, 2016-01-24Awesome!", "doing:", "fragColor = vec4(0.);", "if(iFrame == 0 || iMouse.z > 0.) {", "if(length(fragCoord-0.5*iResolution.xy) < 2.)", "fragColor.y = 1.;", "else if(hash13(vec3(fragCoord,iFrame)) < 0.05)", "fragColor.x = 1.;", "return;", "}", "Also works well and the seed is centered.", "Flexi, 2016-01-24I once tried this in Milkdrop2 but it certainly did not look as cool and quickly growing as yours here.", "levonchic, 2022-02-22If all light and colors are made darker, you can add stars similar to this:", "skycolour += pow(abs(noise((fragCoord.xy + vec2(iTime * 0.1, 0)) * 0.1)), 15.) * 5.0 * fragCoord.y / iResolution.y;", "murieron, 2020-04-29Is not my merit. I just copied the original one to try some changes", "See original one at https://www.shadertoy.com/view/4tdSWr", "CREGG, 2020-05-06This is cool. Could I use this shader code in a commercial project?", "mrharicot, 2013-05-12Fixed it (thanks iq ;) ) and added the possibility to interact with the mouse!", "iq, 2013-05-12The shader doesn't work in Firefox. The fix is easy: add \"const\" in line 21. Loops only work that way ^_^", "jt, 2020-07-01very pretty", "ollj, 2018-09-29higher respoolutions better show that it only errodes in eight-rotations, which is fine, just not realistic for erosion.", "viprevipre, 2023-02-04I love this! such a simple loop, but the effects created when messing with the numbers are always awesome.", "andremichelle, 2020-10-07We are using your shader as a background visual for a featured audiotool.com track yet again. https://www.youtube.com/watch?v=1iEepPnrJVA Hope you like it. If you want different credits, please contact me. Thanks!", "ShaderAnt1, 2018-08-05Maeytryxz", "Kali, 2018-08-01Thanks Antoine", "ttoinou, 2018-07-20Featured in this video  !", "Kali, 2018-07-07Just for clear things up (I don't check the commentaries very often sorry haha), Bentley asked me first and it was a pleasure to collaborate with that show.", "Kali, 2018-06-28Sometimes it's called magic haha. Line 58, de function (distance estimation) is the \"modelling\" of the fractal.", "Dekodr, 2018-06-14so newbie question, but where is the fractal file/texture being pulled from? or is it all code based and not even a file.  if so what part of this code is referring to the fractal?  Thanks!", "zproxy, 2017-10-17360 at", "ttoinou, 2017-08-10Hi Kali, I'm doing a Shadertoy best of videos Could I use some of your shaders ? thanks", "bergi, 2016-05-16Ah thanks! Bentley also mentions the artists and that they are great people, so i guess it's all fine.", "I was just curious. The show will be screened at the Fulldome Festival in Jena in a few days, that's why i got aware of it.", "Dave_Hoskins, 2016-05-16If you look at the last video, Bentley mentions Shadertoy, so I presume Kali was contacted. If they only contacted Shadertoy, then there's going to be trouble ahead!", "bergi, 2016-05-16Hi Kali, you know about this show?", "http://onceandfuturecities.com", "Seems to heavily use your shaders", "jt, 2016-01-02Cool!", "dila, 2015-04-09This is brilliant.", "pthrasher, 2014-12-23This is incredible!", "", "I'm just getting into this stuff... Is everything in here generated from scratch? (the large \"machines\", etc)?", "", "If so, can someone share a guide or point in the right direction on how to simply *begin* learning this stuff?", "", "I've just begun working with GL, and I grasp the basics. Just want to learn this stuff.", "timemit, 2013-12-05real good one Kali, love the pulsing lightbands, nice touch", "codePlay, 2013-11-30Great job! I love the video processing; Something about this reminds me of Dr. Who", "knighty, 2013-10-30Excellent!", "4rknova, 2013-10-17Incredible..", "Danguafer, 2013-10-15Here, take my heart :P", "morgan3d, 2013-10-15Unbelievably good!", "fb39ca4, 2013-10-14Further improved postprocessing. Now, the noise also scales with resolution.", "", "float vignette = 1.-pow(length(uv2*uv2*uv2*uv2)*1.1,6.);", "uv2 *= iResolution.xy / vec2(640.0, 360.0);", "vec3 rain=pow(texture2D(iChannel0,uv2+iGlobalTime*7.25468).rgb,vec3(1.5));", "color=mix(rain,color,clamp(iGlobalTime*.5-.5,0.,1.));", "color*=vignette;", "color.r*=(.5+abs(.5-mod(uv2.y     ,.021)/.021)*.5)*1.5;", "color.g*=(.5+abs(.5-mod(uv2.y+.007,.021)/.021)*.5)*1.5;", "color.b*=(.5+abs(.5-mod(uv2.y+.014,.021)/.021)*.5)*1.5;", "color*=.9+rain*.35;", "Kali, 2013-10-14Whoa! Shader of the week!  Thanks Beautypi! And thanks all for the nice comments! fb39ca4: yep, just changed that, thanks!", "CBS, 2013-10-14Wow! Beautiful!", "fb39ca4, 2013-10-14The postprocessing looks better at fullscreen resolutions if you add this between lines 284 and 285:", "", "uv2.y *= iResolution.y / 360.0;", "robertcupisz, 2013-10-14Awesome!", "Zavie, 2013-10-14Wow, the standards are getting pretty high around here!", "Antonalog, 2013-10-12really excellent fractal!", "frankwer, 2013-10-11Absolutely stunning Kali. Would love to see you compose a demo.", "reinder, 2013-10-11Wow, super cool!", "mmalex, 2013-10-11has such an awesomely solid feel to the shading.", "Kali, 2013-10-11Thanks for the comments! And I forgot to mention iq made it run under linux, thanks! @eiffie: it was carefully calculated by trial and error method . @movAX13h: Some day, some day... be patient", "iq, 2013-10-10Super cool!!", "PauloFalcao, 2013-10-10WOW! Super impressive!", "bioccular, 2013-10-10Wow...", "movAX13h, 2013-10-10Wow! Unbelievable... I'm still waiting for your fractal creature/world movie/documentary to come out some day. You've already done the trailer", "P_Malin, 2013-10-10Wonderful!", "eiffie, 2013-10-10Looks great! Just looked at the camera path now. How does that not run into things?", "Dave_Hoskins, 2013-10-10That's a really cool alien world. The sphere works really well, accompanying the viewer like a guide.", "demofox, 2013-10-10wow... freakin sweet (:", "technochroma, 2023-05-18Super clean and shiny. One of my favorite shaders to this day.", "deamonpog, 2023-01-20Amazing woow!!!", "itsdavidblaker, 2022-06-09Hi Shane! Your work is absolutely fantastic! Would you be available for a quick project? How can I best contact you?", "hZzAaa, 2022-01-26Wow, this is beautiful", "maus, 2021-03-22Elegant!", "UrbanClubProfessional, 2020-10-17I remixed it here: https://www.shadertoy.com/view/3sGyDw", "benhardy, 2020-09-01well documented code", "solacefy, 2020-07-19  beautiful and crazy", "microfx, 2020-02-23@FabriceNeyret2", "", "https://www.interactiveshaderformat.com this is ISF - I use it to mix it with other videos or manipulate values live to the music", "FabriceNeyret2, 2020-02-22no idea what you mean and what \"ISF\" is, but if it's about copy-pasting some glsl into some appli, then if the later is only webGL1 the command then was texture2D", "microfx, 2020-02-21does anyone have an idea how to solve this texture error when converting for ISF?", "", "ERROR: 0:70: Invalid call of undeclared identifier 'texture'", "wcfairytale, 2019-09-29this is crazy beautiful", "teraspora, 2018-10-30Beautiful, clever and superbly documented.", "ollj, 2018-10-08just like discontinuous cubesMinusSpheres, suboptimal checkerboard tilings, , suboptimal platonic bodies,or crudely drawn houses, shadertoy never has  \"enough Voronoi examples\"", "pohlt, 2018-03-01Extremely well executed! Could be the trailer for the next Marvel movie.", "stefanboss, 2017-12-16amazing!", "laserdog, 2017-11-21incredible...", "rigel, 2017-08-03Wow ! Love the kind of glass effect", "FabriceNeyret2, 2016-12-09well, using voronoi diagrams for this kind of pattern is the very idea of Worley noise ;-) Here, I'ld say the added value is more in all the other details of the look.", "FabriceNeyret2, 2016-11-27so clean !", "morgan3d, 2016-11-26The coloring is fantastic!", "MacSlow, 2016-11-23Very slick... especially the cartoon-look you gave them!", "mds2, 2016-11-23upvoting mostly because the shader is full of comments.", "stduhpf, 2016-11-22", "dila, 2016-11-12so good!", "Shane, 2016-07-11@shau", "I'm always happy to discuss this kind of stuff, and feel free to use whatever code of mine you want. That's what it's there for. By pure chance, I came up with an algorithm a while back that emulates 2nd order Voronoi in 3D. It's easy to use, the pattern quality is reasonably good, and it's fast enough to raymarch. I've explained it in my \"Cellular Tiled Tunnel\" example. The downside is animation. You can animate it, but it doesn't have the same feel. Incidentally, the edge detection in that particular example is rolled into the curvature calculation.", "", "There are also countless other pseudo-random geometric surface patterns that look interesting. Triangle noise, fractal variations, repeat tiles, etc.", "shau, 2016-07-10Hiya. Sorry to keep bothering you. I'm trying to put your colour map into my rotating cubes model (if that's ok). Your height map function is based on the voronoi function output. Is there some thing I could do to get a similar height map value based on the distance to scene. I very much like the readability of your code (I feel rather rude in having asked for a simpler example now) and I especially like the way you managed to tuck the edge detection into the surface normal function.", "shau, 2016-07-10Thanks Shane for detailed explanation. Please don't go to any effort. I was kind of hoping you might have something lying around. TBH I shouldn't be so lazy and just dive in and the code is very well commented it's just my understanding that's fuzzy. Kind Regards", "Shane, 2016-07-10@shau", "I'll see what I can come up with. However, if you take the comments away, there's not a great deal of code to this.", "", "A lot of things here have been faked for the sake of speed. For instance, I've used the object's geometry to offset the texture lookup just a little in order to trick the eyes into believing a little ray bending is occurring. The shiny reflective look is mainly caused by two things; The specular lighting and the fake environment mapping. All work together to give it a bit of a perspex\\glass kind of feel. The edging and contrasty palette give it a slight comic effect. If you look at the code, you'll see that each component only takes up a few lines.", "", "By the way, I'll do a more realistic glass related example at some stage.", "shau, 2016-07-09Hi Shane. Would you be able to provide me a simpler example of shiny glass shading. It's beautiful. Forgive me if me I'm being too cheeky.", "ollj, 2016-07-08of only for contrast, try using mostly the complementary colors of orange and blue. usually complementary colors are ugly, but we are just used to see orange and blue next to each other within earths athmosphere.", "Shane, 2016-07-07Thanks for the comments. I added a number of aesthetic cliches to hide the fact that not a lot of technical skill went into it.  For anyone interested, the lighting and coloring is pretty easy to reproduce, and it'll work with a lot of different setups.", "SharkyUK, 2016-07-07Striking and very pretty - I like it!", "Duke, 2016-07-06", "shau, 2016-07-06I think this is the best voronoi I've seen", "TambakoJaguar, 2016-07-06Lovely!", "coyote, 2016-07-06", "aiekick, 2016-07-06remind me spiderman i dont know why ^^ maybe the color choice", "Dave_Hoskins, 2016-07-06Great! The blue sheen really makes it.", "aiekick, 2016-07-06wow as usual", "flockaroo, 2016-07-06very stylish", "FabriceNeyret2, 2016-07-06prettyyyyy !", "Hamneggs, 2016-07-06This is a really cool use of Voronoi", "shaderology, 2016-07-06beautiful comic book feel to it.", "Passion, 2016-07-06Really cool and unique. It looks a bit like a stained glass window.", "mplanck, 2016-07-06There's something very Marvel comics about this that I love.", "iq, 2016-07-06Pretty!!", "GregRostami, 2016-07-06OMG!! STUNNING!", "spalmer, 2020-01-29gamma's wrong here, too; I'd fix that before going much further.  I don't think output alpha does anything atm, just leave it 1.0.", "davidar, 2018-07-11Thanks", "", "The model does already account for land elevation and rain shadows, but I'm only using a low resolution elevation map here, so its influence seems to be somewhat limited. I'll try integrating it with a higher resolution terrain map, which should hopefully help with that.", "movAX13h, 2018-07-05I love this stuff! Awesome!", "BigWIngs, 2018-07-05Very cool. Next up, get land elevation into the equation", "tversteeg, 2018-07-05Wow!", "wyatt, 2018-07-05dang thats pretty cool", "ollj, 2016-04-17what minecraft nightmares are made of", "mu6k, 2014-02-19Nice realistic shading. Crashed my GPU.", "celeph, 2013-12-07Haha, yes! That's probably what BoulderDash would look like nowadays  Used to be one of my favs on the C64!", "iq, 2013-12-06Because I was lazy to optimize this one and it renders very slow (sorry), I made a video with higher quality settings:", "ewerybody, 2013-12-06Incredible looking! Playing around with the input textures is surely fun!", "Nice how the input0 colors the cubes too.", "vtlmks, 2013-12-06Wow, somehow I come to think about BoulderDash for the C64 when I see this  looks really nice!", "BSDGuyShawn, 2023-03-31It looks like line 42 I can just do uv = uv-target if target is a vec2 with the coordinates of the location I want.", "BSDGuyShawn, 2023-03-31This is amazing.", "", "Still trying to wrap my head around shaders.", "", "How would you modify this so that the center was at a different location? I have been playing around with it. I just can't figure it out.", "oneshade, 2021-03-17Looks fluffy and tasty", "JKG2, 2020-08-28Wow, this is amazing....more like underwater than fire to me", "CBS, 2013-08-21Love this volumetric goodness :-)", "iq, 2013-08-07The standard way to apply dithering to raymarchers is to do it to the ray origin, not at each step. Added it at line 89.", "iq, 2013-08-07Are you developing on Linux or Mac? I think on Windows we won't get conditional branching until they change to DirectX 11 (for now WebGL uses DirectX 9  )  I think in Chrome 28 there's some sort of basic branching, becuase doing \"continue\" got me a few fps (not \"break\" though). Basically, WebGL is a big inconsistent mystery for now", "mu6k, 2013-08-07So, there is no conditional branching in some implementations of WebGL... I always get great performance improvements from early exits.", "Also, try:", "pos = ro+(t+hash( dot(pos,vec3(1.0))+iGlobalTime)*.05)*rd;", "I've mostly got better results when I randomize a bit the point which is being evaluated by the density function.", "iq, 2013-08-03However, replacing \"break\" with \"continue\" gives me an extra 20% speed. I miss desktop OpenGL where things make sense", "iq, 2013-08-03knighty, I had been using that during development (for I copied this from my clouds shader), but I had to remove it when I realized it was doing the raymarchier a bit slower. Remember, there's no conditional branching in WebGL's GLSL, everything is unrolled afaik. With current implementations of WebGL, seems that \"early exit\" sort of \"optimizations\" are not really optimizing but hurting", "WouterVanNifterick, 2013-08-03Looks cool when you drag your mouse horizontally", "knighty, 2013-08-03Awesome!", "A somewhat obvious optimisation (on firefox at least) is to add an early exit in the raymarch function's loop when sum.a>someThresold. For example, before line 89:", "if(sum.a>0.99) break;", "This gives me approximately a 50% speedup.", "Sabiri, 2022-01-05THIS IS SPLENDID AND MIND BLOWING  !!!!!!!!!", "guoyiAvatar, 2016-07-19wow that's so great ,", "d1kkop, 2015-09-21Sick man. Really nice!!", "mjeragh, 2015-02-12How can I download the images without the text attached to it?", "Xytor, 2014-10-02It's amazing that this can be done with nothing but GLSL. And at 60 fps!", "nimitz, 2014-09-19whoa, super fast now. great!", "iq, 2014-07-21I did some optimizatons, it renders twice faster now", "Andre, 2014-06-164 year old GTX-260 running this @ 8 fps. Just amazing what 8K code and 4 textures can do", "cyanux, 2014-06-14You are an artist, your noise functions are so simple.", "ciberxtrem, 2014-06-10Wow! at first, it appeared to be a picture!, brilliant.", "BGC, 2014-06-10Amazing work!", "BGC, 2014-06-10Amazing work!", "cyanux, 2014-06-09Very smart. +like", "Zavie, 2014-01-19WHOA! It's scary how well you nailed the look. When I saw the screenshot on Twitter, for a split second my brain told me I was seeing a photo. At this point I'd say what gives it away is the animation, and the lack of subsurface scattering.", "epreston, 2014-01-19What are you doing in the post processing calls for the color ?", "iq, 2014-01-18in the meanwhile,", "morgan3d, 2014-01-18I really wish shader toy had a \"run fxaa and bloom\" checkbox, because that's all this needs to look like live action video.", "morgan3d, 2014-01-18Bravo!", "fizzer, 2014-01-17<3", "Antonalog, 2014-01-15destined to be a classic!", "eiffie, 2014-01-15Can't believe this compiled for me (0.1 fps) but well worth the wait!", "poljere, 2014-01-15Amazing!", "WouterVanNifterick, 2014-01-15Wow!!", "Dave_Hoskins, 2014-01-15Brilliant work! So many details, plus the ground looks amazing.", "PauloFalcao, 2014-01-15Superb!!!", "P_Malin, 2014-01-15Beautiful!", "CPU, 2014-01-15very cool! awesome work!", "tomorrowevening, 2014-01-15Nice! Got 14 fps here on my MBP", "avix, 2014-01-15super nice if you have the power gpu.", "shader compiled only once in like 15 tries, so i could see it in sleep mode -> 0.2 fps", "otherwise reaaaaly nice", "FabriceNeyret2, 2015-10-14NB: and when he was postdoctoral in finland he worked on various unpublished follow-up of his nice PhD, comprising this reverse-advection done a a volume made of one single voxel :-) http://www.dgp.toronto.edu/~stam/suomi/stam/mpeg/anim1.mpg (Jerry Tessendorf was using this trick in production for high resolution mist/cloud/smoke at Rythm'n Hue. Not reversing up to t=0, but just a few time steps backward in time).", "FabriceNeyret2, 2015-10-14(at that time we were gluing paper photos for the photocomposition with our name writen on the back :-p ) . Images are on Jos's historical page:  http://www.dgp.toronto.edu/~stam/slides.html.", "iq, 2015-10-14FabriceNeyret2, that paper doesn't have any pictures in it. Do you have any version of the PDF with actual renders that show the results?", "iq, 2015-10-05Dave, maybe? They say \"density falls off quadratically to 0 at the radius of the sphere\", so I suppose it's the same maths?!", "jameswilddev, 2015-10-02It's not far off the false volumetric lights I did a while back - though with the awesome iq magic", "Dave_Hoskins, 2015-10-02Is this the equivalent to Unreal's fog volume?", "https://udn.epicgames.com/Three/FogVolumes.html", "FabriceNeyret2, 2015-10-02and if you want noise hypertexture in it, Jos Stam shown that you can directly derivate a statistical model per ray rather than bulding and summing noise-in-voxels. see http://www.dgp.toronto.edu/people/stam/reality/Research/pdf/gi94.pdf", "jt, 2021-09-13alien lifeform?  cool...", "gschian0, 2021-06-30wow!", "NakedBowman, 2021-11-05Hey cool shader, how would you do to rotate the sampling of the lines? creating a diagonal scanline effect.", "GenoCL, 2021-04-13I love this one! Is there a way to edit it to get rid of the middle view and just have the first and third ones?", "starea, 2017-05-03Wohooo! This looks awesome!", "CeeJayDK, 2014-08-28If you boosted the brightness of the pixels that you don't  dim only so much that it didn't cause clipping, and then boosted the brightness of the pixels that you do dim more to compensate - I think it would look like the pixels had a slight bloom effect to them.", "", "That is for a given area the brightness stays more or less the same (or at least closer to) the original brightness, and this is achieved by boosting the pixels in the shadow mask and scanlines more when you can't boost the areas that you don't dim without causing clipping.", "TimothyLottes, 2014-08-23It is possible to compensate for brightness differences, however that would come at the cost of lots of clipping, which in my eyes looks worse than lower brightness. Anyway easy to add, just change Fetch() to multiply by a value over one on the \"return\" line.", "CeeJayDK, 2014-08-22It looks good although I think you should compensate for the loss in brightness that the scanlines and shadow mask causes.", "poljere, 2014-08-20Very cool", "gee8sh, 2023-04-09Correction: \"ordres of magnitude\" ... I must've been half asleep when I wrote my earlier comment \ud83d\ude05 ... Again, great job!", "EMUemu12, 2023-04-07awesome!", "Nafffen, 2023-04-03so good", "gee8sh, 2023-04-02Wow! This is magnitudes of order better than my Fractalish Planet.", "catafest, 2021-07-09Good work. The idea is good, but I would have made it a little more realistic.", "jonnyjedjedi, 2018-08-14Very cool. thanks for the great talk, very inspiring", "Imsure1200q_1UWE130, 2017-08-02I was looking at one island and moving around stuff and i kinda bit messed it up...", "valentingalea, 2017-04-10@FabriceNeyret2 fixed! thanks for the heads up!", "FabriceNeyret2, 2017-04-10no longer compiling in WebGL2.0: \"precision\" keyword no longer allowed.", "Lio, 2016-05-25great!", "valentingalea, 2016-05-22Now with (gimbal locked) mouse rotation!", "XT95, 2016-05-17Wonderfull!", "poljere, 2016-05-16Really cool!", "valentingalea, 2016-05-16Thank you! I plan to improve the clouds more! Need to add lighting - although I am pushing the ALU a lot already with all the marching I'm doing - pleasently surprised that I am still hitting 60 fps on my old Geforce 660", "iq, 2016-05-16Nice!!", "aiekick, 2016-05-16very nice", "jt, 2022-01-14cool!!", "Shane, 2018-06-16Awesome. After a few minutes, it generates a fascinating height map.", "davidar, 2018-06-16With hydraulic erosion: https://www.shadertoy.com/view/lsKBWw", "davidar, 2018-06-16@P_Malin Thanks, fixed", "", "@ocb Yep ;)", "P_Malin, 2018-06-15Nice idea.", "This didn't compile for me initially (with a couple of weird errors about an vec2_ctor ambiguous function call). It compiles if I change line 7 of Buf A to:", "return vec2(sign(v.x),0.);", "ocb, 2018-06-15Interesting way to generate terrain.", "I suppose you're going to mix this shader with your hydraulic erosion?", "davidar, 2018-07-20Thanks, fixed", "coyote, 2018-07-16Please initialise fragColor to zero before using it in the rhs of the calculations.", "On mac variables and pure out function parameters can have non-zero residual values and this leads to corrupted image.", "mds2, 2018-07-12This is something I've often been curious to do, but never sat down and tried.", "", "And your results look gorgeous (and your parameters are easy to tweak!)", "asis5528, 2018-07-11looks nice!", "Ethonic, 2023-05-27It runs at 97 to 110 fps for my laptop.", "fardaniqbal, 2023-01-28Wow. Runs at ~50 fps on my 2019 MacBook Pro.", "FabriceNeyret2, 2022-11-10for a size 32 texture, pixel centers are at coordinate ( i+.5 ) / 32", "FuXii, 2022-11-10In BufferA the noise( in vec3 x ) function, use VOLUME_TEXTURES", "float noise( in vec3 x )", "{", "vec3 p = floor(x);", "vec3 f = fract(x);", "f = f*f*(3.0-2.0*f);", "return textureLod(iChannel2, (p+f+0.5)/32.0, 0.0).x;", "}", "why the 3D texture sample coordinate is (p+f+0.5)/32.0?", "NickyDrinks, 2021-04-01This shouldn't be possible at this kind of speed, magic.", "me_123, 2020-12-10This goes at a 20 fps on my chromebook! and it looks amazing.", "firegump, 2019-07-26so nice~", "JohnShadow, 2018-07-28mini ue4", "ThomasSchander, 2018-07-13I simplified the code a bit to prevent it from crashing the shader compiler.", "tehsauce, 2018-03-04beautiful!", "chrisjj, 2018-02-14Crashes Chrome here too.", "MarioNaybor, 2017-09-12great) I like it)", "mantra, 2017-09-12A W E S O M E", "ThomasSchander, 2017-09-08Thanks all! I added the volume based noise generation, it should save a few instructions. Sorry for torturing your browsers ;)", "FabriceNeyret2, 2017-09-08sometime I'ld like to have an option --enable-gpu-watchdog-really-please :-/", "P_Malin, 2017-09-08@Shane you can try starting chrome with the command line option --disable-gpu-watchdog", "@ThomasSchander great shader btw!", "Shane, 2017-08-30Really nice. There's a few interesting functions in there.", "", "I'm on an Alienware laptop - running Windows 10 with a 1060 GTX card, but had to open this in Firefox, since Chrome seems to time out and crash. I guess the Chrome developers - in their infinite wisdom - decided it'd be better to crash a page than make the user wait a few seconds... I'm sure they had their reasons.  I've also noticed in general that since the WebGL 2 update, a lot of shaders are taking longer to compile. I'll assume that time will sort it all out.", "FabriceNeyret2, 2017-08-28in case this can help, usual suspects:  https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/", "ThomasSchander, 2017-08-28Thanks @stb for the screenshot, looks like a NAN. So far I don't know what causes that, I'll have to debug it on an AMD machine.", "lost4468, 2017-08-27I get the same issue Thomas. I'm on Chrome 60.0.3112.113, and have an AMD HD6950. The black patch there appears to cover the intersection between the water and the cube and is acting like static noise at the edges.", "stb, 2017-08-26Trying again...", "stb, 2017-08-26Apologies for the late reply Thomas. Here's an image of the artifacts:", "aiekick, 2017-08-25love this kind of scenes. btw, a very long time to compil after a frist crash", "poljere, 2017-08-24Beautiful.", "visuality, 2017-08-24really beautiful scene seen. getting 60fps on my 970 (just updated drivers) machine using the current version of firefox 54.01, on PC.", "valentingalea, 2017-08-24the black speckled foam happens for me as well (on AMD R9 Fury) it's apparenty only in the \"submerged\" part of the cubes, and it animates along. (tried to upload pic to imgur but that that site sucks)", "", "amazing work nonetheless but you are pushing it too much I think - you should try to simplify the water a lot, the clouds really are spectacular and should be the center of the show", "ThomasSchander, 2017-08-24Thanks stb, can you post an image of that? I don't see these artifacts here.", "stb, 2017-08-23Took a while to load and everything looks great except for a mass of speckled black 'foam' near the bottom of the floating object.", "ThomasSchander, 2017-08-23Thanks iq. The intersectSphere function you posted does not handle the ray origin being inside the sphere, which is necessary in this case.", "I lowered a few loop iterations - maybe that helps if they are unrolled by the compiler. It mostly compiles fine for me (970M) so I can't check. I understand that a crashing entry in ShaderToy is bad, but putting it back into draft mode creates (temporary) dead links. Possible solution: Allow shaders being flagged as no-preview? Then, it doesn't crash the gallery at least.", "iq, 2017-08-23Hm, still crashing all my machines (GTX 970 and GTX 980, Windows 10). I think BufA contains too many nested loops that generate too much code.", "", "BTW, that's a convoluted way to intersect a sphere. Try this: float intersectSphere(vec3 origin, vec3 dir, vec3 spherePos, float sphereRad)", "{", "vec3 oc = origin - spherePos;", "float b = dot( oc, dir );", "float c = dot( oc, oc ) - sphereRad*sphereRad;", "float h = b*b - c;", "if( h<0.0 ) return -1.0;", "return -b - sqrt( h );", "}", "Dave_Hoskins, 2017-08-23It crashed my browser first time, then I reloaded it and it compiled after a about a minute.", "(GTX 680 / Chrome / Win 10)", "Looks great BTW, and I love the orange reflection.", "jt, 2017-08-23looks great!", "Duke, 2017-08-23@ThomasSchander Try to reduce non constant global variables count. On intel cards they sometimes cause crashes.", "gloinart, 2017-08-23Very nice, althrough very long compile time", "knarkowicz, 2017-08-23It crashes my Chrome, but after page reload it works. Nicely done!", "FabriceNeyret2, 2017-08-23on my linux chrome  it works", "tz, 2017-08-23Crashes in chrome, guessing due to long compilation timeout, firefox works fine, looks amazing!", "ThomasSchander, 2017-08-23@iq Do you have an idea what might cause that? Or how it can be debugged?", "", "@ttoinou Oh great - maybe I'll add that later, you could also add that pretty quick I guess! Although I think a rounded earth perspective would not look very nice.", "", "@Duke @morgan3d Thanks!", "iq, 2017-08-23crashing my browser", "ttoinou, 2017-08-23That will make free advertising for your company =D", "ttoinou, 2017-08-23Wow very nice. I'm doing a Shadertoy Best Of video and I think I'll replace the Seascape shader ( https://www.shadertoy.com/view/Ms2SD1 ) with this one, would that be ok ? Could you create a nice camera movement (about 12 seconds), a rounded earth like Seascape shader and a #define to have very high quality ? (I have a GTX 1070 an can wait a few seconds for every frame ! renders will be in 2.35 format between 6K precision) Thanks a lot =D", "Duke, 2017-08-22Very nice!", "morgan3d, 2017-08-22Spectacular (and specular)!", "bloodnok, 2022-05-06136fps, but now my computer is loud and the room is getting appreciably warmer.", "", "My last comment said 8.2fps on a 960 (6 years ago). I'm on a 3080 these days.", "ollj, 2022-05-06oh wow, I confirm, Ladybug VS Elephant looks polar opposite in performance, depending on browser (win11 operaGX VS MsEdge) on average MsEdge slighly outprtforms all other browsers for shadertoy, I did not expect such an oddball to that general rule, here it is.", "", "Takes a faster graphic card to make the os+broeser+webgl implementation a more visible bottleneck?", "iq, 2022-05-05It compiles 5x faster and runs 4x faster on my desktop (and similar figures in my phone). Your WebGL is broken. Actually, everybody's WebGL is broken to be honest.", "ollj, 2022-05-05significantly lower fps and longer compile time than even the ladybug shader.", "iq, 2021-07-20Well, the random number generator chose it, not me. But when it did, I noticed and came back and do the optimization", "Jinkweiq, 2021-07-20IQ featuring his own shader", "iq, 2021-07-08Made it render 1.7x faster by adding some bounding volumes, and also by relaxing my intolerance to certain artifact. Reduced compile time a bit too.", "ejosiah, 2021-07-08120 FPS on RTX 2080 TI, also the Refraction index change effect (Don't know if there is a term for it) is barely visible if at all on 5120 x 1440 resolution. real good stuff otherwise", "ttoinou, 2018-07-20[This comment has been hidden by the shader author]", "maximus009, 2018-03-03Do you use some kind of converting tool for making this models? Or you are god of procedural elephants? However, it looks great!", "metalim, 2016-12-2337 FPS on GTX1080, really heavy.", "buds, 2016-12-17changing  texture2DGradEXT() to texture2D() and removing the last 2 vec2's in 'Buf C' and using texture2DGrad() in 'Image' works. Looks great!", "buds, 2016-12-17changing texture2DGradEXT() to texture2DGrad() works in 'Image' tab but not in the 'Buf X' tabs. It says no matching overloaded function found.", "krwq, 2016-09-29Getting errors about texture2DGradEXT missing", "lovelyH, 2016-09-14OMG this is awsome.", "jimmi, 2016-09-1432 fps on GTX 1080. Also my electricity bill soars towards infinity.", "kt, 2016-07-23I am surprised that my four years old 660ti is still can render it 10fps, pair with the 960 and gtx 980 ti.", "ollj, 2016-04-18theres one that pushes the limits of hardware as of 2016. no longer realtime but iq never was much fof a fan for realtime and more a fan of compression.", "bloodnok, 2016-04-10Masterpiece!", "", "8.2fps on a 960.", "casty, 2016-03-1018fps with Quadro M6000 ^^", "piotrekli, 2016-02-28'texture2DGradEXT' : no matching overloaded function found", "on Firefox on Linux with the proprietary Nvidia driver", "athlete, 2016-02-1020 fps with TitanX :P", "TambakoJaguar, 2016-02-10Around 10fps with a GTX 980 Ti ;)", "PauloFalcao, 2016-02-10Wow! Beautiful work!", "I also agree with zproxy, IMO it would be awesome to generate textures instead of using fixed ones, creating a pure procedural image. Something like render once buffers, instead of every frame rendering. Maybe just a checkbox in the texture options like \"Update [true/false]\" like the VFlip.", "Again awesome work!", "zproxy, 2016-02-08awesome. 2fps here. now only if we could do away the texture images and use generated textures.", "", "and then perhaps. animate the animals a bit.", "jt, 2016-02-08WOW! Beautiful! I love it :-)", "zlnimda, 2016-02-08That leaf is disturbing on the right when rotating.", "Nice , so nice !", "pellicus, 2016-02-0818-20fps on my imac ... Eccezionale! your math is pure art man!", "iapafoto, 2016-02-08On less in my TODO list !", "So realistic and landscape is incredible also... Iq quality", "Shane, 2016-02-08Awe inspiring, not to mention, mind blowing.", "Xor, 2016-02-08Unknown error: (131, 11): Undeclared identifier 'texture2DGradEXT'.", "It won't run here.", "AndrewNZ, 2016-02-08This is just incredible iq.  Technical brilliance sure but there's real artistry in that image!  I'm just blown away.  Those elephants feel so real!!  And the tender caress....  Wow.", "dila, 2016-02-07Just amazing", "zproxy, 2016-02-07any chance of replacing texture2DGradEXT ? some systems seem to not have it", "MMGS, 2016-02-07incredibruu!", "dine909, 2016-02-07this is amazing - but yeah, this should be the first shader of Shadertoy's lesser known and yet to be conceived cousin 'Rendertoy', my video card could melt steel beams at the moment.", "casty, 2016-02-07:O", "coyote, 2016-02-07I am flabergasted!", "TambakoJaguar, 2016-02-07Wow, that's insane! One sees you are a pro!", "When do you make a jaguar, my fave animal? ;)", "Dave_Hoskins, 2016-02-07A lovely well lit model scene as usual iq. And a great focus effect. I'd be happy just doing one tree here.", "I am getting missing bands in the leaves though.", "stb, 2016-02-07You win; I think 0.4 fps is the lowest I've seen here ;)", "Looks nice!", "GregRostami, 2016-02-07wow, Wow, WOOOW !!", "eiffie, 2016-02-07It really looks great. Just... wow.", "XT95, 2016-02-07Wow! You keep pushing the limits", "Loki314, 2022-02-02Wow. It's so beautiful!", "I feel like scaling the input time on line 26 by 2.0 leads to a nice result as well (hopefully not too unrealistic). Nevertheless, it's stunning!", "amhall, 2021-12-17Gorgeous!", "dean_the_coder, 2021-11-08Awesome.  Bet this looks brilliant in VR.", "FoxyOfJungle, 2021-09-23Totally amazing!", "skeletonbow, 2021-03-22@somu - comment out line #142", "plmds, 2021-01-09Excellent", "somu, 2020-10-15how to stop the rotation of the camera? plz help", "blackle, 2020-06-21stunning \ud83e\udd29", "eiglow_, 2020-02-29Replace line 163 with the following to animate the water:", "float nz2 = triNoise2d((pos.xz+vec2(iTime/10.,iTime/12.))*vec2(.5,.7), 1.);", "userse31, 2019-12-09God lord, what is happening in there?", "jjxtra, 2019-02-15[This comment has been hidden by the shader author]", "jjxtra, 2019-02-10[This comment has been hidden by the shader author]", "PrzemyslawZaworski, 2018-10-20@Abeysaurus  I prefer first option (HLSL and custom node).", "Abeysaurus, 2018-10-20@PrzemyslawZaworski Did you just convert it to HLSL and used custom nodes? or did you just translate the code to UE4 material nodes?", "PrzemyslawZaworski, 2018-10-20@Abeysaurus", "Yes, I can port Auroras into UE4.", "Abeysaurus, 2018-10-20Wow this is insane! Anyone able to replicate this in UE4?", "TobberH, 2017-11-29Nailed it!!! Amazing!", "Tidensbarn, 2017-11-29Beautiful. We need a version of this in Skinner's kitchen.", "Tidensbarn, 2017-11-29Beautiful. We need a version of this in Skinner's kitchen.", "Phi, 2017-11-28Fantastic!", "teadrinker, 2017-11-28Great work! Looks more authentic than many offline attempts I've seen!", "ingagard, 2017-11-28Nice one. That northern light reminds a lot of the effect I used for the background in my latest shader. ;)", "KylBlz, 2017-10-21fantastic work, <3'd for sure", "Imsure1200q_1UWE130, 2017-10-17THIS IS LIKE HOW?!!!! SOO BEAUTIFULl!!!!!!!!1!1", "arminkz, 2017-10-15hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "coyote, 2017-10-08", "Duke, 2017-10-08Beautiful!", "nimitz, 2017-10-06Thanks guys!", "", "reinder: done", "Added camera movement (mouse and time based) . I had removed it at some point but I don't recall why..", "afl_ext, 2017-10-05This is very good", "jt, 2017-10-05very pretty :-)", "otaviogood, 2017-10-05You really nailed the look. Great work.", "Dave_Hoskins, 2017-10-04@reinder, it works in an iOS Browser, BTW.", "blackjero, 2017-10-04Really nice and credible! the top comment is quite interesting too (watched with Ultraviolet's camera change)", "Dave_Hoskins, 2017-10-04Hmm, Ultraviolet's additions work surprisingly well!", "Ultraviolet, 2017-10-04Quickfix for making the noise world-based:", "[line 157] float nz2 = triNoise2d(rd.xz/rd.y + vec2(0.3+ 0.5*sin(rd.y*17.),0), 0.);", "Ultraviolet, 2017-10-04Very nice shader indeed ! Even more with camera rotation :", "[line 136] rd.yz *= mm2(iMouse.y/iResolution.y*3.14-1.57); rd.xz *= mm2(iMouse.x/iResolution.x*3.14-1.57);", "Only problem : the noise of the lower part of the screen (waves) is computed in screen space.", "s23b, 2017-10-04looks amazing!", "reinder, 2017-10-04Could you maybe publish this shader using the 'public+api' option so I can test it in the iOS shadertoy app?", "reinder, 2017-10-04Super nice! This look real", "iapafoto, 2017-10-04fantastic, it looks real !", "poljere, 2017-10-04Amazing.", "shau, 2017-10-03It's beautiful all the different things you have done with the triangular noise. Very atmospheric.", "Dave_Hoskins, 2017-10-03First time I've seen a representation of this that's not speeded up! Like TV people tend to do. Nice one.", "iq, 2017-10-03Super good!", "FabriceNeyret2, 2017-10-03wooow !", "", "could we turn the head ? (at least horizontal pan)", "duvengar, 2017-10-03Wow. Best aurora shader I've ever seen so far.", "PrzemyslawZaworski, 2017-10-03Super !!!", "BigWIngs, 2017-10-03Perhaps add some star twinkling?", "BigWIngs, 2017-10-03Looks gorgeous!", "shau, 2019-04-07Wow. I wish I had looked at this before", "A2K, 2016-10-27Your incredible shaders always inspire me to learn more about raymarching. Thank you.", "dila, 2016-10-22a classic!", "aiekick, 2016-10-22incredible", "Flavio, 2014-06-25Insane!", "cyanux, 2014-06-14So simple, so efficient! Bravo iq de la part d'un petit fran\u00c3\u00a7ais", "lazygunn, 2013-12-23I love this stuff, its an inspiration and I learn a great deal from it - if ever i do something strongly based on an idea your work game me,id definitely be standing on the shoulders of giants", "codePlay, 2013-11-30OK.. that's just gorgeous. I dabble with fragment shaders, so it's a pleasure to see a pro's work. Thanks", "iq, 2013-11-07video version with higher sampling rate and motion blur", "frankwer, 2013-11-06Really cool effect when it moves fast, very well done.", "iq, 2013-11-06Thanks Alex!", "", "Yeah, when you only have one dot product to do, the directional derivative is obviously faster than extracting the gradient and then doting. Mathematically they are the same. \u2207 (f)\u00c2\u00b7L = \u2207L(f).", "", "In the context of 1k raymarched intros, where every byte counts and expectations on lighitng are low, it's even better, because, by definition, f(x)=0 at the intersection point, so you can compute your gradient/derivative with only one evaluation of f:", "", "\u2207L(f) \u2250 [f(x+\u03b5L) - f(x)]/\u03b5 = f(x+\u03b5L)/\u03b5", "", "There's such example here: https://www.shadertoy.com/view/MsfGzM", "", "As for the texture trick, yep, Dave_Hoskins and I iterated on this at some point in the past. The blue and alpha channel are a second independent signalof white noise offset by the same (37,17) amount. As you imagine the trick is cool because all the data you need is in the same texel, so not only you do less reads but more also trash the cache a lot less.", "danbri, 2013-11-06Beautiful.", "mmalex, 2013-11-06that is so beautiful! and the animation is a cherry on the cake.", "some gems in the code; love the diffuse lighting being done via 2 tap central difference instead of the usual 4-tap to get N then dotting out L; if there's no specular, why not!", "", "also I only just noticed that your noise texture asset has been carefully crafted so red is a copy of green shifted by exactly 37,17 - cute optimization!", "", "love reading your code. thanks for posting.", "CPU, 2013-11-06wow! It would also work for wispy smoky woolly cloth, up close with metal. excellent work!", "Maeiky, 2023-01-16Made a Soul Eater from it", "", "https://www.shadertoy.com/view/mlB3DG", "celifrog, 2020-09-23:3 Looks so smooth.", "Fox, 2017-02-24I love that you include the audio just for the experience. That's art", "dyvniy, 2015-02-09I'll try to port it to android as live wallpaper.", "It much more cool then standart galaxy wallpaper in samsung phones.", "nimitz, 2014-06-21Nicely done. I was expecting more code", "FabriceNeyret2, 2014-06-20cool !", "I wrote a shorter & optimized version (unlisted) here https://www.shadertoy.com/view/XdsSRS", "(clearer to me. But strangely not really faster).", "FabriceNeyret2, 2014-06-20cool !", "I wrote a shorter & optimized version (unlisted) here https://www.shadertoy.com/view/XdsSRS", "(clearer to me. But strangely not really faster).", "Dave_Hoskins, 2014-06-19Of course, \"it's turtles all the way down!\"", "iapafoto, 2014-06-19Galaxy of universe seem's to be a happy place !... good news !", "Dave_Hoskins, 2014-06-19Thanks, I forgot they were doing another one, it looks like it starts this weekend in the UK.", "I've also given this some subtle movement over time.", "vgs, 2014-06-19This is mesmerizing! Coincidentally, I was just watching the new version of Cosmos, and your shader has really matched my mood.", "ollj, 2022-11-12now there is a shader that could need analytic filtering (iq blog). maybe even with double-integral in 3d.", "0xAA55, 2022-03-11Watching this cubic sphere thing growing gradually is satisfying just like listening to some ASMR. You can see multiple ripple-like things appear on the sphere, and see they overlap. When not big enough yet, it just looks like a living meatball creature's skin rippling, and when it's big enough, you can see some butterfly pattern or LCD pattern rainbowy things rippling and overlapping randomly. Best shader and best screensaver ever.", "henryseg, 2022-01-17@marinojamesbond this is GLSL.", "marinojamesbond, 2022-01-16can I ask in what programming language this is", "mherreshoff, 2022-01-14Awesome!  I thought about this and it inspired the idea that you can get a very similar shimmer/ripple pattern (except with circles) if you intersect a growing sphere with a lattice of spheres.  Here's what that looks like: https://www.shadertoy.com/view/fsfyD7", "Xonatron, 2022-01-13Try iFrame * iFrame for a dramatic, exponential speed up.", "JasonD, 2022-01-13Indeed very cool. We could compute at a higher resolution and average the colors for anti-aliasing, to see what it looks like!  It appears to render quite fast; it keeps up with my 240 Hz monitor.", "Xonatron, 2022-01-12Great work! Watch your YouTube video on this now. I used to run into these sort of patterns when I would draw circles in low-res graphics modes back on my Tandy 1000 SX.", "gyabo, 2015-09-30TekF - san", "Thanks! I'm remembered that movie...", "TekF, 2014-07-10Reminds me of the city in The Fifth Element.", "DimaRich, 2021-12-20Amazing", "mmostajab, 2021-04-25I found out that mix documentation is not well descriptive. On some hardware and drivers, the cloud shader may produce undefined values because `density` is not always in [0.0, 1.0] range. clamping density fixes the problem.", "", "// Composite over result as premultiplied radiance", "result = mix(result, Radiance4(L_o, 1.0), clamp(density, 0.0, 1.0));", "Jaapio, 2020-06-13The thumbnail reminded me of Instant zen by Syntehtics.", "cmarangu, 2019-12-14not bad framerate", "bram, 2019-10-27Black screen on iOS? (works fine on Linux Firefox.)", "morgan3d, 2019-10-27Update: Made clouds more swirly, added shadow of planet on atmosphere, fixed noise functions for new lower-precision Chrome GLSL on Windows, increased contrast of materials.", "eiglow_, 2018-06-30see this is the kind of shader that would make a really nice desktop background", "mmerchante, 2017-12-31Love it!", "CaliCoastReplay, 2017-08-13Brilliant and fast on fullscreen.", "StoneFinal, 2017-08-12So beautiful !!", "k_kondrak, 2017-08-11I also noticed the ghosting, does make the entire effect more interesting tbh!", "demofox, 2017-08-10Very cool and pretty darn fast on my machine even in full screen.  When scrolling the planet vertically there seems to be something different than when scrolling horizontally.  Is it ghosting from temporal AA or something?", "noonan, 2017-08-10The waves are a nice touch.", "What section is the denoising, I'd love to see that.", "huttarl, 2017-08-09Wow, pretty neat!", "morgan3d, 2016-12-02Made some more performance optimizations to shadows and tweaked temporal filtering.", "toffanim, 2016-12-02This is really cool !", "Shane, 2016-12-01Love it. Really pleasing to the eye.", "Jacoby, 2016-11-28Wow, great job", "jt, 2016-11-28nice", "flockaroo, 2016-11-26wow! nice!", "morgan3d, 2016-11-26Modified cloud layer to run at (1/3)^2 resolution for performance", "iq, 2016-11-26Super super cool!", "VoidChicken, 2016-11-26At least it's better than  Planet Draz", "VoidChicken, 2016-11-26Amazing, but very GPU intensive;", "aiekick, 2016-11-25fabulous", "jmpep, 2016-11-25Incredibly beautiful. Both the shader and the code, by the way, pretty well commented!", "public_int_i, 2016-11-25Beauty, I've enjoyed watching this grow on Twitter.", "aiekick, 2016-11-25not compiliing. my gpu not accpet this : const Vector3     w_i             = normalize(Vector3(1.0, 1.3, 0.8)); the evaluation f an expression cant be const..only the declaration", "shau, 2017-09-12I really like this. For some reason reminds me of H.R. Giger", "TheGrego, 2017-09-12@FabriceNeyret2, thanks so much for the thoughtful response. I'll definitely work on making things more succinct. Great tips overall.", "FabriceNeyret2, 2017-09-12now if you like the code golf game, I can make it 316 char long ;-)  ( -33 chars)", "(but kind of obfuscated :-D )", "", "#define rot(a)  mat2( cos(a), sin(a),  -sin(a), cos(a) )", "#define L       l=length(U)", "", "#define mainImage( O, u )              \\", "vec2 U = iResolution.xy;           \\", "U = ( u+u - vec2(U.x,0) ) / U.y;   \\", "float T = iTime, L;                \\", "U *= rot( l/2. );                  \\", "U *= U/l * 4.;                     \\", "L;                                 \\", "for( int i = 0; i < 3; i++)        \\", "U.y *=   sin(length( mod(U,.5) - U.x/4. ) * 5.)  \\", "* ( 3.14 + sin(T - l/2. ) ) * .2,         \\", "L,                                               \\", "O[i] = cos( T + pow(l, float(i)/4.) );           \\", "O = mix(O, U.yyyy*.5, l/2.)", "FabriceNeyret2, 2017-09-12  just   vec2 uv = ( 2.*fragCoord - vec2(iResolution.x,0) )  / iResolution.y;   :-)", "", "rotate: we generaly just return the matrix, this allows uv *= rot(a) and many other convenient things (like using 2D rotations on 3D vectors )", "#define rot( a )  mat2( cos(a), -sin(a),  sin(a), cos(a) )", "", "uv *= vec2(cos(t),sin(t)) * 10.;", "well, with  t = atan(uv.y, uv.x)   ,   vec2(cos(t),sin(t)) is just normalize(uv) ;-)", "then, uv *= ... *.4 and uv *= ... *10   -> just *4. once", "->", "float l =  length(uv);", "uv *= rot( l * .5 );", "uv *= uv/l * 4.;", "", "", "note that you can loop on floats.", "", "NB: you use a bit too much of (), sometime it's hard to see which fit ;-)", "uv.y *= sin( v * 5.)  * (sin(z - length(uv) * .5 ) + M_PI) * .2;", "", "why uv2 and value ?", "l = length(uv) * .1;  unused as well.", "", "-> simplified version:  ( 53% shorter ;-) )", "#define rot(a)  mat2( cos(a), sin(a),  -sin(a), cos(a) )", "", "void mainImage( out vec4 O, vec2 U )", "{", "float T = iTime, l, v;", "", "U = ( U+U - vec2(iResolution.x,0) ) / iResolution.y;", "", "l =  length(U);", "U *= rot( l/2. );", "U *= U/l * 4.;", "", "l =  length(U);", "for( int i = 0; i < 3; i++){", "v = length( mod(U,.5) - U.x/4. );", "U.y *= sin(v * 5.)  * (3.14 + sin(T - l/2. )) * .2;", "l =  length(U);", "O[i] = cos( T + pow(l, float(i)/4.) );", "}", "", "O = mix(O, vec4(U.y*.5), l/2.);", "}", "turboplay, 2021-02-14Excellent. Any chance for a full-width", "foodini, 2020-05-07Any chance you have a write-up on how it works? Very nice effect, and I'd like to learn from it.", "tlecoz, 2020-03-22waow !!!", "Plati, 2020-03-19this is amazing, like real pen strokes", "microfx, 2020-02-22wow... really amazing!", "zcx, 2019-04-22Amazing dude!I have to admit this inspires me a lot", "hsiangyun, 2018-09-07wow!", "mitjaprelovsek, 2018-06-12awesome", "jt, 2017-08-21Cool!", "rigel, 2017-08-04Totally amazing. I've tried the webcam and then I showed my theeth. Scary !", "TambakoJaguar, 2017-02-23Wow, so well done!", "shau, 2017-02-16So convincing. Especially like the sketch effect outside of the image to define the outlines as you might do with a pencil and paper", "nicoad, 2017-02-16oh yes jmc we want that stuff in FL ;)", "jmc, 2017-02-16Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Here's a quick demo of other Shadertoy shaders in our Visualizer :", "", "https://www.youtube.com/watch?v=KiAfOQgtxO0", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "tkoram20, 2017-02-16Fantastic!", "pthextract, 2016-12-06Impressing.", "hftom, 2016-11-05Wonderfull.", "If you agree, I would like to add this effect to my GPLv2 video editor. (https://github.com/hftom/MachinTruc)", "GottZ, 2016-11-04everytime i see something like this i associate it with pure wizzardry", "morgan3d, 2016-11-03This is the best NPR shader I've ever seen! Great work.", "kuvkar, 2016-11-01this is just awesome!", "pyBlob, 2016-10-28nice, when adding some noise to the angle, it somehow looks even more interesting:", "ang += dot(sin(pos*0.04), vec2(0.2)); // noise by position", "ang += sin(iGlobalTime*1234.0)*0.2; // noise by time", "revers, 2016-10-06wow, amazing effect!", "Yuma_Yanagisawa, 2016-10-05ohh, fantastic!", "reinder, 2016-10-03really, really nice!", "Simplo, 2016-09-30Absolutely amazing!", "Flavio, 2016-09-29WoW!", "GregRostami, 2016-09-27I see it now. Awesome!!", "GregRostami, 2016-09-27I see a black screen on my iMac.", "villedieumorgan, 2016-09-27This is impressive !", "SharkyUK, 2016-09-26Superb post-process shader - thanks for sharing!", "mikatalk, 2016-09-26That's incredibly well done! Thank you for sharing!", "jackdavenport, 2016-09-25Whaaaaaaaaaa?", "dila, 2016-09-24great", "knarkowicz, 2016-09-24Amazing!", "warlock, 2016-09-23O_O (coughs with coffee) holy f...! this is incredible!", "Jacoby, 2016-09-23Holy crap this is amazing", "iq, 2016-09-23This is incredible! Best postpro effect I've ever seen, it seems very frame-to-frame coherent, it does not flicker, it's a single pass effect, and looks beautiful. Wow!", "iapafoto, 2016-09-22Without using buffers !!!  Incredible  !!!", "Shane, 2016-09-22Fantastic effect. I tried it out on a few scenes and it worked really well. The procedure is surprisingly simple too - relatively speaking - which is a bonus.", "", "@gloinart", "The \"Take On Me\" video - That's the first thing that popped into my head too.", "flockaroo, 2016-09-22@ fabrice: ok, i just sloppily rescaled to fit height. (so only some very wide contents might get clamped on the side)", "flockaroo, 2016-09-22sry, no paper. dont want no trees to die for my ideas, hehe ;)", "...but i admit my code could use some comments.", "FabriceNeyret2, 2016-09-22NB: about the correct normalization of texture coordinates for videos ;-) : https://www.shadertoy.com/view/XlG3DW", "FabriceNeyret2, 2016-09-22it's impressive how it is both nice and compact.", "", "is there a paper of whitepaper about this method ?", "", "( NB: maybe you could add this explanation in the code, + some comments ? )", "flockaroo, 2016-09-22@fabrice: about dhe idea: im kind of building the contours out of three different curves. im doing this by weighting the three curves with their local gradients. the color is then just added as a smudged halftoned version of the original color.", "im matching the gradients to the convex inner side if the curve. you can easily switch to concave matching by setting dpos2 negative (or 0 for straight line matching).", "and you can actually use more curves by changing AngleNum.", "flockaroo, 2016-09-22thanks all!", "gloinart, 2016-09-22Wow!, The first postprocessing effect I've seenwhich is really convincing. Thinking about the Take on me by Aha video.", "public_int_i, 2016-09-21Great job flockaroo", "demofox, 2016-09-21Dude... wow!!!", "eiffie, 2016-09-21Nicely done!", "aiekick, 2016-09-21very very good  wow", "vgs, 2016-09-21very well done!", "poljere, 2016-09-21wow, very nice!", "FabriceNeyret2, 2016-09-21wow, nice !", "What's the idea of the method ?", "granito, 2016-09-21wow!", "cornusammonis, 2016-09-21Wow! Very cool effect, looks like Style Transfer.", "kacperks, 2023-01-04Very nice! It blows my mind!!!!!", "EightBitRx, 2022-11-28Unbelievable... I think your code broke my brain.  Amazing work!", "mla, 2022-11-21Nice shader. I forked it as well, for the same purpose as Hatchling: https://www.shadertoy.com/view/DdfSRS.", "Hatchling, 2022-11-21I \"pseudo-forked\" your shader as it was a perfect candidate for demoing a debugging text console thingy I wrote here.", "It is sufficiently complex with branching but also TINY in terms of code size, which made it ideal.", "I figure I should mention when I fork or copypasta someone's shader from now on, as it doesn't notify you when this happens. ::}", "moranzcw, 2022-11-18Nice code", "BryceLang, 2022-10-08my brain is not even close to big enough to understand how the hell this works but its just big enough to understand that it's fucking awesome", "Xor, 2022-08-28Neat! Very compact. I gave it a go to make this even smaller and got down to 615 chars: Shadertoy.com/view/flKyzG", "charbavito, 2022-08-27Really cool!", "Trisomie21, 2017-07-31Shane, I played with the idea of adding details, but I was not happy with the results.", "All the lighting is \"fake\" so I could not get any element that involved light to look decent.", "And trying to generate decent normal on that scene was not successful.", "", "Not sure what you had in mind originally. but your alternate idea came out very well.", "(you have a signature style to your lighting and composition)", "Shane, 2017-07-23Nicely done - Such a clever use of resources. It'd be cool if you worked in the torches, like you did with your other version.", "", "I'm a fan of any scene that involves a swift moving camera through a tunnel, so thought about doing something along these lines for my entry, but since you already have it covered, I'll have to revert to my backup plan.", "spolsh, 2017-07-20I like the mood. Impressively short", "aiekick, 2017-07-20nice", "theGiallo, 2017-07-19Nice! I really love the sound, very appropriate. The red light looks good with that sound. Nice rust!", "sylvain69780, 2020-06-22The animation is ...", "Aljen, 2019-06-28This is real Aljen xDDDD", "chrisjj, 2018-12-13Nice! But I'm seeing black splotches on both Windows https://i.imgur.com/o0frbwy.png and Mac AMD https://i.imgur.com/LbSEFTI.png", "Imsure1200q_1UWE130, 2017-06-03This is good! its also kind of funny where you made a structure called Monster.", "huttarl, 2017-02-03Love the way the position of each whole leg matches the height of the terrain where the foot hits it. Like movAX13h said, very lifelike animation.", "bob87, 2016-06-21Shader is broken...", "dila, 2016-06-17really sweet", "flockaroo, 2016-06-17wow, so cool!! :-O havent seen this before. even uncanny somehow...", "anastadunbar, 2015-04-29Wow, this is the first time seeing it on Shadertoy, wonder why it didn't work before.", "cyanux, 2014-06-14HD6750 crying. It's decided, I bought a new GPU.", "Dave_Hoskins, 2013-11-10Huh? The textures have now disappeared on Chrome/Win7/GTX680.", "frankwer, 2013-07-18Holy shit, hats off.", "reinder, 2013-05-01very nice!", "PauloFalcao, 2013-05-01Does not run on any of my pcs, win or mac", "But the youtube video looks awesome!", "iq, 2013-05-01Yes, the silhouette is a problem with the mipmapping (indeed, derivatives related). I have forced the sampling to happen at the mip level 0, that fixes it for me. Let me know if it works for you too.", "", "There's another bug in Firefox where the legs are not shown. I hunted it for an hour but didn't find any workaround", "", "I'm having so much fun with Shadertoy too!", "P_Malin, 2013-04-30There is a bug in your shader\u00e2\u20ac\u00a6 and what an awesome bug he is!", "I was looking forward to run this on my work PC all weekend. It was worth the wait. None of my computers at home will display this properly (it either won\u00e2\u20ac\u2122t display at all or it has what look like texture derivative issues that make non silhouette edges of the insect and terrain solid blue).", "I love that distance fields have collision detection possibilities.", "The terrain reminds me of some material blending that I keep wanting to implement\u00e2\u20ac\u00a6 So many ideas, so little time. Shadertoy is way too much fun!", "fizzer, 2013-04-27I love it!", "obidobi, 2013-04-27Very cool shader. But I start to realize what a relic my gts8800 graphics card really is. 600 ms/frame", "def, 2013-04-27great demo, but i have a bug with the terrain:", "http://s23.postimg.org/5amk6hciz/scr.png", "my system:", "ubuntu 12.10 chromium, ATI HD 6950", "movAX13h, 2013-04-27haha! speed variation makes the animation look very realistic. great camera!", "srtuss, 2013-04-27Holy shit! This even runs with an good framerate. Very impressive.", "CPU, 2013-04-26WOW! A w e s o m e . superbug in the desert! Love it! err on Chrm/AMD though!", "Kobrar, 2022-12-19So I'm posting my findings regarding some large numbers and close to parallel cases for completeness sake:", "- on line 36, it should probably be", "if( abs(k2)<0.001*abs(k0) )", "this ensures the switch works for large numbers", "- the fix on line 35", "k2 /= k0; k1 /= k0; k0 = 1.0;", "seems to deal with a lot of the issues I had and makes the above redundant, although I will need to test more edge cases", "- another approach is to use alternative quadratic formula on lines 48 and 53, namely", "v = 2.0 * k0 / (-k1 + w)", "and", "v = 2.0 * k0 / (-k1 - w)", "this also behaves more numerically stable although comparison with the normalization is not available at this time", "iq, 2022-11-16As indicated in line 85, you can enable d=c+a-b to test parallelograms. You'll see it works just fine (see line 36)", "jeremyabel, 2022-11-16Putting a comment here so others can avoid my pain: the algorithm here is not suited to parallelograms, and even Hackerham's fix still fails in various situations featuring parallel edges. I've tried several other techniques and the only one I've found to be robust is the Newton method approach here: https://stackoverflow.com/questions/808441/inverse-bilinear-interpolation/18332009#18332009", "", "Note, I implemented this in C++ using doubles instead of floats, not in a shader, so take that for what it's worth.", "iq, 2022-02-17Those coordinates are really large, and when crossed and squared in the solver they quickly overflow the number of digits a number can have. You can improve the situation a little by adding this in line 35: k2 /= k0; k1 /= k0; k0 = 1.0;", "ollj, 2022-02-17well, those are some very long vectors, while the core has he range [-1., +1.] for each domain of each vector, as result of the cos()", "Kobrar, 2022-02-17I'm gettting really strange distorion for:", "a= (34,217)", "b= (1212,47)", "c= (1231,755)", "d= (49,776)", "I have yet to figure out a solution.", "jt, 2021-06-29This is very useful, thanks for sharing!", "BTW any ideas where to find information about inverse biquadratic", "(i.e. non-linear, using 3x3 points instead of 2x2 points)?", "turboplay, 2021-05-29What would be the limits of a,b,c,d for the image to be in full width height ? 0,0,1,1 ?", "ACB_Gamez, 2021-05-21Anyone know how to prevent the image from inverting along the x-axis?  or do I just have to flip it after the fact?", "MarvelousBilly, 2020-07-13How would you do this if the quad was 3 dimensional?", "billyboy123, 2018-10-28would their be an easy way to make the invbilinear manage depth also for the texture to be scaled depending on distance.", "billyboy123, 2018-10-27i've been trying to code an interpolation like this for ages, but nothing i did really worked out, this kinda blows me away, the question is could their be a muller barycentric-ish like version of this??", "Jorhlok, 2018-02-17Used this in: https://www.shadertoy.com/view/MsccD4", "\"Sega Saturn-like Dithering\"", "Hackerham, 2017-08-07btw, 45th line, put \"if(  b1 )\" and you'll see hyperboloid's saddle", "Hackerham, 2017-08-07Made a fix: https://gist.github.com/ivanpopelyshev/2a75479075286deb8ee5dc1fb2e07f09", "hackyslaker, 2017-05-25In the article many of the characters show up as unicode replacement characters \ufffd.", "Can you fix that or is that a browser setting or font setting on my end?", "francogpellegrini, 2016-08-03why if you draw a perfect quad, it render nothing?", "ollj, 2016-04-17can you do some minimal surfaces?", "anastadunbar, 2016-03-31What if I want continuously drawn like the image shown below?", "wayfinder, 2015-08-26I'm also getting some strange results on trapezoids. But for anything without any parallel edges it seem to work beautifully ;)", "wayfinder, 2015-08-26...and then get a.x closer and closer to 1 to see it break up", "wayfinder, 2015-08-26...or quads close to parallelograms even: putting in these values for a, b, c, d:", "vec2 a = vec2(1.00001,0.0) ;", "vec2 b = vec2(2.0,0.0) ;", "vec2 c = vec2(1.0,1.0) ;", "vec2 d = vec2(0.0,1.0) ;", "wayfinder, 2015-08-26Very useful, but it seems to fail on parallelograms?", "gazliddon, 2014-11-24 It's a Sega Saturn.", "", "nVidia did the poly chip for that machine, it drew quads only in much the same way. I remember a friend was doing the port of Alien Trilogy, all of  the art was tri meshes and he had to draw everything as degenerate quads", "Dave_Hoskins, 2022-05-10It's not CPU. I don't think it's done locally to me, anyway.", "FabriceNeyret2, 2022-05-10that you didn't have before ?", "Are you sure your browser didn't fallback on the CPU emulation ?", "( see https://webglreport.com/?v=2 ).", "Or maybe the last driver update was buggy with regressions :-/", "Dave_Hoskins, 2022-05-09I'm getting a \"This shader takes too long to compile\" warning on this, as well as many of my shaders.", "It doesn't seem very fair sometimes. LOL.", "hnh, 2022-04-19...Just noticed it was posted before by Bananaft.", "hnh, 2022-04-19https://www.nationalgeographic.com/photo-of-the-day/photo/mountains-mexico-landscape", "FabriceNeyret2, 2022-04-06Yes. my hypothesis is that it is done when you click \"save\". But the real saving is done asynchroneously, and these last monthes it could be dozen of second later. When you possibly already alter your code. The fact is that you can see regularly not-compiling shaders here and there.", "Dave_Hoskins, 2022-04-06I think it tries to compile when you save, for example I can\u2019t save this one broken.", "FabriceNeyret2, 2022-04-06several not-compiling shaders appear in shadertoy, so the test may not be 100% efficient.", "( I suspect that if you save, then do modifs, and the async save triggers late, it might get an inconsistant version while the compile test was done when you hit the button ).", "Dave_Hoskins, 2022-04-05Yeah, I doubt it too. I may have CTRL-S it by mistake (automatic for me with VS coding). But I just remembered it won't let me save it broken, so it's a mystery. \ud83e\udd37\u200d\u2642\ufe0f", "FabriceNeyret2, 2022-04-05@Dave: I don't believe somebody nasty would suck your passwd  just to make an easy syntax error in your code :-)", "", "If you touched this during the monthes shadertoy was very jaggy, it was quite easy to have inconsistant save (  hugely delayed async save \u2192 risky ).", "mrange, 2022-04-05For what it's worth I have forked this at some point and it also had .xy. ShaderToy dropping chars to save disk space ;)", "Dave_Hoskins, 2022-04-05hmm, it is '.xy' in all my backups (Feb.). Plus the description says '259 chars'.", "It's not like me to save a broken shader. A good time for a password change, methinks...", "FabriceNeyret2, 2022-04-05how could it once work ?", "cyberjax, 2022-04-05I'm getting a compiler error in Edge and Chrome on windows 10,", "Changing w/iResolution to w/iResolution.xy fixes the problem.", "FabriceNeyret2, 2021-11-22yes, but it's more difficult because height(x,y) doesn't directly gives shortest distance to mountain from a point in the air. so it requires a few Newton iteration to get the right point, or.... try your luck and do as if height was a valid SDF :-)  . in facts it works if the slope is less than 1. If the max slope is s, step by height/s .", "along, 2021-11-22@FabriceNeyret2 : Sphere Marching is generally used with SDF. Can it also be used here", "FabriceNeyret2, 2021-11-22number of steps:", "as often, what cost most is the sky.", "rays are stop fast on the terrain ( and would faster with sphere marching: here, regular stepping can be very slow ).", "", "left:  show steps amount. white = 0 step, black = 750 steps.", "right: hue change every 100 step. you can see that past 499 there is not much remaining.", "FabriceNeyret2, 2021-11-22@along: also, fake3D often requires longer code. Ray-tracing make simple codes at the price of perfs (and aliasing ).", "FabriceNeyret2, 2021-11-22@Greg: I was sure we did ! :-)", "", "@along: fake 3D is unlikely when you see a very long loop inside ;-)", "along, 2021-11-22Very nice version, I tried to reduce the number of for loops", "GregRostami, 2021-11-21I had a golfed version (that looked different) here:", "https://www.shadertoy.com/view/ltXXzB", "", "157 chars:", "void mainImage(out vec4 o, vec2 u)", "{", "o-=o;", "for(vec4 p = iDate, i = o-2.; o.x > (p*.1*i+i).y; i+=.002)", "o = i* texture(iChannel0, p.xw/5e2),", "p.xy += u/iResolution.x*.1, p-=.05;", "o++;", "}", "along, 2021-11-21At first I thought it was some fake 3D, I've learned a lot, tks", "FabriceNeyret2, 2021-11-21you don't see yet through the matrix ? ;-)", "", "my trick:", "- result looks like ray-something", "- In code I see 2 vec4 p(screen) and d , and a long loop ending with p+=d.", "If d is constant, this is ray marching. If d is weighted (likely from a SDF) this is sphere marching.", ";-)", "along, 2021-11-21Thank you very much. If you don't explain, I didn't know raymaching was used here", "FabriceNeyret2, 2021-11-21BTW I was pretty sure we already code golfed this code, but couldn't find it.", "-> let's do it again:  246 chars version ( from 259 )", "void mainImage( out vec4 c, vec2 w )", "{", "vec4 p = vec4(w/iResolution.xy,1,1)-.5, d=p,t;", "p.z += iTime*20.; d.y-=.4;", "", "for ( float s,i=750. ; --i>0. ; p+=d ) {", "for( t-=t, s = .5; s < 32.; s+=s )", "t += texture( iChannel0, .3+ p.xz*s/3e3 )/s;", "c = 1.+d.x-t*i/1e3, c.z -= .1,", "t.x > p.y*.014+2.6 ? i-=i : i;", "}", "}", "along, 2021-11-21very thankful", "FabriceNeyret2, 2021-11-21#9-10: p = ray start, d = ray direction", "", "#12: ray marching steps", "", "#15: terrain height = fractal noise ( based on texture0 rather than Perlin)", "", "#16: pixel color ( fixed when break or end loop )", "", "#17:  stop if ray height < terrain height", "", "#18: ray advance by 1 step", "along, 2021-11-21Does anyone know where this code is explained", "nr4, 2021-03-09t = F F F F F F;", "", "Golf unwinds  sick result, really nice", "Logos, 2020-02-18Super!!!!!!!", "GregRostami, 2019-06-17I just reduced my golfed Mystery shader to 148 chars:", "https://www.shadertoy.com/view/ltXXzB", "Dave_Hoskins, 2019-06-10I love WebGL 2 as much as anyone can. This is under two tweets and was originally GL 1. It's my personal decision - weird as it may be, this one must run on my creaking old iPad, sorry about that.", "Dave_Hoskins, 2019-06-10You said it was compatible. You're welcome to fork this four year old shader, if it distresses you.\ud83d\ude09", "FabriceNeyret2, 2019-06-10yes. but what should we aim to be webGL1 compatible ?", "Should we also account for systems not allowing buffers ? or derivatives ? those where 1500 steps is too much ? :-)", "", "NB: it's easy to not be webGL1 compatible: just use line prolongator \"\\\"", "Dave_Hoskins, 2019-06-10Greg's 220 version, splendid though it is, is not webGL1 compatible, I think it's the variable loop length and the multi-declarations, plus it's a bit vertically stretched\ud83d\ude01 :-", "https://www.shadertoy.com/view/3tB3zK", "FabriceNeyret2, 2019-06-10the 220 chars version ? yep.", "Dave_Hoskins, 2019-06-09Is that the WebGL 2 version?", "FabriceNeyret2, 2019-06-09... and have you seen there was a  220 chars code golfed version below in comments ? ;-)", "mrange, 2019-06-09I think this is a gem in that it looks remarkably good for so little code", "Dave_Hoskins, 2019-05-10Oh no, it doesn't work. WebGL1 needs the 'for-loop' declaration.", "Dave_Hoskins, 2019-05-10Greg, moving the 'float' is a splendid idea, thanks! Not sure about changing the ray and scale though...\ud83e\udd14 \ud83d\ude03", "GregRostami, 2019-05-09Here's a reduced version for WebGL1:", "247 chars:", "#define F +texture(iChannel0,.3+p.xz*s/3e3)/(s+=s)", "", "void mainImage( out vec4 c,vec2 w )", "{", "vec4 p=vec4(w/iResolution.x,1,1)-.5,d=p,t;", "p.z = iTime*20.;", "float i,s;", "for(i=1.5;i>0.;i-=.002)", "{", "s=.5;", "t = F F F F F F;", "c =1.+d.x-t*i; c.z-=.1;", "if(t.x>p.y*.014+1.3)break;", "p += d;", "}", "}", "Dave_Hoskins, 2019-05-09@GregRostami, thanks Greg, very nice. like I already mentioned I'd like to keep it WebGL1, like the original.", "GregRostami, 2019-05-09Ooops.", "I meant 220 chars:", "#define F +texture(iChannel0,.3+p.xz*s/3e3)/(s+=s)", "#define mainImage(c,w)\t\t\t\t\t\t\t\t\t\t\t\\", "vec4 p=vec4(w/iResolution.x,1,1)-.5,d=p,t;\t\t\t\t\t\\", "p.z = iTime*20.;\t\t\t\t\t\t\t\t\t\t\t\\", "for( float s, i=1.5; i>0. && t.x<p.y*.01+1.3; i-=.002 )\t\\", "s = .5,\t\t\t\t\t\t\t\t\t\t\t\t\t\\", "t = F F F F F F,\t\t\t\t\t\t\t\t\t\t\\", "c = 1.+d.x-t*i, c.z-=.1,\t\t\t\t\t\t\t\t\\", "p += d", "GregRostami, 2019-05-09Here's a close approximation to the original shader:", "221 chars:", "#define F +texture(iChannel0,.3+p.xz*s/3e3)/(s+=s)", "#define mainImage(c,w)\t\t\t\t\t\t\t\t\t\t\t\\", "vec4 p=vec4(w/iResolution.x,1,1)-.5,d=p,t;\t\t\t\t\t\\", "p.z = iTime*20.;\t\t\t\t\t\t\t\t\t\t\t\\", "for( float s, i=1.5; i>0. && t.x<p.y*.009+1.3; i-=.002 )\t\\", "s = .5,\t\t\t\t\t\t\t\t\t\t\t\t\t\\", "t = F F F F F F,\t\t\t\t\t\t\t\t\t\t\\", "c = 1.+d.x-t*i, c.z-=.1,\t\t\t\t\t\t\t\t\\", "p += d", "dev, 2019-05-03Absolutely in love with this! I've spent the afternoon trying to learn more about shaders by studying the code, but there are still things I'm not really clear about. It would be an amazing teaching tool if someone was able to drop a version of this in the comments with meaningful variable names", "MelBrandle, 2019-05-03Now this is a really cool simulation. I would be happy to have something like this as a screen saver on my laptop. I reckon it would be pretty relaxing to see. Seems easy enough to render too. Thanks for sharing the code for this mate! I'll go and play around with it a little myself!", "jeyko, 2019-05-01slick code", "cedricl, 2019-04-29Brilliant.", "khlorghaal, 2019-04-22whoa from the preview i was expecting this to be heavyweight, but only 8 lines is extraordinary", "kiyamada96, 2019-04-22So beautiful", "Dave_Hoskins, 2019-04-22Thanks iq, nice one. I'll leave it for now because I want it to still be WebGL 1 compatible.", "iq, 2019-04-22I saved 14 chars by restructuring the loop: #define F +texture(iChannel0,.3+p.xz*s/3e3)/(s+=s)", "", "void mainImage( out vec4 c, vec2 w )", "{", "vec4 p=vec4(w/iResolution.xy,1,1)-.5,d=p,t;", "p.z += iTime*20.; d.y-=.4;", "for( float s, i=1.5; i>0. && t.x<p.y*.007+1.3; i-=.002 )", "s = .5,", "t = F F F F F F,", "c = 1.+d.x-t*i, c.z-=.1,", "p += d;", "}", "I feel more can be done with regard to the need for t or d, and maybe with the several aesthetic factors (.3, 1.3, .4)?", "Dave_Hoskins, 2018-05-31Just saved another 5 chars by removing the vec4 immediate value! I don't know, I leave things alone for 3 years, then all hell breaks out!!", "Dave_Hoskins, 2018-05-31 I don't know - a massive coincidence? Nice find though, thanks Bananaft.", "I like to think mine is a little more like an old Japanese wash painting than a Mexican mountain range", "iq, 2018-05-31lol", "", "Dave, can you explain what happened?", "FabriceNeyret2, 2018-05-30:-p", "Bananaft, 2018-05-30This shader won 2018 National Geographic Travel Photographer of the Year Contest: https://twitter.com/TheAtlPhoto/status/1001884608626151424", "", "Congratulations, Dave!!!", "Dave_Hoskins, 2018-05-30@Fab", "FabriceNeyret2, 2018-05-30@Dave: keeping things as is : especially for a shader that was an official submission to a competition. These one should be put read-only ;-)", "Dave_Hoskins, 2018-05-30Perhaps I should just add some characters to make it up to 2 tweets?", "iapafoto, 2018-05-30-1 ch     vec4(1,1.,.9,9) => vec4(1,1,.9,9)      and still very friendly", "Dave_Hoskins, 2018-05-30I like to keep things WebGL 1 friendly as they were originally, if that's OK?", "GregRostami, 2018-05-30Using the #define trick.  ;-)", "", "251 chars:", "#define F +texture(iChannel0,.3+p.xz*s/3e3)/(s+=s)", "#define mainImage(c,w)                             \\", "vec4 p=vec4(w/iResolution.xy,1,1)-.5,d=p,t;    \\", "p.z += iTime*20.;d.y-=.4;                      \\", "for(float i=1.5;i>0.;i-=.002)                  \\", "{                                              \\", "float s=.5;                                \\", "t = F F F F F F;                           \\", "c = vec4(1,1.,.9,9)+d.x-t*i;               \\", "if(t.x>p.y*.007+1.3)break;                 \\", "p += d;                                    \\", "}", "FabriceNeyret2, 2016-02-18now, it's pretty unlikely that an unitialized 32bits value by chance happen to have exactly the unique code for NaN, for so many pixels. Of I want to understand how :-)", "coyote, 2016-02-18Fabrice, starting with c-=c works. (I tried it even before you asked in attempt to \"correct\" your shader)", "", "Let me speculate a little (please don't mind if I am way off...)", "I suppose c-=c is optimised by compiler into some kind of GPU assembly \"clear c\". Otherwise, just subtracting NaN from NaN would produce NaN. (unfortunately, I don't know how to see final shader assembly on mac and check that...)", "That's probably why on mac mini those \"o -= o - X\" doesn't work. It's possible that compiler can't figure out that it could just \"clear c\" and then subtract X, but it rather subtract X from o (getting NaN), and then subtract the result from o (again getting NaN).", "When it is written explicitly as \"o = o - o + X\" then it is probably detected and optimised into clearing of c and adding X which gets rid of the NaN.", "FabriceNeyret2, 2016-02-17Dave: well, I was at 261 chars at my last proposal above :-/", "FabriceNeyret2, 2016-02-17coyote: then could you try starting with c-=c ?", "Dave_Hoskins, 2016-02-17Got another char by removing the equals in i>=0.0;", "coyote, 2016-02-17What if at the start there happens to be NaN in c.a?", "In that case if c.a doesn't get initialised before it is multiplied with t, it would propagate all the way through, and into all channels!", "t*NaN + d.x + vec4 -> whole c becomes NaN", "And since I get black pixels here and there this would explain it.", "FabriceNeyret2, 2016-02-17no, it really shouldn't, cause I count of value of prev step (and don't see how it could be another way)", "coyote, 2016-02-17Fabrice, neat trick with converting int to float through vec4!", "However, in this particular case you are depending on the order of execution. For example on mac mini there are glitches which disappear if the line in question is written like this:", "... ? c = vec4(1,.9,.8,i),   c+=d.x-t/5e2*c.a,   p+=d : ...", "But of course then there is no gain in size.", "Btw, I am not sure, but I think I read somewhere that in C/C++ order of execution is not specified or guaranteed even for comma separated expressions. I wonder what exactly is the GLSL compiler specification regarding this...", "Although, I must say I have never seen problems with GLSL and comma separating on any of computers I tried it on.", "FabriceNeyret2, 2016-02-16you didn't like my -9 (not relating on this bug) ? ;-)", "Dave_Hoskins, 2016-02-16But it was a Shadertoy competition though. So bugs must be included!", "FabriceNeyret2, 2016-02-16coyote: I totally share you opinion here. I'm not the author of this page :-)", "coyote, 2016-02-16Fabrice, sorry, but it's not fair to use bugs in counting routine to achieve smaller footprint. For example here are another 7 chars \"saved\"... not! :-p", "Just try it:void", "mainImage( out", "vec4", "c, vec2", "w )", "{", "vec4", "p=vec4(w/iResolution.xy,1,1)-.5,d=p*.5,t;", "p.z += iGlobalTime*20.;d.y-=.2;", "", "for(float", "i=1.7;i>=0.;i-=.002)", "{", "float", "s=.5;", "GregRostami, 2016-02-16ONE TWEET ... ONE TWEET ... You can do it!!", "FabriceNeyret2, 2016-02-15-1 : int i and trick to convert for free", "#define F +texture2D( iChannel0, .3 + p.xz*t.a/3e3 ) / (t.a*=2.)", "", "void mainImage( out vec4 c, vec2 w )", "{", "vec4 p=vec4(w/iResolution.xy,1,1)-.5, d=p*.5,t;", "p.z += iGlobalTime*20.; d.y-=.2;", "", "for(int i=800; i&gt 0; i--)", "t.a=.5,", "t = F", "F", "F", "F", "F", "F,", "t.x <= p.y*.01+1.3", "? c = vec4(1,.9,.8,i)+d.x-t*c.a/5e2,  p += d", ": d;", "}", "FabriceNeyret2, 2016-02-15-2: replace float s by c.a, get rid of {}      -1: i>0.", "#define F +texture2D( iChannel0, .3 + p.xz*c.a/3e3 ) / (c.a*=2.)", "", "void mainImage( out vec4 c, vec2 w )", "{", "vec4 p=vec4(w/iResolution.xy,1,1)-.5, d=p*.5,t;", "p.z += iGlobalTime*20.; d.y-=.2;", "", "for(float i=1.7; i>0.; i-=.002)", "c.a=.5,", "t = F", "F", "F", "F", "F", "F,", "t.x &lt = p.y*.01+1.3", "? c = vec4(1,.9,.8,0)+d.x-t*i,  p += d", ": d;", "}", "FabriceNeyret2, 2016-02-15-6 (264) by slower:", "t.x <= p.y*.01+1.3", "? c = vec4(1,.9,.8,9)+d.x-t*i,p += d", ": d;", "FabriceNeyret2, 2016-02-15well, I'm kind of reluctant to count of what is mostly a bug in the counting. but one could consider part of the game. Then you can reshape a lot more (like, newline after each declarative word ;-) ).", "Dave_Hoskins, 2016-02-15OK then, using new lines takes it down to 270 chars!", "The text looks kind of mad though...", "FabriceNeyret2, 2016-02-12note the ones that are compulsory as separators.", "(this was forgetten for the newlines, that never count)", "Dave_Hoskins, 2016-02-12Why does replacing the \"F F F...\" with \"F+F+F...\" not increase the character count? I thought spaces were ignored?", "tsone, 2016-01-10This is amazing! Just wow.", "coyote, 2015-07-12I've just tried my 280 char version on laptop with native OpenGL Chrome on nvidia 850 and it doesn't work correctly without the following change:", "#define F texture2D(iChannel0,.3+p.xz*s/3e3,-99.)/(s+=s)", "It seems that nvidia driver compiles inlined instructions in different order. (I've already encountered this kind of problems in the past...)", "Anyway, I tested it and this new define works OK on mac with iris, on windows with intel 4600 hd native Chrome, and on windows with nvidia 850 native Chrome.", "coyote, 2015-07-11280 chars, same as the original.", "Note that it can be 279, because p.z += iGlobalTime*20. is equivalent to p.z = .5 + iGlobalTime*20., and then .5 can be left out without a lot of difference since it is only offset in time. I left the \"+=\" just so it would be exactly the same as yours...", "#define F texture2D(iChannel0,.3+p.xz*(s+=s)/6e3,-99.)/s", "void mainImage( out vec4 c, vec2 w )", "{", "vec4 p=vec4(w/iResolution.xy,1,1)-.5,d=p*.5,t;", "p.z += iGlobalTime*20.;d.y-=.2;", "", "for(float i=1.7;i>=0.;i-=.002)", "{", "float s=.5;", "t=F+F+F+F+F+F;", "c = vec4(1,.9,.8,9)+d.x-t*i;", "if(t.x>p.y*.01+1.3)break;", "p += d;", "}", "}", "Dave_Hoskins, 2015-07-07Hi, I used iGlobalTime because it gave me some control of where the viewer is located, every time it starts.. Also the -99.0 is to prevent a white grid appearing all over the landscape on my Mac - see comments above.", "FabriceNeyret2, 2015-07-07...and #define F t+=texture2D(iChannel0,.3+p.xz*s/6e3)/s; s+=s;", "FabriceNeyret2, 2015-07-07...so you can get back to 2 tweets with :", "void mainImage( out vec4 c, vec2 w ) {", "", "vec4 p = vec4(w,1,1)/iResolution.xyzz -.5, d=p*.5,t;", "p.z += iDate.w*20.; d.y-=.2;", "for(float i=1.7; i>0.; i-=.002) {", "float s=1.; t=d-d; F F F F F F", "c = vec4(1,.9,.8,9)+d.x-t*i;", "if(t.x>p.y*.01+1.3) break;", "p += d;", "}", "}", "FabriceNeyret2, 2015-07-07Hi don't understand what effect adds the -99. factor in text2D ? (suppressing it don't change the look for me).", "Dave_Hoskins, 2015-02-10'F' is the macro defined at the top of the code.", "It just repeats that entire code 6 times:-", "t+=texture2D(iChannel0,.3+p.xw*s/6e3,-99.)/s;s+=s;", "t+=texture2D(iChannel0,.3+p.xw*s/6e3,-99.)/s;s+=s;", "t+=texture2D(iChannel0,.3+p.xw*s/6e3,-99.)/s;s+=s;", "t+=texture2D(iChannel0,.3+p.xw*s/6e3,-99.)/s;s+=s;", "t+=texture2D(iChannel0,.3+p.xw*s/6e3,-99.)/s;s+=s;", "t+=texture2D(iChannel0,.3+p.xw*s/6e3,-99.)/s;s+=s;", "", "So even if the typed code is in 2 tweets it is actually expanded when compiling.", "ob6160, 2015-02-10float s=1.;t=d-d; F F F F F F", "Could someone explain what the \"F F F F F F\" section is doing", "dekrat, 2015-02-09y&#x016b;gen", "guil, 2015-02-03So nice!", "GregRostami, 2015-02-02This shader gets my vote for the BEST 2TC. Just STUNNING for 280 chars!!", "coyote, 2015-02-02Dave, thanks for the info.", "I've just read some of your other comments on iq's [2tc] cave shader about NaN, and frag color alpha on iPad etc...", "I think that we really need a forum on shadertoy so we can more easily exchange general knowledge. It's hard to come across useful information about GLSL behaviour when it is almost randomly dispersed through comments on many different shaders.", "Dave_Hoskins, 2015-02-01Thanks, I'm not sure I trust the t-=t when unitialised, I think it's given me random artifacts before. I've changed the colours and added a sun.", "coyote, 2015-01-31Sorry, I tried to bold the changes, but screwed it up.", "I hope it won't be too much trouble to clear it up.", "coyote, 2015-01-31Now works ok on my Mac!", "Unfortunately still has that other problem on PC.", "", "Saving another 14 chars...", "... .3+p.xw*s/3e3,-99.)/s; s+=s;", "vec4 p=gl_FragCoord/[b]iResolution.xyzz-.5,d=p*.5,t; //remove unnecessary parens too", "[b]p.w += iGlobalTime*8.;d.y-=.2; //using p.w saves 5 chars in previous line", "for(float i=1.;i>=0.;i-=.002)", "{", "float s=1.;t-=t; F F F F F", "gl_FragColor=[b]1.-i+(t-t*t)*i;[\\b] //mix(p/p,(1.-t)*t,i)", "I reversed the counter because reversed mix, when unfolded, is shorter.", "eiffie, 2015-01-31Looks awesome!", "Dave_Hoskins, 2015-01-31Managed to squeeze it in anyway", "Dave_Hoskins, 2015-01-31Oh ok. If you add -99 as a last parameter on the texture lookup it fixes the line banding effect you're seeing. But it unfortunately runs over the two tweets rule", "Dave_Hoskins, 2015-01-31Perhaps Intel did some shortcuts with texture precision on Iris? It does look like a precision problem that probably wouldn't be noticed with normal, proper  usage.", "coyote, 2015-01-30Here is what I get on latest mac mini with iris:", "mountains on mac", "...and on asus laptop with nvidia 850:", "mountains on pc", "Please, can you post some screenshot so I can see what you get on your computers?", "iapafoto, 2015-01-30!!!", "iq, 2015-01-30I love the white color \"p/p\"", "BigWIngs, 2019-10-04OUch, I feel bad for the worm.", "Dusty, 2022-12-29Didnt like being faced with knowing one thing is really factually possible if the buffers reset, and hearing claims that something that would factually be possible somehow magically and mysteriously isnt if the buffers reset.", "", "Now I know that the thing claimed to be impossible wasnt the thing meant and that the person saying it also doesnt think its impossible, that they just made a poorly worded claim that is strictly wrong (all the way in opposite land) given the wording. Thanks for clearing it up.", "iq, 2022-12-19By \"games would no longer be possible\" I mean that it wouldn't be possible to have games (state based shaders in general) survive a resolution change or full-screen.", "", "Forcing a restart on resize would be confusing and against user expectations - website don't reload when you resize the browser window, videos don't restart on Youtube when you go full-screen, etc. So forcing a restart when many of the shaders we have don't need it would go against stablished UX conventions. The ones that need it, can do it on their own, although it is very painful indeed, which is bad for the shader artists/creators.", "", "So I think we should work on adding the ever wanted buffer controls to passes. These should be per pass, not per shader (again, a pass might need restart on resize, other passes on the same shader shouldn't). Other pass/buffer controls include frequency of refresh (once, on resize, every frame, every N frames, etc). A second iteration on that would be per buffer/pass pixel format options (unorm8 vs int v f16 v f32). And a third one would be custom resolution for each buffer/pass.", "", "We've been a slow on implementing many of these features, but we should be able to put them up the priority list.", "Dusty, 2022-12-19I dont understand why you keep saying physics in shadertoy would be impossible .. those shaders would be able to detect the change (as pointed out, reliably) and re-init. therefore physics would continue to be possible and not be so called \"impossible\"  .. whats impossible is altering this shader to re-init because it has no way of ever knowing to", "", "this looks like you are articulating one reason, but actually have a different one that you arent articulating", "Dave_Hoskins, 2022-12-19I still think we should set iFrames to zero on just a full screen switch. It\u2019s not a really a problem for games, as the player just goes full screen when starting to play. Does it really matter if physics demos reset on a full screen switch? It might be expected. But it does fix a lot of perceived issues with Shadertoy rendering. Nothing should happen when resizing the window as always, just the full screen switch.", "iq, 2022-12-19If we cleared the buffer on resize, then the state of the shader would be lost every time the users goes full screen (or back!), and physics and games would no longer be possible on Shadertoy.", "Dusty, 2022-12-19detecting a clear or cleared buffer in non-rendering contexts should be trivial and reliable?", "", "is that special value in my buffer still that special constant that I set, or do I need to output the init again because we just reset/resized/restarted?", "", "what am I missing?", "iq, 2022-12-19The rule must stay \"never clear buffers\" of course, otherwise most shaders that use buffers wouldn't even be possible. Think physics, games, emulators, etc etc. But, for those shaders that want a clear on resize without doing it on their own, we'll be adding an optional checkbox so they can opt-in into that particular behavior.", "Dusty, 2022-12-182022 and the buffers still dont get cleared on resolution change in the shadertoy - sure it cant always be done and still get meaningfully converging output - but thats different from the rule being always never clear, therefore always never getting meaningfully converging output for the majority if cases", "Cewein, 2022-05-04it seem like metal material is producing a lot of back and white dot around the scene whereas the previous lambert mat wasn't ! still very very cool !", "mgjunior, 2019-10-07Very thanks you!", "iq, 2019-10-04\"fog factor\" ^__^", "mgjunior, 2019-10-04ff(For Fog?) or ff(Final Fantacy?)  \ud83e\udd14", "vchizhov, 2018-05-08If anybody's wondering what the first method is (since the link has expired): http://orbit.dtu.dk/files/126824972/onb_frisvad_jgt2012_v2.pdf", "But pixar's method is an improvement upon this anyways. And the last method seems to be also faster.", "etale_cohomology, 2017-07-15How does multi-pass rendering work on a fragment shader? Does the shader feed-back into itself?", "iq, 2016-05-09Yeah, buffers cannot be cleared on resolution change (like when going to fullscreen), otherwise games won't work. In the future users will have more control on the buffer.", "WouterVanNifterick, 2016-04-05Looks awesome!", "", "Line 56 from Buf A can be removed, because the value that's set to h is not used anywhere...", "archee, 2016-01-11Going to fullscreen won't work.", "revers, 2016-01-05Thanks for sharing your knowladge and amazing work!", "Geolm, 2016-01-05Great  It's a detail but buffers are not cleared when the viewport resolution changes.", "dila, 2016-01-05sweet indeed", "XT95, 2016-01-05Rocks!", "TambakoJaguar, 2016-01-04Very nice! You can do great stuff with the buffers!", "Dave_Hoskins, 2016-01-04Lovely lighting. My GPU fan just woke up!", "vgs, 2016-01-04love it!", "poljere, 2016-01-04Progressive pathtracing", "Ric3cir121, 2021-01-13start getting weird after 4 hours, i forgot the shader running for 4 hours", "Ric3cir121, 2021-01-13start getting weird after 4 hours, i forgot the shader running for 4 hours", "aaaidan, 2014-11-05(although I think 0.005 is maybe a better value in disk() ... slightly crisper?)", "aaaidan, 2014-11-05Antialiasing! Great!", "chrleon, 2014-10-13This makes me happy just to look at", "r1, 2014-07-04So good.", "Flavio, 2014-06-25Very nice, really!", "rogerdahl, 2014-04-01This shader just made by day -- and I love the art snob description", "vug, 2014-03-20Hehe, thanks! I prepared this mock-up text for its description. Now it is ready to be displayed in a new art museum :-P", "", "\"In this piece the artists wants to draw attention to the Gouldian aspects of evolution that are indifferent about complexity. It is an objection to the popular Dawkinsian interpretation in which there is an absolute measure of complexity towards which species evolve.", "", "These species evolve playfully and carefree at the belly of the mother earth, waiting unknowingly for the next catastrophe that'll drastically change the evolutionary landscape.\"", "Dave_Hoskins, 2014-03-20Love the moving sixties wallpaper dude! Well done.", "vug, 2014-03-20Omg! I can't believe it. Thanks a lot! ^_^", "iq, 2014-03-20This is seriously awesome. And it won the Hackathon! Congratulations!", "mu6k, 2014-03-20Dat pattern... Sick!", "w23, 2014-03-20cool!", "HLorenzi, 2017-01-17No problem, it's at gmail.com, and the name is hlorenzi12", "nm6363, 2017-01-17Hi, I have some questions, and I need your help, please could you provide me your email.", "GustavoMS, 2017-01-088-bit mentality by Stage7, found it after messing with the html code and googling, lol. Very nice chiptune.", "GustavoMS, 2017-01-08Very nice and runs smoothly. What is the name of the song, please?", "ac3t1ne, 2014-10-11hypnotic!", "HLorenzi, 2013-11-20Yes, it simulates many past frames in order to figure out his current state. At the start of the simulation, I assume he's always at a stand still (because if I really wanted to know his true state at that time, I'd have to simulate even more frames -- so the thing here is finding the ideal minimum amount of past frames to simulate so that his final position seems OK)", "squeakyneb, 2013-11-20So you don't actually store any state, you just analyse the level around him and figure out what the state *should* be, yes?", "HLorenzi, 2013-11-19Whoa. Never would have imagined this to be picked as Shader of the Week! Anyway, I have to backtrack Mario a bit (placing him standing on top of whichever block is there) and simulate his movements up to his final position, every frame (and for every pixel that he appears in). Think about simulating the game from the start of the level; but I arranged the blocks so that it's only necessary to simulate from the current screen position onward, to get nice movement. I've commented the code now. Hope it helps a bit!  (I really wanted more sprites, specially cloudbushes! Also, I'd have done a title screen that starts the game when you press some key -- using the Keyboard input channel)", "iq, 2013-11-19Since the bitmaps for sprMarioWalk1, sprMarioWalk2, sprMarioWalk3 and sprMarioJump have parts in common, perhaps you can reuse them and make some room for the bushes/clouds (which are the same sprite, right?). Probably too much work...", "squeakyneb, 2013-11-19Holy what the fuck. Fantastic.", "Qqwy, 2013-11-18This is insane! Please explain how this works. Pretty please? =3", "iq, 2013-11-18Haha, amazing!", "xrx, 2022-07-28few sound notes would make keys alive", "ttoinou, 2018-07-20[This comment has been hidden by the shader author]", "stefanboss, 2018-04-06wow", "eclectic, 2017-11-18This is amazing, as a composer I see much potencial in shaders like this if it would be possible to input midi songs and make it play them... I guess that would be complicated, anyway congratulations for such a wonderful work.", "ollj, 2017-11-08the music sheet text on the booklet is flickering because", "a ray approaches the book and hits it within an epsilon tolerance", "this tolerance creates a .xy offset that later gets visible.", "the offset varies due to book curvature and varying camera rotation.", "", "Because the book is curved but the text is parallel-projected.", "and the difference between curvatures is visible.", "", "thie moire is significantly worse on lower resolutions, duh, but it is still significant on higher resolutions.", "ollj, 2017-11-08you don't often see curvature being estimated to make an item look \"used\". so it works on a more subconscious level.", "VoidChicken, 2016-11-11@rickiters", "Line 301 would be better as  t += h * .7;  .75 still has a blob.", "ollj, 2016-04-17obviously needs audio input from ogg mid or abc.  r much simpler, mouse posision translated to 3d space.", "dila, 2015-04-25It really is amazing that, with this level of detail, it runs at any reasonable framerate at all. I always find myself thinking about this one.", "rickiters, 2015-03-26Why does Firefox not need the modification?", "rickiters, 2015-03-26Change line 301 to t += h * .75;", "The black blobs on the bench go away.", "ac3t1ne, 2014-10-11WAT!", "cyanux, 2014-06-14I think of the hours of work, brave!", "aki, 2013-04-19How come the audio is not mapped to the notes and the piano is not playing? Disappointment, you could do better", "huttarl, 2013-04-18Very nice! Even tho it crashes my display driver sometimes, it's worth it.", "laggyluk, 2013-04-16amazing", "atyuwen, 2013-04-11Fantastic, I also wrote a piano simulator several months ago, but it's too lame compared to this...", "Here is my version: http://www.cnblogs.com/atyuwen/archive/2012/11/25/piano8k.html", "fizzer, 2013-04-09This is not just laudable on a technical level, but also artistically brilliant. It ticks both of my boxes!", "inspercho, 2013-04-09such an inspiration! thank you for sharing iq.", "zz85, 2013-04-09way beautiful!!! if you could integrate your piano preset from soundtoy into this, would be perfect!", "reinder, 2013-04-08very beatiful!", "Voltage, 2013-04-07You win raymarching.... again.  I'd love to see the non webGL version.... can you post it or release it please Mr IQ.", "P_Malin, 2013-04-06This is fantastic. Beautiful composition, lighting and materials. What a work of art! The code is so direct each term is like a brush stroke on a canvas. Looking forward to more!", "PauloFalcao, 2013-04-06OK...this is Awesome!!!", "Dave_Hoskins, 2013-04-06Love the window light, it reminds me of old Renderman demos.", "Works fine here on Win7/Latest Chrome/GTX-680.", "rafacacique, 2013-04-06Absolutely amazing work, iq!!", "CPU, 2013-04-05Wow! That's awesome bro! It's just a black screen on Win/Chrome though! Amazing work - love the detail and reflections, esp the glints on the pedals!", "Danguafer, 2013-04-05I realized that these problems are generated by Angle's GLSL to HLSL translator. Hope it gets fixed on future versions.", "", "Awesome scene by the way ;)", "kacperek345, 2018-10-02Winding Menger Tunnel", "ollj, 2017-04-18better when pausing and resuming the audio at random", "Grassrunner, 2020-02-11Thank you", "jonobr1, 2017-03-11Probably, but it would be calculated as just another circle that's bigger behind.", "subhasish2017, 2016-12-01Can we have something like stroke color in webgl , similar to what we have in 2d canvas .", "Where I say radius=30, strokeWidth=2, strokeFill=SomeColorToBeFilledInside(white if we don't want to fill anything), strokeColor=SomeBorderColor and it will render a circle with only borders ,I was trying to modify your code but I am not very good in glsl, can you help me achieve this?", "jonobr1, 2014-03-23I picked it up from: http://webstaff.itn.liu.se/~stegu/webglshadertutorial/shadertutorial.html", "", "Thanks for the clarification!", "Trisomie21, 2014-03-20I see this smoothstep() all over the place for AA with distance, and I dont know why", "Did you pick it up somewhere or you devised this AA method yourself ?", "", "The circle() function I pasted work because the distance are screen space.", "So you dont need to normalize your units.", "If you want to work in a 0-1 space, you use the same code but you multiply your distance to go into screen space.", "float t = clamp(d*pixelScale,0.,1.);", "", "Anyway, this setup your var in screen space", "vec2 uv = gl_FragCoord.xy;", "vec2 center = iResolution.xy*.5;", "float radius = iResolution.y*.25;", "jonobr1, 2014-03-20Thanks for the comment @Trisomie21. I'm new to glsl, so I appreciate the help! When I paste in your code, however I see a radial gradient not a circle: https://dl.dropboxusercontent.com/u/1595444/Pictures/shader-toy-circle.png", "Trisomie21, 2014-03-19I'm always curious why people do antialiasing via smoothstep() and fudge factors?", "If you use screen space distances you can do a better approximation of coverage.", "Then you simply get : alpha = saturate(distance);  without any fudge.", "", "So the function become", "vec4 circle(vec2 uv, vec2 pos, float rad, vec3 color) {", "float d = length(pos - uv)-rad;", "float t = clamp(d,0.,1.);", "return vec4(color, 1.-t);", "}", "jonobr1, 2014-03-19Thanks @Gijs!", "Gijs, 2014-03-19The ratio of the screen is not 1:1(closer to 2:1), that's why your circle is stretched in the X-direction. To fix this you need to addapt 'uv' to the screenResolution its ratio(add between 31-32)  : \"uv.x *= iResolution.x/iResolution.y;\". With those code you stretch the X-direction to fit the Ratio.", "Lumos, 2020-08-23Beautiful shader  Could i use it commercially, for VJing and Music Videos?", "", "Also, may I change the code to make the shader react to music?", "", "Thank you for your Time ^^", "etale_cohomology, 2017-07-14This is how I imagine open sets closing in on interior points (in the context of topology)!", "stormouse, 2016-02-21line 42 could be", "r = 0.5 * log(r);", "and the final effect is the same (while more efficient", "jt, 2016-02-04pretty", "DelvarWorld, 2015-10-05Your lovely noise pattern was the inspiration for this preloader http://shaderfrog.com/app/view/328", "", "I'm going to see if I can apply the same 4d algorithm to get this to tile on a 3d object, like http://shaderfrog.com/app/view/254", "Flavio, 2014-12-28really cool!", "cyanux, 2014-06-24So realistic", "utak3r, 2020-12-01Are you compressing somehow the freq axis (for fft part)? I mean, most of the audio in high freqs are just harmonics, while the most useful (at least for visuaization, imho) info is in the first 2kHz.", "BigWIngs, 2020-07-30@ Also, you note 'marcthenarc, the texture's format is single channel (GL_RED), there's no waste.'", "", "But packing it like this requires two texture samples to get FFT AND waveform instead of one. Would be better to pack it in the same pixel, or am I missing something?", "BigWIngs, 2020-07-30@iq what is the interval that this captures? Ideally it would be the exact time between two frames but since framerate can vary, that might be difficult.", "dmitrico, 2019-02-22Hello. I am trying to port some audio visualizing shaders to DirectX and I have a bit problem with audio texture. As I understand first row is some kinde of audio frequency represented with FFT analize methd. But i cant undertand how i should proces raw FFT date to make more smooth histogram. May be ssome one understand that and can explain it to me?", "SableRaf, 2019-01-03I'm starting to port Shadertoy input examples to Processing (https://github.com/SableRaf/Shadertoy2Processing)", "", "For this one, I understand the 512x2 texture and I got the FFT line working, but I don't understand what type of sound visualization the \"wave information\" on the second line is supposed to correspond to. Could you give me some pointers?", "", "Thanks!", "cmarangu, 2018-10-02\u2669\u266a\u266b\u266c so good\u2669\u266a\u266b\u266c", "iq, 2017-05-22marcthenarc, the texture's format is single channel (GL_RED), there's no waste.", "DonKarlssonSan, 2017-05-15Aaaa! Now I see how it works =) Thank you!", "marcthenarc, 2017-03-12@iq Is there a reason why you used 2 rows for the texture?  You seem to use each row's red channel to store data but don't use the others.  What if it was a 512 x 1 and used red from fft and green from wavel ? Is there other info in those channels that  I'm not aware ?", "snakebyteme2, 2017-02-20Can someone confirm this?", "This is my best guess.", "", "The first row row in the texture seems to be normalized FFT spectrum magnitude.", "The spectrum will always be half of signal length, so you will need 1024 audio signal samples to get 512 FFT samples.", "", "Pseudo code:", "", "realSignal[1024] //mono signal floats for input", "imagSignal[1024] //can be all zeroes for input", "spectumMag[512] //populate after FFT", "fft.forward(realSignal,imagSignal)", "spectrumLength = realSignal.length / 2", "for (int i = 0; i <= spectrum.Length - 1; i++) {", "float magnitude = log10(sqrt(pow(realSignal[i], 2) + pow(imagSignal[i], 2)));", "spectumMag[i]= magnitude;", "}", "//normalize spectumMag[] between 0 to 1 using min and max values from spectumMag[]", "min = spectumMag[].MinValue;", "max = spectumMag[].MaxValue;", "for (int i = 0; i <= spectrumMag.length - 1; i++) {", "spectrumMag[i] = (spectrumMag[i] - min) / (max - min);", "}", "XShaderToy, 2014-07-25great, It's helpful", "Artoo, 2014-05-01I have been experimenting porting some simple shaders into Ableton/Max4Live/Jitter.", "", "Obviously it would be great if I was able to pass in audio from Ableton but I am still unclear about how you convert audio on shadertoy. You state that the sound is uploaded as a 512x2 texture; Does the shadertoy platform carry out this conversion?", "iq, 2013-02-28That's exactly how it is, correct.", "huttarl, 2013-02-28Notes...", "", "Looks like, in the frequency data, the x (or u) axis of the texture is the frequency (scaled to the 0-to-1 interval). And the color of the texture there, or at least the first component of it, is the strength of the sound at that frequency? Is there a spec about this somewhere?", "", "Similarly, in the wave data (second row), the x (or u) axis of the texture is the X axis of the waveform over this tiny slice of time (scaled to the 0-to-1 interval). And the color of the texture there, or at least the first component of it, is the y axis of the waveform.", "huttarl, 2013-02-28Thanks... this short, simple, commented sound processing sample is a great starting point for the rest of us to build our own.", "ollj, 2022-08-21this one looks beter than average in 3d, due to close camera flybys.", "capitancrunch, 2020-02-26wow", "cmarangu, 2019-11-05i mean how few", "cmarangu, 2019-11-05look at how many lines of code", "dila, 2018-03-25saw a fork of this. the original is great!", "chrisjj, 2018-03-23huttarl, yes, I too found that odd. Here's a version with it moved from time to mouse: https://www.shadertoy.com/view/4sKyW1", "andrewww1, 2017-01-11fractals are creepy", "ollj, 2016-04-17dint eat the yellow fractal.", "jt, 2016-02-16Very cool! :-)", "huttarl, 2014-11-26Very nice. What does it mean when the structure is changing at certain points, i.e. a chain is lengthening and more spheres are popping into existence?", "demofox, 2013-10-13man, this is pretty!", "weyland, 2013-05-04love the plastic look and colours", "PauloFalcao, 2013-05-02Very, very cool and fast!", "CPU, 2013-05-02WOW!! This is gorgeous and so fast!!", "ollj, 2016-08-25rotate p by pi/3 and compare the rotated result with the nonrotated result.", "if .w=distanceToCenter is correct, the difference should be 0.0 !", "if its not 0.0, it gives a hint on how to make it =0.0 .", "ollj, 2016-08-25hexagon(p).w is wrong for top and bottom corners of every hex.", "a correct approach should be a min(min(a,b),c)), where a,b,c,d are distances to 3 nearest hexagons, (self, topright, right,) mirrored along the y-axis and y-axis, utilizing symetry.", "distances to 3 nearest hexagons comes down to trigonometry or usage of the values that are calculated by then", "", "intead of your .w you hould overlay a simpler polka-dot sdf.", "jt, 2015-12-07cool!", "bytewave, 2014-06-23This is sooo cool ! That would fit a game menu so well.", "nimitz, 2014-03-13How hard would it be to convert this to distance to triangle borders?", "iq, 2014-03-09The cell id is simply its coordinate, as in here:", "leavittx, 2014-03-09Looks great! Btw how do the 2d cell id's differ from cell to cell? What is the range they are in? Assigning them to the colors doesn't say much to me...", "LokaHer, 2022-08-31so far away", "oneshade, 2022-08-09@rhinoid I'm not sure if I'm seeing what you mean but I think it just looks like a bit of aliasing.", "rhinoid, 2022-08-09If you let it run for at least 70 seconds, you start seeing hairlines with glitches at some places. Like polygons not matching on a subpixel level. Is that floating point inaccuracies or something more fundamental?", "curiouspers, 2022-04-20here's the missing link https://iquilezles.org/articles/warp/", "oneshade, 2020-12-18Pretty! Btw, It looks like there may be links in the description that are missing.", "var, 2020-05-24simple and elegant", "Nema, 2013-10-29VERY Nice!", "B0r3d, 2022-09-25This is mesmerizing, the wealth of information you have provided for study is vast, thanks for making this available.", "jt, 2022-09-24Brilliant!", "basq, 2020-01-09I hope some day my brain will be big enough to make something this good", "ollj, 2019-07-08how about some texturing other than linear gradient, now that we have complete wallpaper-group shaders, with skew matrices.", "", "https://www.shadertoy.com/view/ttX3Dj  (not too elegant, but most complete demo (hex ones are dumb code)", "https://www.shadertoy.com/view/wlfGWl (most elegant, complete, but lacks the UI of ttX3dj, smarter skew-code rework)", "https://www.shadertoy.com/view/ttX3Dj (fiest shader with complete wallpapaer-group, hex-ones are dumb code code)", "https://www.shadertoy.com/view/WtXGWj", "Brandondorf9999, 2019-07-01/* Screen Mode */", "", "// 0: Horizontal", "// 1: Vertical", "// 2: Conditional Direction", "#define ASPECT_MODE 2", "#define ASPECT_RATIO_CONDITION 1.77777777777777778", "#define ZOOM_FACTOR 1.0", "", "float zoomfactor = ZOOM_FACTOR;", "", "#ifdef ASPECT_MODE", "#if ASPECT_MODE == 1", "zoomfactor = zoomfactor * (iResolution.x/iResolution.y) / ASPECT_RATIO_CONDITION;", "#endif", "#if ASPECT_MODE == 2", "if ((iResolution.x/iResolution.y) < ASPECT_RATIO_CONDITION)", "{", "zoomfactor = zoomfactor * (iResolution.x/iResolution.y) / ASPECT_RATIO_CONDITION;", "}", "#endif", "#endif", "", "vec2 p = (-iResolution.xy + 2.0*fragCoord.xy)/iResolution.y / zoomfactor;", "illinad, 2019-06-30Great!", "If you use", "if (!(iMouse.z >= 0.))", "pR(p.xz, time * PI/16.);", "in map function, it become more comfortable to use.", "FMS_Cat, 2019-06-30oooooo it's hella cute", "aiekick, 2018-09-12oups sorry theimprot error come from my soft, not a problemw with your shader", "aiekick, 2018-09-11can you put it in public with api pls ?", "MacSlow, 2018-05-19Marvelous... those changes between the patterns and extrusion-depth sweet!", "ollj, 2017-04-10maybe read up on different tessellation methods and discover some nice surface subdivisions that can be used per fragment.", "PauloFalcao, 2017-02-08Beautiful!", "knarkowicz, 2017-02-03Nice!", "flockaroo, 2017-02-02very pretty!", "knighty, 2017-01-29", "tdhooper, 2017-01-28Thank you everyone", "", "nimtz: There might be, I might have a better chance of figuring it out now I know how this works. However the only approaches I can think of use more iterations as the subdivision count grows, or are a variation on this that use the tiling to find the folding plane.", "Duke, 2017-01-28", "iapafoto, 2017-01-28wonderful !", "GregRostami, 2017-01-28WOW!!!!", "nimitz, 2017-01-28Quite a few useful functions in there! I wonder if there's a way to get those subdivision with knighty's domain folding technique instead of just using it as a basis for transformations.", "iq, 2017-01-27Very nice!!!", "majman, 2017-01-27so nice!", "aiekick, 2017-01-27", "blurryroots, 2022-11-22Insane. I can almost feel the cold breeze, even though my laptop seems to melt when playing fullscreen xD", "lumic, 2021-06-05I am lost for words. Wow!", "dr2, 2018-10-21Can't compare the before-and-after versions, but the (salt-like) graininess following each abrupt view change gradually disappears, leaving lovely clouds.  The convergence rate may depend on display resolution; who knows?", "visuality, 2018-09-16Beautiful clouds and sky, your first time but still AMAZING!", "reinder, 2018-09-05@dr2: I have changed the look-up in the detail map to linear interpolation. This should fix the noise artefacts on high-resolution displays.", "zproxy, 2018-08-18360 at", "jt, 2018-06-15wow :-)", "reinder, 2018-06-03Thanks for all the nice comments!", "", "@dr2: I'm on holidays with my laptop, so I can't see how the detail of the clouds look on 4K. The problem is (probably) that I use texelFetch without any form of interpolation for the 3D lookup (line 107 in buffer C - to keep the shader a bit fast). If I could precompute 3D buffers I would use a linear lookup (and mipmaps).", "", "I've added mouse-control to look around. Enjoy", "Draedrus, 2018-06-01I really love your clouds ! Like REALLY", "dr2, 2018-06-01Inspiring image.", "", "But on my 4K display the clouds seem to have a bit too much high frequency (anisotropic) noise - this observation may be subjective and/or display-dependent.", "", "And I support the idea of mouse-controlled view (just a few lines...)", "reinder, 2018-05-31Thanks! @P_Malin, I have added your suggestion.", "P_Malin, 2018-05-31Another great shader reinder!", "", "@flockaroo, @reinder - I see the black pixels too (when fullscreen). It looks like it could be some NaNs propagating when reprojected. For me it is fixed if I add this at line 147 in Buf C:", "", "ocol = max( vec4(0), ocol );", "Pr0fed, 2018-05-31Stunning! Great work!", "Duke, 2018-05-30Very nice!", "PlNG, 2018-05-30Congrats on Shader of the Week!", "GregRostami, 2018-05-30The little guy makes this epic shader MORE EPIC!!", "starea, 2018-05-30Masterpiece!", "tigertang, 2018-05-30Marvelous!", "kuvkar, 2018-05-30looks amazing", "flockaroo, 2018-05-30this is super cool!", "i seem to have strange black artifacts bleeding out from a horizontal line (y position about 1/3 screen height), though...", "TekF, 2018-05-30Haha! Wow. So pleased to see my humanoid used in such an amazing scene!", "iapafoto, 2018-05-30Fantastic very realistic !", "tehsauce, 2018-05-30Amazing job!", "rcrookie, 2018-05-30So beautiful Himalayas!!!", "EvilRyu, 2018-05-30what PING says!  love it", "iY0Yi, 2018-05-30I like the small man!", "Shane, 2018-05-30 Beautiful scene. It runs well too.", "mmerchante, 2018-05-29Amazing clouds!", "akhgary, 2018-05-29majestic", "valentingalea, 2018-05-29you sir are a gentleman and a scholar!", "BigWIngs, 2018-05-29Superb!", "FabriceNeyret2, 2018-05-29very cool, but we want to control the camera ! :-)", "( and autoplay when not )", "XT95, 2018-05-29Awesome !", "PlNG, 2018-05-29Holy crap there's a little dude!", "poljere, 2018-05-29Awesome!", "blackjero, 2018-05-29It looks gorgeous, I love the little alpinist, so few pixels but so much impact.", "Dave_Hoskins, 2018-05-29It could be a photo, amazing work.", "duvengar, 2018-05-29Wow Wow Wow", "nicoptere, 2018-05-29brilliant ! +1 for \"a small humanoid is added\" ^^", "Klems, 2018-05-29Looks really cool! The hiker is a nice touch. Why the black bands though?", "mrNull, 2023-03-16Can any one help me, please? I am trying to apply this gorgeous shader as a skybox. I do love this shader, but not able to solve the \"6 side\" cube map.", "If anyone can help me in this journey, please, see my stackoverflow post:", "https://stackoverflow.com/questions/75739076/stretch-shader-on-cube-as-cubemap-three-js", "Thank you!", "richddt, 2023-01-25brilliant, aurora is a top notch touch", "jt, 2022-09-24Beautiful!", "Rrrrichard, 2022-05-29The scenery after dragging the sun down the lake is so beautiful!!!", "maxbittker, 2019-08-27I made an account just to say that you did an incredible job on this & are a true painter", "+ will have fun exploring each of the parent shaders!", "MacSlow, 2019-03-23Marvelous and soothing to look at!", "Shane, 2019-03-21I like the coloring. Really pleasant to look at.", "stilltravelling, 2019-03-21thanks iq, that means very very much!", "iq, 2019-03-21nice", "flockaroo, 2019-03-20wow, i like it! moving the sun like that gives me a god-complex ;-D", "stilltravelling, 2019-03-20Thanks, I need to give my brain a bit of rest now :-)", "FabriceNeyret2, 2019-03-20yep, now fixed. totally change the cloud cover, also :-)", "", "people: have a look an the night sky too ;-) (mouse at bottom)", "stilltravelling, 2019-03-20Load it again. I accidently had vflip enabled on the texture. I've now turned this off", "FabriceNeyret2, 2019-03-20nice, but I see a lot on horizontal stripes in the sky and sea.", "", "interpolation issue, or compatibility issue ?", "spawner64, 2021-02-15This is beautiful. What's interesting is that while the exact version is sharper, the approximated version actually produces better sub-pixel results. Use vec2 p = 20.0*q/dot(q,q) or even a bigger value to get wider sub-pixel area and see the differences.", "", "Exact: https://imgur.com/a/Yw1ljNm", "Approx: https://imgur.com/a/c0Vm39x", "celifrog, 2020-09-23@chaa1030  GLSL", "chaa1030, 2020-08-12What language is this written in?", "CoolerZ, 2020-08-02@iq \"Are you running on an Intel integrated card by any chance?\"", "No my laptop has a GTX 1060 and is running Windows 10 with the latest game ready drivers version 451.67", "The artifacts show up on both the latest Chrome and Firefox versions.", "CoolerZ, 2020-08-02The artifacts get more extreme with a very high input value. For example:", "// animation", "p.xy += 0.05*iTime+1000.0;", "Again this doesn't seem to occur with the normal cosine for some weird reason.", "CoolerZ, 2020-08-02@iq The reason you didn't see the flashing artifacts is because of low iTime value.", "I had the shader running for a few minutes as I was playing with the code which is why I saw the artifacts.", "", "With this code:", "// deformation", "vec2 p = .01*q/dot(q,q);", "", "// animation", "p.xy += 0.05*iTime+100.0;", "", "You should be able to see the flashing artifacts immediately at iTIme=0.0.", "Here's a recording https://i.imgur.com/rUtZJ6p.png", "", "Interestingly these artifacts don't appear with the normal cosine. I am guessing this has something to do with numerical precision of floats.", "TinyTexel, 2020-08-01sinc^3:", "w = clamp(w*0.1591549, 0.0, 1.0);", "vec3 a = 1.0 - w*w;", "vec3 b = (a*a) * (a*a);", "return cos(x) * mix(b*a, b, w * 0.543984);", "Although,", "w = clamp(w*0.1591549, 0.0, 1.0);", "w = 1.0 - w*w;", "return cos(x) * ((w*w) * (w*w) * w);", "does a decent job already.", "TinyTexel, 2020-08-01Replacing w = fwidth(w); with the more accurate", "w.x = length(vec2(dFdx(x.x), dFdy(x.x)));", "w.y = length(vec2(dFdx(x.y), dFdy(x.y)));", "w.z = length(vec2(dFdx(x.z), dFdy(x.z)));", "makes the result a bit sharper and produces a bit more aliasing. I would have expected that scaling w by a factor of 2 would basically eliminate all aliasing since we filter out all pixel-sized features, but that doesn't appear to work all that well (using the brick-wall filter). If anything it highlights that there is still some residual aliasing. Sinc^2 on the other hand does a pretty decent job.", "TinyTexel, 2020-08-01Impressive results! For a softer filter roll off one can use sinc^2 instead of sinc.", "A cheap approx of sinc^2 on the interval [-1,1] is (1-x^2)^3:", "", "w = clamp(w*0.1591549, 0.0, 1.0);", "w = 1.0 - w*w;", "return cos(x) * (w*w*w);", "iq, 2020-07-31I cannot see any artifacts with your adjusted deformation. The limited cosine still produces alias-free results while the other one doesn't. Maybe it's a big in your browser or GPU driver. Are you running on an Intel integrated card by any chance?", "CoolerZ, 2020-07-28Note that with deformation vec2 p = .01*q/dot(q,q);", "the band limited cosine function gives noticeable flickering artifacts near the edges (view in full screen to see).", "", "Those artifacts are not present in the normal cosine.", "CoolerZ, 2020-07-28For deformation try vec2 p = .01*q/dot(q,q);", "It gives a really trippy result.", "BigWIngs, 2020-07-28That's done clever stuff my friend. Useful!", "GregRostami, 2020-07-27Brilliant!!", "reinder, 2020-07-27Thanks!", "jorge2017a1, 2020-07-27interesting the color function !!!!", "..........", "interesante la funcion de color!!!!", "iq, 2020-07-27I see. I added some explanations to it, I hope that helps.", "Shane, 2020-07-27It took me a while to figure out how the fcos function worked. Really clever.", "MisterSirCode, 2022-05-29beautiful example of FBM, but I feel like the DOF and Volumetrics somewhat drown out the high frequency details", "Taron, 2022-05-25I literally only get a still image. It claims ~7.7 fps, but nothing happens. Looks beautiful, though. (AMD Radeon RX Vega 10).", "iq, 2019-10-30Thanks!", "XT95, 2019-10-29It's fix, thanks!", "FabriceNeyret2, 2019-10-28it works in OpenGL.", "iq, 2019-10-28Ah, the problem is the blur kernel in Image, line 22. The code is reading more kernel weights (0 to 3) that there are entries in the LUT of weights (0 to 2). It's easy to fix, hopefully he comes soon to Shadertoy and finds the notifications... The fix is: const float gauss[4] = float[4](1.0, 0.38774, 0.24477, 0.06136);", "iq, 2019-10-28Yes, this shader used to work by it's broken now, XT95 must have changed something in the code.", "ttoinou, 2019-10-28I get", "", "error X3504 : literal loop terminated early due to out of bounds array access", "warning X3557 : loop only executes for 0 iteration(s), forcing loop to unroll", "", "https://webglreport.com/?v=2 says ANGLE WebGL 2.0 (OpenGL ES 3.0 Chromium)", "", "", "on Chrome / Windows 10 / nVidia", "MacSlow, 2018-05-01Very nice! For some extra impact change lines 187-190 in Buffer A to:", "", "vec3 ro = vec3(-1., 6., 180. + iTime);", "vec3 rd = normalize( vec3(v, 1.45) );", "rd.yz = rotate(.15) * rd.yz;", "rd.xz = rotate(.1 + .5*cos (.5*iTime)) * rd.xz;", "", "The near-plane clipping adds to the surreal feel of the scene imo.", "iq, 2018-04-16Very nice!!!", "", "I get 50 fps in the 800x450 canvas (1920x1080 resolution, white little square on page top right)", "EvilRyu, 2018-04-09Beautiful!", "XT95, 2018-04-07Thx all!", "@FabriceNeyret : yes I was sampling the shadow in the clouds loop even if I was not into the clouds. I made some others little improvement, should be faster (but still slow)", "shau, 2018-04-07Looks fantaastic.", "Shane, 2018-04-07 Such a beautiful rendering. It has a photorealistic feel. I'm getting about 30 fps on the 800 by 450 canvas.", "834144373, 2018-04-07Looks pretty good,It's max 35fps on GTX1060,", "FabriceNeyret2, 2018-04-06nice, but 3-5 fps at small size here.", "Are you sure all perlin noise loops are not going far below pixel size ?", "Are you sure what is not necessary in material called in shadow is not computed ?", "Do you compute shadows after the direct ray-loop, and not inside (even in a if) ?", "XT95, 2018-04-06Ok it's a bit faster now and I added some motion!", "FabriceNeyret2, 2018-04-06nice, but I want either to control the camera or to see it moving :-)", "flockaroo, 2018-04-06phu looks beatiful! but really really slow - im getting 6 fps on the small window.", "...and some motion might be nice.", "Baizhan, 2022-10-17\u0437\u0430\u0435\u0431\u0438\u0441\u044c \u043d\u043e\u0443\u0442 \u043f\u043e\u043b\u0435\u0442\u0435\u043b", "lonedreamer, 2021-06-07Say, would you allow use of this for personal projects? Yo do not seem to have pasted a license...", "see here: https://www.shadertoy.com/terms. MIT one would be awesome :-D", "Dikobraz, 2020-10-28Hi, I have a YouTube channel, I talk about space there, can I use this as part of a video?", "milesWaugh, 2020-10-21Beautiful.", "chetgnegy, 2020-08-02For those of you who, like me, just came here for a nice bloom algorithm, you'll find the bicubic interpolation code offered by this SO post (https://stackoverflow.com/a/42179924/899347 masterxilo's answer) to be better for the general case than the one used in the Image buffer on this shader. It's pretty hard to see the difference on Gargantua, but if you head over to https://www.shadertoy.com/view/XtKfRV (which took the same bloom algorithm) there are block-like artifacts that can be very apparent. Happy blooming and thanks to sonicether for such an awesome shader.", "Zi7ar21, 2019-07-31Huh, sonic ether decides to join and make 1 project and leave forever... Mysterious!", "ned, 2019-05-15Unbelievable....", "bloodnok, 2019-04-10Looks very close to the film version.", "", "Kicks the arse of my shader", "yuletian, 2018-06-29amazing!", "dnlsptzk, 2017-08-13awesome!! How can I contact you @sonicether", "neoragex2002, 2017-02-28awesome!", "hsiangyun, 2016-06-07nice!", "Duke, 2016-04-18Stunning! I also have an experimental black hole with accretion disk, but it is not finished yet.", "pixartist, 2016-04-18very nice", "candycat, 2016-04-12Love it!", "aiekick, 2016-04-11at home it work very well. awesome result. the quadro is the gpu from work, i say you tomorrow is this is ok", "sonicether, 2016-04-11Thanks for letting me know, aiekick. I think I've fixed the problem now", "aiekick, 2016-04-11not compiling on my gpu quadro k3100M  scfreeshot. this is the buf B", "jorge2017a1, 2020-07-03I do not deny it, ... the columns are great ... very beautiful columns !!!", "............", "no lo niego, ... las columnas son geniales ... muy bellas columnas !!!", "zproxy, 2018-10-09[This comment has been hidden by the shader author]", "MacSlow, 2018-05-19Yeah, where is the nasty tentacle-thing?", "huttarl, 2017-02-03I miss the monster!", "cyanux, 2014-06-14Wall noise... 8O", "Dave_Hoskins, 2014-01-13Hi iq, may I suggest this to remove the stepped shadows?", "Replace line 167 with:", "|167| t += 0.005+h;", "iq, 2013-09-29Yes. Fixed!", "reinder, 2013-09-20Just a minor optimisation: you could change lines 31-41 into:", "", "float di1=distToBox( p, vec3(0.10*0.85,1.00,0.10*0.85) );", "float di2=distToBox( p, vec3(0.12,0.40,0.12) );", "float di3=distToBox( vec3(x,y4,z), vec3(0.14,0.02,0.14) );", "x = max( abs(p.x), abs(p.z) );", "z = min( abs(p.x), abs(p.z) );", "float di4=distToBox( vec3(x, y, z), vec3(0.14,0.35,0.05) );", "float di5=distToBox( vec3(x, (y2+z)*0.7071, (z-y2)*0.7071), vec3(0.12,  0.10*0.7071, 0.10*0.7071) );", "float di6=distToBox( vec3(x, (y3+z)*0.7071, (z-y3)*0.7071), vec3(0.14,  0.10*0.7071, 0.10*0.7071) );", "", "float dm = min(min(min(di5,di6),min(di3,di4)),di2);", "fb39ca4, 2013-07-09Why are the soft shadows appearing jagged for me?", "jpryne, 2013-07-07Fantastico!", "HrBoes, 2013-03-12Wow this is amazing!", "BoyC, 2013-03-11Wow, looking great!", "iq, 2013-03-11fixed, thanks!", "gleurop, 2013-03-10If you get issues with black patches on objects, go to line 287 and replace sqrt(1.0-ao) with sqrt(abs(1.0-ao)).", "PauloFalcao, 2013-03-10Instant love!<br><br>", "View Slisesix in 2008 was the reason I started doing raymarching.", "After reading \".the.real.deal.\" from rgba_slisesix.txt in Slisesix.zip I realized how raymarching distance fields could be done, countless hours of pure 3d / math / raymarching fun followed", "<br><br>", "from rgba_slisesix.txt  (http://www.pouet.net/prod.php?which=51074)<br><br>", "**** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****<br>", ".the.real.deal.<br><br>", "", "this is some cpu raymarching on a big 3d scalar field. no rasterization", "nor primitive intersections are used. there is a big math function that", "tells the distance to the closest surface at any 3d point in space. you", "can then evaluate the function to guess how much you can safely advance", "before eventually hitting any surface and so take the step. i call this", "\"rendering with distance field\", i wonder what is the official techical", "name for it.<br><br>", "", "the interesting part is that since you can evaluate the distance to the", "surface at any point you actually have some non local information about", "the geometry, without casting any secondary rays. or in other words you", "can do non local lighting effects like softshadows or ambient occlusion", "without the cost of resorting to additional rays. and that's sweet.<br><br>", "", "for the rest, shaders are pretty basic. the marble is particularly dull", "for example. lighting could be improved but the image renders so slowly", "even if it's all multithreaded that adjusting parameters takes ages, so", "this is what i could manage to get in a reasonable amount of time (note", "\"reasonable\" might not mean the same for all of us...)<br><br>", "", "the image is rendered with (up to 2x2) supersampling (it's adaptive) in", "roughtly fourty seconds on a desktop dualcore machine. i have tried too", "to port the complete thing to both glsl and hlsl and then the rendering", "reaches around two frames per second in my geforce 8600. the problem is", "the driver needs twenty seconds to compile the shader. precompiling the", "shader is neither a good idea cause the binary shader expands into nine", "thousand instructions (and i have to time for trying stream reordering)", "what obviously makes the exe larger than 4k. <br><br>", "", "**** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** **** ****", "picunrelated, 2018-11-27@mitjaprelovsek I think if you replace the 50.0 * ... with iTime * ... in the hash function, it will animate sort of like you want.", "mitjaprelovsek, 2018-06-11@indominator, I've added 'uv.xy+=iTime;' after uv *= 8.0; (line 71) which does animate it in that the texture starts moving towards the bottom left corner. But is there any way to animate the noise itself so that the noise pattern animates without this apparent directional movement?", "", "Similar to this for example: https://www.shadertoy.com/view/4dBcWy", "PZerua, 2018-05-27Thanks for this awesome shader. There is something I am trying to understand, why are you multiplying the uvs by the matrix in line 72 instead of multiplying it by 2 to increase the frequency?", "", "I implemented this shader in a webgl environment, and multiplying it by 2 (as most internet sources do for applying octaves) give me some little artifacts.", "", "Thanks!", "indominator, 2018-03-20to animate just add iTime to uv.xy before all the f calculation", "lacasrac, 2018-03-14how to animate?", "metalim, 2017-04-05Discontinuities are because of faulty floating point math when doing +vec2(1.0,1.0).", "If you add p = floor(p); as first line into hash, there are no sharp edges.", "Before: https://puu.sh/va1Zd/c0f6b4cc57.png", "After: https://puu.sh/va20x/5fd7a70eb8.png", "huttarl, 2017-01-07This is a nice clear implementation demo. Question: Is value noise supposed to have those discontinuities that we see as little white upper-right-corners on the non-fractal side? If so, why, since we're interpolating between the same values at each grid point?", "CPU, 2013-05-16", "oneshade, 2021-03-02Lovely!", "ollj, 2017-11-09i am in favor of video games using CSG raymarching.but it limits the games fps/resolution a lot.", "For now this is mostly used for occlusion (better shadows), like in the latest Unrea-lEngine.because you can easily scale that, make it coarse, without looking very different.", "", "Or it is used for deferred shading to compose mesh agents with a fractal sets (there is a unity 5 plugin for that, its all japanese because it is based in the MMD scene). his constrains complexity by using it only a little bit, very contained and occluded by simpler older methods.", "", "In the end (besides these above 2) i see this method work in 2 more contexts:", "", "- Backgrounds similar to the backgrounds of the game Mother2, especially its battle-encounter background animations. This likely ends up as a game that can do good visuals (with surreal isometric tiles), but still focuses its memory and processing power on good music instead. As a result it ages better with time than the Nth reboot of CoD or Fifa.", "", "- Using a comic book style as framing, and only animate one window of a comic book at a time, most of the time. this shifts focus and lowers resolution, and you can easily zoom out while fps get too low, without breaking the framing device.", "See the intro to the most recent ducktales-series-reboot for a style reference, but imagine it as interactive media. Disregard any 4th wall of the framing context (even more than this on interactive media where an agent jumps out of the comic book frame) , because its interactive anyways.", "CaliCoastReplay, 2016-07-28You need to license this for a videogame of some kind.  Just that background alone would move copies!", "ollj, 2016-04-17^thanks for making https://youtu.be/_ZbJaCNv7zM?t=115 look a bit worse.", "cubby208, 2015-08-01It is so dang lovely and beautiful.  If i may ask what general shading technique did you use to make everything look so soft warm and inviting?", "simsimphony, 2015-02-03Lovely.", "Xytor, 2014-10-02Enchanting!", "cyanux, 2014-06-14Where is the wolf? Where is little red ridinghood?", "iq, 2013-10-07You have a full list of objects you can easily raymarch here: http://iquilezles.org/www/articles/distfunctions/distfunctions.htm", "", "The shader Xds3zN here in Shadertoy implements most of these primitives.", "", "Lastly, raymarching is a way to find intersection with objects, like raytracing. You can do the same lighting effects. In fact, many raymarching shaders here in Shadertoy implement shadows (XsX3DB), ambient occlusion (lsX3DH), reflections (MdlGzn), refraction (lsXGzH), subsurface scattering (4dsGRl), motion blur (4slGzl), or global illumination (ldsGWB)", "demofox, 2013-10-05IQ I have been reading your articles have been learning a ton.  Thanks a bunch for sharing your knowledge!  I have two questions for you... 1) I've read your article about raymarching terrain but am looking for some more info on raymarching other objects (like a box for instance).  Do you have or plan on writing an article about that?  2) Can raymarching do refraction and reflection like raytracing can?  It seems like it ought to be able to, but it also seems like nobody does it in practice, why is that?", "Chucky, 2013-10-01Just brilliant.  59.9fps on my 660ti", "frankwer, 2013-09-30Very artistic, almost like a painting in 3D.", "Dave_Hoskins, 2013-09-30The floating particles really add the finishing touch for a fantasy scene, very very nice, and the colours are so warm.", "reinder, 2013-09-30(or line 625 can be changed to: col = col*0.7 + 0.3*col*col*(3.0-2.0*col); )", "reinder, 2013-09-30wow, wow! Really beautiful!", "I get some black spots on the mushrooms. Adding \"col = clamp( col, 0., 1. );\" add line 626 solves this problem..", "PauloFalcao, 2013-09-30Wow! Beautiful!", "poljere, 2013-09-30Inigo, this is just amazing", "demofox, 2013-09-29wow really nice", "mi_ku, 2013-09-29Love that one. Great idea and execution. Gives me ~28 fps on GTX 560.", "geekac, 2023-05-08are u human ?", "stduhpf, 2022-01-19How did i miss this one?", "PixelPhil, 2021-10-13Wow! \ud83d\ude32", "lucpena, 2021-09-04This is insane. Thank you very much!", "oneshade, 2021-04-10Impressive!", "rmccampbell7, 2020-07-18This UI is really impressive. Like all of the transitions work seamlessly and even backward! And the interactivity in the ray marching part is really incredible.", "sylvain69780, 2020-06-08Amazing !", "ferhatico, 2020-04-24That's perfect.", "BigWIngs, 2019-09-05Damn dude, that's great!", "scratch13764, 2018-11-04This is so impressive and my laptop sounds like a jet engine.", "Imsure1200q_1UWE130, 2018-10-27its not working for me. the ray isnt casting.", "Ion824, 2018-09-24Absolutely fascinating demo!", "asalga, 2018-08-29One of the wickedest things I've ever seen. Just amazing!", "favreau, 2018-05-28Just cool!! :-) Excellent work. Thanks for that.", "samuelotherion, 2017-12-05This is absolute the most bestest shaderwork at all.", "dila, 2017-08-28very clever shader, the tutorial was also useful", "Yrai, 2017-08-22Really good work...", "andro, 2017-08-11As someone studying Raymarching the last 16 months I have to say I fell in love with this demo ! Absolutely top work and to date the clearest explanation I have ever seen for beginners !", "greentec, 2017-08-10the kindest tutorial I have ever seen!", "duvengar, 2017-08-09Faboulus", "PauloFalcao, 2017-08-04Fantastic! Well done! It's really cool!", "Imsure1200q_1UWE130, 2017-08-02i have been defeated by words oh nooo", "", "bool likesTheShader() {", "return true; //i like it", "}", "aiekick, 2017-08-02i wrote a mod of this shader for distance filed step correction here Mod", "if you want integrate the modif i can delete this mod", "otaviogood, 2017-08-02next level!", "aiekick, 2017-08-01this is that, the first step is obtained with the view plane. but the red circle is not shown, and its logic, but the ray did not have to take it into account also", "aiekick, 2017-08-01what i explain : pics", "aiekick, 2017-08-01so its differnet than what you explian in the text", "aiekick, 2017-08-01you use a max step size i think instead of pure distance step size", "aiekick, 2017-08-01when i move the ray the first ray marching distance not go to the first sphere. it seems to interact with view plane, and sometimes when i move around with nothing", "cacheflowe, 2017-07-31Incredible!", "reinder, 2017-07-31Thanks! Please let me know if you find any mistakes or improvements that I can make.", "iapafoto, 2017-07-31Very nice", "knarkowicz, 2017-07-31Great tutorial!", "etale_cohomology, 2017-07-31My mind has been blown to a whole new level. Words... cannot... describe... the awesomeness!", "Shane, 2017-07-31Awesome. It's hard enough producing tutorials in static HTML format without having to do it under these restrictions. Quite amazing.", "reinder, 2017-07-30@ollj It is WIP", "ollj, 2017-07-30interactive parts in a slideshow in a webgl shader, this is education.", "ollj, 2017-07-30oh no, it does not render a circle for every step along the day. that is such a core part of getting it.", "ollj, 2017-07-30this fails in 3*4 ratio", "ttg, 2017-07-30Very nice!  I think I will refer people to this who are new to these concepts.", "", "There is a bug currently:  The \"Use your mouse to interact with the scene\" ray gets its intersections calculated according to our view of the scene, whereas it should be according to the ray's origin as depicted.", "Nesvi7, 2017-07-30It's great! I love the slide where you interact with the ray direction!", "Dave_Hoskins, 2017-07-30Now that's a lot of text! Wonderful work.", "FabriceNeyret2, 2017-07-30wooow !", "Do you know that you are a psychopath ? :-)", "", "NB: several times the message \"press space\" appear while the anim (e.g. display of code) is not finished.", "vdubois, 2022-12-13This is DOPE!", "sense, 2021-02-23beautiful stuff here.. @shane", "danhel95, 2020-08-26wow u r tunnels master", "Shane, 2018-07-04@chrisjj", "I use a distance related threshold more often than not these days. Although, I usually go for something cheap and subtle with a range. \"if(abs(d)<.001*(t*.125 + 1.) || t>FAR) break;\" -- I use that one a lot when I need to cover a bit of distance, since you can often get away with less precision with more distant objects.", "", "The code here is reasonably sound, but it was based on routines I'd written long before posting the example on Shadertoy -- Back when GPUs were slow, which meant taking shortcuts that you wouldn't take today. I usually try to make a note of it in the comments. Either way, I've been meaning to post a cleaner, more up-to-date version of this, so I'll put it on my list of things to do.", "chrisjj, 2018-07-04@Shane. the epsilon can be adaptive with distance, e.g. https://www.shadertoy.com/view/XsBXWt .", "Shane, 2018-07-04@BigWings", "Ironically, I'd had this discussion behind the scenes years ago, and took the additional step out, but completely forgot to update the early shaders where I'd initially posed the question. Amazing that it's sat there for years unnoticed. I'll comment the line out. In fact, I'll take it all out to avoid confusion. You'll note that in examples I've written since, I don't take that step. One thing that I tend to implement to alleviate popping is checking for the absolute distance, just in case the ray traverses too far into the surface... It doesn't always work, but you'd be amazed at how often it helps.", "", "Another thing to note is the high surface hit threshold of \".005.\" I used to raymarch stuff before this site went up -- when computers were still pretty slow, so a common threshold today -- like \".001\" -- that required more iterations was considered a luxury. It needs to be lowered, but I might leave it there for posterity. In fact, this example needs a revamp. I might put together a more polished trapezoidal noise version.", "BigWIngs, 2018-06-26line 207: All we know is that the position is AT MAXIMUM .005 from the surface. It could be much closer than that. What you are doing by adding dt one more time is overstepping the surface by 0 to .005 in the worst case scenario. Either way, I don't think you are gaining anything by doing the extra step.", "chrisjj, 2018-03-23Thanks for the educational source comments!", "", "Is the fresnel term defunct? If I replace the expression by 0.5, I see no output difference.", "chrisjj, 2018-03-23Cool!", "", "A fault: \"Change to \"path2\" to traverse the other tunnel.\" causes an error. path2 is undefined.", "Imsure1200q_1UWE130, 2017-06-01Wow! this is great! I wonder where the light is coming from tho. maybe a miner?", "Its really good performing on my device its like 60fps and its great", "carlamartinezz91, 2017-05-30Great one1", "Shane, 2017-04-03@marciot", "Apologies for the late response. I no longer own the name I signed up with, so I don't receive site messages... I really should write to admin and get that rectified. Anyway, I responded to your recent example, but feel free to use my code for anything you wish. I'm just happy it's of use to someone.", "marciot, 2017-03-27Shane, your work is fantastic. I am authoring a library (dome.marciot.com) that allows folks to design content for projection on dome theaters. I would like to include this as an example of what can be done with just shader code (I think this would look great on a 360 dome), however it isn't clear what the default license CC-BY-SA-NC allows and I wanted to get your feedback. Thank you.", "CaliCoastReplay, 2016-08-10FAST even at full screen.  I admire your work Shane.  *paws the hem of your robe*", "drone1, 2016-04-21Cool!", "Shane, 2016-03-28@Barteks2x", "I prefer the rounded one myself. I can't remember why I went with the boxed version. Probably, just for something different.", "", "@Cubed", "Essentially, the process involves nothing more than moving a camera along a path \"vec3(path(time), time)\" through a curvy tube with distance function \"R - length(p.xy - path(p.z)).\" The noisy surface deformation is an added extra. In general, you can do this with more sophisticated objects than a simple tube. I have a winding Menger tunnel example that uses the same premise.", "Cubed, 2016-03-25Thanks so much for the commented code! I really wanted to find a good detailed example of ray-marched tunnels and this is it!", "Barteks2x, 2016-03-25I like the effect when you change PI to 33, add next layer to surf function and change the tunnel to round...", "Shane, 2016-03-23Thanks for the extra comments.", "", "\"Shader Of The Week\" - Hooray! The most interesting aspects of this example are derived from Nimitz's work, but I'll take the win.  Actually, it's not a bad starter template for anyone not familiar with raymarching a curvy tunnel. Although, I'd probably ignore the lighting.", "", "@MacSlow", "Poor man's cross hatching was the look I was going for.", "", "@dr2", "I saw your latest train, and that \"Train Ride\" shader of yours is insanely good. I honestly don't know how you make your shaders run so well with all that detail. An atmospheric metro tunnel, sans train, is on my to-do list.", "", "@XT95", "I made this before I had access to that fancy AO code of yours.", "MacSlow, 2016-03-22Very nice... the use of that texture in channel 0 gives it a slight cross-hatching feel!", "dr2, 2016-03-22The next exercise is adding the train", "XT95, 2016-03-22Super cool !", "Eybor, 2016-03-22It reminds me of some Franco-Belgian comics, I can't find the name of the author and that bothers me. Well great job!", "PauloFalcao, 2016-01-14Awesome", "TambakoJaguar, 2015-12-20Awesome! And it renders fast!", "jt, 2015-12-17Cool!", "tsone, 2015-12-16Well done! And it has a lot of comments too ;)", "Shane, 2015-11-16@Dave", "", "I just saw it. Theirs is fancier, but they have the benefit of triangle meshes, precalc... and an art department.", "", "I sometimes miss triangle meshes, but for an example like this, I'd be feeding stuff on the fly into the Marching Cubes algorithm, and I don't really miss that.", "Dave_Hoskins, 2015-11-12I swear I just saw a Lexus advert with something like this in it. The advert was the one that also has the polygon fox in it.", "tomkh, 2015-10-15Really nice and fast! I have to explore this triangle noise further.", "dila, 2015-10-06Very good.", "Shane, 2015-08-30@nimitz", "", "Shadertoy is full of great ideas, but triangle noise is one of my favorites. So many possibilities. I'd almost go as far as to say that anyone who cares about GPU noise generation should learn about your idea.", "", "My favorite usage, so far, is deploying a 2D version to lay down the foundations for landscapes.", "Shane, 2015-08-30I appreciate the comments. This was more of a novelty than anything else. In fact, I'm surprised anyone liked it, as I'm pretty sure it has no usage whatsoever.", "", "On a side note, I've noticed that texture-based bump mapping on Shadertoy looks a little less crisp than my offline examples. Is that due to anisotropic filtering not being used? Not that it matters, I was just curious.", "vgs, 2015-08-27Beautiful!", "Dave_Hoskins, 2015-08-27Cool. Nice silvery rock reflections.", "coyote, 2015-08-27Excellent!", "nimitz, 2015-08-27looks great!", "revers, 2015-08-26Great colors!", "aiekick, 2015-08-26run fast also in fullscreen", "iq, 2015-08-26Super nice!", "aiekick, 2015-08-26wow", "poljere, 2015-08-26Beautiful!", "public_int_i, 2015-08-26Great job , looks like a piece of art", "__blob, 2023-03-01@AGP vertex shader is behind the scenes, it's a single quad that covers the entire canvas. The code is entirely fragment shader", "reinder, 2016-08-03@djmips done!", "djmips, 2016-04-25cubby208 you could add after line 226 and before 228:", "", "ta.xz *= rot( mod(iGlobalTime * 0.05, 6.2831852) );", "", "Change the 0.05 constant for different rotation speeds.", "cubby208, 2016-04-25Would it possible to have the camera slowly auto-rotate? I would love to just leave this on my computer and that would make it a bit cooler.  It is already very awesome!", "djmips, 2016-02-02ewerybody there is kind of a half res mode. I have found that in Chrome the zoom level of the browser determines the full screen resolution. More zoomed equals lower res and vice versa.", "BigWIngs, 2015-12-22wow dude, your shaders are awesome!", "jt, 2015-11-16beautiful!", "dila, 2015-10-13yes, very beautiful indeed. picture perfect", "gaohaixiang, 2015-07-20Nice", "rocifier, 2014-01-08Wow this deserves to be in the top 10!", "AGP, 2013-12-11Please forgive the ridiculously newbie question: what's the vertex shader and what's the fragment shader?", "Zavie, 2013-12-10This looks insanely good. Maybe work the fog color just a bit?", "fb39ca4, 2013-12-10Is a day/night cycle too much to ask for?", "reinder, 2013-12-05Thanks!", "iq, 2013-12-03Fantastic, super beautiful!", "ewerybody, 2013-12-02Whow very nice! Lighting is so well done! :O", "Unfortunately its too slow to enjoy fullscreen. I wish there was a half res mode. That'd probably be enough.", "Dave_Hoskins, 2013-12-02Great lighting, and it makes me want to fly over it all.", "myth0genesis, 2022-09-20Really, really pleasant! Brilliant idea using red and green channels along with some color \"fountains\" to carry velocity between frames and keep the sim going!", "jt, 2022-01-11Amazing!", "yunhai, 2021-06-17cool!", "luojincong, 2020-07-20creazy!!!!!!", "chrisjj, 2019-01-03Thanks. Though wary of undefined behaviour  I will do in future.", "FabriceNeyret2, 2019-01-03NB use tags [ i m g] [ / i m g ] to embed images ;-)", "chrisjj, 2019-01-03And Buffer l;ine 15    #define RotNum 3    is a surprising jiggly https://i.imgur.com/WenoWrI.png", "chrisjj, 2019-01-03Cool! Buffer line 53 changed to     for(int l=0;l<2;l++)    gives this fun alternative https://i.imgur.com/yb428zt.png", "ufffd, 2018-07-04wow, this is so ridiculously pleasant! absolutely amazing", "flockaroo, 2018-05-30thx :-)", "lucastakejame, 2018-05-27I LOVED iT!", "Koji, 2018-05-26this is incredible!!!", "d1kkop, 2018-05-23impressive", "Pr0fed, 2018-05-23Very nice! So smooth", "smkgames, 2017-11-21Wow!!! Amazing!!!", "KilledByAPixel, 2017-07-04That is awesome, looks almost alive.", "duvengar, 2017-06-26crazy cool", "voz, 2016-12-30Makes me want to mix sugar, milk, and food coloring!", "", "<3", "Ultraviolet, 2016-07-27You can move the light interactively by replacing line #36 with:", "vec3 light = normalize(vec3(iMouse.xy / iResolution.y,1) - vec3(fragCoord.xy / iResolution.y,0));", "TambakoJaguar, 2016-06-18Very nice!", "Maybe add some mouse interaction?", "flockaroo, 2016-06-16thanks toa all!", "@knighty: 5 iterations means that a rotation scale up to 2^5 pixels is used. i break at 0.7*Res.y. breaking earlier works fine but kills bigger vortices.", "not much official doc to offer, cause i made it up myself. dont know if anybody else made sth similar. check \"https://www.shadertoy.com/view/MdKXRy\", its more self explanatory...", "@dave: hmm, actually for me it starts with the image!? if you want to init in fullscreen press <i>-Key.", "Shane, 2016-06-16Really nice example. I could watch this for ages.", "knighty, 2016-06-15Awesome!", "It also work very well with only 5 iterations. Any documentation about the method?", "bpt, 2016-06-15very nice!", "GregRostami, 2016-06-15I can't stop watching it!! Amazing!", "vortex, 2016-06-15This is by far my favorite! Wow, really wow.", "Duke, 2016-06-15", "aiekick, 2016-06-15awesome work", "iq, 2016-06-15Wow!!!! So good!", "Dave_Hoskins, 2016-06-15Nice.", "Note that when first entering the shader's page it starts off black for me, I guess the textures haven't loaded yet.", "FabriceNeyret2, 2016-06-15wow ! lovely !", "Netgfx, 2023-02-03I wonder how to remove the black bubble?", "JasonLee, 2020-03-20cool, beautiful", "slarti, 2014-08-23Looks beautiful.. Was just wondering where you get the numbers to use for the bubble seeds? I see values like these use in a lot of shaders in shader toy... and modifying them seems to make quite a bit of difference. I'm new here so finding it a little puzzling", "BGC, 2014-06-10So simple, yet such a peaceful expression!", "scherzo, 2014-04-11Agreed!", "skurmedel, 2013-08-07Really nice, think removing line 25 improves to look tenfolds", "Lokno, 2013-05-11Cool effect. Looks nice without line 25, too (the black borders).", "avokado, 2023-04-07I have made a fork that handles scaling without being specific to the SDF logic: https://www.shadertoy.com/view/mdVXzw", "alexvitkov, 2023-03-26awesome shader, learned a lot from reading through your code and the original article", "incription, 2023-03-08the branching version is faster for me", "Robin88, 2023-01-18Unless I am mistaken I believe this solution has a small issue with returning incorrect voxel sides. If the deltaDist contains axes that are multiplicative of each other (for example deltaDist.x = 1.1023 and deltaDist.y = 2.2046), then lessThanEqual may return a bool3 with two true axes. If this happens and we then find a voxel, it will pick the last color at the end, sometimes resulting in popping pixels. It is not as noticeable or frequent here but if you change the camera angle you can see it happen a bit.", "mla, 2023-01-16I thought I'd be clever and define a function to return the index of the smallest value in a vector:", "int imin(vec3 a) {", "if (a.x < a.y) return a.x < a.z ? 0 : 2;", "else return a.y < a.z ? 1 : 2;", "}", "", "which, as @ttg says, should compile to a nice fast set of conditional moves. Then the loop for the traditional method is just:", "int side = -1;", "for (int i = 0; i < MAX_RAY_STEPS; i++) {", "if (getVoxel(mapPos)) break;", "side = imin(sideDist);", "sideDist[side] += deltaDist[side];", "mapPos[side] += rayStep[side];", "}", "", "which works fine, but is rather slow (on Intel and Nvidia). The problem seems to be the indexed vector component access rather than the imin() function.", "TheNosiriN, 2022-06-15how do I change the voxel size though?", "ttg, 2021-12-07In 2013 there may have been more severe issues with conditionals handling by shader compilers than now.  That said, likely any performance difference here (I can measure none) is thanks to the simplification of the expressions (good job!) but not involving branching.", "- AMD has register selection instruction, Nvidia has conditional move instruction, both are SIMD and branchless.  The code computes both sides of the conditional and then selects the correct one.  Using arithmetic to select values just wastes FMA ops.", "- Branching allows a thread to skip code (advance the program counter) only when all fragments in the thread agree on having no use for that condition.  There's nothing much more costly about this than unconditionally never skipping the code who's results might not be used, it's just an extra \"jump if all values in vector are zero\" instruction.", "", "Why I point this out is that here, in this shader, with or without USE_BRANCHLESS_DDA, there is no major divergence forcing any fragments in a thread to be useless for extended periods of time.  getVoxel remains always fully parallel between fragments.", "", "As someone pointed out, breaking the loop after a solid voxel is found is a useful optimization.  It is in fact deliberately using branching to finish earlier: nearby fragments often complete their loops after similar numbers of iterations, when the scene surface encountered spans across these fragments.  Fragments which are physically nearby in the image (grouped by small rectangles) are placed together into each GPU thread for specifically this reason.", "jt, 2021-09-25Solved the subvoxel distance problem:", "float d = length(vec3(mask) * (sideDist - deltaDist)) / length(rayDir);", "Thanks to the original paper https://lodev.org/cgtutor/raycasting.html (see calculation of \"perpWallDist\" there).", "ollj, 2021-09-25lessThanEqual() in itself is actually a branching tree, BUT it can be expressed as something like solving a 3x3 matrix.", "opengl seems to always be faster run-time when doing if() branching, than when doing an equivalent step(min()).", "branchless code variants tends to have shorter code, that may actually result in faster compile times.", "", "This one liner may run and compile a tiny bit slower, because it calculates 3* min(a,b) with 2 swivels before branching.", "ollj, 2021-09-25https://en.wikipedia.org/wiki/Line%E2%80%93plane_intersection", "", "http://wiki.secondlife.com/wiki/Geometric#Plane_and_Ray.2C_Vector", "inludes", "http://wiki.secondlife.com/wiki/Geometric#Plane_and_Ray.2C_Vector", "where (vector*vector) == dot(vec3(),vec3())", "jt, 2021-09-25A failed attempt to reconstruct the subvoxel (i.e. exact intersection) position:", "float d = length(sideDist*vec3(mask)/length(rayDir));", "Still missing something...", "jt, 2021-09-22For an attempt to 3d-texture the voxels see fork https://www.shadertoy.com/view/7dK3D3.", "jt, 2021-09-22Any ideas on how to retrieve the exact intersection-coordinates of the ray with the voxel (e.g. so it can be textured)?", "I thought this could be extracted from sideDist but noticing the summed deltaDists are reciprocals", "I realize I don't fully understand the algorithm yet - nevertheless I appreciate it's elegance, especially the tiny branchless core code", "ollj, 2021-07-28a/length(a) == normalize(a) // - classic", "length(a)/a == 1/normalize(a) // - this shader uses reciprocals, to simplify the decision tree on intersecting a ray and a box.", "capslpop, 2021-07-26On Line 42 isn't the length of a normalized vector always 1? So Wouldn't it make more sense to replace it with: vec3 deltaDist = abs(1.0 / rayDir)? Or am I missing something?", "jt, 2020-05-06nice!", "fb39ca4, 2020-04-16@Gilga Thanks! Finally fixed after almost 7 years.", "Gilga, 2019-12-27mapPos produces a wrong result on line 66: i tested it with mapPos += ivec3(vec3(mask)) * rayStep; and now it works! vec3 to bvec3 conversion works correctly but from bvec3 directly to ivec3 it doesnt.", "Luke1974, 2019-11-29Early termination:", "```", "if (getVoxel(mapPos)) break;", "```", "Way faster.", "LukeSchoen, 2019-10-31Missread! actually nice work!", "LukeSchoen, 2019-10-31Not to be mean. But We you have a very bad understanding of the term \"Branchless\" this is infact the completely standard highly highly branchy DDA approach. Nice try, thanks anyway.", "Dave_Hoskins, 2018-04-14Just tried KZY rayStep change fixes for me.", "Dave_Hoskins, 2018-04-14Oh wait, it doesn't even work on my PC, the shape goes missing for half the rotation, and there's loads of shifting going on! DOH!", "Dave_Hoskins, 2018-04-14I mean the branch-less is slower on my pad.", "Dave_Hoskins, 2018-04-14It's about the same on my desktop 'puter. But it's something like 40% slower on my iPad, at a VERY rough guess while upping the STEPS then testing the FPS. Not very scientific, or really even useful, sorry!", "konidia, 2018-04-14Is it just me, or is the code with branch faster? I still do prefer the branchless code though :^)", "ollj, 2017-07-31[url]https://www.shadertoy.com/view/ldBfzc[/urll] describes and explores the core tricks of making code branchless.", "", "To [substitute all the things] till you end up with a matrix of factors that you can arbitrarily group into binomials within binomials, it if were not for the signs of many factors being wrong most of the time to become a binomial, but symmetry often allows you to flip signs without any visual difference. (or you accidentally made some great function you never dreamed of)", "but if your function is symmetrical, you will notice that more and more things cancel each other out easily, while you substitute in all the directions. practice builds intuition.", "", "the core goal is the identity: sign(a)*sign(a)=1. ,to substitute forwards to. anything that becomes 0 or 1 (or +-0.5).", "Sadly you can not always rely on a/a=1. within IEEE float types. division by 0 more likely makes your code incompatible.", "", "this makes more sense applied to more symmetrical functions, where a branch has 2 paths with roughly equal and very simple arithmetic. it also makes more sense to make code branchless that uses few variables, and to not have loops with many iterations return parameters into branchless code.", "", "Branchless code should be \"low level routines\", and the mainImage() branches can easily stay \"if()else\". You substitute till you get just that, a \"binary tree\" where everything is evenly branched, a perfect garden where you know that you can not remove anything more, the dream of an OpenCL coder.", "abje, 2017-05-22it doesn't work in win/chrome for me either, but addding raystep by zero fixes it, i don't know why.", "ivec3 rayStep = ivec3(sign(rayDir) + 0.);", "Zanzlanz, 2016-09-20Wow that branchless logic is really cool! I've never seen code similar to my implementation until now. Really elegant, good job!", "kzy, 2016-04-16You can replace lines 53 - 57 with", "mask = lessThanEqual(sideDist.xyz, min(sideDist.yzx, sideDist.zxy));", "eiffie, 2016-03-03I came back to this because it is such nice logic but now it is not working in win/chrome. The mask is mirrored?? I think making mask a vec3 and then ...", "mask=step(sideDist.xyz, sideDist.yzx)*step(sideDist.xyz, sideDist.zxy);", "is equal to your logic. Still this is a great example.", "titoasty, 2015-10-16@fb39ca4: oh ok didn't note you wrote it in 2013.. I'll use the break for my future shaders. thanks again for this great piece of code.", "fb39ca4, 2015-10-15@titoasty: At the time, some WebGL implementations were having problems with break in loops, so I used continue to maintain compatibility. The situation has probably improved since then.", "titoasty, 2015-10-15line51:  why do you use \"continue\"? if a voxel is found, you could exit the loop.", "I tried replacing \"continue\" with \"break\", same results and probably saving a few loops.", "besides that, clever branchless tests ! I'll definitely use your method, thanks", "textfield, 2015-08-11Can you explain exactly what deltaDist and sideDist represent?", "fb39ca4, 2015-04-29By voxelize a primitive, do you mean voxelize a signed distance function? Yes, that is exactly what this shader does. You just sample the SDF at coordinates rounded to integer values, and the voxel is solid or empty depending on the whether the SDF returns a positive or negative value.", "marklundin, 2015-04-24Noob question, but is there any way to separate the voxelisation from the ray marching so that you can voxelise a primitive", "florian, 2014-12-20I'm using 64-bit fixed point ray positions in my engine and both CUDA and OpenCL version seem to be not taking too much hit. My ALU mix is very shift heavy according to NSight and this made me think of Bitcoin. Check this out: http://www.extremetech.com/computing/153467-amd-destroys-nvidia-bitcoin-mining", "fb39ca4, 2014-04-15I just tried this with an older GPU (A Quadro FX 1400, which is based on the same architecture as the GeForce 6000 series), and was surprised how much the lack of branches improved performance. It went from 0.6 FPS with branching, to 6 oor 7 FPS with the branchless version.", "gltracy, 2013-11-24Replace my codes with the branchless implementation. Very elegant. Thanks", "Dave_Hoskins, 2013-08-16My Win7/gtx 680 stayed at 60fps all the time, no matter what!! But my iMac with a Radeon HD 6750 appeared to struggle with the integers a little bit. I remember reading somewhere that GPUs are optimised as float centric, so it's best to keep things as one type for that reason. I can't remember the source of that advice though, sorry. It could just be a Radeon thing!", "fb39ca4, 2013-08-15What GPU do you have? I tried removing integers, and got no difference on my GTX 460.", "Dave_Hoskins, 2013-08-14I got quite a large speed up (for longer rays) by just replacing the ivec3's with vec3. I'm told GPUs like working with floats and anything integer based, especially with casting can be expensive.", "Dave_Hoskins, 2013-08-13Beautiful logic! Thanks for sharing, I love stuff like this.", "revers, 2016-12-09Great article, as always!", "cauliflower, 2016-12-05@aiekick", "You may map a texture on your fractal and experiment with coordinate transformations until you have a continuous tesselation. Here, 1e4 is the escape radius for z and log2 corresponds to the squaring in each step as in the standard mandelbrot and julia sets:", "", "// texture mapping", "float tu = mod(atan(z.y, z.x)/6.283185, 1.);", "float tv = 1. - log2(log(dot(z,z))/log(1e4));", "fragColor = texture2D(iChannel0, vec2(tu,tv));", "", "Smooth color grading is just a special case of tessellation, where the texture is simple, but continued over multiple tiles/iterations. So you may find an appropriate tessellation/grading for you fractal. Extra points for an image spreaded over multiple tiles or in the ultimate setting: a single image on the whole green potential, distorted by a moving julia set for example.", "aiekick, 2016-12-03good article, but can you explain more about the smooth formula ? i knew it was linked to the complex formula, and i would understand how to find the smooth iteration formula for tne z = 1/(z^n) or any type of fractal. because for now it not work. in my mind i thinks i can find a ratio between two iterations distance, for smooth two iterations colors, but for now i have no idea", "JohnShadow, 2016-12-03hmm, wow.", "shastro, 2023-06-11Amazing fractal!", "TotallyReal, 2022-05-30This is really nice. Can you please explain what happens inside the map() function?", "hypnothalamus, 2022-02-10Gorgeous! I used this shadertoy inside Clavicula's shader layers here: https://hypnothalamus.artstation.com/projects/qQOREN", "Thank you!", "firegump, 2021-05-26gorgeous", "I_am_6r1d, 2021-03-06Thanks, this is a very nice reference!", "jpkelly, 2020-12-01Gorgeous!", "milesWaugh, 2020-11-20WOAH.", "Aliential, 2020-11-15Here is it is morphing https://www.shadertoy.com/view/wstBRB", "UrbanClubProfessional, 2020-11-11This shader has been remixed by me here: https://www.shadertoy.com/view/3d3BWN", "Zi7ar21, 2020-11-09yooooooooooo", "BrunoLevy, 2020-11-07Wow !", "izutionix, 2020-06-13added some nebula colors", "(line 58) col = .99*col + .08*pow( cos( .75*c-vec3(1, .75, .5) ), vec3(16) );", "fork: https://www.shadertoy.com/view/wtscDH", "btw I really like your shader, had it bookmarked before I had a shadertoy account!", "Touchpadder, 2019-12-29Change line 31 to", "p =(.7+sin(iTime/float(i - 10)) *.15)*abs(p)/dot(p,p) -.7;", "ikuto, 2019-09-07pretty", "tholzer, 2019-01-21So many comments and I just realized that I didn't make any!", "There is also a modified stereo version for those who want to see it in 3D!", "https://www.shadertoy.com/view/Mlj3zW", "ttoinou, 2018-07-20Featured in this video  !", "colonel_hilbert, 2017-10-08Thanks for making this, very cool!", "ttoinou, 2017-08-10Hi guil, I'm going to use this shader in a shadertoy Best Of video !", "jt, 2017-08-04Extremely pretty", "nomadiclizard, 2017-02-13This looks amazing! I have to learn how it's done ;3", "Jacoby, 2016-12-04Amazing", "xdaimon, 2016-10-18Very nice!", "You could remove some aliasing around the sphere edges by doing something like this at line 88: // raymarch", "", "vec3 col = raymarch(ro,rd,tmm);", "vec3 back = textureCube(iChannel0, rd).rgb;", "", "vec3 nor=(ro+tmm.x*rd)/2.;", "nor = reflect(rd, nor);", "float fre = pow(.5+ clamp(dot(nor,rd),0.0,1.0), 3. )*1.3;", "col += textureCube(iChannel0, nor).rgb * fre;", "", "float l = length(p);", "float R = 1.20;", "col = mix(col, back, smoothstep(R-fwidth(l), R+fwidth(l), l));", "alleycatsphinx, 2016-01-29This has lovely curves.", "cubby208, 2015-09-12I dont know how you guys do this but it is really really incredible! And to think something this beautiful and complex looking happens in just 105 lines of code (not to mention most of the lines are blank)", "shaderology, 2015-09-10beautiful!", "pos is calculated twice. should be:", "55: c = map(pos);", "", "or if you want to see refractive internals:", "53: vec3 pos = refract( ro, (ro+t*rd)/2., 0.76);", "55: c = map(pos);", "archee, 2015-09-09Beautiful fractal! You forgot refraction.", "u2Bleank, 2015-09-09awesome !", "vonschneidz, 2015-09-09Beautiful. Thanks for sharing!", "vgs, 2015-09-08Lots of details! Really impressive!", "reinder, 2015-08-04wow, very nice!", "jimmikaelkael, 2015-03-14Very nice !", "mplanck, 2015-03-13Beautiful and simple.  Would love to see a very subtle flowing to it.  Something like this but maybe with some flow perturbation on p:", "", "Change line 25 to:", "", "float map(in vec3 inp) {", "vec3 p = inp - normalize(inp) * .1 * iGlobalTime;", "guil, 2015-03-13Yes, Kali, it is an hybrid between your formula and a Mandelbrot with special orbit trapping", "Kali, 2015-03-13Very nice, so it's a mandelbrot combined with kleinian?", "aiekick, 2015-03-13beautifull", "GregRostami, 2015-03-13WOW! So pretty!!", "FabriceNeyret2, 2015-03-13woooow !", "iq, 2015-03-13Oh wow, this is pretty cool!", "guil, 2015-03-12OK, I take Dave's Fresnel multiplier and made other changes optional", "frankenburgh, 2015-03-12Wow! This really looks amazing! I used Dave's fresnel, dt=.1, \"col = .99*col+ .08*vec3(c*c*c, c*c, c);\" to make it blue and multiplied the textureCube color by 2 to get more intense reflections ;)", "FatumR, 2015-03-12Because the area of reflection is too large, but with specular of the light you can dicrease the are. Anyway, looks cool!", "I tried some animation", "float dt = .005 + mod(iGlobalTime / 10., .195);", "Dave_Hoskins, 2015-03-12I'm not sure who your replying to, but here's my effort:-", "float fre = pow(.5+ clamp(dot(nor,rd),0.0,1.0), 3. );", "col += textureCube(iChannel0, nor).rgb * fre;", "", ".. or values like it.", "guil, 2015-03-12Yes I tried. But if I increase the reflection amount, it's reducing the visibility of inner details.", "FatumR, 2015-03-12You can add some a bit light and specular part on the sphere, then it will look more realistic I suppose.", "Dave_Hoskins, 2015-03-12It's very nice with detailed cracking at full screen. Have you tried using a Fresnel multiplier on the reflection amount?", "poljere, 2015-03-12Awesome!", "lienthealien, 2017-12-23wow", "iq, 2014-03-16Thanks!", "morgan3d, 2014-03-16Fixed, thanks!", "iq, 2014-03-15The shader doesn't compile. Removing the \"const\" in line 85 fixes the problem.", "bernie_freidin, 2021-01-07oops forget the x += vec2(1000,1000), i was just testing it", "bernie_freidin, 2021-01-07@cecarlsen: the issue is with the hash function. i replaced it with an angular function which computes a random angle in [0..2PI] and returns sin,cos of that angle, and it seems to work fine for large offsets. i used iq's hash function from https://www.shadertoy.com/view/4sfGzS to compute the random angle.", "", "vec2 hash( vec2 x )  // replace this by something better", "{", "x += vec2(1000,1000);", "x = fract(x*0.3183099 + 0.1)*17.0;", "float a = fract(x.x*x.y*(x.x + x.y)); // [0..1]", "a *= 2.0*3.14159287; // [0..2PI]", "return vec2(sin(a), cos(a));", "}", "Gundou, 2020-11-03Both in 1985 Ken Perlin seminal paper and improvements (2002), it is stated that the gradient vectors should be unit. Shouldn't the hash function return a normalized vector instead?", "cecarlsen, 2018-08-11Thank you so for making some noise @ iq", "", "It seems that noise becomes a regular grid beyond a specific offset. Try subtracting at line 62.", "vec2 uv = p*vec2(iResolution.x/iResolution.y,1.0) - vec2(15,15);", "huttarl, 2017-03-31@zavie: Perlin noise is gradient noise, but there are other variants of gradient noise, including simplex and OpenSimplex. Simplex noise was developed by Perlin, but it's not what \"Perlin noise\" usually refers to.", "Zavie, 2017-03-31@lebek, @huttarl: As far as I understand, gradient noise *is* Perlin noise. The two names refer to the same technique.", "huttarl, 2017-01-07@lebek, I wish I could answer your question, but the code looks exactly like Perlin noise (the older, pre-\"improved\" version) to me. @iq, thanks for a helpful and well-commented demo of gradient noise. I see the line numbers referred to in comments on lines 16-21 no longer correspond. I would fix them if I could.", "lebek, 2016-11-18How is this different to perlin noise?", "CPU, 2013-05-16", "Zavie, 2022-09-24@01000001: Alas, what we did in highschool was not nearly at exciting. But when it comes to math, this shader doesn't anything that hasn't been seen by the end of highschool.", "01000001, 2022-08-15Lucky for you to get to do this stuff in highschool", "EricClapton, 2018-11-11It's cool when the cone traspassing the sphere : )", "etale_cohomology, 2017-08-15Ah, the shader is superb, thank you for the fix!", "Zavie, 2017-08-15@etale_cohomology: Thanks, I finally took the time to fix it in all my ray tracing shaders.", "etale_cohomology, 2017-07-22Doesn't compile for me because of the use of the word \"filter\" as a variable: Illegal use of reserved word", "hornet, 2016-11-16(one capped cone here https://www.shadertoy.com/view/4s23DR )", "Shane, 2016-11-15Did I just call a cone a cylinder? That's what happens when you get old.", "", "Seriously though, there should be intersection formulas on here for all the common shapes, like capped cones. Having said that, I can't find any quartic intersection code, which surprises me. I might put some up at some stage.", "Zavie, 2016-11-15Hello Shane, thanks for the comment; I like your shaders! Yep, there probably are examples of shapes. Cylinder is a good suggestion, I should try that too.", "Shane, 2016-11-15It looks like a rendering of a drunken invisible clown.  Actually, I like the clean look and vibrant colors. I haven't checked, but I'd imagine there'd be a few capped cylinder examples on here somewhere.", "Zavie, 2016-11-14Thanks, that's the beauty of simple math. ;)", "demofox, 2016-11-14Very pretty!", "Bers, 2016-09-05@ollj a somewhat simpler version with no sliders & buffers was added, see https://www.shadertoy.com/view/MtGGz1", "The same logic remains, therefore it is still on the long side (most ice-related logic is found in main_render(), renderIce(), and MAT_apply(), other things are for normal map and for tracing different objects). Anyhow, bottom line is : the most important trick here is to walk the distance field in the opposite direction (sign flip) for refracted internal ray-marching, the apply some fog-like shading according to internal ray-marched distance.", "ollj, 2016-09-04i want a version without buffer/sliders for simplicity.", "CaliCoastReplay, 2016-08-28I feel like I can feel the little puffs of ice frost.  Magnificent stuff.", "jackdavenport, 2016-08-25Nice work! Looks real", "ollj, 2016-05-06i got a pun too; its freezing at 7 fps on old 32 bit hardware.", "TambakoJaguar, 2016-03-10Really cool, especially when playing with the cursors!", "samuelotherion, 2016-03-08So nICE!!!", "thu_yumeng, 2016-03-08pretty cool", "iq, 2016-03-07Nice looking!", "jt, 2016-03-07pretty & looks very realistic", "Shane, 2016-03-07Gorgeous example, and it's running much faster than I'd expect it to. Those sliders are pretty cool as well.", "xik, 2022-12-04so cool love this effect going on -- the color mix is so intense ---", "jt, 2022-09-18wow!", "ghua, 2021-10-17insane", "apollo_eight, 2021-07-19Amazing! And way over my head how you did this!", "shicz86, 2020-06-11waaaaaaaow\uff01", "khlorghaal, 2020-01-02the best realtime fluid sim ive seen", "JoshScholar, 2019-12-02WOW!", "dr2, 2019-11-29Great visual effect.", "cornusammonis, 2019-11-27OK, I think we're on the same page Fabrice, I am already doing strided convolutions (at power of two intervals) at each MIP level here, as you do in your example. That does present another alternative though, going to a higher LOD and using larger kernels.", "flockaroo, 2019-11-27@cornusammonis: ah... yes this is indeed very similar to \"spilled\"... you reminded me to make some experiments on that (which rested in the mental drawer for a while). in \"spilled\" the velocity field was only given implicitely by the local curls, now i added some self consistency in this shader: https://www.shadertoy.com/view/WdVXWy", "propagant, 2019-11-27Cool... Okay...", "FabriceNeyret2, 2019-11-27Nope. I mean this: https://www.shadertoy.com/view/3dy3WW", "cornusammonis, 2019-11-27Fabrice, I'm not sure I understand, you just mean filtering with e.g. bicubic or a gaussian at each mipmap level? I attempted using the smoothstep filtering trick (this one) but that caused worse artifacting than regular bilinear. Seems like real multisampling is required but is more expensive of course.", "FabriceNeyret2, 2019-11-27Note that you have a continuous possibility between full filtering (possibly with custom kernel) and MIPmap:  you can choose to rely on MIPmap target - depth, then manually convolved at this mid-coarse resolution.", "Kali, 2019-11-27Mesmerizing. Well done.", "cornusammonis, 2019-11-27Florian, I did a deep dive into your Spilled shader while working on this, I made a stripped-down version of just the turbulence portion of this shader for comparison with it. I think it would interest you:", "https://www.shadertoy.com/view/wdVSR3", "flockaroo, 2019-11-26beautiful!!", "balkhan, 2019-11-26Smashing !! This is running just fine on my toaster GPU !", "asis5528, 2019-11-26so good", "aiekick, 2019-11-25wow", "iq, 2019-11-25Very cool", "cornusammonis, 2019-11-25You can increase the number of ADVECTION_STEPS, decrease ADVECTION_SCALE, decrease VELOCITY_SCALE, or increase UPDATE_SMOOTHING. The two _SCALE ones are timestep sizes.", "lomateron, 2019-11-25I have a feeling the fluid is glitching because the time step is very big", "is there a way to make the overall time step slower?", "cornusammonis, 2019-11-25That's a compelling idea, getting 6 extra 1024x1024 buffers to play with. I've done a number of things where it was tough to squeeze everything into just 4 buffers. There might be an opportunity to do custom mipmapping/downsampling here using that approach, though there's a significant disadvantage in needing to pipeline everything, i.e. needing to wait a frame for the result of the previous reduction step; I've done that before with Gaussian pyramids on Shadertoy (without using a cubemap) and you end up with some weird issues because the highest blur level is several frames delayed behind the lowest.", "spurts, 2019-11-25[This comment has been hidden by the shader author]", "Shane, 2019-11-25 Wow, this is incredibly good. The motion is amazing.", "", "I haven't tried it myself, but I recall that Fabrice mentioned using the individual cubemap faces as buffers to possibly increase performance, and perhaps even simplify things. Of course, it's just a theory, and this example is fast anyway, but it's an interesting thought.", "piyushslayer, 2019-11-25Wow! Looks incredible!", "FabriceNeyret2, 2013-07-27I suggest these changes for those who want to explore the fractal:", "line #6: zoo = exp(-.6*iGlobalTime);   // for constant speed zoom", "line #21: vec2 z  = vec2(0.0101,.04);  // for not falling in boring area", "", "(any clue to improve the resolution at reasonnable cost at the end ?)", "varomix, 2013-07-11that's is fkn amazing, chrome on linux works", "CPU, 2013-06-05ah... beautiful", "Dave_Hoskins, 2013-06-05Works here on 'Win7/Chrome 27.0.1453.94/GTX680' takes a while to compile though. Perhaps 192 is a bit high for some AMDs?", "I love the blue feathery look in the lower iterations.", "srtuss, 2013-06-05I'm getting a shader error/webgl crash. (Windows/Chrome 27.0.1453.94)", "iq, 2021-07-25So amazing! (also I don't understand how I never commented on this one before)", "BigReg1, 2019-10-01Dope....", "red, 2019-09-30Incredible.", "StakFallT, 2019-09-29It's FAST too!", "icaroleles1, 2019-09-29sick", "inquire_n, 2019-09-27I can hardly believe this runs on my phone. \u2764\ufe0f", "zevanrosser, 2018-09-04damn - amazing", "dila, 2018-08-19really wow", "dcoombes, 2018-08-13Amazing!", "EvilRyu, 2018-08-04blow my mind", "well done!", "flockaroo, 2018-07-30wow, super good!", "CLPB, 2018-07-30Wow!", "reinder, 2018-07-29Thanks all!", "I made some optimizations and bugfixes, so I could enable AA.", "Please change AA (line 47) to 1 if your framerate is below 60 (or if you're running the shader fullscreen).", "", "@dr2 you are free to use the code from Buffer A and add some physics in your own shader ;)", "dr2, 2018-07-27Very nice. Next step - replace mocap with physics", "MacSlow, 2018-07-26Mmmmmmagnificent!", "GregRostami, 2018-07-26SUPER Amazing!! I think this is the first motion capture shader.", "Shane, 2018-07-26 Really inspiring. Definitely my favorite shader in a while.", "fjavifabre, 2018-07-26Cool!", "scholarius, 2018-07-26It seems the pencil cap is rotating but that is specular aliasing", "834144373, 2018-07-26Hey!How about add music?", "834144373, 2018-07-26WOW!That is cool!", "knarkowicz, 2018-07-25Mocap inside a pixel shader and rolling ball idea are super awesome!", "pellicus, 2018-07-25super beautifull! great idea!", "ThomasSchander, 2018-07-25Awesome!!! Great idea and coding.", "wyatt, 2018-07-25Whatttttt that is the coolest", "Dave_Hoskins, 2018-07-25Lovely movement, and it looks great! Cool mocap find.", "BigWIngs, 2018-07-25Impressive!", "Plento, 2018-07-25AWESOME!!!", "zproxy, 2018-07-25epic. reminds me twinsen jumping in the dos game little big adventure", "shau, 2018-07-25Awesome idea and realisation", "PlNG, 2018-07-25SOTW candidate right here.", "PauloFalcao, 2018-07-25WOW!!!!", "Del, 2018-07-25wow!", "fizzer, 2018-07-25This is super awesome! Great idea with the motion capture data!", "hutien, 2023-03-24Hey, is that possible to put this into unity ?", "paokakis, 2021-02-26That is great and works very well for real time rendering. I tried implementing your shader in OpenGL with success but I have a problem. If the planet's position is not on 0.0.0 the scattering is off (taking part of the atmosphere mesh). Is there a way to correct that?", "cailuming, 2018-12-11great ,I finally find this , much easier to learn", "abhishekarora, 2018-11-11@gltracy, Hey, great example, and really easy to understand", "I have a question with respect to line 116 [ float c  = dot( dir, -l ); ], though -", "\"dir\" is the direction of the fragment shader ray (into the screen), and \"l\" is the direction towards the light source, right? In that case, why are we dotting dir (away from the eyes) with -l (direction of light)? Shouldn't it be dot( -dir, -l ) to compute light coming into the eyes? I might be missing something here, though.", "cyrilp, 2016-06-04Looks great !", "Is there a way to make it faster at the expense of some quality ?", "squid, 2014-08-21You need some continents and maybe a ocean.", "gltracy, 2014-05-14@knighty Thanks! the original article uses pre-computed texture to optimize out-scattering, but I think it's surprisingly fast enough to calculate both in and out scattering in a shader demo", "knighty, 2014-05-12Neat and fast! and very useful.", "It still looks good with less iterations for both in and out scattering.", "rainsong, 2022-08-05Beautiful shader.", "For a good time (nice color-changing effect) change the gold strip color (and reflection color) to", "rCol += lk - ro;", "and", "col + lk - ro;", ":-)", "sylvain69780, 2021-09-09It's nice to watch, and just as nice to read the code and its explanations.", "Peace, 2021-09-09WTH, this is so cool, it's satisfying on fullscreen to watch, would be the best game loading screen I have seen, they are usually boring", "sergh, 2021-09-08This is running fast even on my potato laptop. Awesome, congrats!.", "jorge2017a1, 2020-05-28@Shane", "I have the doubt is the mandel box fractal or is it an imitation ..... in that case .... it is fast .... it works very well ..... also it has many decorations, it is not slow .. ..Excellent work ... VERY GOOD ... Well thanks for your help !!!!", "..................", "Tengo la duda es el fractal de mandel box o es una imitaci\u00f3n ..... en dado caso .... es veloz .... trabaja muy bien ..... ademas que tiene muchos adornos, no es lento .. ..Excelente trabajo ... MUY BUeno ... Bueno gracias por tu ayuda !!!!", "kevs3d, 2020-03-29exceptional.", "Darkman007, 2018-08-06Cool!", "Tomaskordik, 2018-07-31Very nice", "MK2k, 2018-03-17@Shane", "Thank you, I \"ported\" it for the Visual Live System (by XT95) incl. attribution http://aduprat.com/vls/?page=gallery", "Shane, 2018-03-17@MK2k", "Apologies for the late response -- I don't receive site messages. Anyway, feel free to use the code in any way you see fit.", "MK2k, 2018-02-28Fantastic Scene! Could you please provide a license?", "pjdevpl, 2018-02-17Great, I love it!", "slerpy, 2018-02-09Replace line 330 by float speed = iTime*0.5 + 8. - .01 * texelFetch(iChannel1, ivec2(fragCoord)%8, 0).r; to add motion blur.", "JoshP, 2018-02-07Beautiful. And thank you for commenting it so thoroughly! Really nice to hear the code from 'your voice,' and the effort you put into giving helpful explanations is much appreciated", "utak3r, 2017-02-09BTW, the problem of spinning camera is much easier to avoid, if camera vector is normalized - euler rotation runs smoother then.", "dila, 2016-11-12lovely panels. seems a bit fast though", "cyrilp, 2016-06-27impressive shader !", "I'm trying to run it on an android phone but it's far to slow.", "What can we change to make it quicker at the expense of some quality loss ?", "iapafoto, 2016-03-25Super amazing as usual !", "knighty, 2016-03-24", "iq, 2016-03-24feel free to use iTimeDelta (it's basically iGlobalTime - iGlobalTime_previous_frame)", "Shane, 2016-03-24@dr2", "I forgot about that one.  I'll take a look. Basically, I'm trying to create a generalized camera system that mimics an aerobatic plane. Ie.: Looping the XZ and YZ planes by banking left and right, going upside down, etc.", "", "@aiekick", "I normally much prefer the \"time += timeElapsed\" per frame system, but I noticed that everyone has been avoiding it here, so I have too. At any rate, I'm never quite sure what timing mechanism is used in the background. With my personal stuff, I use the Javascript \"window.performance.now()\" with \"Date.now()\" as a fall back, then add the elapsed time per frame. I understand the former is more accurate, or so I've been told. WebGL's interaction with Javascript, browsers, etc... It all gets confusing.", "dr2, 2016-03-24Check out my \"Ride the Loop\" shader that deals with the inverted camera issue since it  traverses a set of waypoints in 3D.", "CPU, 2016-03-23high speed & high quality!", "iq, 2016-03-23Super super cool!", "poljere, 2016-03-23Niceeee! <3", "aiekick, 2016-03-23can you use the new iFrameRate to reduce quality but give good fps at 30 by example in fullscreen on my pc). i have tried to do this on my gear ball shader, as you can see, without succes, maybe you it will be a success", "seb0fh, 2016-03-23sweet!", "aiekick, 2016-03-23wow wow wow", "Duke, 2016-03-23", "jt, 2022-09-01fantastic!", "LoganDark, 2022-06-23well, higher-quality at lower sample rates.", "LoganDark, 2022-06-23For a higher-quality motion blur, replace `time = iTime + fj/(float(SAMPLES)*TARGETFPS);` with `time = iTime + hash( 12.34751478347*fj+time+seed )/TARGETFPS;`", "jing, 2020-11-11good job", "celifrog, 2020-09-30Imsure, jealous too. XP", "Imsure1200q_1UWE130, 2018-10-25how did you do that im jealous of everyone now", "KylBlz, 2016-03-10epic! especially if you squint a little bit", "morgan3d, 2013-09-04OMG", "ssdsa, 2013-05-22Awesome!", "iq, 2013-05-16(and it looks great!)", "iq, 2013-05-16now it works!! thanks", "reinder, 2013-05-16Hmmm... and now? I've made an optimisation by only testing against spheres in two grid-fields after the first bounce.", "iq, 2013-05-16it works in Linux, but I cannot make it work in my Windows machine", "reinder, 2013-05-15A high-resolution screenshot: http://i.imgur.com/Y4mG5uQ.jpg", "w23, 2013-05-15Pretty! Way better than my clumsy pathtracer.", "ianertson, 2023-01-30I know this is old but just wanted to let you know I came up with some alternatives over here:", "https://www.shadertoy.com/view/mlsXRj", "", "Not supposed to be a replacement of your implementation, just an alternative with a different approach", "iq, 2016-05-30Fixed!", "Dave_Hoskins, 2016-01-09And the ddx instead of ddy in lines 43-46?", "Dave_Hoskins, 2016-01-09 You've used ddya for each one...", "iq, 2016-01-09Now that we have texture2DGradEXT() I can remove the lines and still have mipmapping. Done! (still, the per tile random generator needs mipmapping for distant parts of the terrain).", "Dave_Hoskins, 2015-11-04The new filter modes now remove the texture border lines BUT they also remove any  chance of choosing a mipmap!", "DelvarWorld, 2015-08-24The other linked effect seems to do better on grid-like textures such as the stone tiles. any idea why?", "Wicpar, 2015-07-17this is so darn usefull, thanks!", "Dave_Hoskins, 2015-06-09If I slowly zoom in and out I'm getting a flickering single colour grid at the texture's borders, in either version. Which is why, I presume, the NEAREST_LINEAR needs to be used?", "Dave_Hoskins, 2015-06-09It's interesting that you've used it. So it breaks with large distances using a hash?", "iq, 2015-06-09That was my first approach, but I removed it in favor of a texture based look up cause hashes don't mipmap and produce lots of aliasing on a terrain (which makes them unusable)", "Dave_Hoskins, 2015-06-09These are very useful for doing large landscape patches, thanks.", "Is it faster if instead of using another 4 texture look-ups or sines for the hash, this might work quite nicely?...", "", "#define MOD4 vec4(.16532,.17369,.15787, .14987)", "", "vec4 hash4(vec2 p)", "{", "vec4 p4 = fract(vec4(p.xyxy) * MOD4);", "p4 += dot(p4.wzxy, p4+19.19);", "return fract(vec4(p4.x * p4.y, p4.x*p4.z, p4.y*p4.w, p4.x*p4.w));", "}", "...", "vec4 ofa = hash4(iuv + vec2(0.5,0.5));", "vec4 ofb = hash4(iuv + vec2(1.5,0.5));", "vec4 ofc = hash4(iuv + vec2(0.5,1.5));", "vec4 ofd = hash4(iuv + vec2(1.5,1.5));", "...", "brollin, 2023-05-16I would also like to use this for a personal, non-commercial art project. I would love the explicit OK from you Trisomie21 in case this message reaches you! The project would involve displaying it on our LED art piece: https://se.cretfi.re/canopy/", "var, 2021-11-19good vfx!", "Smake, 2021-08-05Wonderful!", "Next steps with your Ball -", "https://www.shadertoy.com/view/7tjSRK", "xiaobaidian, 2018-09-10Is ther have great book or Website for a beginner\uff1fthank you", "deva, 2015-12-28Never mind. I found out that it defaults to CC BY-NC-SA when no license is specified: https://www.shadertoy.com/terms", ":-)", "deva, 2015-12-27What license is this code released under?", "If possible I would very much like to use it in a CC work.", "Danguafer, 2013-03-05Loved the code simplicity and its resulting effect.", "Duketv1, 2022-10-28no man's sky?", "Dejay, 2021-11-17Don't look down...", "huanzai, 2021-03-06amazing", "jarble, 2021-01-02I also made an optimized version of this shader using a two-pass raymarching algorithm.", "jarble, 2020-11-13The rendering speed improves slightly when I replace ( abs(h)<precis || d>FAR ) with ( abs(h)<precis*(1.0+d) || d>FAR ) and (h<0.001 || t>tmax) with (h<0.001*(1.0+t) || t>tmax)", "ttoinou, 2018-07-20Featured in this video  !", "CHIMAIRA, 2017-11-11Really awesome  work  !", "zproxy, 2017-09-18360 at", "TambakoJaguar, 2017-09-09Wow, very very nice!", "ttoinou, 2017-08-10Hi nimitz, I'm doing a shadertoy Best of video could I use this shader in it ? Thanks", "Pr0fed, 2016-12-12I'm trying to understand what is shader and shaderscripting. So. You tell me this all is done without any images or modeling?", "webtweakers, 2016-09-19Nice! Is the ground supposed to be slithering?", "Klems, 2016-09-07This is stunning! BTW you can remove the sound fadeout after 60 seconds since Shadertoy will generate sound on the fly now.", "nenovrak, 2016-01-26I watch the news and my faith in mankind drops. I watch stuff like this in <250 lines of code and my faith is restored. Magic dude, pure magic.", "jt, 2015-12-17Wow, great atmosphere!", "Kali, 2015-05-17One of my all time favorites, and very impressed about your works!", "iapafoto, 2015-03-21// Stereovision variant => Line 211", "vec2 g = fragCoord/iResolution.xy * 2. - 1.;", "g.x *= iResolution.x/iResolution.y;", "vec3 rd = normalize(vec3(2.*g.x,dot(g,g)-1.,2.*g.y));", "iapafoto, 2015-03-19Incredible !", "ggj9921129, 2015-03-19\u00e7\u0153\u0178\u00e7\u0161\u201e\u00e5\u00be\u02c6\u00e6\u00a3\u2019\u00ef\u00bc\u0152\u00e8\u00b0\u00a2\u00e8\u00b0\u00a2\u00e5\u02c6\u2020\u00e4\u00ba\u00ab", "teadrinker, 2015-03-18Very nice! Awesome work!", "Johndrinkwater, 2015-03-16Really, really good!", "dila, 2015-03-16Sweet scene and music!", "frankwer, 2015-02-26Wow, hostile environments can be beautiful.", "nimitz, 2015-02-24Added audio by Dave: https://www.shadertoy.com/view/MtfGDB", "Dave_Hoskins, 2015-02-23Can I have a go at doing some sound for it, Nimitz?", "GregRostami, 2015-02-13Stunning and FAST! Wow!! And you didn't use any images (all noise)!", "Voltage, 2015-02-13Damn dude, I keep coming back to this.  So very cool.  So you exit before a guaranteed 7 samples, but you smoothstep the last fog sample depth with the scene depth?", "singingsingh, 2015-02-13super awesome", "nimitz, 2015-02-13See first comment.", "Dave_Hoskins, 2015-02-12Fantastic. I can almost hear the wind howling past those alien pods.", "Can you explain a little about how you managed to do all that volume fog in just 7 samples?", "Loadus, 2015-02-12Pure awesomeness!", "Nrx, 2015-02-12Really cool!", "iq, 2015-02-12Super good!", "Voltage, 2015-02-12This is fantastic nimitz!  Fast too.", "otaviogood, 2015-02-11Amazing. Great style.", "PauloFalcao, 2015-02-11Wow!", "kevs3d, 2020-05-04very pretty shading, love the dof!!", "Dave_Hoskins, 2019-02-01@Diamoth Thanks! Yeah, it\u2019s probably quite icy methane though. \ud83d\ude03 Shiiit, I don\u2019t even know if you can see anything on there.", "Daimoth, 2019-02-01Neptune's a gas giant, is it? Loved it.", "P_Malin, 2018-03-18Really nice! Only just noticed the sound, it's great!", "flockaroo, 2018-02-22really good! haven't seen that one before...", "Optimus, 2015-02-11Wow, this is one of my favorites. I love the depth of field, purplish terrain, alien environment and sound. Wow, just wow!", "otaviogood, 2014-12-09Depth of Field makes a cool look like it's a model or something. One of these days I'll post my Enceladus shader if I can get the frame rate up.", "Dave_Hoskins, 2014-12-04Thanks, fixed - surprising as it's overloaded for vec2s.", "ben, 2014-12-04The vec2 cross function is breaking it for me on Windows/Nvidia. Looks stunning once that's renamed though.", "Dave_Hoskins, 2014-12-04Cheers. Mac (AMD) fixed. I needed the stacks to be 'in out' vars, otherwise it didn't read the input values correctly on AMD.", "vgs, 2014-12-04Your landscapes always amaze me.", "Dave_Hoskins, 2014-12-03Borked on Mac ATM, sorry.", "Dave_Hoskins, 2014-12-03Thanks. I did the Alps, what more do you want?", "iapafoto, 2014-12-03Wow ! it is really fast !", "After Mars, Neptune... how about Europe for a future shader ?", "mla, 2022-02-14Nice trick with textureGrad. Also, you can divide a by 2\u03c0 for an asymmetric tunnel.", "Zi7ar21, 2020-10-07first shader", "jorge2017a1, 2020-06-23greetings 2020 ..... good job !!!", "saludos 2020.....buen trabajo!!!", "MichaelPohoreski, 2016-05-17Let user tweak the curvature:", "", "float e = iMouse.x / iResolution.x*8.;", "float r = pow( pow(p.x*p.x,e) + pow(p.y*p.y,e), 1.0/(2.*e) );", "flewww, 2016-04-08Hi,", "Is there any reason to use the Minkowski distance with p=32 instead of a max ?", "", "vec2 t = abs(p);", "float r = max(t.x, t.y);", "AlanBarrientos, 2022-10-31@dila Can you sell me the Rights to use your Shaders? alanbarrientoslinode@gmail.com", "FabriceNeyret2, 2022-09-19golfed down to 963 chars ( from 2335 ) :   https://www.shadertoy.com/view/7lcfDB", "( could be more, at the price of some obfuscation ).", "FabriceNeyret2, 2022-09-19of course ! there is nothing in channel2 !", "FabriceNeyret2, 2022-09-19NB: I see several unused variables and calculation.", "I don't see any difference without pcol.", "FabriceNeyret2, 2022-09-19But what is the metric of this strange drunken space ? :-p", "FlashFated, 2022-09-02Wow, it blows my mind. A bit like Karazhan from World of Warcraft. I can't wait for the release of Wrath of the lich king and pump up my Death Knight. I'm going on vacation soon, so I'm not up to games. My guildmate advised me to https://expcarry.com/wotlk so that my DK would be leveled to the maximum level.", "iapafoto, 2016-11-10cool and super fast even on very slow engine", "aiekick, 2016-11-08wow", "iq, 2016-11-08Oh wow, super good!", "ollj, 2022-08-21pico neo 3 link headset reporting in.", "450\u20ac headset with 4k Dataport-cable for lossless video from PC to VR is pretty good for shadertoy.", "sombrero, 2020-02-10Extremely beautiful! Love it on HTC Vive!", "void_nero, 2018-01-05Awesome\uff01\uff01", "harrisonvanderbyl, 2017-12-31cheap way to do volumetric rays:: for each pixel, sample each pixel towards the sun, and if its the background color, add some brightness to the pixel", "jcyuan, 2017-12-28SO AMAZING!!!", "lightest, 2017-12-26I find this piece fitting https://www.youtube.com/watch?v=CYC8vPhYcs8", "jt, 2017-12-20Wow", "iq, 2015-03-23Almost two years later, I fixed a bug that was creating discontinuities in the geometry. LOL.", "baccanno, 2013-09-30Stunning.", "PauloFalcao, 2013-04-24Impressive!", "sudosu, 2013-04-22Gorgeous. I can watch this all day.", "ssdsa, 2013-04-20Beautiful!", "iq, 2013-04-20Thanks for the tip Dave, you're right! So crazy. So many arbitrary rules that we have to follow for GLSL ES (which might change over time)", "Dave_Hoskins, 2013-04-20Brilliant! The trick is in the lighting every time. Very cinematic.", "On my GTX/Win7/Chrome setup, replacing the 'break' with 'continue' doubles the frame rate, sadly not so on a AMD/iMac!", "iq, 2013-04-20haha, no!, but they look almost the same!!! awesome!", "movAX13h, 2013-04-20no words can describe  I was wondering if it is possible to pick the right form/area of a Julius Newtree Set for example and use that to get treelike volumetric objects instead of assembling them from deformed distance volumes. I guess the handling of specific aspects like bending single branches would be hard to do on a fractal based object. Besides that, would it make sense?", "robertcupisz, 2013-04-20Awesome design and lighting", "CPU, 2013-04-20Wow! This is stunning!", "weyland, 2013-04-20This is gorgeous in style and execution, very birdlike and great lighting, awestruck", "djnaelbh, 2018-07-08Well done! thanks!", "zackpudil, 2016-03-11The specular lights and the voronoi bump mapping make this look awesome.", "TambakoJaguar, 2015-12-20Very very nice! Like the colors and textures.", "Shane, 2015-09-15@DelvarWorld", "", "That's pretty cool, and it works well too. It's amazing what browsers can do these days. Just for fun, I tried reproducing a similar, lit, per-pixel tunnel in plain Javascript, but even on a 256x256 canvas, the framerate was way too low.", "DelvarWorld, 2015-09-14@Shane I built out an \"import from shadertoy\" feature just to test this out  http://shaderfrog.com/app/view/239", "Shane, 2015-09-12@DelvarWorld", "", "In regards to its quality, I appreciate the sentiment, but a lot of this is just simple window dressing. The base code's about as simplistic as it gets, so if you wish to do something with it, go for it.", "", "I briefly perused your site, and I'll have a better look later. So much work. It makes my head hurt just thinking about the amount of effort that must have gone into it. Just writing a simplistic WebGL back-end is an exercise in frustration. I remember spending far too long putting some routines together just to load multiple textures.", "DelvarWorld, 2015-09-11@Shane, I think that this shader, because of the extremely high quality of the effect, would make a great candidate for a ShaderFrog shader (shaderfrog.com), if it could be applied to a 3d object and made configurable. Would you be willing to implement it there as a regular frag/vertex shader? Entirely up to you, of course.", "Shane, 2015-09-06@Dave", "", "Voronoesque - It needs a better name, but fakeNotQuite4TapVoronoi doesn't work either. I wanted to associate it with Voronoi, but not give the impression that it was worthy of a Voronoi replacement. Most of the hard work was done by Ken Perlin, and the geometrical aspects were probably based on the work of some mathematician before him. Either way, I'm thankful that I didn't have to start from scratch.", "", "@Nimitz", "", "Like you inferred, once you have four tetrahedral (8 cubic, etc) vertices and some kind of randomization (gradient vectors work better), you could probably do all kinds of experimentation. You can get pretty close to simplex noise by changing just a couple of things in the code above. It'd be great to see what people come up with. I know of a way to make more natural looking rocky patterns with a couple of changes.", "", "An 8-vertex, cubic version was part of the process, but I found it involved more calculation... although, it's possible that you have a faster way of going about it than I did. I'd imagine that a surrounding tetrahedral-neighbors random-offset distance approach would give nicer patterns, but then all the speed benefits would disappear. I may have already tried it, but can't remember. I do remember making a 3-tap 2D version, just for the fun of it.", "", "I had the same thought with respect to parallax mapping. With particular geometric objects, my mind never quite accepts that a bumped surface is a raised surface.", "nimitz, 2015-09-05about the Voronesque function: I wonder if using a regular cubic honeycomb (standard 3d euclidean cells) instead of a simplex grid (skewed tetrahedrons) could produce similar results visually at a much lower computational cost.  Also, other metrics could be used within that grid (may it be simplex or cubic) to create interesting 3d textures I bet.", "", "Also, if eiffie is reading, might be interesting to use that skewed simplex grid for your \"Tetrahedronator\" (https://www.shadertoy.com/view/llf3z8)", "Dave_Hoskins, 2015-09-05@Shane", "", "IQ's clouds uses a specially built texture to create the 3D noise, so it's really kinda cheatin'!  Your Voronesque() is actually quite a fast and useful function.", "nimitz, 2015-09-05can't help but think parallax mapping would work really well with this shader.", "Shane, 2015-09-05@dila", "I like all your examples. It's hard to pick a favorite.", "", "@frankwer", "I appreciate the compliment, but there are way better examples on this site alone. \"The road to Hell\" by \"rez,\" \"Tissue\" by \"iq,\" \"Star Tunnel\" by \"P_Malin\"... I could go on for ages. \"Tube\" by \"3SC\" is still my all time favorite, though. I'm still waiting for the Shadertoy version.", "Shane, 2015-09-05@DelvarWorld", "", "Here's a private link to a cylindrically mapped tube I put together. It's for anyone who'd like to see how to apply repeated (wrapped) 2D functions and textures:", "", "https://www.shadertoy.com/view/ltSSR1", "Shane, 2015-09-05@Dave", "", "That was pretty cool, but it illustrates just how slow that particular algorithm is when compared to the simple smooth noise formula. Every now and again, I'll come up with a cheap 3D noise-related function to test on IQ's cloud demo to see if I can maintain the same look whilst improving frame rate. I've come close using an amalgamation of sine and triangle noise, but it doesn't have the same feel.", "", "I've tested the fake Voronoi function out on a few 3D beveled Voronoi shaders here, and it definitely improves frame rate. The reason I even bothered in the first place was an image from one of IQ's productions, \"Leizex,\" which is on his site somewhere. I wanted to recreate it at decent frame rates... then got side tracked.", "DelvarWorld, 2015-09-04how easy would it be to separate the tunnel out of this to get a tiling 2d shader to use on 3d objects?", "frankwer, 2015-09-04The best looking tunnel i have ever seen.", "dila, 2015-09-04very pretty, also fast", "Dave_Hoskins, 2015-09-04Nice gem like colouring.", "That 3D noise function makes a nice pattern, especially for fluffy clouds.", "Here it is in iq's shader:-", "https://www.shadertoy.com/view/MtSSRh", "Shane, 2015-09-04@aiekick", "", "The pattern's a little repetitive, but there's a way to mix it up more by using a 3D gradient vector and an extra \"abs\" call to fold things over. In this case, though, I wanted to keep the example relatively simple.", "", "Like yourself, I've tried various 3D mappings (cubic, spherical, tri-planar, etc) of 2D Voronoi, and a bunch of other stuff, but never seem to achieve both speed and aesthetics.", "aiekick, 2015-09-04i love your 3d voronoi displacement  and well Commented; thanks", "black, 2022-09-26This is so cool", "jcyuan, 2022-04-20\u2764\u2764", "zproxy, 2017-11-17360 at", "Imsure1200q_1UWE130, 2017-06-04luv  the shader", "dila, 2016-06-29The lightning effect is lovely", "xTr1m, 2014-10-31Very nice clouds!", "cyanux, 2014-06-14The rain is magic.", "psonice, 2014-05-14Fantastic!", "", "Small suggestion for improvement: instead of having the cloud cover vary globally, it might work better with a wave so clouds build on the horizon, move in, then move away.", "Dave_Hoskins, 2014-05-12Thanks. I was hoping to use this kind of 3D noise technique commercially, I'm having second thoughts now. I wonder if it's only a WebGL thing or a driver problem.", "fb39ca4, 2014-05-12I get the same problem with the last three shaders. I'll try different browsers and such.", "Dave_Hoskins, 2014-05-11It looks like an edge clamping problem. Other shaders that use the texture for 3D noise:-", "https://www.shadertoy.com/view/Mdj3zD", "https://www.shadertoy.com/view/XsfGzH", "https://www.shadertoy.com/view/XslGRr", "https://www.shadertoy.com/view/MdfGRX", "fb39ca4, 2014-05-11Which shader did you get it from? I can go check if others have that same problem.", "Dave_Hoskins, 2014-05-09Interesting thanks, I wonder if you're having problems with all the Noise functions that use that texture, or whether it's just this one, which is a basic copy/paste.", "fb39ca4, 2014-05-09Here's what I see when texture noise is enabled. Disabled, it looks fine though.", "", "Windows 8.1/Firefox/Native OpenGL/GTX 460/331.93 Drivers", "Dave_Hoskins, 2014-05-09Thanks, I like the suggestion. I want it to remain all floaty and slow, so I opted for a subtle upward evaporation effect instead.", "P_Malin, 2014-05-09This is ace. Reminds me of this very old gamedev.net sky rendering thread. http://www.gamedev.net/topic/86024-sky-rendering-techniques/", "", "I think your shader is crying out for animated FMB though, something like:", "", "f  = 0.5000   * Noise(p); p =  p * 3.02; p+= iGlobalTime*1.0;", "f += 0.2500   * Noise(p); p =  p * 3.03; p+= iGlobalTime*0.25;", "f += 0.1250   * Noise(p); p =  p * 3.01; p+= iGlobalTime*0.125;", "etc.", "", "or something.", "Ramocles, 2014-05-08beautiful and inspiring!!", "Dave_Hoskins, 2014-05-05Hey fb39ca4, not here. Can I have some info about your 'puter and browser?", "And what happens if comment out line '20 #define TEXTURE_NOISE'?", "Thanks.", "fb39ca4, 2014-05-05Is anyone else getting a problem where the clouds do not tile properly?", "nimitz, 2014-05-05Really liking those clouds, great job.", "iq, 2014-05-05Fantastic!", "mmalex, 2014-05-05super!", "reinder, 2014-05-04wow, really beautiful!", "yunhai, 2022-01-04nice", "bboettcher3, 2021-03-02I worked off of this to make a version that cycles through the rainbow instead of just bluish-green: https://www.shadertoy.com/view/3lVBRV", "ldm0, 2018-11-09That is pretty cool!", "rhgrafix, 2017-12-27Cool, you figured out how to program a black rectangle, seems like a lot of code for that.", "jmk, 2013-03-30You're right, of course.  I forgot about that!", "CeeJayDK, 2013-03-29This seems a little silly:", "\"", "float g = sqrt(gx*gx + gy*gy);", "g *= g;  // hack to filter out noise", "\"", "", "There is no need to do a sqrt only to square it in the next step. Just don't use sqrt and get the same result with fewer instructions.", "Cesium_137, 2023-05-11how does the camera know how to avoid going inside the scene", "jarble, 2022-11-05I think this shader could be improved by adding some kind of biome map.", "DhaneshAbhipraya, 2022-07-0637/75fps great...", "jorge2017a1, 2020-05-27surprising, and impressive ... a very great job !!!", ",,,,,,,,,,", "sorprendente, e impresionante...un trabajo muy Grande!!!", "scratch13764, 2019-03-09What have you brought upon this cursed land Ommadawn.", "Ommadawn, 2017-05-19Switch iChannel0 to vandam and enjoy", "reinder, 2014-03-17I tried to write a similar 'demo' in just 1kb of javascript for a 1k js contest: http://js1k.com/2014-dragons/demo/1828. Web GL is a lot faster ;)", "PauloFalcao, 2013-09-24Very cool shader mashup!", "iq, 2013-09-10I fixed the corner in the edge-based AO in https://www.shadertoy.com/view/4dfGzs (I like edges better than vertices for AO cause it keeps the linear gradientss)", "", "The shader is very cool. I love the clouds!", "reinder, 2013-09-07Thanks fb39ca4! I changed the ambient occlusion effect (and I changed the tree trunk texture a little bit - still suffer from aliasing)", "weyland, 2013-09-07Did I just see a house? crazy cool", "fb39ca4, 2013-09-06For the ambient occlusion effect, instead of using iq's edge detection, which misses corners, try using this: https://www.shadertoy.com/view/4sfGzl", "fb39ca4, 2013-09-06Not bad. The tree trunk textures seem to suffer from a lot of aliasing, though.", "TekF, 2013-09-06That is amazing!", "Trakatranks, 2023-05-16Absolutely incredible !", "iestyn, 2023-03-07I prostrate myself in your presence. This is truly beyond what I thought possible. Humans are capable of incredible things.", "", "Thanks for bringing back the memories that got me into graphics programming all those years ago", "jt, 2022-07-22WOW!!!", "imshady, 2022-07-18lol you can strafe jump", "playbyan1453, 2022-02-13I especially love the minigames and incredible work", "hggg, 2021-10-13ultrapog!", "Zi7ar21, 2021-05-22HOW DID I MISS THIS", "You, sir, are officially certified Epic", "TetsFR, 2021-05-11You are my hero. This is magical, even the ashes from the lava ball feel the same as the original!", "Sharing some fps results from not SOTA hardware, fyi:", "- over 60fps @ 1080p on a 980Ti (keys only, not mouse usage) ; 41 fps when using the mouse constantly", "- over 22fps @ 1080p on a Jetson Xavier NX (keys only, not mouse usage) ; 11 fps when using the mouse constantly", "No sure why the drop when using the mouse, fps does not drop when rotating through the arrow keys.", "", "If you do only 1 level one day, please do DM4 with the rocket launcher", "oneshade, 2021-03-20This is incredible!", "adx, 2021-01-08It's hard to say what the problem with the moving textures might be - maybe there's a simple +/- sign error somewhere, maybe there's a bug in the way normals are computed, maybe the position where the ray hits the object is not right, or maybe something completely different is causing it...", "jorge2017a1, 2021-01-06@adx", "Very nice video and very interesting .... I have a problem and to this day I have not solved it, I use the texture of shadertoy, bricks, but, if I apply the texture to an object, and if I move around, the Image moves, which should not happen .... I don't know if you explain it to me ... it is assumed .... that the textures do not move they are static .... only that an object moves the same texture .. ... by the way that video is a mini ... mini, .... mini video tutorial but very interesting  It would be good if you share that technique ..... well if you can upppss !!!!! this to play one day !!!!!", "..............", "Muy bonito video y muy interesante .... yo tengo un problema y hasta al dia de hoy no he resuelto, utilizo la textura de shadertoy, ladrillos, pero, si aplico la textura a un objeto, y si me muevo de lugar, la imagen se mueve, cosa que no deberia suceder .... no se si me explique ... se supone ....que las texturas no se mueven estan estaticas .... solamente que un objeto se mueve la textura igual .....por cierto ese video es un mini...mini,....mini viedeo tutorial pero muy interesante  estaria bien que compartireras esa tecnica .....bueno si se puede upppss!!!!! esto para jugar un dia!!!!!", "adx, 2021-01-06Hey, happy new year to you, too!  I imagined you were using something like Google Translate after seeing that your messages had both Spanish and English versions, and I think it's working great - that's one aspect where technology is clearly making our lives better!", "", "About those textures - if you feel like they don't end up looking the way you want them to look, don't worry, that's exactly how it's been for me, too. You just have to keep trying different ideas until you find something that works. If you haven't seen it already, The Book Of Shaders has some good information in it, but it's not a complete guide. I'm thinking of writing some blog posts myself with what I've learned since I started working on this shader, but right now the only thing I have is this animation I made last year:", "", "", "", "Not exactly a tutorial, but maybe it still helps a bit", "jorge2017a1, 2021-01-06@adx", "by the way I would like and I would be happy to do something simple, something similar to a quake wall with its textures .... I wanted to imitate some of its shader, well the other one, .... but it doesn't work for me .... I can't apply your ideas .... hopefully I can upload another code .... welcome to have another shader from you .... just to learn !!!! greetings and happy new year ..... by the way ... I speak Spanish and I only understand 30% of the English language ... I hope you understand me !!!!", ".............", "por cierto me gustaria y me daria gusto que hiciera algo sencillo, algo similar a una pared de quake con sus texturas .... quise imitar algo de su shader, bueno el otro, .... pero no me funciona .... no puedo aplicar sus ideas .... ojala pueda subir otro codigo .... es bienvenido tener otro shader de usted .... solo por aprender !!!! saludos y feliz a\u00f1o ..... por cierto...hablo espa\u00f1ol y solo comprendo el 30%  del idioma ingles...espero me entienda!!!!", "adx, 2021-01-06Oh, vertical lines - I don't think I've heard about that problem before, and at this point I've tried the shader on AMD/Intel/Nvidia GPUs, on Chrome/Firefox/Edge and Win 7/Win 10/Ubuntu... It shouldn't matter if your computer is a little slower, that should only affect how fast the shader runs (and if it's slow, you can press 2/3/4 to improve the framerate). If it doesn't load correctly, though, it means there's a bug somewhere. Updating the GPU drivers or browser might help, but of course it's also possible the bug is in the shader. It's hard to say where the issue might be without seeing it myself/being able to reproduce it (since there's a lot of code in here), but in the end, though, it's just a silly shader, so you're not missing much if you've already seen the video", "jorge2017a1, 2021-01-04look at your video and it's a great job ... it hurts that I don't watch it in execution .... but it is sure that I would understand little, I consider the code a bit difficult !!!!", "...........", "mire tu video y es un grande trabajo...lastima que no lo mire en ejecucion....pero es seguro que entenderia poco, considero un poco dificil el codigo!!!!", "jorge2017a1, 2021-01-04Well I suspect several things because it does not load .... in the beginning if it loads the image or Quake symbol ,, .. then there is a simulation of the msdos operating system ... something like that .... after the second 24 and 25. ... you look at vertical lines ... and you hear the music in the background .... but my machine is a bit slow .... also I have ubuntu 18.0 .... also the Version: WebGL 2.0 ... .only that.....", "..........", "Bueno yo sospecho varias cosas porque no carga .... en el principio si carga la imagen o simbolo Quake ,, .. despues existe una simulacion de sistema operativo msdos ... algo asi .... despues del segundo 24 y 25. ... se miran lineas verticales ... y se escucha la musica de fondo .... pero bien mi maquina es un poco lenta .... ademas tengo ubuntu 18.0 .... tambien la Version: WebGL 2.0 ... .solo eso.", "adx, 2021-01-04Sorry to hear that  Can you share a few more details about what exactly isn't working (and what GPU/CPU/operating system/browser you're using)? If it's the classic 'Oops, webgl has crashed' error, there's not much I can do about that, but if it's something else maybe I can fix it. This is definitely a heavy shader, but that should only mean it takes more time to compile. After that, it should still work.", "jorge2017a1, 2020-12-31This version of shader is not suitable or optimal for me ... well it does not load well .... not that how good it is, but the code is huge .... 190836 characters that is Too HEAVY and HARD.", ".....", "Esta version de shader no es apto o optimo para mi ... bueno no se cargo bien .... no que que tan bueno es, pero el codigo es gigante .... 190836 caracteres eso es Demasiado PESADO y DURO.", "adx, 2020-05-30Thank you! For what it's worth, I've tried to make the code more readable by using longer, descriptive names for variables and functions , but it will probably still take a while to go through all of it. If your time is limited, it might be better spent checking out P_Malin's QTest shader - especially the intersection code, since it uses an actual BVH, which is much more useful outside of Shadertoy than my ad-hoc optimizations.", "", "Oh, and yes... the music track is quite unsettling, probably the strangest one in the whole game.", "movax20h, 2020-05-29Wow, what an amazing and impressive achievement.  So many things in it. I have no idea how long it will take me to actually understand this shader fully, but It is a great place to study.", "", "Also so creepy audio, wow.", "jerrypoiu, 2020-04-22OMG are you crazy", "adx, 2020-03-20That seems like a pretty bogus error (since we can only refer to a struct member through an expression), but I've added some workarounds, anyway (sacrificing readability a bit, IMO). For my own edification, though, I also checked the spec, but I couldn't find anything conclusive. After more digging, it turns out the error wasn't based on just the spec, but rather a pretty narrow interpretation of some minute difference between the GLSL 4.4 spec and the GLSL ES 3.0 one. Luckily, the code was fixed, eventually.", "", "TL;DR: fixed!", "zproxy, 2020-03-16  int num_brushes = NO_UNROLL(cm_brushes.data.length() - 1);", "'length' : length can only be called on array names, not on array expressions", "adx, 2020-01-04@spolsh: Thank you!", "", "@Luther: Sorry to hear that! Any more info in the console, like a line number, function or file name? Maybe it's something @iq / @poljere can take a look at, if it's a persistent issue.", "spolsh, 2020-01-03the ballons are fun! and kudos for detailed work put into this shader", "Luther, 2020-01-03Looks awesome from the videos but I've had some sort of problem with shadertoy for a while now 'SC not defined' errors in console  - something to do with not being able to connect to sound cloud?", "adx, 2019-11-30It is, to get started you have to take my cheeky 'aim for the sky' comment literally and actually shoot the sky - then try to make it to level 30  I wanted the gameplay (round-based target practice, with decreasing duration) to be slightly hidden, since the shader should be more about showing appreciation for the original game first and foremost, and less about my wacky ideas.", "", "P.S. Same thing goes for the volumetric light shafts - I'm pretty happy myself with how they turned out and I think the effect fits really well, but it's still off by default. Most of the 'modernized' versions of Quake I've seen online seem to fall into this trap of adding as many new effects as possible, completely disregarding the original design, and in the end making the result more about the shiny effects and less about the original game... Sorry, I'm off rambling again", "iq, 2019-11-30Is it playable? All I can do is move and when I go through the windows I come back to the starting position. How do I play the game?", "Dave_Hoskins, 2019-11-06I just discovered your 'light shafts' option, very cool, especially with the player shadow.", "adx, 2019-09-21Thanks, it's good to hear someone else enjoys the mini-game - it was meant as a quick micro-dose of Quake (but still playable competitively) for lunch breaks, or maybe long compile sessions (C++ FTW)", "reinder, 2019-09-19Super, super cool! I also really like the ballon shooting game", "adx, 2019-08-30Thanks! If you like this shader, definitely check out P_Malin's Doom - an awesome, fully playable E1M1 reconstruction (including secrets!), and probably the most complex shader we'll ever see on Shadertoy.", "ozeg, 2019-08-29this is best shader", "P_Malin, 2019-06-24> you're indirectly responsible for much of this progress", "You're welcome / I'm sorry", "adx, 2019-06-18It's nice to hear that, especially since you're indirectly responsible for much of this progress - I was just about done with this shader when you published QTest, showing just how much better lighting could be. I had to get back to work then, and I even tried to push things a bit further myself by squeezing the lightmap down into an area smaller than the smallest Shadertoy thumbnail. And then the menu just kind of happened... Oh, and the struct-wrapping array trick that fixed performance for Intel iGPU's? You're responsible for that one, too: when I noticed QTest performed much closer to my expectations than my own shader did, after a process of elimination, I ended up with that one weird trick. Anyway, I guess what I'm trying to say is 'thank you'", "P_Malin, 2019-06-17Wow, every time I look at this shader it gets better. This is really fantastic. The YouTube comparison is great. Love the new lighting, love the menu!", "adx, 2019-06-16Made a quick (~1 min) side-by-side comparison with Quake 1.06 running in DOSBox:", "adx, 2019-05-13Since Quake used Euler angles, switching the input code to quaternions would neither make its behavior more authentic, nor help with readability, so I don't think there's much to be gained here. For a Descent shader, which I may or may not have considered writing, I might go with quaternions, at least for storage. I've already used up pretty much all my Shadertoy time for this decade, though...", "", "As for the >30x perf delta on Intel (Cherry Trail/Graphics Gen8 at least), if I were to guess, I'd say it's probably an instance of shader constant waterfalling/serialization, due to the different storage choices for raw vs struct-wrapped constant arrays (registers vs memory). Haven't really looked into this, so I could be way off-base. I might make another userscript that would retrieve the translated shader source to help investigate these kinds of issues, but I can't promise anything yet.", "ollj, 2019-05-12i know structs can improve runtime for a minor compile time delay, but i never got it to a factor of >30*", "i know that using mat4 instead of float[16] can increase performance a lot, but i never got it up to >30*", "", "both are obviously correlated. especially older opengl will parse everything to a mat16x16 of type float. and any hints on how to do that fast are appreciated by the parser, usually done with structs that are mostly type vec4()", "ollj, 2019-05-12drag-mnouse context needs a modernized ui, where mousePos sets an antiderivative over time:", "", "cameraRotations should be a rotationBuffer (quaternion) , and foreach frame, the iMouse.xy position calculates to another rotation (quaternion) ,with  all angles  divided by /iSampleRate (beware, iSampleRate may be 0, at least when iFrame==0", "", "wach frame you add the mouseRotation as differential over time to the rotationBuffer.", "this makes the mouse set the rate of change(derivative) of the camera rotation.", "ollj, 2019-05-12drag-mnouse context needs a modernized ui, where mousePos sets an antiderivative over time:", "", "cameraRotations should be a rotationBuffer (quaternion) , and foreach frame, the iMouse.xy position calculates to another rotation (quaternion) ,with  all angles  divided by /iSampleRate (beware, iSampleRate may be 0, at least when iFrame==0", "", "wach frame you add the mouseRotation as differential over time to the rotationBuffer.", "this makes the mouse set the rate of change(derivative) of the camera rotation.", "adx, 2019-05-12A wild menu appears, so now you don't need to edit+recompile to change some common options. Also, after a bit of work on textures, they should hopefully no longer scream 'coder art', but maybe gently whisper it instead (see initial version / AO+TSS version).", "adx, 2019-03-18New update: lightmaps! Previous version (with negative lights, AO and TSS) available here for comparison.", "adx, 2019-03-16Indeed, respawning here is an action you have to take (just press Home/Backspace) and not something that just happens eventually. I'm not saying there's some deeper meaning behind that, but...", "", "Jokes and cheap philosphy aside, I do have some good news regarding Intel iGPUs. With the latest changes, I'm now getting 45+ fps on a Surface 3 (Atom x7-Z8700) in windowed mode, up from ~1.4 fps. The trick? Wrapping constant global arrays in structs. Yes, really...", "ollj, 2019-03-08the \"i have no hitpoints and must get out of the lava\" version.", "adx, 2019-03-01I suppose it's in our nature to look for corner cases, so maybe the gameplay is not as well hidden as I thought... The targets do indeed stand out here, rumor being that they're alien invaders, coming from a different dimension - one with more colors. We don't know what they want, but it can't be good. For some, they might look oddly familiar, though.", "P_Malin, 2019-03-01Aah yes, I had stumbled upon shooting the sky already. It was a great surprise to find something even more that I was expecting. Great that you put some sort of gameplay / objective in. I like the juxtaposition of those targets in the quake world.", "adx, 2019-03-01Thanks!", "", "P.S. Aim for the sky ;)", "P_Malin, 2019-02-27This is fantastic. Great job!", "iq, 2019-02-13This one totally missed my radar somehow. It's VERY impressive.", "adx, 2019-02-05Thank you! I loved Quake when it came out and the whole openness to modding was a huge influence for me, so I really tried to do the game justice.", "BigWIngs, 2019-02-04Dude, this is beyond impressive!", "FabriceNeyret2, 2018-11-30now working. Yeaaah, let kill'em all ! :-p", "adx, 2018-11-29Thanks, it was an out param that should've been inout.", "FabriceNeyret2, 2018-11-29Uh, I have the intro and the still gun, but all the rest is black, and no (visible) action.", "On linux/OpenGL.", "Just in case, usual compatibility suspects: https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/", "adx, 2018-11-29Another update, this time mostly on performance: I finally got some work done on that front, and after all the optimizations (specialized intersection function for axis-aligned brushes; brush partitions; top-level AABB checks for entities; bounding spheres in inner ray-march loop; texture/mipmap generation only when needed), my GTX 1060 can now render the default 800x450 window at 144 FPS while keeping its idle clock - that's a whole GHz lower than the initial version (and at lower utilization). All in all, current version is about 2.8X as fast, so it *should* run well on lower-end GPU's (famous last words). I've only done some very brief testing on an integrated GPU from the blue team and results didn't seem to agree with my back-of-the envelope math, though, so if you happen to have access to an entry-level GPU (or maybe a high end Apple GPU), I'd appreciate the info", "", "BTW, when I say brush partition, I mean a simple flat list of bounding volumes and associated primitive ranges, which I suppose could be called a BVL - it's basically a flattened BVH. For a while I actually had both types implemented, with a macro to switch between implementations. The BVH was very similar to stubbe's shader, but much shallower (due to compile time constraints), and macro'd to fit in just a couple of lines. After I managed to optimize the BVL compile time significantly, though, I removed the BVH code entirely - I might still bring it back, but only if I come up with another traversal scheme.", "", "Finally, with all the changes I've made so far, I figured it might be pretty cool to be able to compare the current version to the initial one. So, if you'd rather play 'spot the difference' (instead of reading walls of text describing incremental changes), you can do so here.", "adx, 2018-11-04I've made another quick-and-dirty Tampermonkey script, this time adding a 'FPS mode' (w/ pointer lock). You can watch it in action in P_Malin's [SH16C] Doom here.", "", "Have fun", "adx, 2018-10-31For some reason, the thing that stuck with me after all these years is the UV dithering. Can't recall how it actually looked, but some haziness might be exactly what a stochastic process like that needed", "", "Oh, and a quick update for whoever's still checking this out: I've finally added some actual gameplay. It's not very sophisticated and the HUD definitely needs more work, but if you're into games that need good hand-eye coordination and route planning you might find it entertaining. And if you're feeling competitive, try making it to level 23. Aim for the sky!", "Dave_Hoskins, 2018-10-31Not really. Although I did enjoy the first levels of Unreal, and it had a fantastic software renderer with volumetric fogging effects.", "adx, 2018-10-31I guess in the great debate of the late 90's, Quake-vs-Unreal, now we know where you stood.", "Dave_Hoskins, 2018-10-31Coming from Doom 2, I was disappointed by Quake, mainly for the artwork, and the muddy 'brown' of it all.", "adx, 2018-10-31#lifegoals", "dila, 2018-10-30From the box: \"Exceeding even their own legendary high standards, id have created a unique masterwork of mesmeric brilliance - Quake\"", "adx, 2018-10-23Thank you, it really means a lot!", "", "I have to give credit where credit is due, though - this would've been much harder if John Romero hadn't released the source files for the original maps. I did end up touching most of the brushes, but I've been careful not to affect the playable area in any way. As you can see in the changelog, I actually got carried away for a bit with the optimizations, and ended up reverting some changes when I realized that the teleporter platform in the Easy hallway had been affected. The outside area (visible only with NOCLIP 1 in Buffer A) was changed significantly, and for some reason I'm not totally happy even with that, since it might give the wrong impression - real maps are never this tidy in non-playable areas, especially when you know there's a compiler that will remove the geometry anyway. At the end of the day, the lower brush/plane count and the shorter encoding for the axial planes were a good trade-off, though.", "", "In terms of accuracy, the biggest deviation right now has to be the texturing. I'd like to have another go at it (it's still on the TODO list), but I'm not very confident I can make it significantly better. We'll see...", "", "Anyway, I'm done rambling... for now", "fizzer, 2018-10-23This is incredible! It's extremely accurate, I'm very impressed. Fantastic piece of work.", "adx, 2018-10-20So... it's been a while - I think an update might be in order.", "", "I've been keeping a pretty detailed changelog in the main (Image) buffer - maybe too detailed, since many changes are minor... I'm tempted to trim it down to just the highlights, but for now I think it'll stay as is, maybe someone will find it useful/entertaining in some way. Anyways, here's the TL;DR version:", "", "- Collision map/detection/handling: this is probably the biggest change. I was hoping to come up with a nice, clean implementation. I haven't: corners have been cut, shortcuts have been taken, steps have been skipped - calling it an over-epsilonned kludgy mess would be very generous...  On a more serious note, the code does get the job done: there's wall-sliding, smooth stair climbing, ramp sliding and jumping. The acceleration/friction code is more simplistic than Quake's, but other than that the handling feels pretty close. Performance isn't horrible, at least compared to the actual map rendering.", "", "- Temporal super-sampling: added to cut down the ambient occlusion noise, but it also plays nicely with Unreal-style UV dithering. With TSS_USE_LUMA_DIFF 0 (Buffer D), USE_UV_DITHERING 1 and UV_DITHER_STRENGTH 1.0 (Buffer C) you get something that looks a lot like bilinear filtering, if you're into that sort of thing; add LOD_DITHER 1.0 (Buffer C) and you get trilinear - all still for the low price of a single unfiltered texture sample (and some extra divergence).", "", "- Functional weapon model: another step towards some actual gameplay", "", "- Lighting should be pretty close to Quake with gamma 0.9 now; gamma 1.0 would look too dark against the default (bright) Shadertoy background.", "", "- Fireball particle trail: not particularly impressive, but it really makes the map feel more alive, IMO.", "", "- Pain effects and underwater screen distortion when falling in the lava pit: don't fall, I guess?", "", "Other than that, I've also optimized the brushwork a bit (almost 25% fewer brushes/planes, with no visible changes to the playable area) and its encoding (whole map data fits in 85 lines now) and tidied up the outside geometry (which would normally not be seen with a BSP-based renderer). And speaking of BSP's, I've actually added (some) BSP support to my map processing tool, but the shader experiments didn't go very well - I managed to lock up my system twice while compiling a BSP fork of this shader. After that experience I didn't really want to continue down that path - sorry, laptop/tablet(/phone?) users! Maybe I'll give it another try for Quake 2...", "", "There's another item on the TODO list that didn't quite make it - the zombies. The best model I could come up with (without blowing up the compile time budget for Buffer B) looked like a wooden mannequin, and without a really good zombie texture I don't think it would've worked. After switching the SDF normal estimation from central differencing to backward differencing compile time for Buffer B did drop by a couple of seconds - maybe there's enough room in there now for a more complicated model. For the time being, though, I'm putting the zombies on hold and I'll try to add some actual gameplay instead. To that end, I might have to do some compile-time optimizations in Buffer A, where persistent state is handled - it takes about 14 seconds now, half of the total compile time on my (admittedly ancient) CPU. I've already done some digging, and the low-hanging fruit there seems to be the function generating the QUAKE text above the Normal hallway. Optimizing it won't be pretty, but it could shave off a second or two.", "", "There's probably more I could bore you with, but this is already getting pretty long and rambly. Maybe I'll honor the long-standing tradition of people who've done something once and write a blog post about all this...", "adx, 2018-08-26On second thought, I actually went ahead and rewrote the font code, since I wasn't happy with it at all and it was the most likely culprit. New code is more compact, more flexible, probably faster and should hopefully have fewer/no compatibility issues (famous last words).", "adx, 2018-08-25I have a hunch what might be causing the error and I've tweaked the code accordingly, but it's just a shot in the dark. Any extra info you could provide, zproxy, would be really helpful - for example, is it just the Image buffer that's not compiling, or maybe some other ones? Any specific error message? Also, what GPU/OS/browser - maybe I can reproduce the problem if I manage to find a similar system. If I had to guess I'd say you're probably using an AMD card, but that's another shot in the dark, so I might be wrong about everything", "Dave_Hoskins, 2018-08-25Still OK for me (gtx 1060/ Win10 / Chrome)", "zproxy, 2018-08-25does not load anymore.", "audio not loaded?", "adx, 2018-08-24Should be fixed now, tested with Chrome and Firefox on Ubuntu 18.04. Thanks for letting me know, it would've taken me a while to notice it.", "FabriceNeyret2, 2018-08-24not compiling on linux.", "( something about const struct or array that linux don't like to be const ).", "adx, 2018-08-20Thanks again for all the comments, everyone, looks like we all have fond memories of those days.", "", "A note on performance: while I know a GTX 1060 is capable of 144 fps at 800x450 with ~40% utilization, I'm also well aware of the situation on integrated/low end GPUS. The framerate I had on my underpowered DX4 wasn't really on the list of things I wanted to recreate, so I've already made some changes to reduce the compile time for Buffer B (where the ray-tracing/marching happens), in preparation for adding what's still missing: an acceleration structure and, of course, zombies! I'm still not really sure the BSP traversal won't blow up the compile times way out of proportion (on Windows, at least), but I'd like to give it a try, anyway. No promises, though, limited time and all.", "", "Oh, and speaking of compile times - for anyone who wants to experiment with different code constructs, to see which is faster, I've made a quick-and-dirty Greasemonkey/Tampermonkey script that hooks the Shadertoy lib and reports the time it takes to do the initial compilation (on page load) and subsequent manual ones.", "", "@theGiallo: Fun fact - the map file I'm using to generate the data in this shader is called groundhog.map, since the only thing you can do is teleport/start over. Those teleporters are essential", "", "@valentin: Reverse-bait-and-switch working as intended, then! Fewer people will probably click on the thumbnail, but those who do get a pleasant surprise. Fair trade-off, IMO.", "flockaroo, 2018-08-20just wow", "dila, 2018-08-19so great!", "valentingalea, 2018-08-18At first I was like \"meh another Quake logo\" .. then my jaw dropped!", "knarkowicz, 2018-08-18Brings back the memories. Awesome!", "pellicus, 2018-08-18great work!", "theGiallo, 2018-08-17Super nice! I didn't expect the portal", "adx, 2018-08-17Thanks for the kind words, guys  TBH I wasn't quite sure what kind of feedback to expect, given the stupendously high quality bar here, on shadertoy, and the relatively low ratio of creative coding to plain old plumbing of this shader. Not to mention that, as you can definitely tell, I'm a total noob when it comes to procedural generation... I tried to at least not half-ass it, though, so, while it's still obviously coder art, it's at least .75-assed coder art", "", "@Shane: Indeed, it was a fair bit of work for a shader, but it was a labor of love  The shadertoy workflow (with its instant feedback and zero setup boilerplate) was quite addictive at first - IMO it's the perfect mix of creative freedom with just a hint of (stimulating) technical limitations. The superlinear compile times kind of curbed my enthusiasm after a while, but there are still a few things I'd like to try. And yeah, it's amazing how far we've come in terms of sheer computing power - from not being able to do a single perspective division per pixel to casually intersecting >1000 planes! I guess it's good to live in the future", "", "@Dave: I don't think I can take credit for either of those things - I may have peeked at the vkQuake underwater screen warp code, and I may have gotten very friendly with the Gimp color picker (percentage mode FTW) and Trenchbroom screenshots. At some point I may have even disabled f.lux after realising that doing texturing work at night might not be such a good idea... Anyway, I'm glad you like the end result", "Dave_Hoskins, 2018-08-17Got to love the UV movement simulation. And the palette is perfect. Great work Andrei!", "saidwho12, 2018-08-17Wow!", "Shane, 2018-08-17 This is so awesome, and so much work... Text, textures, brush information... I raytraced a basic Quake level many years ago, just to see what it'd look like. I had to render each frame to video output, and it took an eternity just to show a minute of scenery at 15 fps. This one takes a minute at 60 fps.", "CPU, 2018-08-17Amazing!", "Klems, 2018-08-17Holy shit what. This is beyond impressive.", "FabriceNeyret2, 2022-05-30golfed here ( not impressive: 2551, from 3654 ) : https://www.shadertoy.com/view/fd3yzl", "ollj, 2022-04-23For precision on distance fields, it matters little of you move the camera or the whole set (as long as you do not do large scale physics). Moving+rotating the set every frame tends to include a bit more mat4() multiplication, which is barely significant. a large set will still have lower precision, the further away the set is from its center. (this is noticeable in every tile of SecondLife; when you make multiple offset-quaternion-rotations, you must buffer a root-position to reset to every 4th or so rotation.", "", "Moving the set instead of the camera is better for large scale physics simulations (like OuterWilds does, because it has precision errors spread evenly through space, instead of being lower precision further away from the central star, and you want precision loss to be distributed evenly for more predictable orbital physics.)", "precision loss affects shape and procedural textures are just .rgb shapes.", "ollj, 2022-04-23instead of running it for an hour, replace all iTime with (Itime+longoffset) and have your long constant defined like", "#define longoffset 99999.", "the precision loss from one more addition is not too significant here.", "reyparis, 2022-04-22*why by = fly by", "reyparis, 2022-04-22Well, after an hour of running this, still some artefacts appear. Not in the shape of bulges though, but in the jitter visible on the textures. Possibly the result of errors seeping though into:", "", "vec3 fwd = normalize(lk-o);", "", "I guess it would be better to make the structure why by zero point than having the camera fly into infinity, but it's much harder, since the structure has two periodicities in it...", "reyparis, 2022-04-22@Shane @ollj - actually changing to the below line in map() makes the desired effect, as it was mentioned by @ollj the error in the remainder is hidden in a closed loop, and all looks ok for a long time. I guess it's still not an \"infinite run time\" fix, but should be ok \"for a while\" (no need to worry for a few thousand years, I think):", "", "float PI = 3.14159265358979;", "p = cos(mod(p*.315*1.25 + sin(mod(p.zxy*.875*1.25, 2.0*PI)), 2.0*PI));", "", "Still, might need some other small tweak, if the large value (z coord) is used somewhere else in the code.", "ollj, 2022-04-22yes, modulo will not solve precision issue, but any closed loop will hide precision losses. ideally use a modulo of a base2 value of pow(2.0,floor(n))", "If your noise/shape has modulo(-galois) OR a base2-congruential-generator as its basis function, that noise automatically loses less precision on larger input values.", "Trigonomety is often very low precision (rough estimate that interpolates from a lookUpTable, often only using 16 but precision on mobile devices.", "assume only 16 bit precision on mobile devices for the final rendering shaders, even only for multiplication, to save battery power.", "AI up-scaling + AA (and AI noise filtering) on RTX gpus is done in 16bit matrix-multiplications (and commonly 64 bit matrices are converted into 4 16 bit matrices for better performance + parallelization)", "reyparis, 2022-04-22@Shane", "I think mod(large_value, 2*PI) will still be noisy, because the large_value cannot be represented precisely enough. I am working out how this could be updated to only depend on cos(z) and sin(z), but I currently have a problem with the fact that \"3D sinusoidal mutation\" swaps the dimensions. If I work something out, I'll post it ;)", "Shane, 2022-04-22@reyparis", "Unfortunately, the GPU transcendental functions lose accuracy when large numbers are involved. In order to fix things more efficiently, I'd need to do some testing. However, the following might provide a quick fix: Since sin and cos are periodic, changing something like \"sin(value)\" to the equivalent, \"sin(mod(value, 2*PI)),\" should keep large numbers in check.", "reyparis, 2022-04-22I have a question. If I leave this running for a long time, t gets big and all the sin and cos get very noisy. Usually, I have some circular time in radians, not infinitely growing. How I could potentially fix this for this shader to be able to run indefinitely?", "NoxWings, 2021-10-23Looks great!!", "JoshScholar, 2020-12-07By the way, try changing the second texture!", "JoshScholar, 2020-12-07This is the most efficient advanced shadertoy ever.", "My 1440p monitor is 140 hz, and this keeps up with that fullscreen with only 43% GPU usage.  If I could afford a fast 4k display this could keep up with that!  Looks amazing.", "", "GPU 2060s", "warlock, 2017-09-01OMG... this is incredibly beautiful!", "Docculd, 2017-08-31Loved it!", "CaliCoastReplay, 2017-08-29Oh my god, it runs at fullscreen...", "shau, 2017-03-28Colours and shading are amazing. Another one to study", "Duke, 2017-03-23@ollj, @Shane: I have an idea to make a utility for automatic conversion of given function to function with derivatives. I hope I will find time for this.", "LukeRissacher, 2017-03-23Changing the iteration count from 128 to 16 in trace() looks pretty cool - like traveling through a mucous membrane.", "Shane, 2017-03-23@ollj", "It's certainly possible to do a lot more with this surface, and I've already used it to make an asteroid field by mutating it with bit of triangle noise, and chipping away via Voronoi bump mapping. At the moment, I'm using similar methods to create a simple rocky flythrough.", "", "Anyway, feel free to use this for whatever you wish. It'd be interesting to see what you can come up with.", "", "@Duke", "If I wasn't lazy, I could probably come up with an analytic normal calculation and save a bunch of calculations. Thankfully, this runs pretty quickly anyway. What I'd like to improve is the way in which the ray hones in on the surface, and Paniq's code might be able to help with that. I haven't checked, but I'll assume this surface isn't Lipschitz friendly.", "flockaroo, 2017-03-23classy glossy glassy ;-)", "ollj, 2017-03-22this one cold demonstrate multiple light sources with different colors better than most others, due to efficient detailed geometry.", "", "i would like to see this being more fractal, like some asteroid-field-shaders did by substracting smaller and smaller modified copies of the initial distance field with minor modifications (besides scale) from the largest one.", "", "---", "", "yes Duke, dual numbers can help performance for distance field who's first derivative is better calculated with dual numbers who buffer it. if only because the first derivative is useful for many things when it comes to light. this does not apply here, as this distance field is simply sinusoidal with simple and small exponents, sin() has the easiest derivative ever. as soon as your distance field has a few things to the power of 4, or the constant e in it, dual numbers likely perform better, or at least have better precision. as with the a goursat-surface of https://www.shadertoy.com/view/XlV3Dy", "dr2, 2017-03-22vitrified blood cells", "EntityBlack, 2017-03-22The performance is the most impressive!", "dila, 2017-03-22wow, really interesting shading here", "Shane, 2017-03-22Thanks for the comments. I put this together pretty quickly. This is just one of countless variations, and not even close to the most interesting one. Because it's just a cheap trick, it's never going to look physically realistic, but you can still make some pretty interesting looking surfaces with it.", "Shane, 2017-03-22@IQ and @FabriceNeyret2", "You're both right, of course.  The scene could do with some extra depth cues, like hue variation, DOF, etc.", "", "Anyway, I've taken one suggestion and used the diffuse value to subtly change the hue. Hopefully, it provides a little extra depth, and perhaps the impression that some kind of color absorbtion is taking effect. If nothing else, extra color would give people's eyes a break from the overabundance of amber.", "", "@Dave_Hoskins", "Amber resin would have been a better description. I set out to make low-cost glassy ice, but got a bit carried away trying to make the scene look more interesting, then forgot my original intention.", "balkhan, 2017-03-21Thanks for commenting your code, that campath substraction trick in the de is really neat. Awesome lightning !", "GregRostami, 2017-03-21My favrorite Shane shader. WOW!!!", "iq, 2017-03-21Looking great!!!", "", "I miss a little subtle hue variation to get some extra tactile/physical feeling.", "LukeRissacher, 2017-03-21Cool! And nicely optimized as always.", "FabriceNeyret2, 2017-03-21wow !", "", "maybe some darkness or fog or blur with distance to increase the perception of depth ?", "Duke, 2017-03-21I am still thinking, will dual numbers (https://www.shadertoy.com/view/4dVGzw) be really faster for normals calculation or central differences method is faster? Especially for some noises.", "Duke, 2017-03-21Very nice!", "P_Malin, 2017-03-21Great results. Go pseudoscience!", "Dave_Hoskins, 2017-03-21Rendered superbly! It reminds me of a resin or honey.", "Theblower069, 2020-06-20Very nice", "jeyko, 2020-03-27awesome aesthetic!!", "neozhaoliang, 2018-10-08Thanks  you for these suggestions. I used Keyboard because it's the cheapest way to add UI features for beginners in shadertoy like me..", "I'll study the code in your link more carefully when I'm back to shadertoy later.", "ollj, 2018-10-07i think its bad style to use keyboard input to toggle modes (or to use modes at all if you ask @nomodes), when all the modes are just dua- permutations, that are better displayed as a 2d lattice, that is zoomable by mouse input (and/or interpolates parameters over screenshace like the wythoff-explorer shader) or allows for smooth transitions (over screenspace/time)", "for contextual framing (with mouse interactivity):", "https://www.shadertoy.com/view/MsyfRm", "https://www.shadertoy.com/view/ldlGzM", "https://www.shadertoy.com/view/4tycWd", "Bambi___, 2022-11-18cool\uff01", "hzh98, 2022-11-15So impressive...", "dztxdy, 2022-11-13Wow!! it's beautiful!!", "kirbyx09, 2022-10-20Wow, Its cool", "FabriceNeyret2, 2022-06-28@DLord: animation seems to look a bit steppy after 1 million seconds,  and image pixelates after about 10 million seconds. that's about 4 monthes. I didn't know my shader was *that* fascinating  ;-)", "DLord, 2022-06-28Cool,                      )", "I have waited really long and it broked", "Yan, 2022-05-30Fantastic!!\uff01", "mherreshoff, 2020-12-15This thing is cool!", "Mr_Mayhem, 2020-07-08Beautiful galaxy, and thanks for your suggestions on my Pole & Zero Distance Topo shader. I am now trying to figure that out, lol, the coordinates are something other than center screen at 0.5", "Nurutomo, 2019-09-20Nice! 10/10", "stseagle, 2019-09-03Gorgeous!", "jaszunio15, 2019-01-03What a code golfer =D", "FabriceNeyret2, 2019-01-03If you like effective short codes, whatch https://www.shadertoy.com/results?query=short&sort=newest&filter= :-D", "My personal pride is the 65 chars maze generator https://www.shadertoy.com/view/lt2cRR ;-p", "jaszunio15, 2019-01-03It remind me a meme:", "", "", "And I'm like: \"writes 100 lines of code - draws a galactic :v\" XD", "clumsyrthanu, 2018-04-09I love this!  I'm going to set aside some time to understand how it is made. Thanks!", "catafest, 2018-01-21like it , very good idea to use number keys to see all steps.", "nigel_kozlowski, 2017-10-26I love it !!", "FabriceNeyret2, 2017-08-08- this very shader is very old and not optimized, maybe PI was used in an early version.", "- on desktop programs using doubles when precision is required it's better to use M_PI or something like asin(1.)*2. rather than 3.1415927 because you get 12 digits instead of 6. But it's not true in floats, and even less in GPU floats (if fast math happened to be activated).", "- detail: preprocessor math are a totally separate path; you can't be totally sure than asin(1) = asin(x) for dynamic x = 1. and it ignore IEEE goodies.", "- sometime having an accurate PI, sqrt(2), sqrt(x), normalization is vital for the program to work, and sometime not. It's a good practice to understand where the precision is needed or not, but maybe it's because I come from scientific computing.", "Imsure1200q_1UWE130, 2017-08-08please tell me why you define it in your shaders.. that way ill understand...", "FabriceNeyret2, 2017-08-04PI precision is not required in this shader.", "(BTW, I don't even use PI :-p )", "Imsure1200q_1UWE130, 2017-08-04change line 14 into", "float Pi = asin(1.)*2.", "huttarl, 2017-06-17Caution... do not watch fullscreen for too long without being strapped in! Not responsible for falling injuries.", "TechEpic, 2017-02-27Whoa...", "bleedingtiger2, 2017-01-09Very pretty ! I like the brainfuck : you said it, arms are not rotating :p", "Artonn, 2016-12-17We would very much like to come in connact with you, please write to rollabolla@outlook.com", "bostelk, 2016-02-21unreal. a+", "FabriceNeyret2, 2015-09-03woop !", "level=0 for all 3 fetchs, now", "reinder, 2015-09-03Oh, I don't know. Maybe 0 will work also. The problem is in line 20 btw  (the texture look up for your noise function)", "FabriceNeyret2, 2015-09-03ok, done.", "But why -100, rather than 0 ?", "reinder, 2015-09-03Can you add -100. as a third argument to the texture2D calls? On some devices the shader now uses mipmapped textures, loosing all details.", "TideSofDarK, 2013-08-09I spizdil your \u00d0\u00b1\u00d1\u2039\u00d0\u00b4\u00d0\u00bb\u00d0\u00be\u00d0\u00ba\u00d0\u00be\u00d0\u00b4 for svoey \u00d0\u00b8\u00d0\u00b3\u00d1\u20ac\u00d1\u2039, thanks huila", "FabriceNeyret2, 2013-08-08added:", "- true effect of spiral compression on density (no manual tuning of inter-spiral density).", "- Key toggles ('1' to '4') for each layer.", "- Code clean-up and comments.", "stegu, 2022-02-17After spending quite a lot of thought on this last night, I feel a need to qualify my previous statement. This pattern has low frequency content, true, and it will alias rather badly when you try to frequency clamp it, but it's not quite for the reason I thought.", "The low frequency variations in gradient length impact the pattern in a multiplicative manner, and because of how gradient noise is generated, and because this is a 2-D noise and not a cut through higher dimensional noise, the pattern will still have zero mean, even locally. It's not like value noise, which does have low frequency content all the way down to DC. So, why doesn't frequency clamping solve the aliasing problem?", "", "The answer to that is twofold: gamma and bump.", "", "For a pattern with a local variation of zero mean to actually look like its average color at a distance, any high contrast variation needs to be created in a linear color space. RGB and sRGB are most definitely not linear. They are deliberately designed not to be. Once again, we are reminded not to add things in a gamma corrected intensity value and expect to get away with it.", "", "The second reason is that noise is often used for bump mapping, and bumps do not influence the reflected intensity in a symmetric manner. Without specularity, any bumps will reduce the average intensity of the surface, partly because the Lambertian approximation, the \"cosine law\" with dot(N,L), has a variable slope that ends up taking away more than it adds to the reflection, and partly because of the horizon cutoff -- when dot(N,L) turns negative you clamp it, because it doesn't make much sense to compute with negative intensities. In the presence of any kind of specularity, we have the opposite problem: bumps with highlights will add a lot to the average intensity, regardless of their frequency. If you are to do frequency clamping to remove a high frequency bump pattern on a specular surface, you should also make adjustments to the specular reflection model, the \"Phong exponent\", to compensate for the loss of non-zero-average fine detail near the specular reflection angle. With HDR specularity and a linear colorspace, this particular problem is exacerbated rather than alleviated. RGB saturates on specular highlights, while HDR does not.", "", "Funny how problems always become more nuanced the more you think about them. I am a lot more confused now than before I gave this more thought...", "stegu, 2022-02-12I completely agree that noise functions with low-pass character can sometimes be useful as an artistic tool and as a way of saving some costly terms in a sum, but they do have problems besides being \"theoretically unappealing\".", "", "The unusually wide-band noise in this particular example (which arises from having an almost zero gradient at lots of grid points) has considerable energy across several octaves, and that makes it tricky to do AA on patterns created with it. Frequency clamping assumes that noise above a certain frequency averages out to zero across a fragment/micropolygon of a size larger than the noise feature size, \"one wiggle\". Using this function in a frequency clamped fractal sum would make the pattern either change visibly as you zoomed out, or start to crawl from aliasing before you could drop the term that causes it.", "", "I have an AA fetish, true, but production quality software shaders have been required to do their own AA for decades. Multisampling is a last resort for surface shading, not something you want shaders to routinely require.", "FabriceNeyret2, 2022-02-12about gradient amplitude tuning vs bandwidth: just a small remarks between artists use  vs  theoretical clean case:  ;-)", "Ken Perlin once made me a similar remark when I said that in industry ( a looooong ago ) we where sometime mixing value and gradient noise parameters ( i.e. set a random slope AND a random height ) in his noise.", "In both the present and past case the result is more LF while you theoretically want a bande noise so as to control the spectrum via the fractal sum. But doing so somehow creates a wide band spectrum using just one (or fewer) level, which some artists sometime like too, plus the more handles the more happy they are ;-) ( at least we seemed to think it was a good idea at the time. Not sure it's still ever implemented that way ).", "stegu, 2022-02-11Let me make it absolutely clear that I have read your absolutely wonderful articles, and I think your code for computing noise gradients is a great resource. Sadly, very few people seem to have adopted it, as I see finite difference approximations being used everywhere, and that carries an almost crushing penalty.", "", "The reason I brought it up here is that the derivatives of simplex noise, and the second derivatives as well if you need them, are a *lot* less work to compute than for \"classic\" gradient noise with sequential interpolation, because the noise is just a sum of contributions from the corners (and fewer corners as well) rather than an interpolated product of high-order polynomials.", "iq, 2022-02-11You can learn about analytic gradients following the links left in the shader or my website's articles.", "stegu, 2022-02-11The gradients should not be chosen too short for 2-D noise. The hash used here for the gradient returns independent values for x and y, which results in many short gradients, and the final noise field has a lot of low frequency content (flatter gray areas). The hash is also generally very bad for this purpose, creating lots of periodic artefacts. Most implementations of simplex noise, including Perlin's slightly buggy original version, pick all gradients to be of the same length but different directions.", "", "Modern 2D and 3D simplex noise functions that can compute their analytic derivatives at a very low additional cost are here:", "", "https://github.com/stegu/psrdnoise/", "", "Our old functions from github.com/ashima (mirrored at github.com/stegu/ after Ashima went out of business) are still useful, but I recommend the more recent ones. There is some old and stale code in the Ashima versions that was required to spoon feed stupid non-optimizing GLSL compilers a decade ago. The new versions I link to above are faster on modern GPUs, in particula the 3-D version. (You also get 3-D flow noise with that, which is a novelty.)", "ollj, 2021-05-15\"gradient\" is your search term, for shaders, that go 1 derivative deep. iq tends to implenemt AutomaticDifferentiation more often in them. most of them of most people however only do a low-resolution estimate, by using fast buildIn opengl finctions, that are fast, but neither analyltic, not precise (but often good enough).", "Raymarching generally calculates a surface notmal by tapping each domain 2x (all sharing 1 point), and generally NOT by doing using the chainRule, because that compiles and runs slower, and the precision gain is generally insignificant.", "ollj, 2021-05-15\"ashima simplex noise\" is/has a lot of good noise code in 2d 3d 4d.", "derivatives can be calculated, by using the chain-rule a lot, which ends up in a set for automatic-differentiation, where every (infix) math operand becomes a prefix-function, that also buffers n derivatives over m domains, and where non-commutativity becomes a bane, and where you may solve the most general functions to more specific ones.", "", "iq has many shaders, that also return the first derivative (most of them only over 2 domains)", "i made a few automatic-differentiation shaders, that may just work up to 4d, and up to 3 derivatives deep, but most of the time that \"and\" is an \"or\", because  the colpile-times are way too long for 3 defivatives over 3 domains.", "", "there is one nice 3d geodesic shader, with 2 spheres that bend curvature a lit (almost black hole), it is VERY precise and elegant for 1 derivative over 3 domains, and could easily be expanded to 1 derivative over 4 domains, to do crystoffel-symbols of general relativity.", "cybotic, 2021-05-14(how) is it possible to return the derivatives?", "Also is there a 3D example of this on ShaderToy?", "Dominexis, 2021-04-19My goodness, you've got your fingers in everything! Kudos to you for such a massive library.", "FabriceNeyret2, 2020-06-17playing with n components here https://www.shadertoy.com/view/3lsyRB ( inspired by izutionix tests )", "filipesaz, 2020-02-04You are very right iq. Thank you for replying. Very kind of you.", "iq, 2020-02-04Hi. The implementation you are linking to is correct, they are also doing h^4, just like I am. In their case they are doing h = h*h; n=h*h*dot() which is equivalent to n=h*h*h*h*dot(), since h is multiplied with itself as ((h*h)*(h*h)).", "", "As for precision, the GPU operates in 32 bit floating point numbers, which is equivalent to approximately 6 decimal places. My K1 and K2 constants have 9 decimal places, so they are already three orders of magnitude more precise than the computer can handle for this implementation, there's no need to add more digits (if anything, I should remove at least two decimal digits)", "filipesaz, 2020-02-01May I suggest that you may use a high precision calculator for K1 and K2. Like the one at https://www.mathsisfun.com/calculator-precision.html, which yields (truncated here): K1=0.366025403784438646763723... and K2=0.2113248654051871177454...", "filipesaz, 2020-02-01After briefly applying this shader to a project of mine, I believe it should probably be h^4 just like you say. But I still cannot seem to see how the implementation that I linked to, has h^4 in it! I read h^3 there. So... I believe your implementation is correct, however, their's is therefore likely to be wrong. Would you be so kind as to enlighten me on this, please? How do you count h^4 in their implementation: http://webstaff.itn.liu.se/~stegu/simplexnoise/SimplexNoise.java?", "filipesaz, 2020-02-01Please count again.", "The given implementation says: t0 *= t0; n0 = t0*t0*dot(...); Meaning: h=h*h; n=h*h*dot(); Therefore n0 = (t0 * t0) * t0 Which means your h*3.", "The implementation of the paper at http://webstaff.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf also features the same exact t0.", "I cannot argue with you if it should be h*4 instead of 3, because for that I would have to really understand the algorithm, which I don't at this point, but I am sure to count h*3 in these given implementations.", "So please, I encourage you to double-check.", "Regards.", "iq, 2020-02-01Hi filipesaz, the shader is correct. It's h^4 for simplex noise, even in the implementation you link to.", "filipesaz, 2020-02-01By comparing your code with the one at http://webstaff.itn.liu.se/~stegu/simplexnoise/SimplexNoise.java, I believe the code line 40 should be vec3 n=h*h*h*vec3(... instead of vec3 n=h*h*h*h*vec3(.... Therefore you have got one extra multiplication by h which results in a washed-out noise.", "iq, 2019-05-06Indeed", "tpfto, 2019-05-04As noted by antovsky, that particular attempt at cleverness is troublesome at the diagonals. Better to do it straightforwardly at the outset: float t = step(a.y, a.x); and then do vec2 o = vec2(t, 1.0 - t);", "antovsky, 2019-03-11Never mind, found a fix here (for those spotting the same issue):", "https://www.shadertoy.com/view/Mdy3DD", "", "In the case of this particular shader, can add this after line 38:", "o.x = 1.0-o.y;", "antovsky, 2019-03-11Super useful to have a clean reference implementation of this...", "If you zoom it in (multiply uv by 0.25 for example), there are fine grain shimmer artefacts that show up on the y=x diagonal (or perhaps all simplex boundaries?). This is really obvious if you slide the noise with time...", "Does anyone have any idea where these come from? It seems to be something with the first few lines of the noise, but I can't pinpoint it :\\", "huttarl, 2018-06-11@mitja Not in the same way. The shader you linked to does 3D simplex noise, where time is the 3rd dimension. This one is 2D simplex noise.", "mitjaprelovsek, 2018-06-09Is there any way to animate this? Similar to https://www.shadertoy.com/view/XsX3zB?", "", "Thanks!", "huttarl, 2017-01-17I would love to see the noise() function commented so it was easy to follow.", "huttarl, 2017-01-17@ollj, I think you mean the other way around ... regular gradient noise (e.g. perlin noise) gets exponentially more complex with a higher number of dimensions (O(2^n)), while simplex noise is only polynomially complex (O(n^2))... see http://staffwww.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf", "ollj, 2016-09-15i think simplex noise is better than perlin noise up to 5-dimensional space,  in higher dimensions simplex noise becomes less efficient.", "\"better than\" in a sense of \"less coputational complex\" AND \"more seamless tiling | less patterns |better average\"", "", "simplex noise gets exponentially more complex in higher dimensions.", "in higher dimensions tiling & averages matter less, as it scatters when you fold it down to less than 4 dimensions. this is why perlin noise may still be \"better\" in 6  or more dmensions, mostly because you dont notice its simplifications in higher dimensions.", "nikat, 2013-07-03https://www.shadertoy.com/view/XsX3zB", "Zelex, 2013-07-02For example, here is an implementation of 3d simplex noise. Its much more complicated than I feel it should be. https://github.com/ashima/webgl-noise/blob/master/src/noise3D.glsl", "Zelex, 2013-07-02Definitely want to see a 3D version. Implementing simple 3D simplex noise appears to be tricky from other source samples I've seen on the 'net.", "nikat, 2013-06-17also 0.5 on line 28 is tricky :-)", "it should be equal to the square of the height of a triangle", "the side of triangle is sqrt(2/3)", "hence H=side*sqrt(3)/2 = sqrt(1/2)", "hence H*H = 1/2", "nikat, 2013-06-17ops, i just meant:", "2*sqrt(1/2)*sqrt(1/6)*(1/3)*(1/3)*(1/3)*(1/3) = 1/( 81*sqrt(3)/2)", "nikat, 2013-06-17to w23:", "line 32: 70 ~= 81*sqrt(3)/2", "it's because maximum nx+ny+nz can be reached on the center of a side of a triangle", "where h will be equal to vec3(1/3, 1/3, 0)", "max(|hash(...)|) = sqrt(2)", "|a| = sqrt(1/6)", "|b| = sqrt(1/6)", "max |n.x+n.y+n.z| = 2*sqrt(1/2)*sqrt(1/6)*(1/3)*(1/3)*(1/3)*(1/3) = 81*sqrt(3)/2", "other values are empiric, afaik", "CPU, 2013-05-16thanks. would love to see the 3D version of this function!", "w23, 2013-05-15Neat! But what do numbers on lines 10, 11, 13 and 32 mean? Are they empirical, or there's some logic behind them?", "AlexJC87, 2018-07-29I find the Julia Quarternion shapes incredibly beautiful! Is there a way to turn a frame into a mesh? Would be happy to compensate for help!", "mgrant8164, 2018-03-29Dangit iq... stop ruining my dreams ;)", "I tried doing this a while back, albeit very poorly and abandoned ( https://www.shadertoy.com/view/XtXBz8 )... seeing this I am quite jealous of the skill involved.", "Well done.", "Hadyn, 2018-03-28I could stare at this for hours... In fact, I think I might.", "bloodnok, 2018-03-23My daughter's first question: \"Is it sticky?\"", "jvb, 2018-03-18kobol, haha great comment", "koboldstyle, 2018-03-09Now just imagine Patrick Swayze behind you, naked.", "landon, 2018-02-24creamy", "CaliCoastReplay, 2016-07-31Everything you do is brilliant", "ollj, 2020-11-09i missed a great shader long ago.", "", "In case of compatibility issues, I made quite a few shaders more compatible", ", or even just included a compatibility core of defines, mostly for gles100 backwards compatibility.", "GCScholar, 2020-10-04Impressive", "Zi7ar21, 2020-07-30Keeps getting more and more epic", "spalmer, 2020-07-23Still minor lighting weirdness when the elevator moves, but overall it seems vastly improved.  Cool!", "kastorp, 2020-07-23@stp: yes I did!", "stb, 2020-07-23@kastorp, other than making torch lights toggleable, did you also fix the flickering? Because it's gone now!", "spalmer, 2020-07-23I madeVoxel Wireworld 3D   I'm trying to understand your toy well enough to hunt for the bug.  I'll try the water option soon.", "kastorp, 2020-07-23now you can enable/disable at runtime:", "- torch with F7", "- water flow with F8", "", "@spalmer: try disabling water flow witch surely causes some flickering (I'm maybe the only one who likes it )", "@scholarius: I implemented and approximated version of fresnel reflection index, It should reflect up to 90% when ray is near parallel. Rays from inside water are not handled (sacrificed to compilation time)", "scholarius, 2020-07-23I think the water refractopm is backwards.", "Total reflection should occur when looking out, not when looking in.", "spalmer, 2020-07-23I didn't think TORCH had any effect on it, before, but now it disables all the glowstone.  However, even with both TORCH and FIREFLIES disabled, I still get some flickering lighting near the elevator, when it moves, it seems to update something that propagates down strangely.  But may as well leave the TORCH enabled.", "stb, 2020-07-22Ack! Now I feel guilty. I really don't think it affects everyone.", "", "The larger a code base gets, the harder it is to track down possible incompatibilities. These things happen; it's something that's bound to occur when everyone has different hardware and drivers. (Shaders are troublesome, imo.)", "kastorp, 2020-07-22torch light is now disabled by default, until someone finds the bug", "stb, 2020-07-22Can confirm spalmer's finding: the flickering goes away when \"#define EXCLUDE_CACHE\" is uncommented.", "", "The behavior of the flickering reminds me a cyclic cellular automaton. It's as if something is causing the initially lighted cells to revert back to zero, resulting a cyclic effect.", "spalmer, 2020-07-22Still happening.  The only option I found that affects it is EXCLUDE_CACHE, which disables pretty much everything involving lighting, which is all done in the cache.  At 64000 characters, there's not much chance I'm going to find it.", "kastorp, 2020-07-22I've added an initialization value for torch light; maybe it could have fixed flickering, but i can't test it. If it doesn't work, I hope someone interested could help me", "scholarius, 2020-07-16nv 1660 gtx here; flickering too", "spalmer, 2020-07-16stb's right; there's something weird going on when the camera moves, the lighting isn't sync'd up properly and flickers.  I see it near glowstone underground, so it shouldn't be the moving sun.", "stb, 2020-07-15Hmm, the flickering is still present. Could be due to AMD's famously buggy drivers (though I'm not sure what GPU reinder is using).", "kastorp, 2020-07-15@stb & @reinder, i added two configurable #define:", "#define FIREFLIES", "#define PLAYER_TORCH", "I didn't disable them by default because otherwise the night is too dark; the behaviour of the first is as described by @stb, while player torch is noisy like in Minecraft. If disabling them the flickering is still present (not on my GPU), it is unwanted, and maybe caused by wrong evaluation of border voxel (max height or xy borders of buffer B)", "", "btw thanks both for your inspirational shaders... unfortunately I don't have the same accuracy", "stb, 2020-07-14@reinder, Just tried commenting out the fireflies (line 227, Buffer B). The flickering is still present.", "", "Honestly, it seems similar to how Minecraft calculates lighting on a per-frame basis. If you've ever set a torch in a large cave, you'll know what I mean: the light propagates from the light source in an octahedral pattern, but it is done over a series of frames to save computation time. This shader seems to behave in a similar manner but instead of saving the result, it is continuously refreshing the buffer in which the lighting data is stored. At least that's how it looks to me; I could be totally wrong. Or, it could be an AMD driver issue, as is usually the case :P", "reinder, 2020-07-14@stb & @kastorp, I think the flickering is from the fireflies. Looks like a bug to me, maybe it can be disabled by default?", "stb, 2020-06-03@kastorp, the flickering still occurs after commenting out line 84 on buffer B. The flickering is not especially fast, and appears to come from light emitting blocks such as glowstone. It's like a pulsing effect. I saw it in caves as well in the form of sporadic pulses emanating from different parts of the cave interior, but haven't checked again with that line commented out.", "kastorp, 2020-06-03light are of two types: sun and torches (= lamps, the player and fireflies, the last are like flashes)", "ideally a torch should light within 15 blocks distance; the sun is similar but do not attenuate vertically (at least in the air)", "sun light also cast shadows. Dynamic lighting is implemented in buffer B and C, but for distance blocks and as initial value I also added a default, based on height... that's it!", "", "the fickering should maybe be caused by player torch; to verify it, try commenting line 84 of buffer B", "stb, 2020-06-03@scholarius, yeah. I figured it was how the lighting is implemented, but I'm not actually sure.", "scholarius, 2020-06-03anyone else getting flicker lighting?", "Zi7ar21, 2020-06-02YAAAAY water fixed! Sorta... BUT STILL FIXED!", "propagant, 2020-05-31this is sick!", "saidwho12, 2020-05-27This is crazy, why.... lol", "FabriceNeyret2, 2020-05-19didn't I ?", "oops, fixed ! (on top).  thanks !", "ttg, 2020-05-19Hi Fabrice, could you add to the Compatibility Bible a link to your excellent debug kit compatibility test / enforce?  I lost track of it once and expected to find a link in that page but there is not.", "FabriceNeyret2, 2020-05-18Just a reminder of the Compatibility Bible that every and each Shadertoyian should have read :-D : https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/", "Yambam, 2020-05-18@kastorp WOW, sometimes bugs originate in the most unexpected places. Congratulations on finding the culprit!", "", "This is also double good news for me, because maybe that means some of my not-so-advanced shaders will finally not be broken anymore and start working on all computers!", "ttg, 2020-05-18Thanks for fixing it!", "kastorp, 2020-05-18good! lesson learned: always initialize fragColor", "thank you all, I will remove temporary shaders used for bug fixing", "spalmer, 2020-05-18it works!!", "42yeah, 2020-05-18@kastorp Hey it's fixed (at least on my machine)! Congratulations! Also we get cool grass and shades & stuffs now! So cool!", "kastorp, 2020-05-18@ttg: I've forced initialization of some variables, maybe it solved... it's frustrating but I can't reproduce the problem", "ttg, 2020-05-17Strange, it's still broken in Nvidia but not on Mesa/Intel.  Usually Mesa/Intel is less forgiving of mistakes like uninitialized variables or undefined behavior.  So although there is clearly some regression in the shader, since the older shader worked on all my systems, maybe it is running up against some Nvidia driver bug and not a simple code mistake.", "Yambam, 2020-05-17Wow impressive work you've done man! Keep up the good work, really loving the look of those .5*.5*.5 unit apples in the trees!", "kastorp, 2020-05-12@ttg  and  @Zi7ar21, thanks for your feedback", "Here is the original version I published some weeks ago, which should be stable https://www.shadertoy.com/view/tsXfWs", "", "I'm trying to fix the opengl bug here https://www.shadertoy.com/view/tdfBRl, with @Spalmer we dedicated an entire day without success; maybe comparing with the previous version we will find the reason.", "", "In the meanwhile, like we say in Italy: sbagliando s'impara", "Zi7ar21, 2020-05-12bruh wtf this is getting out of hand...", "when is ptgi coming lmaooooo!", "ttg, 2020-05-12This was working very well a week ago, now it's broken.  Spawns into a void, slowly bouncing downward until falling through bottom level.  But the voxel game that seems to have inspired this sometimes sometimes does exactly that, so great job making it feel authentic in that way, I guess.", "michael0884, 2020-05-11There seems to be a bug in the random tree leaves voxel generation, the seed seems to differ depending on the octant the ray is directed in.", "kastorp, 2020-05-07I created a new version compatibile with webgl 1.0", "https://www.shadertoy.com/view/tdfBRl", "", "I made some experiments:", "- chrome /Angle: same compilation time, the performance replacing textureLod() with texture() is 30% worst", "- chrome/GL: compilation time is far better (3sec), but performance are 30% worst either with Texture() and TextureLod()", "- Firefox/Angle: working only with texture()", "- Firefox/GL: working only with Texture()", "", "conclusion? there isn't an optimal choice, in my default configuration (win/chrome/angle) the original version seems the best; maybe I will add an #ifdef to maintain  versatility", "FabriceNeyret2, 2020-05-07 TextureLOD: depends how it was used (where ?). if it was just for MIPmap, just use texture().", "If it was to force either the finest or coarsest MIPmap level, add third parameter -99. or + 99.", "In webGL 1 you can just forbid/activate MIPmap or offset the MIPmap level (this third parameter).", "kastorp, 2020-05-07Thank you FabriceN, I've tried", "- with firefox (default configuration): webgl 1.0 issue with integers --> easy to fix", "- with firefox( webgl.disable-angle = true, webgl.force-enabled = true) --> issue with TextureLOD not supported... which is the best replacement?", "FabriceNeyret2, 2020-05-07set OpenGL on windows browsers: read https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/", "kastorp, 2020-05-07@xXMuffinXx: I've added in my todo list", "@spalmer: how to try it with OpenGL on windows? And in Ubuntu?", "spalmer, 2020-05-06could do ambience track though.  @kastorp hey now I'm falling through the world too!  Try on OpenGL", "spalmer, 2020-05-06@xXMuffinXx unfortunately, real time sound is not possible on Shadertoy at this time.  It can prerecord a sound buffer, but the sound is not interactive in any way.", "xXMuffinXx, 2020-05-06Just awsome. I wonder if it is possible to generate sounds like in other voxel games.", "flockaroo, 2020-05-04pressing y just makes it look a bit different, but its clipped all the time regardless of y...", "kastorp, 2020-05-04@flackaroo: it happens sometimes if you press Y in caves... i will remove this feature, or at least disable  with some #ifdef.", "I have many ideas, in order to have reasonable compilation time i will publish updates with only core features enabled, and let the user enable the others", "Zi7ar21, 2020-05-04insane", "flockaroo, 2020-05-04hmm weird, something seems broken... a square region around the character is clipped (but from inside - so i only see voxels from a certain distance on). i know that did work before...?!", "Zi7ar21, 2020-05-02oh my gosh", "flockaroo, 2020-04-29awesome stuff!", "spalmer, 2020-04-29I don't understand why in fullscreen mode, holding down the mouse button to look around causes the draw distance to decrease over time", "jerrypoiu, 2020-04-29god?", "kastorp, 2020-04-29yes the fog is too dense... I need to make it more realistic", "spalmer, 2020-04-29I kinda dig the clouds but makes the sun a bit weird.  Pyramids?!", "michael0884, 2020-04-28This is getting closer and closer to actual minecraft, wow", "GregRostami, 2020-04-28OMG Remarkable!!", "stb, 2020-04-28@kastorp: Glad it's back up! It's looking better than ever  (Helps to keep text backups just in case...)", "", "@jorge2017a1: What a bummer!", "spalmer, 2020-04-26Maybe I should really fork this, this time, before it gets lost again! lol", "spalmer, 2020-04-26indeed, tyvm for the bugfix, I know it was a heinous one, the fix almost killed the patient", "kastorp, 2020-04-26up again! thank you very much  for the support", "it is interesting that the restored version contains the fix i was saving... just  a change in line 309 of  Buffer A", "jorge2017a1, 2020-04-26Message or not, start the year with a horrible and ugly virus, on My PC or PC ... and I lost 3 months of work or 4 months ... so my hard drive lost ... without being able to repair. Coincidence with the VIRUS COVID19.", "........", "Mensaje o no, inicie el a\u00f1o con un virus espantoso y feo, en Mi PC o COmputadora ... y perdi 3 meses de trabajo o 4 meses .... as\u00ed que mi disco duro perdi... sin poder reparar. Casualidad con el VIRUS COVID19.", "poljere, 2020-04-26We are looking into this issue.", "jorge2017a1, 2020-04-26It's the VIRUS SHADER ....", ".........", "Es el VIRUS SHADER ....", "FabriceNeyret2, 2020-04-26funnily the forum work, but not fork/export and base display unfinished. I'm pretty sure the shaderload JS function did not returned, because of some corrupted data (can sometime be a small thing).", "FabriceNeyret2, 2020-04-26it's not empty, it's stuck in a strange state (even title and author don't display).", "The code might still be there.", "-> ask info@shadertoy.com", "jorge2017a1, 2020-04-26The file was deleted or what happened; in that case I made a copy ... but since I have many files I need to search ... but I think it is not necessary", "..........", "Se borro el archivo o que sucedio;  en dado caso yo hice una copia ... pero como tengo muchos archivos necesito buscar ... pero pienso que no es necesario", "spalmer, 2020-04-26Too harsh for that, but appropriate punishment for failing to make a backup.  One good thing did come of it, though; you reminded all of us to go to profile, click Download All Shaders...", "kastorp, 2020-04-26It was the right punishment for freezing the browser of all site visitors for one week!", "42yeah, 2020-04-26Oh my god... I am sorry for your loss!", "kastorp, 2020-04-26all code data were erased... I have added the backup link in the description. Hope the site admin can restore from here  https://www.shadertoy.com/view/tsfBzM", "spalmer, 2020-04-26omfg I'm glad you had a backup!", "kastorp, 2020-04-26there was a connection error while saving and now the code is empty", "I'm restoring from a local backup", "spalmer, 2020-04-26Now the map starts toggled \"off\"", "42yeah, 2020-04-26I was stacking myself up, then I suppose I passed a certain threshold and the whole scene went crazy. But this is amazing!", "kastorp, 2020-04-25fixed. I added a changelog too", "FabriceNeyret2, 2020-04-25problem of keyboard encoding ?  ( azerty, qwerty, etc )", "kastorp, 2020-04-25Thanks, I like it too. Now I made towers replicated every 80 block at the horizon!", "Don't know why the M key was broken, Ithe editor doesn't help with large files", "", "One thing I've noticed is every single line of code I add in generatedVoxel()  increases compilation time by 1 second, so I'm touching it the minimum", "spalmer, 2020-04-25Love the elevator.  M to toggle map doesn't work?", "kristoflovas, 2020-04-25I see little to no difference on memory usage (both gpu and system memory) when I have this open and running", "kristoflovas, 2020-04-25Its back to a rock solid 60 fps now. The low res one was giving me the bad performance, which was the default setting when I wrote the last comment. I see its also back to highres by default.", "", "Amazing stuff by the way.", "kastorp, 2020-04-24I added buffer D to allow resolution downscale on GPUs with low performance. Maybe now it's using too much memory  on high resolutions. Sorry... I'm not expert!", "kristoflovas, 2020-04-24gpu utilization is 5 % so something strange is going on.", "kristoflovas, 2020-04-24Hi. Saw this a few days ago, and it had great performance, except the extreme compilation time. Now I can back to see it again, and getting like 7 fps on a rtx 2080 ti, while earlier it was much better. Can't remember the exact number but it was definitely more than 30.", "KdotJPG, 2020-04-24Nice! I like that you used Simplex noise and not Perlin or Value. It's much less square-aligned visually. Simplex should be everyone's default choice before considering other noise algos IMO. Tip, for caves: Take two snoise evaluations (offset enough vertically to hide similarities) and do valueA^2 + valueB^2 < 0.02 ? cave : nocave. It carves out round-ish tunnels with some interesting variation in parts. Change the threshold (0.02) and frequencies, and maybe add a second octave to one or both if desired.", "", "Also for anyone wanting to use Simplex noise 3D for texturing (rather than world gen) in the US, I've put out this algo: https://www.shadertoy.com/view/wt3GRf (Named OpenSimplex2F in other places). It could use optimization (particularly in the gradient picker), but it's functional and addresses the same issues in Perlin/Value that \"real\" Simplex does.", "kastorp, 2020-04-24I replaced the Ashima Snoise function with the optimized version. It was not immediate, I had to tune the output  (https://www.shadertoy.com/view/tdXfzH) . Compilation time is similar, but performance are better!", "spalmer, 2020-04-24@Tynach I thought about it, sure, but first better chunk saving so taking a few steps doesn't destroy your hard work!", "Tynach, 2020-04-24Next you need to add Redstone circuitry ;)", "iq, 2020-04-24Thanks kastorp for the rapid reaction. It only takes 5 seconds to compile now for me, but better. I still think a simple 3d noise texture lookup would do great in this shader, but at least 5 seconds is much shorter. Thanks a lot!", "spalmer, 2020-04-23BufferC: just discard all the non-animated textures after iFrame 10 or so.  Only recompute the animated part of the atlas.  For faster downscaling; seems yeah another buffer would be necessary,  You could re-use the unused part of BufferC maybe.", "kastorp, 2020-04-23ok!  for bufferC i will implement discard when all the crack textures are loaded, or maybe i will eliminate  the buffer and replace it with funtions in common.", "the downscale works but the framerate is identical, I would like to emulate the ALT+2 action of the plugin but I think that it's possible only using a dedicated buffer", "spalmer, 2020-04-23BufferC:  MC and others make several progressively more destroyed variants of crack texture as a decal/overlay, and don't modify any textures.  Downscaling:  sure, just \t    float pixellate = 4.; // some factor of iResolution", "vec2 pixFragCoord = (floor(fragCoord / pixellate) + .5) * pixellate;", "vec2 uv = (pixFragCoord.xy - renderCenter) / renderResolution - (renderCenter/zoom);", "on line 443 instead of current uv", "kastorp, 2020-04-23regarding getVoxel, the names were confusing so I renamed them; actually bufferA and bufferB use getCachedVoxel() which reads bufferB and has no issues", "", "regarding BufferC, I would simplify it but there is the animation when key E is pressed", "", "in the original version there was buffer D to downscale resolution by 2, I tried to do it directly in Image but I wasn't able, the output was always distorded; do you think it is possibile?", "spalmer, 2020-04-23Just realized there's a bunch of getVoxel in BufferA for the collision, same deal there probably.  I think you could get away with using getHit there instead of getVoxel, always load from the buffer instead of involving snoise.", "spalmer, 2020-04-23Since it doesn't animate or change once initialized, I think you can get away with something like this to optimize your texture atlas in Buffer C, at start of mainImage:      if (iFrame > 2 && iChannelResolution[1].x > 0.) discard;", "spalmer, 2020-04-23Your main rayCast is already using a value loaded from texture, so that's fine as is.  I think.", "spalmer, 2020-04-23There may be other places in the code which may also be candidates for this kind of optimization.", "spalmer, 2020-04-23glad you solved it; I'm surprised it's helping as much as it is, considering your loop indices aren't referencing any uniform data to prevent unrolling; compiler should probably inline all that anyway unless you add in min(iFrame, 0) or some other uniform.  But if it helps, it helps!  Every little bit helps.", "kastorp, 2020-04-23solved... infinite loop! now it takes 1/3 of the time", "kastorp, 2020-04-23thank you spalmer, i tried to replace code with this, but the GPU crashes! what did I wrong?", "", "voxel v[9];", "for (int i =-1; i <=1; i++) {", "for (int j =-1; i <=1; j++) {", "v[4+ i+3*j]=getVoxel(r + s* float(i) +t*float(j));", "", "}", "}", "", "v1 = v[6];//getVoxel(r - s + t);", "v2 = v[7];// getVoxel(r + t);", "v3 = v[8];// getVoxel(r + s + t);", "v4 = v[3];// getVoxel(r - s);", "v5 = v[4];// getVoxel(r);", "v6 = v[6];// getVoxel(r + s);", "v7 = v[0];// getVoxel(r - s - t);", "v8 = v[1];// getVoxel(r - t);", "v9 = v[2];// getVoxel(r + s - t);", "kastorp, 2020-04-23Thanks iq! first of all... you are a genious! I like this site, your videos, etc..", "", "I knew there was something bad in the snoise function, infact  my sandbox version (https://www.shadertoy.com/view/WdffRn) is almost identical and takes 2 seconds to compile", "", "I will replace snoise function asap, when I find an example code", "iapafoto, 2020-04-23Super impressive work", "spalmer, 2020-04-23Seems there are many calls to the snoise function indirectly through getVoxelData, and each one gets inlined and optimized.  So yeah, the result will contain many many copies of the same snoise code, as written, anyway.  Only takes 4.7 seconds to compile for me though.  Could try putting the getVoxels in e.g. calcLightingFancy into a loop, filling an array, instead of 9 loose calls.  That sort of thing might help if using uniforms on the loop variable to prevent inlining.  I don't have any other suggestions atm.  I bet snoise could be optimized somewhat, and the precise noise is likely not very important, could use a noise texture probably but idk if that would run faster.", "iq, 2020-04-23Hi, nice shader.", "", "The shader takes 16 seconds to compile, freezing the browser for that long. The problem is snoise(vec3) which overexpensive. With a simpler versoin of a 3D value noise the compilation times goes down to 1 seconds. Would you mind replacing it with a better and shorter noise function? Thanks!", "morisil, 2020-04-23This is insane!", "kastorp, 2020-04-23For those interested,  I created a sandbox version with the minimal logic", "", "https://www.shadertoy.com/view/WdffRn", "catafest, 2020-04-23Game ... Minecraft ... , good example !", "poljere, 2020-04-23Amazing.", "stb, 2020-04-23Ah, pressing the mouse button first does work!", "", "Btw, there are much better particle systems out there than mine", "spalmer, 2020-04-22The edits are extremely local, no chunk saving, but I'm impressed that there isn't any limit to the map.", "spalmer, 2020-04-22I reduced the frequency of fireflies and find them more tolerable. Holding down mouse first then pressing button works.  I want to fork this shader so bad!", "ocb, 2020-04-22Impressive work! Code not so big...", "spalmer, 2020-04-22This is awesome!  The original was pretty awesome but damn!  I can't get placement to work, but otherwise it's great.  I've been thinking about making an interactive circuit-builder or even some kind of immersive programming language, I just may start with something like this.  Muwahaha.  The fireflies are ... interesting but kind of annoying.  Took me a bit to realize what they were.", "kastorp, 2020-04-22Hi Stb, to place/destroy a block you should hold the mouse clicked, and then press Q or E. I would like to change this behaviour with mouse double-click, but I didn't find an example code yet.", "", "By the way, I found your shaders very interesting, I would like to implement some moving particle logic in \"Buffer B\", like worms or bats", "FabriceNeyret2, 2020-04-22added to the list of shadertoy games ! https://shadertoyunofficial.wordpress.com/2017/11/11/playable-games-in-shadertoy/", "kastorp, 2020-04-22thank you FabriceNeyret2, I saved while testing with F4 the \"BUFFER B\" dump.", "I month ago I didn't know the existence of Shadertoy... I'm learning day by day!", "FabriceNeyret2, 2020-04-22indeed the generated preview is wrong. Hint: it is a window dump at the moment shader's author save his shader. So easy to regenerate and control, but just have to think about it at each update.", "stb, 2020-04-22Oh, and when browsing shaders the preview image  doesn't show what this really looks like. This is what I see:", "stb, 2020-04-22Very good! But is block placement & destruction broken? Nothing happens on my end, except the block cursor blinks.", "", "Anyway, this is very impressive", "jorge2017a1, 2020-04-21The stage is very good .... it's like a Game ... OK", "..........", "El escenario es muy bueno....es como un Juego...BIEN", "jorge2017a1, 2020-04-21Now yes, it looks much better ... more beautiful ... Very good", ".........", "Ahora si, se mira mucho mejor...mas bonito..Muy BIEN", "julianlumia, 2020-04-21woww impressive!", "kastorp, 2020-04-21Thank you Jorge2017a1, try pressing F6 for better performance", "FabriceNeyret2, 2020-04-21welcome to the gang !", "impressive start ! :-)", "zproxy, 2020-04-21good work. can you make a version for ace of spades?", "jorge2017a1, 2020-04-21the code is good ..... But, the manipulation with the mouse is difficult, the shader looks a bit dark .... and it is not easy to manipulate in general  ....", ".......", "el codigo es bueno.....Pero, la manipulacion con el mouse es dificil, el shader se mira un poco obscuro....y no es facil manipular en general", "kastorp, 2020-04-21I would add more features but I have compilation issues... I'm still newbie!", "Saturos, 2019-10-10Mesmerizing!", "jorge2017a1, 2019-06-23ya lo dijeron se parece a color de pelo.....bien!!!", "Daimoth, 2019-02-01That's quite a lot of blonde hair.", "CPU, 2013-06-15another gem from da man!", "iq, 2013-06-13Yeah. Differentiating (taking a curl, basically) it's an expensive way to get a divergence-free vector field, so I construct one directly by using polar coordinates. Line 53 is just a fake thing to get is some volume for lighting, it's not really a heightfield per-se, but it does the trick.", "fizzer, 2013-06-13Cool! You went in a rather different direction than the one I took. This looks very natural, like flowing fur on a creature. You also compute the directions directly rather than use forward differencing on a heightfield, and in fact you are extracting a sort of heightfield after the blur! (line 53)", "msm01, 2022-11-11This one always makes me think of riftia worms. Must be the color and slow motions...", "Akashbro120, 2020-10-13fs", "lz, 2020-10-08Wow . So beautiful", "marcelfernandez13, 2020-10-08Love it", "Markant, 2020-10-08amazing.", "GCScholar, 2020-10-07Fantastic!", "iq, 2018-11-30No, no global illumination here. Actually there are no lights, just some fresnel based color variation and proximity obscurance", "slfanta, 2016-02-02Is G.I. used here? looks way better than phong shading", "sauj123, 2014-09-24This shader crashes on my linux computer .", "PauloFalcao, 2014-09-13I love it!", "TDM, 2014-08-29so organic", "iq, 2014-08-27Sure. Done that.", "nimitz, 2014-08-27Beautifully rendered, I feel a bit of normal mapping would go a great way to making it look more live-like.", "", "Also, are you using multiple consts in the normal function for clarity? Because the same code is generated than by using a single const.", "CeeJayDK, 2014-08-27Also looks a bit like hair or rope strands", "Flyguy, 2021-06-24All seems to work fine here (Win10, GTX1060, Angle).", "My best guess is a keycode mapping issue as the keyboard texture keycode -> ascii mapping varies based on layout/language/manufacturer.", "This may cause non-printable characters to be sent to Wozmon/Basic which they can't handle. (Fabrice had this issue a while back).", "@iq Are you pressing shift/altgr as you're typing? If so, what scan codes do you get for shift/altgr?:", "https://keycode.info/", "FabriceNeyret2, 2021-06-23working correctly on Linux.", "still, 77\" compilation time ( so sometime compil abort )", "iq, 2021-06-23Actually, none of the commands that I try work (storing a value, reading values)", "iq, 2021-06-23I try running basic (address E000) but it says \"SYNTAX ERR\"", "hubbe, 2020-03-12guess I need to update my C64 simulator now.", "flemmingdjensen, 2020-01-11Crazy stuff! Mush have taken sooo many hours to develop 8)", "Flyguy, 2019-12-07@userse31 When the shader loads do you see a backslash with a blinking cursor under it? What do the numbers in the top right say? There's a chance the emulator may be crashing due to a bug with your GPU drivers. This happens on my phone, the shader compiles and runs but the program in the emulator crashes.", "userse31, 2019-12-06i cant type anything", "FabriceNeyret2, 2019-11-24But 3D0G doesn't work. So disappointed !", "( ok, it was for Apple ][ :-D )", "GregRostami, 2019-11-24https://downloads.reactivemicro.com/Apple%20II%20Items/Documentation/Books/Beagle%20Brothers%20-%206502%20Instructions.png", "GregRostami, 2019-11-24EPIC!! I have to remember my 6502 Assembly and try a few small programs.", "I'll have to reference my handy, dandy, Beagle Bros 6502 Instruction sheet:", "https://downloads.reactivemicro.com/Apple%20II%20Items/Documentation/Books/Beagle%20Brothers%20-%206502%20Instructions.png", "saidwho12, 2019-11-16Yeah I realized a bit later...", "FabriceNeyret2, 2019-11-16backspace does work. Only the display is not updated... as on the real Apple I.", "saidwho12, 2019-11-16One bad thing though please allow me to delete my mistakes with backspace.", "saidwho12, 2019-11-16I was building actually a Minecraft redstone simulator on shadertoy with a GUI system and everything, but this is just witchcraft dude hahahaha.", "Angramme, 2019-11-15why, why in a shader form??? it runs so slow, use c++ or any other programming language! You are crazy! This is sorcery! I don't even know!", "Flyguy, 2019-11-03@Dave_Hoskins", "The reason backspace doesn't delete characters is because it's emulating the behavior of the Apple 1's terminal circuitry which was fairly bare bones as it was built from discrete TTL logic chips and used shift registers to store the characters rather than RAM to reduce cost.", "Dave_Hoskins, 2019-11-02@Flyguy, OK got it, it's just a matter of counting, but why doesn't backspace delete chars? After making such an amazing shader, I would have thought you could do that bit?", "FabriceNeyret2, 2019-11-02BTW, we are discussing about it in the Facebook Shadertoy community group, where it impress people ;-) https://www.facebook.com/groups/147749602472741/permalink/506610796586618/", "Flyguy, 2019-11-02It appears to be faster than a real Apple 1 but this is because the terminal is \"overclocked\" accepting 40 characters per frame whereas the Apple 1's terminal could only handle 1 character per frame.", "The CPU is actually quite a bit slower than a real Apple 1, it's currently set to 600 instructions per frame (36KHz @ 60fps) which is roughly equivalent to a real 6502 running at 0.072MHz (2+ cycles per instruction).", "", "At 60fps, it would need ~8333 instructions per frame to be about equivalent to a real 6502 clocked at 1MHz.", "Closest I can get with my GTX1060 is ~0.86MHz which is close, I'm sure a better GPU could pass 1MHz.", "This is just the max speed though, the cache size limits the memory bandwidth which the CPU has to slow down to compensate for depending on the ram usage of the program currently running.", "FabriceNeyret2, 2019-11-02keymaps:  and just wait for Apple & Smartphone users to wake up, to be combined with langages :-p", "( optional virtual keyboard could be a backup solution, but again, a lot of coding out of the pure emulator concept ).", "", "Now I'm curious: at the end of the dayt, is the simulation slower or faster than an Apple I ?", "Or do you really treat only one single ASM (or microcode) instruction per frame ?", "FabriceNeyret2, 2019-11-02( note that for loading/saving either the Basic code or the whole state+memory there would be solutions like this https://www.shadertoy.com/view/Wsy3DG, but it may bring you too far :-) ).", "Flyguy, 2019-11-02@Dave_Hoskins", "The qwerty layout is based on US QWERTY, looks like I'd need a mapping table for each possible keyboard layout for this to work consistently.", "", "I added a note to the description about backspace, it was a limitation of the Apple 1's terminal.", "It does work but it just can't visibly delete the characters on screen.", "FabriceNeyret2, 2019-11-02@Flyguy :azerty now working, great !   we now just miss a way to save and load our programs. Think of implementing a modem ? :-p  ( to bad text copy-past from exterior doesn't work, BTW )", "", "@Dave_Hoskins:  already answered below:  BS does work, you just don't see the chars disappear.", "Dave_Hoskins, 2019-11-02I'm on a British Qwerty layout. I've found \" on the shift-# key next to return (which is wrong for UK keyboards), but how do I delete things?", "Flyguy, 2019-11-02@FabriceNeyret2", "I found the issue, my keyboard scanning code was sending the shift/alt keys as non-printed ASCII chars which caused Wozmon to misinterpret the address. Should be fixed now.", "", "I also changed the way the keycode remapping is done, now the array only contains the keys to be remapped and also supports AltGr.", "I haven't updated the AZERTY mapping yet though, it still has the mapping you provided previously.", "spacewarper, 2019-11-02This is crazy. Thanks for sharing.", "FabriceNeyret2, 2019-11-02strange: E000R does not work with layout1 (returns 000E: 00 0000: 00@).", "but if I switch to layout1 only after, it's ok.", "", "BS: oh yes, great !", "Flyguy, 2019-11-01@FabriceNeyret2", "The backspace key is mapped, however the Apple 1's terminal hardware didn't support it, Wozmon/Basic make up for this by printing \"_\"s to indicate backspaces. So even though it doesn't visually remove the characters, it does work.", "", "Arrow keys have the same issue, the terminal hardware didn't support it, so even if I added it in it wouldn't work with the existing software.", "", "I added in your mappings for AZERTY as a define in the common tab.", "It would be nice if the keyboard texture had some way of providing the ascii characters directly though, needing a table to map the keys for each layout isn't great.", "FabriceNeyret2, 2019-11-01in addition to backspace, would be cool than left/right arrows work ;-)", "FabriceNeyret2, 2019-11-01Here is the AZERTY mapping:  may you please propose these via a #define ?", "...", "0x3040,0x3126,0x327E,0x3322,0x3427,0x3528,0x362D,0x3760,0x385F,0x395E,0x3A40,0x3B3B,0x3C3C,0x3D3D,0x3E3E,0x3F3F,", "...", "0xB0B0,0xB1B1,0xB2B2,0xB3B3,0xB4B4,0xB5B5,0xB6B6,0xB7B7,0xB8B8,0xB9B9,0x0024,0x2B3D,0x3F2C,0x5F2D,0x2E3B,0x2F3A,", "0x255B, ...", "0xD0D0,0xD1D1,0xD2D2,0xD3D3,0xD4D4,0xD5D5,0xD6D6,0xD7D7,0xD8D8,0xD9D9,0xDADA,0x5D29,0x3E3C,0x5D29,0x2227,0xDF21,", "", "", "Mapping is imperfect because on azerty various programming keys are on AltGr rather than shift, plus shadertoy give the same keycode for different keys.", "-> #, | { } are missing.     [ mapped on \u00f9", "", "backspace doesn't seem to work.", "", "for several keycode I didn't found a corresponding key. ( e.g.  BD ,  DD, DE ).", "FabriceNeyret2, 2019-11-01Now, to use a little bit of all the shader parallelism, what about having 1000 Apple I running in parallel ? :-p", "reinder, 2019-11-01Super cool!", "FabriceNeyret2, 2019-11-01wooooow, so greatly coooool !", "But yes, very painful on AZERTY. I finally discovered \" mapped on PageDown and $ mapped on Begin. ;-)", "Do you have any way to implement the Delete key ? Or it should already br mapped somewhere ?", "soundmasteraj, 2020-12-18Amazing!  both in theory and execution", "jorge2017a1, 2020-11-23@ollj,", "Thank you ollj for giving that information, .... but the truth .... I did not understand much .... I am going to look for a video on youtube, to know a little more about this .... that it explains with points .. ..and commas what it is for, ... also a little more reason for using that function ..... because there is a solution .... but I don't know where the problem arose or originated .... hahahaha", "..........", "Gracias ollj por dar esa informacion, .... pero la verdad .... no entendi mucho .... voy a buscar un video en youtube, para saber un poco mas de esto .... que explique con puntos ....y comas para que sirve, ... ademas un poco mas la razon de usar esa funcion ..... porque existe la solucion .... pero no se donde surgio o nacio el problema .... jajajajaja", "ollj, 2020-11-23lets not link to a google search, but to a relevant match on what dFdx does", "ollj, 2020-11-23the derivative estimate functions are documented here:", "https://www.google.com/search?client=firefox-b-d&q=dFdx+opengl", "\"partial\" derivative just means, it calculates the rate of change over one (of many) domains (x or y axis), and not over multiple domains.xy at once.", "", "The (first) derivative is, the rate of change at a point (calculus), slope steepness.", "openGL estimates it by comparing the change of the values left and right of it (usually in a lower resolution)", "", "most common use of a first derivative (in 3d) is to measure the normal of a surface, defined by a signed distance function.", "dFdx() dFdy() are only in 2d screenspace.", "a common use here is to adjust the thickness of a line by the slope of a line.", "but you can also use them to filter or motionBlur.", "", "A very general implementation of derivatives is to calculate them precisely, which is often relatively cheap, by defining functions via chain rule, consteructing a set of [Derivative Arithmetic], via automatic differentiation", "jaybird, 2020-11-23I converted a tri-planar shader to this technique and none of the artists noticed.  (~9 years ago.) There's an artifact at the corner but it's very difficult to find in most content, e.g. irregular terrain.", "jorge2017a1, 2020-11-19The new mapping method you apply seems efficient ... but this of using the derivatives function ... seems something magical or something very hidden ... I really don't know what the derivatives function does ... ..and when to use .... you know well ... but I have no idea .... jijijijij  .... well we'll see if it is faster and faster than other functions .... thanks for share new techniques !!!! .... it looks good !!!!", "..........", "parece eficiente el metodo nuevo que aplicas, de mapeo .... pero esto de usar la funcion de derivadas .... parece algo magico o algo muy oculto .... la verdad no se que hace la funcion de derivadas ... ..y en que momento usar .... tu sabes bien ... pero yo ni idea .... jijijijij  .... bueno ya veremos si es mas veloz y rapido que otras funciones .... gracias por compartir nuevas tecnicas !!!!....se mira bien!!!!", "FabriceNeyret2, 2020-11-19BTW it's still pretty nice effect even on the bark texture.", "FabriceNeyret2, 2020-11-19Oh, I see that you rely on very short transition (pow k, with k = 8 ), which is ok for high-freq dominant textures.", "that's probably why we don't see artifact.", "Also, you could probably use only 1 fetch most of the time (replacing pow with a finite-support func ).", "", "domain visualization:", "x *= vec4(1,0,0,0);", "y *= vec4(0,1,0,0);", "", "", "x[ma.y] = x[ma.z] = 0.;", "y[me.y] = y[me.z] = 0.;", "Shane, 2020-11-19That's pretty cool. I'd often wondered whether there was a routine out there that could do this.", "FabriceNeyret2, 2020-11-19but then there should be a sudden 2-voronoi like discontinuity when we swap between 2nd and 3rd closer direction, the worst being when first is close to 50% . where is it supposed to appear here ?", "\u2192 could you please let appear used maps as color when pressing space key ?  + let user control camera view (demo motion only if imouse==0) ?", "Now, I  understand that on very noisy & stationary textures secondary discontinuity might not be very visible.", "Shane, 2016-09-05@CaliCoastReplay", "Apologies for the late response. I no longer own the address I signed up with, so don't receive site messages.", "", "It helps to know what things the GPU likes and doesn't like, but I tend to find that the same old optimization principles used back in the software engine days still apply, like minimizing instruction count in the most used functions. Back in the day, a lot of effort used to be put into things like triangle routines, then minimizing the number of times you called them via culling methods.", "", "In this particular case, it helps to optimize the distance function, then try to minimize the number of calls to it by tweaking the raymarching loop. The particular surface rendered here doesn't involve too many instruction and is relatively easy to hone in on. In addition, the surface-hit epsilon has been relaxed, which effectively decreases the number of distance function calls even further.", "", "On top of that, the finer surface details have been taken out of the distance function altogether and bump mapped instead. It looks roughly the same, but involves far less work... In the end, if you save a few instructions here and there, it begins to add up.", "CaliCoastReplay, 2016-08-10How are your shaders so performant in fullscreen?", "Vlad86, 2016-06-08Awesome shader!", "reekchaa, 2016-06-04Great code!", "DennisPP, 2016-05-31This is really COOOL!", "zackpudil, 2016-03-11Very cool .", "TambakoJaguar, 2015-12-20Wow, really well done!", "jt, 2015-12-17Cool!", "Shane, 2015-11-19@BalintYYY", "", "I'll assume you're asking whether this is a rasterized polygon mesh, or whether it's raytraced. This particular structure was raymarched, which is a form of raytracing.", "", "With the benefit of precalculation, you could definitely polygonize it and rasterize that way - by feeding the isosurface into the \"Marching Cubes\" algorithm... or some better technique I'm not thinking of at present. In fact, based on past experience, it'd be way faster to push out triangles, even at that level of detail. However, the method is nowhere near as elegant.", "BalintYYY, 2015-11-18Is it raytracing, or rasterization?", "fnord, 2015-11-18Imagine actually being there!", "Shane, 2015-11-17I've just noticed this was made \"Shader of the Week.\" There are far more worthy shaders on this site, but I still feel honored.", "", "By the way, the \"map\" function is worth playing around with, for anyone who's interested. You can make some pretty interesting, and reasonably cheap, structures with it.", "vgs, 2015-08-27I'm glad you joined us on Shadertoy! Your shaders are great!", "Dave_Hoskins, 2015-08-27It's ready for the concrete pour!  Good work, and great code comments.", "tholzer, 2015-08-27Wouldn't that be a real good \"Heavy Metal\" construction for a SciFi movie ? And it will never get rusty ...", "In any case - a wonderful construction!", "P_Malin, 2015-08-26Nice lighting and materials, it looks really solid.", "poljere, 2015-08-26Cool!", "BigWIngs, 2015-08-26Sometimes I wonder what kind of macro scale material properties you could get if you could make a structure like this on the micro or nano scale.", "", "It would be super strong and super light.", "It would also probably oxidize pretty fast though.", "public_int_i, 2015-08-26Thanks for the nice explanation of the map function!", "BigWIngs, 2015-08-26Looks really cool and it renders fast too. Thanks for sharing!", "anthonyiye, 2021-03-29mm good gloopy", "kevs3d, 2020-07-02One of the most elegant looking shaders here - very pretty", "jt, 2017-12-15gooey :-D", "darkshader, 2017-12-12did Anyone succeed in converting this cool shader to touch designer?", "before I even try myself. then everything becomes possible.", "dsan, 2017-12-05color = smoothstep(-0.025, 1.0,color);", "", "// for a sweet Instagram filter effect:", "color.r = color.b;", "color.b = .53;", "color.rgb *= 1.2;", "", "color = pow(color, vec3(1.0/2.2));", "", ":P", "dsan, 2017-12-05Fantastic!", "Virgill, 2017-12-05Like! <3", "flockaroo, 2017-12-03thats really pretty! and it looks kind of procedural, but it seems it isnt...", "Shane, 2017-12-03I like this. Very pleasing to the eye.", "", "I'm always on the lookout for cheap functions that emulate SSS, and your \"subsurface\" function seems to work nicely... I haven't tried it on other surfaces, but it works well here. I like it the way it looks already, but replacing \"d = normalize(v - n)\" with something like \"d = refract(v, n, 1./1.5)\" could add some subtle variance by bringing some light bending into play.", "iq, 2017-12-03woooooooow, this is super super cool!", "aiekick, 2017-12-02", "coyote, 2017-12-02Beautiful!", "Duke, 2017-12-02Nice!", "ray7551, 2017-12-02This is what i get in chrome:", "Dave_Hoskins, 2017-12-01Silllkyyy....", "PauloFalcao, 2017-12-01I love it!", "mantra, 2017-12-01Awesome.", "moradin, 2017-12-01Thanks for fixing it! It looks really great", "noby, 2017-12-01Alright fixed the FF issue, was trivial (a shared function and variable identifier within the same scope).", "noby, 2017-12-01P_Malin: thanks, I noticed it too but didn't look into fixing yet", "", "moradin: sorry didn't try other browsers, I'll check that out too when I have the time.", "P_Malin, 2017-12-01I see a black circle on a steep slope at around 9.1s. It is fixed if I add:", "a = max(a,0.);", "before the return statement in Buf A subsurface()", "knarkowicz, 2017-12-01Beautiful!", "moradin, 2017-12-01Unfortunately doesn't work on Firefox :/", "P_Malin, 2017-12-01Wow, I love the look of this so much. The movement reminds me of cornstarch and water on a speaker. Makes me wonder about something like this but audio based.", "iapafoto, 2018-03-10@coyote: you have done 99% of the job. I just came  with the last %", "coyote, 2018-03-10@iapafoto, well done!", "iapafoto, 2018-03-04280 With pulse effect", "#define T texture(iChannel0,c*.1)", "", "void mainImage( out vec4 f, vec2 c )", "{", "vec4 d = vec4(c/iResolution.x, 1, 1) - .5, // 'view' (d)irection", "o = f = d - d, // (o)ffset from camera", "h = o,", "g, // (g)low amount", "t, // '(t)exture'", "l; // '(l)andscape'", "for ( ; h.x<.6; h+=.001) // terrain slice (h)eight", "f += // accumulate \"volumetric lighting\" into final output", "o.y < T.x // loop condition", "?", "o = -d * h / abs(d.y), // calculate offset of slice intersection", "//  l=T, // terrain sample 1", "t = texture(iChannel1, c=o.xz - iTime * .2), // terrain / lava texture sample", "//t = textureLod(iChannel1,c, 12. * (T.x-o.y) ), // comment in for better glow", "g = pow(l=T*t,t+7. // glow color", "+sin(iTime) // comment in for pulse effect", ")*d.z  // change color of sky", ": g; // should be zero not g but g looks ok", "", "c-=.1; // offset UV for lighting", "//l -= T-.4; // terrain lighting", "", "f += // f already contains \"volumetric lighting\"", "l-t*(T-.4) // terrain texture * lighting", "+ g * 6e2 //t* add glow,", "* o.y // fiddle with sky color some more", "+ o.z*.03; // \"depth fog\"", "", "//f = 1. - exp(-f * 1.5); // tonemap", "}", "Pr0fed, 2018-02-28Char?)", "dila, 2017-08-28very impessive and such small amount of code, really nice!", "jt, 2017-08-04Hot", "coyote, 2017-07-20-3:                    t = texture(iChannel1, c = o.xz - iTime * .2), // terrain / lava texture sample", "//t = textureLod(iChannel1, c = o.xz - iTime * .2, 12. * (T.x-o.y) ), // comment in for better glow", "l = T,", "", "...", "", "c-=.1; // offset UV for lighting", "//l -= T-.4; // terrain lighting", "", "f += // f already contains \"volumetric lighting\"", "t * (l-T+.4) // terrain texture * lightingJust 2 more chars necessary to fit the pulse effect! ;)", "coyote, 2017-07-20Amazing!", "-6 chars (and maybe safer than f*=0.):    vec4 d = vec4( c / iResolution.x, 1, 1 ) - .5, // 'view' (d)irection", "o = f = d - d, // (o)ffset from camera", "h = o,", "g, // (g)low amount", "t, // '(t)exture'", "l; // '(l)andscape'", "", "//d.z += d.y * .5; // More dramatic camera projection", "", "for ( ; h.x<.6; h+=.001 ) // terrain slice (h)eight", "PauloFalcao, 2017-07-19Jaw dropping!", "P_Malin, 2017-07-18Thanks Shane. Try uncommenting line 15. It really helps the volumetric effect.", "Dave_Hoskins, 2017-07-18Yes!", "Shane, 2017-07-18I love the new changes. The volumetric-like rays emanating from the lava really make the difference. It's quite amazing that you found the extra room to work that in.", "P_Malin, 2017-07-18Thanks Dave. Yeah, it was _really_ dark before. I took your suggestion and fiddled some more. Some of the sky coloring code was making the landscape dark. I think they both look better now.", "Dave_Hoskins, 2017-07-18It is quite dark, how 'bout something like:", "", "f += t * l", "+ g * 6e2", "+o.z*.03;?", "P_Malin, 2017-07-18@iq - I had a compatibility emergency at the end of the day. I hacked something to get the shader working on GL but it broke the \"diffuse\" lighting.", "Hopefully working everywhere now.", "iq, 2017-07-18Hm, it looks very dark now, can't see much. It's intended I suppose?", "mattz, 2017-07-17It's fixed on my machine now. Looks pretty cool.", "P_Malin, 2017-07-17Thanks knarkowicz. All those pesky characters are back again", "knarkowicz, 2017-07-17BTW you can do that using the ternary op: \"for () c = o.y < T.x ? .... : c;\" in order to save 1 char.", "knarkowicz, 2017-07-17You need to put if ( o.y < T.x ) inside the loop in order to stop those crashes.", "aiekick, 2017-07-17crash my chrome to", "movAX13h, 2017-07-17crashes webgl in my chrome, win8, gtx970", "GregRostami, 2017-07-17I'm at 7 fps on my iMac but it looks AWESOME!!!", "mattz, 2017-07-17I just get static on my MBP with Chrome", "P_Malin, 2017-07-17Heh, thanks @lherm. I tried that with an older version of the code and it didn't work, but it does now.", "@knarkowicz great reference, I totally get that vibe", "@Shane Yeah, it's crazy. A shader says a thousand words or something.", "lherm, 2017-07-17Really nice! You can save two chars by moving the break condition to the loop:", "", "for ( float h=0.; h<.6 && o.y < f.x; h+=.001)", "knarkowicz, 2017-07-16Nicely done! Somehow reminds me of Dungeon Keeper game .", "Shane, 2017-07-16Incredible that you were able to convey a scene like this - from scratch - with less than twice the characters that it took me to write this single sentence.", "kuvkar, 2017-07-15Insanely good", "Dave_Hoskins, 2017-07-15Lovely! And a great colour glow too!", "PrzemyslawZaworski, 2017-07-15On my GTX 570 shader runs great on the newest Firefox, but on the newest Chrome is error with forcing loop to unroll :", "", "http://oi65.tinypic.com/miyuci.jpg", "", "Btw, great job. I like this lava-style", "P_Malin, 2017-07-15Bananaft: Challenge accepted (well, more of a pulse than an animation)", "P_Malin, 2017-07-15Thanks GregRostami and Himred. I had f=f-f; previously but I'm really wary of uninitialized variables. Does f*=0.; ever cause issues?", "P_Malin, 2017-07-15Heh xTr1m, no, not consciously. I have probably seen that demo before but don't remember it.", "flockaroo, 2017-07-14really pretty! doesn't look 2tweets at all :-)", "xTr1m, 2017-07-14Inspired by http://www.pouet.net/prod.php?which=67129 or just pure coincidence?", "GregRostami, 2017-07-14You can replace f = vec4(0); with f*=0.;", "f-=f; does not work on iOS.", "Himred, 2017-07-14You can save 5 chars:", "Replace f = vec4(0); with f-=f;", "Bananaft, 2017-07-14I'm on different PC, but yeah, it works now even on mobile. Looks cool. I dare you to add lava animation.", "GregRostami, 2017-07-14OMG!! This is \"Mystery Mountains\" for 2017!", "BigWIngs, 2017-07-14Wow... that is super nice!", "Himred, 2017-07-14Impressive color scheme !", "zproxy, 2017-07-14cool. how about doing away with texture samplers", "P_Malin, 2017-07-14Ok, how about now?", "aiekick, 2017-07-14wow, love it", "P_Malin, 2017-07-14Yeah, my use of a do/while loop to save characters probably won't work everywhere.", "Bananaft, 2017-07-14getting errors, unable unroll loop, does not terminate after 1024 iterations. gtx 970", "drliquidglitch, 2022-11-27I love you", "ttoinou, 2018-07-21Featured in this video  !", "stratego, 2017-08-14\u041f\u0440\u0438\u043a\u043e\u043b\u044c\u043d\u043e. \u041c\u043d\u0435 \u0442\u043e\u0436\u0435 \u0412\u0430\u0432\u0438\u043b\u043e\u043d-5 \u043d\u0430\u0432\u0435\u044f\u043b\u043e )", "ttoinou, 2017-08-10Hi Otavio, I'm going to use some shaders of yours for a Shadertoy Best Of video", "mrdevelpoerdude, 2017-04-05Inception meets... Babylon 5????", "umutcelenli, 2017-01-07Amazing...", "Izokina, 2017-01-06I got really scared as if I was flying through it in real! Good work!", "shau, 2017-01-02Beautiful", "CaliCoastReplay, 2016-07-30This would be so perfect for a videogame.", "jt, 2015-12-17Awesome!", "zxr3680166, 2015-09-10Unknown shader error ...what happened?", "PauloFalcao, 2015-08-28Wow! Amazing!", "poljere, 2015-08-25Also, as the rest of the guys are saying... the HQ render trick is great.", "poljere, 2015-08-25Running it full screen! Completely awesome!", "Dave_Hoskins, 2015-08-25Feel the pooower!!!! Nice one. I love the rearranging bit a lot.", "w23, 2015-08-25this is so cool", "aiekick, 2015-08-25very good and the NON_REALTIME_HQ_RENDER is genius", "P_Malin, 2015-08-25Shader looks great!", "D'oh, I should have thought of using the discard trick for _screenshots_.", "calx, 2015-08-25Ha. This is insane. Love the NON_REALTIME_HQ_RENDER option.", "weyland, 2015-08-25Amazing, love the spacewarping and camera moves", "movAX13h, 2022-08-21@newstbody Here's a quick implementation in vanilla js https://thrill-project.com/archiv/asciivideo.zip", "newstboy, 2022-08-11I love this script but i am new to shadertoy or webgl, will you please tell me how i can use this code in html, i read this page (https://morioh.com/p/5199bcb845af) but i can't get sucess.  i mean how i can add a mp4 file to this code and use it in html.", "movAX13h, 2022-03-10@AK001 I've answered your question here: https://blog.thrill-project.com/ascii-art-shader/#comments", "AK001, 2022-03-10Could you give an explanation of how the entire code works? especially how you are rendering characters without a font-atlas? I understand that a bit too much to ask but I am new to shaders and the code is also relatively short so I hope you don't mind", "movAX13h, 2021-12-19@PixelDud you can use it and do whatever you like with it. Thank you for asking!", "PixelDud, 2021-12-17I'd like to use this a a project of mine, can I do that? If so, what are the requirements?", "Goldpunk, 2021-04-18sorry for the late response, thanks a lot!", "movAX13h, 2021-03-27@Goldpunk on this platform, all code is is GLSL (GL Shader Language) - strictly speaking, this is a fragment shader for 1 rectangle (facing the camera). The program runs on the GPU.", "Goldpunk, 2021-03-20hey, in what code language is this?", "zump, 2019-10-09@movAX13h Thanks for the explanation. Really cool shader. Any thoughts on making it \"less dark\" - i.e  toreduce the effect of the blacks (the gap between characters).", "movAX13h, 2019-10-08@zump My explanation below was imprecise. tl;dr: 4 produces 5 zerobased values;", "It scales it by 4 (y is just flipped here too). The index (variable a) for the look-up uses round(), thus giving results from 0 to 4 which matches the character size of 5x5.", "zump, 2019-10-08Why is it stretched from -4 to 4?", "Kazningo, 2019-03-08Ah, that makes sense  Thanks for explaining!", "movAX13h, 2019-03-08Line 40 gets p into the range -1 to 1. Line 12 stretches it to -4 to 4 (y is flipped here too) and shifts it by 2.5 diagonally so that letters are not cut on screen (see character alignment at bottom left of canvas). Note that the characters are 5x5 excluding the space around them.", "Kazningo, 2019-03-07Hey, awesome shader! Storing the bitmaps as integers is an ingenious solution", "I'm a newbie to shader code so I was hoping someone could help me understand what is going in line 12 and 40.", "I assume it has something to do with mapping the position of the fragment to the 5x5 bitmap, but the operations (except for mod) and values used seem arbitrarily chosen.", "movAX13h, 2018-12-14I've updated the shader to use bit operations now. Let me know if it got better or worse", "now, 2018-12-13Cool effect! But sadly it's not working on some Mac devices, is there anything to do about it? I've filed an issue here: https://github.com/pixijs/pixi-filters/issues/173", "heliumsoft, 2017-09-30Thanks for your sharing.", "movAX13h, 2017-09-29Yes, you can use it.", "heliumsoft, 2017-09-29Awesome Effect.", "Can i use your code in commercial project?", "movAX13h, 2017-05-17The values are bitmaps. Since you have registered just to post this question, I have made this for you. In respect of your nickname, you could've asked on my blog or by email. Looking forward to see some shaders from you now! :P", "itreallydoesntmatter, 2017-05-17please, can you tell me how to change the symbols used for the ascii? i just can't find what  kind of the values are used in the \"if\"s, so  i can't guess what kind of values i need for using only \"0\" and \"1\". sorry for the pretty lame question)", "randomstars, 2016-07-25sweet!", "reinder, 2013-12-01Very cool!", "movAX13h, 2013-11-10Bad excuse to not make a matrix shader! :P", "raja, 2013-10-27I am willing to try this on Matrix Shader. Not able to locate Matrix Shader by CBS now. :-(", "CBS, 2013-09-24Very cool!", "movAX13h, 2013-09-23If you need bigger characters (or shapes) simply use 2 or more floats like I did in the Lemminvade shader and also in the Curiosity shader.", "Morgan, I made this after I saw your comment to the matrix shader by CBS. You can do the matrix shader with symbols now - your turn! ;)", "morgan3d, 2013-09-23Really cool.  I love how short this is!  You can do some truly ugly hacks to use the exponent and sign bits of the float, but at this point it is easier to just limit the character size.", "movAX13h, 2013-09-23In my tests 33554430 (25 bits) was the largest number that worked.", "Thanks for the hint!", "TekF, 2013-09-22Brilliant trick for describing the characters. I'm surprised floats have enough precision.", "", "BTW exp2(k) might be faster than pow( 2.0, k ).", "Xonatron, 2023-01-23Awesome...", "gabriel_delai, 2020-12-27i dont know how i did it but in 51500 secs it gets totaly crazy", "henry, 2020-04-28It would be cool if you can rewrite it to a heightmap version  https://i.imgur.com/judMqOm.jpg", "iq, 2019-06-01@ccorcos, the point is vec2(-.745,.186), it's explicitly determined in line 34", "ccorcos, 2018-11-25I understand the float precision thing. But my assumption is that there should be mathematical trick to get around that if only I can figure out the GLSL side of things first... It appears this program zooms in on a hard-coded point although its pretty hard to see figure out what point it is.", "Kalandro, 2018-11-23@ccorcos: Yes it is mathematically possible to zoom forever into the Mandelbrot set but we are limited by the precision of float.", "", "If you have some GPU power left i suggest you change the 200 in line 39 to something like 512 or more. =)", "Dasher_The_Viral, 2018-10-02I suggest that you don't change \"#define AA\" to something like 100. XD", "", "Crashed the WebGL handler *facepalm*.", "ccorcos, 2017-11-26Would it be possible to iterate over the image between each frame to refine the point you're zooming in on so that can go forever?", "MarcelCzerwinski, 2022-11-21nice", "jolle, 2022-10-23@FabriceNeyret2 Yeah, the colors are mostly its own buffer to simulate a palette like in the original", "", "@Osakazaur Yeah of course. This was originally based on https://www.flipcode.com/archives/The_Art_of_Demomaking-Issue_04_Per_Pixel_Control.shtml so feel free, just credit etc if relevant", "", "@m1el Yeah that's nice", "m1el, 2022-10-22I kind of prefer a gamma-corrected version, by adding a line `fragColor = pow(fragColor,vec4(0.55));`", "Osakazaur, 2022-10-20Thank you for your job!", "Can I use your code to make my own plasma shader?", "MrHAX00, 2022-09-25Made a fork with some coloring and shaking doing what I just said!", "https://www.shadertoy.com/view/7tGfRD", "MrHAX00, 2022-09-25Instead of using a buffer you can plug in a song and get a p cool visualizer!", "busybeaver, 2022-09-18This is octaves but for some reason they don't really look good:", "", "const vec2 vp = vec2(320.0, 200.0);", "const float k = 1.6;", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "float t = iTime * 10.0 + iMouse.x;", "vec2 uv = fragCoord.xy / iResolution.xy;", "vec2 p0 = (uv - 0.5) * vp;", "vec2 hvp = vp * 0.5;", "vec2 p1d = vec2(cos( t / 98.0),  sin( t / 178.0)) * hvp - p0;", "vec2 p2d = vec2(sin(-t / 124.0), cos(-t / 104.0)) * hvp - p0;", "vec2 p3d = vec2(cos(-t / 165.0), cos( t / 45.0))  * hvp - p0;", "float sum = 0.;", "for(float i = 0.; i < 6.; i += 1.) {", "sum += 1. / pow(k, i) * (", "cos(length(p1d) / 30.0 * pow(k, i)) +", "cos(length(p2d) / 20.0 * pow(k, i)) +", "sin(length(p3d) / 25.0 * pow(k, i)) * sin(p3d.x / 20.0 * pow(k, i)) * sin(p3d.y / 15.0 * pow(k, i)));", "}", "fragColor = texture(iChannel0, vec2(fract(sum * (1. - 1. / k) * .8 + .5), 0));", "}", "busybeaver, 2022-09-18Cool. What about adding octaves like in Perlin noise?", "FabriceNeyret2, 2022-09-09note that buffA is really not necessary, and can be replaced as a simple function (instead of texture call )  in Image tab.", "", "so with more simplif ( like no need for mod before trigo )", "the whole shader can collapse to just 373 chars monobuffer ( from 735 in 2 buffers ):", "void mainImage( out vec4 O, vec2 U )", "{", "float t = iTime/.1 + iMouse.x;", "vec2  R =  iResolution.xy, S = vec2(160,100),", "p = ( U+U - R ) / R * S,", "q = vec2(cos(-t / 165.), cos( t / 45.))  * S - p;", "t = 1. + cos( length( vec2(cos( t / 98.),  sin( t / 178.)) * S - p ) / 30.)", "+ cos( length( vec2(sin(-t / 124.), cos( t / 104.)) * S - p ) / 20.)", "+ sin( length(q) / 25. ) * sin(q.x / 20.) * sin(q.y / 15.);", "O = .5 + .5* cos( (iTime+iMouse.y) / vec4(63,78,45,1) + ( t + vec4(0,1,-.5,0) ) *3.14 );", "}", "iq, 2016-05-21classic!", "jolle, 2016-05-21good call, made some fixes", "FabriceNeyret2, 2016-05-21Image:  mod(sum, 1.0) = fract(sum)", "", "BufA: vec3 cs = cos(i * tau + t + vec3(0, 1, -.5)*3.14);", "ramirez48, 2021-03-10crazy cool  love it", "NivBehar, 2020-03-30cool!!", "jeyko, 2020-03-24don't get me wrong, the colors look good here", "GinesMendoza, 2020-03-24you are right, thanks jeyko for your advice. the color and light is one of the thing that I have to fix / improve", "jeyko, 2020-03-24nice, i like it, but it's good practice to pow(col, vec3(0.4545)) at the end of mainImage, before starting your project. That's gamma correction and will make your gradients better.", "cloister, 2020-08-10Love it. The metallic coloring is really beautiful.", "mamalka89, 2020-07-23Very interesting", "Maartia, 2020-06-18Nice idea", "Dzudex, 2020-06-17Like a dragon ;)", "maniek798, 2020-06-16Nice,  thought it was a closeup of a dragons' skin for a moment", "jstrom2002, 2020-05-30another great one", "Shane, 2020-05-19I did this ages ago -- before the cube map feature was implemented. The method still stands, but I'd be inclined to generate a repeat texture on one of the fixed size 1024 by 1024 cube map faces, then render that, which would be so much more efficient. With a fixed size texture, switching to full screen wouldn't matter. Either way, you could make some amazing terrains, or whatever else by simply precalculating textures.", "ollj, 2017-08-08\"tidiing\" if-statements can be faster, when both branches are roughly equally computatonally complex. otherwise they tend to be slower AND less precise, especially on older hardware.", "", "if statements tend to bee worse on GPU, breaking pupelines of mat16() calculations that can unify many functions into single operations and short pipelines.", "newer GPU are more and more optimized to pipelining multiple instructions, to take only as long as its longest part. vector functions are more easily pilelined, by multiplying matrix transformations only once into identities that take almost the same memory, but much less run time.", "", "without if-statements you likely calculate more differentials, losing precision, but on newer GPU the longer pipelines easily are worth the performance gain for a minor loss in precision. IEEE float subtraction is less precise than IEEE float multiplication.", "", "the most interesting thing about substituting if(c>0)a;else b;  statements with mix(a,b,step(c,0)) with step(c,0)*a+step(-c,0)*b;  and step(c,0) with (sign(c)*.5+.5) is that it ultimately leads you to the fuzzier bi-symmetrical binomial functions that define your shape. your binomial parameters end up [sign(a)*b+c values] being reduced to. you no longer have either symmetry or asymmetry, but experience the the fuzzy gradient between these two extremes; [url=", "https://www.shadertoy.com/results?query=bisymmetry]bisymmetry[/url].", "", "And very often you see terms cancel each other out, or you see hints at how to generalize one function without extra computational cost, or how to specialize a function (with better performance due to less variables), while still being usable on many scales and domains.", "fizzer, 2016-01-12Nice idea and looks great.", "iapafoto, 2016-01-11Look quasi real !", "iq, 2016-01-10Nice!", "", "(hey, the GL and UI part of the multipass wasn't easy either ;) )", "", "Resize, custom resolution buffers and refresh rates will come with Multipass2.0. Just wait for it!", "poljere, 2016-01-10Nice!", "Dave_Hoskins, 2016-01-10A great shiny texture! Very cool.", "Shane, 2016-01-10@dila", "I've been waiting for you to post more shaders.", "", "@jt", "A lot of your 2D examples would look really cool raymarched against a back plane. If you take away all the window dressing, this is nothing more than a basic distance equation:", "", "float map(vec3 p){ Plane_Distance - p.z - Get2DGreyscale(p.xy)*scale; }", "", "I've already tried out variations of yours and Fabrice's Sierpinski and Truchet examples, and I was pleased with the results.", "", "@FabriceNeyret2", "I originally had it animated, but I figured stone surfaces don't move.  I like raymarching 2D textures against a back plane. Things like your animated sinusoidal warp example would work well, not to mention, your tiny maze code. I have a version of your hexagonal Truchet example that I'll release at some point.", "FabriceNeyret2, 2016-01-09note that the height map could even be animated ;-)", "jt, 2016-01-09Cool!", "dila, 2016-01-09beautiful", "hypnothalamus, 2019-12-04Great shadertoy and I also find the parameters interesting !", "I used the IFS function here: http://youtu.be/_O2A7SbcDEM . Basically I implemented some shader layers in Neobarok ( neobarok.com ) and added normals, curvature-materials in post process steps. The PBR rendering also comes from Neobarok's pipeline so it simplified some things there.", "slipperyJed, 2019-11-02great work! I think the parameters are exciting", "olka_K_90, 2019-10-23wow, beautiful", "Zi7ar21, 2019-10-14Oh my gosh, it even lets you interact with it!", "Zi7ar21, 2019-10-14Nice, I love fractals!", "gakido7domo, 2019-09-19ooooo, shiny", "P_Malin, 2019-09-19Thanks JoshScholar,", "This is quite an old shader so it was written for older GPUs. I think I wrote it one night and at the time I had a laptop with an integrated intel GPU so that was actually my target", "There are a couple of things that make this fast. Firstly, the number of raymarch steps is very low ( kRaymarchIterations 24 ). Secondly, the shading is very simple; There is just a cubemap reflection with some additive light / glow from the orbit trap. As there are no real reflections there is only one raymarch per-pixel. Also, this is a single buffer shader so there is no floating point intermediate buffer getting written to and read from.", "JoshScholar, 2019-09-18One cool thing about this is that it's fast even on an old integrated laptop intel GPU.", "", "Much faster than almost anything.  I wonder how you did it.", "poljere, 2014-05-29Really cool!", "iq, 2014-05-29Very cool, nice material!!", "westoncb, 2014-05-29Awesome!", "EricClapton, 2018-11-03", "jorge2017a1, 2018-02-20con ese poquito codigo fuente puedes hacer ello-......sorprende!!! que compilador es este....", "etale_cohomology, 2017-09-07The simplicity... the beauty.... <3_<3", "kig, 2017-07-02Hahah, thanks", "Shane, 2017-06-25I've always liked this particular shader - Minimal code and really pretty. I didn't realise you were the author. I see it all over the net, so I guess that makes you shader famous.", "movAX13h, 2018-08-21Thanks. Yes you can.", "heliumsoft, 2018-08-21Very nice effect.", "Can i use your code in commercial project?", "jianxin, 2016-11-29", "movAX13h, 2014-08-22[This comment has been hidden by the shader author]", "teana, 2014-08-21[This comment has been hidden by the shader author]", "teana, 2014-08-21[This comment has been hidden by the shader author]", "teana, 2014-08-21[This comment has been hidden by the shader author]", "Artoo, 2014-01-10thank you!!! you are a hero!", "movAX13h, 2014-01-10Thanks  Yes, the vertex shader for all shaders is attribute vec2 pos; void main() { gl_Position = vec4(pos.x,pos.y,0.0,1.0); }", "Artoo, 2014-01-10btw - i love this i/o shader - really pretty!", "Artoo, 2014-01-10so is there a common vertex shader used by all of these shaders?", "movAX13h, 2014-01-10All shaders on Shadertoy are pure fragment shaders. What you see is one rectangle (4 vertices).", "Artoo, 2014-01-09I think this really nice - but i have a question; is this a vertex or fragment shader. I am totally new to OpenGL, GLSL, Shaders and am trying to work out how to port some simple shaders into jitter .jxs files for forther experimentation!", "4rknova, 2013-08-31Nice!", "iq, 2013-08-30very cute", "srtuss, 2013-08-29wow, love it.", "alenwesker, 2023-04-27So marvelous!!! Just looking for such a shader", "CeeJayDK, 2019-05-15I was revisiting my own dither again and found that the pattern changes as you change the resolution. Currently trying to find a way to fix this as it's much better to know exactly what the end user sees.", "", "Also there are several other magic values that will work. Also working on those.", "float grid_position = fract( dot( fragCoord.xy, vec2(1.0/16.0,10.0/36.0) + 0.093 ) ); for example also works fine.", "From messing about with the magic values for mine I can also find patterns that looks very similar to valves dither which tells me that the two methods are related - I think mine has better magic values though. They use a different method for chromatic - I might experiment here but my current method of ensuring one component goes down in value when the two others go up and vice versa works well.", "Out of the methods on display here mine is still my favorite. Second favorite is chromatic blue noise. Note that mine is chromatic by default. To see a non-chromatic version of it change line 172 to :", "vec3 dither_shift_RGB = vec3(dither_shift, dither_shift, dither_shift); //non-chromatic dithering", "IRYOKU, 2017-12-23Doing per channel dithering, helps a lot for IGN as well:", "", "float rnd = InterleavedGradientNoise( fragCoord );", "outcol = its + vec3(rnd, 1.0-rnd, rnd) / 255.0;", "hornet, 2017-11-05kyokpae - as far as I can tell, that is identical to using straight white-noise, third from the bottom? (you can include time here if you uncomment #define ANIMATED at the top here)", "kyokpae, 2017-11-02Neat. There exists also a temporal dithering technique: https://www.shadertoy.com/view/4tjczc which smears the color across not only surrounding pixels but also, in a way, preceding (previous frame) and following (next frame).", "hornet, 2014-09-28- see also https://www.shadertoy.com/view/4sBSDW", "kusma, 2014-09-27also worth a try, interleaved gradient noise:", "", "vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);", "outcol = vec3(its + fract(magic.z * fract(dot(gl_FragCoord.xy, magic.xy))) / 255.0);", "hornet, 2014-06-17That does look a lot better - let me know when you find a version you're happy with, and I'll add that one", "CeeJayDK, 2014-05-28It shifts some pixels towards green and some towards purple. It looks odd here because you reduce the number of colors so the banding is exaggerated, but the idea is that instead of shifting the color of the pixel to one shade brighter or darker when dithering, you only shift one subpixel, thus you get a finer pattern. Like what sub-pixel anti-aliasing does for font-smoothing.", "", "You can make the color shift more apparent by reducing the dither_bit value (for demonstration purposes - it should look best with a dither_bit of 8.0).", "", "I use green/purple because green is the color component that appears the brightest so I wanted to juxtapose that with the two other color components, (red and blue) which together make purple.", "", "You can also use yellow/blue : (dither_shift, dither_shift, -dither_shift)", "or red/cyan : (dither_shift, -dither_shift, -dither_shift)", "", "or disable this feature with (dither_shift, dither_shift, dither_shift)", "", "As for the diagonal dithering .. that's completely wrong. A bug introduced when I ported it from HLSL to GLSL incorrectly.", "", "I've tried fixing it and I think this is correct :", "", "float grid_position = fract( dot( gl_FragCoord.xy - vec2(0.5,0.5) , vec2(1.0/16.0,10.0/36.0) + 0.25 )  );", "", "That should look far better than the buggy pattern.", "", "I also noticed a flaw in the original version (before porting). I normally the + 0.25 bit as a protection against precision problems, but it should be outside the dot() not inside it. This means this pattern (which still works) was created and tuned with this mistake in place, and so I should go back to my original code, correct that and see if there isn't an even better pattern I have overlooked.", "", "You can create new patterns by playing with the vec2(1.0/16.0,10.0/36.0) part. New fractions give different patterns.", "I started with a simple checkerboard pattern :", "float grid_position = fract( dot( gl_FragCoord.xy - vec2(0.5,0.5) , vec2(1.0/2.0,1.0/2.0)  ) + 0.25 )", "hornet, 2014-05-27( and by offset of course I mean bias towards a purply red  )", "hornet, 2014-05-27I added your code - seems to have a slight color-offset, but interesting with the diagonal dithering!", "CeeJayDK, 2014-04-08You could also use a very large void and cluster pattern. This would probably yield the best quality and has a decent speed if implemented with a lookup texture. Unfortunately Shadertoy doesn't offer a void and cluster texture that can be used here.", "CeeJayDK, 2014-04-08I ported over my fast dither function from SweetFX for comparison.", "", "Try :", "", "//----------", "", "float dither_bit = 8.0; //Bit-depth of display. Normally 8 but some LCD monitors are 7 or even 6-bit.", "", "//Calculate grid position", "float grid_position = fract( dot(gl_FragCoord.xy, (iResolution.xy * vec2(1.0/16.0,10.0/36.0)  )+(0.25) ) );", "", "//Calculate how big the shift should be", "float dither_shift = (0.25) * (1.0 / (pow(2.0,dither_bit) - 1.0));", "", "//Shift the individual colors differently, thus making it even harder to see the dithering pattern", "vec3 dither_shift_RGB = vec3(dither_shift, -dither_shift, dither_shift); //subpixel dithering", "", "//modify shift acording to grid position.", "dither_shift_RGB = mix(2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position); //shift acording to grid position.", "", "//shift the color by dither_shift", "outcol = its + dither_shift_RGB;", "", "//------", "", "It can be made even smoother by changing the sign of dither_shift with each frame, because that causes the color to fluctuate between the two nearest steps - this is especially smooth if the LCD gtg response is slow as it will then always be between the two steps.", "", "But even like this it looks superior IMHO to the other methods and it's also a very fast algorithm.", "jvb, 2013-03-11The nrand()/255.0 method appears smoothest on my Samsung display here", "scholarius, 2023-02-03Buffer D line 23/29", "return vec4(pal*pal, 1.);", "", "Image line 31", "fragColor = sqrt(col);", "", "Hint: Display Gamma, especially when opposite colors meet, like blue/yellow", "niels747, 2021-01-13It looks awesome but it is clearly not divergence free flow, making it useless for anything sceintific. Is there any way you could modify it to be divergence free?", "Helen, 2020-12-28Hello! But I need this effect on mobile devices. It should work on phones. Thank you", "CY5, 2020-12-20if we follow paper  then we can replace  your  stability   code \"data = clamp(data, vec4(vec2(-10), 0.5 , -10.), vec4(vec2(10), 3.0 , 10.)); \"  with the stability mentioned as per  paper", "// \"dt\" stability condition", "vec2 velo = vec2(max(data.x,0.1), max(data.y,0.1));", "dt  = min(dt,max(abs(1.0/velo.x),abs(1.0/velo.y)));", "//boundary", "vec2 dir = vec2(dx.x, dy.y);", "data.xy *= smoothstep(.5,.48,abs(uv.xy+dt*dir-0.5)); //Boundaries", "data.z = clamp(data.z,0.5,3.0);", "Helen, 2020-12-14Hi! Could you write the similar shader for me? How much time it will take?", "oneshade, 2020-10-21Beautiful!", "Lumos, 2020-06-28Very nice shader  Could i use it when i am VJing?", "vojd, 2019-03-22Just beautiful!", "birdie, 2018-12-21Amazing!", "MacSlow, 2018-12-01Love it!", "iq, 2018-12-01So pretty!", "granito, 2018-11-30Love the rich colour palette and detailed forces.. wow!", "Kali, 2018-11-29Wow, so amazing, congrats!", "KylBlz, 2018-11-28love it! Will use for clouds or something in the future", "elenzil, 2018-11-28@nimitz, could you enable \"API\" on this ?  i'd love to check it out on the iOS 'shadertoy' app.", "GregRostami, 2018-11-28STUNNING!", "Duke, 2018-11-28Very nice!", "TobberH, 2018-11-28It actually runs 60fps on my phone?!? How the...", "TobberH, 2018-11-28WOW!", "mv, 2018-11-27Neat!", "belfry, 2018-11-26Really nice.", "BigWIngs, 2018-11-26Gorgeous!", "reinder, 2018-11-26Wow! really nice.", "ThomasSchander, 2018-11-26I'm a simple man, I see beautiful fluid simulation, I press like. ;) Well done!", "Dave_Hoskins, 2018-11-26Truly beautiful! I can almost hear the fluttery jets.", "elenzil, 2018-11-26really nice.", "lucpena, 2021-09-04Thank you for the tutorial!", "jffonseca, 2019-06-02Maybe it's just my perception but shadows dont seem to work! is that right?", "jffonseca, 2019-06-01Great insight on ray marching, loving the way you simplified everything with the structs. Could you please give some documentation on the structure members/variables. It would be very helpful for better understanding the code. Thanks again for this code", "jcyuan, 2018-12-29thanks Michael.", "letsparty1793, 2018-09-17very helpfull,thanks for sharing!", "etale_cohomology, 2017-07-24This tutorial is INSANELY helpful, although, as an absolute beginner, I couldn't follow anything. I think you need at least SOME previous background in signed/unsigned distance fields to start getting something out of this =)", "tkoram20, 2016-07-09Thank you good sir! Very useful for newbies like me.", "__declspec, 2016-06-28Great job, thanks for sharing!", "MichaelPohoreski, 2016-05-17cubby208 Yes. The default geometry shader (should) just pass the vertices \"as-is\".  More advanced rendering will add/remove vertices dynamically (say for dynamic Level of Detail)", "cubby208, 2016-05-08Question, I see a lot of ray based rendering.  Is it actually possible to do traditional rasterization of triangles without a geometry shader?", "CCFSA, 2016-02-16Thanks for this tutorial. very helpful!", "MichaelPohoreski, 2015-03-07Glad you liked it danyo!  Have you looked at my preliminary noise comparison? https://www.shadertoy.com/view/XtX3D4", "danyo, 2015-03-07Thanks for making this! I am new to shaders and ray marching and this is just what I was looking for. I have noticed a lot of shadertoy examples use Fractional Brownian Motion and other noise techniques. Would you consider building a how to for these more advanced techniques too?", "vec2, 2023-04-29  if(Mouse.z > 0.)", "{", "vec2 dm =(Mouse.xy - Mouse.zw*vec2(1.0,-1.0))/10.;", "float d = distance(Mouse.xy, P.X)/20.;", "F += 0.001*dm*exp(-d*d);", "// P.M.y += 0.1*exp(-40.*d*d);", "}", "MysteryPancake, 2022-11-26Looks like magic, a little smokey too", "striveLei, 2022-11-01666", "Rrrrichard, 2022-05-10So amazing fluid dynamics... wow!", "tomachi, 2021-04-19After messing with some variables I got your code to do this: https://www.shadertoy.com/view/7dsXRS \"In Another Cosmos\" I call it. Hope you like.", "alleycatsphinx, 2021-03-28This blew my mind. Thank you - I clicked on this while looking for Moroz but not knowing the account name - ahh! Of course... =D", "", "Well, I finally have some time to look into it - I will probably spam you with some questions; hope you don't mind. I am excited to finally learn some proper physics.", "nek, 2021-03-26Fantastic work. I'd like to adopt if for a work of installational art. I'll have to convert it into a TouchDesigner compatible shader and add an interaction with motions scanned by a kinekt camera. Is it ok to use the code and mention you as a collaborator and the creator of the original work?", "ekkolabs, 2021-02-09could there be a better anti-aliasing method for computing opposite forces in the grid?", "Zi7ar21, 2021-02-08I guess you better make everything clean in case it ever becomes shader of the week!", "michael0884, 2021-02-07My code is not the cleanest I'd say...", "oneshade, 2021-02-07I searched the whole thing with ctrl-f but it does appear to be used anywhere.", "Zi7ar21, 2021-02-07Remove it and find out! Oh...", "it does nothing...", "Fjante, 2021-02-07What does line 1 in Common do?", "Limekys, 2021-02-07WOW!", "Ryens, 2021-02-06wow", "andrew741, 2021-02-04WOW! it looks so real and so good!", "tomachi, 2021-02-03That is pretty cool man. I wonder also if it is conservative as the liquid does not build up? Checkout my take on this: https://www.shadertoy.com/view/tsXfDX Yin-Yang biological sim. I would love to see one of your shader that deals with high speed particles. Some of mine get very fast, some go unstable and black that screen, is trippy for sure.", "firegump, 2021-02-03god", "mlkn, 2021-02-03wooooow!", "ChutneyPot, 2021-02-03Gorgeous!", "patu, 2021-02-03Even cooler with Paint calls: 4 !", "milesWaugh, 2021-01-07Woah!", "oneshade, 2020-11-20Impressive!", "PauloFalcao, 2020-09-13WOW!", "aiekick, 2020-08-08yep light color blending is not the same as paint color blending. haha but idc, this one is fabulous", "michael0884, 2020-08-03lol. I guess this is glowing paint then", "rory618, 2020-08-03https://www.youtube.com/watch?v=Jpak1Zx70rQ wrong!", "Zi7ar21, 2020-07-06Dang", "ShnitzelKiller, 2020-06-29reminds me of Artrage.", "jt, 2020-06-27WOW!!!", "inferno, 2020-06-26its so so so so beautiful! can't stop watching it", "FabriceNeyret2, 2020-06-26well, at some point it's more the discretization of continuous differential equations than an automaton ;-)", "michael0884, 2020-06-26This is stretching the definition of \"Cellular automaton\", since the state is not a simple binary thing, but lots of floats interacting in a very complicated way in a 5*5 neighborhood.", "suitzero, 2020-06-26oh wow, crazy. I watched Stephen Wolfram's video the other day. he talked about the fundamental theory of physics and Cellular automaton, I was a little puzzled because I always thought that Cellular automaton is just a thing of intellectual playfulness rather than something that has a practical application to it. I googled it a little bit after watching this. now everything looks so obvious. why am I so stupid and world is full of genius. haha", "aiekick, 2020-06-25nice one", "Gijs, 2020-06-25Right, was to be expected.", "michael0884, 2020-06-25@Gijs, its mostly because the bad border conditions, some of the fluid slips through the edges.", "Gijs, 2020-06-25Otherwise stunning of course!", "Gijs, 2020-06-25I'm not sure it is truly conservative. After turning of the faucets and removing the drain&box and playing around with the fluid, the amount of fluid becomes less and less...", "FabriceNeyret2, 2020-06-25beautiful !", "GregRostami, 2020-06-25STUNNING!", "felipunkerito, 2020-06-25Wow!", "michael0884, 2020-06-24This is SPH but on a grid(so an Eulerian/Lagrangian hybrid). Basically each pixel hold a particle distribution which has a center of mass, density, and velocity, I call that a virtual particle. The distribution is advected using forward advection by integrating how much of the particle distribution falls into this cell. The distribution used here is a square. It can be whatever though, a Gaussian, a circle etc. A square is just the simplest one.", "The forces are computed similarly to SPH but with some differences in the pressure computation to deal with vacuum virtual particles(remember, every pixel has a particle even if there is nothing there)", "tdhooper, 2020-06-24wow!!! is this still an SPH approach? something new?", "iq, 2020-06-24I think this is the prettiest water sim we have seen so far in Shadertoy!", "jorge2017a1, 2020-06-24Wow ... what a nice job .... pure math ... and advanced math ..... Ooooohhhhhh !!!! nice job !!!!", "", "...........", "Guaooo ... que bonito trabajo .... matematicas puras ... y matematicas avanzadas ..... Ooooohhhhhh !!!! buen trabajo !!!!", "jeyko, 2020-06-24this may be the nicest looking water on shadertoy", "jeyko, 2020-06-24wooow", "twenkid, 2022-07-27Awesome! This reminds me of \"Contra\" (NES), last level, Alien's Lair...", "jarble, 2020-12-11I also made a slightly faster version of this shader. It seems to run much better in full-screen mode.", "ollj, 2018-11-02there is this collection with small boilerplates, no frameBuffers, single html files.", "raulrich1, 2018-08-04wow", "FabriceNeyret2, 2018-06-08@djbilic: what do you mean, \"download\" and \"work\" ? don't shadertoy work on your mac browser ?", "djbillc, 2018-06-07how do you download thes to work on a apple mac", "dila, 2016-11-12the throbbing is excellent :p", "aiekick, 2016-09-25wow, missed that. marvelous", "flockaroo, 2016-09-07wonderful!", "Yusef28, 2016-09-06@shane thx for the informative response. yeah a lot of thought towards optimization going on here.", "Shane, 2016-09-06@Yusef28", "I guess it comes down to aesthetic importance, and that depends on the situation. A lot of the times, trial and error is necessary. Basically, I'll try a cheaper short-cut version, then hope that it looks OK.", "", "In this particular instance, the refracted imagery is a good example. In reality, you'd have to restrict some kind of moving viscous membrane to the tubes, then perform a whole heap of refractive and reflective bounces whilst gathering up material properties - which isn't possible in realtime with the average computer. Therefore, I've settled for indexing a refracted ray at a uniform length into a viscous like function and leaving it at that. The weird thing is that our brain expects to see a certain result based on the scene, does the calculations anyway, and distorts the membrane to suit the result. It's far from perfect (transparency is lacking), but our minds will vaguely accept it.", "", "In addition, I saved a lot of distance calculations by tweaking the raymarching loop, bump mapping the cellular walls, doing some fake, localized shadowing, etc. Bump mapping the finer details is one of the oldest tricks in the book and always worth the trouble, if you can get away with it.", "Yusef28, 2016-09-05Also am I right to think there is a lot of balancing going on when you put these together. Like ofcourse artistically you are good at balancing, but also for example when you take shortcuts you make up for it somehow to maintain the illusion. Maybe this is obvious to some but I guess I'm just trying to formalize it because it seems like a good skill to have.", "Yusef28, 2016-09-05very cool and very efficient", "warlock, 2016-09-05Shane is supernatural ;-)", "FabriceNeyret2, 2016-09-04cool and almost frightening. Though of adding an heart + flow sound ? :-)", "Shane, 2016-09-04Thanks for the comments. It would have been nice to make this more realistic - with multiple ray bounces, etc... Perhaps in 2020.", "Shane, 2016-09-04@ollj", "It's possible to run a camera through the negative space. I've tried it before, but from that perspective it wasn't as interesting as I'd hoped. However, smoothly combining a perturbed cyclinder with the gyroid surface - plus some tweaking - can produce a pretty interesting multiple tunnel system. I did something similar in my \"Abstract Island Cavern\" example. The downside with some transcendental surfaces, such as these, is honing difficulty, which is why the raymarching loop look so hacky. There are probably better ways to address the issue, but none that I'm clever enough to come up with.", "", "@Dave and @Virgill", "I slowed the camera down to half the speed. Any slower than that, and people would begin to realize that just how much fake physics is included.  As for the FOV, I agree that it's a little restrictive. I think I chose it to hide some near camera honing glitches, but I'll take another look at it.", "ollj, 2016-09-04can you negate the distance and move the camera rough these vein tunnels?", "", "the wall of [tun] on its own looks already good.", "iq, 2016-09-03Super nice", "iapafoto, 2016-09-03super shapes and flow effect", "Duke, 2016-09-03Cool!", "Dave_Hoskins, 2016-09-03Very cool. +1 for being a little slower, and maybe a wider FOV?", "Virgill, 2016-09-03Wonderful!   Could be a little slower for even more epicness", "shau, 2016-09-03Wow. Shading of interior blood/veins is super cool", "photonic, 2020-05-20This is amazing I\u00f1igo!! If I only had more knowledge with functions I would try to do something like Dr.Strange magic spells animations ! It would be a cool challenge tho!", "ollj, 2017-08-25yellow blue are famous for being complementary (mixing with light) AND common within earth atmosphere and common within black-body radiation of the sun.", "", "it starts with blackbody radiation, setting the spectrum of a star, with little filtering.", "", "Earth atmosphere filters a lot out, scatters blue more than yellow.", "Life on planets evolves to utilize what is there, and that depends on the temperature of the nearest star an the composition f the atmosphere.", "", "the 2 most common complementary colors then are orange and blue. complementary colors for contrast and common (mostly harmless) colors for familiarity (nothing to avoid), to not be associated with danger, like colors of oxidation, poison, mold...", "iq, 2013-11-12Exactly. Another less common option is red and green, also complementary:", "", "", "", "Thing is yellow and blue are easier to digest, because things lit are yellow-ish due to the sun, and so is the human skin. THen, things in sun shadows are blue due to the sky dome.", "", "Google images for \"movie posters\", you'll see. All yellow and blue.", "Dave_Hoskins, 2013-11-12Do they work because they are opposite and complementary colours on the classic colour wheel?", "cabbibo, 2013-09-05Its the color version of yin an yang", "iq, 2013-09-05Sure you find the colors pleasing - you are very used to them, for these are the colors most (if not all) movies use these days. (yellow and blue, or orange and teal). See:", "cabbibo, 2013-09-04Such elegant color choices!", "deamonpog, 2023-01-12Impressive!!! <3", "JoshScholar, 2020-12-26Oh, lol I didn't noticed the title.", "JoshScholar, 2020-12-26Is that a character from Wall-E?", "ChutneyPot, 2020-12-25So cool!", "dean_the_coder, 2020-12-24Thanks for the comments everyone! Happy Holidays!", "jcyuan, 2020-12-24cute!!!", "Carandiru, 2020-12-24adorable!", "404Glaciergargamel, 2020-12-24Remix: https://www.shadertoy.com/view/wtcyWr", "aiekick, 2020-12-23how i missed this one. super cool", "karexy, 2020-12-23Impressive", "shau, 2020-12-23Very nice. I love the lighting", "zproxy, 2020-12-17needs the fourth wall to allow 360 render", "Shane, 2020-12-17Love it.", "lz, 2020-12-17", "dean_the_coder, 2020-12-17Thanks @iq! I hadn't thought of doing that - Definitely better! (And thanks for the tutorials!)", "dean_the_coder, 2020-12-17Thanks @pjkarlik! In my earlier shaders I'd add the 'bumps' into the SDF, which in this case would mean altering the height of the floor plane based on a function of x and z. But I found that can slow things down too much, so recently I've tried 'flat' surfaces and applying texture by altering the normal vector. Seems to work quite well so far!", "dean_the_coder, 2020-12-17Thanks @xavierseb - That's about the same frame rate I get.  And I love the film too.", "iq, 2020-12-17Very nice, specially modeling!", "", "I prefer lighting if you do let some light wrap around the objects:", "", "max(0.,0.1+0.9*dot(ld, n)) // Primary light.", "+ max(0.,0.5+0.5*dot(ld * vec3(-1, 0, -1), n)) // Bounce light.", "pjkarlik, 2020-12-16wow - the warped reflections of the lights on the floor are nice!", "xavierseb, 2020-12-16Yes! so nice! really enjoyed the movie too.", "On my old linux Fedora laptop (basic Iris 550 graphics) this is doing 16 fps at 800x450 with AA,", "58 fps with AA turned off. The previous commenter might want to update his graphics drivers.", "Also the loop in march() can be reduced if it helps.", "jorge2017a1, 2020-12-16@dean_the_coder,", "It is a good difference .... it looks good despite removing the antialiasing .. it looks good ... the speed is 8.0 fps .... I was a little sad, because these days my machine was slow !! !!", "..........", "es una buena diferencia....se mira bien apesar de eliminar el antialias..se mira bien...la velocidad es de fps 8.0....estava un poco triste , porque en estos dias mi maquina se hizo lenta!!!!", "dean_the_coder, 2020-12-16@jorge2017a1 Try disabling anti-aliasing by commenting out line 22.  That should help!", "jorge2017a1, 2020-12-16good image quality and interesting !!! on my machine the speed of fps 1.8 in kubuntu !!", "....", "buena calidad de imagen e interesante !!! en mi maquina la velocidad de fps 1.8 en kubuntu!!", "Raistlin_fuego, 2022-12-14Incredible!!!", "iton, 2021-12-14mega!", "JessicaBosworth, 2021-12-14It gives the impression of a voluminous video, it's cool!", "Bowser, 2021-11-25ridiculously fantastic!", "jt, 2021-11-12Awesome!", "shicz86, 2021-11-11impressive", "apatilem18, 2021-10-26Perfect", "drone1, 2021-10-21super cool!", "HamzaHutchinson, 2015-05-06ip, that makes sense. I've removed mainVR. Thanks for checking it out!", "FabriceNeyret2, 2015-05-06this was done for multi-pedoncular-eyes aliens :-p", "iq, 2015-05-06It's not working in VR though (fragRayDir is not a constant, it's the ray direction for each pixel... So you are building a different camera matrix per pixel! - it looks pretty surreal)", "iq, 2015-05-06Very cool. I love the lens flares!", "HamzaHutchinson, 2015-05-04Thanks, everybody!", "", "FabriceNeyret2, I dig those stars! I wanted the background stars to be a bit drab though, because I wanted the focus to be the planet and the main star. Perhaps they're a bit too lifeless :\\", "", "reinder, good call! The thought should have crossed my mind to just do a ray v sphere intersection test. I've just changed it. Thanks for the feedback!", "poljere, 2015-05-03Awesome Hamza!", "aiekick, 2015-05-03i like it", "reinder, 2015-05-03Very nice!", "But you don't need ray marching for this scene. A (simple) ray/sphere intersection test will be a lot faster and more precise. For example the intersection test I have used here.", "FabriceNeyret2, 2015-05-03nice !", "Want to improve stars ? ;-)  https://www.shadertoy.com/view/XdsGWs", "Lio, 2015-05-03Great!", "anastadunbar, 2015-05-03That is an pretty planet.", "jniac, 2023-04-04absolutely beautiful, i'm afraid i've nothing else to say", "mrHenning, 2022-05-02I tried implementing this in Unity using a custom function in a lit shader graph, however, this does not respond to the placement of global illumination, do any of you have an idea what could go wrong?", "notwa, 2017-07-14on my computer, only one channel is returned by textureGrad for the grayscale texture, so the resulting image is blue. changing the .xyz at the end of the line to .xxx or using an RGB texture works around the issue.", "Dain, 2017-03-20I dunno if it is just my computer, but all I see is a black screen. Doesn't show any error msgs.", "iq, 2016-10-24Done, I added Fabrice's variance based contrast correction.", "P_Malin, 2016-10-17Goksel: Perhaps something like https://www.shadertoy.com/view/lsKGz3#", "Goksel, 2016-05-30Is it just me or the apparent luma of the image changes? Maybe a color grading pass at the end to match the previous average luma (can be calculated from the samples) could work, although at some performance cost?", "obidobi, 2015-03-21nice! I guess .zyx on line 43 should be .xyz", "iq, 2015-02-15Fixed the kernel to be -1 to 1", "Ramocles, 2015-02-15nice technique!", "Dave_Hoskins, 2015-02-14Thanks, I just can't see any visible difference from using -1 and 1, even when switching between the two at full screen.", "nimitz, 2015-02-14also, a 3x3 Kernel looks the same visually here.", "nimitz, 2015-02-14Very nice indeed.", "", "Dave: that's just a 5x5 2D kernel", "Dave_Hoskins, 2015-02-14A very nice tool for textures like walls or grass etc. I don't quite understand why i & j go from -2 to 2 in line 22 and 23.", "GregRostami, 2015-02-14That is so cool!  Looks amazing!", "AiHeadHunter, 2023-06-05dang this is awesome to jam out to!!!! blazin up now!!!", "turboplay, 2021-05-12very good I use it in one of my intros.", "gebrekaanbeter, 2021-05-07THIS IS AWESOME XD I LOVE IT", "dagelf, 2021-02-21Hey, the knobs don't work! :-p", "wax78, 2020-04-27Jorge2017a1 - It's not soundclound, it's pure syntesized music.", "jorge2017a1, 2020-04-27By the way a good soundcloud channel ... that music came to listen to many years ago, it is rare, because I do not know if you are the original author ..... Tripping (WIP) .....", "I'm just saying that I LIKE Hardcore ..... Angerfist --Yes /// is a very good song .... and more the new version !!!!", "...........", "Por cierto buen canal de soundcloud...esa musica llegue  a escuchar hace muchos a\u00f1os , es raro ello, pues no se si eres el autor original.....Tripping (WIP).....", "solo digo que me GUSTA el Hardcore.....Angerfist --Yes/// es una cancion muy buena....y mas la version nueva!!!!", "jorge2017a1, 2020-04-27Wow ... surprise ... first time you hear it ... and the sound is great ..... magnificent .... very good, .... good quality .... and thanks for sharing ideas. ....", "..........", "Guao...sorprende ...primera vez que lo escucha...y el sonido es grande.....magnifico....muy bien,....buena calidad....y gracias por compartir ideas.....", "wax78, 2018-11-13I have no words... you realized one of my dream there with all on gpu", "adt, 2018-09-13oh fcuk! awesome! gr8! (y)", "khlorghaal, 2018-09-04This is some hardcore computer wizard shit.", "jpkelly, 2018-04-10Nice stuff!", "May I please use some of your shaders for an upcoming VJ gig?", "JP", "jt, 2018-01-27awesome!", "kvick, 2017-11-23oh man this would be so amazing if you could grab and turn the knobs", "TambakoJaguar, 2017-09-09Wow, just awesome. One of the most advanced sound demos here!", "hopskotchrainbow, 2016-09-18", "shau, 2016-09-10Love it. Didn't know the sound capabilities were this advanced in the right hands", "srtuss, 2016-04-20@bergi", "yes is do! :P", "great job with your mashup! the mixing of all the soundshaders sounds great. thanks for letting me know", "bergi, 2016-04-09You do love the new sound feature undoubtedly", "I used the music in a mesh-up http://vimeo.com/defgsus/shadertoy", "Hope you like it", "rockeyda, 2015-06-27i love tweeking the levels on the samples and setting a few of them to 98.8, especially the bass sample.", "dila, 2014-10-13Great!", "srtuss, 2014-08-12thanks for all the kind words and love", "", "i didn't know this shader was playing differet patterns of notes on different gpus... so we're all probably hearing a different song ^^", "cce, 2014-08-12This is excellent. I love how simple the echo effect is.", "cha0s, 2014-08-10holy shit! <3", "vgs, 2014-08-07This is really good! I can't stop listening to it!", "Klems, 2014-08-04I love 303! This is insane.", "EvilRyu, 2014-08-03Amazing!!!", "Spankenstein, 2014-08-03Where is the resonance being used in your lowpass filter method?", "TomoAlien, 2014-08-02I dig that phat 808 beat!", "pixelbeast, 2014-08-01Awesome.", "PauloFalcao, 2014-08-01This is just Unreal! Amazing!!!", "Antonalog, 2014-07-31omg that rocks!", "nimitz, 2014-07-31Super cool, love the visuals", "poljere, 2014-07-31Amazing!", "Artoo, 2014-07-31jesus i feel like a neanderthal rubbing shoulders with a bunch of da vinci's!!!", "iq, 2014-07-31I know. When I heard it I was like \"wait, you can't do (IIR) filters in Shadertoy, so how...\". It sounds convincing to me.", "Dave_Hoskins, 2014-07-31That's a nice filter sound.", "iq, 2014-07-31Oh my, this is amazing!!! <3", "ahmadierfan, 2023-02-24actually max with 0 works lol", "ahmadierfan, 2023-02-24I have been experiencing some degenerate points as well @hnh but it was not due to division by zero, it was due to sqrt of a negative value, I have fixed it my using sqrt(max(value, FLT_EPSILON))", "hnh, 2022-12-05I had experienced some degenerate points on the larger symmetry axis (inside the ellipse) due to division by zero while evaluating the variable \"co\". This can be circumvented by the usual trick of adding some small positive number eps to the affected denominators, i.e. setting line 59 to co = ry + sign(l)*rx + abs(g)/(rx*ry  +eps); and line 68 to float rm = sqrt( rx*rx + ry*ry )", "+eps;, respectively. Since these points seem sufficiently far from the border, accuracy should remain unaffected in most cases.", "jt, 2021-09-13cool!", "oneshade, 2021-06-14Amazingly robust (at least on my computer), nice work!", "iq, 2021-02-01@strawbry_jam, Unfortunately, that doesn't compute the correct distance to an ellipse", "strawbry_jam, 2020-07-30https://www.shadertoy.com/view/3tXfRN", "Alternate method for distance. Probably could be improved.", "ollj, 2020-07-21mainimafe() of", "https://www.shadertoy.com/view/XttyWN", "has some precision increasing branches:", "- vertical discontinuity is evaded by moving to another vertex, this is fine due to low derivatives in that area.", "- diagonal mirroring makes sure that only the 2 quadrants with signs, that return highest precision is fed to the root solver.", "ollj, 2019-08-09yep, spere as special case of ellipsoid. special cases of shapes tend to make one determinant==0 in a more general inverse, which tends to divisions by 0. divBy0-ToCatch-cases seem to be paired with special cases of general shape solvers.", "paniq, 2017-09-11I figured it out. Passing the same size for both radii produces a determinant for `l` that is zero; m and l are then divided by this determinant, and then we have nans.", "paniq, 2017-09-11Okay. Apparently exactly passing vec2(0.3,0.3) produces a black screen. vec2(0.29,0.3) is okay. As well as vec2(0.31, 0.3) or vec2(0.3, 0.29) or vec2(0.3, 0.31). This is extremely weird.", "paniq, 2017-09-11Wow, something's really weird with this shader w my AMD mesa driver; if I replace the ellipse's radii with just vec2(0.3,0.3), I get a black screen. In fact, I can't seem to eliminate the `m` argument at all. What is happening here?!", "ollj, 2017-06-15no, a stretched sphere also stretches the whole domain, the whole (distance) field, lowering the first derivative, making the \"rings\" wider.", "such a matrix transform is irrelevant for raytracing, but is VERY relevant for raymarching.", "RavenWorks, 2016-11-07no, because then your distance vector is also crushed, but more in one axis than another, and there's no way to untangle how much to scale it by in each axis", "aiekick, 2016-11-07there is a subitility for this complex code ? for me an ellipse is just a crushed sphere so this code is sufficient : d = length( uv * vec2(0.5,1.)) - 0.5; no ?", "RavenWorks, 2015-07-15ugh sorry I just realised that shader was marked as a draft, should be visible now", "RavenWorks, 2015-07-12D'you have any idea why an attempt to figure out the normal from nearby samples would have these weird patches where it fails? https://www.shadertoy.com/view/XlXSWN", "kusma, 2015-06-01That latter comment seems to only apply for the degenerate case of ab.y = 0. Since the code doesn't cope at all with ab.x being 0, I guess that case could also safely be left broken. In such cases, one would want a line segment, not a ellipse.", "kusma, 2015-06-01You're also going to want to change line 51 to:", "", "co = min((p + 2.0 * g / rm - m) * 0.5, 1.0);", "", "Because sqrt() is undefined for negative values, and floating point accuracy sometimes gets us below. I haven't been able to trigger this for the d<0.0 case, so I don't know if it's needed there or not.", "kusma, 2015-05-31If you want glitch-free distances along the mid-line, change line 35 to this:", "", "float p = acos(min(q/c3, 1.0))/3.0;", "", "This is because acos() is undefined for inputs outside [-1, 1] range. Floating point inaccuracies pushes us *just* above 1 along the mid-line.", "JeremyChou, 2023-01-26There's an article in inspirnathan.com had explanined this, the title is \"Shadertoy Tutorial Part 15 - Channels, Textures, and Buffers\"", "iq, 2022-01-25Your first and second questions are answered by your third question.", "milesWaugh, 2020-07-13Sorry if this is kind of a simple question, but how do you take the data from the previous frame to use in the next frame? So that all the previous samples are kept onto the next frame? And what does \"Buffer A\" do? And what are Channels? Sorry, I can't find anything explaining what these are.", "Jacoby, 2016-09-08love this, looks fantastic!", "dila, 2016-08-13really nice. is this the thing now? monte carlo rendering?", "Nesvi7, 2016-07-23Amazing result... It's really cool.", "mr5iveThou5and, 2016-07-20Amazing!", "Shane, 2016-07-19Truly gorgeous. I love static renderings like these.", "noby, 2016-07-18Material looks a tad \"subsurface scatteringy\". All around excellent.", "eiffie, 2016-07-18Looks awesome. I get some black specs when calcNormal returns NaN.", "CPU, 2016-07-18alt + <downarrow> does not seem to work (chrome) so no way to reset in fullscreen!", "elpuri, 2016-07-18That light shaft look pretty damn juicy", "GregRostami, 2018-05-29Thank's again for the changes Fabrice.", "I posted my latest version here:", "https://www.shadertoy.com/view/4dVBR1", "FabriceNeyret2, 2018-05-29NB: is the 2.+ in p really useful ?   -5 without it", "FabriceNeyret2, 2018-05-29@greg:", "i must be initialized.", "GregRostami, 2018-05-28Here's my best cheat for a two-tweet version (No iMouse):", "", "278 chars:", "#define mainImage(o,U)                                                 \\", "float T = iTime*.3, i;                                          \\", "for( vec2 f = vec2(-3,3), r = iResolution.xy, u = (U+U-r) / r.y,   \\", "p = (2.+ r* vec2( sin(T*.6), cos(T+T)+cos(T))) / r.y;                                                  \\", "i++ < 20. ;                                                   \\", "o = abs(log(f*f)/vec2(16,7)).xxyy )                           \\", "u = vec2( u.x, -u.y ) / dot(u,u) + p,                     \\", "u.x =  abs(u.x),                                          \\", "f = max( f, vec2( -sin(dot(u+p,u+p))-1., dot(u-p,u-p) )); \\", "\\", "o.g *= o.a", "GregRostami, 2018-05-28OMG Fabrice ... That's like a complete re-write of the shader.", "That is just AMAZING!!  (Bowing down to the Master)", "", "Here's Fabrice's final version:", "340 chars:", "", "#define mainImage(o,U)                                                 \\", "float T = iTime*.3, i=0.;                                          \\", "for( vec2 f = vec2(-3,3), r = iResolution.xy, u = (U+U-r) / r.y,   \\", "p = (2.+                                                      \\", "(iMouse.z < .5                                           \\", "? r* vec2( sin(T)*(sin(T*.57)+1.), (1.-cos(T*2.11)) * sin(T*.437)+cos(T)) \\", ": iMouse.xy -r)                                         \\", ") / r.y;                                                  \\", "i++ < 20. ;                                                   \\", "o = abs(log(f*f)/vec2(16,7)).xxyy )                           \\", "u = vec2( u.x, -u.y ) / dot(u,u) + p,                     \\", "u.x =  abs(u.x),                                          \\", "f = max( f, vec2( -sin(dot(u+p,u+p))-1., dot(u-p,u-p) )); \\", "\\", "o.g *= o.a", "FabriceNeyret2, 2018-05-28-2:  sin(T)*sin(T*.57) + sin(T)  -> sin(T)*(sin(T*.57)+1.)", "FabriceNeyret2, 2018-05-28from greg version:", "", "my advice: use the #define trick only at the very very end. ;-)", "", "-4: m=iMouse: 1 single use -> inject", "", "-6:", "T = iTime*.3", "vec2(sin(T)*sin(T*.57) + sin(T), (1.-cos(T*2.11))*sin(T*.437)+cos(T))+1.)", "", "-5: (? (vec2()+1)*r : mouse) -r", "-> (? vec2()*r : mouse -r )", "", "", "-4:", "vec2 f=vec2(-3,3), r =", "...", "f = max( f, vec2( -sin(dot(u+p,u+p))-1.,  dot(u-p,u-p) ));    \\", "...", "o = abs(log(f*f)/vec2(16,7)).xxyy;        o.g *= o.a", "", "-2:   for ( vec2 declrs.... ;  i++ < 20.; o= ) ...", "", "-> 342 chars:", "#define mainImage(o,U)                                           \\", "float T = iTime*.3, i=0.;                                    \\", "for( vec2 f = vec2(-3,3), r = iResolution.xy, u = (U+U-r) / r.y, \\", "p = (2.+                                                \\", "(iMouse.z < .5                                     \\", "? r* vec2( sin(T)*sin(T*.57) + sin(T), (1.-cos(T*2.11)) * sin(T*.437)+cos(T)) \\", ": iMouse.xy -r)                                   \\", ") / r.y;                                            \\", "i++ < 20. ;                                             \\", "o = abs(log(f*f)/vec2(16,7)).xxyy )                     \\", "u = vec2( u.x, -u.y ) / dot(u,u) + p,               \\", "u.x =  abs(u.x),    \\", "f = max( f, vec2( -sin(dot(u+p,u+p))-1.,  dot(u-p,u-p) )); \\", "\\", "o.g *= o.a", "FabriceNeyret2, 2018-05-28quick glance:", "", "for a start, I don't know cases where while() is more interesting than for() ;-)", "", "final:", "o.rg += -log(g)/8.;", "o.bg *= abs(log(f)/3.5 )", "", "maybe fg could be a vector", "GregRostami, 2018-05-28Thank you Dave for your kind words.", "Here's my latest reduction of your original shader (with iMouse support):", "", "364 chars:", "", "#define mainImage(o,U)                                          \\", "float T = iTime, f = 3., g = f, i=0.;                       \\", "vec2 r = iResolution.xy, m = iMouse.xy, u = (U+U-r) / r.y,  \\", "p = (2.+                                                    \\", "(iMouse.z < .5                                          \\", "? (vec2(sin(T*.3)*sin(T*.17) + sin(T * .3), (1.-cos(T*.632))*sin(T*.131)+cos(T* .3))+1.) * r  \\", ": m )                                                   \\", "-r) / r.y;                                            \\", "\\", "while(i++ < 20.)                                            \\", "u = vec2( u.x, -u.y ) / dot(u,u) + p,                   \\", "u.x =  abs(u.x),                                        \\", "f = max( f, dot(u-p,u-p) ),                             \\", "g = min( g, sin(dot(u+p,u+p))+1.);                      \\", "\\", "o.rbg = vec3( g=-log(g)/8., f=abs(log(f)/3.5 ), g*f)", "GregRostami, 2018-05-27Here's the shader without iMouse.", "I can't think of anything else to make it smaller ... We need the black magic of Fabrice now!!", "", "347 chars:", "#define mainImage(o,U)                                         \\", "float T = iTime, f = 3., g = f, i = 0.;                    \\", "\\", "vec2 r = iResolution.xy, u = (U+U-r) / r.y,                \\", "p = (2. + (vec2(sin(T*.3)*sin(T*.17) + sin(T * .3),        \\", "(1.-cos(T*.632))*sin(T*.131)*1.+cos(T* .3))+1.) * r  \\", "-r) / r.y;                                            \\", "\\", "while(i++ < 20.)                                           \\", "u = vec2(u.x, -u.y) / dot(u,u) + p,                    \\", "u.x =  abs(u.x),                                       \\", "f = max( f, dot(u-p,u-p) ),                            \\", "g = min( g, sin(dot(u+p,u+p))+1.);                     \\", "\\", "o.rbg = min( vec3( g=-log(g)/8., f=abs(-log(f)/3.5 ), g*f), 1.)", "Dave_Hoskins, 2018-05-27Nice work Greg, that actually looks pretty neat, and still quite readable.", "Thanks man!", "GregRostami, 2018-05-27This has got a LONG way to go before reaching Nirvana, but here's my 1st golfing attempt at this gorgeous shader.", "403 chars:", "void mainImage( out vec4 o,vec2 U)", "{", "float T = iTime, f = 3., g = f, d;", "vec2 r = iResolution.xy, m = iMouse.xy, p, u = (U+U-r) / r.y;", "iMouse.z < .5", "? m = (vec2(sin(T*.3)*sin(T*.17) + sin(T * .3),", "(1.-cos(T*.632))*sin(T*.131)*1.+cos(T* .3))+1.) * r : m;", "p = (2.+m-r) / r.y;", "for( int i = 0; i++ < 20;)", "u = vec2( u.x, -u.y ) / dot(u,u) + p,", "u.x =  abs(u.x),", "f = max( f, dot(u-p,u-p) ),", "g = min( g, sin(dot(u+p,u+p))+1.);", "f = abs(-log(f) / 3.5);", "g = abs(-log(g) / 8.);", "o = min(vec4(g, g*f, f, 0), 1.);", "}", "otaviogood, 2014-03-08Wow, this is one of the best code size to awesome ratios I have seen.", "skumancer, 2014-02-28Dave always flashy, love it!", "yunhai, 2021-09-09Beautiful!!", "AndyKod, 2021-03-26mouse interaction +", "Zi7ar21, 2020-05-04wtf what does it do and why is it so lit", "granito, 2018-12-23saw this and thought of your shadertoy: https://old.reddit.com/r/EarthPorn/comments/a8tzbf/top_down_view_of_the_bottom_of_a_glacier_river_in/", "pyBlob, 2018-03-02cool, looks like those patterns you get when pressing a knife against butter and then gently lifting it up.", "cornusammonis, 2017-07-06Slight change, using simplex noise for initialization instead of a texture to avoid texture load time issues.", "poljere, 2017-07-06Super cool", "ewerybody, 2017-07-05Whow! Thats so crazy beautiful!! \u2665", "jt, 2016-12-29cool", "jdrage, 2016-10-04Try sourcing the swordsman video on iChannel1 of Buf A and hit the space bar every once in a while. Bomb.", "bleedingtiger2, 2016-04-24More than beautiful, it's majestically sublime o.o", "granito, 2016-04-21Stunning.", "ps. \"spacebar resets the system (useful in fullscreen)\"  Wish this was automatic with all shadertoys.", "FreeFull, 2016-04-19Beautiful", "iq, 2016-04-18It looks really really good!", "Shane, 2016-04-17Gorgeous example.", "tomkh, 2016-04-16One of the best reaction-diffusion fluid for a while. Also big thanks for a clean and tight code!", "Dave_Hoskins, 2016-04-15It would make a great print! Very nice.", "mvdl, 2016-04-15Beautiful!", "cornusammonis, 2016-04-15Added mouse controls", "panic, 2016-04-15This is beautiful!", "", "Try putting this code before '//initialize with noise' to play around using the mouse:", "vec4 m = iMouse;", "if (m.z > 0.0) {", "vec2 dm = m.xy - m.zw;", "if (dot(dm, dm) > 0.0)", "dm = normalize(dm);", "vec2 d = fragCoord.xy - m.xy;", "float adjust = max(0.0, (30.0 - length(d)) / 100.0);", "abd.xy += adjust * dm;", "}", "newJasper, 2021-12-14nice", "NK3DAvid, 2021-10-28this is so impressive", "xyxiao, 2016-09-07Great work,it looks very real.", "CaliCoastReplay, 2016-08-17Great stuff", "GottZ, 2016-06-06woopsie.. i did not think about this.. just use this one: (essentially the same)", "p += vec3(1.0, 1.0, 0.0) * iGlobalTime * 0.01;", "GottZ, 2016-06-06try this one: p = p - vec3(1.0, 1.0, 0.0) * iGlobalTime * -0.01;", "drone1, 2016-04-22Very pretty.", "hf719302901, 2016-04-06\u00e6\u00ad\u00a3\u00e5\u00a5\u00bd\u00e5\u0153\u00a8\u00e7\u0153\u2039\u00e4\u00bd\u00a0\u00e7\u0161\u201e\u00e5\u008d\u0161\u00e5\u00ae\u00a2\u00e3\u20ac\u201a", "jt, 2016-02-29nice", "Dave_Hoskins, 2016-02-17They are super soft! Very cool.", "Shane, 2016-02-17I like this. Really pretty.", "candycat, 2016-02-17Thanks all", "jackdavenport, 2016-02-17Wow! Looks great", "aiekick, 2016-02-17nice", "01000001, 2023-02-15I love this so much.", "FabriceNeyret2, 2022-11-01@SFR75: the problem is with the \"new\" browser security protocol for external media (here, soundcloud ).", "\u2192 try the restart button, or try clicking in the window during loading, or try changing browser.", "SFR75, 2022-11-01I don't see anything on any browser. Have tried to add music to iChannel2, but visually this doesn't change anything.", "Mijin, 2022-06-24For those who don't see anything: just click on iChannel2 (not settings, not the x, just the box itself), select music tab and pick any music file.", "oneshade, 2021-09-05Wooooooah! This is incredible!", "LiquidSentience, 2021-08-23Yea unfortunately this does not show anything. It seems to be something because of the SoundCloud streaming not working", "FabriceNeyret2, 2020-02-07... but it's ok in firefox.", "FabriceNeyret2, 2020-02-07same here, because the soundcloud source is bufA and B is not starting. Effect of this \"security feature\" again; what a pain. :-(", "JoshScholar, 2020-02-07I just get the background.  No art.  RX 470, chrome", "betairya, 2019-08-11wtf lol", "CLPB, 2018-09-24That's one way to retrofit texture loading into shadertoy...", "scratch13764, 2017-03-25HOLY OMG WOW THIS IS FANTASTIC", "MacSlow, 2016-12-10W... T... F?! Most impressive!", "BigWIngs, 2016-11-24What ... the... .... damn that's some clever shit!", "cxw, 2016-11-10@huttari (and anyone else wondering) --- the BufA and BufB shaders both take the audio from SoundCloud in iChannel0.", "@and awesome piece of work!", "shau, 2016-08-14Wonderful! Reminds me of Apex Twin - Equation. Or a ZX spectrum loading from tape", "huttarl, 2016-06-29Wow. So where do you point to the mp3 audio stream? I can't find it.", "RomBinDaHouse, 2016-05-10Thats cool!", "It reminds me good old ZX Speccy times, cool loaders, something like this one https://youtu.be/YV_KZSJzH4A?t=24", "iq, 2016-05-06Will add the feature!", "Dave_Hoskins, 2016-05-06It's a shame we can't save mute toggles.", "bit2shift, 2016-05-06Jezz, kill that atrocious sound.", "drone1, 2016-05-05Bonkers.", "xdaimon, 2016-05-05Blew my mind", "TambakoJaguar, 2016-05-04Wow, just awesome!", "quisten, 2016-05-04that was excellent! I have no idea how this works!", "Jacoby, 2016-05-04Awesome", "ikamthania, 2016-05-04Wow thats brilliant!!!", "KylBlz, 2016-05-03how epic!", "cubby208, 2016-05-02Would it be possible to convert this so that it works with other sound files, ones in frequencies commonly heard by the human ear?", "dila, 2016-05-02incredible, and i listened to the whole thing!", "Phi, 2016-05-02it's impressive !", "coyote, 2016-03-17Simply unbelievable!!!", "(...but, on the other hand, we wouldn't expect anything less from you... )", "Btw, the painting is very nice too.", "FabriceNeyret2, 2016-03-17WAAAAAAAAA !  (how did I missed it ?)", "", "And from reading your comments, you seem to have done incredible in depth analysis of every aspect.", "I'm impressed by all facets !", "jt, 2016-02-29WOW!!!", "anastadunbar, 2016-02-26I thought my WebGL crashed again. This is also very interesting.", "warlock, 2016-02-20this is... jaw-dropping!", "gloinart, 2016-02-19Haha, coool", "iapafoto, 2016-02-19super super good", "and, 2016-02-18@reinder: iPhone app doesn't support any sound.", "Dave_Hoskins, 2016-02-18Great! I love the painterly formation and the spreading effects. More pictures please!", "reinder, 2016-02-18Wow!!! this is really cool.", "Can you publish it using 'public+api'? I am curious of this works in the new version of the Shadertoy iPhone app.", "834144373, 2016-02-18This is amazing.", "psonice, 2016-02-18Gorgeous. Streaming the picture in alone is impressive, but the implementation is stunning", "GregRostami, 2016-02-18Go and ... GOOOOO! So cool!", "iq, 2016-02-18Woooooah!", "SharkyUK, 2016-02-18Impressive!", "weyland, 2016-02-18OMG, the error correction and encoding o_O", "Cubeleo, 2016-02-18Wow, yep, Chrome is great and this is amazing!!!", "and, 2016-02-18note: In Firefox, as of right now, streams won't autoplay until you hit Pause/Unpause/Reset time. Shader toy needs a fix.", "and, 2016-02-18@Cubeleo: I tested it on Windows Chrome, Firefox, Opera with DX9 and DX11 backends. Linux Chrome and OS X Chrome. With different system audio settings.", "In your case Chrome should give the best results.", "Cubeleo, 2016-02-18What browsers run this correctly?  I may be hopeless since I'm on OS X.", "aruslan, 2016-02-18This is stunning.", "eiffie, 2016-02-18Very cool and nice art!", "poljere, 2016-02-18This is amazing.", "demofox, 2016-02-18This is pretty darn amazing :P", "chrisjj, 2018-02-07Graphics now works https://i.imgur.com/oIzm5lk.png ... but sound is gone.", "", "That's on Mac Safari, Radeon Pro. On PC, graphics look as good as before https://i.imgur.com/o1ADGMC.png and sounds still works.", "", "What change did you make?", "Dave_Hoskins, 2018-02-07@chrisjj So I've made it WebGL1 compatible just for you, there must be plenty of other shaders you can't see. Although I suppose no-one uses the 3D volume texture, yet.", "Dave_Hoskins, 2018-02-07It's probably the fact that the volume resouce was in Channel2, that Shadertoy's code set up the necessary script to access it internally.", "chrisjj, 2018-02-07No. The error persists.", "Dave_Hoskins, 2018-02-06I'm only getting that error on my iPad which is not WebGL 2 compatible. I've removed the 'textureLod' is it OK now?", "chrisjj, 2018-02-06Dave, your change made no difference to the error on Mac Radeon Pro. The error did not and still does not appear on the different graphics card I used for looking at the line 82 issue.", "", "That error is \"'sampler3D\" : Illegal use of reserved word'. Any idea how that's even possible? 'sampler3D' does not itself appear anywhere in the source. Perhaps significant is the fact the error message location is nowhere near code - it is after line 1, between two comments.", "Dave_Hoskins, 2018-02-05So the error has gone away then? Good. I'm guessing you can't use 3D textures on your computer.", "abs made no difference to me 4 years ago either, but some chip sets have more strict compilers than others.", "chrisjj, 2018-02-05Re the line 82 problem, abs makes zero difference here https://i.imgur.com/CKUo4fW.png and IQ's max does indeed lose the bright centres https://i.imgur.com/DbZZnv1.png . Conclusion: pow's undefined behaviour here (tested for values down to -1) is to add an abs! Remarkable.", "", "What would be great is for Shadertoy to run a strict valldation, but I guess that would be much work.", "Dave_Hoskins, 2018-02-05@chrisjj, I'm not using 'sampler3D', but it IS using the new 3D texture (WebGL 2), how about now I've reverted to the old way.", "chrisjj, 2018-02-05Dave, on Mac Radeon Pro, this fails thus: https://i.imgur.com/sAshr7p.png", "Dave_Hoskins, 2017-09-06My very first shader now uses the latest volume texture. I had to scale it up slightly to match the 2D texture one.", "demofox, 2014-07-29Amazing!", "Kecho, 2013-03-17Dave I am new to shader programming, and this is some stellar art. I am excited to reverse engineer your shader and learn more stuff. I wish shadertoy had something like a follow button, keep it coming! beautifully done!", "PauloFalcao, 2013-03-08Nice! Now I can see the effect! Very cool!", "Dave_Hoskins, 2013-03-07OK thanks for spotting the problem, it's annoying as the three machines here (PC and Mac and ATI laptop) seem fine with it. But rules are rules with GLSL.", "I can't use 'max' because it removes the bright cloud centres, which is the main feature of the shader!", "I've used 'abs' instead.", "Cheers.", "iq, 2013-03-07line 82 is making the clouds look completely black in many machines. it's because pow cannot get negative numbers. if you change the line to \"res.xyz = res.xyz + pow(max(.95-f,0.0), 26.0) * 1.85;\", then the clouds look as intended instead of all black...", "malinowysmiech, 2021-10-19Neat!", "chris_iapetus, 2021-10-15first visit here.", "", "mind.", "blown.", "topal, 2021-09-22niceeeee", "Caineluo, 2021-09-13very nice !!", "toto263, 2020-01-30@ADOB Thank you. I really appreciate.", "ADOB, 2020-01-30toto263", "Sorry I don't check back here often. If you're still interested, then feel free to use it.", "toto263, 2019-09-06Can I use your visualizer in my commercial music player?", "lollo54851, 2016-11-11Why can't see any effects now?", "iq, 2015-04-10beautiful", "AaronTerg, 2021-10-09wow ! I love the adding of sand dune", "dr2, 2020-12-31Not sure about the aerodynamics", "Plento, 2020-12-29That modeling is sweet!!", "dean_the_coder, 2020-12-29@Shane I\u2019d love to make a \u2018Baby Yoda\u2019 but I know I\u2019d end up making his face just look plain weird!", "dean_the_coder, 2020-12-29Thanks everyone! @ChutneyPot - I do like a bit of sci fi! Most of my recent shaders are inspired by movies: Robocop, Hellraiser, The Shining, Walll-E...", "iq, 2020-12-29Amazing, really really nice!", "ChutneyPot, 2020-12-29Love it! You have a knack for sci-fi, don't you?", "Shane, 2020-12-29Very nice, especially considering the code size. It also runs really well on my machine. Some, if not all, of the scenes in Mandalorian are amazing. At some stage, I'd like to do something that at least captures that essence.", "athibaul, 2020-12-28Nice modeling!", "jorge2017a1, 2020-12-28very beautiful scene .... and very surprising the speed of the spaceship ..... the fps is good 6.4 !!!! hahaha .... well my machine is saturated with data !!!!!", "..........", "muy bella escena .... y muy sorprendente la velocidad de la nave espacial ..... el fps es bueno 6.4  !!!! jajajaj....bueno es mi maquina que esta saturada de datos!!!!!", "blurryroots, 2022-12-03Yes!", "scratch13764, 2018-11-04THIS IS SO COOL", "emdeka87, 2018-02-13Wow! you could release this as a mobile game.", "jt, 2018-01-24wow!", "ingagard, 2017-11-17This has amazed me soooo many times. Getting tired of thinking how much work went into this.  IT!", "prozacgod, 2017-09-12This is pretty fun, great job!", "MarioNaybor, 2017-09-12i like it", "ua_daart, 2017-09-08awesome!", "SoftBook, 2017-08-29wow) that is great)", "Dave_Hoskins, 2017-07-26@barakooda, try clicking on the image to active the key reading.", "barakooda, 2017-07-26cant play it ,does not move :-(", "on my msi lpatop.", "Duke, 2017-07-25Amazing!", "unbird, 2017-07-25Wow, very impressive.", "knarkowicz, 2017-07-25@movAX13h It's a dungeon crawler. It can't be easy by definition .", "knarf, 2017-07-25Works on my iMac", "movAX13h, 2017-07-25Great work on the sprites and the gameplay! Perfect! And difficult!", "knarf, 2017-07-25@knarkowicz Dosn@t work on my MacBook Pro, but that one only has an Intel chip. Will retest it on my iMac later.", "knarkowicz, 2017-07-25@markusm Phew! Good to hear that it works now.", "markusm, 2017-07-25@knarkowicz Shader works fine now on my iMac. Great shader btw!", "knarkowicz, 2017-07-25Thank you for the nice comments!", "@FabriceNeyret2: Yes it's on purpose. With key autorepeat it's very easy to die. Just added KEY_AUTOREPEAT define to buf A. Uncomment it in order to enable key autorepeat.", "@knarf @markusm: Judging by the screenshot (thanks knarf!) it looks like text rendering code is broken on Mac. It's TextSDF (line 201) inside Image buffer and somehow condition that p is outside [0;1] range doesn't work there. I just rewrote it in a different way, maybe it will help? Anyway I need help here, as I don't have access to a Mac .", "EntityBlack, 2017-07-25Wow!", "FabriceNeyret2, 2017-07-25nice !", "is lack of key autorepeat on purpose ?", "knarf, 2017-07-25I'm having the same problem as markusm on my Mac.", "markusm, 2017-07-25For me on my iMac the font texture is overlaid on top of the shader, making the graphics within barely recognizable ?", "Nesvi7, 2017-07-25Excelent!! Love Diablo 2 soundtrack!", "Shane, 2017-07-25 Mind blowing effort. This ticks every box for me.", "flockaroo, 2017-07-24nice! you nearly forget that youre on shadertoy, when playing this :-)", "CPU, 2017-07-24Excellent!", "BigWIngs, 2017-07-24Man... crazy that you can make something like this this fast!", "knarkowicz, 2017-07-24Thanks!. One of ways to kill him is to use the room above him with two traps and orb.", "Dave_Hoskins, 2017-07-24Never mind, I got it. That Diablo music takes me back...", "Dave_Hoskins, 2017-07-24How do you kill the skelly? I run out of traps.", "Lovely sprite game BTW!", "udotai, 2023-03-12Wonderful! Really helps in understanding the core concepts of SDF lighting without the extra overhead involved in projection, shading, occlusion etc that comes with 3D. Also makes 2D forms look really cool and adds a level of realism often lacking in the 2D world  thank you!", "scratch13764, 2018-10-21I made a project like this, except the way I calculated the shadows was in a more raytracer-ey style, I cast 360 rays off of each point and increased the brightness of the point every time a ray hit a light source. While in theory, mine should be perfect (Assuming you could get thousands of rays instead of 360 and have a tiny step size), this looks a lot better because it can render realtime instead of waiting 2 seconds every frame. I really like what you did and I think I'll start learning about this shadow concept.", "letsparty1793, 2018-01-03nice tutorial", "ollj, 2017-09-25I find this as (one of) the best soft-shadow implementations.", "These tent to have a problem for the tangential point (and nearby area) where a ray touches a surface tangentially. This matters more then you add a domain, stretching the point to a line, making it 3d:", "https://www.shadertoy.com/view/llfcDS", "unbird, 2017-06-29Nice work Maarten, Thank you very much. For someone looking for arbitrary polygons/stars have a look (*shameless plug*) here : https://www.shadertoy.com/view/4sXBWs (WIP, experimenting with individual colors and blending). Wonder if one can avoid atan (since I believe it's quite costly).", "markusm, 2017-06-29Wondering if it would be possible to animate the outline, like the selection in a painting program.", "timpernagel, 2017-03-21Great setup! Its a perfect starting point to understand how SDF works.", "", "One question: If a light is close to a border of shape and already half overlaping it, some lightning-artefacts appear. Where do they come from? I'm assuming they are produced by some raymarching-aliasing-issues... Do you know any tricks to avoid or reduce them?", "Maarten, 2016-07-24You're welcome, David.", "And thanks, much more elegant! It's replaced.", "davidbargo, 2016-07-24This is really useful, thanks!", "Btw, mergeExclude can be replaced with return min(max(-d1, d2), max(-d2, d1));", "anastadunbar, 2016-03-23What about polygon?", "FabriceNeyret2, 2016-02-02funny: in full screen the lights trajectory scales, but not the shapes :-D", "Maarten, 2016-02-02hi anastadunbar, I've added it. I'm sure it is possible to make it a little more elegant, without the conditional, but hey, it works", "anastadunbar, 2016-02-02Will there be a combine function for this?", "jt, 2015-12-17Very usefull & looks nice!", "rougier, 2015-08-19By the way, you can find other SDF markers at: http://jcgt.org/published/0003/04/01/", "squid, 2015-08-18Well lit! One of the best 2D lighting setups i've seen!", "iq, 2015-08-18Looks so classy and beautiful!", "rougier, 2015-08-18Gorgeous !", "tly, 2015-08-18nice lighting", "Maarten, 2015-08-18Thanks a lot, Fabrice!", "Changing that line made the AO brighten instead of darken. I changed it adding 1.0-", "FabriceNeyret2, 2015-08-18line 284:   pow(a -> pow(abs(a)", "FabriceNeyret2, 2015-08-18was it meant to be all-black inside the limit isovalue ?", "aiekick, 2015-08-17beautifull scene", "metabog, 2015-08-17Awesome!", "izutionix, 2023-04-19the link at line 4 is down, here is the latest archived version: https://web.archive.org/web/20151229203152/https://www.stuartdenman.com/improved-color-blending/", "FabriceNeyret2, 2021-04-25 \"blending in rgb space is a bad\" : depends on the meaning of the operation.", "Physical blending of light ( via reflections, transparency, added source ) *must* be done in RGB space ( or ideally, spectral, and don't forget the final sRGB correction ).", "Artistic color shades and interpolations: then, ok ;-)", "Getchell265, 2018-11-29very nice", "Tynach, 2018-10-11This is pretty cool, though I feel like your colorspace conversion code could be optimized to better utilize vectors. If you want some reference code, I've written several shaders that perform colorspace conversions of various sorts. While I do have a few with the L* trc parameters in it, I admit I haven't tried converting to L*a*b* nor Lch before. I should make a quick Lch shader some time.", "ExNihilo, 2018-10-09This is cool.", "Has anyone applied the tristimulus values for luminance accuracy? It seems like there would be a linear function for that.", "hornet, 2018-10-09Applying a double-smoothstep to the rgb-lerp appears to achieve almost the same result", "vec3 gradRGB_ss = mix(col2, col1, smoothstep(0.0, 1.0, smoothstep(0.0, 1.0, gradient) ) );", "", "I wonder if applying an inverse-smoothstep^2-transform to your solution would make yours more perceptually linear while maintaining the saturation-properties?", "jt, 2018-08-17very interesting", "nimitz, 2016-06-03paniq: included the links in the top comment, I wrote the functions myself and I haven't tested the Lch stuff extensively, so there might be a typo somewhere in there, use at your own risks", "paniq, 2016-03-12I'd like to do more with CIE Lch (the cylindric encoding is a useful vector space), where is the implementation from / what documentation was it based on?", "nmz, 2015-12-06Further optimized the algorithm for getting the saturation.  The blending function is now down to 15 instructions on a Radeon 5670 (3.2 cycles)", "teadrinker, 2015-12-04Very interesting!", "Yes it makes sense to maintain saturation, but at the same time we don't want to have a half-rainbow-snap discontinuity, so we want to gradually start accepting saturation loss as we approach color opposites. This algorithm seem to do just that!", "", "Btw, I think most people who say rgb blending is bad just think of the lack of gamma correction. This stuff is kind of the next level.", "rcread, 2015-11-28Ok, last post, I promise.  This leaves the end points unchanged, it's pretty fast, and some might like it.", "", "float min( vec3 a ) { return min( a.x, min( a.y, a.z ) ); }", "float max( vec3 a ) { return max( a.x, max( a.y, a.z ) ); }", "vec3 color_lerp( vec3 col1, vec3 col2, float gradient ) {", "float m = ( max( col1 ) + max( col2 ) ) / 2.;", "vec3 c = ( col1 + col2 ) * .5;", "float d = 2. * abs( gradient - .5 ) * min( c );", "c = ( c - d ) / ( 1. - d );", "c *= m / max( c );", "float s = step( .5, gradient );", "gradient *= 2.;", "return ( 1. - s ) * mix( col1, c, gradient ) + s * mix( c, col2, gradient - 1. );", "}", "rcread, 2015-11-27Oops, major caveat.  You can't see it in your shader, but the blend colors are changed by my code if they're not fully saturated.  Still someone might find this useful.", "rcread, 2015-11-27I should say yours is more saturated mid-gradient unless you bump up the parameter in mine, but then my gradient is less smooth.  I just thought smaller or faster might be worthwhile, or having a simple parameter to adjust might give you a look you like, or it might give someone an idea for a better solution.", "rcread, 2015-11-27This is awesome.  Here is a simpler function with similar effect.", "", "float min( vec3 a ) { return min( a.x, min( a.y, a.z ) ); }", "", "vec3 color_lerp( vec3 col1, vec3 col2, float gradient ) {", "vec3 col = mix( col1, col2, gradient );", "float d = .3 * min( normalize( col ) );", "return ( col - d ) / ( 1. - d );", "}", "playbyan1453, 2021-03-09Hey, i have issue wit your technique. When i render complex sdf's like mandelbulb it has artefacts like outline looking shadow is there any fix?", "gravitee, 2020-05-11Oops. Sorry, Didn't read comments before bumping.", "gravitee, 2020-05-11There is some error with the raymarching, as if you replace line 178 with:", "", "vec3 ro = vec3( 3.0*cos(0.1*iTime), 1.0, -3.0*sin(0.1*iTime) );", "", "and let it rotate, the raymarching can't handle the close distance. Shadows look great though!", "yuletian, 2018-12-24Great technique! Amazing Work!!", "Good, 2018-09-02Great technique! Thank you for sharing this.", "There is one more problem to solve to make it perfect:", "if you make boxes really slim", "( replace line line 36 with sdBox( qos.xyz-vec3( 0.0,0.25, 0.0), vec3(0.01,0.8,0.01) ) );  )", "you will see that far edge of the shadow is dark and big, while in reality, it has to disappear", "antovsky, 2018-04-20Ah, thanks for the insight! Still making my way through that monster of a presentation, thanks for pointing out the relevant bit though. Great talk, so much useful info inside! Hopefully will be on the vault soon, I suspect video may help", "sebbbi, 2018-04-19antovsky: This triangulation approach breaks if you don't have proper distance field. Conservative distance estimator is NOT enough. The commonly used min based subtract results in conservative distance estimate, but it's not the actual distance to the closest surface. It is shorter in many cases. Your sphere cut is a perfect example of this problem. You need actual distance field for this technique to work.", "sebbbi, 2018-04-19antovsky: We don't have this problem. The analytic distance field generated by subtracts is no longer correct. It doesn't tell you the true distance to the closest surface. We solved this problem by generating only 2 voxel wide narrow band with analytic distance field subtract, and then used eikonal equation to enlarge the distance field. This doesn't have problems with subtracts. Distance field remains correct. See pages 10+ of my GDC 2018 presentation: https://www.dropbox.com/s/s9tzmyj0wqkymmz/Claybook_Simulation_Raytracing_GDC18.pptx?dl=0#", "antovsky, 2018-04-18I'm curious if you have any advice on improvements for maps with curved subtracts, for example if you replace the current with:", "", "return -min(- min( sdPlane(     pos.xyz-vec3( 0.0,0.00, 0.0)),", "sdBox(       qos.xyz-vec3( 0.0,0.25, 0.0), vec3(0.2,0.5,0.2) ) ),", "sdSphere(qos.xyz-vec3(0,0.8,0), 0.5));", "", "These seem to produce some of the worst cases I've seen...", "I've been using positional dithering along the ray to break up the artifacts with some success, but nothing to has been a slam dunk worth posting :\\", "sebbbi, 2018-04-04It's important to notice is that sharp edges/spikes (or floating small features) cause the biggest banding issues. This is luckily also where two consecutive SDF measurements refer to a surface point close to each other, meaning that triangulation result is close to perfect. Rays passing along a surface will not triangulate properly (SDF samples don't measure distance from the same point). But these rays have no banding issues either. So this trick improves the worst case banding, but doesn't help much with areas that don't have much issues to begin with.", "iq, 2018-03-28The catch is that triangulation works when the two measures are distances to the same point. In our case, the SDF returns the closest distance to most probably different points. However the assumption is they are close enough that triangulation gives you a pretty good approximation to the closest point on the surface that is closest to the line we are marching on (a perpendicular distance). Given it's an improvement and it's virtually free, there's no reason not to use it compared to the traditional method.", "", "The need for a marching step scale factor, biases or clamping, is a totally orthogonal issue to the traditional vs new proposed distance estimation of S.Aaltonen (sebbbi) - you might still want to use those tricks regardless of the underlying distance estimation method (direct or improved/triangulated), since after all we are scanning the ray line at intervals that might fail to capture the actual closest distance, which is needed to prevent light leaking.", "sebbbi, 2018-03-28Shane: The reasoning is that SDF sample gives us distance to the closest surface. If you have two consecutive distance samples, you can calculate the surface location using triangulation. It is exactly the same idea that's been used by mobile link towers and GPS satellites for ages. Slide 39 of my GDC presentation has a nice image about this.", "Shane, 2018-03-28 I haven't read up on the reasoning behind it yet, but at first glance, this is a fantastic, and welcome, improvement. I'm looking forward to trying this out.", "", "With fewer iterations, I find I still need to use things like \"clamp(h, a, b),\" but the second version looks better in that case as well. It'll be interesting to see how these adjustments fare with other scenes.", "Dave_Hoskins, 2018-03-28I see you've silently fixed the shadow issue, is that with the 'min(0.'? And how 'mds2'  deleting posts?", "Dave_Hoskins, 2018-03-27But you can still get good results the 15 steps, so that's 17 fewer calls to the map function. And what's the weird shadowed edges along the top face?", "iq, 2018-03-27Well, that would be 20% slower, especially in empty spaces. The cost square root and division is insignificant next to the SDF evaluation, so this is a \"free\" technique that gives a better result out of the box without having to find magic constants. Of course, you can still apply more magic constants on top of it, but at least the starting point is a better one than my original version of the algorithm.", "Dave_Hoskins, 2018-03-27But the original isn't so bad if you adjust the distance value t += h*.8+.01; even with a smaller loop.", "playertk, 2020-10-27THX", "FabriceNeyret2, 2020-10-26welcome to your first shader !", "", "Note that at this stage, the shader is equivalent to just", "vec2 p = (2.*fragCoord.xy-iResolution.xy) / iResolution.y;", "fragColor = vec4( 5. / (40. * abs(2.*length(p)-1.) ) );", "BetaSoftCologne, 2022-08-30Reminds me of good old Soundtracker. And cute music, what is it?", "toto263, 2019-09-06Can I use your code in my commercial music player?", "sitonmoon, 2018-01-30pretty funny!", "Jebiveter, 2015-08-15What's the song???", "oneshade, 2021-01-20Beautiful!", "GregRostami, 2018-01-31We've been reducing this gorgeous shader here:", "https://www.shadertoy.com/view/MtSBDc", "MacroMachines, 2017-02-13I like it with line 8 sin changed to fract", "alexh, 2016-03-19how the hell did you come up with this @_@", "FabriceNeyret2, 2015-06-25Note that the shader is very cool too without the min (close to the end) !", "FabriceNeyret2, 2015-06-25Just for the fun of it: a version compacted down to 454 chars ( -155 )", "float t=iDate.w, d = 2.5, r, c,s;", "vec3 q,p,l;", "", "#define m(a) mat2(c=cos(a),s=-sin(a),-s,c)", "", "float map(vec3 p) {", "p.xz*= m(t*.4); p.xy*= m(t*.3);", "q = p+p+t;", "return length(p+sin(t*.7)) * log(length(p)+1.) + .5*sin(q.x+sin(q.z+sin(q.y))) - 1.;", "}", "", "void mainImage( inout vec4 o, vec2 i ) {", "for(int k=0; k<6; k++)\t{", "p = d* normalize(vec3(i/iResolution.y - vec2(.9,.5), -1)); p.z+= 5.;", "r= map(p);", "l = vec3(.1,.3,.4) + vec3(5, 2.5, 3)* .5*clamp(r-map(p+.1), -.2, 2.);", "o += .7-.7*smoothstep(0., 2.5, r) ; o.xyz *= l;", "d += min(r, 1.);", "}", "}", "FabriceNeyret2, 2015-06-25I don't even understand how line #16 compiles:", "vec3 p = ... + normalize(vec3(p, -1.))...", "Kali, 2015-05-17Wow it really looks good. As usual from the great nimitz", "vgs, 2015-05-13mesmerizing!", "Hex, 2015-04-06I hope this person isn't stealing your work and profiting from it. https://play.google.com/store/apps/details?id=com.syntopia.ether looks like they have posted a few users shaders as paid wallpapers.", "coyote, 2015-02-04Very nice!", "CPU, 2014-11-25Sweet!", "EDawg, 2014-11-24That is really awesome! Great job!", "iq, 2014-11-23Super beautiful!!", "inferno, 2014-11-23Beautiful!", "neoe, 2020-09-09obfuscated shader code", "yucong, 2020-04-02Incredible!!!", "xot, 2019-03-20Bravo.", "starea, 2019-03-20What the... god alike!", "Blindleistung, 2019-02-13wow. Love it!", "Carandiru, 2018-12-04bah! you guys are all a bunch of fucking retards.", "j/k", "Metin, 2018-09-02what are you, a wizard?", "hk_shao, 2018-08-29amazing!", "reinder, 2018-08-26I created a smaller quine here.", "ttg, 2018-08-22No font texture, great!", "iapafoto, 2018-08-21This one is already incredible!", "reinder, 2018-08-21Thanks! You can find a nice explanation of this shader here.", "emdeka87, 2018-08-20Wow! reminds me of this: https://en.wikipedia.org/wiki/Tupper%27s_self-referential_formula", "Harha, 2018-08-17This was clever! I've never seen this kind of tricks before so I was baffled for a while, thanks for that!", "josplode, 2018-08-16Holy... quines aren't normally impressive because they just take advantage of print formatting and do a single recursion, but this is something else", "slerpy, 2018-08-12That is just amazing! It took me way too long to figure out how it works.", "pellicus, 2018-08-12cool! and clever!", "i took some moments to figure out how it works, nice trick!", "nicoptere, 2018-08-12:O how on earth is that even possible?", "reinder, 2018-08-12FabriceNeyret2, I'm looking forward to see a really compact quine created by you", "Rugged, 2020-11-03Wow great job! I found it looks more like real water though if you add this:", "col = mix(col, vec3(0.0, 0.0, 0.0), 0.7);", ", on line 588. But what do I know lol!", "youdiansao, 2019-07-24bravo\uff01\uff01", "Phi, 2016-02-28Very impressive !", "frankwer, 2013-09-30Love the colors, lights and water.", "reinder, 2013-09-30@Kali: wow, your version looks really great! I like your colors and mood (and the stars ;)).", "ssdsa, 2013-09-26Wow, really great!", "simesgreen, 2013-09-26damn, this makes my own procedural city look like potato printing!", "vanburgler, 2013-09-25Wow, really nice!", "vanburgler, 2013-09-25Wow, really nice!", "choard1895, 2013-09-25Truly fantastic!", "poljere, 2013-09-24Beautiful!", "reinder, 2013-09-19Thanks! I have made some minor optimisations and added clouds and the moon.", "PauloFalcao, 2013-09-19Awesome!", "iq, 2013-09-19Wow, supper impressive. Especially considering the amount of detail and how easy it is to overflow the instruction limit in WebGLSL. Fantastic!", "morgan3d, 2013-09-19This is really impressive modeling.", "fb39ca4, 2013-09-18Can you could add some gondolas?", "Antonalog, 2013-09-18Excellent!!", "reinder, 2013-09-18It should look like cords of lights. The shader is loosely based on this picture: http://www.robynhobson.com/wp-content/uploads/2013/05/Venice-at-Night.jpg", "Dave_Hoskins, 2013-09-18Amazing. I love the way some of the lights go out in the rooms. What are the lights above the window fronts?", "fb39ca4, 2013-09-18Beautiful", "reinder, 2013-09-18If the shader is running slow, undefine SHOW_BRIDGES or SHOW_GALLERY (comment lines 10 and 12)", "oneshade, 2021-04-07Er, circles (or 2-spheres ).", "oneshade, 2021-04-07I feel like the blur should follow the path of the spheres, is that incorrect?", "iq, 2020-02-10I see. I'm thinking of motion blur as in cinema, not as in a game I guess. Basically the shader is trying to reproduce what a film camera would capture at shutter angle of 360 (full aperture, during 1/24th of a second), regardless of how fast or slow the shader renders. But I understand what you are saying too now.", "xTr1m, 2020-02-09Well that depends on what it is that we actually want. Motion blur is a desired effect to display the motion that happened between the last frame and the current one. If you have a camera with a fixed shutter at 24Hz, then that's your framerate, and your motion blur should also calculate in 24Hz. But in realtime graphics, depending on a lower or higher framerate, the motion between frames can either be shorter or longer, so the effect needs to take framerate into account. Obviously, lower framerates will cause a more blurry picture, just like longer camera appertures would.", "iq, 2020-02-09The velocity is already framerate independent, it's fixed at 1/24th of a second. If I do  iTime/float(iFrame) then I get a velocity that is dependent on framerate -  the opposite of what we want!", "saidwho12, 2019-01-25Amazing, do you have any explanation on how you solved this?", "xTr1m, 2018-09-03This should get you a solution that is independent of the framerate. Replace line 54 with this:", "", "vec2 cd = getVelocity( iTime, off ) * iTime / float(iFrame);", "", "The factor (iTime / iFrame) is the average elapsed delta time.", "reality3d, 2014-01-14So smooth!", "spalmer, 2020-01-29finalColor = pow(finalColor, vec3(.454545));", "correct gamma would help your rainbow considerably.", "I was trying to figure out how to antialias it better, but your falloff is some adhoc power I don't understand..  something involving fwidth(distance(fragCoord.xy,iMouse.xy)) perhaps.", "sainimu78, 2019-07-01Why the implementation of computing ray differentials is different with https://www.shadertoy.com/view/MdjGR1", "drone1, 2016-10-11@iq Thank you so much! This is great. Very useful.", "iq, 2016-10-09@drone1, and Dave, check here: http://www.iquilezles.org/www/articles/filteringrm/filteringrm.htm", "djmips, 2016-01-18This was clearly made with love. Really great artistic work.", "CPU, 2016-01-0721 FPS in firefox and no-compile in Chrome unless change  texture2DGradEXT to texture2DGrad, then it runs at about 0.2 FPS with 4 CPUs saturated but can't be sure it's not because the GL is wrecked after crashing!", "buds, 2016-01-06Changed texture2DGradEXT to texture2DGrad now it works!!", "drift, 2015-12-23Getting errors here on Win7 64bit GTX970. Firefox 43.0.2 gives errors that texture2DGradEXT doesn't exist. Chrome 47.0.2526.106 doesn't compile but doesn't report a specific error.", "drone1, 2015-12-22@iq, would love an answer to @Dave_Hoskins' question if you get a moment. Thank you. Awesome shader btw.", "citruslee, 2015-12-22the webgl context drops every time I open this shader, which is a pity, I really want to see it. I'm on windows 10 64bit on 64bit chrome with a R9295x2 AMD Radeon card", "SharkyUK, 2015-12-17Superb!", "noby, 2015-12-16Seems to work in firefox though, about 8fps on Radeon 270 (800x450). The materials and rendering look great!", "noby, 2015-12-16Shader compilation fails on Chrome/Win7/AMD, no error, just crashing WebGL.", "iq, 2015-12-16I have optimized the shader, it runs 1.4x faster (from 41fps to 58fps in my PC)", "iq, 2015-12-15dr2: Firefox supports texture2DGradEXT (I'm coding in Firefox). If you don't have the latest version of Firefox give it a try to downloading the latest. If you already have it, hm... I can implement a workaround for old browsers. I'll try that.", "iapafoto, 2015-12-15Working now", "iapafoto, 2015-12-15Arg!!!..  It was working yesterday, but I got a crash now (Windows 7 - Chrome) still ok for Firefox.", "otaviogood, 2015-12-15Looks pretty crazy. Too bad you can't put a better graphics card in a laptop, cause you just made me need one.  Good use of that nice new bump map texture. I'll go see the movie. I saw your name in the credits of the volcano movie a while back.", "Shane, 2015-12-15Really, really nice. Gorgeous setting.", "lovelyH, 2015-12-14I have compiling error on windows 7:", "error X3004 :  undeclared identifier 'tex2Dfloat2'", "Unknown error:  Retrying with avoid flow control", "error X3004 :  undeclared identifier 'tex2Dfloat2'", "Unknown error:  Retrying with prefer flow control", "error X3004 :  undeclared identifier 'tex2Dfloat2'", "Unknown error: Failed to create D3D shaders.", "dr2, 2015-12-14I want this little fellow for a pet. (Only problem is the browser: under Linux - Chrome ok, Firefox no texture2DGradEXT. Standards anybody?)", "aiekick, 2015-12-14ho, your famous arlo  very cute  i hope i will see an animation", "P_Malin, 2015-12-14So Good! (and very christmassy as it only runs on a Jesus Christ GPU)", "dancasas, 2015-12-14Amazing!!!!", "dila, 2015-12-14are these proprietary techniques? :p", "poljere, 2015-12-14Wow!!!", "iapafoto, 2015-12-14rhoooo, incredible !!! arlo + landscape !", "makc, 2015-12-14Oh, and  'texture2DGradEXT'  :  no matching overloaded function found in the shader panel", "makc, 2015-12-14I get Error: WebGL: texImage2D: Invalid unpack format/type: 0x1908/0x1406 in piLibs.js, OSX 10.11.1, Nightly FF 45.0a1", "Dave_Hoskins, 2015-12-14Nice work, and lovely lighting! (very slow.)", "Can you explain why texGrad is used in the landscape, and why is it useful here?", "Is it reducing aliasing at sharp angles?", "Thanks.", "pawsiem, 2015-12-14Greate job", "public_int_i, 2015-12-14Amazing job, the terrain is perfect.", "bob87, 2015-12-14With linux 64, firefox and an GTX980 :error on texture2DGradEXT acces....", "TambakoJaguar, 2015-12-14Wow, awesome, you are so good!", "WilstonOreo, 2015-12-14Ah works in Chrome but not in Firefox.", "WilstonOreo, 2015-12-14Unfortunately doesn't work on MacOSX:", "texture2DGradEXT: no marching overloaded function found", "koiava, 2015-12-14Wow, really nice!", "jt, 2015-12-14So cute! I would love to see it walking around", "FabriceNeyret2, 2015-12-14whaaat, it's not walking and growling ? :-p", "kuvkar, 2015-12-14wow! awesome shader.", "tonynogo, 2021-03-14Great tutorial and effect. Thanks!", "Sound > line 89 should be \"y += sfx2(time);\" imo", "Pjbomb2, 2020-11-10may I ask what purpose it serves to prevent map being inlined 4 times? how much of an impact does it make?", "archee, 2020-09-14Remove line 89 in Sound to get more of the music.", "cyperus, 2020-02-16Very cool!!", "jt, 2019-09-15wow!", "Dave_Hoskins, 2019-09-14Very nice, iq.", "dila, 2019-09-01great quality!", "iq, 2019-08-27Using trapezoids works well visually and has produces the exact distance. I left the trapezoidal design in the #else part in line 93 though, I like how aggressive the square teeth feel like.", "Shane, 2019-08-27I figured you were leaving the teeth squared off for aesthetic purposes, but rounding them off a bit does allow them to mesh a little better. For my example, I just hacked something in, which in the context of this example would be something like the following:", "#if 1", "float d = length(max(abs(r - vec2(.17, 0)) - tr*vec2(.044, -.003 + .044*y), 0.));", "d = mix(d, length(r - vec2(.17, 0)) - .03, .25); // Or preferably, something better.", "#else // Etc.", "", "However, I'd imagine using an elliptical bound, or something like that, would be more efficient.", "", "In regard to polyhedra, it's not really my area either. However, a lot of the most interesting imagery associated with the subject tends to involve a simple icosahedron and its dual, the dodecahedron, each of which I'm sure you're familiar with. Essentially, working with the objects involves the same process: Produce the object, identify the local face position, vertices, edge midpoints, etc, then take it from there.", "iq, 2019-08-26Nice, that tooth shape makes sense to me, I think.", "", "All I know about gears is that when gears of different sizes need to engage with each other for changes in force, the number of teeth are usually prime numbers or at least co-prime between touching gears. That distributes the teeth contacts uniformly across all possible tooth pairs, which in turn ensures that the erosion that happens over years of usage gets also distributed evenly, so the gears get working as smoothly as possible for the longest time. For example, in these steam machines, this gear has 13 teeth and this other one has 31.", "fizzer, 2019-08-26This is great. I'll just chime in and mention (because I have professionally written code to produce engineering-accurate gear splines) that the \"proper and correct\" tooth shape is known as an involute curve. For gears it's the curve formed by a point moving along a rotating line which is tangent to a circle. This produces contact points between the teeth with parallel surface normals, so friction is applied uniformly (and the gears don't intersect or miss each other). See here. In my work I approximated the curve with a bezier.", "", "The shader is awesome anyway and the synth code is really nice and simple. I just thought I'd point out some info on real gears for anyone interested.", "iq, 2019-08-23Right, I added the depth tapering, the teeth mesh better now.", "", "To be honest, I'm really bad at polyhedra ant tiling, that kind of maths is not something I've learnt and feel comfortable with. So normally I start with the brute-force implementation, and then start extracting all the symmetries I see one at a time and stop when I cannot think of any more, rather than when I understand the properties of my tiling and know I have exhausted all opportunities. I wish I was stronger in those areas like you and Fizzer.", "Shane, 2019-08-23So nicely done. I love the rendering style -- It has a steampunk vibe to it.", "", "I put one of these together a while back, then got curious as to the simplest arrangement that would allow three or more interlocking gears. The one I went with was a G(3, 0) icosahedral Goldberg arrangement, but for all I know, there might be better ones. I took a space folding approach, which drastically cut down on rendering, but never explored whether it was an option for the...  rhombicuboctahedron (I think) arrangement here.", "", "By the way, I remember getting the gears to interlock a little more by tapering the gear and teeth radii according to the spherical depth, but using cones to set a maximum bound would probably work better.", "GregRostami, 2019-08-22WOW!!!", "yasuo, 2019-08-22amz!!", "TambakoJaguar, 2019-08-21Wow, this is really awesome!", "tdhooper, 2019-08-21so good with the extra sound and animation", "antonOTI, 2019-08-21Nice", "iapafoto, 2019-08-21superb", "coyote, 2019-08-21Beautiful!", "shau, 2019-08-21Planet gears? Very nice", "EvilRyu, 2019-08-21Super nice!", "jarble, 2020-11-11The framerate improves slightly when I replace abs(s.x)<.001 with abs(s.x)<.001*(1.+f)", "jorge2017a1, 2020-01-04muy interesante el tunel y muy veloz ....Bien!!!", "PauloFalcao, 2015-11-10Hi papademos! No problem, use and abuse of any of my shaders", "papademos, 2015-07-06Hi pPauloFalcao", "", "This weekend we made a \"mashup demo\".", "The idea was to create a party production using existing shaders from shadertoy.", "", "During this production I converted, modified and used the inner twister in this shader for the mashup. It's come to my attention that I should have asked you permission in beforehand. And in retrospect a totally agree. Of course I should have. How stupid could I really be. You have however been properly referenced and credited.", "", "Unfortunately I never asked for permission. This was bad judgement on my behalf.", "The best I can do at this point is to apologize.", "", "I'm sorry. I fucked up.", "", "Regards // Papademos", "fb39ca4, 2013-09-15This shader is a hidden gem.", "iq, 2013-02-26clean and beautiful! shinny!!", "Mixed_Load, 2022-09-13so awesome!", "snerp, 2022-01-27outlines look better if you add 2 more raycasts", "vec3 ro,  rd;  generateRay( ro,  rd,  po, ta, fragCoord.xy );", "vec3 ro2, rd2; generateRay( ro2, rd2, po, ta, fragCoord.xy+vec2(1.0,0.0) );", "vec3 ro3, rd3; generateRay( ro3, rd3, po, ta, fragCoord.xy+vec2(0.0,1.0) );", "vec3 ro4, rd4; generateRay( ro4, rd4, po, ta, fragCoord.xy+vec2(-1.0,0.0) );", "vec3 ro5, rd5; generateRay( ro5, rd5, po, ta, fragCoord.xy+vec2(0.0,-1.0) );", "", "then later", "", "// cartoon edges", "vec4 tmat2 = raycast(ro2,rd2); // raytrace right pixel", "vec4 tmat3 = raycast(ro3,rd3); // raytrace top pixel too", "vec4 tmat4 = raycast(ro4,rd4); // raytrace left pixel", "vec4 tmat5 = raycast(ro5,rd5); // raytrace bottom pixel too", "col *= clamp( 1.0 - 10.0*max(abs(tmat4.w-tmat2.w),abs(tmat5.w-tmat3.w)), 0.0, 1.0 );", "StrangerintheQ, 2019-10-09it is great! but right hand part is missing..", "dcerisano, 2017-09-09BENDER RENDER IS THE GREATEST !", "jt, 2017-09-01Awesome!", "2LiveBrew, 2017-08-31That's effing awesome!", "CaliCoastReplay, 2017-08-30Man, you are too good at all of this.", "bit2shift, 2017-08-30Right hand missing conical frustum.", "kernelkernel, 2017-05-12HI! is it possible to adapte for using with picture?", "ollj, 2016-04-29i tried to make the putlines thicker, changed line 407...:", "", "vec4 tmat2 = intersect(ro2*1.1,rd2*1.1); // raytrace right pixel", "vec4 tmat3 = intersect(ro3*1.1,rd3*1.1); // raytrace top pixel too", "", "nice lips.", "", "but the right lines to edit line thickness are line 28...", "vec3 ro2, rd2; generateRay( ro2, rd2, po, ta, fragCoord.xy+vec2(8.0,0.0) );", "vec3 ro3, rd3; generateRay( ro3, rd3, po, ta, fragCoord.xy+vec2(0.0,8.0) );", "ollj, 2016-04-29curved arms, toon shader, 10 fps on 2007 hardware. all great.", "Branch, 2015-03-18would have been cool to see his shiny metal ass. ;)", "fizzer, 2014-08-19I can't decide which one I like best...", "vgs, 2014-08-07Loved it!", "jt, 2022-09-01wow!", "ollj, 2017-05-21only a single reflection pass?", "iq, 2013-05-14The shader looks great by the way! Lovelly", "iq, 2013-05-14lol, but wait, YOU know that. so... why do you ask?", "iq, 2013-05-14without the max(0.0, the lighting is wrong - you don't want the backsides of the objects to be lit by light that comes from the other direction and that therefore cannot hit the surface. in fact, without the max() the image looks bad - you loose the sense of contact between the spheres and the ground.", "reinder, 2013-05-14If added the max", "w23, 2013-05-14nice!", "also, why is there no max(0., around dot(...) in line 211?", "Bombadil, 2020-05-13Amazing colours", "pokerbroz99, 2020-05-12It's like the surface of Sun!", "radek02, 2020-04-23Love autumn, love this as well", "kanareczek, 2020-03-23Whoa, amazing! Looks like painting and remind me autumn.", "CaliCoastReplay, 2016-07-28Pure brilliance.  Is there a tutorial on how to implement all these variants on FBM somewhere?", "tsone, 2015-12-16This is amazing! Looks like some kind of painting. I'd love to see this on my wall", "Xonatron, 2015-01-25Here is what it looks like now, on Xbox 360: http://youtu.be/DAIhtPSrm-4", "Xonatron, 2015-01-25Definitely one of my favorites. You have me thinking I should redo the background shader in our Score Rush game for the next release of it.", "davidmachadosf, 2023-06-11solar corona surface and corona?", "technochroma, 2023-05-17One of my favorite shaders. Really excellent", "xef6, 2023-04-07form person to prsonn", "FabriceNeyret2, 2022-08-16@ttg: \"why X\" ?", "\u2192 it was in 2014, I was just a kid :-)", "", "\"what is Y ( in the switched of code) ? \"", "\u2192 I was messing this 8 years ago, so no idea :-)", "ttg, 2022-08-16Correction, exact 1/r distance dependence is not saying each EM source is dipole, only that it is very small compared to all scales in the simulation.", "ttg, 2022-08-16Note on the physics:", "", "Each emitter is symmetric around the z-axis ( perpendicular to the plane of display ) :", "In pressure/sound waves: this is implies drivers facing into or out of the plane.", "In electromagnetic waves: this means source current is perpendicular to image.", "Additionally, the exact 1/r distance dependence means each source is an idealized dipole.", "", "In the circular arrangements of emitters: Inside the circle, local average energy in the center is noticeably somewhat less intense than closer to the edges, even without considering near-fields of the emitters.  This is correct since energy is radiated out along the z-axis in addition to within the plane of the visualization.", "Local average energy would be constant inside a 3d spherical arrangement of sources (no magical disappearance of energy inside this structure, assuming it is filled with free space / lossless propagation medium).", "ttg, 2022-08-16Why N^2 loop???   Exact result can be achieved much more simply and efficiently by summing phasors (sin,cos vec2) and measuring power (self dot product).", "", "-> simplified version https://www.shadertoy.com/view/7ldyD2", "", "Lines 77-83 :  What's this ?", "FabriceNeyret2, 2021-02-08the more antennas, the least leaks ;-)", "jayprich, 2021-02-08very nice to be able to visualise the way power goes in unwanted directions too", "FabriceNeyret2, 2020-12-201: yep !", "2: interesting. I didn't thought about the near field. Still, arrays of 1:loudspeakers 2: mics have really be used to emit to / hear from a very small 3D location.", "Diapsid, 2020-12-20This concept is used by MIMO antenna arrays like in cell phone towers to direct beams away from interference and towards specific targets. Audio and electromagnetic waves are similar enough that the array theory should work for both. I actually just wrote my first shader program using a circular array, but uniformly spaced with no phase difference between them. I treated each as the origin of a 2D cosine function and added the value of the offset cosines together at each pixel in a for loop. There's a method called the Schelkunoff spaced-zeroes method that takes a linear array and chooses specific amplitudes for each element to direct nulls in specified directions. I might code that up soon in ShaderToy, I've done it Processing and Matlab already for a university course.", "", "I think this method is the one you're thinking of, or at least very similar. Using it on a very large linear array can create arbitrarily large directivity, to the point where energy only radiates in <1\u00b0 beamdwidths in any specified direction, so you could choose a person out of a lineup to hear the sound with no one else being able to. The tradeoff is that it is extremely inefficient, and in antennas instead of radiating away most of the energy, it gets stored in the reactive near-field, which is drastically affected by any object in that area. So you can have 100 antennas broadcasting the signal, but the received signal level may be 1/10000th the magnitude of the transmitted energy. As you let the beam get broader, you gain back your efficiency.", "FabriceNeyret2, 2020-04-24this already exist: several groups published paper about that a while ago, using either a line or a (large) grid of mics ;-)", "( I remember a demo by some german lab, but I'm not good at remembering papers's titles ).", "", "conversely you can emit a sound out of space without being heard elsewhere. But you need a lot of mic / loudspearker to be very specific. I illustrate here how random grid can be better than regular to avoid mirrored targets.", "BigWIngs, 2020-04-24If this could work in reverse you could pick up the sound from one person out of a huge crowd. I'm sure you could sell that for a lot of money ;)", "FabriceNeyret2, 2020-02-06who knows :-)", "", "at least it can be used to hear from or produce sound to an arbitrary 3D location in a room.", "And of course, to improve and secure radio transmission ( WIFI indoor, military outdoor )", "cyperus, 2020-02-06WOW.  Can this be used for acoustic levitation?", "scratch13764, 2019-01-20Thanks fabrice", "FabriceNeyret2, 2018-10-30Well, I don't feel it as especially concise, and it could be way more ( this is very old code, I just fixed some newbies ugliness I just found in. :-) ).", "Maybe that's just experience. Now there are many ways code can be not concise, I don't know which is yours. Can be algorithmic, can be bad habit of decomposing all op in dozens of intermediate variable.  Formating can be part of it too (I prefer to have more information in direct view at the same time, and as math-phys professionnal I prefer 1 letter variable names so it looks like equations ).", "", "About the features, a reminder that the list of GLSL command is obtained by clicking on the \"?\" below code. I also gathered various glsl and shadertoy tricks in https://shadertoyunofficial.wordpress.com/2016/07/21/usual-tricks-in-shadertoyglsl/ and https://shadertoyunofficial.wordpress.com/2016/07/20/special-shadertoy-features/", "scratch13764, 2018-10-30Where did you learn how to program in such a concise manner?? My issue is that  I always make really long programs because I don't know half of the functions and features.", "dpiponi, 2018-04-06We need more wave phenomena on ShaderToy so this is great!", "marzinp, 2018-01-31Incredible! Great learning tool too!", "devernay, 2017-04-18very fun to play with! gives a nice directional pattern when the sources are linearly distributed and you click on the left or right (just like on TV antennas)", "shau, 2016-06-18Oooo. Very pretty", "Dave_Hoskins, 2014-07-14Nice one. It really fizzes.", "cyanux, 2014-07-14Bravo", "iq, 2014-07-13Thanks for fixing it so quickly!", "FabriceNeyret2, 2014-07-13thanks a lot Inigo !   bought ! :-)", "( together with seed change, the looks is not too far)", "iq, 2014-07-1323", "FabriceNeyret2, 2014-07-13iq: sorry to bother you, but could you tell me the largest N that works ?", "(looks so boring with 16).", "FabriceNeyret2, 2014-07-13I tried this to have N^2/2 but... array indexing must be const, so even this is not possible.", "for (int i=0; i< N; i++)", "v += 1./ (D2[i]*D2[i]);", "int i=0, j=N-1;", "for (int k=0; k< N*(N-1)/2; k++) {", "if (i>=j) { i=0; j--; }", "v += 2.*cos(Phi[j]-Phi[i]) / (D2[i]*D2[j]);", "}", "iq, 2014-07-13Yes, reducing it to 16x16 makes it work", "FabriceNeyret2, 2014-07-13cyanux: well, it's still N^2; no gain...", "", "iq: groumf. glsl is so desappointing... :-( I guess it is the 32x32 loop ?", "iq, 2014-07-13The shader is crashing the browser", "cyanux, 2014-07-13Goodbye loop", "cyanux, 2014-07-13for (float i=0.0; i < float(N*N); i++) {", "v += cos(Phi[int(mod(i, float(N)))] - Phi[int(i / float(N))]) / (D2[int(i / float(N))]*D2[int(mod(i, float(N)))]);", "}", "FabriceNeyret2, 2014-07-13(half the loop suffisses but testing costs !", "So stupid the unroller does not recognise j < i...  :-(", ")", "FabriceNeyret2, 2014-07-13if anyone has idea to optimise the double loop line #66...", "jt, 2022-09-18Amazing!", "Zi7ar21, 2020-10-07Longest compile time ever", "0xAA55, 2020-08-19The explosion of the missiles can actually destroy trees and create crates! Wonderful!", "0xAA55, 2020-08-19Wonderful! A controllable jetplane! BTW I tried to crash the plane but it could only go through the mountains. Anyway I loved it", "yuletian, 2018-06-20Impressive! Excellent!", "zintax, 2018-01-26no0b here, trying to figure out how to extract only the environment from this.  I would like to use the mountains and the sky as a dome, but I'm not exactly sure what to remove from this demo.  Everything seems to be linked.", "", "Help?", "wenquan, 2018-01-09\u8001\u4e61\u4f60\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u90fd\u60ca\u5446\u4e86 \uff1a-\uff09", "ttg, 2017-12-28@alijaya That is what the buffers are for - they are rendered in the same way as Image, but can be accessed using samplers.", "alijaya, 2017-12-27@ttg: I mean, how you can keep the persistent data, like the roll and the pitch of the plane... If each frame is recalculated independently, it means, there's some data that can be transferred from previous frame to current frame ._. *I'm not sure if I ask the right question ._.", "ttg, 2017-12-26@alijaya Data can be embedded in the shader source using GLSL const arrays.", "That said, this shader and many others on Shadertoy do not use such arrays; instead, the routines needed for calculating the", "specific geometry of the scene are hard-coded.", "alijaya, 2017-12-26hey can you tell me how to host the data with shader? ._.", "revers, 2017-12-14wow, amazing shader! ^^", "shau, 2017-12-12Super impressive. Well done sir!", "PauloFalcao, 2017-11-21Impressive! Excellent!", "ingagard, 2017-11-16All is done with math. No 3D models used. :-)", "farhanAtWork, 2017-11-15is there a tutorial on how toset this up? like where do you host / upload the 3d model files? and how shadertoy works?", "kuchareczkaMarta, 2017-11-07extra film, excellent", "ingagard, 2017-11-04Just want to tell that I\u00b4m currently working on a TOTAL rework of my lighthouse. Have made some real progress the last days. I will be happy to show you when I\u00b4m happy with all the details.", "", "Meanwhile, if someone is interested, I would like to show you how I draw in a real 3D program (3DS MAX):", "", "https://i.imgur.com/FOOJKxJ.jpg", "https://i.imgur.com/N2MLBKT.jpg", "https://i.imgur.com/ZGOrWBW.png", "", "That is the block I grew up in. Somewhat of a paradise to me.", "ingagard, 2017-11-02To hear all nice comments from skilled artists like you, really make my day.", "Hamneggs, 2017-11-01You've done it. You made the coolest shader.", "Bers, 2017-11-01Amazing work on many levels! Congrats!", "duvengar, 2017-11-01Finaly! a well deserved star.", "ingagard, 2017-11-01Thanks Phi, glad to hear that!", "", "Also thanks to admin to allow this shader to be the shader of the week. Much appreciated.", "Phi, 2017-10-31Very beautiful shader !", "ttg, 2017-10-29Note that the counters used for animation ought to have iTimeDelta multiplied by their steps, otherwise the animation fails to", "run in real time when FPS is below 60.0.", "ttg, 2017-10-29Not a bug: Interaction causes new frames to render, but does not advance iTime.  Since this shader implements its own", "counter for animation, animation time can pass due to interaction even when the shader is paused.", "", "This functionality of rendering only upon interaction is very nice for working with interactive renderings", "which change with mouse and keyboard controlled parameters but not with time, since the shader may be kept open in the", "browser in a fully functioning state while not wasting GPU cycles when idle.  The feature also makes it possible to pause an animation at a specific moment in time and interactively adjust parameters without advancing the tim.", "", "That said, the feature has no use to viewers of an animation shader such as this one.", "ingagard, 2017-10-29clicking tabs or moving the cursor while holding down left mouse button triggers the shader to do one update step each time on move mouse event.", "bit2shift, 2017-10-29More likely a bug in shadertoy itself, who knows.", "ingagard, 2017-10-29@ w23 and morgan3d", "Thank you guys.", "", "@bit2shift", "It\u00b4s the way shaderToy works. ;-)", "w23, 2017-10-29Very impressive!", "bit2shift, 2017-10-28bug: when the time is stopped, the plane moves when you click the buffer tabs or drag the camera around.", "morgan3d, 2017-10-28A beautifully crafted shader! The attention to detail with moving parts, explosions, and fine tuning is amazing.", "ingagard, 2017-10-28@ \tGregRostami", "Well, I would really like to see that artifact myself. Very hard for me to solve otherwise. There are NO lens flares for missiles, just a simple raymarch distance check:", "", "// calculate engine flare", "float lightDist = TraceEngineFlare(rayOrigin, rayDir, missile);", "", "// add engine flares for missiles based on engine distance", "vec3 lightFlares=vec3(0.);", "lightFlares =  mix((vec3(1., 0.4, 0.2)), vec3(0.), smoothstep(0., 1.1, lightDist));", "lightFlares =  mix(lightFlares+(2.*vec3(1., 0.5, 0.2)), lightFlares, smoothstep(0., 0.7, lightDist));", "lightFlares =  mix(lightFlares+vec3(1., 1., 1.), lightFlares, smoothstep(0., 0.2, lightDist));", "", "", "", "@ \tDave_Hoskins", "You know... you just solved a very irritating bug I had. Thanks buddy. I\u00b4ve now made the changes.", "GregRostami, 2017-10-28Thank you for fixing the fun flare. The missile flare problem is still there. Toggling the 5 keys doesn't fix the problem.", "ollj, 2017-10-27very good cloud occlusion , flare, glare , glow, hdr stuff.", "many good approximations mixed together to a good illusion.", "", "illusion mostly breaks at high altitude vehicle, where clouds change shape depending on camera position being above or below the vehicle, is confusing. slightly less confusing for a first person perspective.", "", "camera below ground still renders the vehicle.", "", "both of these are stretching the boundaries of this anyways.", "Dave_Hoskins, 2017-10-27Be aware that flying upside down has an inverted tilt direction for the missiles...", "ingagard, 2017-10-27If you only knew how happy I am you like the effort I put into this.", "Thanks for all kind words, means a lot to me.", "You guys are the best!", "Shane, 2017-10-27 I get tired just thinking about the amount of work that went into this. Truly awesome.", "KylBlz, 2017-10-27damn! unfortunately shadertoy is experiencing some CSS errors or you'd have one more <3", "otaviogood, 2017-10-27holy crap. That's a lot of effort!", "ingagard, 2017-10-27@Observer & GregRostami", "", "Come to think about one thing. Did you by accident turn on the lens dirt filter? That would cause that noise all over the screen when staring into the sun and flares.", "ingagard, 2017-10-27Added option to enable/disable lens flares with 5-key.", "", "Btw. did anyone notice that the rudders actually move when turning (W and R keys) and pitching?", "ingagard, 2017-10-27Explosion impact compare. Berfore / after:", "ingagard, 2017-10-27Huge thanks to all of you.", "", "@Observer & GregRostami", "Changes made, hope it displays right for you now. I don\u00b4t have that problem myself, sounds weird.", "Duke, 2017-10-27Very nice!", "GregRostami, 2017-10-27Changing line 123 to vec3 flareColor=vec3(0); did solve the sun problem, but the missile flares are still broken.", "GregRostami, 2017-10-27On my MacBook Pro there are artifacts in the sun glow and the glow from the missiles.", "GregRostami, 2017-10-27OMG!! AMAZING!", "Observer, 2017-10-26Very realistic an beautiful!", "I only have an issue with the CalculateSunFlare-function, it produces a bright white circle (almost the size of the view) with noise. I can solve it by initializing flareColor in line 123 with vec3(0.0).", "Dave_Hoskins, 2017-10-26Well worth the cloud system change! Very cool.", "iq, 2017-10-26Nice, now we are talking, glad you worked on the lighting. Really excellent!", "flockaroo, 2017-10-26awesome!!", "P_Malin, 2017-10-26Nice one, looking great!", "wyatt, 2017-10-26omg", "ingagard, 2017-10-26Thanks! I\u00b4m very happy to hear you like it.", "duvengar, 2017-10-26Simply perfect! I'm a fan", "CPU, 2017-10-26Wow! Amazing, flies well", "ingagard, 2017-10-26", "ingagard, 2017-10-26", "ingagard, 2017-10-26", "nabr, 2018-08-12Crazy man !", "Thank you for implementing the X, great feature to have here. And the Icon thing, - nevermind.", "", "You have this snail shader and also the collision shader. Did you ever though about it, to combine those two, like Colliding Snails and make a experimental movie. Could be the next hit in Cannes.", "nabr, 2018-02-25@iq", "Hey man big thank you for all your work!", "I\u2019m to stupid add a trello product features. So i leave a comment here:", "First: I don't think that Shadertoy has it's I c o n - that resolves automatically on other websites, so twitter, facebook etc. has their own icons, that are linked in the databases of social networks. I'm a totally noob about this, not sure if this is really an issue.", "", "Second: If i post a sound cloud link on Shadertoy, i can't delete the music content anymore, - it should be possible to add \"just a simply empty\" string so the sound cloud music disappears, currently I have to replace it with other music content.", "", "Big Thank you.", "Keep it up", "SarahC, 2018-02-23IQ, So....... you've got a plan... realtime collisions in a shader? Hm... raining on ants? Hourglass with physics? Colliding planets?  I can't wait!  =D", "iq, 2017-03-05Pixar has called this \"Rounded Cube Maping\" since ever and ever. The Realtime Rendering community knows it as \"Box Mapping\" or \"Triplanar Mapping\"", "rsodre, 2016-07-14I love how you use textureBox() to texture the balls with a simple 2d texture.", "I've been looking for something like this for a long time.", "Do this technique has a name? Is there any other variants to achieve similar results?", "ollj, 2016-04-17i know what will give me nightmares this week", "roboman2444, 2015-12-15get black screen on Mesa 11.0.6 (radeon 7400m)", "archee, 2015-03-27Watch with 4 spheres to get real time. It's fun to do stateless integrated physics", "dila, 2015-02-06He's right, 3D mosh pit simulation!", "aiekick, 2014-12-12to be the first to the front", "aiekick, 2014-12-12i love it. its so funny. it seems to be a ball fight ^^", "iq, 2014-11-17I've done it incremental, and started with the big spheres. With 3 passes looks good already.", "iq, 2014-11-16Sure, but with one pass it converges less (I think after 4 starts looking good).", "reinder, 2014-11-15Maybe you can change line 263 in: 'if( j > i )' to speed up the shader (a bit ;)).", "dcerisano, 2022-07-01@ollj, the point and strength of Gold Noise is it deliberately takes advantage of limited precision.", "", "It is not  the precise evaluation of the function that is important - it is the non-deterministic forced error.", "", "This error arises from the iterative computation of trig functions in the GPU, a source of much consternation usually, since different VBIOS will return non-deterministically different precision.", "", "Gold Noise takes advantage of this (likely the only advantage of this).  The inclusion of an irrational number like PHI sufficiently exacerbates the non-determinism.", "", "I gave PHI to a ridiculous level of precision for current GPU cores. As these cores evolve, PHI can just be given with an arbitrarily higher level of precision, and hopefully Gold Noise should be able to survive indefinitely!", "", "btw - I tried some of your suggestions, but none resulted in a better distribution without considerably more processing required.", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28[This comment has been hidden by the shader author]", "dcerisano, 2022-06-28@FabriceNeyret2 the seed must be fractional float, ideally [0.0,1.0]", "fract(iTime) is an excellent seed, for example.", "ollj, 2022-05-11If you multiply (or divide) floats, that are roughly the same size (their exponent in IEE754 is roughly equal), you lose a lot less precision, than when the 2 factors are very different sizes.", "", "for type-float hashes, using [quadratic-fields, that share no prime factors], is likely extremely efficient, especially on any hardware, that does matrix multiplication well (any GPU) . I call this \"pqfm=prime-quadratic-field-matrix\"", "metallic-means are a subset of quadratic-fields, and PHI is likely a great start here. the tan() does not really help as much as a simple seesaw or triangle wave.", "", "Good efficient hashes/noises are a https://en.wikipedia.org/wiki/Linear-feedback_shift_register with a long period. They usually do a lot of xor in type uint.", "They get slightly better, when they include mod(), making them an LCG = https://en.wikipedia.org/wiki/Linear_congruential_generator", "Above 2 hashes are extremely common in arcade games.", "They get extremely good, when you permute more than 1 of them to a PLCG = PCG = https://en.wikipedia.org/wiki/Permuted_congruential_generator", "", "if you want fast uniformity with long prime-permutation-periods, you can get great 3d noise with only modulo and some tiny lookUpTables that store costasArrays if unique-prime-lengths. This does a bit more mod and no xor, with the benefit of having much longer prime-factor-periots.", "A 32 bit pcg will have a period of (up to) 4,294,967,296, ideally by permuting 2 16 bit linear feedback shift registers, likely in the complexity of less than 6 modulo per iteration (if its not a full bit period, its likely also not uniform).", "", "multiplying the sizes of 9 different primes (that are>9) via costas arrays gets you over a period of 1 million in the size of prime-faxctorization, likely at the cost of 9*3=27 modulo (or 9*4?) BUT every single costas array is pattern-free, which in theory makes this a much better noise AND costas noise in theory parallelizes more, and they need no iterating over them.", "FabriceNeyret2, 2022-05-11the point is: xxx_noise(v) is to be used on various all-purpose situations. v = fragcoords is just for the demo.", "question is: what are the requirements on the range of v for the noise keeping good quality ?", "for many hash functions numbers that are either too small or too big won't give correct result.", "dcerisano, 2022-05-10From shadertoy docs, xy is fragCoord:", "\ud835\udc53\ud835\udc5f\ud835\udc4e\ud835\udc54\ud835\udc36\ud835\udc5c\ud835\udc5c\ud835\udc5f\ud835\udc51 \ud835\udc50\ud835\udc5c\ud835\udc5b\ud835\udc61\ud835\udc4e\ud835\udc56\ud835\udc5b\ud835\udc60 \ud835\udc61\u210e\ud835\udc52 \ud835\udc5d\ud835\udc56\ud835\udc65\ud835\udc52\ud835\udc59 \ud835\udc50\ud835\udc5c\ud835\udc5c\ud835\udc5f\ud835\udc51\ud835\udc56\ud835\udc5b\ud835\udc4e\ud835\udc61\ud835\udc52\ud835\udc60 \ud835\udc53\ud835\udc5c\ud835\udc5f \ud835\udc64\u210e\ud835\udc56\ud835\udc50\u210e \ud835\udc61\u210e\ud835\udc52 \ud835\udc60\u210e\ud835\udc4e\ud835\udc51\ud835\udc52\ud835\udc5f \ud835\udc5b\ud835\udc52\ud835\udc52\ud835\udc51\ud835\udc60 \ud835\udc61\ud835\udc5c \ud835\udc50\ud835\udc5c\ud835\udc5a\ud835\udc5d\ud835\udc62\ud835\udc61\ud835\udc52 \ud835\udc4e \ud835\udc50\ud835\udc5c\ud835\udc59\ud835\udc5c\ud835\udc5f. \ud835\udc47\u210e\ud835\udc52 \ud835\udc50\ud835\udc5c\ud835\udc5c\ud835\udc5f\ud835\udc51\ud835\udc56\ud835\udc5b\ud835\udc4e\ud835\udc61\ud835\udc52\ud835\udc60 \ud835\udc4e\ud835\udc5f\ud835\udc52 \ud835\udc56\ud835\udc5b \ud835\udc5d\ud835\udc56\ud835\udc65\ud835\udc52\ud835\udc59 \ud835\udc62\ud835\udc5b\ud835\udc56\ud835\udc61\ud835\udc60, \ud835\udc5f\ud835\udc4e\ud835\udc5b\ud835\udc54\ud835\udc56\ud835\udc5b\ud835\udc54 \ud835\udc53\ud835\udc5f\ud835\udc5c\ud835\udc5a 0.5 \ud835\udc61\ud835\udc5c \ud835\udc5f\ud835\udc52\ud835\udc60\ud835\udc5c\ud835\udc59\ud835\udc62\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b-0.5, \ud835\udc5c\ud835\udc63\ud835\udc52\ud835\udc5f \ud835\udc61\u210e\ud835\udc52 \ud835\udc5f\ud835\udc52\ud835\udc5b\ud835\udc51\ud835\udc52\ud835\udc5f\ud835\udc56\ud835\udc5b\ud835\udc54 \ud835\udc60\ud835\udc62\ud835\udc5f\ud835\udc53\ud835\udc4e\ud835\udc50\ud835\udc52, \ud835\udc64\u210e\ud835\udc52\ud835\udc5f\ud835\udc52 \ud835\udc61\u210e\ud835\udc52 \ud835\udc5f\ud835\udc52\ud835\udc60\ud835\udc5c\ud835\udc59\ud835\udc62\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b \ud835\udc56\ud835\udc60 \ud835\udc5d\ud835\udc4e\ud835\udc60\ud835\udc60\ud835\udc52\ud835\udc51 \ud835\udc61\ud835\udc5c \ud835\udc61\u210e\ud835\udc52 \ud835\udc60\u210e\ud835\udc4e\ud835\udc51\ud835\udc52\ud835\udc5f \ud835\udc61\u210e\ud835\udc5f\ud835\udc5c\ud835\udc62\ud835\udc54\u210e \ud835\udc61\u210e\ud835\udc52 \ud835\udc56\ud835\udc45\ud835\udc52\ud835\udc60\ud835\udc5c\ud835\udc59\ud835\udc62\ud835\udc61\ud835\udc56\ud835\udc5c\ud835\udc5b \ud835\udc62\ud835\udc5b\ud835\udc56\ud835\udc53\ud835\udc5c\ud835\udc5f\ud835\udc5a.", "", "Essentitally xy = uv*screensize (if that helps).", "FabriceNeyret2, 2022-01-31I guess xy should be integers or largers, but not smaller.", "ruudhelderman, 2022-01-31Please explain, what is the allowed domain for xy? I clearly see colored rings and vertical stripes when zooming out (xy *= 100.0). Not to mention the wonderful patterns when zooming in (xy *= 0.02).", "andrew741, 2021-11-24This works so well! I've been working on a path tracer and every random function leaves artifacts but this one is so perfectly random. Great job, this has to have the most random output I've seen so far.", "robertheadley, 2021-11-21Wonderful static effect.", "dcerisano, 2021-04-14Also this author is  not responsible for incorrectly installed or configured graphics drivers on hacked devices.", "dcerisano, 2021-04-14Please use indicated seeding method unless you know what you are doing. Anyone can hack something they don't understand and call it broken.", "RaphaelK12, 2021-03-29@sciroccorics, You need to multiply your xy coordinates by some value, such as 200 or 1000, probably your xy coordinates are in the range of 0 to 1 which causes the banding artifact, but if you multiply by 1000 you will avoid these artifacts.", "", "void mainImage (out vec4 rgba, in vec2 xy) {", "rgba = vec4 (gold_noise (xy * 1000, fract (iTime) +1.0),", "gold_noise (xy * 1000, fract (iTime) +2.0),", "gold_noise (xy * 1000, fract (iTime) +3.0),", "1.0);", "}", "", "I also had these bandage artifacts, I tried to change several values until I realized that the shadertoy works on screen pixels and not texture coordinates, which is why it works so well here and not on our shaders.", "sciroccorics, 2021-03-25Don't use this random generator in your apps: it create strong color bandings and Moire patterns for most values of 'seed', as soon as you leave the neighborhood of (0,0) for the pixel coordinates. I've written a \"crash test\" shader to illustrate this major defect:", "https://www.shadertoy.com/view/NssGDf", "(click on the \"Full Screen\" icon to show the problem even better)", "cdata, 2021-02-18@dcerisano would you be willing to choose a license (perhaps a Creative Commons license) for this code? I would like to use it in another shader that is eventually open sourced, but it would require a known, sufficiently permissive license to do that.", "dcerisano, 2020-09-01Audio is just experimental, thanks for the input.", "The problem is using transformed time as a seed, which presents precision issues on some devices.", "Using a different transform, try it again!", "Zibri, 2020-09-01something is wrong with audio... golden noise sound like a repeating pattern with a sort of bouncing rithm", "Zibri, 2020-01-23@dcerisano check this out, I did it some time ago: https://github.com/Zibri/rand2", "dcerisano, 2019-12-02Added Gold Noise audio.", "dcerisano, 2019-11-29Further optimized, uses only Golden Ratio.", "theGiallo, 2019-07-15@ollj are you referring to this? https://en.wikipedia.org/wiki/Quadratic_integer#Examples_of_real_quadratic_integer_rings", "ollj, 2019-07-14I am all in for using [quadratic field]s with prime factors for sprudo-random-numbers in opengl, where", "float qf= (sqrt(a)+b)*.5+.5", "has [a] and [b] be unique primes to evade its own hyperplanes, where the golden ratio is just the special case of its infinite fraction being an  endless string of \"1\", and the [*.5+.5] is a quite optional projection.", "", "this one uses tan(), which likely significantly lowers its precision on mobile hardware, in favor of infinite derivatives.", "ollj, 2019-07-14I am all in for using [quadratic field]s with prime factors for sprudo-random-numbers in opengl, where", "float qf= (sqrt(a)+b)*.5+.5", "has [a] and [b] be unique primes to evade its own hyperplanes, where the golden ratio is just the special case of its infinite fraction being an  endless string of \"1\", and the [*.5+.5] is a quite optional projection.", "", "this one uses tan(), which likely significantly lowers its precision on mobile hardware, in favor of infinite derivatives.", "dcerisano, 2019-07-13@Fabrice, you don't seem to need an invitation to involve yourself in my claims.", "Maybe you could tell us whether @theGaillo's 3D noise shader has improved distribution over Gold Noise.", "FabriceNeyret2, 2019-07-13please don't involve me in your claims...", "theGiallo, 2019-07-13I've done this: https://www.shadertoy.com/view/wtsSW4", "dcerisano, 2019-07-09You are trying to be a smartass at someone else's expense and it's not working. Don't be sad, just stop doing it.", "dcerisano, 2019-07-09You are trying to be a smartass at someone else's expense and it's not working.", "OctopusX, 2019-07-08Wow man, take it easy, just trying to understant this shader, not trying trolling or something. If you see clutter in my msg, your code just too good to be public, why you share it with mortals? ;)", "dcerisano, 2019-07-08SQRT completes as single floating point op in modern GPUs.", "Also, as stated in the comments Gold Noise runs at low precision, an enormous boost on SOC.", "Also, already had this conversation with Fabrice. He ran the numbers and proved Gold Noise is fastest.", "Please don't be sorry. You may laugh at yourself if you wish. Also please do not clutter up this thread.", "OctopusX, 2019-07-08> fastest one-line static noise generator function", "I apologize, how it can be fastest? You use 'distance' call which calc square root, which is perfomance killer. Or it's just a joke? ;) correct me if im wrong", "dcerisano, 2019-03-25Updated to generate random colors rather than grayscale.", "dcerisano, 2018-03-17Gold Noise is not a normal distribution, however it is extremely efficient and sufficiently uniform to be perfect for dithering applications like @Hsiett's Random Sampling Simulation. (Excellent work btw!)", "Hsiett, 2018-03-15I wrote a random sampling simulation based on gold noise:", "Random sampling simulation", "FabriceNeyret2, 2018-03-15uh, white noise is not especially normal distributed. Here we generally use uniform.", "Hsiett, 2018-03-15Is the noise normal distributed like white noise?", "dcerisano, 2017-09-04Mozart's Piano Sonata No.1 in C-Major, K. 279 also contains the golden ratio.", "dcerisano, 2017-09-02Gold Noise works with all chipsets, including low precision which is another improvement over previous functions.", "ollj, 2017-09-02You rang?", "fear my extended random rand on randomness", "dcerisano, 2017-09-02The improvement in random distribution is actually not imaginary. The irrational values exhibit far less banding than the previous values. That seemed to have been caused by using monotonically increasing time as a seed. So, obvious improvement in random distribution.", "dcerisano, 2017-09-02I also laughed out loud after I got angry and just plugged in the first three irrational numbers given in wikipedia (the square root of two includes a shift optimisation).", "huttarl, 2017-09-02LOLOL", "dcerisano, 2017-09-02To be more even more obviously irrational, I am now using not only", "the Golden Ratio, but also PI and the square root of two.", "I claim an imaginary improvement in random distribution over the previous values.", "dcerisano, 2017-09-01We are all ollj, and he is us.", "FabriceNeyret2, 2017-09-01like anything on internet, you should take ollj texts as a source of inspiration, but not as Ground Truth to believe blindly ;-)", "dcerisano, 2017-09-01Ironic, isn't it?", "huttarl, 2017-09-01Following ollj's explanation, \"vec2(almostaprime, almostaprime * goldenratio)\" matching \"vec2(12.9898989898, 78.233333)\" would suggest that 78.233 is 12.99 * 1.618. But clearly that's not the case... the actual ratio is about 6. So I'm still wondering what I'm missing.", "huttarl, 2017-09-01Still wondering how this is \"based on the golden ratio.\" None of the three magic numbers in the code (12.99, 78.23, and 43758.5) are anywhere near in golden ratio to each other.", "dcerisano, 2017-09-01Interestingly,  you see any diagonal banding it means you have a problem with your graphics driver. Only correct drivers will give correct results, so Gold Noise is also a diagnostic tool!", "dcerisano, 2017-07-31Removed sound effects - too scary.", "Changed name from poltergeist to gold-noise, yolo.", "dcerisano, 2017-05-22Added sound effects, scary oo!", "FabriceNeyret2, 2017-04-26uh, I don't see errors. Maybe I typed it in the wrong window ?", "dcerisano, 2017-04-26@fabrice, could you post the actual error and line number please.", "FabriceNeyret2, 2017-04-16No longer compiling in webGL2: overloading built-in is no longer allowed.", "huttarl, 2017-01-23@ollj, thanks for explaining some aspects of how the random function work.", "", "Where does the golden ratio appear in dcerisano's code?", "dcerisano, 2016-09-17Please dont post code here.", "Just post a link to a working shader.", "ollj, 2016-09-16//this does the same, with more utility for other things:", "vec2 sc(in float i){return vec2(sin(i),cos(i));}", "float snoise(in vec2 i){", "i*=sc(iGlobalTime);", "return fract(sin(dot(i,vec2(12.9898,78.233))) * 43758.5453);}", "", "//this does the same, with better results on older/mobile hardware, and slower performance.", "//mostly just by explicit high precision and by using mod() before sin()", "float const PI=asin(1.)*2.;", "#define hpf highp float", "highp float rand(vec2 i){", "i*=sc(iGlobalTime);//optional distortion to distort diagonal banding", "hpf a=12.9898;", "hpf b=78.233;", "hpf c=43758.5453;", "hpf d=dot(i,vec2(a,b));", "hpf s=mod(d,PI);", "return fract(sin(s)*c);}", "ollj, 2016-09-16the diagonal banding of the fract(sin()) function still exists, its just hidden in plain sight by distorting sin(time) and y*=cos(time)", "ollj, 2016-09-16the used tricks are (from outside to inside);", "", "fract(largeValue), the remainder of any large value easily appears pseudo random.", "", "fract(sin(x)*largeValue), the sine function mostly exists to distort x so that the pattern detection systems of neural networks fail to detect patterns (that still clearly exist) we just are not trained enough to detect remainders of sines sinusoidial, especially if the wavelength is very short.", "a sin() distribution appears more natural to us as it approximates natural distribution of randomness better, extremes occur less likely.", "", "x=dot(input,vec2(almostaprime,almostaprime*goldenratio))", "dot() is a shorthand to include 2 arbitiary values that are almost primes and contain the golden ratio. he golden ratio and values that are primes are ideal for an evenly distributed random seed.", "", "in the end all values, except the golden ratio, are absolutely arbitiary, and fine tuned to how some systems approximate the sin()function, ro make up for some rounding errors.", "", "this noise fuinction has been copied countless times from its origin, likely a 198 paper, without tweaking any of its arbitiary constants.", "the sin() function is its weakness, as its a black box that is significantly less accurate on older or mobile hardware. using the remainder of large values also fails on mobile hardware that uses low precision, or even 8 bit floats.", "airtight, 2016-08-27Nice because it doesn't exhibit the diagonal banding that lots of static generators have. Typically the snoise() function here is called random(), noise usually means perlin noise.", "dcerisano, 2015-03-24http://stackoverflow.com/questions/4200224/random-noise-functions-for-glsl/28095165#28095165", "scratch13764, 2017-03-10ITS SO BEAUTIFUL!!!!!!!", "stduhpf, 2016-01-12For a full nyan experience, add https://soundcloud.com/obviouslyfake/nyan-cat-2 in channel1", "Atrahasis, 2015-08-09oh +1", "fb39ca4, 2013-08-11Can we add Nyan Cat to the music available here?", "rez, 2013-05-25Pure genius, I love it <3", "mu6k, 2013-05-25crazy......", "huttarl, 2013-05-21Too funny.", "simesgreen, 2013-05-21it's nyancats all the way down...", "iq, 2013-05-20as far as i know, yes ^_^", "malhotraprateek, 2022-02-25Very nice shader. Ported it for Godot 4: https://godotshaders.com/shader/lens-flare-shader", "Astroux, 2020-09-14@mu6k: Awesome shader! Do you see a possible method for modifying this to make the ghosts different shapes (e.g. pentagons rather than circles)?", "mu6k, 2020-06-24@WaferEnak: feel free to do so, credits are appreciated but not required", "WaferEnak, 2020-03-13mu6k,may I use your code for my shaders, I will add credits shaders toy, please ...", "WaferEnak, 2020-03-13may I use your code for my shaders, I will add credits shaders toy, please ...", "smcameron, 2019-08-08mu6k, I looked at this awhile ago, I think I'm not quite smart enough to be able to use it.  I would be trying to cram it into this open source game: https://spacenerdsinspace.com", "mu6k, 2019-08-08@smcameron: sorry for the late reply, feel free to use it however you feel, if possible drop send me a mail, I'm curious where it ends up", "smcameron, 2019-04-20Hi, would it be possible to get this code under a GPL2 compatible license?  The non-commercial clause of the current license is incompatible with GPL.  (If not, no worries.)", "mu6k, 2017-11-27Thank you Shane! Finally a good fix for the discontinuity. So obvious that you need a periodic function to deal with values that are limited to a specific range, such as angles. The solution is elegant, so I'll add it.", "", "However I don't want the flare to animate based on time. The flare is meant to actually be used as a flare and you'll get weird shimmering if you're standing still and have plugged time into the noise function. So I added flare position instead of time as it was before.", "Shane, 2017-11-26I meant, \"seam line.\"", "Shane, 2017-11-26This is awesome.", "", "I've been playing around with lens flares lately. This one is exceptionally nice - I can see you've even gone through the trouble to triple up for the chromatic effect. I noticed a seem line in the main flare object. Don't quote me on this, but I think it's due to the fact that the value \"ang\" won't wrap unless you run it through a sinusoidal term.", "", "In other words, \"noise(ang*k)\" wouldn't wrap, but \"noise(sin(ang*k + t))\" would... I'm pretty sure that's the case, but I'm not willing to bet money on it.", "", "Just as an example, something like the following should work:", "", "f0 = f0 + f0*(sin(noise(sin(ang*2. - iTime/2.)*4.0 - cos(ang*3. + iTime/2.))*16.)*.1 + dist*.1 + .8);", "", "Of course, that wouldn't work in with the aesthetics, but I'd imagine that a tweaked version would.", "morgan3d, 2014-04-03Beautiful!", "CPU, 2013-08-22yes yes!", "yo, 2013-08-14Love it!", "4rknova, 2013-08-14Looks awesome!", "srtuss, 2013-08-13well done! looks amazing.", "mu6k, 2013-08-13I originally wanted to add this lens flare in here: https://www.shadertoy.com/view/XdfGzS", "I almost had the projection working accurately but then I hit somekind of limit and the shader stopped compiling anymore. So sad...", "iq, 2013-08-13Very nice! I love the chromatic aberration.", "poljere, 2013-08-13Looks great!", "FoxyOfJungle, 2022-01-25Simply impressive! Congrats!", "TheHughMan, 2018-11-20You forgot the program the Contra code.", "akhgary, 2018-05-04This is god level work", "smkgames, 2018-01-09I'll forever be grateful", "It is hard to find words to express my gratitude", "I love you man", "smkgames, 2018-01-09I'll forever be grateful", "It is hard to find words to express my gratitude", "I love you man", "knarkowicz, 2018-01-08@smkgames I just published encoder with and example: https://www.shadertoy.com/view/ll2BWz", "knarkowicz, 2018-01-02@smkgames Thanks! Yes, I plan to share my automatic conversion tool (sprite -> code). I need just to find some free time to do that.", "smkgames, 2017-12-29Amazing!!!", "Perfect!!!", "Lovely Game\ud83d\udc96", "please share your tools for automatic conversion of images to code", "knarkowicz, 2017-10-06It took something like 5 hard and long evenings to make it. Entire presentation was done in 1 evening - I already had tools for automatic conversion of images to code. Rest of the time was spend making gameplay, tweaking and bugfixing.", "Vel0city, 2017-10-06This is incredible. How long does a project like this take? It seems like a lot of work.", "zproxy, 2017-07-07cool", "knarkowicz, 2016-09-18Sorry, I can't help you as I don't have access to a laptop with a NVIDIA GPU and on desktops (Win7/10, different GPUs, chrome/firefox) everything works fine.", "Boscop, 2016-09-18I updated my nvidia driver to the latest 347.88 but this shader is still getting stuck on the intro screen", "Boscop, 2016-09-07Why does it only show \"JUNGLE, STAGE 1\" for me?", "Win 8.1 chrome, Nvidia GTX 965m, driver 344.56: https://i.imgur.com/oLS6JFu.png", "kzy, 2016-08-27I cant visit the front page of shadertoy anymore cause of this shader crashing my webgl -_- when is shadertoy finally going to change it. I also have no crash log.", "knarkowicz, 2016-08-23@barakooda ShaderToy pre-calculates sound \"shader\" and you can't read gameplay state from it, so there is no way to implement SFX currently.", "barakooda, 2016-08-23WOW what a masterpiece.", "( no sounds for me.)", "knarkowicz, 2016-08-13Great. Thank you for helping me with this issue. I still don't know what happened, but it looks like simplifying gameplay value function bypassed some driver bug.", "imagicien, 2016-08-13It's fixed now! Thanks!", "knarkowicz, 2016-08-12I get the same behavior if I set gPlayer.y = 0.0 at the end of the shader. I have no idea how it's possible. At the beginning of the game I set gPlayer.y to PLAYER_SPAWN_HEIGHT every frame during first 3 seconds (player starts at the top of the screen):", "line 774: gPlayer = vec4( gCamera.x + 32.0 * 2.0 + 24.0, PLAYER_SPAWN_HEIGHT, PLAYER_SPAWN_HEIGHT, 0.0 );", "And looking through code I see now way it could be set to 0.", "Maybe, someone who can repro this strange behavior, can help me and pick it from here by using binary search in order to find the part of the code, which sets gPlayer.y to 0.0.", "imagicien, 2016-08-12- The character appears in the water, in the \"roll jump\" position, then takes the normal \"in water\" position", "- I can't jump", "- With your changes, when the character is at the same x position as a platform, it flickers up and down (on platform, in water). Cant't get on platform, can't jump", "- Still can go through the level by walking in the water", "- When I die, there is an explosion in the sky. I do not flash, I just die instantly, there is an explosion in the air, then GAME OVER and I the game restarts", "", "Good luck! Hope this helps", "knarkowicz, 2016-08-12@imagicien Can help me with additional details? Maybe I'll fix it without being able to reproduce this issue. Do I understand correctly, that character appears in the top left corner and after a seconds (screen fade) falls down into water (through the grass platform)? BTW I changed some code. Can you now enter lowest grass platforms (by swimming into them)?", "knarkowicz, 2016-08-10That's strange. I just checked out this shader on a few different machines with Win10/Chrome and everything works fine.", "imagicien, 2016-08-10Chrome 52 / Win 10", "imagicien, 2016-08-10Same for me, character always in water. Can't jump, and I can swim through the whole level. Also not falling in holes. When I'm hit, I reappear, flashing, an 2 seconds later it says Game Over.", "knarkowicz, 2016-08-08@iq I've added clear to zero on first frame and shifted player a bit to the right. Maybe it will help (I can't reproduce this issue).", "knarkowicz, 2016-08-08No. Last change was 2016-Jul-25 and on my config everything works fine (Win7+Chrome). What's your config?", "iq, 2016-08-08Has something changed lately? It seems there's a bug and character is always in the water, both in Chrome and Firefox.", "lovelyH, 2016-08-06Nice game. I manager to finish 1st level (with improved KONAMI_CODE)", "public_int_i, 2016-08-03Phenomenal the sprites are beautiful.", "LukeRissacher, 2016-07-30Brilliant - had no idea something like this was even remotely possible in a pixel shader.", "loolo78, 2016-07-30Incredible work! Had so much fun playing this", "coyote, 2016-07-27Congratulations on winning the compo!", "", "Btw, this shader is the first I noticed on OSX that crashes WebGL compiler on Chrome, while working OK on Safari and Firefox. (although it is very slow on mac mini, below 10 fps)", "But I think that yesterday it worked on Chrome and wasn't so slow...", "", "Some other sh16c shaders also either compile forever or crash. Forced me to turn on the preview.", "retrocanada76, 2016-07-26Try this at line 49: SCANLINES", "", "if (mod(fragCoord.y, 2.0) >= 1.0)", "{", "color = color * 0.25;", "}", "knarkowicz, 2016-07-25Fixed jump (thanks to coworker, who is a hardcore contra fan). Now during the jump one press of directional key is enough to jump in that direction, just like in the original game. Previously you had to hold direction key in order to continue jumping in that direction.", "Shane, 2016-07-25I love this. So awesome, and so much work.", "knarkowicz, 2016-07-25Thank you! This years results are strikingly similar to previous ones. Only difference is that Dave_Hoskins is replaced by stubbe.", "P_Malin, 2016-07-25Congratulations!", "Cubeleo, 2016-07-24I figured out the problem.  I had my monitor refresh rate set high so frame count doesn't work as a timer.  Runs great at 60hz.  I used the term \"world time\" because some of the graphical effects still seemed correct (perhaps they use iGlobalTime instead of frame count).", "knarkowicz, 2016-07-24Thanks guys!", "@Cubeleo what do you mean by \"world time runs far too fast\"?", "Cubeleo, 2016-07-24This is super awesome.  One observation--the world time runs far too fast on my windows config:  Windows 10, Chrome browser, 6700K, NVidia 1080.", "Antonalog, 2016-07-24amazing!!!!", "flockaroo, 2016-07-24phu! awesome. how much work this must have been...", "movAX13h, 2016-07-24Wow, my winner! So much detail and so much work! Hope you got some sun from time to time", "aiekick, 2016-07-24and the winner is ^^", "Duke, 2016-07-24Wow!", "stb, 2016-07-24This is... wow. Really good! Xpadder+gamepad works great with this. Great work, knarkowicz!", "Dave_Hoskins, 2016-07-24Excellent! And a lot of work!", "P_Malin, 2016-07-24Wow, this is fantastic!", "vgs, 2016-07-24wow, this is insanely good!", "knarkowicz, 2016-07-24It was a crazy ride to make this thing. Sadly, but had to remove procedural music, because already compilation times are quite slow . Tried to lover compilation times using various tricks. E.g. tried to make a sprite atlas stored in a separate buffer, but it didn't help much. The thing which help the most was to redistribute sprites among 3 buffers, so instead of 1 slow to compile shader I have 3 faster ones (in total). Tried to also make everything pixel perfect with the original, but some things had to be changed because of the different aspect (16:9 instead of 4:3) or because of compilation times.", "Zavie, 2017-03-07@Ollj: yep, my code just assumes that smooth min will do a good enough job at hiding the fact that it's not tangential.", "For the bump function I've played with various functions: sin, smoothstep, pow... In the end none of them gave me a satisfying muscle mass look so I kept the simplest.", "ollj, 2017-03-07looks fast and useful for muscle limbs and is nice to modify around with.", "", "your COLOR palette and outlining looks cleaner than mine: https://www.shadertoy.com/view/4ld3WS and for extreme cases (which you just avoid instead) your solution still suffers slightly from being non-tangential -> not smoothly transitioning.", "", "your *bump float does not gain much visually from *pow(h,.9) or a precise *pi. as it is smoothed out a lot later.", "Zavie, 2017-03-07The final result is really d.x; d.yzw are intermediate results.", "Zavie, 2017-03-07Thanks! One circle shows the radius at the node, the other is a result of the smooth min, which apparently tends to offset distances.", "FabriceNeyret2, 2017-03-07nice !", "Why the double circles at nodes ?", "coposuke, 2020-01-27@flockaroo: Thanks!", "coposuke, 2020-01-27[This comment has been hidden by the shader author]", "flockaroo, 2020-01-24cool!", "mla, 2020-01-24@Fabrice: thanks, I thought that was probably the case & sometimes we just get lucky...", "FabriceNeyret2, 2020-01-24no.", "and on OpenGL, in practice it is often 0, but not always.", "mla, 2020-01-24Looks good now.", "", "Does glsl make any guarantees about initial values for variables declared without an initializer (eg. like the \"Animation anim;\" here)? For me (Intel graphics, MESA etc), this initializes things to 0, but \"out\" parameters aren't initialized, but that might just be fortuitous,", "coposuke, 2020-01-24\"it's because blendMesh isn't initialized in animate (you initialize blendLine twice!).\"", "Oh... I was careless.", "coposuke, 2020-01-24@FabriceNeyret2 Thanks! I'll try my best to remove alias.", "@mla Thanks for the information! I fixed to inout from out.", "coposuke, 2020-01-24[This comment has been hidden by the shader author]", "FabriceNeyret2, 2020-01-24\"I can't see why that should be necessary, but\": because sometime variable get initialized only via the inout. ;-)", "mla, 2020-01-24Aha - it's because blendMesh isn't initialized in animate (you initialize blendLine twice!).", "mla, 2020-01-24Actually, I can't see why that should be necessary - but I get a garbled image without it.", "mla, 2020-01-24Really nice. I think you need inout for anim parameter of animate() though (one of those annoying portability things).", "FabriceNeyret2, 2020-01-24very nice !", "( but icon is aliased )", "jorge2017a1, 2021-05-12very good sound quality ... excellent work !!!! it sounds very good !!!!", "RavenWorks, 2018-10-14Nice one, thanks  Will keep that around for the future...", "ollj, 2018-10-14this seems to be the right pitch:", "float n2feb (float n){return 55. *pow(2.,(n+36.)/12.);}", "float noteFreq(int note){return n2feb(float(note));}", "RavenWorks, 2015-12-11@Silent_Hunter: Hah, thanks  And hey, don't miss the finished one I linked in the description! ;)", "Silent_Hunter, 2015-12-11I created an account just to fave this!", "poljere, 2015-07-02So cool! Sooo cool!", "squid, 2015-05-21Awesome! Get some text rendering going and perhaps a longer sound track, but still really cool!", "Lio, 2015-05-17very funny!", "TRNNKo, 2022-05-29cool", "dexterplanck, 2022-04-28so beautiful !", "ButterflyCrash, 2020-04-20@BigWIngs Sure, would be an honor! Thanks again", "BigWIngs, 2020-04-20@ButterflyCrash   Cool! I see you have a bunch of stuff on SoundCloud. Maybe I could use some of your songs in future shaders.", "ButterflyCrash, 2020-04-20This is so beautiful, great work! Could watch for hours.", "", "Also wanted to let you know I used this for a \"music video\": https://www.youtube.com/watch?v=IW_osLvNv7A", "Thanks for sharing your awesome work!", "pedrofuentes, 2020-02-29WOW. Awesome! And it runs so fast!", "zxxuan1001, 2019-07-06How wonderful this place is!", "OliverSchaff, 2019-04-15Very beautiful!", "scratch13764, 2018-11-06All of your stuff runs so fast, too!", "dakrunch, 2018-02-03Beautiful work, BigWIngs.", "Code is not that bad, easy to follow.", "nylki, 2018-02-02Aww, that's really beautiful!  Hypnotizing too look at and around. Music fits nicely.", "jt, 2018-02-01Very pretty!", "steverock, 2018-01-31what the ef", "marzinp, 2018-01-31>Wow<!", "Flavio, 2018-01-01WoW!!!!", "glkt, 2017-07-04awesome!!", "huttarl, 2017-06-17The movement is nice and lifelike. It feels like the bell should spread out a little more before the upward push, but other than that, very good. Visitors, don't miss out on looking up/down with the mouse!", "ocb, 2017-05-24Beauty!", "Duke, 2017-05-24", "KylBlz, 2017-05-24Really nice modeling and texturing, love the fake god rays  Interesting mix of marching and tracing; either way it could benefit from a material structure so you could support more complex materials in render(). Get those jellies refracting", "flockaroo, 2017-05-24really beautiful!", "BigWIngs, 2017-05-24@ Shane - Luminescence! that was the word I was looking for! Renamed my shader now ;)", "@ Ollj - Thanks for the tips! Detailed explanations are perhaps better emailed next time though. My email is in the code header.", "@ everyone else - Thanks!", "Shane, 2017-05-24Wow. Really nice. Love that luminescence.", "iq, 2017-05-23Cool", "zproxy, 2017-05-23cool", "tholzer, 2017-05-23Wow, what a fantastic animated underwater world.", "I am always stunning when I see a deep sea creature with it's rainbow colored light play", "(e.g.  https://media.giphy.com/media/sbxNFGQ59hWMg/giphy.gif  ).", "ollj, 2017-05-23pModPolar() is from", "http://mercury.sexy/hg_sdf", "", "your structs are a bit of an overkill for what you do with them. but structs tend to speed up more than slow down.", "", "\"struct rc\" does not need the parameters \"h\" and \"c\", unless you want to go wild with overlapping tiles, offset tiles and octrees of tiles with different sizes, where the label \"grid\" within tiling starts to lose its meaning, and then you may just use bounding boxes instead of a grid?", "", "in a sense converting a point to tiledCoordinates, stored as 2x vec2 (1 vector storing a tiles address, the other storing the position within a repeated tile), is just a coordinate transformation like carthesiianToPolar. and you seem to understand both nicely, and not use it as such?", "", "often standardization increases performance, and it also increases utility by reusing the same subroutines for different things:", "", "do not measure distance to a sphere with \"sphereCenter\" as function parameter.", "instead move the point in the other direction and measure distance to a sphere, centered at the origin of your coordinate system.", "", "do not measure distances to ANY stretched sphere or box, instead measure a scaled distance to a unit-sphere or unit-box that has bounding box corners at -.5 +.5. scaling the point equals inverse-scaling the object.", "", "do not include rotation as parameter to a distance function.", "instead incerse-rotate a point in a funtion that uses a non-rotated system.", "this way distanceToRotatedAndOffsetOval reduces to using the subroutine DistanceToUnitCircleAroundOrigin, which is length(p), which is a subroutine for many things, wrapped in transformations.", "", "by separating offset, scale and rotation from each other, changing the order of transformations can sometimes be a useful shortcut to something like \"offset rotation around a point that is not the coordinate center\"", "", "inverting point transformation in 3d is as simple as mat3 m=mat3(1,0,0,0,2,0,0,0,3);mat3 n=inverse(m); p*=m; /*or p*=n */  float d=distance-function(p);", "many inverse transforms are VERY simple, and do not need the use of the general (liekyl slower) inverse() function. rotating a 3d point or a 4d quaternion by a 4d quaternion comes down to 1dot() 1cross() 3mult 3sub, very similar to aixsAngle Rotation.", "", "", "applied to tiling that means:", "", "assume that each tile goes from [0..1] ( excluding [1], the [1] of one tile is actually the [0] of the tile to its right) along each dimension", "and just transform the input and inverse transform the output values to that outside of the standardized tiling function. then all mod() reduces to fract()", "applying transformation matrices to feed multiple standard tiline-calls lets you build square, slanted square and hex tiling efficiently.", "", "now the only struct you need is a struct that stores parameters to transformations, and maybe buffer their inverses for re-use, maybe just a single mat3 or mat4.", "", "homogeneous coordinate transformations to simpler geometry will likely speed up your code a lot.", "Shakemayster, 2017-05-23So beautiful!", "GregRostami, 2017-05-23STUNNING!!!", "xef6, 2022-08-22completely worth it. i shouted out in astonishment. this is incredible. look at those penguins go!!!!!", "Macroniom, 2022-08-10Wow!", "oneshade, 2022-08-09Runs very slow on my computer but really cool shader!", "Hyosh, 2022-08-01Awsome !!!", "clippingpathuniverse, 2022-07-26Wow", "lz, 2020-07-16Lovely", "cmarangu, 2019-12-13lol 2.3fps on my macbook air 13-inch early 2014", "lovelyH, 2017-08-05This is awsome.", "davidr, 2017-08-04This is outstanding..  I vote you up for being \"Darth Shader\"", "Imsure1200q_1UWE130, 2017-08-04doesnt really work i just see a random noise thingy in the bottom left and nothing else..", "iapafoto, 2017-08-01he he super cool !", "FlashyTheCreeper, 2017-08-01wow! an actual animation!", "valentingalea, 2016-06-29both funny and a technical marvel!", "KylBlz, 2016-06-28Haha! Epic visuals and hilarious complex animations. A++", "TambakoJaguar, 2016-06-27Haha, great fun! Nice light effects with the fog!", "Antonalog, 2016-06-27That is some damn fine work!", "w450468524, 2016-06-27amazing!", "Jacoby, 2016-06-26Looks awesome", "Maurogik, 2016-06-26Thanks guys !", "iq, 2016-06-26Super nice!", "stduhpf, 2016-06-25This is really epic", "antonOTI, 2016-06-25Wow nice !", "GregRostami, 2016-06-25WOOOOOOOOOOW !!", "cubby208, 2016-06-25If only the star-wars movies had lighting this epic!", "Shane, 2016-06-25That's pretty awesome.", "aiekick, 2016-06-25wow very nice", "MarisaKirisame, 2022-12-02How... HOW???", "jorge2017a1, 2020-03-04Excelente trabajo y muy buena vista!!!", "keen, 2018-09-14https://soundcloud.com/lethal_guitar/unreal-intro-theme-flight-castle-guitar-cover", "reinder, 2018-09-11Really nice", "gambhiro, 2018-05-20I find myself grinning  Love it.", "zproxy, 2017-05-17360 render at", "Lemivision, 2017-01-11Really UNREAL! Gorgeous! First Unreal is still one of \"my best of\" game. ;-)", "hotmultimedia, 2015-03-05Hmm, pretty cool. These long unrolled functions seem to cause crashes on some Nvidia drivers tho. (Like on my 460) The solution is to put brushes in arrays but it sadly kills all performance on Intel. :/", "paniq, 2015-03-02this is amazing", "iapafoto, 2014-12-31wonderful !", "w23, 2014-11-03Insane!", "vgs, 2014-10-06This is so cool! Very impressive!", "Dave_Hoskins, 2014-10-04Wow, great waving flags with textures! Great fires with reflections, nice camera spline. Wait, ALL the textures are procedural!  Amazing.", "fizzer, 2014-10-04Hi, las! It's nice to see you here . I've applied CC BY-NC-SA 3.0 which iq has used on his shaders and has terms I consider reasonable. Obviously I don't own the source material but I think this is compatible with the whole parody/tribute concept in copyright law (at least in the US).", "las, 2014-10-04Now that's something! Nice work.", "Fizzer under what license is your code?", "Do you mind if I take that function and use it for some \"work\" (e.g. algorithm benchmarking, screenshots etc.)? It is a pretty good test scene.", "", "Appropriate credits will be given of course.", "PauloFalcao, 2014-10-04This is just... Unreal!!!", "nuclear, 2014-10-04holy fuck! this is unbelievably awesome!", "fizzer, 2014-10-04I noticed this too. I've now added an offset which shows a recognisable part of the castle at t=10.0 but creates a nice lead-up to the start of the sequence at t=0.0.", "iq, 2014-10-03Haha, you maniac  So awesome!", "", "(The pity is that at t=10.0, the time we use for rendering the thumbnails, the camera is not at a sexy position. Something you can do about that?)", "poljere, 2014-10-03Wow, seriously! Good job", "Voltage, 2014-10-03I lurk a lot here... but I HAD to log on for this.  Very nice.", "P_Malin, 2014-10-03Amazing!", "bipulmohanto, 2022-01-01Excellent project.", "firegump, 2020-03-10very helpful!", "spir, 2017-03-31The spheres are black for me on linux with an NVidia card, with an intel chipset it does work however.", "noonan, 2016-12-21Thanks for the breakdown", "kakaxizhhgjh, 2016-06-24nice job, excellent!", "but i wonder why ro = hit.material.color.rgb * hit.material.specular, in line 199. however in schlick's approximation r0 is caculate by n1 and n2.", "rockeyda, 2015-06-27my god i love ray race lighting. i cant wait for the day its piratical for at-least a ray trace direct x hybrid in a video game.", "Lio, 2015-05-15Win7, google Chrome - It works fine", "coyote, 2015-05-14@Polytonic Yes, it works ok now on my mac, which is expected because I \"corrected\" your shader before my first post in which I pointed out the necessary change for my computer.", "Anyway, it's interesting that it worked ok without initialisation on your iris pro while not on my iris. Maybe the memory in which the variable resided was zero by pure chance on your machine...", "Polytonic, 2015-05-14iq, I've made the suggested change. What OS/browser/GPU are you running?", "iq, 2015-05-13The shaders doesn't compile here on Windows, line 139 and the conditional move. I could fix it by doing if( len<0.0 ) return miss; return Intersect(...);", "Polytonic, 2015-05-13That seemed to fix it on some machines, but not all. Thanks for the help though!", "", "Did the fixes work for you? The scene renders on my Iris Pro (OSX 10.10.3), but that isn't strictly the same GPU.", "coyote, 2015-05-13I have a mac mini i5 @ 2.6 with iris, yosemite (10.10.3)", "As for windows, have you enabled native opengl for firefox?", "http://www.geeks3d.com/20130611/webgl-how-to-enable-native-opengl-in-your-browser-windows/", "Polytonic, 2015-05-13coyote, thanks for the tip! I've initialized color in radiance(...). I didn't have any problems on my Mac with the original version though. What GPU and version of OSX are you running, so I can verify the problem is fixed?", "", "Firefox is still broken under Windows ... not sure why.", "coyote, 2015-05-13Nice.", "Please initialise all variables for shaders to work correctly on mac. In this particular case you should initialise vec3 color in radiance(Ray ray) function.", "otaviogood, 2015-05-13The fresnel reflectance looks good. I should stop being lazy and put that in my shaders.", "iq, 2020-06-24Nice", "jorge2017a1, 2020-06-24very nice color .... blue plasma type", ".........", "muy bonito color ....tipo plasma azul", "jeyko, 2020-06-24niice", "Shane, 2022-08-22 I could have sworn I'd given this a like years ago... Oh well, better late than never. Seven years old and still a beautifully crafted example, and now \"Shader of the Week!\" Hooray.", "byt3_m3chanic, 2022-08-17This is amazing - and what? 2015??", "hggg, 2021-06-10Wow, even though there are rocks hanging mid air occasionally, this is really awesome!", "Dave_Hoskins, 2020-11-13Thanks jarble, I've included your code. I already have an increase in stepping size with distance and I do the same precision change with the normal calculation which reduces any aliasing. They all help.", "jarble, 2020-11-12The framerate improves slightly when I replace (h < precis || d > FAR) with (h < precis*(1.0+d/25.0) || d > FAR)", "oneshade, 2020-11-11Impressive raymarching and sound!", "PelicanPolice, 2020-11-10This is so cool! I love the rolling dust!!", "xavierseb, 2020-11-05Brilliant!", "jorge2017a1, 2020-06-01Great ... the sound of the air is surprising ... I will say beautiful for its perfection ... good work with the landscape .... EXCELLENT ... Good work", "...........", "Genial ... se escucha sorprendente el sonido del aire .... dire hermoso por su perfeccion .... buen trabajo con el paisaje .... EXCELENTE ... Buen trabajo", "Dave_Hoskins, 2018-05-18@CLPB oh definitely!", "CLPB, 2018-05-18Approaching the Mountains of Madness?", "Dave_Hoskins, 2017-06-01@ollj, that's a good idea, but it's an all pervasive howling wind, I don't there's any shelter from the weather in this place.", "ollj, 2017-06-01so. you could calculate AmbientOcclusion on the ear position and put that into a band filter.", "FabriceNeyret2, 2017-05-01I meant \"clicking on 'like' \" ;-)", "Dave_Hoskins, 2017-05-01I don't know what you mean? It moves to the click point and stays there. Screen centre being the normal position.", "FabriceNeyret2, 2017-05-01( why can't I click a second time ? ;-) )", "nolibab, 2017-04-23cool!", "ciberxtrem, 2016-04-03Amazing!!!", "nide, 2016-01-17Amazing job on the soundscape also", "jt, 2015-12-17Very Cool!", "Solstice, 2015-08-25Brilliant! :O", "oneaboveall, 2015-05-24Dave,", "", "Can u please email me at dave.bowman.1950@gmail.com", "", "I would like to ask you some questions regarding your Fractal Landscapes.", "", "", "", "Thank You for your time and kind help.", "", "Dr. David Bowman", "nimitz, 2015-03-09Dave: indeed, just triangle displacement is even faster and could give ok results for some applications.", "", "That 4d noise could be useful for tileable 3d noise. (by making the grabs perform a circular path in 4d)", "Dave_Hoskins, 2015-03-08Cheers. Hey folks, comment line 12 and uncomment line 13, for some crazy 4D noise liquidity!", "revers, 2015-03-08Amazing shader! ^^", "Dave_Hoskins, 2015-03-06Damn code tags, why can't I edit my posts?", "Dave_Hoskins, 2015-03-06Thanks, I've been wondering if something like this would be OK?", "[code]vec3 tri3(in vec3 p){return abs(fract(p.zxy)-.5);}/[code]", "But it's just not quite the same, it's OK though.", "nimitz, 2015-03-06Nevermind my last post, you're actually layering your value noises.", "nimitz, 2015-03-06Another quick point, you're comparing triangle noise with 3d \"value noise\" functions. The visual characteristics of triangle noise are meant to be closer to 3d fbm than value noise, It shouldn't need to be layered (granted you're using it beyond it's scope here).", "nimitz, 2015-03-06Nice comparison of the different noise options. If you want speed you can replace the tri3 function with:", "", "vec3 tri3(in vec3 p){return vec3( tri(p.z+p.y), tri(p.z+p.x), tri(p.y+p.x));}", "", "the noise params might need to be tweaked a bit afterwards though.", "", "Also, in case anyone is wondering, this is the original https://www.shadertoy.com/view/4ts3z2", "Fred1024, 2015-03-06I want a game like this", "ewerybody, 2015-03-05ALTER! I'm freezing!!", "knighty, 2015-03-05", "coyote, 2015-03-04", "GregRostami, 2015-03-03JAW DROPPED!!", "vgs, 2015-03-03superb!", "VJSpackOMat, 2015-03-02awesome", "aiekick, 2015-03-02wow, beautifull", "Dave_Hoskins, 2015-03-02Thanks. I managed to lose my previous changes to your code, so I thought I'd start again.", "nimitz, 2015-03-02Beautiful.", "ollj, 2016-04-17yeah some things just dont funcion aswell in higher dimensions without adaprive smothening over poles/voids", "Poisson, 2023-01-17Very cool!", "FabriceNeyret2, 2022-12-05mix( vec3(1.0), rgb, c.y) =  (1.-c.y) * vec3(1)  + c.y * rgb", "= 1.-c.y + c.y*rgb", "Raistlin_fuego, 2022-12-05Thank you very much, finally I got it... Another question that arises is why in line 22 rgb * c.z is not directly multiplied since it is always 1 c.y in the mix() function it will always give the rgb value. I don't know if there are some benefits or something. Thanks for help me!", "ollj, 2022-12-02mod(a,b) returns the remainder of Eudlidean Division with remainder", "https://en.wikipedia.org/wiki/Euclidean_division", "ED translates well to type-float, by explicitly rounding down with floor() (a conversion to integer type would also do that)", "", "The floor(c) function rounds down to the next smaller whole number.", "https://registry.khronos.org/OpenGL-Refpages/gl4/html/floor.xhtml", "https://registry.khronos.org/OpenGL-Refpages/gl4/html/mod.xhtml", "", "in type float, Order of operands matters a lot here, and this is where a lot of precision is lost, because mod, tents to multiply and subtract input-values of significant size-differences and this is where precision loss is more significant, and some implementations are not too compatible in terms of how they floor() in 16 bit precision where 32 bit would be appropriate, so you may want to explicitly write (x - y * floor(x/y)) and even to it in 64bit double precision sometimes.", "iq, 2022-12-020.5 - 1 * floor(0.5/1) = 0.5 - 1 * 0 = 0.5", "Raistlin_fuego, 2022-12-02Can someone explain to me how the mod() function works? I do the calculation that it puts on the page (x - y * floor(x/y))", "", "https://thebookofshaders.com/glossary/?search=mod", "", "and it does not give me what it is supposed to give.", "", "for example: y = mod(0.5, 1.) on the graphic show 0.5 on y. But if I do this operation 0.5 - 1 * floor(0.5/1) = -0.5 * 0 = 0.", "", "I don't know who to ask anymore. Thanks to whoever says something!", "ollj, 2021-12-20why not just use basic trigonometry with all its continuity?", "WAHa_06x36, 2019-11-30I was doing some similar experiments earlier:", "", "https://www.shadertoy.com/view/4lVBW1", "", "Depending on whether you use linear or sRGB colour, you can do even better than smoothstep by adding a bit of sinusoidal distortion to balance out the perceptual colour areas a bit more.", "haxiomic, 2019-08-11Great discussion on physical and perceptual gradients here", "https://www.pouet.net/topic.php?which=11276", "", "See @absence's comment", "haxiomic, 2019-08-11@FabriceNeyret2 if we convert to sRGB at the end then the result will cause the monitor to create a physically linear luminance ramp, which is great if you're trying to reproduce an image of the real-world, but a physically linear ramp doesn't look _perceptually linear_ to humans \u2013 a physically linear luminance ramp looks too bright to us.", "", "If you take a physically linear gradient and gamma decode ^2.2ish you end up with a perceptually linear gradient. The screen gamma decodes your values so your physically linear gradients end up looking perceptually linear, which is ideal in for the case of a color picker", "FabriceNeyret2, 2019-01-10NB: we should always convert to sRGB at the end of shaders, right ?   :-)", "fragColor = vec4( pow(rgb,vec3(1./2.2)), 1 );", "( strangely, the luminance ramp then look perceptually not so linear ).", "Frizzil, 2018-10-06Quintic variant is the best I've found for when you want a more even distribution of primary and secondary colors:", "", "-> rgb = rgb*rgb*rgb * (rgb * (rgb * 6.0 - 15.0) + 10.0);", "", "A cosine-ish distribution is interesting, but transitions seem too extreme. Maybe I'm doing it wrong:", "", "-> rgb = cos( (rgb + 1.0) * cPi );", "ollj, 2017-09-10with all the love for a cubic Hermite spline for interpolation, how about a cos(clamp(abs())) variant that is a lot like a cubic Hermite, but has more smooth derivatives.", "FabriceNeyret2, 2016-02-08( wrong copy-pasr after \"or better\"; was", "vec3 rgb = smoothstep(1.,,2., abs( mod( c.x*6.+vec3(0,4,2),6.)-3.) ;", ")", "FabriceNeyret2, 2016-02-08hsv2rgb_smooth:", "", "rgb = rgb*rgb*(3.0-2.0*rgb); = smoothstep(0,1,rgb), which already provides the clamp.", "->", "vec3 rgb = smoothstep(0.,1., abs( mod( c.x*6.+vec3(0,4,2),6.)-3.) -1.);", "or better:", "vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );", "", "mixing with vec3(1) is a bit overkill.", "-> (1.-c.y)+c.y*rgb -> 1. - c.y*(1.-rgb)    but 1.-smoothstep(a,b, = smoothstep (b,a", "->", "vec3 hsv2rgb_smooth( vec3 c )", "{", "return c.z * (1. - c.y * smoothstep(2.,1., abs( mod( c.x*6.+vec3(0,4,2), 6.) -3.) ));", "}", "CPU, 2015-04-09perfect.", "Antonalog, 2014-03-08that looks very useful indeed! thanks!", "aiekick, 2019-02-20super cool", "suksmaSharira, 2019-02-19clever, use of real-world-like objects makes this quite visceral", "Shane, 2019-10-09Cool. It'd be interesting to give it a more organic look by warping the corn kernel cells ever so slightly with some noise, or something to that effect.", "iq, 2019-10-07Nice one!", "spleenooname, 2019-03-06thxxx Pellicus! ^^", "pellicus, 2019-03-06cool!", "spleenooname, 2019-03-04thx morimea!", "morimea, 2019-03-04very nice", "shyshokayu, 2022-04-24cute", "oneshade, 2021-01-13Very cute! Nice sound too.", "archee, 2020-09-14so realistic sound", "arminkz, 2018-04-29hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "danyo, 2018-04-29I had my speakers on a bit too loud at night and some birds outside started chirping back! LOL", "akhgary, 2018-04-27magnificent", "starea, 2018-04-19Brilliant! So cute!", "dila, 2015-10-04so beautiful", "Ramocles, 2015-01-07impressive!! good job!!", "and, 2015-01-06I love the sound - very realistic.", "Dave_Hoskins, 2015-01-05Thanks. I don't think I have a chance of getting it to work in Firefox (Windows). It doesn't matter how short I make the loops, it still runs out of variable space due to FFs creakingly old DirectX9 dependencies.", "iapafoto, 2015-01-04Incredible animation !  in 2015 shadertoy is so cuuuuute  !", "knighty, 2015-01-04<3", "vgs, 2015-01-03Everything is perfect in this shader! good job!", "nimitz, 2015-01-03Great job, love the animation & audio.", "eiffie, 2015-01-03Nice nice!", "Dave_Hoskins, 2015-01-03Good idea! Done. I don't have the problem on my Windows computer though, but my old iMac has the seam problem.", "Why does it do this, and why is OpenGL cube-mapping that rubbish?", "reinder, 2015-01-03Wow, very nice. Maybe you can use the cubemap-filtering from this shader to avoid the seams?", "revers, 2015-01-03Very natural bird movement. Great work!", "Dave_Hoskins, 2015-01-03Thanks guys!", "The little bird is listening to distant replies from the hedge rows, and either preparing to meet a partner or to fight for its life!", "WouterVanNifterick, 2015-01-03Amazing! nice job!", "dr2, 2015-01-02Exquisite. My Nessie enjoys the singing in her lonely loch.", "movAX13h, 2015-01-02<3", "SharkyUK, 2015-01-02Haha! That is fantastic!", "iq, 2015-01-02Wow, this is seriously awesome.", "aiekick, 2015-01-02yeah ^^. nice", "poljere, 2015-01-02Wow!", "maxwellcoffee, 2023-05-24", "", "Super Sampling: The code uses a technique called super sampling to improve image quality. It achieves this by sampling multiple points within each pixel and then averaging the results to get the final color. This reduces aliasing and produces a smoother image.", "", "Time and Space Deformation: The code uses time and space to create animation and variation in the image. Time is used to animate and change the image over time, while spatial deformation creates interesting visual effects.", "", "Depth of Field: The code uses a simple depth of field effect to blur objects that are far from the focus point. This can give a sense of depth and perspective to the image.", "", "Texture Sampling: The shader samples from a texture to generate color and detail in the image. You can use a variety of textures to create different visual effects.", "", "Cylindrical Deformation: The shader deforms the image to create a cylindrical shape. This is a key part of the visual effect created by the shader.", "", "Layering: The shader uses layering to create a sense of depth and complexity in the image. Each layer is rendered separately and then combined to create the final image.", "", "Shading/Coloring: The shader uses a combination of different techniques to color the image. This includes things like diffuse shading, texture blending, and color correction.", "", "Non-Uniform Scaling: The shader applies non-uniform scaling to the textures to create an interesting warping effect.", "", "Sinusoidal Oscillations: The shader uses sinusoidal functions to create oscillating effects. This could be used to create things like waves or other periodic patterns in the image.", "", "Exponential Decay: The shader uses an exponential decay function to reduce the intensity of colors as they move further away from the center. This can give a sense of depth and focus to the image.", "", "[Generated with GPT-4]", "ShuheCN, 2023-05-23\u5367\u69fd\uff01NB\uff01", "jorge2017a2, 2023-05-21This is great if it is a real tunnel, I would say whirlpool, with a storm", "Dirk, 2023-05-21Awesome. Thank you so much!", "kishimisu, 2023-05-20I'm extremely thankful for the Shader of the Week feature that allows us to discover amazing shaders that we might have otherwise missed. This is beautiful!", "miczac, 2021-03-09@iq thanks! msa, and the coord systems were not clear tome", "@FabriceNeyret2 I can still make out most of it so...", "FabriceNeyret2, 2021-03-09@miczac: you'ld better never read any of my codes, then :-D", "iq, 2021-03-08* dof is depth of field, tim is time, off is offset, ran is random values, msa is montecarlo sample", "* uv are texture coordinates", "* dif is diffuse, col is color, tot is total color", "* p, q and r are coordinate systems (pixel, jittered pixel and polar coordinates respectively)", "miczac, 2021-03-08Looks great, I do wish var names were a it more descriptive though", "FreeFull, 2016-02-26Looks really cool with different textures in iChannel0 too", "mlepage, 2015-06-11Where is the TARDIS and theme music? :-)", "anastadunbar, 2015-04-19It's a tunnel of cotton candy.", "CPU, 2014-11-04Awesome, always good to have a box of cleanex.", "xTr1m, 2014-11-04My comment should now read line 12, not line 10 ;) Shadertoy could benefit from a comment-editing feature.", "iq, 2014-11-01haha, i'm very girly in some ways, no doubt", "FabriceNeyret2, 2014-11-01so girly :-p", "gloinart, 2014-10-31Wonderful! Award yourself shader of the week", "fizzer, 2014-10-31I really love the colours.", "bytewave, 2014-10-31Really cool effect ^^", "xTr1m, 2014-10-31Replace line 10 with this, for the extra uncanny feeling:", "", "p.y += 0.1 * cos(iGlobalTime * 2.5);", "float t =  iGlobalTime + 0.5 * sin(iGlobalTime * 2.5);", "xTr1m, 2014-10-31yuck!", "PauloFalcao, 2014-10-31Stars - Wonders of the World tunnel", "PauloFalcao, 2014-10-31Beautiful!", "", "Reminds me of the gorgeous Stars - Wonders of the World tunnel", "TekF, 2021-05-06Yes, feel free to use this code for anything. I'll add a comment saying it's CC0.", "LosMikEos, 2021-04-21Hi @TekF,", "this is a very stylish shader, great work!", "May I ask you to build on your code and maybe use some parts in a commercial project?", "Many thanks & kind regards,", "LosMikEos \ud83d\ude0a", "CLPB, 2018-09-24Clever, does what it's supposed to.", "bytewave, 2015-04-28const float tau = 6.28318530717958647692   <3", "msodrew, 2015-03-05DOOOPE. thanks for sharing", "singingsingh, 2014-10-10This shader should be server with marujauna", "Flavio, 2014-06-25Nice!", "Danguafer, 2013-09-30Holy shit! It's so trippy to watch on a big screen :|", "Dave_Hoskins, 2013-09-27I guess something like this could be used for fireworks or Hollywood type explosions.", "ssdsa, 2013-09-26Nice!", "simesgreen, 2013-09-26love the red shift.", "Antonalog, 2013-09-25warp speed engage!", "PauloFalcao, 2013-09-25Super smooth and fast!", "macbooktall, 2020-07-25@Lumos Non-commercial sorry (it's a fork of another shader). Feel free to modify to react to music.", "it's dead simple tho you should just write it yourself if you want to sell it", "Lumos, 2020-07-21Could i also use the shader commercially, for VJing and Music Videos?", "Also, may I change the code to make the shader react to music?", "Thank you for your Time and the great shader ^^", "Lumos, 2020-07-17Thank you", "macbooktall, 2020-07-17@Lemos yes of course", "Lumos, 2020-06-28Nice shader  Could i use it when VJing?", "arminkz, 2018-04-29hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "macbooktall, 2015-11-14Thanks!!", "poljere, 2015-11-14Classy", "iq, 2015-11-14nice", "aiekick, 2015-11-14", "MMatteini, 2022-07-19Not visible here, but for anyone using this: vec3 e = step(vec3(0.0), x - x.yzx); can wrongly generate a (1, 1, 1) which mess up i1, i2 creating singularities. I ended up adding e.z = min(e.z, 3.0 - dot(e, vec3(1.0))); after that line to prevent the issue.", "Zi7ar21, 2021-02-06>It's true if you leave this page open for a a day or so you end up with diagonal lines moving up the screen.", "Dear gosh you did it didn't you... You can change iTime with The Shadertoy Extension", "kendrick90, 2020-04-02It's true if you leave this page open for a a day or so you end up with diagonal lines moving up the screen.", "Ecter, 2019-07-15@nikat:  \"You can't implement suitable pseudorandom function just by multiplication\"  That's why you use a proper avalanche mixer on integer seeds.   sin based PRNG generation will generate errors and discontinuities (which ironically, yours already does! I see edge artifacts everywhere!), its far faster to use a mumurhash 3 based avalanche mixer, and be able to use the full bit width of your position to generate the PRNG, resulting in higher quality noise.  These \"fractal artifacts\" are not inevitable to simplex noise, infact most versions don't have them.", "lacasrac, 2018-03-14How to optim it to mobile phones?", "ollj, 2017-09-29I summarizes what I learned about noise:", "http://ollj.turboherz.de/let-us-make-some-really-bad-noise-and-sell-it-as-art", "", "it skips over some things on hashes, the core of noise, because these things tent all to be an [L[CG]] subset as far as shadertoy is concerned. And generalizing [Congruential Generator]s into permutations [P[CG]] becomes a bit weird, to a point where i earlier wrote:", "", "http://ollj.turboherz.de/fourier-is-stronger-than-a-black-hole", "", "---", "", "There is the fun correlation between [modular arithmetic] and [(integer solutions to) euclidean distance = length() for 2 OR more than 2 domains].  It was a key to solving [Fermat's last theorem]. Distance is relevant for voronoi noise and value noise in general. same for a tessellating grid, so there you have your modulo and your Length() in ALL value-noise. With [modular arithmetic], you introduce the [chinese remainder theorem] to interpolations over Simplexes and Hpercube tesselations. you also just interpolate over length()s.", "nikat, 2017-01-18ollj: You can't implement suitable pseudorandom function just by multiplication, you need something more complex.The trigonometric functions are the best among GLSL builtin functions for this. Theoretically, you could abuse multiplication and floating point precision/error in a clever way instead. I suppose the result will be much less portable or reliable.", "", "Trigonometric calls may be more expensive than multiplication but it's not a disaster. Besides, this version of random3 function is well-optimized: a single sin() call gets you all three scalars of vec3. It's achieved by multiplication and calling fract() on a float an a way similar to integer bit shifting. Please provide a better random3() implementaion if I'm wrong.", "nikat, 2017-01-18rwvens: It's the directional artefacts, they can be reduced in the fractal version by rotating octaves. I have updated the shader.", "ollj, 2016-09-15the main problem is the sin() within random3()", "because how a fpu|gpu handles sin() can vary a lot, sin() is always too much of a black box for hashes, and a lot of mobile fpus round sin() way too much, making any hash that relies on sin() distortion next to useless.", "", "another problem i that many systems may use lowp float, which makes hash functions that rely on large values and high precision much worse.", "", "i think the solution is in to instead utilize the golden ratio|angle intelligently:", "const float PHI=sqrt(5.)*.5+.5;//= golden ratio=1.61...", "HashPhi1(float a){return fract(PHI*a);}", "rwvens, 2016-07-22There appear to be diagonal bands of higher contrast marching up and to the right while the noise animates. It's apparent even in the fractal version as regions of increased roughness. Where would that come from?", "Nasimiasl, 2014-10-20Very Usefull Thanks.", "movAX13h, 2014-03-17Looks good now. No more artefacts.", "nikat, 2013-07-09movAX13h: no, i don't get it", "sometimes step on line 38 goes naughty in loops, I had to unroll loop in simplex3d_fractal", "movAX13h, 2013-07-09Do you get the skewed rectangular artefacts too?", "Zelex, 2013-07-07Nice job with the simple shader there", "CPU, 2013-07-03Great stuff! Thanks Nikita!", "FabriceNeyret2, 2020-02-05welcome to your first shaders !", "", "to avoid distortion, while doing the whole centering-scaling:", "vec2 uv = ( 2.*fragCoord - iResolution.xy ) / iResolution.y;", "", "fragColor = vec4(color)", "lollo, 2016-12-09why i can't input my shader codes", "ADOB, 2015-04-10Here's my version with audio:", "https://www.shadertoy.com/view/4ljGD1", "", "@Hex: that blatant plagiarism is disturbing, even if it is a free app.", "Hex, 2015-04-06https://play.google.com/store/apps/details?id=com.syntopia.wawes this guy stole your work and is profiting off it!", "XYX, 2014-11-15audio?", "https://www.shadertoy.com/view/XsjSWV", "Hamneggs, 2014-01-14I found it--Metal Gear Solid: Twin Snakes http://youtu.be/ULOYcUSV82s?t=1m43s", "Hamneggs, 2013-09-04This reminds me of a \"game over\" screen in a video game, but I can't remember which one.", "Tapped, 2013-08-10I made one with audio visualization:", "https://www.shadertoy.com/view/ldl3zX", "", "I did it simple, it may look awkward in some parts of the songs.", "fb39ca4, 2013-07-27I want to see an audio visualization as well.", "fizzer, 2013-03-07Nice. Could be even cooler with some audio waveform visualisation!", "P_Malin, 2022-10-06Yes, it uses jsbeeb. You can program it more easily by using https://bbcmic.ro/ and then clicking the VirtualBeeb button.", "FabriceNeyret2, 2022-10-05is it a true emulation of the Acorn BBC ?", "( I\u00a0couldn't build a program because of the wrong keyboard mapping :-/ )", "P_Malin, 2022-10-05@laserchalk Hmm. I have a variation of this shader that I must get round to finishing at some stage.", "See also https://virtual.bbcmic.ro/ which I worked on the screen shader for which also has a VR version https://twitter.com/DominicPajak/status/1555934213815250951?s=20&t=hX4ZpKJ4s1RxXUuIPpKOMg", "laserchalk, 2022-03-27This would be cool in VR with a retro game emulator.", "cabogie, 2021-06-18This is so sick", "hazenn, 2020-03-31Wow zooming into it feels like a transition from a big prod movie", "prozacgod, 2019-10-07Damn, your phosphors look great! - the moire patterns that show up look.... like they do IRL... crazy good!", "Bers, 2017-09-13Amazing work! Pixels look awesome!", "dila, 2017-08-28really incredible. such expertise!", "reinder, 2017-07-31Very nice!", "TambakoJaguar, 2017-05-05WOW, that is sooo amazing!", "rs, 2017-04-28I love it!", "yupferris, 2017-04-23haha holy what, this rules", "Matsilagi, 2017-04-11Also, it would be nice to have other masks, especially the Shadow Mask, since its used on PC CRTs.", "Aperture-Grille ones would also be cool.", "Polygon, 2017-04-11This is absolutely incredible! How could I ever learn to do something like this?", "I don't even know how to show a 3d shape with shadertoy.", "Matsilagi, 2017-04-10I meant games*", "", "Anyways, nice work. Hope to see more from you in the future", "Matsilagi, 2017-04-10Thanks a lot for isolating the code!", "It actually looks pretty nice for various shaders: https://cdn.discordapp.com/attachments/208411224759599104/301042899225673738/Screenshot_Doom_20170410_132356.png", "P_Malin, 2017-04-09Thanks everyone!", "@Matsilagi - Thanks but unfortunately it doesn't really stand up as a standalone 2D effect. It is very simple pattern of blurred rectangles which only looks ok with the postprocessing and screen material applied here. The main focus I had was to try to antialias the rectangles. Anyway, that part of the shader is here: https://www.shadertoy.com/view/XsSyWh", "shau, 2017-04-09Super!", "Nesvi7, 2017-04-08Amazing!!", "starea, 2017-04-05WOW, masterpiece!", "demofox, 2017-04-05Amazing!", "and, 2017-04-05Awesome!", "Matsilagi, 2017-04-04Is it possible for you to make the screen part (Phosphormask and scanlines) a 2D Screen effect? (oustide the model, just the screen rendered as an image)", "It is the most realistic simulation of a slot-mask i've seen.", "tehsauce, 2017-04-03This is the standard other forms of \"modern art\" should have to stand up to.", "xchip, 2017-04-01disgusting", "pthextract, 2017-04-01Looks good here also.", "fenwick67, 2017-03-31Simply incredible.", "nide, 2017-03-31Wow, wow,", "", "WOW", "Smashcat, 2017-03-31Amazing piece of work. Strangely I see some visual artifacts on my Macbook Pro (with Nvidia GT750M), but I don't see them on my PC (GTX1080). It's a bleeding at the edges of the texture on the screen - I put a screenshot here: http://tinypic.com/view.php?pic=rj2xee&s=9#.WN5e2I4o9E4", "Shane, 2017-03-31Awesome. This appeals to me on a bunch of levels.", "otaviogood, 2017-03-31Very nice realism", "Dave_Hoskins, 2017-03-30Brilliant work, I love the screen flicker and the AA.", "It reminds me of the old Microvitec Cub monitor!", "Duke, 2017-03-30Very nice!", "PauloFalcao, 2017-03-30WOW ... this is too good, Awesome! A masterpiece!", "834144373, 2017-03-30Amazing!", "FabriceNeyret2, 2017-03-30PS: the CRT has no apparant wires: big battery + internal antenna, or all passing through the table ? :-D", "PPS: the good thing compare to LCD is that you don't have to reproduce change of color with view angle :-D .", "FabriceNeyret2, 2017-03-30yep, it's now working directly and the icon now has a content :-)", "flockaroo, 2017-03-30superb!", "P_Malin, 2017-03-30Thanks for the nice comments!", "Hey Fabrice, I changed the mouse down condition slightly. Did that fix the black screen / preview?", "Thank you for your continuing thorough and dedicated compatibility testing service btw", "> did somebody noticed that we can even see the slight reflect of Paul Malin on the screen ?", ":-D", "Haha, I did hack one of my shadertoys once to use the webcam for the back of the cubemap", "coyote, 2017-03-30Fantastic!!", "FabriceNeyret2, 2017-03-30did somebody noticed that we can even see the slight reflect of Paul Malin on the screen ?", ":-D", "mantra, 2017-03-30So good and so fast.", "GregRostami, 2017-03-30SUPER Amazing!! P_Malin does it again.", "jvb, 2017-03-30Almost feels like I'm there!", "iapafoto, 2017-03-30just incredible! Soooooo realistic!", "bpt, 2017-03-30impressively splendid!", "iq, 2017-03-30So good!!", "granito, 2017-03-30omg so satisfying", "BigWIngs, 2017-03-30Wow, that is so good. The screen effect is so realistic. Also the DOF is great!", "aiekick, 2017-03-30really cool", "bram, 2017-03-30black screen (1.5fps) even if I move the mouse. (OSX, Safari 10.0.3)", "public_int_i, 2017-03-29Amazing.", "P_Malin, 2017-03-29You should use an OS/Browser without so many bugs", "FabriceNeyret2, 2017-03-29all black before I move the mouse (and black icon). -> you should fake a mouse location !", "jt, 2021-09-20neat", "gelami, 2021-02-20Awesome! Very nice visualization!", "leacasas, 2019-01-23Insta-favourite", "paniq, 2017-06-07fixed it, thanks to cxw.", "iq, 2017-06-04Works on Windows too", "shau, 2016-09-10Cool. Colouring is nice idea", "dganesh, 2014-07-16Awesome! I really like shaders like these that can interactively explain techniques.", "dedmoros, 2014-05-23Incredible!", "inferno, 2014-05-18wow ! i love it", "toto263, 2020-05-31Can I use your code in my commercial music player?", "ChrisXPZ, 2018-11-10I've been using this as a mini stress test for a laptop for the last couple days, I'm at 135,000 seconds and for some reason it looks like it's underwater now like a refraction effect of some sort but only on things close to the screen. Using a Razer Blade in Linux Mint if that maes a difference. Anyway just thought it might be interesting. The song is amazing btw, I keep turning on the sound every now and then to listen, and I really like the way the light reflects on the walls =D", "chaosink, 2017-11-26Wow, awesome!", "SmoochiLuci, 2017-03-06Hey! The video's up! https://www.youtube.com/watch?v=6IcB1nyEeCg . It turned out pretty well!!!", "XT95, 2017-03-05Hi SmoochiLuci, what a nice song!", "Yes you can use this shader ! I just added a small AA filter to get better edge on the ribbons.", "Please post me the youtube link to see that", "SmoochiLuci, 2017-03-05Hey! I saw this and just had to use it for one of my brother's songs! If it's cool with you, I'd like to use the video I recorded after I put his song through it. Here's a link if you want to give it a listen: https://soundcloud.com/gustavostopher/been-here-before . Along with that, I was wondering if I could upload the video to YouTube as a music video for the song. I'll make sure to credit you as the creator of the scripting/animation of course  . Please let me know ASAP . Awesome stuff!!!!!!!", "shau, 2016-11-19Nearly 4 years too late but this is amazing.", "PauloFalcao, 2013-02-27Cool", "iq, 2013-02-27this is really gorgeous!", "Imsure1200q_1UWE130, 2018-10-25what's the method for this? i dont really understand it.", "iq, 2017-12-19Fixed", "MacroMachines, 2016-12-28Amazing work!", "You have a comment that says the 2d version shader is here: and then shadertoy.com/sort=newest", "I don't think it's in the newest any longer, would be awesome to have the direct link in there, I'll search for it.", "ekmett, 2014-10-26Hrmm. I did a side-by-side (er top-by-bottom?) comparison of the analytical motion blur and the multisampled version, and knighty's variant. I can't seem to actually distinguish knighty's multisampled + analytic from the analytic, but the seam from analytic (or analytic + multisample) to pure multisample is pretty plain to me. =(", "", "All I did was break the image up into bands, replacing the #ifdefs with an", "", "if (gl_FragCoord.y < iResolution.y * 0.5)", "", "since it's showing fidelity that is the major question, rather than speed at this point.", "knighty, 2014-01-09That's extremely cool!", "I've just experiemented mixing analytical and multisampling mation blur. Multisampled-analytical motion blur with 8 samples gives almost exactly the same result as 32 samples multisampled motion blur. I believe that mixing analytical approximations and multisampling would give the best of two worlds (Also thinking about eiffie's SoC...).", "Here is my little modification:", "#ifdef USE_ANALYTICAL_MBLUR", "//---------------------------------------------------", "// render with analytical motion blur", "//---------------------------------------------------", "#define NUMSAMPLES1 8", "vec3 totot = vec3(0.0);", "for(int i=0; i < NUMSAMPLES1 ; i++){", "float fi = float(i)/float(NUMSAMPLES1);", "vec3  ce = getPosition( iGlobalTime + fi/24.0);", "vec3  ve = getVelocity( iGlobalTime + fi/24.0 );", "", "col = vec3(0.25) + 0.3*rd.y;", "vec3 nor = vec3(0.0);", "vec3 tot = vec3(0.25) + 0.3*rd.y;", "vec2 res = iSphere( ro, rd, vec4(ce,1.), ve/24.0/float(NUMSAMPLES1), nor );", "float t = res.x;", "//if( t>0.0 )", "{", "float dif = clamp( dot(nor,vec3(0.5703)), 0.0, 1.0 );", "float amb = 0.5 + 0.5*nor.y;", "vec3  lcol = dif*vec3(1.0,0.9,0.3) + amb*vec3(0.1,0.2,0.3);", "col = mix( tot, lcol, res.y );", "totot+=col;", "}", "}", "col=totot/float(NUMSAMPLES1);", "", "#else", "Tobisonics, 2023-03-18Awesome!", "Ivan71, 2020-05-26can someone convert this shader to construct2? is there anyone who can convert these shaders to construct2?", "Ivan71, 2020-05-26can someone convert this shader to construct2? do you hesitate someone who can convert these shaders to construct2?", "guowei, 2018-06-17wow", "metayan, 2018-05-18Beauty.", "akhgary, 2018-05-08hypnotizing", "Bowser, 2021-11-25Awesome!", "DS222, 2021-11-25It looks great", "MichaelPohoreski, 2016-09-28@FabriceNeyret2 Ah, I've changed the foreground color to be sky blue. I see what you mean now. Fixed.", "FabriceNeyret2, 2016-09-28No, fore must really be white: you have ink (=white) and paper(=blue), and a \"presence\" (or opacity) coef tuning in between. Otherwise a counts twice, and then you see unexpected black between white and blue.", "MichaelPohoreski, 2016-09-28@olij The 3rd glyph is the raw SDF data bilinear filtered and scaled up to show how it compares to the 1st and 2nd bitmap when scaled up.", "", "Definitely there are better SDF funcs + data! As I annotated in the Buf C shader I used the data \"as-is\" from msdfgen", "// SDF \"A\" from", "// https://github.com/Chlumsky/msdfgen", "// https://cloud.githubusercontent.com/assets/18639794/14770360/20c51156-0a70-11e6-8f03-ed7632d07997.png", "", "I wanted to keep the shaders simple so that others can see how easy it is to add SDF instead of over-engineering it.", "MichaelPohoreski, 2016-09-28@FrabriceNeyret2 Thanks for the reminder about gamma correction! I've added holding the mouse button and Y so the user can change the gamma.", "Your proposed change `mix( vec4( 1. ), back, 1.0 - a );` fails when a = 0. I've clarified the blending between background and foreground via:  vec4 color = mix( back, fore, a );", "FabriceNeyret2, 2016-09-28#66 should be  mix( vec4( 1. ), back, 1.0 - a );   ( not vec4(a) )", "", "final line should be fragColor = sqrt(fragColor); for gamma conversion (getting better antialiasing).", "ollj, 2016-09-28nice dcomparison demo:", "", "pretty sure your bitmap of a distance field for a glyph can be better than a blurred shape.", "i remember bitmaps of distance fields looking like better gradients than yours.", "the scaling of your blur makes the distanceField of it look sad.", "", "instead, the buffered bitmap of a distance field should be based on a more precise distanceFunction.", "While its nice to buffer a lowres bitmap for things like terrain and thermodynamics, a lot of glyphs have just too much symmetry not to be utilized directly by a simple symmetrical distanceFieldFunctio, without buffer in between, most glyphs are better defined as sdf directly:", "", "//return mirror on half-rotated axis == tiny single rotation; beware that (a*r2s(r))*r2s(r) ~= a, for any r!", "#define oz vec3(1,0,-1)", "#define r2m(r) mat2(sin(r+oz.xyyz*asin(1.)))", "", "//something like:", "//return distance to A-shape:", "dA(vec2 p){p.x=abs(p.x);", "float horizontal=abs(p.y-0.1);//abs(distance to horizontal line).", "float diagonal=(p*r2m(1.))).y-0.1;//distance to another rotated line.", "horizontal=min(horizontal,step(0.,diagonal));//should make the diagonal sew off the horizontal, diagonally.", "horizontal=min(horizontal,abs(diagonal));//union of sewed horidontal and diagonal distaces.", "horizontal=min(horizontal,length(x)*2.);//union with round bounding box, possibly not the best way to box it.", "}//the constants and min(),max(),step() here likely erroneous or poorly chosen.", "//but this is a pretty simple gradient to apply step(.5,dA(p)); or smoothstep(.2,.8,dA(p)); to to make a border apparent.", "swpuhu, 2023-02-02It's amazing!. Could you make a tutorial for this shader? I really want to learn how to make pretty cool shader like this.", "Haruluya, 2022-09-23Awesome\uff01", "Zi7ar21, 2021-05-08Hey... are you the dude who made the \"Ray Marching for Dummies!\" tutorial? That really helped me learn GLSL!", "Zi7ar21, 2021-05-08How did I miss this?", "cmarangu, 2020-08-28they should make decepticons like tron legacy", "cmarangu, 2020-08-28it loks like decepticon from tron", "cmarangu, 2020-08-28DECEPTICON", "gravitee, 2020-05-05Set beams per second to twice and watch the result. Epic. (Seizure warning)", "firegump, 2020-02-06i'll drive it", "nabr, 2020-01-10#define S smoothstep (:", "flemmingdjensen, 2020-01-09Awesome!!! I am learning a lot from your videos. Advanced math indeed", "", "It would we very nice to see a walkthrough video of this tesla shader - i guess it will be a long one", "", "Happy coding", "Gemmin, 2019-12-04whoa there is a lot for me to learn  great work", "rtepub, 2019-12-01Really nice model and effect! +1 to a run through on The Art of Code . Especially keen to learn about the volumetric headlights, they look great and the code solution looks quite elegant.", "EvilRyu, 2019-11-30awesome!  nice music choice", "g4b0r, 2019-11-30I wanted to build something like this shader, but I figured someone would beat me to it. :-)", "", "I love it!", "dr2, 2019-11-29Probably just as virtual as the real one.", "Great work; hope you didn't generate all those numbers by hand.", "(You should definitely render the windows separately.)", "Carandiru, 2019-11-29haha nice, If it was free I'd drive it!", "dig the volumetric lighting on the headlights and rear lghts!", "asis5528, 2019-11-29haha,nice...love the details", "FMS_Cat, 2019-11-29Tesla in Ziphead!", "yasuo, 2019-11-29This is way insane!", "Shane, 2019-11-29Awesome shader -- I like all the little details. By the way, you can use a smooth minimum function to soften the truck's edges... Oh, wait. I just saw a video of real thing, so never mind.", "akhgary, 2019-11-28Very fast", "jorge2017a1, 2019-11-28Acepto que el acabado del auto es de Lujo....buen trabajo....y las luces brillan mucho y buen dise\u00f1o del piso!!!...saludos", "flockaroo, 2019-11-28haha, awesome!!", "piyushslayer, 2019-11-28Haha I love the neon lighting!", "Dave_Hoskins, 2019-11-28Really nice shader . Very crap truck.. That window thing was all intended, he got in news everywhere for it..\ud83d\ude01 very clever.", "reinder, 2019-11-28Very nice, I like the bloom effect for the lights.", "FabriceNeyret2, 2019-11-28missing the 2 hits by petanque balls ;-p", "iq, 2019-11-28Hehe, of course, I knew this would happen since the moment it got announced.", "", "Very well done.", "ryk, 2020-10-22Please do not use this for commercial purposes.", "pixeljig, 2020-10-22Can it be used in a commercial project?", "greggman, 2020-07-29Thanks! I used it here", "ryk, 2017-08-29Thanks.", "Please do not use this for commercial purposes.", "heliumsoft, 2017-08-29Very nice effect.", "Can i use your code in commercial?", "jmc, 2017-01-16Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Here's a quick demo of other Shadertoy shaders in our Visualizer :", "", "https://www.youtube.com/watch?v=KiAfOQgtxO0", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "hexjayi, 2015-10-19I love it.", "ryk, 2014-02-03Thanks!", "Updated to make the horizontal shitfing a bit more interesting.", "inferno, 2014-02-02WoW ! thats definitely one of the best VCR distortion style simulations i have ever seen . fantastic job", "jt, 2022-12-29Very cool", "timeparticle, 2020-09-28Inigo Q, it's a silly waste of my overvalued time to complement your work... everyone obviously thinks you produce outrageously outrageous outrages.", "However, your comments on mod3 errors compel me to suggest this:  I want you to join/influence/dominate the appropriate ieee or acm or other more appropriate modern committees, and fully work your will, whatever it is, on them. [I can't be the 1st to suggest this to you; so consider this an additional vote. Rock on bruh. [When you're a very old man, you'll probably be glad you did.]]", "teadrinker, 2020-09-18This is great!", "", "Btw, sometimes a hexagonal blinks white, like at time = 42.89 (it happens when map returns zero), just adding any small constant fixes this. (guess it's precision related, happens only on intel UHD, not on the Nvidia rtx 2070)", "mireq, 2020-09-16Cool shader. 4K@60fps render:", "catafest, 2020-09-15A short brief ... I think you don't need this source code ... :", "", "tot /= float(AA*AA);", "...", "tot = tot*tot*(3.0-2.0*tot);", "demofox, 2020-09-14Hrm, hard to tell if it's that much better or not. Sorry about that", "Adding this after line 514 animates it to be low discrepancy over time if useful. (not the 100% best way to make animated screen space blue noise, but not sure how to make what is best. easier to describe than do.)", "ra = fract(ra + float(iFrame % 64) * 1.61803398875);", "Anyways, amazing work again, really cool.", "iq, 2020-09-14Replaced the uniform noise (not white) with blue noise. The difference is small, but well, it is there.", "demofox, 2020-09-14so amazingly beautiful. It'd look even better with blue noise stochastic DOF though instead of white noise (;", "mattz, 2020-09-14Thanks! I like the colors and DoF in this one", "iq, 2020-09-14In terns of traversal, they seem to be similar. This one marches through cell IDs instead of physical space - it finds intersections from the ray origin each time instead of accumulating cell positions as a moving cursors (if I understand well) - so that could bring extra stability for long rays perhaps? Also this one precomputes the dot products of the ray direction and the face normals, since those are constant during all the traversal (and their inverse, so only a mul is needed per iteration).", "", "But conceptually both implementations they seem to work on the same principle, not surprisingly, this is just how one traverses square grids as well: 4dSGW1. I imagine fizzer's tetrahedral traversal works in the same way, but I haven't studied his code yet: 4lcfDB", "mattz, 2020-09-14Just curious, what's the difference versus https://www.shadertoy.com/view/XdSyzK and https://www.shadertoy.com/view/ldBcDd (which Shane used to make https://www.shadertoy.com/view/4dsBz4)?", "jorge2017a1, 2020-09-14I have a doubt because before it looks good ... and it works well ... and now it gets distorted on my machine !!!!", "........", "Tengo una duda porque antes se mira bien ... y trabaja bien .... y ahora en mi maquina se distorciona !!!!", "iq, 2020-09-14Thanks!", "", "Yes. Well, in this case I'm rendering the actual hexagonal prisms, but the idea is to use the exact hexagon traversal as a general acceleration structure, and then raymarch trees/rocks/whatever inside each cell. Similar to this shader where I to grid traversal and raymarching inside each cell. Hexagons are a better way to evenly partition space than squares (closer to a circle). I remember when I studied cell phone networks at uni we used hex cells for this reason. Also Uber and other map-dependent services use hexagon tiling to index their data.", "Shane, 2020-09-14Beautifully rendered, as always. It has an almost path traced feel to it. You do simple lighting better than anyone else, that's for sure.", "", "I've tried both both approaches (cell by cell and sphere tracing) for rendering 3D planes of hexagonal grids, and each have their merits. I like the preciseness of the cell by cell, but I tend to go with the versatile 4-tap sphere traced version, since it allows for soft shadows, easy distance field modifications, etc. I've never specifically benchmarked the two methods side by side, but this demonstration runs in fullscreen on my laptop with ease. The 4-tap (or 3-tap simplex) version requires more cell visits, but can leap several cells at time, and requires fewer operations than you'd initially think.", "PauloFalcao, 2020-09-13So beautiful! So perfect!", "jorge2017a1, 2020-09-13very interesting code and very advanced !!!!", "........", "muy interesante codigo y muy avanzado!!!!", "jorge2017a1, 2020-09-13very surprising and very nice work .... I wanted to do something like that, ... but there is always some fault or error .... uppss", "..........", "muy sorprendente y muy bonito trabajo....yo queria hacer algo asi ,...pero siempre existe algun falla o error....uppss", "piyushslayer, 2020-09-13Really love the lighting!", "FabriceNeyret2, 2020-09-13nice !", "Could we mouse-turn the camera ?", "GCScholar, 2022-08-25Great as usual", "", "I mad a shader myself with metaballs, https://www.shadertoy.com/view/NttyRs, using the quintic.", "Why the cubic leads to normals discontinuity ? it isn't enough the continuity and the zeros at the boundaries of the first derivative ?", "kakaxizhhgjh, 2016-07-01great work! your color always look real. lambert or phong cannot get that real. can you explain code near line 242, i saw similar patterns in many of your shaders. Is there any trick or theory you can share with us? sorry for the poor english.", "bloodnok, 2014-12-09delicious! I'm getting hints of lemon and peppermint.", "Antonalog, 2013-11-03creamy!", "Nema, 2013-10-293d metaballs! My favorite food for breakfast! Wonderful, congrats!", "CaptainBoj, 2021-07-11hey this reminds me of Unreal Tournament", "jarble, 2020-12-11I also edited this shader to improve the framerate in full-screen mode.", "rigel, 2017-08-03Amazing! And thanks for the raymarching reference. I think this is going to be useful when I'll start learning about htis techniques", "Shane, 2016-06-05@russ", "I typed in \"Raymarching.com\" just for fun a while back, and was a little disappointed that no one cared enough about the subject to register the name.  I put the site together pretty quickly. It needs some rearranging. What I really need to do is hook it up to a database, etc... but it's easier just to direct visitors to IQ's material, or here.", "", "As for VR integration, I remember it's just a simple matter of applying a certain function to the screen coordinates and offsetting the camera's X-position left and right accordingly... It's been a while. Either way, a fast moving scene with objects flying past the camera would be well suited to it.", "", "@asneakyfatcat", "I like that Mandelbrot orbit trap example of yours.", "asneakyfatcat, 2016-06-03Great comments", "russ, 2016-06-03I'm guessing you're the same Shane from raymarching.com? If so, keep up the good work dude, I've been learning loads from your code and comments", "Also, we can has VR??? Got a couple of Oculus DK2s at work and this would be amaaaazeballs in 3D!", "Shane, 2016-06-02I haven't looked at this for a while. It's a pretty weird scene.", "", "There are two mechanisms at play. One is wrapping an entire object around a path, instead of just a cylinder. The other is combining two or more simple repeat objects to create something slightly more interesting looking. The possible combinations are endless.", "", "@vamoss", "The dot pattern can be extended to 3D pretty easily, and it looks pretty interesting on a bunch of objects, if not a little gaudy.", "", "@dila", "It'd be interesting to see one of your objects wrapped around a curvy path.", "vamoss, 2016-06-01in the map function:", "objID = 3.;", "return tube;", "", "Crazy", "dila, 2016-05-31Outstanding performance!", "cacheflowe, 2016-03-20Beautiful.", "Dave_Hoskins, 2016-03-18...Or even a simple mouse look.", "iq, 2016-03-18I want motion blur...", "Shane, 2016-03-15@elias", "The Witness - I've only seen screen shots, but they're pretty impressive. The graphics here look more like Doom pre-production debug-mode renderings.  Seriously though, I wish I could add more detail, but it always kills frame rate. A simple additional detail in the distance function can sometimes dramatically increase the ray count.", "elias, 2016-03-13What tholzer said. The panels reminded me of The Witness for a second. Truly amazing.", "poljere, 2016-03-11Awesome!", "iapafoto, 2016-03-11Super good", "Shane, 2016-03-11@tholzer", "One of the weird things about the camera speed is that it effects the animations on the screens. Too fast, and they appear to stop. Relativity in action, I guess. Anyway, I'll see what I can work in.", "", "@TambakoJaguar", "If you listed the top 100 coders on the site, I wouldn't even make the cut, but that's a good thing, because it means there's plenty of people for me - and plenty of others - to learn from. One of the things I love most about this site is that you can always count on someone to take a lengthy academic paper then summarize it in a few lines. In fact, Shadertoy is so good to learn from that I'm surprised that it's not ten times more popular than it already is.", "Shane, 2016-03-11This example was pretty simple, and it shows just one of countless variations. The main purpose was to show that more than just tubes can be wrapped around a tunnel path. I'm hoping that someone will run with the idea and come up with something truly interesting.", "", "By the way, I did a version of this with more detail and realistic lighting, but couldn't maintain frame rate, so it's on the back burner for now.", "", "@dr2", "That Pannini code of yours has already come in handy.", "", "@dine909", "I was thinking of doing something similar, but figured the Bezier path, etc, would be less readable, so let it go. It's definitely on my list, so it'd be cool to see your version.", "PauloFalcao, 2016-03-10I love it!", "TambakoJaguar, 2016-03-10WOW, this is really awesome and well made! You are one of the best here!", "I could watch this for hours full screen, I have 60 FPS", "tholzer, 2016-03-10Fantastic - this is one of my favorite tunnel trips!", "A great combination of solid materials with a metallic construction and an interesting color mosaic - that seems to be the secret which make this animation so fascinating.", "What about adding a speed control with the mouse?", "iq, 2016-03-10Wow, it looks great!", "eiffie, 2016-03-10Fun trip!", "dine909, 2016-03-10This is great -i was planning the same thing, but taking different turns in each cube.  it", "Dave_Hoskins, 2016-03-10Bizarre. Great work!", "GregRostami, 2016-03-10", "dr2, 2016-03-10And now you will have to add some exotic projection effect for a real mindblowing experience", "movAX13h, 2016-03-10", "sirleto, 2020-07-17Duke, so cool that you came up with the idea to turn iq's SG15 landscape with tori into sun surface with flares. such a bright idea, love it! also the whole thing looks incredible :-)", "Zi7ar21, 2020-06-16Would love to see this in Space Engine", "jeyko, 2019-05-03spectacularoni!", "zproxy, 2017-11-25360 at", "entr0cks, 2016-12-21Even sun flares - stunning", "CaliCoastReplay, 2016-08-11This is ill", "vox, 2016-07-13Man you really like drawing fire!", "bloodnok, 2016-03-12Very impressed with the speed at full screen.", "TambakoJaguar, 2016-03-10Very nice! It's good to keep warm now in winter! ;)", "yibojiang, 2016-03-09Love it !!!", "iq, 2016-03-08Hot indeed!", "jt, 2015-12-15Hot!", "iapafoto, 2015-12-09Love this !", "Duke, 2015-10-17Added dithering", "Duke, 2015-10-15Added ultraviolet view.", "coyote, 2015-10-15Beautiful!", "Duke, 2015-10-14Thanks", "to Shane: I checked it with blackbody palette but with real temperature on surface all screen turn white  So I think your palette looks extremely great here.", "to foxes: Why no. Added as comment to this line.", "foxes, 2015-10-14How aboute use in map:", "R(p.yz, -1.5+iMouse.y*0.003);", "Shane, 2015-10-14That is awesome. The use of the sinusoidals to map the terrain is pretty efficient. I sometimes use the layered sin(p + sin(p.yzx)) combination. Probably too much, but it's really handy for cheap randomness.", "", "I didn't put a lot of thought into the weight distribution, so there are probably better combinations. In fact none of those figures are set in stone.", "", "I like this just the way it is, but it'd be interesting to hook it up to a blackbody radiation palette to see what kind of result you get.", "jackdavenport, 2015-10-14Nice! Love the bloom and sun flares <3", "dila, 2015-10-13Hot stuff", "jorge2017a1, 2021-03-18Excellent .... very nice and beautiful toy !!!!", "...", "Excelente .... muy agradable y bello juguete !!!!", "zproxy, 2018-10-06360 at", "ollj, 2016-04-17the overstepping of the lipschitz>1 due to curved bridge deform destroys it too much", "tsone, 2015-07-17Amazing.", "inspercho, 2014-04-09really nice work!!... putting music in channel 1 really brings it... to life.", "Bier, 2013-10-10Wow, so amazing!!", "triggerHLM, 2013-08-09great!", "srtuss, 2013-07-31lovely", "Dave_Hoskins, 2013-07-31Nice Japanese bridge style. Did you really mean \"first snot of the season\"? LOL spell-checkers, hey.", "knighty, 2013-07-30Impressive\u00c2\u00b2", "skumancer, 2013-07-30Amazing man...looks fantastic!", "movAX13h, 2013-07-30the screenshot on fb looks great! ... but it's not compiling here.", "KhanhThai, 2022-10-19@Xenicle: change line 73 to:", "fragColor = vec4( mix(vec3(0.),col,a), a); //change alpha constant \"1.0\" to variable \"a\"", "it's now transparent background", "Xenicle, 2020-07-17Is it possible to have a transparent background on this good fire Shader ? I don't know how to achieve this I'm new in the world of Shader ! :S", "darkfox, 2020-06-08real fire... great!", "CaliCoastReplay, 2016-08-26Love it, speed is wonderful", "jt, 2015-12-14Very cool!", "xbe, 2014-07-24In fact, when I made this shader for fire billboard in unity, I was using a gradient texture to get the final color. Porting it to shadertoy, I may have define the color ramp function to quickly... ;-) I added the blue component and its better. While doing that I added the component swizzle to get blue or green flame...", "mmalex, 2014-07-24really nicely tuned! looks very firey, I've tried and failed to get this same idea looking this good. great work!", "btw - no blue channel at all? MEANY! I tried putting c1*c1*c1*c1*c1*c1*c1 into the blue channel (replace the 0. in line 58), looks a bit hotter I think!", "Dave_Hoskins, 2014-07-23Don't forget Mr Perlin.", "xbe, 2014-07-22Thanks ;-) but most of the credits should go to you for the noise function and Kali for the flame shaping function (taken in his noise test). I just put everything together and tune the rendering.", "iq, 2014-07-22Super cool. I mean, hot.", "Dubswitcher, 2022-05-11Van Gogh!", "codeJ, 2021-09-28how do you change the colours?", "PauloFalcao, 2018-03-01Lovely", "ShardFenix, 2018-02-27This is really really cool.", "thu_yumeng, 2018-02-26amazing", "DavidBraun, 2016-11-30@cornusammonis Thanks. I suppose I should default to that when people don't specify licenses on shader toy. I'll do that going forward. Thanks again!", "cornusammonis, 2016-11-30@DavidBraun since you noted I didn't specify a license, please consider this licensed under CC BY 4.0, i.e. Creative Commons with commercial use permitted, and with attribution required. Just my name is sufficient for attribution but a link to my twitter (https://twitter.com/cornusammonis) would be nice too.", "DavidBraun, 2016-11-30@drmindset I converted this to TouchDesigner. The file is BrushStrokes.toe in this repo.", "drmindset, 2016-04-24Trying to bring over to TouchDesigner. Not too easy with render buffers.", "antonOTI, 2016-04-23this might be the pretiest shader I've ever seen <3", "aiekick, 2016-04-23", "FreeFull, 2016-04-23Really pretty.", "cornusammonis, 2016-04-22Anybody know a reliable way to initialize shaders like this? I've noticed that sometimes it doesn't initialize properly, presumably because the textures haven't loaded yet. Waiting a certain number of frames seems less than optimal and checking if pixel values are at zero doesn't seem to work correctly either.", "movAX13h, 2016-04-21Wow! Very useful to create template matte paintings! Changing the texture in the first couple of seconds gives interesting results.", "stb, 2016-04-21Pretty! It's another one to keep in consideration, for when we finally get to have e-ink wallpaper", "Shane, 2016-04-21 Aesthetically pleasing, and then some.", "iq, 2016-04-21It's beautiful!", "toto263, 2020-04-28@s23b, Thank you! I will add credit in about dialog.", "s23b, 2020-04-27@toto263, sure, as long as you give me credit in some way", "toto263, 2020-04-27Can I use your code in my commercial music player?", "Shane, 2016-12-16I like cleverly thought out visuals like this.", "iq, 2016-12-15Oh, so elegant!!!!", "aiekick, 2016-12-15cool idea", "oneshade, 2021-01-23Creepy cool!", "Kali, 2020-08-21@andremichelle I really like what you did, super nice. Credits are ok.", "andremichelle, 2020-08-21We are using this shader to feature a dark d'n'b track. https://www.youtube.com/watch?v=escG23Epl2A (peaks are controlling the light amount in the center). If you like different credits, please contact me.", "andremichelle, 2020-05-29Breathtaking. I love it.", "Kali, 2018-08-01@dlsorminc I would say sorry, but it was totally on purpose haha. @ttoinou Thanks!", "dlstorminc, 2018-07-26Volume needs adjusting on this one. As it loaded it blew out my headphone speaker and almost my ear drum.", "ttoinou, 2018-07-20Featured in this video  !", "JohanFlod, 2018-07-17brutal in a good way!!", "FreeFull, 2016-02-26My laptop's speakers were turned up too.. Was very surprised by the sudden noise.", "TioTio, 2015-12-14RIP headphone users", "jt, 2015-12-10Looks like from a SciFi movie - creepy-cool", "obidobi, 2014-11-01Yeah what happened to all your awesome shaders?", "vgs, 2014-08-11What happened to your shaders? They are not being listed anymore.", "I miss them...", "Kali, 2014-08-04LOL Dave! and sorry Marken haha", "Marken, 2014-08-03My laptop's volume was very high.. I almost got a heart attack!  But still very cool!", "Dave_Hoskins, 2014-08-03I had an old washing machine that sounded like that! :p", "rogerallen, 2013-07-24If you want to play with sound synthesis and shadertoy shaders, I've merged the Overtone music/sound environment with shadertoy-like shaders in the Shadertone project.", "", "See http://github.com/overtone/shadertone  This shader looks like a fantastic one for hooking up with some ominous generated sounds.  I'm looking for what var controls the central light to try it out myself...", "srtuss, 2013-07-18i love the idea of having shaders for sound synthesis. if the beautypi team  could make this real, i'd play around with it a lot!", "", "great shader btw", "frankwer, 2013-07-18Love it, neat and scary", "Dave_Hoskins, 2013-06-30On the subject of synths. Nearly all DAWs and associated effect units use the CPU only, look at FLStudio as an example. You don't need the GPU for sound.", "weyland, 2013-06-29Superb work once again", "iq, 2013-06-28we thought of synthesizing sound in a shader some time ago. perhaps, when we add multipass rendering, we can add a special output buffer/texture to collect the sound samples. will see though, perhaps it makes the site too complex to use. or perhaps it\\'s a great addition (my guess is that when we have multipass and we start seeing games in Shadertoy, we will want to add mathematical/procedural sound effects as well)", "poljere, 2013-06-28That is a cool idea! We should talk about it sometime", "Kali, 2013-06-28Thanks for the comments! I thought of using some of the soundtracks, but I wasn't sure about adding music responses. Btw, it should be great to have the possibility of adding sound effects... iq/pol: any chance of implemeting something like a sound generator in the future?", "Dave_Hoskins, 2013-06-27It's gonna blow any minute capt'n!", "", "Good one Kali, it feels real and cinematic, very nice.", "poljere, 2013-06-26Love it!", "iq, 2013-06-26Lovely! (I miss now some noisy trance soundtrack)", "", "Besides the 1/z transformation, I also like it when you square the distance metric to get rounded cubes: float dotp=sqrt(dot(p*p,p*p));", "ttoinou, 2021-03-21YouTube 8K60 render  !", "konidia, 2017-12-02But there's not sound in space :o", "ingagard, 2017-11-27Great work, Inspired me in my latest creation. ;-)", "iq, 2016-10-13Looking good!", "frankenburgh, 2016-10-12Uhh.. what a mess ;) Cleaned up a bit... Thanks, coyote", "coyote, 2016-10-12Very nice!", "Just don't add to uninitialised scol in line 104, or otherwise the shader is somewhat corrupted on macs with integrated intel GPU.", "Duke, 2016-10-11Cool!", "w0lf, 2016-10-11wow , nice", "iapafoto, 2016-10-11Nice !", "Shane, 2016-10-11 Really nice. I always appreciate it when someone reveals the code behind one of their demo scenes.", "Virgill, 2016-10-10Supercool, Frankenburgh", "zhaolei1458, 2017-05-04Cool\uff01\uff01\uff01\uff01\uff01", "EntityBlack, 2017-03-20These are mice worshiping the golden cheese!", "", "No wonder, I would worship it myself.", "jmc, 2015-03-10[This comment has been hidden by the shader author]", "4000103, 2014-11-10more than Hollywood!!!! So So awesome!!!", "movAX13h, 2014-10-26Thanks guys!", "Dave_Hoskins, 2014-10-18Deadly!", "Harha, 2014-10-18This looks really, really awesome!", "nimitz, 2014-10-18Superb!", "CPU, 2014-10-17Wow! Awesome stuff!", "iq, 2014-10-17Very pretty!! I don't know what it is, but I find it mesmerizing.", "ollj, 2018-10-29the ground is a fractal with very few iterations.", "its roots are estimated with low precision.", "Imsure1200q_1UWE130, 2018-10-28HOW IS THIS 60fps WOWWW", "ollj, 2016-04-17some lack of some shadows is uncanny.", "TekF, 2014-10-15It's so fast!", "nimitz, 2014-10-14Ah, I was in the process of making something very similar, but this is much better than what I can hope to achieve. Great job iq.", "PauloFalcao, 2014-10-14Beautiful!", "dila, 2014-10-14Sweet!", "AndrewNZ, 2014-10-14Incredible!!  How do you get the colour and lighting so...  perfect!?  Astounding terrain texture - and I don't mean the maps.", "", "IQ once again leads the way.  I wonder what future augmentations of terrain are to come.", "fb39ca4, 2014-10-14Gorgeous as always!", "TDM, 2014-10-14wow! nice allien nature", "Harha, 2014-10-14Amazing... D:", "ChrisXPZ, 2023-01-24This is amazing, it has Big Rigs physics. If you go in reverse you have infinite top speed. I would love to know how fast I'm going but I think I got up to 1500 MPH (assuming the truck fits a 6ft person the truck is about 8ft tall at 16ft long, there are 24 truck lengths between each jump and I was passing about 6 jumps per second) eventually physics broke and I started spinning", "", "So much fun", "DaCuteRaccoon, 2022-10-15How to jump: Press \"v\", wait until the truck is on the ground, then press \"g\" then \"v\" really fast. Your truck will float into the air. To stop, press \"g\" again.", "oneshade, 2020-09-19Really nice!", "VioletGiraffe, 2018-03-04Hi, and thank you very much for the detailed explanation. Shame on me, I totally didn't notice the BufA-BufC shaders.", "Phenomenal work, by the way", "P_Malin, 2018-03-04Oh, wait from that example it looks like y=1 also has does some typematic key repeat too, so its not just \"is this the first frame the key is pressed\" but more like what a text box would do if you press and hold a key.", "P_Malin, 2018-03-04Hi VioletGiraffe, Click the tab above the shader code to look at the code in \"Buf A\".", "The keyboard reading functions I use are near the top of that shader. See the KEY_ constants and the functions KeyIsPressed() and KeyIsToggled(). In Shadertoy there is a special texture \"Keyboard\" which if I remember correctly is a 256 x 3 texture where the x co-ordinate is a keycode to lookup and the y co-ordinate is what you want to query about the key. y=0 tests if the key is currently pressed, y=1 is the \"debounced\" keypress (i.e. is this the first frame the key was pressed) and y = 2 reads a state bit which is flipped each time the key is pressed. See the example shader at https://www.shadertoy.com/view/lsXGzf", "VioletGiraffe, 2018-03-04How is keyboard input implemented? Didn't know Shadertoy supports that. I'm looking at the code, and still not seeing it.", "rhgrafix, 2017-12-30Cool, I did almost 2 barrel rolls off the jump, carved a big groove in the ground, good physics!", "ingagard, 2017-09-22The coolest shader I\u00b4ve seen. FUCKING AWESOME!", "P_Malin, 2016-09-10Now (sort of) supporting VR mode", "metric, 2016-06-06This is sorcery!", "Phi, 2016-03-20Fabulous !", "reinder, 2016-02-16very very cool", "etale_cohomology, 2016-02-09This is SOOOOOOO cool!!", "P_Malin, 2016-02-03Heh, chrome command line option --disable-gpu-watchdog is useful.", "P_Malin, 2016-02-03Yes, I changed the collision response a little. I think it is always the compile time that breaks things.", "I moved some stuff around a bit more (removed some for loops for the wheels), maybe it will help.", "I wonder if we can instrument the compile time somewhere. It is so hard to see what factors affect this.", "iq, 2016-02-03Hey Paul, the shader is now crashing my browsers... Has you changed anything latelly?", "iq, 2016-01-28A - ma - zing!", "anastadunbar, 2016-01-27Worked on a laptop but crashes on my computer.", "poljere, 2016-01-21Wow.. this is getting crazier every time I visit this shader  good job @P_Malin", "P_Malin, 2016-01-19...ok I implemented tyre tracks", "P_Malin, 2016-01-19You cant tell me what to do iq! I'm master of my own destiny!", "iq, 2016-01-16Next step -> leave tracks in the ground as you drive!", "Nrx, 2016-01-15Woooow! G.R.E.A.T.!!", "morgan3d, 2016-01-14OMG", "tomkh, 2016-01-14Haha, very cool!", "vgs, 2016-01-14This is completely crazy and awesome!", "revers, 2016-01-14Incredible!", "Dave_Hoskins, 2016-01-14Amazing work! I'm wondering how did even think that was possible?", "I'm only getting reflections on the Windows at very sharp angles, is that right?", "GregRostami, 2016-01-14P_Malin does it AGAIN!! WOW!", "dancasas, 2016-01-14Crazy! Congrats for this piece of art.", "poljere, 2016-01-14@P_Malin : +1 for the engine noise haha", "P_Malin, 2016-01-14Thanks for the nice comments!", "iq - yes, the terrain is an awful mess. I may replace it completely. I was just happy when I got some of the dynamics working and wanted to share! For now I hid some of the aliasing with motion blur and depth of field :P", "knighty, 2016-01-14Pure awesomeness! <3", "But where is the engine's noise?", "Emil, 2016-01-14That's truly incredible!  <3", "Shane, 2016-01-14Wow. You've even done the undercarriage.", "104, 2016-01-14Insane! Amazing work!", "iapafoto, 2016-01-14I Was eager to see what Mr P Malin will do with multipass. I am not disappointed !!!", "PauloFalcao, 2016-01-14OK... This is amazing! WOW!", "stb, 2016-01-14very cool!", "iq, 2016-01-14Super amazing! Haha, I love it   (i think the rendering is a bit broken for me though, lots of aliasing in the terrain and no fog where I am pretty sure you though of adding some)", "nide, 2016-01-14WOW, amazing!!!", "poljere, 2016-01-14Wow, seriously, wow.", "aiekick, 2016-01-14awesome work man", "Tobisonics, 2023-03-18great sense of speed", "Koagula19, 2023-03-16Very nice", "loathsome, 2023-02-10You should consider changing the very low white value you use, it makes the scene look very washed out. To my eyes anywhere between 12-14 works much better and looks much more natural.", "Bricktronic, 2023-01-28Aren't you the developer of Yedoma Globula? We've talked in the past. Great work!", "samesh, 2023-01-22I get major Rayman 2 vibes from this one,", "Thanks for your creation!", "jt, 2023-01-16Cool landscape and the motion-blur works very well!", "XT95, 2019-08-01I love it !", "iapafoto, 2016-07-25Very good speed effect and love this kind of fake clouds too", "Bananaft, 2016-07-21FabriceNeyret2, done. Thank you. Added values in some other places just in case.", "", "Also added dithering to motion blur, to make it smoother.", "FabriceNeyret2, 2016-07-21suggestion: add more tags. terrain, clouds, ray-marching... (peoples are often seeking for examples of something via the search box).", "FabriceNeyret2, 2016-07-21I see this shader totally noisy because an initialization is missing:", "#47 vec3 color=vec3(0);", "aiekick, 2016-07-17nice clouds", "Duke, 2016-07-17Nice!", "knarkowicz, 2016-07-17Lovely clouds.", "Bananaft, 2016-07-16stupid pixelated clouds", "SunSan, 2023-02-16Oh My GOD", "kroltan, 2022-11-21", "", "Very moody", "jeffbustercase, 2022-09-17This is not wizard, this is god's work", "DhaneshAbhipraya, 2022-07-06sorry wrong one", "spalmer, 2021-11-27Did you try PgDn ?", "DhaneshAbhipraya, 2021-11-27it lags my entire computer.", "", "Literally.", "Zi7ar21, 2020-11-26@me_123 someone remastered it https://www.shadertoy.com/view/wsByWV", "me_123, 2020-11-24This is the best shader i've seen. dose it use ray marching?", "spalmer, 2020-07-25Another thing that would be interesting is to try to replicate the AI behaviors (pathfinding, etc.).  Putting it all together into one toy might be a stretch at this point.", "spalmer, 2020-07-25Congratulations!  Yeah, @kastorp has been going nuts with it, added many features.  I'm sure someone will add redstone at some point; if not, I probably will lol", "fb39ca4, 2020-07-25Wow, I didn't know it had a child, let alone a grandchild!", "spalmer, 2020-07-23It had a grandchild!  Voxel Wireworld 3D", "fb39ca4, 2020-07-20Buffer B has the block data, but there are no chunks (or you can think of them as 1x1 chunks).", "Pingas, 2020-07-04What buffer is responsible for storing chunk data?", "Nicholas_Cowge, 2020-04-19not only have you cloned minecraft, but the lighting in this version is actually better than regular minecraft", "propagant, 2019-11-21Amazing work!", "Zi7ar21, 2019-10-24Wait, Glowstone generates naturally?", "Zi7ar21, 2019-10-24This is legit", "Plento, 2019-06-06OMG. I have no words", "Imsure1200q_1UWE130, 2018-10-28HOW???!!!!", "jt, 2018-01-15amazing!", "semplar2007, 2017-10-22Unbelievable!!", "0xAA55, 2017-02-25This, soooooooooo great! Mojang should go die.", "Fieu, 2017-01-08I just ... that is brillant. I am more than impressed. Keep up development!", "metalim, 2016-12-24Wow! You are my hero!", "lalaman0, 2016-09-25impressive, and it runs reasonably well on my potato too!", "glcraft, 2016-08-22i'm really impressive by your work, good job guy !", "zproxy, 2016-08-19excellent", "public_int_i, 2016-08-04Amazing A++ job.", "bit2shift, 2016-08-03", "coyote, 2016-07-27", "reinder, 2016-07-24wow!!! really, really great!", "Nesvi7, 2016-07-23Mind blowing.", "fb39ca4, 2016-07-23I could but I want to keep this playable even on machines with modest specs. Right now it runs at 40-60fps windowed on my laptop with integrated graphics. (Intel HD 520).", "ollj, 2016-07-23for shame, you could and should smoothstep the cubes and be inspidred by all the shaders that do somewhat volumetric 3d grass.", "fb39ca4, 2016-07-23Were you looking at it when I was still trying to work out texture coordinates for the block previews? It's the same thing as the item hotbar in Minecraft, though I still have yet to implement changing the selected block.", "FabriceNeyret2, 2016-07-23at night you let some ambiant :-)", "", "( I'm curious what these 10 icons are for :-) )", "fb39ca4, 2016-07-23Another feature: Change the rendering resolution with Page Up/Down to improve performance on weaker systems, or to make it look more retro.", "fb39ca4, 2016-07-23*you should find interesting the code", "fb39ca4, 2016-07-23Shane, you should that computes the texture storage coordinate of a voxel from its 3D coordinate. Because the user can go from full screen to windowed at any time, and the contents of the buffers get chopped off from the top and right when that happens, I wanted to preserve the blocks nearest to the player. The texture coordinates are computed so that blocks closer to the player are stored in the lower left corner of the texture, with positive and negative coordinates interleaving. I'll have to make a diagram or an animation of it someday.", "Shane, 2016-07-23 This is pretty awesome, and it renders so fast.", "", "I found your code really helpful when putting a couple of simple examples together, especially the voxelized ambient occlusion procedure. I haven't had time to look this particular example over, but I'll bet there are some invaluable snippets in here too.", "stduhpf, 2016-07-22there are some glitch with collisions when we jump beside a block", "fb39ca4, 2016-07-22Right now it works just like Minecraft, where you can only select up to 5 blocks away. I'll try and add the free flight mode back in to make building large structures easier.", "FabriceNeyret2, 2016-07-22supracool ! but we can put blocks only in close vicinity, right ? (I cannot make a viaduct from the top )", "fb39ca4, 2016-07-22Just added block selection, placing (Q), and destroying (E). Rather than having crosshairs, you select whatever block the mouse cursor is over (while the mouse button is held down, since there is no mouse input otherwise), but moving the mouse still moves the camera. Let me know how easy it is to use. There are also defines in buffer A if you need to change key bindings.", "FabriceNeyret2, 2016-07-21", "you mean, the terrain as well as the light conditions are procedural ?", "sounds great.", "fb39ca4, 2016-07-21iq, mouse capture would also be much appreciated.", "", "FabriceNeyret2, raycasting isn't the only use of parallelism here. Every block is updated ever frame here, but only with information from its neigbors, which is why you can see the lighting gradually spreading. I'm going to try and do something similar to generate structures such as trees.", "FabriceNeyret2, 2016-07-21PS: I agree that we really need more mouse event. IQ, give us the state of the mouse buttons ! :-)", "FabriceNeyret2, 2016-07-21Note that I considered implementing Sentinel https://en.wikipedia.org/wiki/The_Sentinel_(video_game)  or Populoushttps://en.wikipedia.org/wiki/Populous, wich are \"3D look without 3D engine\". :-)", "I finally chose Lemmings ( almost done, cf  https://www.shadertoy.com/view/MttGDr ) because I found it makes a better use of parallelism. Now, sure, true ray-tracing/marching *is* making use of parallelism :-) , but not really for the game engine itself...", "fb39ca4, 2016-07-21jameswilddev, Edge chokes on shaders with large amounts of code after loops are unrolled. Since all the blocks are saved in another buffer, the raycasting loop here only has to compute a texture coordinate from the current position, read the texture, and advance the ray, which is a lot less code than using a complicated map function inside the loop.", "", "FabriceNeyret2, I agree this is a bit of a stretch for the rules. At least I can say the textures are inspired by the 90s. I've been wanting to make this for a while, and even had an early version of the infinite terrain management scheme from around a month ago, and this contest got me to make more progress on it.", "stb, 2016-07-21This is really good. Actually felt like the real thing for a moment  I wish shadertoy had an alternate (& standard) mouse input method, though", "vgs, 2016-07-21super cool! good job!", "Maurogik, 2016-07-21This is insanely good !", "FabriceNeyret2, 2016-07-21ultra nice !", "But, hey, minecraft is 2011, not 80ties or 90ties ;-)", "jameswilddev, 2016-07-21Awesome job, even compiles quickly on Edge - a lot of buffer-based shaders don't at all and I thought it was unimplemented there!", "fb39ca4, 2016-07-20Added arrow keys. Later on I'll add some defines to make it easy to switch keybindings.", "FabriceNeyret2, 2016-07-20NB: WASD is not friendly with non-US keyboards... may you add arrows ?", "mclarekin, 2022-01-12thanks olij, i know very little about computers so always thankful for any advice. But man!! i was using a GTX 960m and have just now switched to a RTX 2070 laptop, the frame rate increase is incredible", "I work coding formulas for Mandelbulberv2 software, i can see there is a lot for me to learn from here at shadertoy", "ollj, 2022-01-11shadertoy sacrifices at least 50% performance for WYSIWYG and compatibility, where a proper canvas has more optimized modes, more extended hardware support, and less overhead (browsers eat way too much memory anc cache)", "mclarekin, 2022-01-11cool. I am still getting slightly faster with the polynomial in openCL but there could be other openCL things going on", "With shadertoy I always need to google to find  \"ALT Enter\" for compile", "Here is IQ pow8 polynomial  with a sphere grid", "https://www.deviantart.com/mclarekin/art/MB-IQ-pow8-sphGrd-cxz1-s12-903556788?ga_submit_new=10%3A1641942539", "iq, 2022-01-11When I wrote the article I still used to render my fractals in the CPU, so then that held true. In the GPUs this time, the trig version is faster than the polynomial. I'll added some text to the article to clarify that.", "mclarekin, 2022-01-11Thanks for checking,  i should really be testing in shadertoy or Fragmentarium as there are all sort of other things going on in Mandelbulber that i have no idea of the effect on rendertime.  I will soon have in Mandelbulber both  trig and polynomial versions running in both c++ and openCL so i can do some more testing.", "", "https://www.iquilezles.org/www/articles/mandelbulb/mandelbulb.htm", "Reading this article on the mandelbulb has been great thank you.", "first line typo?  populat", "Under optimizing \"The result is a polynomial which has no trigonometric functions and runs much faster:\"  is that still correct or am i getting confused (  we now have the trig faster?)", "iq, 2022-01-10Trigonometric is still 1.4x times faster than polynomial on GeForce RTX 2080. So, I think the comment still holds true, but we'll see for how much longer.", "mclarekin, 2022-01-09comments in code about what is faster between trigonometrics versus  polynomial is maybe out of date? Testing using MandelbulberV2 OpenCL,  I find not much difference,  with polynomial being slightly faster", "fraser, 2021-06-06For some reason on my vega FE (running in an egpu on mac, probably doesn't matter), the polynomial version gets about 40fps with the trig version down at ~30.", "iq, 2021-03-17yonatan, sqrt(m) and length(w) are never equal to each other, their difference is huge, especially near the Mandelbrot set. If you are not sure of the maths, you can easily assert or falsify your hypothesis by testing it right in the code.", "ollj, 2021-03-16yes, you can skip the sqrt(a) of length(a)=sqrt(dot(a,a)), but only if a ~=1", "", "the precision loss is aquatically exponential.", "ollj, 2021-03-16length(a)~=sqrt(dot(a,a))                   for any a !=NaN", "length(a)==1.0/inversesqrt(dot(a,a))   for any a !=NaN ;  length(0)==0", "", "where ever normalized quaternions/vectors are used intelligently, you expect the quaternion/vector to lose a little bit of precision, after every ROTATION, but not change its length much. lets assume an initial quaternion/vector of length(a)=1, which is a reasonable default form.", "to increase quaternion/vector precision, you want to normalize() the quaternion/vector roughly every 4 rotations, BUT you do not need to normalize(a)==a/length(a), because length(a)=1 is asserted to be (and stay)  VERY close to 1.", "Because of this assertion, repeated quaternion/vector \"normalization\" (of an already normalized vector), for the sole purpose of avoiding cumulative precision loss, simplifies to", "normalizeQuaternion(a)==a/dot(a,a), but only if length(a)~=1", "yonatan, 2021-03-15Are sqrt(m) and length(w) always equal in the transcendental inner loop? If they are you can do something like:", "", "float r = sqrt(m);", "dz = 8.0*pow(r,7.0)*dz + 1.0;", "", "and save a length() call.", "playbyan1453, 2021-03-13Hey man, I followed the instruction that you made. But how do i change the power of the mandelbulb.", "Zi7ar21, 2021-01-25Hey IQ, I am really sorry for that comment. I don't know what came across me and I actually really admire you. I hope I didn't hurt your feelings too much and I'd just like to say sorry...", "michaelzfreeman, 2021-01-23Always loving mandelbulb's  ... Just made my first ever forked edit on shadertoy  - https://www.shadertoy.com/view/3tyczc ... experimenting with chroma keying so this could be keyed over the top of a background video. I notice the license is non-commercial. What if I wanted to use this commercially ?", "jorge2017a1, 2021-01-22Well I recognize that the result of the mandebulb is excellent, difficult to do better .... well I try, but it is difficult, so this fractal is very good !!!! Nice work IQ.", "..........", "Bueno reconozco que es excelente el resultado del mandebulb, dificil de hacer mejor .... bueno lo intento, pero es dificil, asi que es muy bueno este fractal !!!! Buen trabajo IQ.", "Zi7ar21, 2021-01-21Oh\u2026", "Sorry, I didn't know that, I guess I came off as rude\u2026", "Thanks for telling us how it is determined", "iq, 2021-01-21I've had 3 Shaders of the Week in the last 2 and a half years. That's close to one shader a year on average. That's feel far from your claim \"All of them seem to be his\".", "", "If you look all the way to 8 years back, a lot of shaders were mine and of a small group of users since the community was way smaller then and the random Shader picker had more chances to pick up one of ours, naturally.", "", "I guess what is misleading you is the fact that the \"Shader of the Week\" is not \"Shader of this Week\", meaning, it's not the best shader of the current week. Instead, \"Shader of the Week\" is a shader (selected from Shadertoy's history - 8 years at the moment) that represents the website for a whole week. Basically, having had the most impressive shader on a given week doesn't mean you get priority over the other hundreds of shaders.", "Zi7ar21, 2021-01-20 All of the shaders of the week seem to be IQ's stuff from years ago", "I mean I get he is really good at it but there is other amazing stuff here too and it's kinda sus that IQ is an admin and all of them seem to be his... Michael0884 has made some lit stuff, he deserves a shader of the week. Specifically his latest one where he ported Marble Marcher... https://www.shadertoy.com/view/3lKyDR", "olealgo, 2021-01-20LoL @ previous comment", "Zi7ar21, 2021-01-20Ingio determining shader of the week", "movax20h, 2020-05-29Nice. It is interesting that you only need 4 iterations to get really decent idea of the asymptotic behavior and good results.", "Plento, 2018-11-02so beautiful", "ollj, 2018-09-29why orange-grey and not orange-teal?", "Phi, 2016-05-06Beautiful !", "filipealvesferreira, 2023-03-29It could be useful for do-g-phone's soul on folks hands", "jt, 2023-02-21Nice look!", "Joaozin003, 2023-02-05the dithering makes the lighting much nicer, doesn't it?", "lalaoopybee, 2023-02-03have you considered using the luminance formula(or the weighted grayscale)?", "not sure if it would be what you are going for but:", "#define GRAY(r, g, b) dot(vec3(r, g, b), vec3(.299, .587, .114))", "AntiPro, 2023-01-31Proper link: https://www.shadertoy.com/view/clXXRl", "AntiPro, 2023-01-31I forked it into a universal DOS palettifier (though not all too much remains from your code): https://www.shadertoy.com/view/clXXRl", "zero_ou, 2023-01-27Very Return of the Obra Dinn looking, nice!", "ENDESGA, 2021-07-24did something funky with this: https://www.shadertoy.com/view/7tjXRh", "paniq, 2016-03-10framerate is implausibly high!", "anastadunbar, 2015-12-23I wonder how I put \"sprites\" in 3D depth.", "rockeyda, 2015-06-27replace throes spheres with sprites and make it a Genesis ROM :P", "Harha, 2015-05-15Very nice! I love it!", "vamoss, 2016-09-08Amazing, would be even good if you did the light tail.", "Dave_Hoskins, 2016-09-0510000 chars for a star field? It does look nice though.", "jackdavenport, 2016-09-04Did a little bit of animation on your FOV, looks pretty good", "float t   = mod(iGlobalTime,32.);", "float def = smoothstep(4.,10.,t) * (1. - smoothstep(30.,32.,t));", "float fov = mix(FIELD_OF_VIEW, 3.1, def);", "float originToScreen = screenWidth / 2.0 / tan(fov / 2.0);", "jackdavenport, 2016-09-04FIELD_OF_VIEW 3.1 looks like a warp drive", "TimoKinnunen, 2016-09-04", "const float FADEOUT_DISTANCE = 1.0;", "const float STAR_SIZE = 0.99996;", "const float CLUSTER_SCALE = 0.002;", "const float BLACK_HOLE_CORE_RADIUS = 0.92;", "is amazing!", "aiekick, 2016-09-04love it", "stduhpf, 2016-09-04Nice but very slow.", "Shane, 2020-11-15@jarble", "There's a few tweaks and variations on the minimum surface distance that can help -- Replacing \"d<.001\" with \"d<.0001*t,\" etc, which are all based on loosening surface hit accuracy in the distance, where it matters less. The \"abs(d)<.001*(1. + t*const)\" was my particular tweak, and I've used it on various examples for years. I didn't use it here because I didn't want to confuse matters beyond necessary. Also, tweaks along those lines can sometimes effect reflections, depending on the situation.", "", "Some of my examples were written years ago, and were sometimes based on code written years before that. Reflections, even five years ago (almost to the day) could really slow things down, and there were so many weird things that could ruin performance. These days, I'd probably recommend some of my later reflection examples as templates, since GPUs can handle nesting and branching much better. In fact, come to think of it, I might put up a 2020 version... Actually, nothing in 2020 has turned out good, so I might wait until 2021.", "jarble, 2020-11-11The rendering is a bit faster if you replace abs(d)<.001 with abs(d)<.001*(1.0+t) and abs(d)<.002 with abs(d)<.002*(1.0+t)", "stevejtrettel, 2020-05-09Reading through and trying to recreate this has been incredibly helpful for me! Thank you for posting such detailed comments  And beautiful work!", "cmarangu, 2019-10-04and fifth of all I wish this site would allow me to edit or atleast delete my comments???", "cmarangu, 2019-10-04BrainSligs83 first of all ur names nasty second of all I too love screensavers and third of all they still are on Mac OS X and fourth of all my screensaver is a homemade PLAYABLE (arrow keys) pong screensaver", "BrainSlugs83, 2019-10-01Man, I wish screen savers were still a thing.  I want this! XD", "cmarangu, 2019-09-20but theyre not rigid, square-faced cubes???", "kakaxizhhgjh, 2016-07-06looks really nice!! someday i will learn this.", "keelo, 2016-06-23Really nice! Thanks for commenting this so well, it's really helping me learn.", "TambakoJaguar, 2015-12-20Pretty 'n fast", "Haimoimoi, 2015-11-30@Shane", "I may toy with fullscreen aliasing a bit.  My home dev machine is pretty beefy and I'm always curious to see how far I can push something.  Didn't even think about the shadows -- good point!  I need to learn more about temporal techniques anyways, since it seemed to be on everybody's lips the last couple siggraphs.", "", "Thanks for the response Shane!", "Shane, 2015-11-25@Haimoimoi", "", "The original code is tucked away in an outer loop with a \"break\" statement, which is dependent on pass number... and on my slower test machine, it's really slow. However, the reason I stuck to just two passes for this particular example was for reasons, as you mentioned, noise.", "", "As for the temporal filter, this has the cheapest one available, a swiftly moving camera.  Seriously, though, the still-frame antialiasing you see when you hit pause is always a little on the disappointing side. You'll also notice that more shadow iterations (only 16 are used) are necessary.", "", "I've seen people apply a single-pass, geometric, edge filter, then take out the noise in the hot spots. It kind of works, and it's definitely faster than antialiasing the whole thing, but it's still not quite the same.", "Haimoimoi, 2015-11-24I just discovered this   For a good time, copy/paste the second pass as a third pass.  Works as-is to add another bounce.  I kind of want to run that through a temporal filter to see if I can eliminate the noise.", "", "This is a crazy well-written shader.  Thanks Shane!", "iapafoto, 2015-11-19super class as usual", "Duke, 2015-11-18Cool!", "aiekick, 2015-11-18thanks ^^", "834144373, 2015-11-18Great!", "and in detail", "Shane, 2015-11-18@hexjay", "", "Shaders are great learning tools in general, because the limited instruction quota forces the coder to get to the point. Anyone interested in graphics-based code who's ever had to sift through countless thousands of lines, or volumes of text, just to hunt down the ten line's they're actually after would definitely appreciate Shadertoy.", "Shane, 2015-11-18@aiekick", "", "I looked at one of your recent shaders just before putting this together. Hence, the color scheme. I made note of it in the code somewhere.", "aiekick, 2015-11-17awesome", "iq, 2015-11-17pretty", "hexjayi, 2015-11-17Nice !", "I'm learning a lot from your shaders.", "andremichelle, 2020-09-14Hi Shane, we used your shader for a featured track on audiotool. I could not find any license information, so I hope we are fine. If you want different credits, please contact me.", "https://www.youtube.com/watch?v=3MmD_M8QT7c", "Shane, 2020-05-15@jarble", "I've tried it out on voxels, and it does a pretty good job. There are some interesting transparent voxel demonstrations on Shadertoy. I also have a couple of cleaner looking versions of this particular technique on here somewhere.", "", "GPUs have come a long way since this was published. Bouncing a ray through glass cubes is quite doable these days. I have a heap of unpolished examples along those lines that I'd like to complete and put up while it's still a relatively new thing to do -- If I wait too long, we'll be path tracing everything.  By the way, I tried path tracing this in real time... and that was a few hours I'll never get back.", "jarble, 2020-05-14This shader could be a good starting point for a voxel renderer. It should be possible to change the color and opacity of each cube.", "khlorghaal, 2019-05-03CUBES MAKE ME HAPPY", "jeyko, 2019-04-13the annotation reads like an article  ! thanks, beautiful code !", "Wowshade, 2017-01-18these are the greatest shaders To experiment with", "akohdr, 2016-06-09@Shane: super smooth so I'm using this to investigate some macro ideas.", "https://www.shadertoy.com/view/ldKXzK", "bloodnok, 2016-04-10smooooooth", "teassy000, 2016-04-10Coooool!", "dila, 2016-04-09simple and nice!", "otaviogood, 2016-04-09@Shane - this is a mystery to me. I just tried debugging it some more and couldn't figure anything out. Tried FabriceNeyret2's suggestions. It works on my Windows machine just fine, but both of my macbook airs show a black screen. One is a work machine, so it's not like they're even going to be configured similarly. It's very nicely commented code though.", "Shane, 2016-04-08@otaviogood", "I fired this up on my girlfriend's overpriced Facebook machine, otherwise known as a Mac. It worked on that setup, so I can't seem to recreate the problem. I made a few changes: Clamping - just in case it's a \"pow\" negative thing, reordering, etc. The only other thing I can think of is the loop setup. Some systems are really picky with ordering, break conditions, etc.", "", "Either way, it's just a bunch of transparent cubes, so you're not missing out on much. It's no \"Alien Beacon,\" that's for sure.", "FabriceNeyret2, 2016-04-07otaviogood:", "- what if you use smaller loop line#103, e.g. i<16. ?", "- or hash33 line #37: what if you use smaller values, e.g. vec3(20971, 2621, 327)", "Shane, 2016-04-07@otaviogood", "That's a bit of a mystery. As far as I can tell, everything that needs to be initialized is, there are no \"pow\" functions to cause trouble... but computers never get it wrong, so it must be something. I hear some systems don't like \"vec *= mat,\" so I've changed those to \"vec = matTrans*vec.\" I'll fire it up on a Mac in the morning, and see what happens.", "flymoon, 2016-04-07fantastic!!!!", "otaviogood, 2016-04-07I just get a black screen on macbook air/intel gpu. Tried debugging a bit, but couldn't figure it out.", "Shane, 2016-04-07As mentioned, this is a modification to the Duke's \"Cloudy Spikeball\" formula, that in turn was based on code from the \"Code Is My Pron\" demo by Nuance.", "", "Apart from providing an interesting aesthetic, it's a great way to visualize certain 3D surfaces inside out - so to speak - without having to perform GPU-burning multiple reflection-refraction bounces.", "", "I have a couple of other examples on Shadertoy that make use of the technique, if anyone's interested. The formula can be tweaked in so many ways, and coupled with more interesting scenes, so it'd be interesting to see what others could produce.", "ciberxtrem, 2016-04-06Super cool!", "indivisual, 2016-04-06awesome", "KylBlz, 2016-04-06well commented! a true resource", "vgs, 2016-04-06I really like this!", "coyote, 2015-10-15", "Shane, 2015-10-14@aiekick", "", "You can tweak the figures to produce all kinds of scenarios. Toning down, or commenting out, the unit ray jitter produces a more focused scene. Of course, the isolines become more prominent. Reducing the \"thD\" variable, tweaking the final loop line, increasing iterations, etc, makes things more concise, but at the expense of framerate.", "", "You could also swap in a more forgiving distance field equation, etc, but I wanted to continue with Fabrice's repeat cube theme. By the way, replacing it with a Menger Cube, metaballs, etc, is pretty interesting.", "", "By the way, I haven't tried it on this particular example, but it might look nicer using the weighted distribution thing, a la Cloudy Spikeball - and some of IQ's texture-based examples. Finally, if you had a fast computer, more sophisticated lighting looks interesting. I'm currently putting together a simple example that \"attempts\" to apply point lighting.", "dila, 2015-10-13lovely", "dila, 2015-10-13lovely", "snolot, 2015-10-13Realy nice effect!", "Duke, 2015-10-13Cool!", "FabriceNeyret2, 2015-10-13Uh, the smart guy will only factor out the iGlobalTime*0.375, mat2(rot) + the color mixings at the end (and suppress the clamp already done after you). Nothing very creative ;-)", "iq, 2015-10-13Super awesome!", "aiekick, 2015-10-13i have put the code d=max(d,0.02) after the line 108. i prefer this effect  the box edges are less visible. this peace of code come from the spikeball shader", "FabriceNeyret2, 2015-10-13nice !", "aiekick, 2015-10-13wow", "kig, 2013-12-27Thanks for noticing, fixed now.", "reinder, 2013-12-27You should change line 8 in  ... sqrt(abs(d)), or add a line ( if( d < 0. ) return closestHit; ) to prevent taking the sqrt of a negative number.", "mikeyaboy, 2023-01-06@fjavifabre ok", "fjavifabre, 2023-01-04@mikeyaboy Analytic shapes and using a single analytic light help a lot.", "mikeyaboy, 2022-12-12why can't blender make it this fast", "Mobeen, 2021-01-01Any useful documentation to learn more about whats going on in this?", "Mobeen, 2021-01-01getMaterial function could be reduced to just this instead of chaining a few if/else if branches", "Material getMaterial(int i) {", "return materials[i];", "}", "JoshScholar, 2020-07-06Amazing!", "57ar7up, 2020-06-221.5K LOC, holy sh...! Seems good other than that", "koiava, 2019-08-26Thanks", "reinder, 2019-08-26Really beautiful!", "JohnShadow, 2018-07-28It pretty much converges at 1spp.", "zqueezy, 2018-02-13Also: The CLAMP_CAUSTICS is broken because mtlSample does not write to the 'spec' out variable.", "koiava, 2018-02-08Hi @zqueezy. That's true. Term 'Next Event Estimation' is usually used with different meaning in literature. People in literature call it to direct light sampling which also was confusing for me. As you might notice already sampleBSDF function returns hit information including material, normal and so on and inside loop I use 2 structs to store data for current and next event. That's why I added that comment, but anyways I will change it to not confuse people. I will also add links for papers.", "Thanks for commenting", "zqueezy, 2018-02-08Hi, I really like this shader... a few comments though:", "PdfWtoA is never used and could be removed because all integration is done in solid angle measure.", "The ggx_sample function is taken from here: https://hal.archives-ouvertes.fr/hal-01509746 You could put a comment or maybe it's enough that i did that now...", "Your comment says \"In addition BSDF sampling does next event estimation and returns all necessary values which corresponds to next event\" which is wrong and left me puzzled for a few seconds. actually the sampleBSDF computes the next hitpoint which is used for continuing the random walk. In the literature \"next event estimation\" is used to express the light sampling for reasons that have always confused me too.", "Cool shader anyways, probably a lot to learn for beginners.", "revers, 2017-05-22Very good!", "koiava, 2017-05-19@ollj Thanks for commenting. I added what you suggested, however I'm mainly trying to concentrate on rendering optimizations assuming that rendering is most complicated part of this shader.", "@aiekick @KylBlz  Thanks!  I'm be glad if someone will find it interesting for learning purposes.", "If you will difficulties of understanding code let me know that I can make it more clearer.", "KylBlz, 2017-05-18Instant <3, will study after I understand your first MIS shader. Turned all options on and samples to 4; got decent FPS and it converged in seconds! Compile time could use consideration though. Your code is structured well; how do you think this handles caustics?", "aiekick, 2017-05-17wow nice", "ollj, 2017-05-17damn double post. last one was dumb.", "ollj, 2017-05-17using bvec2 and all() or any() to compare multiple bools at once:", "if(all(equal(iMouse.xy,vec2(0)))) {//if mouse is on view.", "if( iMouse.z < 0.0 ) {//if left mose is down.", "}else{//mouse is on viuew and not pressed", "}", "}", "ollj, 2017-05-17bvec4 boolean vectors are fun", "//if(coord.x == 0.0 && coord.y == 0.0) {", "if(all(equal(coord.xy,vec2(0)))){", "equal(,) notequal(,) greaterthan(,) lessthan(,) create boolean vectors to be condensed into single bools by any() or all()", "a bvec4 lets you to boolean comparisons of two vec2 in a a pipeline of 2 vector operations:", "if(all(equal(vec4(a.xy,3,4),vec4(1,2,b.xy)))){", "is true if (a.xy=vec2(1,2) &&  b.xy==vec2(3,4))", "this is more fun with inequalities.", "ollj, 2017-05-17i used to hate temporal reprojection (buffA mixing with self=iChannel3) but in the end it solves more problems than creating a blurry mess, when done right, like here.", "ollj, 2017-05-17they never buffer iResolution to reset when the resolution changed between frames.", "ShaderPawn, 2022-01-25666", "emart, 2021-06-18\u725b\u903c\u554a\uff0c\u6536\u85cf\u4e86", "yunhai, 2021-05-20amazing!", "jt, 2021-04-28awesome!", "Kirk, 2021-04-12\u8fd9\u4e5f\u592a\u5e05\u4e86\u5427", "whiskets, 2021-03-25\u592a\u9177\u4e86\u5427\u8fd9\u4e5f", "jcyuan, 2021-02-20@xjorma, thanks man, yep imo it should be zero too.", "xjorma, 2021-02-19@jcyuan @oneshade Nothing to add, expect I always assumed render target was initialised with zero (black), I hope it's a good assumption it's not initialised with something else somewhere.", "jcyuan, 2021-02-19it does make sense, thanks @oneshade", "oneshade, 2021-02-19When the buffers sample from each other they get values from their previous states, they don't get rerendered until the next frame. At the very beginning they get initialized to something... not sure exactly what. See https://shadertoyunofficial.wordpress.com/2016/07/20/special-shadertoy-features/", "jcyuan, 2021-02-19hi @xjorma, it's soooo amazing shader!! totally don't understand how it woks, but except the hard part of fluid simulation, i have a simple question: why there are channels are referenced by each other, it looks like a recursively calling. imo this will cause error but it obvisouly not...", "spawner64, 2021-02-12This is beyond cool. It's .. *dry* .. *ice*. Seriously, congrats. I can't stop watching this.", "aiekick, 2021-02-11haha indeed", "xjorma, 2021-02-10@aiekick haha, but now I am not sure if this shader is \"shader of the week\" because it looks cool, or because I won the the PHP lottery", "jeyko, 2021-02-10amazing", "aiekick, 2021-02-10congrats xjorma to be finally Shader of the week", "jorge2017a1, 2021-02-10interesting shader !!!!", ".......", "shader interersante !!!!", "turboMarek, 2021-02-10Cool  :]", "JScotty, 2021-02-02This is amazing!", "KylBlz, 2021-01-28nice", "flightcrank, 2021-01-27I jizzed", "FabriceNeyret2, 2021-01-27@iq: oh, it's purely random ? not related to marks ?", "p=1/125 : strange. starting with the fact that I don't feel that \"shaders of the week\" are changing every weeks. Plus they seem to sample up to the oldest shaders, not only the ones of the current week. ;-)", "Or do I miss something ?", "iq, 2021-01-27Pray to the God of the PHP pseudorandom number generator! Every week you have a chance of 1 in 125 approx", "xjorma, 2021-01-26Thank you @iq and @croqueteer", "Hoping to be shader of the week, one day in my life", "iq, 2021-01-26Wow, pretty amazing!!!!", "croqueteer, 2021-01-26Elegant.", "xjorma, 2021-01-24Thank you @flockaroo @oneshade @FabriceNeyret2 and @Duke.", "Duke, 2021-01-24Cool!", "FabriceNeyret2, 2021-01-24very nice !", "oneshade, 2021-01-24Beautiful!", "flockaroo, 2021-01-24really beautiful!", "Limekys, 2021-02-07https://twitter.com/Limekys/status/1234955193772576768", "Game Maker Studio 2", "guowei, 2018-06-17really cool", "rndrfero, 2017-12-01thanks: https://www.youtube.com/watch?v=gpVW-r4D4FQ", "jlarks32, 2016-12-13Awesome job. This is beyond sweet.", "GottZ, 2016-12-03woah. even has decent mouse controls. awesome!", "CaliCoastReplay, 2016-08-06This is sick brilliant", "Nairou, 2015-09-13Thank you!!", "foxes, 2015-09-12the first link is in the code. noise4 is the same noise with expansion to vec4. noise4r an experiment in a smooth transition of one of the axes , for more lively animation.", "", "in fact, it can only be used noise4 but then it will not be so alive.and these features no animation is simply a transition between the different layers of noise`s", "Nairou, 2015-09-12Thanks for the link! After looking at it a while, I guess a more specific question would be where your animated noise functions come from? Are they a particular type of noise I can look up, in order to understand your noise4() and noise4r() functions?", "foxes, 2015-09-12I really don't know how to help you, but", "it's not so difficult to understand, maybe you should learn to start something about it", "http://www.ccs.neu.edu/home/fell/CSU540/programs/RayTracingFormulas.htm", "", "but the truth is there are things much more complex, which are obtained as a result of numerous experiments.", "Nairou, 2015-09-12How or where can I learn how you did this? I see the shader code, but I don't understand what it does. It looks amazing!", "aiekick, 2015-07-20wow very nice", "RockyMadio, 2020-05-23thanks again srtuss!", "laserdog, 2017-11-22great stuff. learned a lot by reading through this shader...", "MacroMachines, 2017-11-17I also emailed once,  So what to do?  I'm remaking my own effect using similar technique.", "ninjapretzel, 2017-09-15I have emailed you multiple times, with no replies about having used this in a game. I had published the game \"before\" you added the disclaimer. (I also found it originally on GLSL Sandbox without it, and semi-recently saw a modified version with the disclaimer added)", "", "I have modified it (and ported it to a different shader language, and used different noise functions for fully 3d noise), but it's still the same effect underneath the hood.", "", "Figured I'd post this here because I finally came across this, and wanted to be transparent about having used the effect in a game.", "iq, 2015-10-26I fixed the problem, the shader works again.", "", "(and yes, it's a super nice shader!)", "denosya, 2015-09-20Nice!", "(note : there is a small compilation pb that prevent people to see this from the preview page)", "aji, 2015-07-02looks really cool with euclidean distance too. nice work!", "movAX13h, 2013-06-27passt, filip_sound", "srtuss, 2013-06-26durchaus, kling verlockend.  skype?", "movAX13h, 2013-06-25cooler effekt! hast du zeit und muse um an einem computerspiel zu arbeiten?", "srtuss, 2013-06-15Thanks for the feedback. I probably should make this a screensaver, I could just sit there and watch this for hours. ^^", "bitek, 2013-06-15Beautiful. And works pretty fast, very cool!", "mu6k, 2013-06-14I love this. Great job.", "fizzer, 2013-06-13Oh and very nice colour changes too.", "fizzer, 2013-06-13Nice electric current effect. I've used the same trick, but the result was nowhere near as good as this!", "jt, 2021-09-10fantastic", "jorge2017a1, 2020-06-25a beautiful stone ..... an artistic work ......", ".........", "una bella piedra .....un trabajo artistico...", "lhog, 2018-07-11Meh. Read the:", "> Only this way I was able to match numerical (calculated) and analytical derivatives.", "as", "> Only this way I was able to match numerical (calculated) and analytical normals.", "lhog, 2018-07-11I think I need an additional explanation on this.", "", "Both calcNormal() and tnor.yzw contain noise derivatives. This is not the same as normals.", "In my project (not on the ShaderToy) I had to construct two vectors, containing either analytical or numerical partial derivatives and make them cross() to obtain a normal vector at some point of the noise. This is the part of the actual code:", "", "#if defined(ANALYTICAL_DERIVATIVES)", "//pn.y, pn.z contain partial derivatives dNoise(xyz)/x and dNoise(xyz)/y. dNoise(xyz)/z is irrelevant because z was a time uniform", "vec3 va = vec3(1.0, pn.y, 0.0);", "vec3 vb = vec3(0.0, pn.z, -1.0);  //no idea why minus", "#else //numerical derivatives", "const float off = 0.01;", "const float off2 = 2.0 * off;", "", "float s01 = noise( uvHm - vec2( off, 0.0 ) ).x;", "float s21 = noise( uvHm + vec2( off, 0.0 ) ).x;", "float s10 = noise( uvHm - vec2( 0.0, off ) ).x;", "float s12 = noise( uvHm + vec2( 0.0, off ) ).x;", "vec3 va = vec3(off2, s21 - s01,  0.0);", "vec3 vb = vec3(0.0 , s12 - s10, -off2); //no idea why minus", "#endif", "", "yzw = normalize( cross(va, vb) );", "", "Only this way I was able to match numerical (calculated) and analytical derivatives.", "", "In this example the code uses derivatives directly (instead of making them normals) and somehow it does work. Can someone explain how this does this work?", "przytulnykotek77, 2018-06-11Fajna animacja", "Danguafer, 2018-06-06Different scale + noise animation", "https://www.shadertoy.com/view/4sKBzm", "tholzer, 2017-09-26modified version at  https://www.shadertoy.com/view/MtXyDj", "ollj, 2017-03-07foxes: computational complexity in parallel processing is trickier. number of iterations matters less because gl unrolls all loops and often pipelines small loops rather well to something that computes in much fewer ticks than iterations. and a lot of analysis easily packs multiple operations into a single 16x16 matrix function that computes just as fast as a 4x4 matrix function.", "ollj, 2017-03-07[This comment has been hidden by the shader author]", "iq, 2017-01-08Yes, the Hessian (second derivative) gives concavity information, but it's a very bad approximation for occlusion. The link in the description has the Hessian computation for a 2D terrain.", "FatumR, 2016-12-21Ah, I also tried to calc normals analytically here: https://www.shadertoy.com/view/XlBSWR some time ago, also was using second derivative to get ambient occlusion estimation (will work for terrain only), but decided to leave some stuff to see sparkling specular light (which looks good in full-screen mode from my personal point of view ).", "foxes, 2016-12-20Funny thing, if you use calcNormal we have 8*4=32 iterations, and if interesect 128 (Analytical Normals). I have FPS for calcNormal 46, and interesect 40.", "If use calcNormal then interesect discarded.", "834144373, 2016-12-05Pretty Cool.", "otaviogood, 2016-12-04See, this is why we need something like Tensorflow but for shaders. So people don't have to write analytic versions of everything. The computer should do that.", "Shane, 2016-12-04I like the rendering style. It looks like concrete.", "", "It seems like a reasonably cheap additional calculation, relatively speaking. Apart from that, having access to the normal inside the distance function would make for some interesting surface variations.", "", "By the way, my machine receives a bit of a boost when I relax the break condition in the intersection routine to something like \"if( abs(hnor.x)<0.001 ) break;.\"", "BigWIngs, 2016-12-02All very much over my head but very cool!", "Duke, 2016-12-02Nice!", "jarble, 2020-11-11The rendering speed seems to improve when I replace h < precis with h < precis*(1.0+t)", "raabix, 2020-03-11Crazy, I was waiting for some monster to jump down the airvent. Really well done", "zproxy, 2018-06-24360 at", "citruslee, 2014-10-02which texture did you used? because when I change to whichever colored noise tex, it breaks the scene", "PauloFalcao, 2014-09-13WOW!", "demofox, 2014-09-02This gives me \"unknown error\" in chrome / win 7 now FYI!", "movAX13h, 2014-09-02The compo is over now. You won", "P_Malin, 2014-09-01There you go with your abandoned bases again. I love this, it's is a really great composition (when I can tease it into working).", "Dave_Hoskins, 2014-08-31The sounds are great as well!", "vgs, 2014-08-31This is truly amazing reinder! It has a very cinematic feeling to it!", "demofox, 2014-08-30Very cool! (and doesn't crash for me anymore either)", "GregRostami, 2014-08-30WOW!!", "fizzer, 2014-08-30Excellent!", "otaviogood, 2014-08-30great lighting and atmosphere", "reinder, 2014-08-30thanks !", "iq, 2014-08-30And I forgot to say - SUPER COOL!", "iq, 2014-08-30Yes, it works great now  Thanks!!", "reinder, 2014-08-30 ok, hopefully everything is ok now.", "iq, 2014-08-30The visuals work now. But the sound shader is crashing too apparently - probably too much code expanded too.", "reinder, 2014-08-30Tanks a lot! I've updated the shader. Hopefully it compiles fine now.", "iq, 2014-08-30The problem is expanding calcNormal() 128 times. If you split the marching loop in two loops, then it compiles fine even with 128 ray steps (per bounce!): float intersect( vec3 ro, vec3 rd )", "{", "const float maxd = 60.0;", "const float precis = 0.001;", "float h = precis*2.0;", "float refl = -1.;", "", "float t = 0.;", "for( int i=0; i < MARCHSTEPS; i++ ) {", "if( h < precis || t > maxd ) {", "int1 = ro+rd*t;", "refl = 1.;", "break;", "}", "h = map( ro+rd*t );", "t += h;", "}", "if( refl < 0. ) return -1.;", "", "ro = ro + rd*t;", "vec3 nor = calcNormal(ro);", "rd = reflect( rd, nor );", "ro += 0.1 * nor;", "t = 0.0;", "for( int i=0; i < MARCHSTEPS; i++ ) {", "if( h < precis || t > maxd ) {", "int2 = ro+rd*t;", "return 1.;", "}", "h = map( ro+rd*t );", "t += h;", "}", "", "return 0.0;", "}", "", "Otherwise I have to do the number of steps really low (64)", "ben, 2014-08-30Very nice. I keep expecting to hear the motion tracker from Aliens.", "reinder, 2014-08-30 Ok thanks, I will try to find some windows machine to 'debug' the shader... (or can you try if it works with a lower MARCHSTEPS?)", "iq, 2014-08-30Damn, it's still not working, now not even without BUMPMAP. WebGL...", "reinder, 2014-08-30Ok thanks, I've undefined BUMPMAP now by default.", "iq, 2014-08-30It crashes here too. But indeed, undefining BUMPMAP makes it work.", "reinder, 2014-08-30hmm, and if you undefine BUMPMAP (line 4)?", "demofox, 2014-08-30crashes for me on chrome / win 7 ):", "jorge2017a1, 2020-07-16A beautiful job .... very good example of shader games ... thanks for sharing !!!!", "............", "Un bello trabajo .... muy buen ejemplo de juegos con shader...gracias por compartir!!!!", "CyberMousey, 2020-04-22Can we get an update to this shader so it works in VDJ 2020?", "HLorenzi, 2014-11-28Hmmm, it seems the SPR and SPR_H defines are leftovers from an early version, where I had to input the sprites' pixel colors manually; for example, SPR(0,1,0,1, 2,1,1,0, 2,1,0,1, 1,2,0,0) is a row of 16 pixels using an indexed palette. The macro would combine individual pixels into a float value, to be extracted later using SELECT (since a float could only hold up to 8 pixels, SPR_H was defined so it would split the row into two values). But since then, I made an automatic conversion tool that exports the entire sprite in a more compact way.", "miloliu, 2014-11-28what's the meaning of SPR_H equation?", "rafacacique, 2014-01-08Wow, really awesome, congrats!", "And thanks for the tutorial!", "infinitysend, 2014-01-08PLEASE make this into a screensaver!!!  All you would need to do is make Link move to the far side of the screen and it scroll over, and start all over again.  Different enemies would be great too!", "fizzer, 2014-01-08Simply amazing.", "PauloFalcao, 2013-12-20Wow!", "HLorenzi, 2013-12-19No, it's not supposed to repeat (but there's so much one can do with hash functions!)", "I've explained the basic movement concept at https://www.shadertoy.com/view/Md2GW1. I'd be glad to continue the tutorial if someone feels the need for it.", "Dave_Hoskins, 2013-12-19Yes, please comment on the process, I'm trying to figure out where it repeats, or does it?", "HLorenzi, 2013-12-18Thanks", "I like making these kinds of dynamic shaders! Sorry if it's a mess... I'll try commenting the code!", "iq, 2013-12-18I'm still trying to understand how you have done the animation, it's pretty amazing!", "demofox, 2013-12-18Amazing... and best game ever to boot!", "lazygunn, 2013-12-23I love it, it's a typica kind of pattern can boggle the eyes a bit when sped up, always good", "Zavie, 2013-10-14Nice idea, there is definitely something to do with this.", "hello_its_thomas, 2023-03-16incredible", "jonasfrey, 2022-11-24insane!", "Lumos, 2020-07-21Woah, great shader :O could i use the shader commercially, for VJing and for Music Videos?", "Also, may I change the code to make the shader react to music?", "Thank you for your Time ^^", "Flexi, 2018-11-28Great tip with the pause, thanks! The rolling animation is the default behavior again.", "FabriceNeyret2, 2018-11-28oh, I thought the broken icon and start was a new thing.", "", "\"comment return @ Buf A::148\": still still for me. but ok if I do that on the one line 154 :-)", "", "\"easy screenshot': do you know that you can pause a shader, but then moving mouse still increment iFrame at each tick event ? ;-)", "Flexi, 2018-11-28the old issue with the noise texture is still happening upon first load, but the standing frame effect is in fact intended. If you want it to just roll, go to Buf A line 148 and comment-out the \"return;\". I liked it better with the still frame to make screenshots easier.", "FabriceNeyret2, 2018-11-28same on windows.", "NB: if I let mouse button pressed, simulation then get alife.", "FabriceNeyret2, 2018-11-28NB: giving the ancient look if I move the mouse, but with no live motion in the simulation. Appart along a thin top and bottom border.", "FabriceNeyret2, 2018-11-28Strange: no longer working for me ! ( linux/OpenGL. now whith bg with still random black dots )", "ollj, 2018-10-08dragons are not allowed to spit into the lake of dragon cum!", "Flexi, 2017-10-12Is it a solid color (white) or do you see sprinkled dots? The latter is the intended effect. I made it \"bullet time\" interactive at some point, and you must keep the mouse button pressed down and move to advance the cellular automaton. I preferred it that way to make better screenshots and it feels like you're actually drawing. Try and comment out the return in Buf A line 154.", "Dave_Hoskins, 2017-10-12I should have said, refresh or rewind does not work for me.", "Flexi, 2017-10-12The problem is the noise texture which is not yet loaded in the very first frames. Refresh the page, it should be there then.", "aiekick, 2017-10-12@flexi, thanks for the explaination.", "#dave me too", "Dave_Hoskins, 2017-10-12For me this just now shows B&W noise until the mouse is clicked on it.", "Flexi, 2017-10-12@aiekick: Apparently not. But then again, BlurA isn't called anyway. The accessor functions are a bunch of redundant copypasta in all shaders. Ultimately, the texture feedback in Buf B is not even used in the composite Image. I put it in as one of the most simple reaction-diffusion effects just as surplus for curious hackers, and you can only see it when you take the look at the raw Gaussian pyramid or use the BlurB bypass. Now the pipeline would actually support Buf A feeding on Buf B and vice-versa when you set the input texture accordingly. It's left blank intentionally so you know which texture channel is not used if you consider using an additional input texture.", "aiekick, 2017-10-11in buf B the iChannel0 is used at line 40 but no buffer selected. is this wanted ?", "Flexi, 2016-11-24@pixartist: I took a look at your profile and also saw the fluid sim. Check this out if you don't already know it: http://www.cake23.de/firewater.html", "Also the Game of Life is neat. My most recent piece is this one: http://www.cake23.de/stochastic-spline-emitter+poi-toi-pixel-drift-mix.html", "Shoot me an email at 23flexi@gmail.com", "Flexi, 2016-11-24@pixartist: Look here's a sketch of the pipeline: https://twitter.com/Flexi23/statuses/686583437814317057", "Basically, there are multiple blur resolutions stored in one texture and it manipulates the lookup vector in such a way that an ever smaller subregion is used. Try commenting out the line 91 in the composite shader (Image).", "pixartist, 2016-11-24Could you explain to me the way the BlurA function in BufA works with a level > 0 ? I really don't understand what it does.", "Flexi, 2016-02-24@fabrice: sort of, yes. It's actually also the alpha channel for four \"species\" if you want to say it so. Remove the comment slashes in the Image composite shader in line 79 to bypass the raw RGB sampler. The feeding cycle is defined in the lines 179-180 in Buf A. (red gets eaten by alpha and feeds on green, and so on)", "FabriceNeyret2, 2016-02-24why the title, BTW ? as naming the 3 species ? :-)", "anastadunbar, 2016-02-24Trippy.", "jt, 2016-01-27Cool!", "Dave_Hoskins, 2016-01-24Colourful!", "aiekick, 2016-01-24", "davidar, 2016-01-24I'd considered implementing this one myself, but it wouldn't have been anywhere near as beautiful as this", "iq, 2016-01-24Nice!", "Shane, 2016-01-24This is truly gorgeous, not to mention, educational. The coloring process at the end is really interesting. Has a Photoshop vibe to it.", "FabriceNeyret2, 2016-01-24so great !", "PauloFalcao, 2016-01-23Very very cool", "GregRostami, 2016-01-23WOW!!!!", "Wowshade, 2017-01-17If I replaced the audio with a picture  it turns into a  Histogram", "msodrew, 2014-02-07alright this is sick", "morgan3d, 2013-09-08Apparently the encoding of bitmaps using the equivalent floating point operations also rated mention in an old SIGGRAPH paper: http://en.wikipedia.org/wiki/Tupper's_self-referential_formula http://www.dgp.utoronto.ca/people/mooncake/papers/SIGGRAPH2001_Tupper.pdf", "SrTocino, 2013-06-24Amazing!!", "laggyluk, 2013-03-01neat", "reality3d, 2013-03-01Thanks iq!", "iq, 2013-02-28The text is encoded as a bitmap of 80x6 bits. Every group of 16 bits is stored in a literal constant - the numbers you see in the begining of the code. The individual bits are extracted by doing a SHIFT to the right (1.0/pow) and then a AND with the less significant bit (mod(, 2))", "laggyluk, 2013-02-28I'm also curious about that font trick", "nice track btw @.@", "reality3d, 2013-02-28We need an article for the text encoding in a shader", "Cha, 2013-02-28Love it!! I almost cry.. XD", "PaulJan, 2013-02-27That just cheered up my whole evening! \\o/", "rez, 2013-02-27omg! it's fabulous :'D", "feiss, 2013-02-27haha, very original and cool! :O", "tomachi, 2023-03-14THANKS!!! This is magical. I mean...   s=s*1145141919u+1919810u;", "Did you overload sdbox? I did't know it was possible. Crazy tune also.", "ttoinou, 2023-01-12I couldn't participate ! I want to know next time a demoscene event happens in Portugal or Spain", "playersteve19, 2022-12-23wait soundcloud works again?!?!", "MacroMachines, 2022-12-19INCREDIBLE!!", "Dc100537, 2022-12-12CODE SO STINKY", "mikeyaboy, 2022-12-08the bass is... especially in the part before the drop its phenomenal.", "afo, 2022-12-07Phenomenal.", "I work in TV broadcast, and this is incredibly realistic (minus the Z-motion, LOL)", "calebxcaleb, 2022-12-07I need to know how you did this. This is the coolest thing i've ever seen", "jt, 2022-12-06Wow!", "BrunoLevy, 2022-12-06Amazing ! Pure sorcery, can't beleive it's only 478 lines of code !", "fishy, 2022-12-06All the panels have so much detail, I'm super impressed!", "Danguafer, 2022-12-06I love it so much!", "EisernSchild, 2022-11-07Love it  (I grew up door by door to the sound studio of my father)", "totetmatt, 2022-11-06Learn me senpai <3", "PauloFalcao, 2022-11-06WOW", "0b5vr, 2022-11-06I've made it a 4KB Intro: https://www.pouet.net/prod.php?which=92807", "Shane, 2022-11-05 This is fantastic.", "totetmatt, 2022-11-05Crazy !", "ocb, 2022-11-05Art !", "merry, 2022-11-05What a beauty!!!", "ollj, 2022-11-05https://ktane.fandom.com/wiki/List_of_all_modules [vanilla-entry modules only]", "leon, 2022-11-05That's so beautiful! Love your work", "myth0genesis, 2022-11-05The amount of variation is incredible!", "iq, 2022-11-05So stylish!", "granito, 2022-11-05wow!!", "jorge2017a2, 2022-11-05 wow surprising, I hadn't thought about it....excellent....very good!!!!...well now I'm doing another task and now I can't make toys!!!!", "blackjero, 2022-11-05Cool!", "flockaroo, 2022-11-05sweet!!", "blackle, 2022-11-05awesome! I love it", "jt, 2021-09-04awesome!", "jarble, 2020-12-15I edited this shader by adjusting the raymarching precision with each step, which seems to improve the framerate.", "jorge2017a1, 2020-05-28The work is GREAT .... the result is very good .... the industry is Genius ... I hope to do something similar some day or some years ... oopss", "..........", "El trabajo es GRANDE .... el resultado es muy bueno .... la industria es Genial ... espero hacer algo similar algun dia o algunos a\u00f1os .... oopss", "ShadowFlare, 2019-04-11A couple of improvements:", "First off, actual gamma correction is ((col+0.055)/1.055)^2.4.", "Second, we should integrate integral bump mapping, shown here: https://www.shadertoy.com/view/tdBXDV", "chrisjj, 2018-11-05ollj, where does one find the docs for the markup that allows comment links like yours?", "chrisjj, 2018-11-04ollj, thanks for those. \"tartan-pattern floating modular arithmetic rasters\" target looks faulty - it goes to this page.", "ollj, 2018-11-04i often redefine iTime as something with a huge offset. if anything its lower precision easily detects if it traverses voxels/honeycombs/SpacePartitions/AABVs or not.", "", "a trick to apparent complexity with minimal (fractal) iterations is a mix of", "an aperiodic fast hash1to16", "and tartan-pattern floating modular arithmetic rasters with better intervals (updated pmodInterval of hgsdf)", "for pseudorandom offsets rythm, without fractal iterations", ", hopefully with only 2 taps per dimension (without diagonal taps) for continuity over a hash.", "chrisjj, 2018-11-04Lovely!", "", "I too see shaking -- after about 10hrs. I'll guess the culprit is imprecision in line 525, \"Look At\".", "", "Also, is it just me but is the antialiasing on corners (not bars) worse than expected? Highlighted on my simplified version https://www.shadertoy.com/view/XttBWf l, slowed and having light at camera.", "rigel, 2017-08-03So much detail. Love it", "huwb, 2016-12-25really like this! the bump mapping is really strong, works super well.", "TambakoJaguar, 2016-12-19Awesome, as usual!", "Shane, 2016-12-17Thanks for the comments. I'd like to do a multilevel version with stairs and indoor banisters at some stage, but it might be difficult to get it running quickly.", "", "@dr2", "From a visual interest standpoint, this scene could do with an animated entity of some form, and automated robots would do nicely. I'd love to see your take on something like this. I'd imagine it'd be quite something.", "", "@pthextract", "I never let these run for more than a minute or so, but it wouldn't surprise me if some errors would creep in with large time values. Hardware is not my forte, but it's pretty easy to see that the GPU \"sin\" function breaks down with large values. I'll assume the lab nerds who designed the circuitry of standard GPUs needed to trade off between accuracy and speed.", "", "I guess it'd be possible determine a time point at which scene resets itself and set the time back to zero... but hoping everyone gets bored with it in under a minute is my lazy solution.", "Shane, 2016-12-17@voz", "Mobius in a 3D setting covers a broad spectrum. I guess it depends what you're trying to achieve. Mobius strips are simple enough to raymarch, and there's a few examples on here already. You could extrude the 2D effect you're familiar with as well, but I couldn't be sure how quickly it could be done.", "", "@KylBlz", "It's amazing how a trivial variable change can make or break a scene.", "dila, 2016-12-17so good!", "drift, 2016-12-16Fantastic", "pthextract, 2016-12-16Nice. But if it runs for a long time it starts shaking a little?", "zproxy, 2016-12-16nice", "Duke, 2016-12-15Very nice!", "public_int_i, 2016-12-15Shane great stuff as always, this scene really has a nice design to it though", "shau, 2016-12-15Brilliant!. Runs at 60fps on my crappy VM at work. As usual thanks for the comments and options", "dr2, 2016-12-15Where are the robots?", "voz, 2016-12-15You think we can work on something together?? I need help getting this mobius transformation into a raymarched algorithm:", "", "https://www.shadertoy.com/view/XtcSD2", "voz, 2016-12-15Shane! How ya been man?!", "", "This is vox.", "otaviogood, 2016-12-15so industrial!", "KylBlz, 2016-12-15looks great, nice bumps, super smooth framerate. WARM changes the feel a lot!", "hutien, 2023-03-24Hey, nice demo, is there any way to use it into unity ?", "valentingalea, 2020-10-28@UnidayStudio yes go for it!", "UnidayStudio, 2020-10-26Awesome! Can I use an adapted version of this shader commercially (giving you the credits)?", "microwerx, 2019-10-27Cool demo...I was wondering if the dark ring around the horizon is normal for this model?", "16807, 2019-03-27Hey Valentine! We talked earlier at the last cppcon. Wanted to thank you again for the demo, I finally got around to implementing a shader for my pet project here: http://davidson16807.github.io/tectonics.js/ Your demo helped a lot in the process. I also found an interesting approach you can use to eliminate one of the nested for loops in the raymarch code, using a closed form approximation. I wrote up an example shader for that here: https://www.shadertoy.com/view/3dBSDW", "mds2, 2018-04-18I didn't realize just how sweet this was until I started down the path of trying to write one myself.  This one is nice.", "Imsure1200q_1UWE130, 2017-08-02oh wait nvm i made a mistake..", "Imsure1200q_1UWE130, 2017-08-02@valentingalea change", "#define PI 3.1415926535897932384", "into", "#define PI cos(0)", "", "works the same but cos(0) likely has more than 50 digits of pi value", "valentingalea, 2017-04-10@FabriceNeyret2 fixed - thank you!", "valentingalea, 2017-03-20@randomekek fixed! thank you!", "randomekek, 2017-03-20it looks like \"sample\" is a reserved word, so you should do a search and replace to update this shader.", "Hodgman, 2016-08-02Looks much better with a tonemapper right at the end (line 289, before fracColor =...):", "col = pow(col*5.0 / (col*5.0+vec3(1)),vec3(2.2));", "valentingalea, 2016-05-31A bit but I'm unsure what are you trying to achieve? Full realism or something for like video games? Cause this is good for neither  that's why I kinda gave up on it. Artist don't like this look even if it's realistic they need a lot of tweakables...", "xchip, 2016-05-31Thanks! From that paper it looks like the size of the sun is as big as in your sample. Also the size seems to be correct since it matches the CIE sky 12...  I'll keep on looking into this... did you have a chance to look at my modifications?", "valentingalea, 2016-05-31Unreal Engine 4 for ex. uses https://hal.inria.fr/file/index/docid/288758/filename/article.pdf which is more rigorous. Try and see if it fits your needs.", "xchip, 2016-05-31cool! I was enabling the on planet perspective by hand.", "", "I tried reducing the power of the sun (as a cheap tonemapping) and also used gamma, unfortunately the sky becomes less blue and the sun gets more blurred...  The only way to get a smaller sun and and keep it sharp is to raise mu to an exponent...  Think I don't really like since it is a mathematical hack  But any ideas are welcome!", "valentingalea, 2016-05-31there is no explicit sun modelling except it's \"power\" see line 128.", "", "I've also enabled back the on-planet perspective, check it out maybe it helps.", "xchip, 2016-05-30BTW the sun when it is at 45 degrees of height has a \"fov\" of about 40 degrees (see https://www.shadertoy.com/view/XdyXDw) For a game that uses an horizontal fov of 90 degrees this means that the sun is as .5 times the width of the screen. This is definitely too big. In your sample it looks fine because you are using a super wide fov. Or this or I am missing something obvious  Any ideas what could be going on?", "valentingalea, 2016-05-30@xchip indeed that would be more correct, but I left a bit faster variant", "xchip, 2016-05-30Also the Henyey term should be:", "", "return 3. / (8. * PI) * ((1. - g * g) * (1. + mu * mu))/((2. + g * g) * pow(1. + g * g - 2. * g * mu, 1.5));", "valentingalea, 2016-05-30@xchip thanks!", "1) well spotted - fixed!", "2) indeed but looks more dramatic without it", "xchip, 2016-05-30Very cool!", "I caught a couple of things:", "1) line 243 should be sumM * phaseM * betaM", "2) missing gamma", "a_python_script, 2023-04-09I translated your shader into the Godot shading language.", "https://godotshaders.com/shader/lava-shader/", "hypnothalamus, 2022-02-12This is beautiful! I used it here as a ShaderLayer in Clavicula: https://www.instagram.com/reel/CZ2kD5vqjbJ", "k_kondrak, 2017-08-03This reminds me more of hellish fires covered by dense smoke than lava. Great effect!", "Imsure1200q_1UWE130, 2017-06-03Cool! nah its not cool.     Its HOT!!! of course its lava. Bad thing i cant spash lava around :,(", "mu6k, 2014-08-09Nice and fluid", "cyanux, 2014-06-24One word : AWESOME!", "ewerybody, 2014-06-24nice! And fast it seems!! \u00e2\u2122\u00a5", "iq, 2014-06-24Very hot!", "Xor, 2014-06-23Ooooh, I like this lava.", "P_Malin, 2014-06-23Interesting variations and great palette in these.", "Koagula19, 2023-03-16sensational effect", "Velox, 2023-02-26what is the name of the song/music used? it works really well with this.", "PyThrrrown, 2022-01-08You are absolutely right, my friend.", "Flexi, 2019-03-21I like Candy Tunnel.", "FabriceNeyret2, 2018-04-21darknest get bright after 20\"", "iq, 2018-04-21Cool! A bit too dark in my computer, but fun to watch", "confirmedancient, 2020-10-27\u0432\u0438\u043d\u0434\u043e\u0432\u0441 \u043c\u0443\u0432\u0438\u043c\u0435\u0439\u043a\u0435\u0440!", "andremichelle, 2020-09-24Hi Shane, I used your shader for a featured track on audiotool. Hope you like it despite the fact that I replace the random texture with sin-waves). If you like to have different credits. please contact me.", "https://www.youtube.com/watch?v=sXJEUySofqk", "celifrog, 2020-09-06This looks really cool!   2000's demoscene wut XD.", "xjorma, 2020-08-31Noice!", "benhardy, 2020-08-31Excellent work.", "cmarangu, 2020-08-30Shane to get the Gold Star again! I like this one though its very cool, especially neat how u take 2 warped planes and make a sort of thing out of them, with neat fog fx", "MickRoss, 2020-08-28i love this bro this is sick", "propagant, 2020-08-27Very nice!", "jt, 2020-08-27Looks great! And the square-tiling reminds me of https://www.numberphile.com/videos/squares-and-tilings", "PauloFalcao, 2020-08-25Cool", "timeparticle, 2020-08-21Lovely frags.", "My only complaint is that I believe you should rightfully change the word artsy to artistic in your comments. [Failing to do so would be considered a minor crime in some cooler coffee houses and craft breweries.]", "pjkarlik, 2020-08-21Oh hey you fixed it - looks nice on my work Mac!!!", "mireq, 2020-08-21Cool shader. Rendered:", "flockaroo, 2020-08-21beautiful!! i'd love to see this done with skyscrapers instead of abstract cubes", "altera0, 2020-08-21wow, just wonderful. amazing.", "markusm, 2020-08-21@Shane Runs fine on my Mac running Big Sur, which has a significantly improved WebGL2 layer and runs great with Shadertoy.", "BigWIngs, 2020-08-20Nice!", "jorge2017a1, 2020-08-20oooohh ... it's a great block city .... very good ... good job !!!!!", "............", "oooohh ... es una gran ciudad de bloques .... muy bueno ... buen trabajo !!!!!", "shau, 2020-08-20So cool!", "TRASHTRASH, 2020-08-20Thanks so much for the awesome designs and the comments! Learning a good amount thanks!", "dean_the_coder, 2020-08-20It's always a pleasure to read, and learn from, your code.  Thanks!", "(Oh - And the result looks good too, of course!)", "iq, 2020-08-20Beautiful!", "Duke, 2020-08-20Very cool!", "Shane, 2020-08-20@pjkarlik", "Thanks for doing that -- I'm sure you have better things to do.  The image would suggest a problem with the raymarching segment... maybe. And a Mac error would suggest an uninitialized variable somewhere, but I'm baffled at present. It's late in my part of the world, so I'll tidy the code up for a few minutes in the hope that it magically solves things, then take another look tomorrow.", "pjkarlik, 2020-08-20No, see image link - My PC however looks beautiful - so jealous of the glow effects!", "https://imgur.com/a/kTwwx6S", "Shane, 2020-08-20@pjkarlik", "Macs tend to be more accurate where errors are concerned, whereas Windows systems like mine try to fix errors instead of simply reporting them, which makes debugging virtually impossible. I'm usually pretty good with initializing variables and capping things above zero... Hmmm, I'll rearrange the glow logic... Has that helped, or does the problem lie elsewhere?", "pjkarlik, 2020-08-20my mac has lots of artifacts - doesnt look like the preview.", "UrbanClubProfessional, 2020-11-06Remixed: https://www.shadertoy.com/view/wdtfzM", "Lorek_440, 2020-09-15", "I must admit that the effects are great!", "Cubex, 2020-09-07Hello, nice shader!", "bloodnok, 2020-09-02I wish binary stars in Eliteangerous did this...", "Artonn, 2016-12-17We would very much like to come in connact with you, please write to rollabolla@outlook.com", "Duke, 2015-11-05Thanks", "iq, 2015-11-05Super cool!!!", "jakedowns, 2015-11-04jibbers crabst this is awesome!", "hybridshivam, 2022-08-11For some reason the performance decreases by a lot when viewing fullscreen.", "Really Awesome work nonetheless!", "hiPeeps124816, 2022-06-16synth wave", "Volbla, 2022-06-05This reminds me of the intro to 80s cartoon M.A.S.K.", "natefreeb, 2022-05-15pretty striking at first", "rmccampbell7, 2022-05-09Looks like to get the mouse to work requires changing `if(iMouse.w >= 0.0) { vec2 mouse = 0.25 * tau * (iMouse.xy-iMouse.zw)...` to `if(iMouse.z >= 0.0) { vec2 mouse = 0.25 * tau * (iMouse.xy-abs(iMouse.zw))` in Buffer A", "zhouyongqiang, 2022-04-29@marcthenarc Thank you for you suggest of learn shader. \ud83d\ude04", "marcthenarc, 2022-04-28@zhouyongqiang Inigo Quilez has many intros to shaders.  Go check his Youube video at https://www.youtube.com/watch?v=0ifChJ0nJfM and associated videos, tutorials you can find linked on his channel.  Consider also The Art of Code's YouTube channel at https://www.youtube.com/channel/UCcAlTqd9zID6aNX3TzwxJXg.  That should give you a great head start.", "zhouyongqiang, 2022-04-24Can anyone tell me how to read shader, I don't know what values and formulas mean what.", "Like those code in this shader:", "line 180:  vec3 a = ((s+1.)/2. - s*fpos)/normal*s;", "lz, 2022-04-24iMouse.w (click) should be replaced with iMouse.z (mouse down),", "and no need to subtract iMouse.xy in line 49.", "zhouyongqiang, 2022-04-23I can not rotate the scene by mouse.", "ttoinou, 2018-07-20Featured in this video  !", "JohanFlod, 2018-07-17nice!", "ttoinou, 2017-08-10Hi rez, could I use your shader for a shadertoy Best Of video ? Thanks", "cyanux, 2014-06-14Very fast on my HD6750, efficient code!", "avix, 2014-01-27since noone posted, I had to post the link to full demo...it deserves it", "avix, 2014-01-27Razor1911...", "http://www.youtube.com/watch?v=IFXIGHOElrE  at 2:13", "subpixel, 2013-07-30You mean like this?..", "spxl experiments | Road To Hell | FFT-controlled", "http://www.youtube.com/watch?v=MFkG1yE3oJQ", "srtuss, 2013-05-23classic!", "rez, 2013-03-19Hello Jean-Marie, email sent", "jmc, 2013-03-19Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "feiss, 2013-02-27f** crazy! congrats :O", "Virgill, 2013-02-26awesome!", "aki, 2013-02-26mesmerizing!", "poljere, 2013-02-26beautiful", "iq, 2013-02-25looks amazing!!", "kropka, 2020-02-04wow, its  amazing", "jt, 2020-01-17great", "Jadwigga166, 2020-01-09Very interesting, well-made movie.", "ollj, 2018-10-30a very general term here is skewiness", "and a simplex-skew-constant example gets you to simplex traversal, which may aswell be filled with triangular bezier patches (where the borders fit (and have identical derivatives, to not have a sharp corner)) i think the later part involves some quaternions for the corners.", "fizzer, 2018-10-29Good to know! I really have a feeling that the logic can be simplified, and I have an even stronger feeling that the diagonal 'plane' can be handled in a more elegant way - by offsetting a pre-computed intersection as is already done for the axial planes. It's worth a try...", "iq, 2018-10-28Nice! And very inspiring, this is giving me lots of ideas.", "ollj, 2018-10-25tracing a triangular patch of 6 height CVs that define 3 vertical quadratic bezier splines as borders is still analyticTracing, fast and pretty good in precision (in 1 iteration):", "", "this could include  barycentric coordinates and", "skew transformations, ideally  by sqrt(3)*.5 to be an equilateral triangle/simplex.", "but any [quadratic field] skew is possibly useful.", "fizzer, 2018-10-24Thanks Shane. It looks like raymarching still wins out overall, but at least with this approach there's no restriction on slope and it is quite accurate. As it happens I was looking through your shaders to see if this had been done before.", "Shane, 2018-10-24Awesome -- That's pretty clever. I really like the overall aesthetics too. Whenever I'm putting something along these lines together, I often wonder whether it could be achieved with just one height sample per triangle.", "jarble, 2020-12-11This shader runs slowly on my PC, but it gets faster if I add precis *= 1.01; after t += h;", "davidboostman, 2020-11-17Guil, I'm desperately trying to contact you. Can you provide a way to contact you about the usage of one of your shaders?", "positivepig, 2020-05-14wow", "Nicolas2, 2019-10-24This is crazy my man", "Zi7ar21, 2019-10-14Now, anti-aliasing and anisotropic filtering!", "ricklivewoods, 2019-09-30amazing love it", "jt, 2019-09-15beautiful", "FabriceNeyret2, 2017-04-10no longer compiling in WebGL2.0: globals init must now be const (or do it in main)", "CaliCoastReplay, 2016-07-28So performant...that fps is enviable!", "iapafoto, 2015-03-22super", "Dave_Hoskins, 2015-03-21Play around with that Jordan Turbulence is a lot of fun, especially if you scale down p to start with and increase the gains.", "poljere, 2015-03-21Beautiful!", "aiekick, 2015-03-21wow", "Dave_Hoskins, 2014-01-10Just fixed an eye colour bug. After all this time! I guess it was useful installing Ubuntu on my Windows machine, and really easy as well.", "Dave_Hoskins, 2013-06-03Thanks! I think it's finished enough now!", "Aah, the classic computer game under water wobble. I was never convinced that actually happens under water, but everybody does the effect anyway.", "fizzer, 2013-05-26I love the details! Lots of nice things to keep it interesting. =D", "huttarl, 2013-05-21Nice effects, and thanks for commenting the code informatively!", "tsone, 2013-05-15Amazing!", "raizor, 2013-05-10Damn, that would make a sweet 4k intro. Love it!", "JoshP, 2013-05-10pure insanity...wow", "Dave_Hoskins, 2013-05-06Hey, thanks for your comments. The more I play with these shaders the less 'real' work I'm getting done. Damn you Shadertoy!! ;)", "CPU, 2013-05-05Excellent! Love the bubbles!", "iq, 2013-05-05this is serious stuff man. pretty awesome, and lots of attention to detail. just WOW", "srtuss, 2013-05-05Very impressive!", "jt, 2021-09-13cool!", "ttoinou, 2018-08-18Cool ! might be useful to study Quasiconformal functions", "mattz, 2017-12-29Thanks -- it's a really useful feature to be able to embed doodles like this on web pages.", "iq, 2017-12-28I just saw your blog post on text perspective undistortion. Very nice!", "mattz, 2016-10-10I don't think that 4x4 matrices would do anything extra here since we are projecting down to 2D. However, you can use 4x4 projection matrix to warp unit cube -> arbitrary frustum. See https://en.wikipedia.org/wiki/Viewing_frustum and our very own iq's http://iquilezles.org/www/articles/frustum/frustum.htm.", "Good, 2016-10-10@ollj, with 2x2 matrix you can transform 2d space only in 2d manner, in 3 ways: scale (reflect), shear and rotate (rotation by the way is a combination of shear and scale).", "Using higher dimension matrix on 2d space gives a bit more options:", "with 3x2 matrix in addition to previous you also can translate", "3x3 matrix adds possibility to make a perspective distortion", "", "What you see here is a 2d pojection of 3d transformation", "", "4x4 matrices usually used for 3d space transformations.", "", "I'm personally can't imagine how 4d transformation will look after projection on 2d space, I'd love to see it too, but something tells me that it not going to add any other types of deformation", "ollj, 2016-10-08this could be simpler with 4d marixes?", "playersteve19, 2022-12-22and now it's just going at a crazy rate, then freezing, then continuing. Intended behavior?", "playersteve19, 2022-12-22it froze for me after 38.5 seconds. Image on screen looks almost like three mandelbrot sets kissing", "blurryroots, 2022-11-22Great timings. Love the fading. Interessting how the shapes tend to blend and swing between a 'mechanical' and 'organic' look. Assume the shape selections would work really well with sampling some music.", "Riccardo_Baston, 2022-09-21Ottimo lavoro", "tarnith, 2022-08-31The ones at the beginning that produce nice geometric patterns have the strange scales like 2.7913!?", "Euler perhaps?", "reinder, 2016-02-23Nice!", "eiffie, 2016-02-01The ones at the beginning that produce nice geometric patterns have the strange scales like 2.7913!?", "iq, 2022-02-23Ah, thanks! Fixed", "stegu, 2022-02-23I took it from http://iquilezles.org/www/articles/boxfunctions/boxfunctions.htm, the link given in the code here. Third section on the page, \"Box Intersection\".", "iq, 2022-02-23hm, I can't find that line of code anywhere. Where did you copy it from?", "stegu, 2022-02-23There is a typo in the \"boxIntersection\" as well:", "oN = -sign(rdd)*step(t1.yzx,t1.xyz)*step(t1.zxy,t1.xyz);", "The \"rdd\" should be \"rd\".", "Thanks for your excellent coding resources!", "iq, 2021-07-08Fixed!", "oneshade, 2021-07-08Nice and simple! Btw, the one in your intersectors page has some typos that are not allowing it to compile (e.g. \"vec3 in\" should be \"in vec3\" and \"tN > tF || tF&lr;0.0\" should be \"tN > tF || tF < 0.0\").", "nabr, 2020-01-10nice", "torokati44, 2019-12-05@colin299: We also ran into this. See the issue exaggerated here (the occasional horizontal and vertical black bars in the middle):", "https://www.shadertoy.com/view/WtcGRH", "And the \"solution\" of clipping m to a really large, but finite range:", "https://www.shadertoy.com/view/3l33RH", "Works fine for me...", "colin299, 2019-11-16//https://www.iquilezles.org/www/articles/intersectors/intersectors.htm", "// axis aligned box centered at the origin, with size boxSize", "vec2 boxIntersection( vec3 in ro, vec3 in rd, vec3 boxSize, out vec3 outNormal )", "{", "vec3 m = 1.0/rd; // can precompute if traversing a set of aligned boxes", "vec3 n = m*ro;   // can precompute if traversing a set of aligned boxes", "vec3 k = abs(m)*boxSize;", "vec3 t1 = -n - k;", "vec3 t2 = -n + k;", "float tN = max( max( t1.x, t1.y ), t1.z );", "float tF = min( min( t2.x, t2.y ), t2.z );", "if( tN>tF || tF&lr;0.0) return vec2(-1.0); // no intersection", "outNormal = -sign(rdd)*step(t1.yzx,t1.xyz)*step(t1.zxy,t1.xyz);", "return vec2( tN, tF );", "}", "", "this function works perfectly most of the time,", "but what should I do when input rd.x == 0?", "it makes m.x = +inf, which makes ro.x & boxSize.x become useless in later calculation.", "iq, 2017-01-11What do you mean by \"nice\". You can use the standard math: vec2 sphIntersect( in vec3 ro, in vec3 rd, in vec4 sph )", "{", "vec3 oc = ro - sph.xyz;", "float b = dot( oc, rd );", "float c = dot( oc, oc ) - sph.w*sph.w;", "float h = b*b - c;", "if( h<0.0 ) return vec2(-1.0);", "h = sqrt( h );", "return -b + vec2(-h,h);", "}", "demofox, 2015-07-26Hey iq, have you seen any nice ray vs sphere tests that return min and max hit times?", "iq, 2014-03-05Not surprising, it's the same maths, ergo the same code emerges!", "hornet, 2014-03-04Excellent! Looks very similar to the src posted by Simon Green here (slide14): ftp://77.67.22.188/developer/presentations/2005/GDC/Sponsored_Day/GDC_2005_VolumeRenderingForGames.pdf", "Mattias, 2020-07-29I have a newer version here: https://github.com/mattiasgustavsson/crtview as astand-alone opengl implementation. it uses some extra buffers for more efficient blur and to have a slight ghost trail on moving things.", "greggman, 2020-07-29Thanks! I used it here", "jackdavenport, 2015-07-19This is awesome. It would be so cool if you added the old buzzing sound the moniters made.", "Dave_Hoskins, 2013-12-10It works perfectly with the Lustre-Creme advert. Thanks for sharing, this is great.", "ewerybody, 2013-12-10whoow the subtle moiree is also nice!", "otacocato, 2013-12-10This looks really authentic. I remember sitting in front of my old CRT with my nose 30 cm from the screen playing wipeout 2097, seeing the exact same pattern...", "izutionix, 2023-03-16(oops, ignore that last link)", "izutionix, 2023-03-16I tried making the colors more nebula-like", "(line 194)", "vec3 lightColor=0.4+0.55*cos(lDist*2.3+2.6 + pi * 0.5*vec3(-0.5,0.15,0.5));", "fork: https://www.shadertoy.com/view/cdK3Wy", "", "fork: https://www.shadertoy.com/view/wtscDH", "pizzahollandaise, 2022-10-28Great", "jt, 2022-09-25WOW!", "lz, 2022-04-20Wow. Looks awesome.", "Duke, 2020-07-26Mostly when the ray is too far from the camera.", "terraquoia, 2020-07-26So early loop exit means when map() starts producing values that have insignificant impact on visuals in order to speed up the process ?", "terraquoia, 2020-07-26From what i can see and understand, the map() function will generate output for volume of any size, so yes a limitations need to be set. Interestingly, one can simply multiply pos variable to cram more features into existing volume, but at one point the repeatable structure becomes obvoius - a distored disk shape can be seen (generated by the Disk() routine in map). It is clear that math is a tool for art, it is up to us to tweak it into something beatiful.", "Duke, 2020-07-26@terraquoia:This is not really a bug. This method is used for early exit from the raymarching cycle when the ray has not yet reached the end of the bounding figure. Although it is really better to start counting this distance from the beginning of the bounding shape.", "terraquoia, 2020-07-26I think i have found it :", "change line 181 :", "", "if(td>0.9 || d<0.1*t || t>10. || sum.a > 0.99 || t>max_dist) break;", "", "to", "", "if(td>0.9 || sum.a > 0.99 || t>max_dist) break;", "", "Removing", "", "d<0.1*t || t>10.", "", "from the condition lifts the ray origin distance limit.", "", "I'm not sure this is also a bug (still allows code to compile/run),  is a redefinition of float variable d from map() function on line 184, even it is already defined at line 161. Removing it does not seem to produce any adverse effects on visuals.", "terraquoia, 2020-07-26Duke, i think i found a small bug at line 153.", "Change z coordinate base constant from -6 to some larger number, for example -16 and render completely disappears.", "changed line:", "vec3 ro = vec3(0., 0., -16.+key*1.6);", "Interestingly, it will not cut out at distance but rather fade out slowly as distance increases.", "Is there a way to fix this ?", "Lumos, 2020-06-16Nice  could i use your shader when VJing?", "Duke, 2017-10-13ollj:Thanks for the feedback Well, for this version of shape there is no need for additional noise at all  You can change fbm(p*90.) on string 87 just to 0.7 and it will look pretty similar. Same goes to dithering. But both of them needed for more volumetric thick shapes and more advanced rendering technique. For example in this  version of shader they improve volume shape and visual view a lot.", "ollj, 2017-10-12would you add noise to a mandelbulb? because that is pretty much whats happening here.", "ollj, 2017-10-12for this \"shaope\" you do not benefit from a buffered noise texture, because a simple hash is good enoug with 2 fbm octaves, due to all the twiss in the shapes.", "", "float noise( in vec3 x ){", "vec3 p = floor(x);", "vec3 f = fract(x);", "f = f*f*(3.0-2.0*f);", "vec2 uv = (p.xy+vec2(37.0,17.0)*p.z) + f.xy;", "//this hash is just too bad", "vec2 rg =vec2(0);", "rg+ vec2(sin(uv.x*7777./uv.y),cos(uv.y*333.));", "/* textureLod( iChannel0, (uv+ 0.5)/256.0, 0.0 ).yx;*/", "rg+=.1;", "return 1. - 0.82*mix( rg.x, rg.y, f.z );}", "is almost good enough", "for  dithering, here noise is worse than bayer-matrix dithering, or no dithering at all.", "for this pseudo-fractal shape. dithering performance loss is barely worth its dithering.", "iq, 2017-05-30Nice!", "Artonn, 2016-12-17We would very much like to come in connact with you, please write to rollabolla@outlook.com", "Duke, 2016-06-25@cyrilp: Try to reduce iteration count on line 67 to 6 and on line 174 to 48.", "cyrilp, 2016-06-25This works great, but i'm still not getting better than 4fps. Another tricks like this one i can try ?", "Thanks for your quick reply !", "Duke, 2016-06-25@cyrilp: Try to comment line 86.", "cyrilp, 2016-06-25It's amazing !", "I'm trying to run it on an android phone but it's far to slow.", "What can we change to make it quicker at the expense of some quality loss ?", "KylBlz, 2016-06-20Man it just keeps getting better!!", "dila, 2016-06-14really pretty", "kuvkar, 2016-06-14awesome!", "Duke, 2016-06-14Thanks", "to flockaroo: I'll think about the way to fix this artifact.", "PauloFalcao, 2016-06-14Very cool", "Shane, 2016-06-14Fantastic. Really nice.", "aiekick, 2016-06-14wow very nice", "antonOTI, 2016-06-14whoops rectification it work fine (chrome was doing some weird things)", "looks really cool", "antonOTI, 2016-06-14crash on my computer", "Windows7, Chrome , with a GTX 770", "flockaroo, 2016-06-14wow, beautiful! from some angles there seem to be some grid structures shimmering through, which is not quite as befits a supernova of the world ;)", "jt, 2023-04-24Amazing!!!", "hk_shao, 2018-08-28coool!", "reinder, 2018-08-28I made a shader that renders this same scene using a simple path tracer. You can compare the result here.", "frankwer, 2018-08-26The time is correct, god dammit", "jackdavenport, 2018-08-20Awesome shader!", "", "I added some subtle refraction to the glass of the watch which I thought would look kinda nice with the rest of the scene.", "", "// Inside the render() function on line 92", "// Glass.", "float glass = castRayGlass( ro, rd );", "if (glass > 0. && (glass < res.x || res.x < 0.)) {", "vec3 N = calcNormalGlass(ro+rd*glass);", "vec3 pos = ro + rd * glass;", "", "vec3 V = normalize(ro - pos);", "vec3 R = reflect(-V, N);", "float NdotV = max(0.0, dot(N, V));", "", "float roughness = texture(iChannel2, pos.xz*.5 + .5).g;", "", "vec3 F = FresnelSchlickRoughness(NdotV, vec3(.15), roughness);", "vec3 prefilteredColor = getSpecularLightColor(R, roughness);", "vec2 envBRDF = texture(iChannel3, vec2(NdotV, roughness)).rg;", "vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);", "", "vec3 RF  = normalize(refract(-V, N, 1./1.52));", "res = castRay(pos, RF);", "if(res.x > 0.) {", "pos = pos + RF * res.x;", "vec3 albedo;", "float metallic, ao;", "getMaterialProperties(pos, res.y, N, albedo, ao, roughness, metallic, iChannel1, iChannel2, iChannel3);", "", "col = lighting(ro, pos, N, albedo, ao, roughness, metallic);", "col *= max(0.0, min(1.1, 10./dot(pos,pos)) - .1);", "}", "", "col *= (1.0 - (F * envBRDF.x + envBRDF.y) ) + specular;", "} else if (res.x > 0.) {", "vec3 pos = ro + rd * res.x;", "vec3 N, albedo;", "float roughness, metallic, ao;", "", "getMaterialProperties(pos, res.y, N, albedo, ao, roughness, metallic, iChannel1, iChannel2, iChannel3);", "", "col = lighting(ro, pos, N, albedo, ao, roughness, metallic);", "col *= max(0.0, min(1.1, 10./dot(pos,pos)) - .1);", "}", "chenwanwan13, 2018-08-15Awesome!!!", "catafest, 2018-08-11Good work . Thank's for share: http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf", "therealbnut, 2018-08-11Nice! I was inspired to make a ticking sound, feel free to use it if you want:", "", "float tick( float time )", "{", "return pow(max(sin(6.2831 * (time + 0.25)) - 0.9999, 0.0), 1.0 / 16.0);", "}", "", "vec2 mainSound( float time )", "{", "float volume = 0.0625;", "float freq0 = sin(6.2831* 7896.0*time) * 0.25 * tick(time - 0.008);", "float freq1 = sin(6.2831* 7743.0*time) * 1.00 * tick(time + 0.000);;", "float freq2 = sin(6.2831* 8125.0*time) * 0.70 * tick(time + 0.008);;", "", "return vec2(volume * (freq0 + freq1 + freq2) );", "}", "Harha, 2018-08-10I love the surface imperfections! <3", "dcoombes, 2018-08-08Amazing!", "iapafoto, 2018-08-07sublime !", "reinder, 2018-05-25Thanks! @iq: thanks for your comments. I have reduced the contrast of the wood (a bit).", "flockaroo, 2018-05-07very well done!!", "KylBlz, 2018-05-07Thank you for this great shader, will study in depth. I appended the following to Image line 122 (It's ugly yeah, but seeing the environment helps)", "else col = pow(texture(iChannel0, rd).rgb, vec3(3.)) * clamp(rd.y + .2, 0., 1.);", "Xor, 2018-05-03Whoops. It's something wrong with the wood texture. I guess I for got to try switching it, but if I switch it to a rock, it works.", "Xor, 2018-05-03Yup. I don't know what it is. iChannel2 in Buf A doesn't seem to be loading right, but I've had a problem with that organic texture before and I'm pretty that doesn't have anything to do with it. I've swapped out the textures to no avail.", "Dave_Hoskins, 2018-05-03@Xor does channel 1 have to wood texture in it?", "Xor, 2018-05-03Something is not right on my PC: https://imgur.com/a/WiGf3U3.", "iq, 2018-05-03I miss the shadows of the minute and hour hands. And the wood texture I'd reduce its contrast like \"albedo = 0.8*pow(albedo,vec3(0.45,0.5,0.5));\" in Image pass, line 57, although that one is totally subjective.", "", "But other than that, it's pretty much perfect.", "rigel, 2018-05-02It is so amazing to see this level of image quality run at these speeds.", "BigWIngs, 2018-05-01Very good!", "dr2, 2018-05-01Approaching photorealism!", "reinder, 2018-05-01@P_Malin, thanks! I have changed the blending of the glass material. I also added your suggestion of using AO based on the reflection vector for the specular component. You can enable this by defining P_MALIN_AO (line 32).", "I keep the original AO code as default, because that is how you would use IBL normally and it is in line with the article.", "Shane, 2018-05-01 Beautifully rendered.", "P_Malin, 2018-05-01Oh, also remove ao from the specular component if using specular occlusion as mentioned below. In the glass condition you may also want to fade the existing color based on something related to the fresnel term. i.e. we lerp between transmitted light (the original color) and reflected light based on fresnel. e.g. at a glancing angle, all the light is reflected so the fresnel term is 1.0, the transmitted light should be 0. something like line 138:                 colT = colT * (1.0 -  (F * envBRDF.x + envBRDF.y) ) + specular;", "I think the real maths is more complex but this is close.", "Sorry, just having fun as this is a nice shader to play with", "MacSlow, 2018-04-30Great execution, reinder!", "P_Malin, 2018-04-30Great idea. I didn't realize cubemaps were mipmapped now. Amazed how well these SDR cubemaps work for this.", "You can add a hacky specular occlusion term with something like prefilteredColor *= calcAO( pos, R );", "It grounds the reflections a bit more (but of course it is slower).", "P_Malin, 2018-04-30Superb!", "dila, 2018-04-30amazingly fast. also accurate time!", "Dave_Hoskins, 2018-04-30Fantastic dial work, and that pencil looks amazing!", "reinder, 2018-04-30@iq, sure!", "iq, 2018-04-30Super very cool! Can I give notes? I have ideas!", "heliumsoft, 2017-10-13Very nice effect.", "Can i use your code in commercial project?", "mjolnir, 2015-10-04Since deleted, as I realize you can get the same thing just by varying the power on the \"faster\" version. It was essentially this:", "x = rand*2.0-1.0", "p = some arbitrary positive power", "pow(log(abs(x))*(e-1.0)+1.0),p)*sign(x)", "...the only major difference is that higher powers will somewhat invert the distribution.", "mjolnir, 2015-10-04I've made my own foray into noise, using your work: https://www.shadertoy.com/view/Ml2XDD (I have no idea what I've done or if it's useful). Includes the 'faster triangle noise' from here: https://www.shadertoy.com/view/4t2SDh", "CeeJayDK, 2014-08-26BTW the + 0.5 part controls the mean.", "", "float mean = 0.5;", "float gauss_noise1 = variance * r*cos(theta) + mean;", "", "It could be mapped to (iMouse.x / iResolution.x) if you want to play around with it.", "", "And it's Box-Muller not Box-M\u00c3\u00bcller.", "CeeJayDK, 2014-08-25Made my own gaussian noise function that's slightly faster, uses Box-M\u00c3\u00bcller and lets you play with the variance using the mouse:", "", "float n5rand( vec2 n )", "{", "#define PI acos(-1.0)", "", "//time counter", "float t = fract( iGlobalTime );", "", "//PRNG 2D - create two uniform noise values and save one DP2ADD", "float seed = dot(n.xy, vec2(12.9898, 78.233)) + (t);", "float sine = sin(seed);", "float cosine = cos(seed);", "float uniform_noise1 = fract(sine * 43758.5453 + t); //I just salt with t because I can", "float uniform_noise2 = fract(cosine * 43758.5453 - t); // and it doesn't cost any extra ASM", "", "", "//Box-M\u00c3\u00bcller transform", "uniform_noise1 = (uniform_noise1 < 0.0001) ? 0.0001 : uniform_noise1; //fix log(0)", "", "float r = sqrt(-log(uniform_noise1));", "float theta = 2.0 * PI * uniform_noise2;", "", "float variance = (1.0 - sqrt(iMouse.y / iResolution.y));//or just a constant. self_shadow used 0.23", "", "float gauss_noise1 = variance * r*cos(theta) + 0.5;", "float gauss_noise2 = variance * r*sin(theta) + 0.5; //we can get two gaussians out of it", "", "return gauss_noise1; //or gauss_noise2 or (gauss_noise1+gauss_noise2)*0.5", "}", "cyanux, 2014-07-14Fisher isn't Fischer", "cyanux, 2014-07-14Fischer demo : https://www.shadertoy.com/view/ldsXRf", "cyanux, 2014-07-14Line 53 : return pow((nrnd0+nrnd1+nrnd2+nrnd3) / 4.0, 2.0);", "", "Something like Fisher distribution.", "Trisomie21, 2014-07-12Mouse Y give you a curve distribution of ^1 to ^8", "", "float n4rand( vec2 n )", "{", "float t = fract( iGlobalTime );", "float nrnd0 = nrand( n + 0.07*t );", "", "float p = 1. / (1. + iMouse.y * 8. / iResolution.y);", "nrnd0 -= .5;", "nrnd0 *= 2.;", "if(nrnd0<0.) nrnd0 = pow(1.+nrnd0, p)*.5;", "else nrnd0 = 1.-pow(nrnd0, p)*.5;", "return nrnd0;", "}", "iq, 2014-07-11Nice, thanks! (and for people's reference Central Limit Theorem)", "FabriceNeyret2, 2022-01-10voxelTrace():", "I don't know if this from is more intuitive:", "side = ( step(0.,rd) - fract(ro) ) / rd;", "", "NB: can map() be really negative at the first step ?", "", "not that doing", "side += mask / abs(rd);", "p += mask * sign(rd);", "would be exactly the same cost ( optimiser detect what can be factor upstream loops )", "FabriceNeyret2, 2022-01-10rot2:   just use #define rot2(a)  mat2( cos(a + 1.570796*vec4(0,-1,1,0) ))", "-23 chars", "jorge2017a1, 2020-03-29This shader is great, very beautiful, elegant ... and interesting .... thanks for sharing, .... I hope to make a shader like yours ... someday ....", ".........", "este shader es es genial, muy bello, elegante...e interesante....gracias por compartir,....espero hacer un shader como el tuyo...algun dia....", "jt, 2018-01-16cool!", "dila, 2016-06-15missed this. i love the steps, very sweet", "warlock, 2016-05-31Shane rocks!", "GregRostami, 2016-05-27Shane, Shane, SHANE the tunnel master!!", "Dave_Hoskins, 2016-05-27@shane", "What corridor isn't a glorified cylinder?", "TambakoJaguar, 2016-05-27Looks very pretty and fast! Congrats!", "vgs, 2016-05-27This shader looks impressive and it runs smoothly! Nice job!", "Shane, 2016-05-27Thanks for the comments. With a little more effort, I might actually catch up to the kinds of corridor scenes the demo coders were creating in the 90s.", "", "@Dave_Hoskins", "I called it a corridor in the hopes that no one would notice that it's just a glorified cylinder.", "Shane, 2016-05-27@kylBlz", "I know some of the hard core coders on here don't require an explanation, but the comments are there for anyone who wants them. On a side note, I have a half finished water refraction example that I completely forgot about.", "", "@akohdr", "There are things GPUs like, and others they struggle with. I'm sure everyone's had experience with that; Grouping operations in vectors, avoiding nesting, etc. However, I find plain old logic goes a long way. For instance, functions at the end of the line that get called the most need the most attention. In many circumstances, that means the distance function, which in turn means trying to provide one that's easy calculate and to hone in on.", "", "Layering in order of aesthetic importance helps also. As an example, a lot of people will raymarch several layers of noise. However, raymarching the lower frequency, larger amplitudes and bump mapping the finer details can give a similar aesthetic, but at double the framerate. Replacing the larger amplitudes with sinusoidals can be even faster.", "", "In regards to the actual voxel traversal algorithm, you'll see that the \"map\" function isn't being converted to the voxelized form, nor is there any boolean logic, so that saves some calls... I think. Little things like that help. Going off on a slight tangent, I've often wondered whether some kind of hybrid sphere-tracing\\voxel-traversal could improve things by increasing step distance... but others haven't tried, so perhaps I'm overlooking something.", "zackpudil, 2016-05-27Looks amazing <3", "KylBlz, 2016-05-27looks fantastic and im loving the comments in the code", "tomkh, 2016-05-26Yep, you rule", "iq, 2016-05-26wow, it looks really good", "akohdr, 2016-05-26Awesome.  You're frame rates are always so smooth.  Aside from stateless / branchless are there any other overarching principles to keep things humming along?  Can anyone recommend any GPU profiling tools?", "Dave_Hoskins, 2016-05-26Another fine edition to the Corridors of Shane!", "stb, 2016-05-26Looks good, and runs smooth @ 1080p.", "Now with penumbra shadows & 2-bounce GI, pls ;)", "Duke, 2016-05-26", "jolle, 2016-05-26nice, runs like butter", "aiekick, 2016-05-26wow very nice. i love it", "LaBodilsen, 2016-05-26looks amazing.", "vic168, 2018-01-04Thank you, especially, for your detailed comment. I've learnt a lot from it!", "youhao, 2017-08-13Thankyou shared", "jt, 2015-12-14very nice!", "smilingrob, 2015-09-17\"My laptop GPU seems to hate everything, including multiple loops. If it were a person, we wouldn't hang out.\"  Ha ha ha, nice!", "Shane, 2015-08-20@nimitz", "", "I'll assume you mean 3D 8-tap, which I tried. It was OK, but I had an abundance of cycles, so decided to treat myself.", "", "... Unless you happen to mean a 3D 4-tap version. I wrote one of those, although Voronoiesque would be a more apt description. I'd imagine I'm not the first person to come up with the idea (minimum falloff on a 3D simplex grid), but I included a second-order distance in mine, which I haven't come across elsewhere. It probably needs fine-tuning, and the pattern quality doesn't adhere to strict standards, but it's robust, and looks better than you'd think. In fact, I like it more than the squarish 8-Tap version.", "nimitz, 2015-08-20hmmm, I'd be curious to see how this would look with more layers and different blending algos, I bet this could make some interesting looking \"fire\" (could use 4-tap voronoi to speed things up if you have many layers, and probably would look just as good).", "aiekick, 2015-08-19", "poljere, 2015-08-18", "iq, 2015-08-18pretty colors", "Lanlost, 2018-11-08Welp dude, this was cool but your other one here pretty much destroyed me. Not sure anything can surpass this:", "https://www.shadertoy.com/view/MsGGD1", "", "I mean, if that's not the top thing on here then I should probably leave, right?", "", "In all seriousness, why the heck does it murder my browser when looking at a user's other creations? Please tell me those are just thumbnails and it's not trying to render them. Why?", "Lanlost, 2018-11-08So... I had no idea that shaders could literally be used to build geometry. I made a primitive Wolf3d type engine that barely worked, and was slow, in QBasic when I was a teen so, yeah I'm way out of date. I knew \"geometry shader\" but I guess I'm too dumb to realize it literally meant that. I went to this site though, clicked this one by random, and am now blown away, ESPECIALLY after iapfoto's little modification. You can do .. anything. Here's my dah-what-am-I-doing bastardization of his mindblower.", "", "Considering I made this modification without thinking about it and in one go and it turned out like this I'm pretty happy.", "", "Replace 36 and 37 with:", "", "d = PrRoundCylDf (q.xzy+vec3(0,0,.3*cos(3.14*a+5.*(iTime+q.x+q.y*q.z))), 0.2, 0.02, 1.8);", "DMINQ (0);", "", "Mmm, Ruffles has ridges.", "GregRostami, 2018-10-04Love the shading on the cylinders!!", "dr2, 2018-02-28There is now an animated version;, but rather than moving the cylinders along their axes, the entire set moves around the the mobius strip. Perhaps I'll add some spiders one day.", "iapafoto, 2018-02-28Animated variant line 36", "d = PrRoundCylDf (q.xzy+vec3(0,0,.3*cos(3.14*a+5.*iTime)), 0.2, 0.02, 1.8);", "iapafoto, 2018-02-28very cool shape", "Picka, 2020-05-13The best thing I've ever seen", "oldXU, 2020-05-08Fantastic!", "But I wonder what means of such operations? What technology should I learn to make so beautiful shaders?", "spalmer, 2020-04-30Yes, site is really slow today", "spalmer, 2020-04-30I found that user disappearing strange also.  I don't think he was annoying enough to warrant account deletion, so idk.  I only saw him post about Natron on a few toys, maybe he was a schill for Natron?  We may never know the truth now.", "FabriceNeyret2, 2020-04-30same thing here:", "without your message that I received via email, I would have continued since I still see \"We are sorry, we couldn't submit your comment\" in my opened shadertoy window.", "ttg, 2020-04-30Indeed, page just told me \"We are sorry, we couldn't submit your comment\" but posted it anyway.  Shadertoy.com has been having some unresponsiveness trouble lately.", "ttg, 2020-04-30Or maybe got discouraged and deleted account from feeling there was nothing else to ask (hopefully not).", "", "@FabriceNeyret2 you posted nearly same message four times, and for two of them I got email.  Something strange happening?", "FabriceNeyret2, 2020-04-30strange: new user jhonphilipps no longer exist. Maybe he was signaled for making quite the same comment in many shaders ?", "FabriceNeyret2, 2020-04-30strange: new user jhonphilipps no longer exist. Maybe he was signaled for making quite the same comment in many shaders ?", "FabriceNeyret2, 2020-04-30strange: new user jhonphilipps no longer exist. Maybe he was signaled for making quite the same comment in many shaders ?", "FabriceNeyret2, 2020-04-30strange: new user jhonphilipps no longer exist.", "spalmer, 2020-04-29I see Natron has a Shadertoy plugin, wonder if that would help?", "spalmer, 2020-04-29Natron's interesting.  The cubemap is just some fake reflections, and could easily be replaced by any simple environment function.  Can just zero it out to see what it looks like without env reflection map.  Anyway porting shaders to new platforms usually requires at least some minor re-plumbing work hooking things up.", "ttg, 2020-04-29iChannel0 is a Cube sampler, it requires vec3 argument.  You can't use a non-cube 2D sampler in its place without changing the code.", "Pierco, 2020-04-16@splamer that's great!! Thank you so much!! Now I need to understand this sorcery!", "spalmer, 2020-04-16went ahead and messed with it even though I'm low on caffeine;  I may yet try some other stuff, but for now I at least changed raymarching to a plane raycast and redid the refraction.  https://shadertoy.com/view/wdBczc#  Shaved off 350 characters and I bet it's faster too, though this shader isn't slow.", "spalmer, 2020-04-16I may give it a whirl tomorrow.", "Pierco, 2020-04-16@spalmer, yes I agree. If you have time, are you able to provide a \"fork\"? I would love to learn how to do that  Thank you!", "spalmer, 2020-04-16Now that you mention it, the ray marching itself seems a total waste, since you can't see any real parallax on the waves, they're not very tall.  100 iterations is way overkill on the marching here.  Seems you're mainly interested in the normal, and there are cheaper ways to compute or combine normal maps.  This may as well be scrolling texture bump maps on a plane with some distortion, would run way faster and look identical.  It still comes off looking pretty good though.", "hajiren, 2020-04-16@Pierco, got it! Thanks for your reply", "Pierco, 2020-04-16@Hajiren, it's very basic, just a raymarching algorithm and nothing more. Things I've learned from Inigo on https://www.iquilezles.org", "hajiren, 2020-04-16Amazing! Could I ask what's the mathematical knowledge behind this shader?", "aiekick, 2020-03-31wow", "kanareczek, 2020-03-23Great, so natural and calm", "ttg, 2020-03-18For anyone wondering what myself and @spalmer were talking about, just set iChannel2 back to \"Abstract 1\".", "spalmer, 2020-03-18@ttg I can appreciate limitations, since I can get past them, but often such things aren't the main point and just get in the way, take time to write.  Sinewaves would be fine for this.  Modeling trochoids or catenary are fun too.  Thanks for the update, @Pierco!", "Pierco, 2020-03-18I should add a bloom effect...", "Pierco, 2020-03-18Updated as per your comments. Thanks!", "ttg, 2020-03-18@spalmer Well, I appreciate the limitation of the texture selection since it puts more emphasis on shaders themselves to get the desired effects.  Static procedural texture in a buffer is always an option (and it fits with 4kb/small demo spirit where the source code of such a texture may very well be much smaller than a compressed image with its decompression code).", "spalmer, 2020-03-18@ttg that one works much better, thanks.  I'm surprised there's not a better selection of soft noise textures, cloudy plasmas.", "ttg, 2020-03-18@spalmer No, you're not the only one.  It's a clever texture to use since it does have curved edges, but it becomes too noticeable that the waves are not spreading circularly whenever a closed loop shows up.  \"Abstract 3\" seems to work well (but probably best as new channel for water function so \"Abstract 1\" can still be used for a colorful riverbed.", "spalmer, 2020-03-18Am I the only one who finds round pebble-shaped ripples floating downstream disturbing?  Surely there's a better texture.", "raabix, 2020-03-18Try using the Pebbles texture, this creates a really smooth and relaxed flow", "dev, 2019-04-08Note: For anyone curious, the issue was that I wasn't properly repeat wrapping the texture!", "dev, 2019-04-08Amazing shader! I tried to implement it in Three.js and for some reason the shader flattens out and stops generating waves after a few seconds. Is this a familiar problem to you? (I'm just starting to learn how shaders work  )", "jt, 2017-10-09nice!", "kleonz, 2017-01-27Hi friends", "", "I have a dude!!!", "", "How can i apply this in unity 3d?", "", "Congrats for the job are pretty beuty and really sorry about my english ... i m brazilian :P", "Pierco, 2014-03-06Thanks a lot Fabrice, in fact, I was just looking for a way to generate waves without using a complex noise algorithm. But your explanation is very helpful. \u00c3\u20ac+", "FabriceNeyret2, 2014-03-06what kind of improvements would you like ?", "", "possibly, if you want to distinguish capillary waves (the small ripples) and gravity waves (waves > 1.5 cm),", "- gravity waves are trochoids (peaky on top, round on bottom) while capillary are inversed trochoids (round on top, peaky on bottom)", "- capillary waves are triggered by the larger fluids motion, and often come in clusters of 3 to 7 parallel waves.", "- 1.54cm waves are the slowest. larger (gravity) waves go faster when length increase, so do (capillary) waves when length decrease.", "demofox, 2014-02-27No, but the waves look pretty good to me already!!", "photonic, 2022-03-02I really like the Reinhard, thank you very much for sharing!!", "dila, 2016-11-13This is interesting, thanks", "XT95, 2016-02-14Very useful, thx Zavie !", "Zavie, 2013-08-26Thanks! Note Naty's comment here though: http://imdoingitwrong.wordpress.com/2010/08/19/why-reinhard-desaturates-my-blacks-3/#comment-3", "Dave_Hoskins, 2013-08-25A useful collection, neatly displayed. Thank-you for the info. I really like the 'white preserving luma operator.'", "novem, 2022-07-18Is there anyway to calculate the mipmap manually for a unity shader graph?", "Dave_Hoskins, 2022-05-26LOL. Zabidon mentioned it 5 years ago man!", "iq, 2022-05-26Yes, fixed the typo, thanks!", "Akeldarma, 2022-05-26Quick question, shouldn't line 27 be vec2 duvdy = dFdy( x ); ?", "apart from that, amazing as always ;]", "Master109, 2022-03-12@Dave_Hoskins Thanks! I will take a look!", "Dave_Hoskins, 2022-03-12@Master109, our own 'BigWings' has a video on doing that: https://youtu.be/JfC_ye23MvY", "Master109, 2022-03-12I am not used to shader scripting and I am having trouble adapting this code to work with Unity. Could someone please help me?", "Suslik, 2019-10-12It is indeed calculated twice, however, this can be actually useful : you can rotate and stretch every layer arbitrarily and apply anisotropic filtration to them (so that they would actually need different mips). Anyway, glad that you found it useful.", "iq, 2019-10-12I added your method to the code, see line 36. In this particular case computing the mipmap by hand is still faster since it's done once instead of twice like in your method. But I like the trick of hiding the seams in general, it can be used in so many ways! Thanks for sharing!", "Suslik, 2019-10-12Hi iq. I have improved your approach a little bit by making sure that uv discontinuities are always hidden in samples with 0 weight, so explicit mipmap calculation is not needed: https://www.shadertoy.com/view/WdVGWG", "", "This same approach can also be used for other types of interpolation to avoid mipmap seams: https://www.shadertoy.com/view/tsVGRd", "pq, 2018-11-06Might be a typo at line 26 : dFdx instead of dFdy ?", "prohell, 2018-01-16pretty!!!Amazing!!", "Dave_Hoskins, 2017-06-06@Zabidon, x is, somewhat confusingly, a vec2. Although it might still need an dFdy instead.", "Zabidon, 2017-06-06May be replace 26 line by", "vec2 duvdy = dFdx( y );", "huttarl, 2017-04-27Wow, pretty cool.", "starea, 2017-04-25Awesome shader! Very helpful!", "Zabidon, 2017-04-16Oh my ... I thought that it is  impossible to create pattern for using only 2 texture lookups.", "So I just  stopped search on 3 lookups https://www.shadertoy.com/view/MdGGW3", "Very nice.", "randomekek, 2017-04-11hello iq: recently it seems some shaders are breaking due to webgl's new reserved words eg: 'precision' and 'sample'. Is it possible to do a global find/replace of all shaders to fix these shaders. Thanks!", "ollj, 2017-04-02fract() is infamous on shadertoy, because in most cases you use both fractions of a float, and you calculated floor() already, and trust substraction in a pipeline more than a parallel fract() to get the other fraction with little rounding error. bottom line \"= l - i \" only saves 5 characters in source code but may hold surprises on NaN and -1./0, depending on browser, driver, hardware... . many people prefer shorter source code over anything.", "iq, 2017-04-02I believe avoiding dFdx/y won't save anything, since texture() will have to do it anyways if you don't pass them. In that sense, you can think of them as free calls, afaik.", "huwb, 2017-04-01nice - only 2 samples of the source data! thanks for this!", "", "I'm not sure how much it would actually run faster in real scenarios, but you could compute f = l - i instead of calling fract().", "", "i also experimented with removing the explicit derivatives by flipping texture lookups based on parity, similar to what i did in my 3-sample method (4tyGWK), but the result ends up being slightly more complicated than this version, so i've left that experiment in my shader draft graveyard .", "Dave_Hoskins, 2017-04-01Cool iq, so the intensity of the channels are used to alter the two mixes, rather than just using straight 'f' in the mix?", "iq, 2017-03-31Fixed!", "Dave_Hoskins, 2017-03-31Using the green stones texture show some sharp vertical cuts in places. All in all pretty neat though!", "BigWIngs, 2017-03-31That is awesome!", "Ivan71, 2020-05-26is someone capable of converting this shader to construc2?", "toto263, 2019-11-17Can I use your code in my commercial music player?", "dila, 2016-04-17nice demo", "finalman, 2016-04-17@jameswilddev", "Thanks, updated the shader", "jameswilddev, 2016-04-16I likey!  To get this to build on Microsoft Edge on a N3050's integrated GPU (I think it's called Braswell?) I had to precompute sqrt(5) in THETA:", "const float THETA = (1.0 + 2.2360679775) / 2.0;", "iq, 2016-04-15haha, very nie", "valentingalea, 2016-04-15Boogie Shader Wonderland!", "javalang, 2016-04-14Just looking for a similar scenario, this helps me a lot, thank you", "KylBlz, 2016-04-14nice!!", "Nimajamin, 2018-12-04Absolutely beautiful", "laysky, 2018-11-10nice", "ollj, 2018-10-30noooo", "scratch13764, 2018-10-30@ollj do you get paid to write long comments on shaders?", "ollj, 2018-10-07i like how a much faster circle inversions of space-filling-spheres", "amost looks a lot like a kleinian fractal:", "https://www.shadertoy.com/results?query=kleinian", "https://www.shadertoy.com/view/MltcRM", "to a point where a layman has a hard time distinguishing the two", "can you set you set the kleinian spin to 0 and have one as special case of the other, or are they too different?", "ollj, 2018-10-07nice shader, and the circle inversion seems to be a must-have on simple space-filling-fractals. same for many z-order-curves and trees. add sphere inversions for exploration. Hyperbolic all the things!", "", "Shane, [appoloneus of perga] was great with first derivatives of quadratic functions, but lacked comprehension of (ancient times) calculus to do 2nd derivatives of cubics, which made him good in circle-packing and coplanar math but limited at conic sections, parabola, frustum culling, and 3d to 2d projections.", "", "the trick to fast (pseudo) circle packing (that is modulated and not necessarily an iterated fractal like this shader, for performance) is to define a triangle lattice of simplexes, in 2d, 3d, 4d,5d,and its especially useful in 8d, and then take a lower dimensionally shadow/hyperslice (in 2d or 3d) of it. (for starters: a planar slice trough a 3d simplex lattice of stacked spheres, then you rotate and move the plane of the slice to change it, the more domains the more weird it gets, 8d spherepacking has special super-symmetry to exploit here!).", "as basis for this tri-lattice use", "float F=0.36602540378;//sqrt(3.)*.5-.5", "float G=0.21132486540;//(sqrt(3.)*.5-.5)/sqrt(3.)-.5-(.5/sqrt(3.))", "float TAU=6.28318530718;", "//https://www.shadertoy.com/view/Xs2fRd", "//to interpolate between square and tri-lattice a lot of hashes are nice for both extrema, but discontinuous for any in-between.", "vec2 skew(vec2 p){float f=(p.x+p.y)*F;return p+vec2(f,f);}", "vec2 unskew(vec2 q){float g=(q.x+q.y)*G;return q-vec2(g,g);}", "", "an advanced approach uses aperiodic iterations over modulated lattices, with domain folds of more domains down to less domains. if comes down to 2x3 and 3x2 matrices (and their spheremapped-pseudoo-inverses), and lots of loop accumulating.", "MacSlow, 2018-10-05Trippy... when one drags the mouse around", "aiekick, 2018-01-22i love it. very nice", "rigel, 2018-01-21Thanks guys for all the comments! They're really appreciated.", "@FabriceNeyret2 I don't like magic numbers either! But I still don't understand fwidth enough to use it. I will get back to this shader with your sugestions.", "@Dave_Hoskins Thanks ! Can I trade it for a tiny tiny tiny bit of your amazing shader skills ? ;D haha", "@Shane A random apollonian gasket? hmm... I think that creature might be like the Yeti, but I could be wrong", "iapafoto, 2018-01-21 Well done. Mouse interactivity is a killer idea", "Shane, 2018-01-21Love it. Very classy. For various reasons, I've been trying to come up with a cheap way to fill the canvas with randomly packed circles. It's been suggested to me that the Apollonian gasket formula could be modified in some way to give that appearance. Although, I haven't seen any examples, so I'll have to take their word for it.", "iq, 2018-01-21Beautiful!", "ocb, 2018-01-20Very very nice!", "Dave_Hoskins, 2018-01-20You have a great eye for colour.  it.", "starea, 2018-01-20fwidth for anti-aliasing is a great advise! Thanks Dr. Neyret!", "FabriceNeyret2, 2018-01-20nice !", "but for antialiasing, ok whatever resolution, don't use magic numbers like .005 but pixelsize related like 3./iResolution.y in linear cases.", "When non linear, you can use smoothstep(0,1,v/fwidth(v))", "Here you might use", "#define stroke(d,w,s,i) abs(smoothstep(0.,1.5,(abs(d)-(w*.5))/fwidth(d)) - i)", "but there is a discontinuity in provided d when d = mod(a,...) ( causing extra lines in fwidth) -> we would then need fwidth(a) instead in this case.", "Jacoby, 2018-01-20Cool", "LosMikEos, 2021-03-30Hi @airtight,", "this is a very glitchy shader, great work!", "May I ask you to build on your code and maybe use it in a commercial project?", "Many thanks & kind regards,", "LosMikEos", "heliumsoft, 2017-08-29Can i use your code in commercial?", "niraah, 2017-08-26Cannot compile properly in Touch designer", "heliumsoft, 2017-08-25Wonderful work.", "I have some project for shader coding.", "Can you help me?", "I want meet on Skype.", "My Skype is homekhos.", "Thanks.", "gloom, 2016-04-29Somian: because ART!", "Somian, 2016-04-29why would anyone want to do that on purpose ?", "", "next step: a shader that removes artifacts like that.", "hornet, 2016-04-14- in case anyone wondered if gloom got his wish http://www.pouet.net/prod.php?which=64341", "Zavie, 2016-04-14Looks great!", "hornet, 2014-11-21Looks great  - even better if you quantize the time-input, so the effects stick around for more than a single frame", "gloom, 2014-02-14I want this in our next demo Kusma", "iq, 2014-01-12Haha, awesome!", "spawner64, 2021-10-19This is ridiculously good looking.", "lambmeow, 2021-10-13@kolkagirls dang you guys are desperate advertising that here", "spolsh, 2021-10-05Awesome!", "Shane, 2021-10-02This one is beautifully done. Very pleasing to the eye.", "lambmeow, 2021-10-01So Cool !", "blackjero, 2021-10-01Very nice!", "blurryroots, 2022-11-24> At some point I stopped understanding exactly what makes this work, but it just kept getting cooler.", "Solid life philosophy IMHO", "jt, 2019-10-28very pretty!", "kharix, 2019-09-22You've really helped my Virtual DJ visuals.", "otaviogood, 2014-09-01Hey, you're right. That's like magic - you debugged my code in a way that the bugfix was already there. I just fixed it and saved it. Thanks.", "CeeJayDK, 2014-08-31There are some salt and pepper noise like artifacts, but they seem to go away when you uncomment //if ((t > maxDepth)) break;", "CeeJayDK, 2014-08-22It's very Tron, I love it.", "nimitz, 2014-08-21Very nice idea, volumetric marching of a 1/x field, which means that only the isolines very close to the target value (0.5 in this case) get registered.", "ewerybody, 2014-08-21just beautiful!", "oneshade, 2021-05-09For the sphere intersection, you can get the closest intersection in front of the camera regardless of whether its inside or outside by changing the return to:", "return -b - sign(c) * sqrt(h);", "whatever, 2016-11-01Just a minor detail I noticed, the distance formula is actually slightly wrong as it doesn't take into account the intersection cases where h>0 - this would be the correct distance(d should be 0 for an intersection): float d = sqrt( max(0.0,sph.w*sph.w-h+max(0.0,h))) - sph.w; The example works just fine though because of the smoothstep - (a negative interpolation value obviously returns the 1st edge - in this case 0.0). To visualize the error you can do this: if(d<0.0) d=1.0;", "Imsure1200q_1UWE130, 2016-08-18I secretly am younger than 14 yrs old.", "Imsure1200q_1UWE130, 2016-08-18@TDM, what do you mean by //line 25 & t?", "iq, 2014-11-18Very true.", "", "Now I have to go through all my shaders and modify them accordingly", "TDM, 2014-11-18Nice.", "I think it looks a little bit more realistic with smooth penumbra:", "// line 25", "return (t<0.0) ? 1.0 : smoothstep(0.0,1.0,k * d/t);", "cmarangu, 2019-12-18I hope that someday i will be able to make an infinite city myself...", "PlNG, 2017-12-13Holy crap. This is a deliciously crisp ~20FPS on my ~5k ranked graphics card. Impressive!", "akeyz, 2017-12-06Great work!!!", "", "Anybody convert this to three.js shader?", "ingagard, 2017-11-27You\u00b4re a genius Devin!", "jt, 2017-11-24Very cool", "morgan3d, 2014-10-19This is fantastic...really pushing the bounds of what is possible in a single-pass ray caster.", "limeforce, 2014-10-16nice! and lightweight too, no problem running 2560x1440@144hz on a GTX770", "vgs, 2014-10-16Really awesome shader! FYI cars are working on Ubuntu/Chrome/Nvidia.", "Devin, 2014-10-15Wow, it's Shader of the Week! Thanks to all!", "Optimus, 2014-10-15I like this one because it has more oldschool aesthetic overall.", "PauloFalcao, 2014-10-11Awesome!", "Devin, 2014-10-11Yeah, Dave, exactly that vid inspired me. Not only to make this shader, but to got into computer graphics at all!", "Dave_Hoskins, 2014-10-11Was this an inspiration?...", "", "", "BTW this runs at an amazing 3-4 fps on an old iPad 2 in Chrome!", "ac3t1ne, 2014-10-11Really cool, this reminds me of that XIII game!", "poljere, 2014-10-11Awesome! Also, cars also work for me on Chrome/Mac", "otaviogood, 2014-10-11I want to make a city shader now too. Fyi, cars work for me in Win8/Chrome/Nvidia.", "movAX13h, 2014-10-10Wow, so fast, even in fullscreen! Seems like the high number of conditionals in the sourcecode does not affect fps as much as I thought it would...", "Devin, 2014-10-10Shader with cars crashes for me in Windows/Firefox with default settings. I found this tutorial, but it did not help. https://www.facebook.com/Shadertoy/posts/187709471376029", "iq, 2014-10-10The cars seem to work just fine, why did you disable them by default?", "iq, 2014-10-10Very nice!", "Dave_Hoskins, 2014-10-10Really cool, Devin! I like the random details in the windows.", "winxos, 2016-11-07\u4f60\u7684\u4e66\u5199\u7684\u5f88\u597d\uff0c100\u4e2a\u8d5e\u3002", "YamSquirrel, 2016-02-03Simple and nice!", "benoitlahoz, 2023-04-07L'En-Vau", "XT95, 2022-12-11yes!", "Poisson, 2022-12-08Are you french?", "zproxy, 2017-10-13360 at", "FatumR, 2016-07-17wow!", "Jacoby, 2016-07-13looks amazing", "KylBlz, 2016-07-12beautiful composition!", "Phi, 2016-02-28Very amazing shader !", "anastadunbar, 2016-02-0720 FPS.", "dila, 2016-02-06great!", "Dave_Hoskins, 2016-02-04Nice one! Lovely colours.", "elzeru, 2016-02-03That's nice, bonneu m\u00c3\u00a8reu", "DRMASTER, 2016-02-036.4FPS on iPad pro :]", "teadrinker, 2016-02-03It crashed a few times today (laptop), but now it seems to work on both chrome and firefox. Looks great!", "iapafoto, 2015-12-05 I'd missed this one ! Very nice !", "Shane, 2015-12-04This is one of nicest examples I've seen in a while. Gorgeous. <3.", "", "I get full framerate on my fastest setup. On my slowest machine, the framerate is lagging, but it runs as well as expected. The multiple noise layers tend to slow things down, but there's not much you can do about it. Replacing the lower frequency, foundation layers with cheap, sinusoidal functions provide a noticeable speed boost, but never seem to look as nice. Cost cutting to accommodate slower machines is always an exercise in frustration.", "iq, 2015-12-04It works now! Thanks for fixing it! And it looks so good", "poljere, 2015-12-03Running at 60fps here! Nice improvements", "XT95, 2015-12-03yeah !! Thx", "renaudbedard, 2015-12-03All good now!", "iq, 2015-12-03It's still crashing", "patu, 2015-12-03Amazing!", "renaudbedard, 2015-12-03D'oh, nevermind, it only worked when Chrome fell back to a reference software renderer for WebGL (which is why it ran so slow!).", "Going back to ANGLE, it doesn't load.", "Duke, 2015-12-03Looks greate!", "renaudbedard, 2015-12-03Seems to work now. But it runs very, very slow, under 1FPS on a GTX 960... Beautiful though!", "XT95, 2015-12-03renaudbebard : I just reduce the raymarching step to 128, is it better ?", "renaudbedard, 2015-12-03Still crashes my Chrome 46 on Windows", "XT95, 2015-12-03Ok I just replaced my AO function with something cheaper (and ugly). But I think that works now  !", "iq, 2015-12-03It's crashing my browsers (Windows), I'll put it in draft mode for now till it works", "poljere, 2015-12-03Beautiful, great work! I run at 30fps!", "Dave_Hoskins, 2021-10-18Hey thanks! Remember this is a smooth, flat texture. It would be nice to have actual blades of grass that stick up in profile, rather than the smooth rounded hills.", "byt3_m3chanic, 2021-10-182013? wow - just WOW! ok Shane sent me here and now I feel like my grass shader is dirt..", "jeyko, 2021-02-06cheap and very nice colours", "Flexi, 2020-04-29\ud83e\udd24", "zproxy, 2018-08-01360 at", "akhgary, 2018-05-07I wish i was there right now. only if shaders could teleport you as well...", "jt, 2018-01-16very impressive!", "Dave_Hoskins, 2017-02-02Sure. Good luck.", "noseglid, 2017-02-02Hey Dave_Hoskins. This is looking really great. Would you mind adding a license to it so I can use it in a game I'm creating?", "Dave_Hoskins, 2015-10-25(trees?) - Yeah, shortish grass doesn't really wave like this, it sort of twitches with the wind, because of its flat shape I guess. This movement here would indeed make a convincing underwater reef type frond thing, yes.", "summer, 2015-10-25The trees have that wavy movement if they are close. Could be tweaked to underwater landscape then.", "Dave_Hoskins, 2015-01-03Thanks, must have an old edit left over.", "WouterVanNifterick, 2015-01-03line 156 and 174 can be removed, because f is not used anywhere", "TheDrDocter, 2014-12-04Can you teach me your ways!", "knighty, 2013-12-01beautiful! and fast.", "eiffie, 2013-12-01Dave can you attrib that piece of code and CC it? Thanks!", "Dave_Hoskins, 2013-11-30OK I've changed the grass rendering yet again. This time with eiffie's blurring distance field technique in the grass loop. Astonishingly, it only needs 15 loops to trace out the grass blades!", "Qqwy, 2013-11-18This looks beautiful. It makes me think of the WinXP days...", "Dave_Hoskins, 2013-10-04I had a rethink. The aliasing should be sorted using shorter grass in the distance, not a clumsy texture LOD. I also rewrote the grass occlusion to use the depth of grass instead of number of steps until hit, for the occlusion calculation.", "Dave_Hoskins, 2013-08-05Thanks iq. That's interesting about 'if's but I'm sure I had mipmaps when I had 'if's in the code, it was reducing the loop sizes that got them back. Oh well, *shrugs* that's the strange world of Angel.", "iq, 2013-08-04Well done btw (of course!)", "iq, 2013-08-04Yeah, seems Angle kills mipmapped filtering as soon as it detects an if() in your code. Which is an unfortunate too-conservative safeish thing to do", "Dave_Hoskins, 2013-07-30In the end I had to resort to a bodged handmade filter, which doesn't take in to account 'normal' angles for anti-aliasing.", "Dave_Hoskins, 2013-07-30OK, I've reduced the size and mipmaps are back(!), I will try and sort out aliasing later.", "Dave_Hoskins, 2013-07-30Thanks! I was intending to use the texture mipmaps to prevent aliasing, but as the shader grew they got disabled. I guess my 2Gb graphics card isn't enough?! LOL.  I'll have to do it another way, or reduce the loops somehow.", "It's best to play this full-screen to reduce the artifacts a bit.", "poljere, 2013-07-30Beautiful!", "Metin, 2018-06-24now this is podracing!", "iq, 2017-12-19Fixed!", "aiekick, 2017-10-25he not compil when i activate \"SLOW_ANTIALIAS\"", "aiekick, 2016-06-13can you explain a little bit how this is work, i not understand precisely how the anti alais work here. thanks", "ollj, 2016-04-17looks like a cheap approximation for dreadlocks.", "drone1, 2015-10-23Uncommenting #define SLOW_ANTIALIAS gives me a bunch of errors. I believe you just need the following line before your raymarch loop: vec4 tmp = vec4(0.0);", "fmichaelw, 2014-12-31can you do a ray marching of", "https://www.behance.net/gallery/18261191/XGen-rendered-with-Arnold-for-Maya", "Our healthcare company would pay for a visualization similar if you would be interested in adapting one of your raymarching examples. michaelw@biowellinc.com", "vgs, 2014-12-22very smooth!", "eiffie, 2014-12-20Oh I see how it got a little ragged with just 4 samples. I was thinking they were all edges. I added a bool to make sure only 1 sample is taken per edge at the closest point. I love this AA method.", "iq, 2014-12-20Ok, fixed it. It seems 4 points are enough more or less. I've tried 8 and it looks better, but not much.", "eiffie, 2014-12-19This unrolls to too many instructions for me so I made a version using a matrix as a stack of edge points to shade later... MlX3R4  They kind of look yummy.", "CPU, 2014-12-19Gorgeous!", "samerce, 2022-01-23hi @nimitz! this is increedddibbleeee. may i please use it on my portfolio site? it's a showcase of my work, i don't sell anything there. i will credit you there and the website code itself is CC-share alike.", "rndrfero, 2017-12-01thanks: https://www.youtube.com/watch?v=gpVW-r4D4FQ", "etale_cohomology, 2017-07-14Looks like the surface of the sun =D", "BigWIngs, 2016-11-24Very beautiful!", "neosettler, 2016-11-15Outstanding work! Would you consider making your shader available through the API?", "shau, 2016-10-02I had to change the float loop to an int loop on one of machines to get full effect", "darksamaritan, 2016-10-02This is how falling into a blackhole must feel like", "shau, 2016-09-29Totally evil", "JasonD, 2016-09-29I agree with @MichaelPohoreski ... blue looks incredible!", "MichaelPohoreski, 2016-09-28Blue Flame! Change Line 69 to: (swap red and blue)", "vec3 col = vec3(.01,0.07,0.2)/rz;", "GregRostami, 2016-09-26WOW!!!!!!", "dila, 2016-09-24ooh, sparkly", "aiekick, 2016-09-23very cool.", "@danguafer, nice proposition, and i prefer with 0.2 instead of 2.0 at the end", "Danguafer, 2016-09-23I love how fluid it looks when changing the 68th line to \"rz *= pow(6.-spiral(p,3.), 1.9) * 2.0;\"", "hcf, 2016-08-24I find a rule that num in line 68 and 69 match,their product should equals to 2*pi.", "But I dont know why.", "hcf, 2016-08-24And I test it always be ok when the num is 3*n.", "hcf, 2016-08-24hi nimitz, why should be 3 in line 68 ? I really don't understand it.", "CaliCoastReplay, 2016-08-11WOW, that is fast and pretty", "PauloFalcao, 2014-09-13Beautiful!", "nimitz, 2014-07-27Missed an abs(), fixed now.", "ewerybody, 2014-06-24Whoow! Its awesome on fullscreen!!", "rigo, 2014-06-23Very cool!", "Slothscript, 2023-05-31Wow, I never realized how complicated raytracing would be in a shader", "dean_the_coder, 2023-05-02Nice one! I'm quite late to the party, but relaxing accuracy as the ray moves away from the camera will give you a decent amount of FPS. (Probably not as important these days though!  )", "E.g. if( dS<RAY_PRECISION * d * 0.01 || d>MAX_DISTANCE ) break;", "jaggotswag, 2023-04-11WHAT. I CANNOT BELIEVE MY EYES. As a noobie to shaders and graphics programming (OpenGL), you must understand how amazed I am... I didn't think anything like this would be possible. I'm almost giggling with excitement. I'm glad that there are such talented and intelligent people in this world.", "Xonatron, 2023-04-07Wow.", "curtisjhu, 2023-04-04lol very nice", "jt, 2023-04-03Wow!", "adrinalino, 2023-04-01Tutorial please! :-)", "Nightshft, 2023-03-30Awesome prod congrats. The excellent track from Gus Gus fits perfectly.", "pyBlob, 2023-03-30Btw, there are open source programs that try to calculate the most probable 3d-structure given the flat diagram of the molecules. Last time I tried that was 15 years ago, with roughly 20 base pairs. You could start to see the helix, though it did take quite some amount of computation time for that.", "huttarl, 2019-04-23Very nice.", "iq, 2017-05-22Very cool!", "otaviogood, 2017-05-20really cool that you put effort into getting the structure correct.", "ollj, 2017-05-19(Polar) folding of space is always worth it, and the 3-fold-polar is a \"barely worth it but still\" case.", "And your dna carbon rings have a 5- or 6-fold-polar symetry.", "", "polar-folding is only a little rarer than carthesian-folding, but polar folding is just as much fun:", "Polar-folding can be like arranging multiple mirrors around a point (axis in 3d) at vec2(0).", "Only a small slice of space really exists, and the other slices are \"mirrored\" or pMod-ed from that small slice.", "(repeating like a seesaw or triangle waveform, except in polar coortinates, very much like a gear)", "Just search for \"gears\", as these tend to have polar-folding, and also tend do be aligned on a (skewed or bipolar-transformed) hex tiling, too.", "https://www.shadertoy.com/results?query=gears", "remember that the teeth of a gear are done by polar folding, and the gears as a whole also tend to exist within a differently folded (repeated) space.", "you can tell that a shader folds space a lot by seeing that it runs with almost 2x as many fps as a comparable unfolded shader.", "", "yes, you need atan(y,x) to convert from carthesian to polar coordinates, for a polar-fold.", "(unless it is 4-fold-polar, which lets you use a simpler transformation matrix instead)", "", "---", "", "the problem of atan(y,x) is that it contains 2to4 branches (varies by implementation, more branches can increase precision)", "the branching is due to ambiguity of what quadrant the angle is inside of, and to avoid divisions by 0.", "the branching that atan(y,x) contains makes atan(y,x) perform worse within a low-level function,", "but branching in a high-level function more likely increases performance than lowering it. by being idle on all the code that is in a skipped branch.", "", "In opengl atan2(y,x) and atan(y/x) both share the same namespace \"atan()\", differenciated by number of parameters.", "atan(y,x) includes annd extends atan(x/y), to contain more quadrants.", "atan(y/x) is only good for rotations range [-oneQuater ... +oneQuater], which can be enough if you know how to fold the quadrants correctly.", "atan(y,x) is good for rotations range [-oneHalf ... + Onehalf]", "... and generally a full_rotation=2*3.14. but many other notations (full_rotation =360. , full_rotation=400. ) exist.", "", "Going to wikipeda.com and seeing all the different implementations of atan2(y,x)", "...very likely lets you explicitly chose a special case with less branches for your code.", "the branching of atan(y,x) only distinguishes the quadrant cases, and that can be done branchless, if needed for a subroutine.", "", "---", "", "more general exapmles why it is worth to fold (not just polar) space (like folding paper):", "For a simple 2-fold symmetry: you mirror a point by rotating it with a rotation matrix and then negating one of the dimensions signs.", "This makes the whole geometry half as big, because half of the geometry is duplicated to the other half.", "You get 2 mirrored (lets say folded) poins for the compoutation cost of 1 point + the computation cost of the mirroring.", "pMod*() repetitevly folds space onto a smaller slice (on 1,2 or 3 carthesian dimension), like a seesaw or triangle curve,", "... like folding a paper along a dimension in zigzag.", "your rendering space becomes much smaller, the width of the folded paper.", "", "pModPolar() does the same, only after converting to polar coordinates, creating a \"rotated mirror cabinet\", folding paper like a paper fan.", "the compression of space by polar-coordinate-folding is easily worth the atan(y,x) function.", "", "you can fold higher dimensional space on mirrors that are rotated in that space along multiple dimensions.", "(by matrix transforming the space/mirror before folding/mirroring)", "https://www.shadertoy.com/view/llVXRd", "https://www.shadertoy.com/view/MsKGzw", "Shane, 2017-05-19Love it - especially the way the camera moves through the peeling strands. There are probably some intramolecular mirroring opportunities, but not without further complicating the code. Besides, it seems to work fast enough anyway.", "BigWIngs, 2017-05-19@ollj - Interesting use of symmetries.  It does use an atan though, which I believe is very expensive (like 30 instructions). I Could be wrong. Gotta look into that.", "@ wolf - Thanks for the tips! I fixed the twist direction. I did some research on the minor/major groove thing and unfortunately, I can't do this with my current approach because I'd have to offset one of the strands but atm its rendered as one mirrored strand instead of two separate ones.", "@ everyone else. Thanks!", "wolf, 2017-05-18Wow! I was thinking about going after the atoms in my version, but thought it would be too difficult. I really love the splitting and how the camera follows.", "", "Because I spent so much time also working on this, I thought I should probably nitpick this one", "The first issue is pretty easy to solve: DNA twists in the other direction", "The second one is harder: The \"major\" and \"minor grooves\" in DNA mean that the two sides are actually offset a bit, and the base pairs are actually apothems. It's a bit easier to see what I mean by taking a look at my last shader: https://www.shadertoy.com/view/4dScDy", "", "I absolutely love this!", "wyatt, 2017-05-18damnnn", "kuvkar, 2017-05-18looks great", "Dave_Hoskins, 2017-05-18Cool. I like the way it's splits in time for the camera.", "ocb, 2017-05-18Big job!", "Hydrogen, Carbon, Oxygen... Is it real DNA structure? Looks so.", "Yrai, 2017-05-18Great shader", "GregRostami, 2017-05-18WOW!!!", "ollj, 2017-05-18or something like triangular tiling that projects an infinite number of glyphs (and circles) on a grid town to one single tile.", "https://www.shadertoy.com/view/MdjcDd", "ollj, 2017-05-18ine importnant part is to utilize hexagonal and pentagonal tiling to measure the intersection to a dozen spheres on a plane ot TGAC AFTER they have been tile-projected down to a singple sphere.", "", "this comes down to using (more special variants of) hgsdf pModpolar (where  [repetitions] =6 or  [repetitions] =5)", "// Repeat [p] around the origin vec2(0) by a fixed angle.", "// For easier use, num of [repetitions] is use to specify the angle.", "float pModPolar(inout vec2 p, float repetitions) {", "float angle = 2.*PI/repetitions;", "float a = atan(p.y, p.x) + angle/2.;", "float r = length(p);", "float c = floor(a/angle);", "a = mod(a,angle) - angle/2.;", "p = vec2(cos(a), sin(a))*r;", "// For an odd number of repetitions, fix cell index of the cell in -x direction", "// (cell index would be e.g. -5 and 5 in the two halves of the cell):", "if (abs(c) >= (repetitions/2.)) c = abs(c);", "return c;", "or something like", "ollj, 2017-05-18time to fold some proteins", "Ubiquitous, 2021-07-29One of my all time favorite shaders!", "Kali, 2020-07-21@Lumos please contact me - okimkali@gmail.com", "Lumos, 2020-07-21Nice shader  could i use it commercially, for VJing and Music Videos?", "Also, may I change the code to make the shader react to music?", "Thank you for your Time and the great shader ^^", "stb, 2020-07-14Whoa, missed this one. Very nice!", "Bers, 2018-05-25So many details, so little code! Impressive", "CaliCoastReplay, 2016-08-06Cinema quality", "cyrilp, 2016-06-27This looks great !!", "I'm trying to run it on an android phone but it's far to slow.", "What can we change to make it quicker at the expense of some quality loss ?", "jt, 2016-01-02Hot", "mattstyles, 2013-12-04Yeah, echo the other comments, looks fantastic", "baccanno, 2013-09-27The effect is terrific. Following your work for a time now, can't wait for upcoming ones ;)", "PauloFalcao, 2013-09-23Simply one of the best shaders I've seen in shadertoy, congratulations!", "Danguafer, 2013-09-23This is so beautiful :O", "mmalex, 2013-09-23this is amazing! lovely balancing of colours and shape. it looks amazing (and different) too if you turn down 'iterations' - to 6 or even less. also putting fractparam as iMouse.x / iResolution.x is fun", "Kali, 2013-09-18Done. Hope it helps", "Tili_us, 2013-09-18Is it possible to comment the code a bit? I have no clue what is going on.", "huwb, 2013-09-15epic!", "Kali, 2013-09-13Thanks for the comments! @Dave: you know, that tiny simple formula does most of the work ;)", "Antonalog, 2013-09-13awesomeness/line = inf", "Dave_Hoskins, 2013-09-13I expected to see more code! Where's all the code?", "it. The impression of force and heat is really nice.", "Kali, 2013-09-13Many thanks, iq! Now it looks more like a planet", "iq, 2013-09-12Wooooooahh! Super, super, super cool! Well done!", "FabriceNeyret2, 2022-11-13added: compatibility tricks. including, how to force OpenGL on windows, or get online Windows emulator.", "sylvain69780, 2022-10-03I see that line0 is not an exact SDF. May be IQ's sdOrientedBox can be used instead to avoid aliasing at the ends ?", "FabriceNeyret2, 2022-04-16oops (spawned when the feature evolved to 3 states ). fixed", "cyberjax, 2022-04-16After repurposing your keyboard code (lines 124-126), I was totally confused why my shader wasn't working, until I saw line 259.", "How about swapping \"keyClick\" and \"keyDown\" to un-obfuscate your code ;)", "FabriceNeyret2, 2022-02-14Added: cubeMap A as a regular buffer but 1024x1024", "jt, 2022-02-06very useful!", "mla, 2022-01-25That seems to be OK - the crucial thing there is the check:", "if (lower >= 1e4) { lower -= 1e4; upper++; }", "", "ie. if the modulus value is too large, make a correction (we can make a similar correction in the \"it's not so hard\" code).", "FabriceNeyret2, 2022-01-25but 2022-01-11 fix seems robust, right ?", "mla, 2022-01-25That last bit of code (from  2022-01-12 - \"OK, it's not so hard...\" is wrong - the problem with GPU mod() is not that it doesn't return an exact integer, but that it might return the wrong integer altogether, which round() doesn't deal with. I know this perfectly well, so don't know what happened there.", "mla, 2022-01-12Previous fix was fine. New version was just trying to do everything with floats, mainly to avoid integer ops that aren't in WebGL 1, specifically %. Then again, we do have integer division & can use n%m == n-n/m*m.", "FabriceNeyret2, 2022-01-12ints: fair", "", "new codes: which problems are you solving now ? didn't you previous fix worked ?", "mla, 2022-01-12@Fabrice - I think I misunderstood your comment earlier. int 32  can represent more digits than a float 32, so the conversion to int shouldn't be a problem.", "mla, 2022-01-12OK, it's not so hard to fix to work properly just with float arithmetic - trick is to arrange things so all operations (theoretically) have an exact result when applied to integers, then just use round() to correct any numeric error:", "vec4 pInt(vec2 p, float n) {", "vec4 v = vec4(0);", "if (n < 0.)", "v += char(p - vec2(-.5,0), 45 ),", "n = -n;", "", "for (float i = 3.; i>=0.; i--) {", "float d = round(mod(n,10.0));", "n = round((n-d)/10.0);", "v += char(p - .5*vec2(i,0), 48+ int(d) );", "}", "return v;", "}", "", "vec4 pFloat(vec2 p, float n) {", "vec4 v = vec4(0);", "if (n < 0.) v += char(p - vec2(-.5,0), 45 ), n = -n;", "n = round(n*1e4);", "float lower = round(mod(n,1e4));", "float upper = round((n-lower)/1e4);", "v += pInt(p,upper); p.x -= 2.;", "v += char(p, 46);   p.x -= .5;", "v += pInt(p,lower);", "return v;", "}", "mla, 2022-01-11Sure, I understand these were originally written for WebGL 1, but I don't think there is any way you can avoid problems with float divide in that case (not without a lot of bother anyway).", "", "For sure n*1e4 can overflow for arbitrary n, but your code is only dealing with numbers in -10000 < x 10000. If you want the full monty then you'll need to be more careful (as inmy recent shaders).", "ollj, 2022-01-11FabriceNeyret2, likely no, because that depends on n, and n can already be subnormal or denormal or whatever you want to call invalit ieee floats.", "FabriceNeyret2, 2022-01-11yeah, but these where wrote at webGL1 time, and are so used that I prefer keep them compatible.", "", "int(n*1e4)  / 100000 : uh, are there enough digits in int32 for its always safe ?", "mla, 2022-01-11An alternative (since we now have integer mod) woiuld be to do something like:", "int upper = round(n*1e4);", "int lower = upper%10000;", "upper /= 100000;", "", "and avoid the conditional.", "FabriceNeyret2, 2022-01-11ok, done. ( I thought printf was truncating, but it does round too ).", "mla, 2022-01-11Your pFloat function is unnecessarily inaccurate - the fraction part is truncated rather than rounded (so eg. 0.99999 prints as 0.9999 rather than 1.0000", "", "Simple fix:", "vec4 pFloat(vec2 p, float n) {", "vec4 v = vec4(0);", "if (n < 0.) v += char(p - vec2(-.5,0), 45 ), n = -n;", "float upper = floor(n);", "float lower = fract(n)*1e4+0.5;", "if (lower >= 1e4) { lower -= 1e4; upper++; }", "v += pInt(p,upper); p.x -= 2.;", "v += char(p, 46);      p.x -= .5;", "v += pInt(p,lower);", "return v;", "}", "spalmer, 2021-10-22qexp and qlog are for constructing qslerp, see my recent kinemation toy where I didn't use it and in fact think I forgot to ensure shortest hyper-geodesic.  qpow? Sure, same idea.", "", "it's easy to convert from angular momentum style \"rotation axis scaled by radians to rotate by\" to quaternion, I have it lying around here somewhere... but it's only trivially different from qexp in implementation!  but that's only good for constructing the per-frame delta rotation, accumulate orientation as quaternion instead of, say, euler or matrix.", "ollj, 2021-10-22rot-between shines for being work-save.", "rot between shines for evading the near-singularity around very small angles, akin to similar near-singularities of quartic solvers, where ever you divide by much smaller values, close to dividing by 0, you get chaotic randomness from low precision with 32bit-ieee.", "", "good code. What is even the use case for qexp() and qlog(), to construct qpow() from it for inverse kinematics solvers?", "", "The trickier part is, for movement inputs, you likely have euler rotations (axis independent INPUTS unless you have a fancy 3d analog controller) to be translated to a quaternion, or 3 likely small quaternion-rotations be multiplied. Both are non-commutative-3d-rotation-sequences, and eulerPitchJawRoll2quaternion seems much faster and more precise than generating 3 quaternions, scaled by an angular momentum.", "spalmer, 2021-10-20just a quick port job from my old C++ code, surely can be golfed.  btw there's a bug in qexp, final quat constructor args reversed.", "spalmer, 2021-10-20I'll take that as a no?  ;)  where's this precision loss at, exactly?", "", "#define quat vec4", "", "// quaternion from 2 vectors", "quat qfromto(vec3 vsrc, vec3 vdst) // construct rotation that maps vsrc to vdst", "{", "vec3 vhalf = vsrc + vdst;", "vhalf *= length(vdst) / length(vhalf);", "return quat(cross(vsrc, vhalf), dot(vsrc, vhalf));", "}", "", "quat qaxisangle(vec3 axis, float rad)\t// axis should be unit length!!", "{", "rad *= .5;", "return quat(sin(rad) * axis, cos(rad));", "}", "", "// quaternion composition", "quat qmul(quat a, quat b)", "{", "vec3 va = a.xyz, vb = b.xyz;", "return quat(b * a.w) - quat(cross(vb, va) - va * b.w, dot(va, vb));", "}", "", "quat qrenormalize(quat q)", "{", "float l2 = dot(q, q);", "return l2 == 1. ? q : .5 * (3. - l2) * q;", "}", "", "quat qlog(quat q)", "{", "vec3 v = q.xyz;", "float l = length(v), s = 2. * atan(l / q.w) / l;", "return quat(v * s, l);", "}", "", "quat qexp(quat v)", "{", "vec3 v3 = v.xyz;", "float a = dot(v3, v3);", "if (a < 1e-7) return quat(0,0,0,1);", "a = .5 * sqrt(a);", "return quat(cos(a), v3 * (sin(a) * .5 / a));", "}", "", "vec3 qrot(quat q, vec3 r)", "{", "vec3 axis = q.xyz;", "float w = q.w;", "return 2.*((cross(axis,r) + r * w) * w + axis * dot(axis,r)) - r;", "}", "ollj, 2021-10-19The Quaternion Rabbit Hole is not THAT deep for rotations:", "", "QuaternionQorations are identical to AxisAngleRotations (besides precision loss, both have the same axis)", "EulerRotations are not necessarily identical to AxisAngleRotations (due to non commutativity of rotations in 3d space) (the rotation of between euler and quaternion from the same (normalized) input vectors or matrixes may vary a lot)", "", "I composed an often copied ESDF+WR+mouse-quaternion camera (with 1 derivative for angular momentum and linear momentum)", "https://www.shadertoy.com/view/wl3yDs", "Older copies have a silly error, where SOME opengl implementations will refuse to CORRECTLY parse", "mat3(0,vec3(1),0,vec3(1),0)           //may compile to a nonsensical mat4 due to offsets paesing poorly.", "and", "mat4(0,vec4(1),0,vec4(0),0,vec4(0),0) //may compile to a nonsensical mat4 due to offsets paesing poorly.", "while", "mat4(vec3(1),0,vec3(1),0,vec3(1),0,vec3(1),0) //sure is just fine.", "", "Quaternion rotations only use q==normalize(vec4()) Quaternions.", "Quaternions are less precise than a mat3 rotation, but compress nicely to a vec4(). As it is normalized, it could easily be stored as vec3() for the cost of a.w=1.-a.x-a.y-a.z (like in barycentric3d)", "Quaternions are only less precise than EulerRotations for small angles, this is addressed via 2 cases within qBetween() below:", "This is because we divide by the angle between 2 vectors to normalize the quaternion. You may just want to defer that.", "To construct a quaternion as a rotation between 2 points around vec3(0), http://wiki.secondlife.com/wiki/LlRotBetween has a quite famous [replacement] function", ", that is translated to opengl as; qBetween() of https://www.shadertoy.com/view/wl3yDs", "qBetween() is more precise than the smaller and logically identical qBetween2() function that utilizes a more straight forward AxisAngle2WQuaternion() == aa2q()", "qBetween() catches more div0 cases and defers divisions (by small numbers) as much as possible.", "You just lose a lot of precision by naively doing AngleBetween(vec3 a,vec3 b){;return acos(dot(a,b)/(length(a)*length(b)));}", "and AngleBetween() more liklely divides by (something close to) 0.", "", "No matter how you construct a quaternion for a rotation, at its core you have an 1/arcos() normalization by the angleBetween 2 vec3.", "https://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/index.htm", "at their core, quaternions are complex numbers, and non-normalized quaternions have other uses (than rotating a vec3).", "", "quaternions are ALWAYS more efficient when you have forward kinematics, because it just multiplies many normalized vec4(), instead of multiplying as many mat3.", "doing an q/dot(q,q) squared-normalization every 4 quaternion multiplications is OPTIONAL, to adjust for acumulating precision errors.", "(when lenght(a) is close to 1, you can to a/dot(a,a) instead of a/lenght(a)==normalize(a) to re-normalize(), qich skips 1 (inverse)sqrt() for 1 division)", "", "all the above does not include", "https://en.wikipedia.org/wiki/Slerp#Quaternion_Slerp", "JonathanBlow qrote a lot about rotations for game engines, and has some fast slerp approximations (most are already on shadertoy (only in 2d)):", "http://number-none.com/product/Hacking%20Quaternions/", "http://number-none.com/product/Understanding%20Slerp,%20Then%20Not%20Using%20It/", "FabriceNeyret2, 2021-10-19Quaternions: do you have small code for that somewhere ?", "", "Compared precision:  what do you mean ? Euler angles vs quaternions is first a difference of API about how angles are specified.", "Now it you mean which is closest to the geodesic on the Gauss sphere when interpolating rotations, that's another question ;-)", "ollj, 2021-10-18Quaternions lamost always have significantly shorter rotations than euler rotations for same starts+ends.", "Only for angles smaller than 1/400-full-rotations euler rotations have significantly higher precision than quaternions.", "Spinors continuously deform space, where a ful cycle is 2 full rotations long.", "FabriceNeyret2, 2021-10-18added:", "- 2D and 3D rotations", "-  table of content", "TheNosiriN, 2021-02-23why was this not on my liked shaders yet I've been going to it since", "morimea, 2020-11-15look like Shadertoy change iMouse.w event, from yesterday it no longer \"Positive same as iMouse.z during mouse click\"", "now - sign(mouze.z)  = button is down, sign(mouze.w)  = button is clicked", "", "this change make broken many old shaders that use drag-drop without abs(iMouse.zw) like this shader  https://www.shadertoy.com/view/4lVXRm", "FabriceNeyret2, 2020-11-15Added a section about evens", "danhel95, 2020-09-19pure gold here", "XutXtuX, 2020-08-05Very useful, thank you!", "FabriceNeyret2, 2020-02-15y, tyvm :-)", "spalmer, 2020-02-15tyvm, sir!  Now it is indeed a complete reference.", "FabriceNeyret2, 2020-02-15look better ;-p", "spalmer, 2020-02-14Needs a small gamma test and a    O.rgb = pow(O.rgb, vec3(.4545));      ;)    just for completeness", "Dave_Hoskins, 2019-10-30Windows 10 / Chrome 77.0.3865.120 / Nvidia GTX 1060", "FabriceNeyret2, 2019-10-30what is you OS / browser again ?", "( but maybe it also depend of the driver version. Oh my ).", "Dave_Hoskins, 2019-10-30It appears OK now, in both draw modes.", "FabriceNeyret2, 2019-10-30mhhh, bug persist apparently only on windows/Angle / IMMEDIATE_DRAW=1", "FabriceNeyret2, 2019-10-30ok, should now be fixed in both modes. ( evaluating dFdx out of the if ).", "FabriceNeyret2, 2019-10-30argh, I thought it was fixed a long ago ! ( You are on windows / angle, right ? )", "is it at least seamless in immediate mode ? ( #def IMMEDIATE_DRAW 1 at top )", "Dave_Hoskins, 2019-10-29I needed to set the font filter to 'linear' to remove a light grey line appearing to the right of the large numbers.", "visuality, 2019-10-29Very nice, rich with how to info, nicely commented as well.", "FabriceNeyret2, 2019-09-17new: texture info red if not loaded yet.", "texture lod info red if video/sound locked by the stupid new web media policy.", "FabriceNeyret2, 2019-09-04more utils added:", "- hue,", "- antialiased line drawing (round or straight end),", "- antialiased circle & disc drawing, with transparency & blending", "gPlatl, 2019-05-25I have added key value display to ViewShaderData2.", "Can please somebody check if ViewShaderData2 is running on Mac too?", "starea, 2019-01-18New features work on a Mac :-)", "FabriceNeyret2, 2019-01-18update: more efficient text display ( also solve the windows bug )", "FabriceNeyret2, 2019-01-18update: keyboard: management + comments + display ( try CTRL-SHIFT-SPACE )", "FabriceNeyret2, 2018-05-03fixed for negative floats", "starea, 2017-12-11Thanks for writing this!", "FabriceNeyret2, 2017-10-28yes, for I don't see dividing by something that could be zero :-)", "nabr, 2017-10-28but most likely its just me, forgot to initialize the fragColor. nevermind", "nabr, 2017-10-28Hello, thank you for your work!", "Idk, maybe its just me, but in generall usage, maybe also with mediump on a website dividing by 0 line 5 int c when c =0/16 or later when y=0./16. in case mod(time,X) may break the shader for a sec. Very useful anyway.", "FabriceNeyret2, 2017-10-27added: resolution of LODs.  Chrome vs Firefox don't have sames for non-power-of-two textures !", "ingagard, 2017-09-25This was great help to me today. Huge thanks FabriceNeyret2!", "FabriceNeyret2, 2017-08-03wow. Some windows 10 /nvidia had the bug. But on another windows 10 (with quadro 6000, firefox&chrome Angle&OpenGL) there was no bug.  WTF.", "FabriceNeyret2, 2017-08-01Nobody told me but apparently it was not working correctly on windows: mouse=(1,1)  was written (1000,1000) and paging was wrong.", "It's now fixed.", "It's the *worst hairy compiler bug I ever saw*:  on windows, line 21, vec2(.5*i,0) don't work while .5*vec2(i,0) work. And if I use vec2 q =p; q.x-=.5*i instead of -vec() it also work.", "HG1, 2017-07-09> well, this is not fixing, this is desactivating ;-).", "I know. But the funny thing is that when I disable the maipmaps it still renders smooth.", "", "> What about the alternate solution ? ( uncomment #7,8 and comment #5,6 )", "I already tried it. But the manually calculated mipmaps also don't works for me. Same issues as with the dFdx/dFdy version. I need to multiply it with 0.4 to get it to work. But I think that also gives the lowest mipmap level.", "float l = 0.4 * log2(length(fwidth(p/16.*iResolution.xy)));", "", "One thing that I have forgotten to mention. Char is a keyword. I needed to rename it to get the shader to compile", "FabriceNeyret2, 2017-07-09well, this is not fixing, this is desactivating ;-).", "What about the alternate solution ? ( uncomment #7,8  and comment #5,6 )", "HG1, 2017-07-08I don't have a MIPmap issue in the browser. But if I use the shader in a other software I have this issue.", "Forcing the lord to -100.0 has fixed the MIPmap issue for me.", "return textureLod( iChannel0, p/16. + fract( vec2(c, 15-c/16) / 16. ), -100.0);", "FabriceNeyret2, 2017-07-06added ascii keypressed", "FabriceNeyret2, 2017-07-03so strange that IEEE floats don't give the same result. Corrected here, but I used this code in many shaders...", "HG1, 2017-07-03Windows 7 64 bit professional", "Firefox 54.0.1 (32-Bit)", "Geforce GTX 460 (driver 375.70)", "FabriceNeyret2, 2017-07-03it's correct on linux. What is your OS / browser / GPU ?", "HG1, 2017-07-03To fix the value issue, I change the line 20 from n/=10.0 to n /= 9.999999.", "HG1, 2017-07-03There is a displaying bug. It displays some values wrong.", "Like for the iSampleRate the Value is 44100 but it displays 44000. I have to add at least 0.0003 to the value to get the correct value.", "O += pInt(U, mod(iSampleRate,1e4)+0.0003);", "", "Or if you add also the year, month, day to the shader it will display 2016 instead of 2017.", "Line: 77", "//O += pInt(U, iDate.x+0.00007);   U.x -= 2.5;", "O += pInt(U, iDate.x);   U.x -= 2.5;", "O += pInt(U, iDate.y);   U.x -= 2.5;", "O += pInt(U, iDate.z);", "", "U.y += .8;", "U.x += 5.0;", "ollj, 2017-04-17BufC of", "https://www.shadertoy.com/view/ldByDw", "has a shader that optimizes on precision fith focus on being modifiable/commented.", "", "later versions of opengl support double-types, using twice as many bits, that sure helps precision.", "but as long as your fragment shader is not calculating physics, you do not need double precision to display a value. the 5th decimal place is VERY irrelevant for most cases that do not calculate physics.", "ollj, 2017-04-11no, because some values, including iGlobalTime, are rounded to 3 decimals.", "yes. there are ways to display 4th and 5th digit with better precision, by using binary search instead of loops, by using floor() instead of mod, by avoiding exp() and pow() .", "...", "", "but beyond the 6th decimal you get more issues with the limits of 16bit floats than with your webgl calculation rounding errors for a display, and you also get issues with sometimes not displaying a numeral-glyph, but instead displaying a glyph that is \"out of bounds\" and barely worth catching.", "", "in the end, for a front-end display, the 1e-5'th decimal just is not worth displaying precisely.", "i tried anyways:", "", "https://www.shadertoy.com/view/Ms2cWz", "ollj, 2017-04-11some browsers webgl implementations are significantly worse in mipmapping.", "nabr, 2017-04-04Hello", "I want to do some math, you got a good solution here for display numbers, i will use it. is their a way to compute/display more fractional part whether it is thrown away by a shader current code stops at the 4th place behind the point. M_PI 3.1415926535897932384626433832795", "Thank you.", "stb, 2017-03-01I just updated Firefox, but the artifacts remain on this system (Win10, AMD R9 380). A new AMD driver came out, so I might try that as well (though I hate to update video drivers if not absolutely needed).", "However, on my Win 8.1 Laptop with integrated GPU (also AMD), there are no artifacts.", "FabriceNeyret2, 2017-02-26are the line artefacts now away ?  (I fixed, but since linux never got artifacts... :-) )", "GregRostami, 2017-01-01Thank you Fabrice. This is VERY useful.", "stb, 2016-12-30It might be improved just a bit. It's hard to tell.", "FabriceNeyret2, 2016-12-29so you see the artifact as well :-( .", "at least one bit is logical: the square footprint of letters overlap up to the middle of the others.", "", "hmm, may be its still the lod discontinuity at tiles border. -> I now compute the lod before the clamping. is it better ?", "otaviogood, 2016-12-29I'm confused about why there are lines. They go away if texture2D uses -100.0 for mipmap value, but I don't think you should need that. The letters have a bit of padding, so they should be able to mip map down a little. Also, I see line artifacts cutting vertically right through the middle of the letters. I'd expect artifacts to be on the edges. So I'm confused.", "FabriceNeyret2, 2016-12-27not MIPmapping is bad CG programming: you want small characters to be correct (this shader is meant to be reused).", "Moreover it's important to understand what's wrong. I know that cross-border MIP-mapping can look bad on some systems to I solved it here. It this was not the cause here, then it's useful to find the problem, either to solve it or to document precisely a new compatibility issue. If you are the only one to see it, it might be related to your config: are drivers up to date ? or might they be flawed on your board ?", "Now if somebody also have the problem with another config, I'm interested to know.", "stb, 2016-12-27Just as bad, I'd say. Artifacts are still visible even when using negative mipmap bias values.", "At least the char() function all on its own is just fine.", "Are you using mipmapping for resolution-adaptive aa? If so, going with linear sampling and smoothstepping the distance channel is also effective.", "FabriceNeyret2, 2016-12-27nearest cause aliasing at small scale (like life icon).", "", "->  I computed manually the MIPmap level.", "is it better ?", "stb, 2016-12-26I don't know what you mean by \"icon stage.\" I have my profile set up to see only shader previews before clicking on them, and I don't see the border artifacts in the the preview for this shader. But when actually running the shader, the artifacts are pretty obvious in both windowed and full-screen mode.", "FabriceNeyret2, 2016-12-26mhhh, maybe the mipmap-bug-at-borders again, when letting the system guess the LOD. When do you see that ? only at icon stage, or more ?", "stb, 2016-12-26Are there supposed to be very fine-lined boxes intersecting the chars? Might want to go with linear sampling for iChannel0...", "MrJaidyn, 2022-11-02nvm", "MrJaidyn, 2022-11-02how do you download it? im new", "yah, 2022-10-08Beautiful", "igordata, 2022-07-25amaizing", "VPaltoDance, 2022-07-24Amazing!", "naomirross, 2022-07-17I love this wallpaper! But this is the only I one I've downloaded that doesn't play in motion. It just shows a picture of it, any help?", "FabriceNeyret2, 2022-06-16next task ;-) :", "https://twitter.com/benjaminbardou/status/1537321132822609921", "Glue_Eater, 2022-06-12Damn nice!", "darrylkid, 2022-06-09inspirational", "BlackSquare, 2022-06-09The thing of beauty!", "I_am_6r1d, 2022-06-08Beautiful!", "deni_de, 2022-06-08gogh, where are you now !? <3", "pmw123, 2022-06-07This could go on a wall as a piece of art! Amazing.", "AShaderBeginner, 2022-06-07Awesome!", "MyGoodSir, 2022-06-07wow, this is gorgeous. absolutely stunning.", "naomirross, 2022-06-07This is so cool!!!", "Toro, 2022-06-06Fresh air!!!! Excelent!!!!!!", "WingStone, 2022-06-05So cool!", "Andre, 2022-06-03Wow, realy nice and original, I love it.", "ifaswind, 2022-06-03Amazing!", "amhall, 2022-06-03This is amazing!", "rfcdk, 2022-06-02Every time I open shadertoy I go \"wow they did this\" and today was no different. This piece is amazing and truly inspirational", "kaylent, 2022-06-02Amazing!", "ttoinou, 2022-06-02Incredible, and only two hundreds lines of code...", "TobberH, 2022-06-02Whoa, so cool! Love the style!", "aiekick, 2022-06-01very original. nice one", "jt, 2022-06-01wonderful!", "mlkn, 2022-06-01So good!", "pudding, 2022-06-01Absolutely stunning! And thank you for the code comments - it makes it much more straightforward to learn from your work.", "Krafpy, 2022-06-01So beautiful !", "letail, 2022-06-01That's amazing!", "Draedrus, 2022-06-01Wow, I really love this one !!!! <3", "EliotB, 2022-06-01I thought of Van Gogh on the very first look. Very well done!", "0b5vr, 2022-06-01interesting style + very well made!", "mrange, 2022-06-01This is very cool.", "BigWIngs, 2022-05-27Oww wow. Very original as well as beautiful!", "blackjero, 2022-05-27Very interesting!", "lz, 2022-05-25So nice.", "ocb, 2022-05-25so well done !", "iq, 2022-05-25Really nice!", "dean_the_coder, 2022-05-25Awesome!", "kastorp, 2022-05-25wooow!", "scry, 2022-05-25Beautiful!", "FabriceNeyret2, 2022-05-25wow, very cool !", "", "( I wonder if there would be an easy way to click to see the strokeless version ;-) )", "kroltan, 2022-05-25Wow, I'm lost for words. It's gorgeous!", "Shane, 2022-05-25Beautiful -- One of my favorites in a while. I made a similar one of these ages ago (based on an image I saw somewhere), but was too lazy to put in the greenery, and it didn't turn out as nice.", "iY0Yi, 2022-05-25So unique. Very nice.", "jorge2017a2, 2022-05-25very amazing design and very pretty!!!", "menis, 2021-12-19cool", "redorav, 2021-12-10Come on Chewie, hit the hyperdrive", "cmarangu, 2021-11-29bloodnook lol relatable", "dean the coder yeah! agreed!", "[https://www.shadertoy.com/user/kuvkar]kuvkar[/url] MTFBWYA!", "DS222, 2021-11-25Very nice!", "camelCaseSensitive, 2021-11-02Now this is podracing!  Awesome job, I had this N64 game as a kid so this is nostalgic for me", "ocb, 2021-10-26WOW super cool. I love the cinematic.", "dean_the_coder, 2021-10-22Love that camera change when it zooms towards you!", "spenceryonce, 2021-10-22I am so impressed by this. This is so amazing. Such a great job.", "oneshade, 2021-10-21You could also add the \"common\" tab and set iTime proportial to the frame count to avoid blur artifacts for laggy computers (like mine ).", "#define iTimeDelta 0.01", "#define iTime (float(iFrame) * iTimeDelta)", "pyBlob, 2021-10-21Setting iChannel1+2 in BufferA from \"mipmap\" to \"linear\" and increasing steps greatly reduces artifacts.", "bloodnok, 2021-10-21This looks similar my 3rd year graphics project from 21 years ago, except mine took 6 hours to render a few hundred frames at a fraction of this resolution and didn't have a cool spacecraft.", "oneshade, 2021-10-21Speeeed!", "iapafoto, 2016-11-06very cool ! Very nice speed effect", "ollj, 2016-11-03i can do without motion blur, thanks.", "kuvkar, 2016-11-01thanks for the comments! I made the blur a bit better, now when UFO flies over the camera there's a nice blur (though it's super fast so it might be hard to detect)", "flockaroo, 2016-11-01cool!", "dila, 2016-11-01really nice. i love how it opens out after a few seconds. the light hitting the floor looks great", "Imsure1200q_1UWE130, 2016-11-01cant access the shader. My Device Is A Desktop, Platform Is Windows 7, Browser Is Chrome, My Computer Is Fast, and still this is not working!", "Shane, 2016-11-01Awesome. I love fast camera scenes.", "aiekick, 2016-10-31very nice", "iq, 2016-10-31Very nice!!!!", "kuvkar, 2016-10-31glad to hear!", "public_int_i, 2016-10-31Shading and geometry looks great, camera work is perfect and it runs very well.", "jarble, 2020-11-07It renders even faster if you replace distance < MinimumDistance with distance < MinimumDistance*totalDistance*4.0", "djsega34, 2019-05-10yes", "CaliCoastReplay, 2016-08-11That's ridiculously good", "jt, 2015-11-16Nice one!", "dila, 2015-05-31nice!", "K5Doom, 2015-02-23Can someone explain line to me? I'm not sure that I understand why it titles the 3d space :/", "Line 55:", "// Folding 'tiling' of 3D space;", "z  = abs(1.0-mod(z,2.0));", "", "thanks!", "knighty, 2013-07-30cool!", "fb39ca4, 2013-07-13Is it just me, or is the \"dir\" input of the getLight function unused?", "marcusjt, 2013-04-21Amazeballs!", "PauloFalcao, 2013-04-15Very cool, and fast!", "weyland, 2013-04-14wow, the rendering and menger shapes are sick in this one, thanks for the info", "atomek, 2013-04-13magical!", "iq, 2013-04-13very cool! i love the idea of bending the ray as you march", "CPU, 2013-04-13also only around 50FPS in Firefox !", "CPU, 2013-04-13I'm getting a full vertical retrace clamp to 60FPS on Chrome/AMD 6850! Nice work!", "Syntopia, 2013-04-13Weirdly, this shader runs faster under Chrome with Angle than on Firefox without Angle (26 FPS vs 16 FPS on my Geforce 310M)", "technochroma, 2023-06-10Used your shader here:", "\"Crystal Iridium Caves\" https://www.shadertoy.com/view/DlKXDK", "\"Eighth Dimensional Paths\" https://www.shadertoy.com/view/mlGSRK", "\"River of Vital Breath\" https://www.shadertoy.com/view/ctGXzV", "", "Thank you so much, I am new to graphics coding and am learning a ton already about raytracing, rendering and coding.", "technochroma, 2023-05-18Super awesome!", "spooneystone, 2023-04-08absolutely wild!", "Shane, 2016-03-03I love this. Fantastic atmosphere.", "iapafoto, 2016-03-01super ambiance", "iq, 2016-03-01Very nice", "jt, 2016-03-01Yeah, I would like too look around...", "eiffie, 2016-03-01Nice remixes. I wish there were a few more camera paths or angles.", "pyBlob, 2021-06-15Doesn't work in Firefox on Linux. The problem is the the line \"vec2 d = vec2 (1./0., 0);\" in the dist-function. Using \"vec2 d = vec2(0);\" instead works totally fine, as you are always setting d.x before first use.", "quizcanners, 2020-03-0160 FPS, WOW!", "lookfuyao, 2018-04-09nice and amazing", "nothingX, 2018-04-09so diao", "piotrekli, 2018-03-03Can be fixed by setting webgl.bypass-shader-validation to true in about:config", "piotrekli, 2018-03-03Doesn't work on Firefox+Linux+Nvidia proprietary:", "Unknown error: 0(79) : error C7532: global function uintBitsToFloat requires \"#version 330\" or later", "... or #extension GL_ARB_shader_bit_encoding  :  enable", "... or #extension GL_ARB_gpu_shader5  :  enable", "Optimus, 2018-02-24I really love this!", "Nrx, 2015-02-06So, I just changed the way I define the tint (it now depends on the object space, so voxels don't have their tint modified when objects move) ;).", "Nrx, 2015-02-06@Dave_Hoskins: Ah? It still works for me (Chrome & Safari on Mac)... beside, I haven't changed anything in the code for more than a month, so I'm surprised it suddenly crashes . (I also tested the code in a native iOS and Android app, in direct OpenGL: no problem either...)", "", "Regarding the tint of the voxel: it was actually a design choice (= the base color depends on the object, but the tint depends on the actual position of the voxel in the world space, not in its object space)... but I agree it's a bit weird, and I should change it ;).", "", "If you have any hint on what could make the shader crash on your side, don't hesitate to let me know, I'd be glad to fix it!", "Dave_Hoskins, 2015-02-05This seems to be crashing the latest Chrome. Still works in Firefox though, which is pretty unusual.", "It's very good BTW! (I did  notice the blue square colours don't move with them on the floor)", "iapafoto, 2014-12-29cool it works on firefox !!    he he hello ghost !!!", "iapafoto, 2014-12-29...and the answer is not ! ... but I just have a laptop so it may not be a reference. Thank you for trying", "Nrx, 2014-12-29@iapafoto: Ah? It works fine on my 2 machines (Mac & Windows)... I just reduced the number of steps in the rendering loop (RAY_STEP_MAX), hopefully it will improve things on your side! (or not!? )", "iapafoto, 2014-12-29Arg... it crashed here now :  chrome windows laptop. Possibly too much operations with ghost ! Sorry for having asked !  :/", "Nrx, 2014-12-29So... I added a ghost! ;)", "Happy New Year everyone!", "Nrx, 2014-12-26If you guys check on Mac and Windows, you'll see that the little glow effect doesn't work on Windows, apparently. I guess there is something wrong with ANGLE, but I couldn't figure out what, and didn't find a way to fix the problem - if someone has any idea about it, I'd be glad to learn what's wrong! (Note: the glow is just defined by number of steps used in the rendering loop; on Windows, it seems this variable isn't updated properly and always contains the same value ;()", "Nrx, 2014-12-23Ah ah! Yes, I should add ghosts! :P For now, I added pacgums!", "aiekick, 2014-12-22cool ^^", "iapafoto, 2014-12-22We want ghosts !!", "iq, 2014-12-22Very nice!", "turboplay, 2022-08-05I want to use it commercially", "LosMikEos, 2021-03-30Hi @ehj1,", "this is a very stylish shader, great work!", "May I ask you to build on your code and maybe use it in a commercial project?", "Many thanks & kind regards,", "LosMikEos", "pixeljig, 2020-10-14*In this app: https://appgallery.huawei.com/#/app/C102997863", "pixeljig, 2020-10-14Can it be used in a commercial project?", "greggman, 2020-07-29Thanks! I used it here", "Daryashd, 2020-06-15Great effect! I have a commercial proposal for you, if you're interested - it will be great to cooperate) I represent a company of Belarusian programmers", "heliumsoft, 2017-08-29Very nice.", "Can I use your shader in a commercial project?", "justicle, 2014-05-22Great stuff!", "ehj1, 2013-06-08The horizontal noise is created with perlin noise generated by code borrowed from: https://github.com/ashima/webgl-noise/blob/master/src/noise2D.glsl", "Elsio, 2023-06-13Interessante, n\u00e3o sei se proposital ou n\u00e3o, o tecido interage (enrosca) quando muda de fullscreen para window e vice versa", "AobaMoca, 2023-03-16Amazing!!! just so little code makes such great picture!", "volkovino, 2022-08-07Super cool!", "Rackdoll, 2022-07-22Holymoly thats insane!", "pyBlob, 2022-07-21@Rackdoll, the code embraced by \"#if 1\" is responsible for pinning the top-most row to a fixed position (depending on id). When you remove that section, or change it to \"#if 0\", the jelly cloth starts falling freely. Personally, I like to use \"if (false) /*newline*/{...}\", because it doesn't use the pre-processor and you can easily enable/disable the code by commenting out the line containing \"if (false)\", or make it dynamic by using a variable instead of a literal.", "", "Yes, this algorithm is based on verlet integration (update only uses two latest positions and acceleration). However, the cloth constraints are solved using a simple relaxation technique (move points 10% in the direction enforced by each constraint). Also note, that thanks to verlet integration, the corrections performed by the constraints implicitly change the velocity.", "", "About the next step, this is one of the most impressive cloth on shadertoy: curtain and ball", "Rackdoll, 2022-07-21What purpose does the #if 1  have here ?", "Would this algorithm be a verlet integration implementation btw ?", "", "It's really nice!", "jorge2017a2, 2022-07-21Very interesting, I hadn't seen it!", "pyBlob, 2022-07-02Mouseable:", "vec4 react( in vec4 p, in vec4 q, float rl, float k ) { /* ... */ }", "", "vec4 react( in vec4 p, in vec2 qid, float rl )", "{", "return react(p, getParticle(qid), rl, 0.1);", "}", "", "// ...", "vec4 mouse = abs(iMouse) / iResolution.y;", "if (iMouse.z > 0.)", "if (distance(p.xy, mouse.xy) < 0.035) p = react(p, mouse, 0., 1.);", "wj, 2022-07-02@tomkh something seems to be wrong with the constraints in your optiomized impl: pull up one of the bottom row nodes and it (and the connected nodes) will stay suspended in the top area - where it doesn't belong", "drone1, 2016-04-22@tomkh Re your link: I click compile and get an error: \"run-time error: glCapture: FBO for texture 1 depth attachment error\"", "jt, 2016-01-27Very usefull!", "tomkh, 2016-01-23It looks nice, but rendering speed is really far from optimal. Not everything can be done with just fragment shaders.", "Try here the same algorithm/colors, but with efficient rendering.", "eiffie, 2016-01-22The physics are easy so you could do a cloth as large as the texture but then how would you go about rendering it in 3d? For a single strand you could march thru the particles like this: Check the distance your ray misses the first particle, divide it by the \"resting length\" rl and step that many particles. For a 2d cloth I am lost on which way to march. You could follow the gradient but you would swirl into local mins.", "aiekick, 2016-01-22", "iapafoto, 2016-01-22I was waiting to this one, Cool !", "raja, 2016-01-22It will be good to able to drag & deform the cloth with mouse :-)", "stb, 2016-01-22cool", "eiffie, 2016-01-22I upload a rope then see iq uploaded cloth before me- seems about right.", "dila, 2016-01-22cool physics sim!", "Dave_Hoskins, 2016-01-21Aww, he's changed it, now I look like I was making things up.", "poljere, 2016-01-21haha yes! Inigo add mouse controls come on!", "Dave_Hoskins, 2016-01-21More like jelly!", "Very cool - and short code. I want to use the mouse pointer on it!", "oneshade, 2021-04-08Love the effect!", "HLorenzi, 2017-11-13@ShnitzelKiller I...don't remember either :P  But it seems the magic happens because of that `if` condition that sets `edge` to 1.0 -- it detects an edge when the last distance evaluation was small enough, but only when the current distance evaluation went larger than it again (or as you call it, it detects when the ray grazes the surface).", "ShnitzelKiller, 2017-11-13i don't understand why lastDistEval doesn't always just end up being tiny by the time the ray hits its final destination. That is, it doesn't seem to differentiate between grazing and hitting a surface, when we specifically want the minimum grazing distance. That's why in my edge detection code, I had to make sure to maintain 3 consecutive distance values and only update the minimum if there was some increase afterwards. But this just seems to work.", "ollj, 2017-09-06You made a portal and this effect. Clearly you are going for Close up eyes with a handsome guy inside a comic, where everything's rotoscoped and super 80's", "jt, 2017-06-20looks amazing", "jackdavenport, 2016-03-25Oh wow. That looks awesome!", "rubixcom, 2015-07-16Re-enabled the shadows in your code and looks great and performs pretty well. Not sure why you choose to remove them. IMHO the light source doesn't need to move with the camera, looks better.", "fb39ca4, 2013-12-20I cannot see the shadows.", "Antonalog, 2013-12-18that does look far nicer than toon shaders based on polygons, because curves!", "vgs, 2013-12-15This is AMAZING! Good job!", "HLorenzi, 2013-12-14Thanks, guys! And there you go, shadows! It actually turned out pretty nicely... when the big ball covers the small one... oh yeah.", "iq, 2013-12-14Oh yeah!!!! FANTASTIC", "", "(add shadows pleaseeeeee, for full awesomeness!)", "Dave_Hoskins, 2013-12-14Great work!  the wobble.", "jt, 2022-11-23Looks great!", "hornet, 2022-10-26now do the glitch in 3D", "UrbanClubProfessional, 2020-10-17I remixed it here: https://www.shadertoy.com/view/WdGyDw", "blue1784, 2020-09-17awesome", "MacSlow, 2019-04-05Oh... that is sweet!", "visuality, 2019-04-05Love it great stuff!", "stb, 2017-01-01Yep, fixed! Interesting and strange.", "mlkn, 2017-01-01Cool!", "shau, 2017-01-01Very cool effect", "iq, 2017-01-01Fixed indeed. And it looks pretty good!", "tdhooper, 2017-01-01Thank you for the help everyone, fixed <3", "iq, 2017-01-01The shader doesn't compile because you are using the same name for variables and functions. These 4 are the problem: \"flip\", \"progress\", \"spinBlend\" and \"shapeBlend\". Fixing the names to not clash fixes the shader.", "stb, 2016-12-31I'm getting an error as well: \"identifier represents a variable, not a function.\" I'd like to find the cause, but 12k+ chars are 11k too many to wade through atm :/", "poljere, 2016-12-31This shader does not compile on Windows+Chrome. The error reported from webgl does not really help spot the issue, however it seems like a variable may be being misused, a wild guess would be the variable \"time\". Please take a look, if you need help debugging on windows we can help you.", "Jespertheend, 2016-12-31really nice!", "Aredeonmaniak, 2022-11-23It's a bit like a business city.  If anyone likes to read about business, I recommend reading about smart packaging because it's very helpful: https://authena.io/smart-packaging/", "cmarangu, 2020-04-16This one is one of my favorite shader on this site, (there are alot) although it has bad 3.6FPS it at least runs (unlike that clouds one which doesnt even render)", "", "and it combines to really cool effect the voronoi and the infinite city in a really neat way", "", "btw thanks for teaching me that u can use a Sampler2D as source of white noise, wish i had thought of it...", "duvengar, 2018-02-07Wow awesome", "ollj, 2017-07-03there are no taxi drivers in diagonal taxicap city.", "jt, 2015-11-18Brilliant!", "4rknova, 2013-09-07Awesome shader TekF! Well done!", "frankwer, 2013-09-04Very good. Looks good and runs smooth.", "TekF, 2013-08-30That's a useful tool! Thanks.", "gleurop, 2013-08-30The way I got the number was using my distance field debugger: https://www.shadertoy.com/view/4dlGzX. 0.3 was the largest I could go without getting any errors. I thought it was 0.5 the first time because I forgot to select the noise texture.", "TekF, 2013-08-30...And now the black spots are fixed! (Caused by flat regions in the voronoi giving (0,0,0) for the normal, which became a NaN when normalized.)", "TekF, 2013-08-30Another update! - Fixed some precision issues so the default view can show the city stretching off into the distance. Still has some black error pixels I haven't tracked down.", "Dave_Hoskins, 2013-08-30Brilliant!  it.", "TekF, 2013-08-30UPDATE - I've added a first person view at street level. Uncomment the #define at the start of the code. It's a bit shaky because it tries to find the closest street.", "TekF, 2013-08-30gleurop - actually, you're right, it does look better with .3, but I don't understand why!", "TekF, 2013-08-30Thanks for the suggestions! It was 2am when I finished working on it, so I didn't have time to implement the ambient occlusion or camera movement I had planned.", "", "iq - I was planning to use the full distance field, your solution is much simpler!", "", "gleurop - Can you explain the maths behind this? I found an error in the code which meant the max gradient from the voronoi is sqrt(2), so I've corrected by 1/sqrt(2) and .3 doesn't look any better to me.", "iq, 2013-08-30If you add this to line 193, it looks super cool  result *= clamp(1.5*pos.y,0.0,1.0);", "iq, 2013-08-30If you add this to line 193, it looks super cool  result *= clamp(1.5*pos.y,0.0,1.0);", "movAX13h, 2013-08-30wow, that two customizations really add to the coolness of this shader  especially moving and zooming by mouse!", "gleurop, 2013-08-30Actually, it should be 0.3 in order to completely fix it. There is still those occasional black areas though where the distance is very small for a section of the field and the iterations all get used up.", "gleurop, 2013-08-30Damn good idea indeed! You can reduce the errors in the distance function by replacing line 103 with float f = (.3-v.z)*0.5, f is twice as large as it should be.", "WouterVanNifterick, 2013-08-30Awesome!", "", "To make it a bit interactive, insert something like this at line 147:", "rayStart.x += iMouse.x*0.1;", "rayStart.y += -9.0+iMouse.y*0.05;;", "movAX13h, 2013-08-30aaaah, damn good idea!", "scanlime, 2020-08-24yo dawg i heard you liked pixel shaders", "pix, 2019-01-15Many mysteries! Where is the number of triangles defined (if it exists)? How is their connectedness defined (if it exists)? I can't see those defined - so I can only assume it's magic.", "jt, 2018-01-23neat!", "ollj, 2016-04-17as far as performance concerns, sure. this has its inefficient loops, most likely would be better in opencl. but this shadertoy app still run good on a fg960 all a mattr of time.", "ollj, 2016-04-17oh awesome. how well would it be able to rasterize multiple planes of 33x33 verteces, or 17x17 vertexes. because, you can defime many surfaces as rgb dispacement map, where r=x,g=y b=z displacement of vertex that defines a plane.", "", "while this sounds like a silly approach compared to storing a 2d or 3d distance field, both are convertible formats  and it has its advantages, like cheap mipmapping of meshes because the mesh is deformed by a 2d rgb image.", "", "its used a lot like this: and has its applications and editors: http://wiki.secondlife.com/wiki/Sculpted_prim", "ewerybody, 2013-12-16pcheew .. its not made to perform well is it?! ;D", "PauloFalcao, 2013-03-20It's very slow on my machine but I love it anyway", "_pwd_, 2013-03-19simply wow!", "CPU, 2013-03-19it's this kind of insanity that revives my faith in humanity! Aaaamazing work bro, as usual!", "jt, 2021-11-23Awesome!", "(enchancedRayMarcher hast Artifacts (blocky cracks, on windows), though - but vanillaRayMarch works fine)", "pyBlob, 2021-11-18I like it, tough the \"enhanced\" marcher has some popping artifacts on the near crater edge (have to use iResolution.y instead of 350. for fullscreen). Also, compared to the vanilla raymarcher, it stops too early, so that shadows are not as strong. Other than that, good job. I was surpised, that this converges in less than 20  iterations even for the stupid simple vanilla marcher.", "dean_the_coder, 2021-11-18That's really cool.  Especially like the way the scene lights up when the sun becomes visible.", "spolsh, 2021-04-07Moody, thanks for sharing!", "jt, 2021-04-03awesome", "msm01, 2021-04-01This is so good-looking, and the code seems useful too (for beginners like me, anyway).", "In fact you're doing such a great job, I'm probably gonna share this (with proper credits, obviously) in a blog post one of these days. Keep it up !", "DEMERCY, 2021-04-01fantastic", "FabriceNeyret2, 2021-04-01nice !", "iq, 2021-04-01Looks truly fantastic!", "", "I good some speedup (enough to make smooth in fullscreen) by adding a couple of bounding plane to the crater, so the raymarcher doesn't have to march so much. In geometry_trace:     float t_min = 0.001;", "float tb = (2.1-o.y)/d.y;", "if( tb<0.0 ) { mp.dist = INFINITY; return mp; }", "t_min = tb;", "And in softShadow:     float tb = (8.0-ro.y)/normalize(rd).y;", "if( tb>0.0 ) end = min( end, tb );I also got some tiny speedup by using a vanilla/silly raymarcher, but that's probably more architecture/GPU dependent.", "iton, 2021-12-14wow, its amazing", "Hatchling, 2021-12-09The motion blur really adds a lot to making this appear natural.", "mrange, 2021-12-01Very nice. (late to the party)", "Gazetkomat, 2021-11-30Now this looks really awesome. It's mesmerizing and addicting. I love it!", "Bowser, 2021-11-25Great", "DS222, 2021-11-25Great Job", "spenceryonce, 2021-10-22This is nuts!!!!", "vortex, 2015-09-14This is crazy! It is sooo beautiful!", "HamzaHutchinson, 2015-08-08Love the motion and the colors! Well done!", "834144373, 2015-08-07I like this kind of dreamy effect.it can let me have more beautiful", "It is to my taste.", "weyland, 2015-08-07ridiculously fantastic!", "ttg, 2022-08-07@ofmarconi It is in fact possible by a trick - click&drag from inside the shader canvas to outside.  After this, when mouse is over the canvas, it continues to track.  Click on canvas will clear it again so \"left click action\" in a game or similar interactive would need to come from keyboard instead.", "FabriceNeyret2, 2022-08-07this is not possible in Shadertoy.", "ofmarconi, 2022-08-07Is it not possible to just track the mouse? I would like to use his movement without the click.", "FabriceNeyret2, 2021-02-22just the moment the button has been clicked   vs currently pressed.", "oneshade, 2021-02-22Whats the difference between \"down\" and \"clicked\"?", "FabriceNeyret2, 2021-02-17@aiekick: but then, convertly, it would mean shaders you can't use on an ordinary PC.", "ollj, 2021-02-17time for some very basic gesture-recognition", "", "the simplest UI works best; Arranging menu items in a spiral has proven to a VERY fast, very non obstructing and comatible UI.", "", "https://www.reddit.com/r/prey/comments/6kzs5d/i_just_want_to_make_a_shoutout_of_how_awesome_the/", "", "https://twitter.com/gamemakerstk/status/862043084200325123", "aiekick, 2021-02-16vertexshaderart support the multitouch inputs", "FabriceNeyret2, 2021-02-16... and MouseMotion with no button at all.", "But I'm afraid the constraint was compatibility with all devices, comprising phone and tablets.", "aiekick, 2021-02-16he could be cool to have a iMouseButton. who can be an int for know what is the mouse down button", "", "Could be something like that", "iMouseButton == 0 => left button", "iMouseButton == 1 => right button", "iMouseButton == 2 => middle button", "aiekick, 2021-02-16he could be cool to have a iMouseButton. who can be an int for know what is the mouse down button", "", "Could be something like that", "iMouseButton == 0 => left button", "iMouseButton == 1 => right button", "iMouseButton == 2 => middle button", "ollj, 2020-11-29i analyzed this mess of incompatibility, and added a function for backwards compatibility to pre-november 2020 iMouse.zw:", "", "https://www.shadertoy.com/view/tsKBz1", "", "previously the sign of iMouse.z was always the same as the sign of imouse.w", "(or only one of them switched? onMouseDown?)", "BUT many shaders cared to distinguish these 2 cases. and most of them are very broken now.", "", "because now (since 2020-11) the 2 signs are independent, as .z and 2 signs are now 2 bit that distinguish 4 states (of whom 1 never occurs)", "", "so, quite often, one of 2 signs is negated, and the case handling of older shaders is broken.", "ttg, 2020-11-16Nevermind, I've got some other bug, sorry for the noise.", "ttg, 2020-11-16Weird, one of my shaders (https://www.shadertoy.com/view/tdSfWW) only goes back to the original behavior with #define iMouse vec4(iMouse.xy,iMouse.z,sign(iMouse.z)*abs(iMouse.w)).  Why isn't that the same as the one I gave below?", "ttg, 2020-11-16Unfortunately the change has broken many interactive shaders.", "The compatibility shim looks like #define iMouse vec4(iMouse.xy,sign(iMouse.z)*abs(iMouse.zw))", "", "Reasons for old shaders to not work:", "- Overzealously checking iMouse.w>0. when just iMouse.z>0. would have sufficed", "- Assuming that abs isn't needed on iMouse.zw when iMouse.z>0.", "", "Maybe when a change this major is introduced, old shaders using the feature (test for \"iMouse\" string in the source) need to get compatibility shims inserted in an automated fashion by the administrator?  It's a little risky but would have caused less breakage than just changing it across the site with no fixes.", "FabriceNeyret2, 2020-11-14Greaaat !", "another demo of the new feature here: https://www.shadertoy.com/view/3dcBRS", "iq, 2020-11-14Added button_click event in the sign of w", "P_Malin, 2014-09-18Great! Thanks for fixing this.", "P_Malin, 2014-09-15lol, I always fail at BBCodes", "P_Malin, 2014-09-15Currently, if you click but don't move the mouse the xy component (red circle) doesn't get updated.", "Could the xy component please get updated on this first click as well as when you click and drag? I can't imagine any situation where the current behaviour would be useful. I don't imagine this change breaking any existing shaders either (but it would fix some funky behaviour in a couple).", "", "i.e. in shadertoy.js:", "", "this.mCanvas.onmousedown = function(ev)", "{", "var pos = getCoords( me.mCanvas );", "me.mMouseOriX =                     (ev.pageX - pos.mX)*me.mCanvas.width/me.mCanvas.offsetWidth;", "me.mMouseOriY = me.mCanvas.height - (ev.pageY - pos.mY)*me.mCanvas.height/me.mCanvas.offsetHeight;", "me.mMousePosX = me.mMouseOriX;", "me.mMousePosY = me.mMouseOriY;", "me.mForceFrame = true;", "me.mMouseIsDown = true;", "//        return false; // prevent mouse pointer change", "}", "WouterVanNifterick, 2013-12-02There's a bug in ShaderToy in getting the mouse position.", "", "This is how to reproduce it:", "", "1. Resize the browser window so that the left pane doesn't fit vertically, and a scrollbar appears.", "2. Scroll the window down a bit, but keep the canvas in view.", "3. Try to move the balls around.", "", "Expected: ball follows cursor", "", "What happens instead: when the pane is scrolled down 50pixels, the ball appears 50 pixels above the mouse cursor.", "", "Another issue is that a right-click on the canvas pops up a default browser menu. It's probably nicer when that's suppressed for the canvas.", "rogerallen, 2013-03-12Thanks for creating this--now it is obvious how things work.", "Leria, 2020-07-19Oh, so good !", "jt, 2018-01-27awesome!", "kery73, 2016-01-13This reminds me \"2001 : Space Oddysey\"", "and, 2014-09-18@iq: 256 doesn't even compile on my machine. In a normal code (not a shader) you don't need to compute any history, but in this case you loose a lot of interesting stuff for sure. But as long as you compose and tune everything for that it is ok.", "Running IIR filter multiple times doesn't do much, in most cases it would be the same as running a single filter with a higher Q. It would basically amplify frequencies near the cutoff more.", "As for FIR then it's a completely different filter by nature and it doesn't have any properties of IIR - it doesn't resonate. Running IIR filter the way it's done in this shader is not the same as running FIR filter of the same window size.", "There are cases when you would prefer FIR filters like mixing, where you don't want any resonant properties and don't want to have any phase shift.", "and, 2014-09-18@nimitz: Yeah, I discovered 60 sec limit why my 3 minutes track suddenly stopped  So I had to cut to 1 minute. But it's probably not a bad thing, because anything longer with enough effects fails to compile randomly on different systems.", "fizzer, 2014-09-17Awesome music!", "iq, 2014-09-17That's a nice (and expensive trick). Doing the IIR_COUNT history 256 sounds awesome by the way. At which point is it better to run an IIR multiple times rather than simply running a long FIR filter?", "Dave_Hoskins, 2014-09-15You're running an IIR resonant filter... in a shader?!  Brilliant!", "nimitz, 2014-09-15Sounds side is just perfect, great job.  If only we had more than 60 seconds max.", "PauloFalcao, 2014-09-15So cool!", "iq, 2014-09-15Ohhhh yeahhhhh AND!!", "ttoinou, 2018-07-20Featured in this video  !", "BigWIngs, 2016-11-24That's amazing!", "w450468524, 2016-09-12Beautiful scene! And by the way, thanks for the website link provided in shader code", "CaliCoastReplay, 2016-08-10Oh my God, this is transcendant", "jt, 2015-11-19Cool!", "w23, 2014-03-11Thanks !", "Added some info and enabled controlling the sun with a mouse.", "EvilRyu, 2014-03-11gorgeous indeed! I love this!", "Antonalog, 2014-03-08yeah! wow! who needs skyboxes anyway!!", "iq, 2014-03-07ohhhhhhhhhh!", "", "I can describe it: \"gorgeous!\"", "akufishi, 2018-05-14Thanks for feedback :3", "FabriceNeyret2, 2018-05-12some remarks:", "1.0 - (smoothstep(r*r, r*r + 60.0, dot(d, d)));", "= smoothstep(60., 0., dot(d, d) - r*r );", "", "vec3(0.0, 2.0, 4.0) = vec3(0,2,4)", "FabriceNeyret2, 2018-05-12nice, but bottom half is missing", "-> pow parameter must not be negative. make it pow(abs(uv.y - 0.5)", "JetStreamSham, 2023-03-25Oh this amazing!", "catafest, 2022-11-23with a little dust will be like James Webb Space telescope", "czerenkow, 2021-11-03Cool! Waiting for the moon!", "altera0, 2020-08-06just wonderful...", "altera0, 2020-04-30wow wonderful.", "FabriceNeyret2, 2019-12-11for more about Airy pattern, see also https://www.shadertoy.com/view/tlc3zM", "codebro, 2019-03-14Thank you for this, it taught me how to make exactly the right pointy ellipse (spectrum/flare/not sure the name) I needed.", "ollj, 2019-02-23you can remove the flicker of a star-twinkle and ensure that any hairline has at least the width of 1 pixel (or any static amount of pixels), by using invertval arithmetic of tartan/chord of:", "https://www.shadertoy.com/view/4ttBD4", "which makes (loopless constrained) interval sequences, and easily normalizes them onto any lattice.", "", "without the multi-tapping of a laplache-matrix.", "", "you could make a star twinkle in the pattern of black keys on a piano, but more likely you just want to mask it down toa [010] pattern", "khlorghaal, 2018-11-26im totally stealing that blackbody color technique", "ollj, 2018-10-13you do not need im, instead swap mulriplication inputs, to invert the matrix operation on a vector.", "FabriceNeyret2, 2018-02-09thanks !", "wow, reading the code, I see that I was just a beginner in 2013 :-p", "( but Shadertoy was created in 2013 too, anyway :-D )", "ABizard, 2018-02-09Line 41 :", "float margin = .2;", "if (pos!=clamp(pos,vec2(-margin),vec2(iResolution.x/iResolution.y,1.)+margin))", "solves the disappearing stars problem", "cailuming, 2017-12-14https://www.shadertoy.com/view/XllBzs I think may be you can help me to find the problem", "LukeRissacher, 2016-08-08Cool - reminds me of the Hubble deep field", "FabriceNeyret2, 2015-02-18ok (I didn't even know why I did it).", "coyote, 2015-02-18Just a small correction: in the last line set the frag color, don't add to it. On computers that need initialisation of variables (including frag color) the results are corrupted.", "FabriceNeyret2, 2013-10-16added toggle tab to switch between 1 star and animated field", "FabriceNeyret2, 2013-10-15added toggle T to tune PlanckSpectrum(starTemperature) instead of RGB", "FabriceNeyret2, 2013-10-15NB: SPACE key  toggles from red star to blue star.", "FabriceNeyret2, 2013-10-15Note that here, R,G,B are ultra narrow filters point-sampling the star spectrum.", "For larger filters one should band-integrate the Planck spectrum.", "iq, 2021-07-19Very nice!", "jarble, 2019-11-27Here's an edit of this shader.", "jarble, 2019-11-27I edited just one line of code, and it got even better:", "https://www.shadertoy.com/view/tsKSWG", "Hexus, 2018-02-04Ah, I think I get it. You can write read from the same buffer after each frame, hence float iter = mod(float(iFrame),13.0);", "Hexus, 2018-02-04I have the same question as sasmaster, how is this done only in Buf A? Does Shadertoy somehow allow multiple passes or read-writes on to the same buffer?", "sasmaster, 2017-10-16I am sorry for a probably \"stupid\" question: Where is the ping-pong between flood textures? Or I don't completely understand how the ShaderToy works?", "TornAsunder, 2016-10-06Awesome demo of Jump Flooding! Animated rainbow distance fields for nyan cat was inspired", "paniq, 2016-03-16removed the bitpacking", "Shane, 2016-02-29This is pretty cool.", "stb, 2016-02-28^signed, non-normalized 16 bit channels  It was announced here: https://www.shadertoy.com/changelog", "paniq, 2016-02-28@demofox: really? that wasn't documented anywhere. I thought WebGL can just do RGBA8 so I coded for that case. so they're actually RGBA16F?", "anastadunbar, 2016-02-27Really informative.", "demofox, 2016-02-25Hey Paniq, I noticed you were packing data as if you had 8 bits per channel.  Did you know that the off screen buffers are 16 bit float per color channel and not limited to 0 to 1?  Do you treat it as 8 bit because it isn't guaranteed on all platforms (mobile?) or something?", "paniq, 2016-02-24with 4 buffers at 60fps you can do at most 16x16. 30 fps and using 3 buffers, 64x64. 20 fps, 128x128.", "stb, 2016-02-24Excellent  Really shows how the technique could be useful. When I first saw this shader earlier, I almost passed it by without understanding what it was doing :S", "Could this be accomplished in one frame, using more buffers (maybe at slightly reduced quality)?", "paniq, 2016-02-24@stb i liked the nyan cat idea so much, i made it the official demo", "stb, 2016-02-24I just tested it on the nyan cat... and it works! Thanks for sharing this interesting technique!", "paniq, 2016-02-24Note: actually not slow at all, but a single buffer takes 12 steps to complete, and so the demo is snapshotting at 12 FPS.", "AdrianTheFrog, 2022-10-24Good job, runs 144 fps at 64x on a 3060.", "", "Also, the physics don't work on a 144hz monitor (or anything other than 60), the simulation speed is messed up.", "Mzilv, 2022-06-02YOU WIN", "uusfiyeyh, 2021-08-26https://imgur.com/a/3V6jQB4", "FabriceNeyret2, 2021-06-13is your platform webGL2 complient ? test here: https://webglreport.com/?v=2", "", "texture must work ( be sure to apply it to a vec2 coordinate, + optional float LOD bias ).", "now your platform may not support multibuffers.", "Navi, 2021-06-12@FabriceNeyret2 I tried replacing texelFetch with texture and textureLod, the shader dont work with these.", "Can you have a look ?", "", "One of the program where i am trying to implement this game, but texelFetch is not supported by the platform.", "FabriceNeyret2, 2021-06-11if U is integer, make it ( vec2(U) + .5 ) / resolution and it works even with interpolation.", "", "in the other shader you mention : I don't really understand, and don't see the relation with texture().", "morimea, 2021-06-11@FabriceNeyret2 only when buffer with nearest filter, else float-bits will be ruined https://www.shadertoy.com/view/tlfBRB image in comments there", "FabriceNeyret2, 2021-06-11you can always replace texelFetch with texture(iChannel, vec2(U)/resolution )", "Possibly textureLod( . , . , 0. ) or texture ( . , . , -99. ) or just with MIPmap off , if fetch is at fix location.", "Navi, 2021-06-11How to achieve the same results without using texelFetch ?", "GregRostami, 2020-07-22Super Amazing, and really FUN!!", "Foxman1998, 2020-02-19It's funny how this is ACTUALLY easier than the original game.", "PlNG, 2019-12-02Most excellent", "rmmcal, 2019-11-30", "", "I enjoyed the game, thanks for sharing", "Shane, 2019-11-28I started at 2 with the intention of stopping at 16, and before I knew it...", "", "In regard to the rendering itself, it's worth putting a system together that you're comfortable with that allows you to render layers in a standard vector graphics style: Shadow, stroke, main layer, etc. Everyone prefers different things, but for me, it's the following formula:", "// Render a distance field layer.", "newCol = mix(oldCol, newLayerCol,", "(1. - smoothstep(0., smoothingFactor*(1. + blurAmount), distFieldVal - size)*", "transparency);", "mathmasterzach, 2019-11-28Thanks for all the comments! Glad you all enjoyed the game.", "", "@Plento Those big blobs are definitely a source of stress. Nothing is scarier than seeing the 1024 starting to escape off the side of the screen.", "piratehurrdurr, 2019-11-28I love it!", "morimea, 2019-11-28very interesting idea!", "cool", "FabriceNeyret2, 2019-11-28added in the shadertoyGames list ( #131 ) ;-) https://shadertoyunofficial.wordpress.com/2017/11/11/playable-games-in-shadertoy/", "wyatt, 2019-11-28This is sweet!!", "Plento, 2019-11-27", "Those big blobs are unforgiving...Great job!", "jorge2017a1, 2021-02-11nice colors ... very good job !!!", "bonitos colores ... muy buen trabajo !!!", "scratch13764, 2018-10-30For me this runs faster than most 3D projects.", "cailuming, 2018-10-04it is so cool but cost", "archee, 2018-03-01It's nicer with randomized monte carlo.", "vec4 rrr = textureLod( iChannel0, (fragCoord.xy +0.5+3.3137*float(a)+fract(float(iFrame)*0.125))/iChannelResolution[0].xy, 0.0  ).xzyw;", "ollj, 2016-04-17on too spherical objects, this might be a better effect for motion blur than for depth of field.", "pedian, 2015-07-31How do you do the numbers??", "Zavie, 2013-10-29Yep, I confirm I don't have the bug anymore.", "iq, 2013-10-28My original idea was to do that, yes. But 40 samples turned out to be very noisy. I might enable it again and leave it disabled by default.", "mmalex, 2013-10-28looks fantastic with fixed contact shadows! really beautifully 'tweaked'. I couldn't resist cranking the SPP from 40 to 240 - looks beautiful but my poor little intel HD graphics started melting...", "iq, did you try making one or more of the balls motion blurred like the original Cook image? not enough samples?", "iq, 2013-10-28Fixed contact shadows for non ANGLE setups, and the view-dependent-diffuse too.", "Zavie, 2013-10-28More on this: on Chrome with ANGLE, I have contact shadows but still the anisotropic feeling. On Firefox with ANGLE, it goes on a shader compilation journey, never to be seen again.", "Zavie, 2013-10-28The lighting looks wrong on my machine (Firefox/Chrome, native OpenGL): almost no contact shadow, and the diffuse seems to behave in an anisotropic way. Also, the colors look way too saturated to me. ;)", "ollj, 2017-08-25this should look good if you overlap 4 grids, with half-tile-width offset over 2 domains.", "it should fill in many concave parts.", "dila, 2016-05-06It's amazing how you can make something so simple looks this good. I love how it fades into the horizon. Up close they kinda remind of cacti", "ollj, 2016-05-06brrrrrrrrrrrrrrrt", "Dave_Hoskins, 2014-09-18I think I found the issue here, it was about the nested ifs and breaks. Replacing the breaks with continue fixes it here, and possible add a 'if (ic == 0.0)break; at the top of the ray-cast loop.", "(I tried to post the code but it told me I could not post HTML in comments for some odd reason!)", "Dave_Hoskins, 2014-09-18Unfortunately it doesn't work in Windows' FireFox 32.0.1. Not here anyway, I get vertical strings of thin hair like structures.", "But it works on an old iPad 2 on iOS 8!!!", "mmalex, 2014-07-25this looks so trippy with a long exposure time & sped up camera... eg", "float time = 75.0 + 56.0*(iGlobalTime + 3.0*(0.5/24.0)*rr.x) + 50.0*mo.x;", "dila, 2016-12-31What audio?", "dila, 2016-08-08very convincing", "mu6k, 2016-08-01well for starters, since you already started with shaders, I can recommend iq's articles http://www.iquilezles.org/www/index.htm", "", "collab? sure I'm down with it in general, it's good to get other points of view on the same thing, but I don't really know how we can make it work.", "CaliCoastReplay, 2016-07-30I studied computer science as well, I was a high school academic prodigy at one point - so I've had the *intro* math for 3d computer graphics, basic linear algebra and multivariable calculus and optics - but I picked the wrong university and then never finished my studies in 3d graphics.  It's not easy and it's certainly not intro-level math in any sense!", "", "It's time!  I want to learn how to do 3d masterpieces like you and others do!  Anything you would recommend?", "", "Do you want to collaborate on some future shaders?  I'd be happy to help with whatever you think you might need.", "mu6k, 2016-07-29Thank you, those are really kind words, but there are plenty of others that do much more impressive things here.", "", "I picked up the most knowledge about shaders here on shadertoy by looking at other people's work. I've also learned a few things by talking with people at demoparties. There were some articles I've read over the time. ect. Just keep on doing what you're doing now, you'll get there. I wrote my first line rasterization 10 years ago. It sucked. It used floating point. Eventually I heard about Bresenham's algorithm. And so on. It's a journey.", "", "In case you're wondering I've studied computer science & engineering, nothing related to writing shaders or 3D.", "CaliCoastReplay, 2016-07-29Apparently the odds are pretty good!", "", "You are a true master of shading...I would love to learn from your work!  I'm an FX enthusiast but so far I've lacked the serious 3D training of other shader developers, but this year I hope to correct that.  Your shaders are brilliant...where did you study?", "mu6k, 2016-07-28No problem, feel free to remix. It's nice to see different takes on the same ideas. I actually saw you remixed my shader after I posted this. In my mind: what are the odds", "CaliCoastReplay, 2016-07-28Hey, thanks for re-remixing the shader!    Love the hint of the picture in the background!   I hope you don't mind me remixing your work as well!  #shaderlife", "dean_the_coder, 2020-10-23I'm a bit late to the party, but this is awesome!", "ttoinou, 2018-07-21Featured in this video  !", "ingagard, 2017-10-30Fucking love it!", "ttoinou, 2017-08-10Thank you !", "P_Malin, 2017-08-09Sure, that would be great!", "ttoinou, 2017-08-09Hi, Could I use yours shaders to make a Shadertoy Best Of video ? Thx", "P_Malin, 2016-09-10Now supports VR mode", "P_Malin, 2015-08-23Thanks encore2097. The glowyness is a very hacky approximation. Comment out line 596 to disable it.", "After the ray from the camera hits the scene, another ray is cast from the light to the point that was hit - see the function GetSSS(). The distances between these 'exterior' and 'interior' intersection points are used to calculate the amount of fake glow. The density of the glow material can be controlled with the negative number on line 382. Scaling the result of the GetSSS() function will adjust the glow brightness.", "P_Malin, 2015-08-23jackdavenport try changing line 21 to this:", "vec3 vLightPos = vec3(0.0, 1.8, 0.0);", "jackdavenport, 2015-08-22Really awesome, love the subsurface scattering. As a bonus, you should make the point light inside the pumpkin cast shadows on the ground. I'd love to see the face projected onto the floor", "encore2097, 2015-08-07@P_Malin: awesome! How did you get the interior light glow? Do you think it can be expanded to pumpkin itself it give it slight luminescence?", "dila, 2015-07-31superb!", "archee, 2014-11-02Beautiful. The subsurface scattering looks great, but it probably isn't real.", "Optimus, 2014-10-30Awesome!", "Dave_Hoskins, 2014-10-30A bit of added fun:-", "[156]\tfloat fMouthDist2 = length(vPos.xy + vec2(0.0, sin(iGlobalTime)*.2 - 1.5)) - 2.0;", "", "literally!", "Vlad86, 2014-10-29Amazing!", "Harha, 2014-10-28Awesome!", "vgs, 2014-10-27Simple and awesome! Loved it!", "Dave_Hoskins, 2014-10-27Nice lighting. Love the glow.", "P_Malin, 2014-10-27Thanks for the comments. And thanks Otavio for the fix! I fixed a couple of other issues causing sparkling. Hopefully it should look better now.", "If the hackathon is an annual thing then I'll be in SF for GDC. If its on I'll definitely try and make it as long as I don't have any conflicting work related shenanigans.", "otaviogood, 2014-10-27you have mysterious black dots caused by divide by 0. Spec: Windows 8, nvidia, chrome. fix:", "Line 370: return 1.0 / ((dotNV+0.0001) * (1.0 - k)+k);", "Nice shader. See you at the next hackathon!", "iq, 2014-10-27Wow this is really good! Fantastic rendering!", "andremichelle, 2020-07-18Very cool! We are using a simplified version (without the guy) in our new EDM video as a background. I could not find any license, so I just hope it is okay. If you like different credits, ping me.", "", "https://www.youtube.com/watch?v=NLeBjqI9Bqc", "yetsun, 2020-01-08super cooooool", "ttoinou, 2018-07-20Featured in this video  !", "ttoinou, 2017-08-10Ok great thx. Yes will do ^^", "fizzer, 2017-08-09@ttoinou: Hi! Yes, you can use it. Thanks for asking! Please post a link to the video when you're done, if you can, I'd like to see it.", "ttoinou, 2017-08-09Hi could I use your shader in a video (best of of shadertoy) ? Thx", "BGC, 2014-02-20Wow! Super cool! Love the dancer's moves.", "demofox, 2014-02-19amazing!", "nuclear, 2014-01-23hund!", "fizzer, 2014-01-18inferno: Hahaha that's brilliant! I don't own Flame or Smoke myself otherwise I would totally try this out and make something with Matchbox. Looks like you have a nice site for shader-sharing there =)", "inferno, 2014-01-18just awesome!", "i made a matchbox version out of it. this version will work inside Autodesk's Fame / Smoke compositing software. if you want to see what that means, please take a look: http://logik-matchbook.org/shader/the_popular_demo", "frankwer, 2014-01-11Damn, u did it. Looks supercool!", "Artoo, 2014-01-10love it", "Vlad86, 2014-01-10This is awesome!!", "Danguafer, 2014-01-10lol The movement is so funny  Made me watch it again!", "fizzer, 2014-01-08Oops, I missed Lokno's comment somehow... Thanks for that, it seems to work well!", "fizzer, 2014-01-08Ah yes, this was a mistake on my part. Thanks for the tip! Also many thanks for the reference, I will try their variant out when I have time.", "iq, 2014-01-07Lokno, John D. Cook found that formula already in 2010, which is better behaved than mine: http://www.johndcook.com/blog/2010/01/20/how-to-compute-the-soft-maximum/", "iq, 2014-01-07Oh, the shader looks wrong in Linux, because when the reflection rays hit nothing the character gets full of noisy tiles of black and white. Initializing vec2 cp in line 274 to vec2(0.0) fixes the problem!", "PauloFalcao, 2014-01-05Wow! Awesome!!!", "Lokno, 2014-01-05Awesome work! Takes a lot longer to compile the HLSL when the mosaic code is uncommented (I tested the output locally), so I assume that's the reason it fails. I tried some optimizing but couldn't get it to work, but I actually sort of like the smooth model better. I did come up with a version of smin() that uses one less exp(), though:", "float smin(in float a, in float b, in float k) { return a - log(1.0+exp(k*(a-b))) / k; }", "iq, 2014-01-05oh . my . gosh !!!   You have nailed it down!  Fantastic, impressive!", "avix, 2014-01-04makes me so nostalgic ;D", "super cool", "may i suggest to put some musax in Ichannel0", "Zavie, 2014-01-04\"Tonight, tonight...\"", "rabit, 2014-01-04Awesome!", "Dave_Hoskins, 2014-01-04Beeeeeautiful!  it.", "fizzer, 2014-01-04Here's what it looks like with the mosaic effect:", "sylvain69780, 2020-05-12Very usefull un my case, just what my wife is asking for. A romantic message.", "michaeltorresor, 2019-02-22Wow!", "Sabouh, 2019-02-01Very nice !", "nabr, 2018-08-12it's been a while", "catafest, 2018-01-23Good idea , very good https://www.youtube.com/watch?v=aNR4n0i2ZlM . Thank's . Best regards.", "bjporter, 2017-03-14This is absolutely amazing, and great video tutorial too. You are really passionate about teaching this to people", "", "There are a few suggestions to make this teaching more powerful:", "", "#1 - Way more comments in the code.", "", "#2 - Show code examples while you're showing the 3D changes in the vide. Maybe splash some code and overlay the video, showing how the math is translated to code.", "", "", "#3 - Maybe include multiple iterations of this process as defines, so people can see how you built up the heart, and see how your thinking was, with comments.", "", "Thanks again IQ", "dila, 2017-03-09i also enjoyed the video", "iq, 2017-02-28fixed, line 50", "ollj, 2017-02-27i do not like the discontinuity along the mirror axis. doesnt smoothen well.", "BigWIngs, 2017-02-24Cool! The animation really looks like a beating heart.", "poljere, 2017-02-24Love the animation iq", "aiekick, 2017-02-24lol, nice", "shau, 2017-02-24Great tutorial. Loving the new UI. Where can we get shadertoy t-shirts", "Shiv2k3, 2022-12-30How would I get the gradient of multiple layers of the noise?", "obecerra, 2020-09-13`// replace this by something better. really. do`", "use the hash function to generate your own LUT and then use that LUT and something like texelFetch when you are using noised() from then on @trsh", "trsh, 2019-11-09`// replace this by something better. really. do`", "", "Can you advice something. Maybe that uses a seed?", "iq, 2017-05-15There's no need for hash derivatives. Furthermore, the hash doesn't have a derivative, it's a replacement for a LUT.", "ollj, 2017-05-14how about a hash function that also returns its first derivative?", "ollj, 2017-05-14noised() would be less source codeif it would iterate trough 2 arrays (gradients , projections). Would that cause compilers to unroll loops into unnecessarily inefficient code with a lot of mod()?", "", "maybe it finds some nite identities or approximations to use arrays.", "ollj, 2017-05-14[This comment has been hidden by the shader author]", "Yrai, 2017-05-14Another tool in a toolbox", "FabriceNeyret2, 2021-01-06we are currently at 378 chars :-p", "FabriceNeyret2, 2021-01-04golfed down to 465 chars ( from 1471 ;-) ) : https://www.shadertoy.com/view/ttdyRs", "FabriceNeyret2, 2021-01-04thus some simplifs:", "[url]", "float GearFunction(vec2 uv, Gear g)", "{", "float r = length(U),", "a = atan(U.y, U.x),", "p = g.gearR - .5*g.teethH +", "g.teethH/(1.0+exp(g.teethR*sin(g.t + g.teethCount*a))),", "gear = r - p,", "disk = r - g.diskR;", "f = g.gearR > g.diskR ? max(-disk, gear) : max(disk, -gear);", "}", "", "", "float GearDe(vec2 uv, Gear g) {", "float f = GearFunction(uv, g);", "return f / fwidth(f) * length(fwidth(uv));", "}", "", "#define GearShadow(U, g) smoothstep(.4*g.diskR, 0., abs(length(U+.1) - g.diskR))", "[/url]", "FabriceNeyret2, 2021-01-04note that GearDE can be replaced by the very cheaper return f / fwidth(f) * length(fwidth(uv));  ;-)", "AntoineC, 2020-01-14@Zordher: const added. @roman380: unused texture removed.", "Zordher, 2020-01-13Some devices require loop index to be compared with constant expression (tried with an Ipad). Adding const in line 81 fixes it.", "Good job, I like it", "gadget100, 2019-12-01Very cool!", "If you make the following changes, it will generalize to many more gear geometries (as long as the tooth counts stay even):", "", "92        inner.t = (outer.gearR-inner.gearR)*(outer.teethCount/outer.gearR)*t;", "", "94        DrawGear(color, uv+(outer.gearR-inner.gearR)*vec2(cos(t),sin(t)), inner, eps);", "roman380, 2019-12-01Cool! You don't need a texture in iChannel0, do you.", "AntoineC, 2018-04-10Thank you for your kind comments!", "rigel, 2018-04-04I  this !", "ocb, 2018-04-03I want this watch!", "iq, 2018-04-03Pretty!", "dila, 2018-04-02very nice", "FabriceNeyret2, 2018-04-02nice !", "duvengar, 2018-04-02Nice", "AntoineC, 2018-04-02qwertsol: fixed!", "flockaroo, 2018-04-02very pretty!!", "Shane, 2018-04-02 This is really well done.", "chao_mu, 2018-04-02Awesome! You definitely improved on your inspiration.", "KyleHeller, 2022-11-01Incredible.", "sohale, 2022-06-17Wow", "blackbird, 2022-05-17Cool * 100", "aiekick, 2022-05-02", "stegu, 2022-05-01I applied the furrier transform to this, and now my palms are hairy.", "(Yes, I should go to sleep. Sorry.)", "aiekick, 2022-04-30yes not sure if you can reduce loop iterations, here this is a contant stepping ray marsher", "Pixsaoul, 2022-04-29I converted that onto hlsl so that Unity can run it and created a Skybox from it (tweeked the speed a bit), it looks amazing !", "However the performances on Android are so bad I don't think I can keep it :'( I'll try to remove some of the complexity to allow it", "Pixsaoul, 2022-04-25Thanks ! I'll do it for sure =)", "aiekick, 2022-04-24with credit", "aiekick, 2022-04-24yes you can !", "Pixsaoul, 2022-04-24wow that's so nice ! can I work from this to create the background animation for my custom game ?", "Shane, 2016-04-23It's a great result. I like the look of randomized, contorted repeat objects, but they can be difficult surfaces to hone in on at times.", "aiekick, 2016-04-22thanks, i just re use the code of shane, the only difference was the use my df func from my shader fur space 2", "CPU, 2016-04-22Very nice!", "iq, 2016-04-22Pretty!", "miolian, 2022-02-19This is very nice. The math is still a bit opaque to me, but I found that varying the distance from origin ```float dp = length(p)*sin(iTime*0.125)*(1. + cos(iTime)*.5 );``` gave me a more broader sample of the different angle/size/wave value combinations.", "lunartides, 2022-01-27Shadylady said \"botanical fireworks,\" and I reiterate that comment. So enthralling.", "playbyan1453, 2021-11-29love it, it look beautiful", "jniac, 2021-11-15absolutely gorgeous, very very nice, glad to have been there to witness such beauty", "", "(hnh comment about dutch painter is very relevant too)", "leon, 2021-10-27Thanks everyone", "ttoinou, 2021-10-26Soooo trippy ! Congrats", "mouseDown, 2021-10-26Stuff like this is such an inspiration. Thank you!", "Andre, 2021-10-24very noice", "yhm138, 2021-10-24magic!", "hnh, 2021-10-22Wow - reminds of the floral paintings of the \"Dutch golden Age\",", "e.g. https://en.wikipedia.org/wiki/Willem_van_Aelst", "Shadylady, 2021-10-22wow it's like botanical fireworks <3", "spenceryonce, 2021-10-22This is absolutely stunning!", "luckyballa, 2021-10-21Amazing!", "MacSlow, 2021-10-21Magnificent!", "imprity, 2021-10-20so beautiful", "paniq, 2021-10-20i love the classical vibes of this", "KylBlz, 2021-10-20looks like alien flowers O.o", "0b5vr, 2021-10-17extraordinary", "iq, 2021-10-15Beautiful!", "leon, 2021-10-14Thanks again Fabrice! I've updated the code.", "The smoothing function is used to blend material indices, that is used to offset hue.", "The mouse control is drooling colors with the frame buffer but it's fun", "ocb, 2021-10-14Beautiful! Flower power.", "FabriceNeyret2, 2021-10-14just for the pleasure of exploration :-) :", "buffA, after vec3 pos :", "vec2 M = 6.28*(iMouse.xy-.5);", "ray.xz *= rot(M.x), pos.xz *= rot(M.x);", "ray.xy *= rot(M.y), pos.xy *= rot(M.y);", "", "( hey, one more gl_ below :-) )", "FabriceNeyret2, 2021-10-14note that you can loop on floats, and avoid all the casts like float(index)/float(steps);", "", "more remarks:", "", "y don't need normalize since already normalized  (x,z are orthogonal and unitary )", "", "tint = vec3(.5)+vec3(.5)*cos() :  vec3 useless", "", "dot(reflect(ray, normal), vec3(0,1,0)) is reflect(ray, normal).y", "", "Common:", "", "your 2 functions smin and smoothing seems identical", "", "hash33 unused", "", "a gl_ still hide in Image tab ;-)", "leon, 2021-10-14Thank you for your comment Fabrice, I've updated the code", "Thanks all", "Dave_Hoskins, 2021-10-14I'm sure I've seen wallpaper like this. Very very tasty indeed! Love the colours.", "pelleman, 2021-10-14Very beautiful! For those with high-end GPU, I would suggest to try to increase \"steps\" variable in Buffer A, line 83, from 20 to 40 or 50, for an even more colorful experience. It almost looks like video from Coral reef, just missing some fish and waves/movement.", "shau, 2021-10-14beautiful", "FabriceNeyret2, 2021-10-14note that it's a bad idea (for compile time and perfs) to treat the hit shading *inside* the loop, since the compiler unroll loops (and functions). \u2192 just break, then treat after the loop. ( set a hit flag if necessary ).", "", "detail: pow(x,.5) is *alot* more costly than sqrt().   pow does exp(a*log(b)).", "", "detail: in shadertoy, it's better to not use the gl_ variables.", "Unix, 2021-10-14Rien qu'en regardant le shader je me suis dit : ca c'est du l\u00e9on ! ;-) Bravo !", "FabriceNeyret2, 2021-10-14very cool ( the floral way )", "Tater, 2021-10-14woah, this one is my favorite.", "rigel, 2017-09-15This shader is absolutly amazing. I had a dive like this once, and the only thing different is that they flap they wings much more slowly.", "Dave_Hoskins, 2015-11-02Great Mantas! - & movement.", "crazy_lzk, 2015-11-01good", "BigWIngs, 2015-10-30Damn!", "Bers, 2015-05-01Masterful combination of modeling+domain warping+smooth min, awesome animation, clever usage of repetition & variation, and proper choice of colors+lighting. Feels organic, especially given the technical constraints. Might not showcase new concepts (or did I miss any?), yet I am truly amazed by execution & artistic quality. I did not see many other shaders with that kind of polish.", "P_Malin, 2015-04-30Great ray tracing!", "demofox, 2015-04-28Amazing!", "coyote, 2015-04-28Beautiful!", "poljere, 2015-04-07Looks really good dude!", "aiekick, 2015-04-06amazing", "Lio, 2015-04-06it's magic!", "iq, 2015-04-06Looks super amazing!! (and it runs pretty smoothly even in my slow computer!). Welcome Davide!", "", "(can add fake shadows on the sand?)", "vgs, 2015-04-05Welcome to shadertoy! awesome shader!", "OttoVonBismarck, 2015-04-05Nice Davide!  Decreasing the sphere radius gives you tad poies, or something more suggestive.", "dakrunch, 2015-04-05Thanks Max!", "true, i am still figuring out what is the highest i can push that without too many artifacts.", "", "perhaps a squashed sphere is not the best prim.", "Good to see you on ShaderToy!", "mplanck, 2015-04-05dakrunch! it's great to see you on shadertoy.  I'm getting a ray marching artifact that seems to go away if I change line 167 to", "", "dist += ret.x * .2", "", "I'm on windows/chrome/gtx 780.", "ollj, 2021-08-12oh wait wrong shader", "ollj, 2021-08-12ooh this improved so much in refraction and in reprojection.", "", "all accumulating shaders do fail a bit when the view size changes (to fullscreen and back, but also from vertical to horizontal aspect ratio (quite common for tablets))", "you could OPTIONALLY store that state (previoussize.xy) in one pixel and scale the reprojection by the difference between previoussize.xy and iResolution.xy, and then do write Resolution.xy into that buffer.", "ttg, 2021-08-06Oh, lots of colormatching goodies here.", "michael0884, 2021-08-06Dispersion*", "michael0884, 2021-08-06Implemented a more physically correct refraction", "TambakoJaguar, 2021-08-02Wow, very nice simulation!", "oneshade, 2021-07-31Great!", "TheNosiriN, 2021-07-31wow", "ollj, 2021-07-30the function inverse() is not too backwards compatible (webgles300 only)", "", "for more backwards compatibility, the mainimage part of", "https://www.shadertoy.com/view/wlf3RB", "has the segment:", "", "#if ( __VERSION__ < 300 )", "...", "#endif", "", "with commented out explicit matrix inverses up to mat4()", "jeyko, 2021-07-30oh wow", "morimea, 2021-07-30@michael0884 works now, amazing!", "iapafoto, 2021-07-30wow", "michael0884, 2021-07-30@morimea, I fixed those issues. Should work on opengl then?", "morimea, 2021-07-30@michael0884", "does not work in OpenGL", "two errors:", "1. BufferB line 298 delete path[cpath+1] = ro;", "cpath+1 is LASER_PATH that when path[LASER_PATH]", "", "2. BufferB line 76 processHit function:", "out vec3 rd should be inout vec3 rd because you use rd in logic", "ENDESGA, 2021-07-30The preview shows something really quite colourful and spectacular! But it doesn't seem to work in my browser (Firefox, Arch Linux). It's only the grey scene, white ball, and white laser", "thecrazy, 2021-11-15Man, I wish I knew how to make stuff like this. Amazing.", "guowei, 2018-06-17great!", "MacSlow, 2018-05-19Such volumentric phenomena are pure bliss to watch!", "mmerchante, 2018-01-04This is amazing!", "ocb, 2017-05-20Beautiful and fascinating!", "Duke, 2016-12-17to Artonn: I wrote you a letter.", "Artonn, 2016-12-17We would very much like to come in connact with you, please write to rollabolla@outlook.com", "Bers, 2016-09-05Superb! And quite fast, even in full screen on my old laptop.", "gPlatl, 2016-09-05Looks fascinating!", "Suggestion: replace 2 lines for different zooming when pressing '1' or '2' or '3' ...", "key += 1.2*texture2D(iChannel1, vec2(KEY_2,0.25)).x;", "key += 1.7*texture2D(iChannel1, vec2(KEY_3,0.25)).x;", "Duke, 2016-09-03@scarletshark:This effect wasn't in the final release, so I made it an optional.", "@RavenWorks:I don't have vr device so I don't know how it work on it. But few month ago I made a vr version of the Type 2 Supernova shader just for test.", "RavenWorks, 2016-09-03Er, sorry, let's make that link clickable... https://www.shadertoy.com/view/Xly3RR", "RavenWorks, 2016-09-03I was dying to see such an ethereal shape up close, so I ported this shader to VR  https://www.shadertoy.com/view/Xly3RR", "scarletshark, 2016-09-02Why did you comment out tonemapping?  It looks great with this filter!", "iapafoto, 2016-08-28beautiful nebula", "revers, 2016-08-07Amazing shader!", "Duke, 2016-06-18to Shane: Ok, thanks, I'll take take this into account in the future.", "Shane, 2016-06-15@Duke", "I've only just come across your question. Yeah, that's all I meant: col = pow(col, vec3(1./2.2))... or col = sqrt(col), as a rough equivalent.", "", "The following code really shows the difference between gamma correcting colors and leaving them untouched. The gamma corrected bottom half of the canvas represents what your eyes expect to see.", "void mainImage( out vec4 fragColor, in vec2 fragCoord ){", "", "vec2 uv = fragCoord/iResolution.xy;", "fragColor = mix(vec4(1, 0, 0, 1), vec4(0, 1, 0, 1), uv.x); // Darker colors in the center.", "if(uv.y<.5) fragColor = pow(fragColor, vec4(1./2.2)); // sqrt(fragColor); // More natural in the center.", "}", "vortex, 2016-06-11This is way better than those on science shows!", "Duke, 2016-06-01Do you mean something like fragColor = vec4(sqrt(clamp(sum.xyz, 0., 1.)),1.0); ? I've added filmic tonemapping for comparison.", "Shane, 2016-06-01By the way, gamma correcting the final value will even out the dark end of the spectrum and bring out the transparency a bit more. I haven't always done it in the past, but I did in my last transparency example and it made a difference. Of course, that would mean adjusting the colors to give the nice deep color effect on display here, but it's worth the trouble. Just a thought.", "Duke, 2016-05-30to all: Thanks for the feedback", "to otaviogood: I've been looking for an opportunity to achive such filaments procedurally, as they are often found in space. I am currently working on a more advanced version of this shader with shadows, but it is not yet fully ready", "Shane, 2016-05-30Really pretty. Now you can make your own desktop wallpapers.", "otaviogood, 2016-05-30It's impressive that you have such sharp filaments but can still ray march it with a good framerate. I guess I'm familiar with those noise functions, but still surprised it works so well.", "iq, 2016-05-30It's beautiful indeed", "XT95, 2016-05-29Fantastic!", "stb, 2016-05-29beautiful", "oneshade, 2021-06-07Since you can't move the output of the SDF, you instead need to move the point in the opposite direction so that relative to the circle, it is as though the circle moved:", "float movedCircle = sdfCircle(point - circlePosition);", "socalledsound, 2021-02-13I think? I figured it out, from another lovely sketch of yours, if you happen to see this ever and confirm, I'd be grateful.  In that one you have a bunch of bubbles, and I think what you do is mask the color transfer (probably not the right lingo?)?  Is that what the f is doing here?", "", "", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;", "vec2 offsetLeft = vec2(p.x + 0.5, p.y);", "vec2 offsetRight = vec2(p.x - 0.25, p.y-0.2);", "float d1 = sdCircle(offsetLeft,0.15);", "float d2 = sdCircle(offsetRight,0.15);", "", "", "vec3 color = vec3(0.2 + 0.2*p.y);", "", "", "// coloring", "vec3 col = vec3(1.0) - sign(d1)*vec3(0.9,0.1,0.7);", "//vec3 col1 = vec3(1.0) - sign(d1)*vec3(0.9,0.1,0.7);", "vec3 col2 = vec3(1.0) - sign(d2)*vec3(0.9,0.1,0.7);", "col *= 1.0 - exp(-3.0*abs(d1));", "col2 *= 1.0 - exp(-3.0*abs(d2));", "col *= 2.8 - 0.8 * cos(150.0*d1);", "col2 *= 2.8 - 0.8 * cos(150.0*d2);", "", "float f1 = d1/.15;", "f1 = sqrt(clamp(1.0-f1*f1,0.0,1.0));", "float f2 = d2/.15;", "f2 = sqrt(clamp(1.0-f2*f2,0.0,1.0));", "color += col.zyx * f1;", "color += col2.zyx * f2;", "", "", "fragColor = vec4(color,1.0);", "}", "socalledsound, 2021-02-12I did find that I can add the colors and get the circles, but the colors of the nice gradient get blown out.  I know I should be able to figure this out on my own but.... ; )", "socalledsound, 2021-02-12Thank you for these amazing resources.  I'm trying to wrap my brain around how these work, and wondering...if I want to draw two circles at different, irregular positions...do I need to use varyings?  Or can I just specify and offset for each circle, and then somehow mix the colors generated?  I am able to do that, but the results end up being rather inverse.  I know it's not your job to teach this stuff and understand if you don't have the time or interest to respond, but any help would be appreciated!", "", "", "void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y;", "vec2 offsetLeft = vec2(p.x + 0.5, p.y);", "vec2 offsetRight = vec2(p.x - 0.25, p.y-0.2);", "float d1 = sdCircle(offsetLeft,0.15);", "float d2 = sdCircle(offsetRight,0.15);", "", "// coloring", "vec3 col1 = vec3(1.0) - sign(d1)*vec3(0.9,0.1,0.7);", "vec3 col2 = vec3(1.0) - sign(d2)*vec3(0.9,0.1,0.7);", "col1 *= 1.0 - exp(-3.0*abs(d1));", "col2 *= 1.0 - exp(-3.0*abs(d2));", "// col *= 0.8 + 0.2*cos(150.0*d);", "col1 = mix( col1, vec3(1.0), 1.0-smoothstep(0.0,0.01,abs(d1)) );", "col2 = mix( col1, vec3(1.0), 1.0-smoothstep(0.0,0.01,abs(d2)) );", "fragColor = vec4(col1 * col2,1.0);", "}", "BigWIngs, 2021-08-05@direvin no, but it inspired https://www.shadertoy.com/view/WtfXzB", "direvin, 2021-08-02Did the ayahuasca retreat inspire this ;P", "MrBobaTea, 2021-03-22nevermind, good job", "MrBobaTea, 2021-03-22can you tell me how to use this?", "ttoinou, 2021-03-058K60 render with a modified version", "BigWIngs, 2020-06-22@lumos  Unless its for large events, go ahead!", "Lumos, 2020-06-21Very nice Effekt  Could i use your shader when VJing?", "GregRostami, 2019-02-23OH YEAH!!!", "archee, 2019-02-08Lot's of content for such a small code.", "movAX13h, 2019-01-26Wow, impressive!", "jaszunio15, 2019-01-16So goooooooood, love it!", "iapafoto, 2019-01-15Very cool, so much hexagons variations !", "grinist, 2019-01-15Whoa... My feel-good-shader-of-the-week!", "kaneta, 2019-01-15super cool!", "PauloFalcao, 2019-01-14WOW! Superb!", "Polygon, 2019-01-14This is super trippy!", "aiekick, 2019-01-14super nice", "shau, 2019-01-14Very nice", "Passion, 2019-01-14Wow, this is sick! Runs fast too.", "ocb, 2019-01-14Simple principle, but super nicely done! As usual...", "(for info, line 53, float rand = N21(offs); is not used)", "Eybor, 2014-03-24Awesome !", "avix, 2014-03-23Sweet.", "iq, 2014-03-23Super pretty!", "airtight, 2021-10-04no way! crazy.", "Azorlogh, 2021-07-20The movement took me off guard haha, this felt like watching a painting suddenly animate.", "MacroMachines, 2021-03-03Wow, dude, wow.", "Chrisy, 2018-07-25Projection mapping! vfx style.  love it", "Darthmarshie, 2017-02-10You wizard!", "jt, 2016-03-07wow", "knighty, 2013-08-03pmal, pmal at all!", "bloodnok, 2013-03-23What is this wizardry?!", "iq, 2013-03-18genius", "PauloFalcao, 2013-03-10How ...?! What ?!... Incredible!!! I'm speechless! Awesome work!!!", "Flexi, 2013-03-09awesome sauce.", "jorge2017a1, 2020-05-27A beautiful job ... and interesting!!!", "..........", "Un bello trabajo...e interesante", "reinder, 2013-11-19@Dave_Hoskins: thanks! I create all textures by hand. It's not the most original thing (or shader) to do, but I it is  quite relaxing for some time ;).", "Dave_Hoskins, 2013-11-18Fantastic!", "Do you use some kind of automation to create the textures in this form? Or is it all by hand?", "knighty, 2013-11-18I'm speechless!", "PauloFalcao, 2013-11-18WOW!", "P_Malin, 2013-11-17Wow, you did a great job with this!", "mastakillaman, 2020-07-010__o, cool. Can I use it in my commercial app? Thanks!", "ollj, 2018-10-08this is not how orbitals of EM repell each other", "CheshireCat, 2014-10-24Love it, gotta use in my game", "Flavio, 2014-06-25Insane!", "iterationsteppa, 2014-03-17nice. 2fps though, i think there must be 1000 noise functions displayed as slices simultaneously. could work with 2d noise if they are slices. very nice idea man!!!!", "iterationsteppa, 2014-03-17nice. 2fps though, i think there must be 1000 noise functions displayed as slices simultaneously. could work with 2d noise if they are slices. very nice idea man!!!!", "MichaelM_yaa, 2013-07-04hey I would like to use this on a youtube video could you please let me know if it is ok?  I set it all up in sync with a piece of music i wrote.  let me know  miketest at cogeco.ca  thank you .. I love your work", "jmc, 2013-03-19Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "kgmcnamara, 2013-02-28I just spent ten minutes staring at this...", "huttarl, 2013-02-28Nicely commented code, very helpful!", "XT95, 2013-02-28Awesome !", "Gopher : posts more shaders !!!", "jt, 2022-11-09Very useful! Did you make a 3d variant, by any chance? (Of this asymmetric rounded box - I'm aware of the symmetric rounded box).", "ollj, 2017-04-10[This comment has been hidden by the shader author]", "iq, 2015-07-20added the fix, thanks fernlightning!", "nmz, 2015-07-20Very nice, will use!", "fernlightning, 2015-07-20Within the box the field near the corners doesn't look quite right - I believe a more correct solution would be:", "float sdRoundBox( in vec2 p, vec2 b, float r ) {", "vec2 q = abs(p)-b;", "float d = (min(q.x, q.y) > 0.) ? length(q) : max( q.x, q.y );", "return d - r;", "}", "michaelm, 2015-07-19When you change the roundness value it messes up the radius making it larger or smaller than intended.", "Here's my change to adjust radius by roundness to fix that.", "vec2 ra = vec2(abs(sin(iGlobalTime)) * .50);//0.4 + 0.3*cos( iGlobalTime + vec2(0.0,1.57) + 0.0 );", "float roundness = .3;", "ra = (1.0 - roundness) - ra;", "float d = sdRoundBox( p, ra, roundness );", "destroyboy, 2015-07-18Hi Inigo.", "", "I appreciate your input on my shader code. Although you rewrote it to an extent I hardly understood it at first. I like you managed to get an almost branch free inner function, however the aliasing is wrong and I like the sdRoundbox function you've done here. Its even nicer.", "", "So, I've got a draft where I've used that? Can you see drafts? I use the actual pixel size, you used a magic number 0.03 or something, I've got rid of most of the branches with clamps but anyway....", "", "This is a nice shader. I like the brown color did you look at my toroids shader?", "", "Anyway. Its kind of ironic as I did the cards shader as a demo to get a job and you COMPLETELY rewrote it. You know when things are spinning you can get away with not antialiasing and I thought my approach drawing from the front object had its merits, I don't know how to profile the shaders. I suppose I could measure the watts my computer is using....", "andydevs, 2023-05-09What if you rendered some sandworms?", "jt, 2023-03-31Beautiful", "zproxy, 2017-10-14needs a few palm trees and an oasis", "revers, 2016-09-22Briliant idea for turning turbulent noise into dunes! I wondered once how to make desert sands and failed with this task, but you've done this very well", "iapafoto, 2016-08-29Very interesting curves  <3", "aiekick, 2016-08-29", "iq, 2016-08-29Slow but looking good", "wachel, 2016-08-28Hi CaliCoastReplay,i test on chrome and firefox,but cannt replicate the problem,can you give a detailed description\uff1f", "CaliCoastReplay, 2016-08-28Slow at fullscreen but compelling in its window.  Any chance of further optimization/development?", "louiselessel, 2021-01-24@iq Nice code! How would I go about getting this to sample its color from an image instead of these colors? I was trying to use c to sample in a texture texture(iChannel0, c); but that makes the image take over each cell. The other Voronoi examples on Shadertoy use 4 buffers to achieve this, and that seems a little overkill?", "scratch13764, 2018-10-30how do you make the dots move nicely like that??", "etale_cohomology, 2017-07-27@iterationsteppa That's a pretty good lesson =)", "iterationsteppa, 2016-08-12theres a lot of gpu marching cubes codes avaliable nowdays, multiplies productivity by 100... best lesson i learnd is to only work on projects that have simple time frame for completion", "LukeRissacher, 2016-08-12Cool - I should learn about marching cubes etc., would be neat to make meshes out of distance fields.", "iterationsteppa, 2016-08-11Oh ok that's the very intelligent voronoi. I forgot that version! it's the real maths. indeed it's far advantageous for quality and fun for figuring out maths at home. For some reason it sounds like research i did on marching cubes where i found some optimized vertices that are smaller based on isosurface regularity. http://4.bp.blogspot.com/-wNhPIJpBFgs/UTh86nfuO7I/AAAAAAAAAE4/SgnI4DxTA0g/s1600/interesting+paper.jpg", "LukeRissacher, 2016-08-11In the case of that image I linked it's actually just \"classic\" voronoi, where you take an arbitrary set of points and segment a surface or volume based on which is the nearest point. So if you want to sprinkle a lot of points in one region and not in another, no problem, and you'll get nice organic looking cell variation. I might experiment with that a bit - maybe use a grid like here, but allow 32 points per cell or something and use a weighted pseudorandom field of some kind to choose where point 'n' goes.", "iterationsteppa, 2016-08-11That image is plane distortion through the Y axis, and plane segmentation through the X axis. There seems to be a simple line in the segment delimitations and there is a 3d effect from a complex meshing algorith, perhaps from a modelling program. The voronoi base is only Y plane distortion and X plane segments/discontinuities. i.e. lots of little x graphs in series rather than difficult maths. this is an interesting grid distortion http://maaagdalenka.blogspot.fr/2010/06/marius-watz-2-grid-distortion.html ... it's an iteration of gaussian bell curves each at a different coordinate and size added together to distort the graph. quite tricky! it can be done with if conditions but it would computaitonally steeper.", "LukeRissacher, 2016-08-10@iterationsteppa: Thanks - yeah you can do plane distortion to sort of simulate variable density. What I was hoping for was more like: http://lukerissacher.com/static/images/misc/voronoi.png", "iterationsteppa, 2016-08-10you you can independently squish the underlying grid on x y axes, keeping in mind that every 9 points come from a 9 cells of a grid, you can also squish individual rows and columns of the grids using sin and prln functions.     set mainimage to this to squish it denser.        vec2 d = vec2(fragCoord.x*10.0,fragCoord.y);", "vec2 p = d/max(iResolution.x,iResolution.y);", "LukeRissacher, 2016-08-10Thanks - was trying to understand how to do voronoi in a shader, this was really helpful. Is there a way to smoothly vary the density of the points in this type of grid-based system? E.g. where you could, say, sample 2d perlin noise as a \"density factor\" and have tighter or looser clusters of cells there?", "iterationsteppa, 2014-02-15Nice. For this website, it would be more stable if there was an option to show GIF animation thumbnails or jpegs instead of having 12-15 webgl's on a single page, one of the things that prevents me visiting here more often is that the browse/front page crashes once out of 2 on a gtx 470. thanks for the brain oozage IQ!", "nimitz, 2014-01-19Great shader, a lot of neat little tricks hidden behind the apparent simplicity. Worth studying for any beginner.", "Marcelo, 2021-10-19um mais lindo que outro", "Passion, 2019-08-30Hell yeah this is awesome", "adriancg87, 2019-08-26How can I see the contents of the second channel as a texture ?", "Dave_Hoskins, 2019-08-15Nice lighting, the tunnel reminds me of half-life 2 driving bits.", "supervitas, 2019-08-12Super cool", "clarab, 2019-08-10not sure", "rigel, 2018-03-25Road texture seems so realistic!", "ocb, 2017-12-28Very cool.", "dila, 2016-08-13looks great", "Shane, 2016-07-19I really like this.", "vgs, 2016-07-18nice!", "iq, 2016-07-17Speedy!", "aiekick, 2016-07-17", "RichardKirk, 2023-06-06Here's a fun variant:", "float d = 6.28 * r / float(ITERATIONS);", "...and iterate...", "r += 1. / r - d;", "", "This gives a slightly smaller bokeh with a smoother and brighter outer edge. This is an interference fringe on real bokeh, and not quite the same profile.", "fb, 2019-12-04[This comment has been hidden by the shader author]", "fb, 2019-12-04[This comment has been hidden by the shader author]", "Dave_Hoskins, 2019-12-03I'm sorry, it's the default licence: https://www.shadertoy.com/terms", "fb, 2019-12-03[This comment has been hidden by the shader author]", "Dave_Hoskins, 2017-08-07I've tweaked it so an iteration number change doesn't alter the blur size. Also adjusts to resolution properly.", "Dave_Hoskins, 2016-09-19Hi, I'm at daveh (at) quikquak.com", "Kastor, 2016-09-18What if I want to use that in a comercial project ? How can I contact you about this ?", "Dave_Hoskins, 2015-04-30Thanks. I've just removed all the trig from the loop, and used mip-mapping to blur the larger blobs, but I'm not sure it makes it better, just different I suppose.", "anastadunbar, 2015-04-29Looks so sexy and has the golden angle that makes pretty patterns.", "iq, 2014-10-06Super cool", "fizzer, 2014-09-17It's surprisingly effective with that starry texture. =)", "Dave_Hoskins, 2014-09-12By sheer fluke I've managed to remove the sqrt from each iteration. It seems to have better spacing in them middle, which is strange.", "jaba, 2014-09-12wow, nice effect!", "TDM, 2014-09-10looks pretty", "Dave_Hoskins, 2014-09-10Golden angle", "PauloFalcao, 2020-02-17Today I was reading my code, and made a more elegant version.", "\"Basic Fractal Zero\" -https://www.shadertoy.com/view/tltSWs", "The current code \"Basic Fractal\" is not scaling space, only the shift is scaled, it also works, but I think the new code \"Basic Fractal Zero\" it's simpler and makes more sense", "PauloFalcao, 2020-02-17@kushulain Wow! Nice!", "Kushulain, 2019-02-03I made a city after your code !  https://www.shadertoy.com/view/tsjGRG", "iridule, 2018-09-17Thank you! Very nice and informative", "koboldstyle, 2017-08-10So simple, so amazing", "Yusef28, 2016-08-29Cool! yes this is very instructive. Glad I found it.", "Dave_Hoskins, 2013-10-08Love the dizzying movement.", "PauloFalcao, 2013-10-07Thanks! I did this after watching Numberphile http://www.youtube.com/watch?v=wCyC-K_PnRY :P Great channel btw", "iq, 2013-10-07\"Mirror and Scale\" is the recipe for fractals (\"Ian Steward put it so in his book Does God Play Dice?\"). Very instructive shader!", "Dave_Hoskins, 2015-02-14Returning from a function early starting given 'unknown error' on the latest Chrome, see line 144. I'm going to avoid returning early in the future.", "Dave_Hoskins, 2014-09-01Mac and Win versions now the same, sped up the rendering and put in some sound.", "vgs, 2014-08-31Creepy!", "iq, 2014-08-30Very cool!", "Dave_Hoskins, 2014-08-30Cool, thanks for the feedback.", "@AndrewNZ and reinder, thanks, the dot fade happened accidentally when I put in the dithered ray starts.", "demofox, 2014-08-30I think it might have just been my system... it's working great now.  The 2d version was also misbehaving before, but is fine now as well.", "reinder, 2014-08-30Nice! I also love the 'dot fade'", "Dave_Hoskins, 2014-08-30The spikes intersect each other but I'm not getting any jumps in geometry here. So I'm not sure what you're seeing.", "demofox, 2014-08-30there's a lot of geometry appearing and disappearing for me in the first 5 seconds (chrome windows 7).  Apart from that, really awesome.", "AndrewNZ, 2014-08-29Love the 'dot fade' as the thorns pass into the camera!", "Dave_Hoskins, 2014-08-29A 3D version of Squiggles", "huwb, 2017-06-27Thanks ! It is a solution perfectly matched to this specific problem and a fun thing to think about, but to be brutally honest I'm finding it doesnt generalise to practical scenarios extremely well, from experiments so far. It's bad for perf to do density computation, lighting computation for each sample of each ray on the fly. And holding the sampling error stationary like this is probably inferior to jittering the sampling and temporally filtering the result - the error is large and disturbing for shadow boundaries. In any case, research is in progress here, a few scenes and techniques are being explored: https://github.com/huwb/volsample .", "", "Anyway in regards to your questions.. I have a WIP presentation that i could share with you which has latest and greatest thinking - email me if you're interested, my contact details are on the github. For a tetrahedron the individual planes would be clearly visible due to camera perspective effects. A dodecahedron does a much better job. We generate geom for a bevelled dodecahedron and render it around the camera. Your intuitions about ray counts are spot on.. The bevel faces have a specific shader applied that marches the right number of rays, and the normals are stored per face, so everything is ready to go for the pixel shader. No branches or significant overhead at runtime, besides requiring additional raymarches. Only a tiny fraction of pixels require all 3 raymarches, i think around 1%. Around 18% needed two rays though.", "iestyn, 2017-06-27One more thought. Did you try using a branch to determine how many planes you need to trace?", "", "In some parts of the screen you only need to consider axis-aligned planes and in other areas you only need to consider diagonal planes - it's only in regions where two planes blend together that you need to trace both at once.", "", "The branch should be coherent in image-space so it should give you a speedup (esp if you need to blend 3 planes together for a full 3D version), assuming the single-plane trace function is significantly quicker than the 2 or 3 plane function.", "iestyn, 2017-06-27This is awesome!", "", "I'm curious why you opted for 8 planes. 3 seems like it would be the minimum (some grass shaders do this). Did it look awful with fewer planes?", "", "I wonder what the minimum number of planes will be for full 3D... you could get away with 4 for a tetrahedron, but then if you need 8 planes for '2.5D' to look good I guess you'll need more for full 3D.", "", "I like the dodecahedron idea since it's platonic, but utilizing the symmetries with your truncated cube does sound simpler! What about an octahedron? Oh hmm, I guess that has the disadvantage that 4 planes meet at a point (as opposed to just 3 for a dodecahedron or truncated cube) so you'd need to march+blend more planes per pixel.", "huwb, 2017-06-22Thanks ChuckNorris good callout, i wasnt really familiar with the terms of this license :/. Good to know.", "ChuckNorris, 2017-06-21Unfortunately this can not be MIT licensed because it uses code from two CC-NC-SA licensed sources (the code from nimitz does not have a license declared, so the site license applies).", "Klems, 2017-06-11Gigavoxels does just that http://gigavoxels.imag.fr/, but it's hard to do without a multi-resolution structure (ie inside shadertoy). I've wanted for a long time to do cone tracing on a procedural field in a shadertoy shader. The idea is to provide a radius with the map(vec3) > vec4 function of standard volumetric shader. Since noise in a FBM is usually between 0 and 1 we can blend it to 0.5 when the frequency is higher than the radius. Cone tracing a SDF is done the same way than a participating media, the only difference is that the alpha is binary (which allow us to trace through it way faster when it's empty, thanks to the SDF). Some exemples of SDF cone tracing https://www.shadertoy.com/view/4dlyWB https://www.shadertoy.com/view/MlGXDt https://www.shadertoy.com/view/Md23z1", "huwb, 2017-06-11forgot to ask - if you have an example of cone tracing used for primary view rays let me know. i've seen a type of cone tracing used a bunch for antialiasing SDFs. i'm not sure if the same applies for participating media.. to get it prefiltered but to also get some visual detail in the render it might require many samples. i might be thinking about this in the wrong way though", "huwb, 2017-06-11thx for comments all.. klems yeah sounds about right, i've not implemented cone tracing but i imagine if problematic frequencies are prefiltered out and there is no disturbing flickering under camera motion then its not necessary to do anything special with the sample placement. the other related technique is TAA which comes with its own problems which I'd be interested to compare, hoping to get some results for this soon.", "Klems, 2017-06-10If I understand correctly, the idea is to \"snap\" samples on a \"grid\" so that high frequency details doesn't pop in/out depending on the camera position. This is only an issue on procedural \"point\" fields, if you have a 3D texture you can mip-map/cone trace it and the aliasing will be filtered.", "kaliven1989, 2017-06-09Awesome.", "KylBlz, 2016-10-01+1 for unity shaderlab section lol", "iq, 2016-09-04Super nice!!!!", "Shane, 2016-08-29Wow. This is so smooth and cleanly rendered.", "", "I have a rough idea how this works... but I think I'll have to wait for the article. I'd imagine the truncated cube version would be of great interest to people.", "stb, 2016-08-28It runs fast in full screen and looks great! Needs a luck dragon though", "CaliCoastReplay, 2016-08-28Incredible speed, quality, and performance.  Releasing under MIT is very generous as well.", "", "A lot of these shaders that I know people are really writing for fun are sooooo commercial quality.  I'd love to see a ShaderToy Marketplace.", "Duke, 2016-08-27A very interesting technique. I hope that you will solve all the problems of the original algorithm.", "huwb, 2016-08-27ha great and fast intuition! yeah we're going to try a truncated cube, hoping it still only requires 2 parallel raymarches (so still 1 branch at line ~162).", "ollj, 2016-08-27for a 3d rotatable camera i suggest the sampling slices to be on planes that have the same normals as a dodecahdron or any tuncated symetric 3d greometry.", "huwb, 2016-08-27Thanks for the comment ollj. I don't think fov should affect it. I added an fov variable to mainImage() for experimentation. Note that a large fov value reveals the hole below the camera, see my earlier comment about flatland 2D vs. full 3D.", "ollj, 2016-08-27does this method suffer more from a higher field of view?", "huwb, 2016-08-27Thanks Nimitz! This new approach doesn't have any fail cases that I'm aware of so far. One limitation of the implementation here is it works in flatland 2D (like the diagram at llcGRS). If the camera looked down there would be a hole - there are no sample slices parallel to the XZ plane. We are looking at extending this to full 3D and currently think it will extend without a big additional overhead.", "nimitz, 2016-08-27I remember checking the original algorithm and not using it because it wasn't very stable with camera rotation, is this completely fixed now? It does look a lot better and it's very fast indeed!", "Shane, 2022-07-06@byDezign", "I haven't looked at this for a while, but the camera is a little swift, so I've halved the speed. The Z-component of the \"lk\" vector controls the speed at which the camera follows the path. Setting \"iTime\" to zero effectively halts the camera. Playing around with \"lk\" and \"ro\" will give you different perspectives.", "byDezign, 2022-07-06This is a stupid question, but how can I stop the animation, or at the very least slow it down?", "", "I can adjust the camera position but it's the world that's moving and I cant seem to find the right parameter/noise to do it...", "sylvain69780, 2021-12-12Obviouly this is a dodecahedron because 12 faces in 3D, sorry about my last comment.", "sylvain69780, 2021-12-11I love this shader", "Small typo in comments Dodecahedron instead of Dodecagon", "NoxWings, 2021-10-25Nice one! It looks really clean.", "leenalfalah, 2021-09-26hello , thank's for this cool effect , but can you tell me if i need to apply just the neon shader to the obj from webgl how i can do that ?", "microfx, 2020-02-21any idea why I get this error when converting to ISF?", "", "ERROR: 0:154: Invalid call of undeclared identifier 'texture'", "CaliCoastReplay, 2019-02-09Hey Shane - have you ever tried to port any of your work to Unity?", "", "I'd def be interested in a consultation with you about bringing the next generation of shaders like this to some of the commercial engines, I could see a huge market for effects like this.", "efairbanks, 2018-09-19This is really cool and the implementation of the glow effect is pretty clever.", "huttarl, 2018-09-18Nice choice of colors for the neon. Thanks for adding \"greebling\" to my vocabulary.", "Shane, 2018-09-17This is comparatively boring compared to some of the \"Shaders of the Week\" I've seen lately, but I'll take the win.  Seriously though, I'd recommend rendering a grid of hexagons to anyone who hasn't done it.", "", "@mackycheese21", "If you've never put one of these together, I'd start with a simple rendering of a square pylon grid - Refer to the \"blocks\" function in my \"Random Block Passage\" example. After that, render the same with each row or column offset by half a grid cell for that brick-like pattern. At that stage, you can swap the square pylons for hexagonal ones. If you have enough space between pylons, then you only need to render one set of repeat objects. The problem arises when you wish to render them against one another. At that point, neighboring cells need to be considered to avoid artifacts, which means you need to render in groups of four...", "", "Yeah, I'd be confused at this point too, but if you try to render a square pylon grid from scratch, I promise you'll figure it out.", "", "@Nick120100", "There might be converters out there, but the only way I can think of doing it is by painstakingly replacing the GLSL functions with the Cg\\HLSL equivalents. However, the only real thing of interest here is the distance function, which appears to use pretty general syntax, like \"min,\" \"floor,\" \"abs,\" \"fract,\" etc. I'd imagine anything else could be taken care of with defines, like \"#define vec3 float3,\" etc.", "Nick120100, 2018-09-16How can i convert it to  Cg/HLSL?????", "visuality, 2018-09-16I already see it going slower with procedural built characters dancing on every poly with a neon light. Saturday night fever meets Cyberpunk 2077, will my mind ever stop? The surfaces look very much like PBR materials, a balanced textured roughness with a shear sheen that seems to react to light, really nice material work, thank you.", "Kali, 2018-09-14That lights", "aiekick, 2018-06-24wow, how i missed this one. very cool", "KylBlz, 2018-06-17dramatic lighting!", "Virgill, 2018-06-09woow!", "pthextract, 2018-06-07Yummy.", "Shane, 2018-06-05Thanks, everyone. This was just a quick diversion, so not a great deal of effort was put into it. There's nothing technically difficult about producing hexagonal grid imagery like this, but having to render four objects (three minimum) to avoid overlap can be costly for anything but the simplest of shape combinations. On a side note, storing some of the calculations ahead of time in a second buffer might go some way toward speeding up the process.", "", "There are so many variations on this particular hexagonal setup that it was difficult to pick one. Hopefully, someone with more enthusiasm and imagination might put something more interesting together.", "", "@flockaroo and @leonmiura", "In regard to producing some cheap neon reflections, I'm waiting for inspiration to strike.  My best bet would probably be rendering a low-iteration second pass on a less detailed distance function, etc, so I might add that in at some stage. I didn't want to use a second buffer, but I'd imagine a bokeh blur, radial blur, or something to that effect, would give more of a reflective light feel too.", "flockaroo, 2018-06-04i like it very much!", "visually i miss some scattered neonlight on the geometry.", "is it possible to brighten up the corners near active neons in neon color (i mean very unphysical just phenomenological), or would that be too costly?", "reinder, 2018-06-03Wow! I really like how your shaders are rendered. They always look very sharp (and without aliasing) to me.", "leonmiura, 2018-06-03XD \"I'm just hoping no one notices the lack of reflections from the neon lights. \" No luck on that one dude, but it's still a great shader!", "MacSlow, 2018-06-02I love the worn look of the slate-like material!", "MacSlow, 2018-06-02Top notch, Shane!", "duvengar, 2018-06-02Super cool", "ocb, 2018-06-02So simply... nice!!!", "BigWIngs, 2018-06-02Love it!", "iapafoto, 2018-06-01Super good one !", "iq, 2018-06-01Very cool!", "shau, 2018-06-01 For some reason my macbook pro seems to handle multiple render passes a lot better when compiling than my fast PC", "weyland, 2018-06-01your shaders all look so lush <3", "Barakay, 2023-04-09if anyone wants to make the balloons go left and right, u can do that by adding this to the iMouse if-statement in line 97: uv.x -= (iMouse.x/iResolution.x - 0.5)*0.3;", "SabRango, 2020-01-01Damm", "akhgary, 2018-04-26neat!", "drone1, 2016-04-28Gorgeous!", "EvilRyu, 2015-11-27Lovely", "vgs, 2015-11-26Wow, so beautiful!", "Kastor, 2015-11-25Cool ! Very cool", "Clown, 2015-11-25\u00e5\u201c\u02c6\u00e5\u201c\u02c6\u00ef\u00bc\u0152\u00e6\u2013\u00b0\u00e4\u00bd\u0153\u00e5\u201c\u0081\u00e4\u00b8\u0160\u00e9\u00a6\u2013\u00e9\u00a1\u00b5\u00e4\u00ba\u2020\u00e5\u2022\u0160 \u00e3\u20ac\u201a\u00e6\u02c6\u2018\u00e6\u02dc\u00af\u00e5\u0153\u00a8\u00e4\u00bd\u00a0\u00e5\u008d\u0161\u00e5\u00ae\u00a2\u00e7\u2022\u2122\u00e8\u00a8\u20ac\u00e7\u0161\u201e\u00e6\u2039\u2013\u00e9\u017e\u2039\u00e6\u20ac\u2022\u00e5\u00b0\u008f\u00e5\u00bc\u00ba\u00ef\u00bc\u0152\u00e5\u2030\u008d\u00e6\u009d\u00a5\u00e8\u00a7\u201a\u00e6\u2018\u00a9", "loolo78, 2015-11-24Line 70 is halarious!", "FabriceNeyret2, 2015-11-11NB: \"shy guy\" was an allusion to this recent shader ;-) https://www.shadertoy.com/view/MtjSD3. I could very well imagine he likes ballons :-p", "Nrx, 2015-11-11Love it!", "candycat, 2015-11-11@FabriceNeyret2 oh, thanks! this is more much interesting :\u00ef\u00bc\u2030", "candycat, 2015-11-11ha, I'm a shy girl :\u00ef\u00bc\u2030", "Thanks guys! love you", "aiekick, 2015-11-10", "FabriceNeyret2, 2015-11-10(I'm sure it's the shy guy again, right bellow the window ;-p )", "iq, 2015-11-10Super cute!!", "FabriceNeyret2, 2015-11-10and if line 60 you replace by c = mix(blobColor,texture2D(iChannel1,.5+(pos-c2)*3.),.5); and set madona video in channel1, you have singing balloons ! :-p", "", "or better with time changing:", "c = mix(blobColor,texture2D(iChannel1,.5+(pos-c2)*3.),.5+.5*cos(10.*start.x+iGlobalTime));", ":-p", "Dave_Hoskins, 2015-11-10Great!", "FabriceNeyret2, 2015-11-10how cute !", "MacSlow, 2018-05-19Top notch result... no idea how I missed this shader before.", "etale_cohomology, 2017-07-15Beautiful shader, beautiful code!", "LukeRissacher, 2016-09-05@Shane Interesting, thanks - I could see it produced an egg-carton-like height variation - the .yzx swizzle and /2 scaling and nested sin(cos()) was throwing me off, made me wonder if it was some special mathematical construct where y inflluences the phase of x, x influences the phase of z, etc. in some precise way. \"Cauchy biturbic phase induction cycle\" or something . But sounds like it was more just messing around to find something that looked good.", "Shane, 2016-09-05@LukeRissacher", "Sinusoidal variations are just a simple way to add some perturbation to a surface. I use them all the time for a range of different things: Foundation layers, cheap noise, etc. The combination I've used in this particular example is just a cheap way to provide extra variation, to make the surface look a little more haphazard. Explaining what combinations work for what situation would take a while, but it's easy enough to figure out after experimenting a bit.", "", "For instance, in 2D:", "sin(p.x + p.y)", "sin(p.x)*sin(p.y)", "sin(p.x) + sin(p.y) = dot(sin(p), vec2(1))", "sin(p.x + cos(p.y)) + sin(p.y + cos(p.x)) = dot(sin(p + cos(p.yx)), vec2(1))", "// etc.", "", "You can also combine sinusoidal layers at difference frequencies and amplitudes in the same way fBm noise is produced.", "LukeRissacher, 2016-09-04Love this one - curious, how did you arrive at that sinusoidal warping term in the map() function? It's been bending my brain a bit.", "w450468524, 2016-08-02shining!", "shau, 2016-07-15Congratulations on Shader of the week. Well deserved!!", "Shane, 2016-07-14@XT95", "In your UI example, I liked how you converted the surface point reflected vector from Cartesian coordinates to polar, then used the two angles to index into a 2D setup. I used it in my \"KIFS Flythrough\" example, but indexed into a 2D texture instead.", "", "In this example, I'm simply passing the reflected vector into a 3D function. The technique doesn't have the physical correctness of a genuine reflective pass, but it gives off a believable reflective environmental luster for little extra cost. It's my new favorite lighting addition at the moment. In fact, I've probably been overusing it a bit lately.", "XT95, 2016-07-12Wooow !! Super quality like always with you .", "I don't have the time to look at your envmap function for now but the result is amazing!", "coyote, 2016-07-12So beautiful!", "Shane, 2016-07-07@cyrilp", "Apologies for not getting back sooner. I no longer own the name I signed up with, so I don't receive site messages. The surface function is pretty quick already. If genuine 3D Voronoi was involved, it'd be running very slow on all computers. Even so, it'd be possible to cut back here and there to get this running faster.", "", "For instance, dropping the distance field height, loosing the raymarching precision, cutting back on non essentials, etc... Although, I'm still not sure it'd be enough to get it running at full tilt on Android.", "", "I think the best way to give it a chance would be to change the distance field itself to something cheaper but similar. The following would work, but I could come up with better ones:", "float drawObject(in vec3 p){", "", "p = abs(fract(p)-.5);", "return (p.x + p.y + p.z)*.5;", "", "}", "", "", "float cellTile(in vec3 p){", "", "p /= 4.;", "", "vec4 v, d;", "d.x = drawObject(p - vec3(.81, .62, .53));", "p.xy = vec2(p.y-p.x, p.y + p.x)*.7071;", "d.y = drawObject(p - vec3(.39, .2, .11));", "p.yz = vec2(p.z-p.y, p.z + p.y)*.7071;", "d.z = drawObject(p - vec3(.62, .24, .06));", "p.xz = vec2(p.z-p.x, p.z + p.x)*.7071;", "d.w = drawObject(p - vec3(.2, .82, .64));", "", "v.xy = min(d.xz, d.yw);", "", "d.x =  min(v.x, v.y);", "", "return 1.-d.x*2.;", "", "}", "", "vec3 cellTileColor(in vec3 p){", "", "int cellID = 0;", "", "p/=4.;", "", "vec3 d = (vec3(.75));", "", "", "d.z = drawObject(p - vec3(.81, .62, .53)); if(d.z<d.x)cellID = 1;", "d.y = max(d.x, min(d.y, d.z)); d.x = min(d.x, d.z);", "", "p.xy = vec2(p.y-p.x, p.y + p.x)*.7071;", "d.z = drawObject(p - vec3(.39, .2, .11)); if(d.z<d.x)cellID = 2;", "d.y = max(d.x, min(d.y, d.z)); d.x = min(d.x, d.z);", "", "p.yz = vec2(p.z-p.y, p.z + p.y)*.7071;", "d.z = drawObject(p - vec3(.62, .24, .06)); if(d.z<d.x)cellID = 3;", "d.y = max(d.x, min(d.y, d.z)); d.x = min(d.x, d.z);", "", "p.xz = vec2(p.z-p.x, p.z + p.x)*.7071;", "d.z = drawObject(p - vec3(.2, .82, .64)); if(d.z<d.x)cellID = 4;", "d.y = max(d.x, min(d.y, d.z)); d.x = min(d.x, d.z);", "", "", "vec3 col = vec3(.25);", "", "if (cellID == 3) col = vec3(1, .05, .15);", "", "return col;", "", "}", "cyrilp, 2016-06-25Looks great !!", "", "I'm trying to run it on an android phone but it's far to slow.", "What can we change to make it quicker at the expense of some quality loss ?", "Shane, 2016-06-10@TambakoJaguar", "I included \"look around\" code as a commented option for anyone who wants it. Although, it looks pretty much the same in all directions, so it probably won't enhance the experience.  With flyby examples, I'll usually restrict the camera to a setup that I think works aesthetically. With this particular one, I tried different \"FOV\" values, camera heights, and even distorted the lens, but settled on the setup you see here. There are probably better arrangements.", "TambakoJaguar, 2016-06-09Very nice, I like your style!", "What about introducing mouse controls, to \"look a bit around\"?", "Shane, 2016-06-09Thanks for the comments. For anyone interested, this is one of several workable distance metrics. For instance, comment in a couple of lines in the \"drawObject\" function, and it'll display something that looks like regular 2nd order Voronoi. I went with a distance metric that produced an abstract angular look, but organic surfaces are possible too. Aiekick has some examples that use different distance metrics that are pretty interesting.", "Shane, 2016-06-09@gloinart", "Others could describe AO much better than myself. However, if I were forced to describe ambient occlusion in a few words, it would be that it's a measure of how much ambient light is blocked due to the surrounds. In very simple terms, it's described as self shadowing.", "", "Most algorithms used on Shadertoy are very basic estimations, designed to minimize calls to the distance function. More sophisticated algorithms use the half hemisphere\\random ray setup. The algorithm above, however, involves starting at the surface, then stepping off of it in the direction of the normal checking to see if another part of the scene is nearby. In open spaces, lighter values are returned. Whereas, in corners, crevices, etc, darker values are returned. It's not perfect, but it does a pretty good job.", "", "To confuse things, this particular scene also incorporates curvature and performs fake shadowy coloring via the tiled function itself. The curvature calculation is probably the one responsible for lightening the convex border regions.", "poljere, 2016-06-08Niiiice!", "iq, 2016-06-08Nice, super Shine style and qiuality!", "aiekick, 2016-06-08nice as usual", "gloinart, 2016-06-08How are the \"ambient occlusion\" made? ie it seems triangles are getting a little bit darker in corners, and lighter at sharp borders.", "PauloFalcao, 2016-06-08As always, beautiful and fast!", "dila, 2016-06-08looks great. i love the red gems", "shobhitg, 2022-10-25If I want to run this with another soundcloud url, how can I change it?", "24toPimlico, 2019-04-19Sweet!", "shadertoy, 2019-04-17Beautiful!", "kennyalive, 2019-04-04nice!", "eclypse, 2019-03-24nice!!", "Flexi, 2019-03-17Lovely effect!", "TomLisankie, 2019-03-16This is awesome!", "envy, 2019-03-11incredible filters", "public_int_i, 2016-07-01Love all your particle shaders, this one especially has great style.", "shau, 2016-06-30Mesmerising", "Yusef28, 2016-06-02looks like wathing a ninja duel through IR", "weyland, 2016-04-01Music by Dubmood and Kraftwerk ;)", "iq, 2016-04-01Super super beautiful!", "aiekick, 2016-03-31cant stop to watch it", "aiekick, 2016-03-31wow, very nice", "iapafoto, 2016-03-31beautiful and super original", "Poisson, 2023-03-06Very Ssunning with the houses!", "protez, 2022-11-13Crazy.", "ollj, 2022-05-08this is what i want tile based games like \"dorfromantik\" and any facrotio-like game want to look like.", "ollj, 2022-05-08geometry+texturing of this shader is still awesome and unique (woth onmy linor continuity flaws in bad uv mapping of roads), lots to learn from.", "camera and gamma (and various atmospheric effects) of this shader still leave a lot of space for improvement.", "aiekick, 2021-12-31wow, how i missed this one ?  super nice", "lz, 2021-06-14Wow. Really wow.", "xavierseb, 2021-06-01Awesome! Just phenomenal.", "Tuscanny..", "Zi7ar21, 2021-05-06Ah yes ollj and his quaternions", "ollj, 2021-05-04i really like the comment:", "// what am I doing", "ollj, 2021-05-04going through this huge shader. The camera setup sure is slow and wobbly/drunk. (lookatTarget cam is 3x normalize() , quaternion cam could be more elegant)", "it is a lot of code. this may take some weeks.", "", "You take the minimum of 4 lengths(), which prefers sqrt(), which is just slower than deferring any sqrt() where possible.", "I slightly improved the runtime of packed_spheres_tiling3d() by deferring 4 sqrt() (and offset of -1 within the min) into a single minTreeOfSquaredLengths; sqrt(...min(dd(a),dd(b))...) -1.here", "same fork also uses a but less #define ,200/3900 lines of commonTab are buffer-exclusive.", "ollj, 2021-05-04The lighting is a bit too bright/ambience, it lacks the color variety and luminosity contrast of https://www.demilked.com/disney-paintings-thomas-kinkade/ , even without atmospheric crepuscularity or particles. fibonacchu-shpere/helix-flowers could go a long way.", "", "I would like to add a quaternion camera to this, but recently. this shader crashes my webgl every time after updating firexoy (also on old backup fork that i know did run just fine, frefox now seems to surrender before a 15 second compiling time).", "", "Opera-browser-time. I notice significantly higher fps in opera on this shader (and others of higher complexity, and i doubt its ANGLE).", "me_123, 2021-04-29I can not believe it, It is real time on my chromebook!", "This should be the shader of the week!", "jt, 2021-04-28fantastic!", "Zi7ar21, 2021-04-26someone please make a remix with controls", "MacSlow, 2021-04-26Wicked!", "PauloFalcao, 2021-04-26Amazing stuff! I also like the \"IMAGE\", \"BUFFERA\", \"BUFFERB\" way to code!", "ttoinou, 2021-04-24\"You are walking through an infinite English countryside. \" Scenario for the next John Carpenter horror movie", "iY0Yi, 2021-04-23@blackjero That's a good childhood! And I think that your shader is shocking for shader kids nowadays", "blackjero, 2021-04-23Thanks everyone!", "@iY0Yi \"Jumping\" was a shock when I saw it as a kid, the (hand made!) city was a breathtaking inspiration at a time CG was still in its infancy...", "@elenzil it is public+api now", "elenzil, 2021-04-22same again but with better markup tags.  a small portion of my english kingdom for a comment-preview on shadertoy!", "@blackjero, could you save this as public + api ?  that way it will be available on the iOS shadertoy app.", "elenzil, 2021-04-22@blackjero, could you save this as <b>public + api</b> ?  that way it will be available on the iOS shadertoy app.", "PixelPhil, 2021-04-22Mind blowing! \ud83e\udd2f", "alro, 2021-04-22Extraordinary!", "dr2, 2021-04-22Always thinking of England", "XT95, 2021-04-22Crazy!", "And it's run very fast on my macbook pro (25fps, 2400x1350), well done!", "Shane, 2021-04-22 Beautiful.", "gyabo, 2021-04-22Excellent!", "nylki, 2021-04-21whaaatt!? Thats a proper Endless landscape park, Good work!", "michael0884, 2021-04-21woooow", "flockaroo, 2021-04-21phu, this is excellent work! ...respect!!", "w23, 2021-04-21omg", "iY0Yi, 2021-04-21Amazing. Impressive work!!!", "BTW, I like the Jumping", "Orm, 2021-04-20amazing! really pleasant scene :-D", "morimea, 2021-04-20wow this quality!", "crazy!", "Observer, 2021-04-20Wow, incredible!", "zproxy, 2021-04-20excellent", "tholzer, 2021-04-20>>>>  Incredible <<<<<", "This is how the impossible nevertheless becomes visible.", "(run fine on RTX2060Super ;-) )", "jorge2017a1, 2021-04-20I can't say much .... because my machine looks at a black screen !!!!", "ocb, 2021-04-20Breathtaking!", "Farms is a great add-on with their own style.", "Nice journey in Italy!", "stb, 2021-04-20What the... this is incredible!", "ttg, 2021-04-20Crashes into trees at iTime=240.", "shau, 2021-04-20Wow! Looks fantastic, especially all the details", "Tater, 2021-04-20wow", "iq, 2021-04-20Really beautifully done. Amazing", "BigWIngs, 2021-04-20That's seriously next-level. Just wow.", "kastorp, 2021-04-20that's incredible!", "ollj, 2021-04-20Great. I am going to look into this one a lot.", "The mouse camera rotation swivels weirdly, while lying a bit higher.", "Is slightly uncanny/subliminal as it lacks flowing and standing water.", "Textures at path intersections need better continuity.", "low detail shadow settings are insufficient for sharp geometry of house shadows.", "", "Looks like it has space for more diversity-permutations in types of fauna and architecture.", "", "benches, Gazebos, stairs/open-air-theaters, Aqueducts, and all the simple marble architecture, may add a lot of variety at low cost.", "dean_the_coder, 2021-04-20Oh wow. :O", "elenzil, 2021-04-20stun-balls!", "", "@byte-mechanic, see #defines at the bottom of Common.", "byt3_m3chanic, 2021-04-20So cool - it's beautiful! But how and what is sorcery with the Buffer/Image tabs ?", "FabriceNeyret2, 2021-04-20wooow !", "tdhooper, 2021-04-20magical", "jeyko, 2021-04-20amazing", "iq, 2017-12-19I joined Pixar way after Wall-E was made. This model in this shader is remade by myself simply by eye balling some pictures of Eve that I found in the internet/Google", "Imsure1200q_1UWE130, 2017-06-03THIS IS SOO COOL! wait is the Wall-E movie made by pixar? i think you work with pixar so you know how to make eve. looks really similar to the scene in Wall-E.", "iq, 2015-12-28In case you have a slow computer:", "djmips, 2015-08-15Beautiful.", "anastadunbar, 2015-08-11It runs 22 FPS but you're amazing with shaders.", "kulebril, 2015-08-11Quite beautiful, iq.", "Althought it crashes in Chrome 44 \"Maximun temp register exceeded\" (Windows7, Geforce GT640), works fine on Firefox.", "knarkowicz, 2015-08-04Impressive! Background shapes and colors are so great. Every day there is a new amazing SIG15 entry. Can't wait what will be next, as I guess most people will submit just before the deadline.", "iq, 2015-08-04Well, it's not AA, it should be called DOF I suppose. The original movie is blurred 2 or 3 pixels in this shot (for simulating heat and a hand held camera I think). It starts to look okey from AA/DOF=4  but then it's too expensive for my PC. I should probably have implemented analytical AA/DOF. I might add it later. For now I've renamed the loop to avoid confusion.", "Dave_Hoskins, 2015-08-04Exquisite! A beautiful rendering. Love the landscape as well.", "Although coyote may have a point?", "vgs, 2015-08-04One of my favorite movies! Great shader!", "coyote, 2015-08-04Very nice!", "Btw, shouldn't the aa line be:vec2 o = (vec2(float(i),float(j))-0.5*float(AA)) / float(AA);", "EvilRyu, 2015-08-04wow", "marcelfernandez13, 2020-10-08Nice Job!", "JohanFlod, 2018-07-17very nice!", "vamoss, 2017-08-31Thank you, you solved the algorithm I needed, I made a test here:", "https://www.shadertoy.com/view/4lXyWn", "dila, 2016-09-25ah, i guess the other one was a repost. redirecting heart accordingly", "iq, 2013-10-09Yes, it's called \"Lipschitz continuity\" (see http://en.wikipedia.org/wiki/Lipschitz_continuity. Basically, you can fix the problem by doing f+=s*0.3/1.3; in line 86.", "revers, 2013-06-30Does anyone know why with higher freqencies for height displacement there are strange artifacts? For example, they appear when I change:", "float d=sin(fp.x*0.3+iGlobalTime*4.0)+cos(fp.z*0.3+iGlobalTime*2.0);", "", "to:", "float d=sin(fp.x*1.3+iGlobalTime*4.0)+cos(fp.z*1.3+iGlobalTime*2.0);", "", "in the obj() function.", "", "I've tried to fix this, but without success. It really bothers me...", "rafacacique, 2013-02-26Fantastic! =)", "poljere, 2013-02-26So classy, I love it mr. PauloFalcao!", "ColinBNA, 2013-02-25Nice! Thanks for sharing, I enjoyed playing with the shader.", "I made a slight variation in obj() with:", "float c1=pow(pow(p.x,8.0)+pow(p.y,8.0)+pow(p.z,8.0),0.125)-0.95;", "...for the rounded box.", "It makes it more organic to my eyes. Very subtle though.", "XT95, 2013-02-16like it !", "iq, 2013-02-16so elegant!", "spalmer, 2020-07-02Twisted!", "raabix, 2020-03-11If Escher saw this shader live and in action, even his head would explode. This is another example of ART and MATHS at their best.", "Hadyn, 2018-04-05Incredible!", "rigel, 2018-01-26This is totally amazing !", "FabriceNeyret2, 2017-08-05suggestion: add tags  copies, reproductions (as for other shaders reproducing existing art).", "reinder, 2015-11-16Thanks", "jt, 2015-11-16This is soo great :-D", "gloinart, 2014-12-20Soo cool", "ewerybody, 2013-12-05mind blown!!!  I think good ol Master of Ceremony Escher would have had his fun with an animated version of his picture.", "TekF, 2013-09-14I have always loved the original picture, and I'm amazed to see it animated. Absolutely brilliant!", "Antonalog, 2013-09-13damn that is cool!", "Zavie, 2013-05-29Fantastic, really nice break down of the technique involved!", "ssdsa, 2013-04-16Very cool!", "Syntopia, 2013-04-16Wicked stuff. I've played around with some droste-transformations myself, but I didn't even have the fantasy to imagine applying it to a 3D model of Escher's image.", "PauloFalcao, 2013-04-15Amazing! The city is awesome!", "CPU, 2013-04-15Good stuff! Shadows are working fine on Chrome/AMD", "reinder, 2013-04-15done, thanks! I will change the shader so after a while you will look around and see everything is 3D and not a bitmap .", "Dave_Hoskins, 2013-04-15Hmmm, I can get twice the frame rate by replacing the 'break' on line 290 with a 'continue'!!", "It's very nice BTW, I thought there was a new bitmap when it first loaded up.", "reinder, 2013-04-15Hmm, it's running extremely slow on Windows . On my mac I get 60fps - don't know why there is such a big difference.", "reinder, 2013-04-15Ok, I will fix it", "iq, 2013-04-15It doesn't work for me   I can see it if I remove the shadows, though...", "iq, 2018-11-14I made an optimization pass - it turned out all the square roots could be removed!! ^__^", "iq, 2014-03-24Thx for finding the fix!", "mplanck, 2014-02-15On a Mac/Chrome running an Intel Iris, I had to make the following modification to line 26 to see the effect, otherwise sphereVisibility would always return 3.", "", "", "int result = 3;", "if( k0*k0 + k1*k1 + k2*k2 + 2.0*k0*k1*k2 - 1.0 < 0.0 ) {", "result = 1;", "} else if( k0*k0 + k1*k1 + k2*k2 - 2.0*k0*k1*k2 - 1.0 < 0.0 ) {", "result = 2;", "}", "", "return result;", "Dave_Hoskins, 2014-02-10Occluded bees arses!", "It only needs the origin? Very cool.", "wj, 2022-09-23very nice :-) I hope you don't mind that I just pilfred your lightning impl for my page here: http://www.wothke.ch/webuade+/ I put respective credits inthe \"What's this?\" tab (let me know if you want another text).", "zproxy, 2020-09-08360 at", "jorge2017a1, 2020-06-05A great tunnel ... very good, and the rays, excellent !!!!", "...........", "Un tunel genial...muy bueno , y los rayoz, excelente!!!!", "Cotterzz, 2019-09-21Lovely!!", "I don't often see good lightning in shaders, and I'm still looking out for good examples, so thanks for this.", "CLPB, 2018-11-01*police box", "CLPB, 2018-11-01I'm just expecting a certain post box to show up here.", "CaliCoastReplay, 2016-07-28This is incredible!!!", "drmindset, 2016-04-24nice!", "technomancer, 2015-08-27Looks like the Dr Who time vortex ... very cool indeed", "joeedh, 2015-08-27Awesome!", "cabbibo, 2015-08-26WOW ! those droplets!!!!", "srtuss, 2015-02-28@inferno: i'm just using the struct to return multiple values from a function, instead of just a single one.", "", "@psonice: thanks for pointing that out. i fixed it. (seems like my machine/compiler automatically inits that variable with zero)", "psonice, 2015-02-28This is really cool! Great work.", "", "There's a glitch with the lightning on my box (radeon 6770 on OS X / Safari, both latest). It's caused by v being uninitialised, so changing line 340 to \"float v = 0.0;\" fixes it.", "inferno, 2015-02-26Very cool! is there a way to avoid the STRUCT thing? i scratch my head how that works", "GregRostami, 2015-02-24WOW!!", "Johndrinkwater, 2015-02-23Looks stunning!", "singingsingh, 2015-02-23awesome work", "srtuss, 2015-02-20thanks guys", "aiekick, 2015-02-20wow i love it", "nimitz, 2015-02-20Very nice shading all around.", "", "Decent looking lightning bolts are really hard to pull off, well done.", "iq, 2015-02-19Very cool!", "xuanshao, 2023-06-09\u725b\u903c", "zhimo, 2020-01-11suggest for hors,change to such", "float hors = mod( iDate.w/3600.0, 24.0 );", "because hours hand shouldn't move per hour;", "Dreadghorg, 2018-12-18Also, I'm sorry the formatting got so screwed.", "Dreadghorg, 2018-12-17suggestion for hours and minutes to align with minutes and seconds progressing (ex : the hour Hand doesn't typically stay statically on the hour mark until the next hour)", "", "// seconds hand", "vec2 dir;", "float secondsVal = 6.2831*secs/60.0;", "dir = vec2( sin(secondsVal), cos(secondsVal) );", "col = line( col, vec2(0.0), dir*0.9, uv+0.05, vec2(0.005,4.0), vec4(0.0,0.0,0.0,0.2) );", "col = line( col, vec2(0.0), dir*0.0, uv+0.05, vec2(0.055,4.0), vec4(0.0,0.0,0.0,0.2) );", "col = line( col, vec2(0.0), dir*0.9, uv,      vec2(0.005,1.0), vec4(0.5,0.0,0.0,1.0) );", "", "// minutes hand", "float minutesVal = 6.2831 * mins/60.0 + secondsVal/60.0;", "dir = vec2( sin(minutesVal), cos(minutesVal) );", "col = line( col, vec2(0.0), dir*0.7, uv+0.05, vec2(0.015,4.0), vec4(0.0,0.0,0.0,0.2) );", "col = line( col, vec2(0.0), dir*0.7, uv,      vec2(0.015,1.0), vec4(0.0,0.0,0.0,1.0) );", "", "// hours hand", "float hoursVal = 6.2831 * hors/12.0 + minutesVal/12.0;", "dir = vec2( sin(hoursVal), cos(hoursVal) );", "col = line( col, vec2(0.0), dir*0.4, uv+0.05, vec2(0.015,4.0), vec4(0.0,0.0,0.0,0.2) );", "col = line( col, vec2(0.0), dir*0.4, uv,      vec2(0.015,1.0), vec4(0.0,0.0,0.0,1.0) );", "iq, 2018-09-08Added!", "pyrite, 2016-06-17iq,", "consider inserting:", "col = line( col, vec2(0.0), dir*0.0, uv+0.05, vec2(0.055,4.0), vec4(0.0,0.0,0.0,0.2) );", "below line 69 to get a shadow for the center circle.", "Trisomie21, 2013-03-04The draft link is not visible.. so here is the resolution independent anti-aliased version.", "http://glsl.heroku.com/e#7143.0", "Trisomie21, 2013-03-03Can you view this ? https://www.shadertoy.com/view/Mdf3RH", "Trisomie21, 2013-03-03Argh, formating got lost...", "Trisomie21, 2013-03-03Try this for the tick marks", "", "// hours & minute marks", "float unit = r * 6.2831;", "float h = mod(a*r + unit/(12.*2.0), unit/12.);", "h = 3.0-.5*abs(h - unit/(12.*2.))*iResolution.x;", "h *= (1.-step(r, .84))*step(r, .95);", "float m = mod(a*r + unit/(60.*2.0), unit/60.);", "m = 2.-.5*abs(m - unit/(60.*2.))*iResolution.x;", "m *= (1.-step(r, .89))*step(r, .95);", "col = mix( col, vec3(0.0), max(m, 0.)+max(h, 0.) );", "", "I also try this for your lines", "", "float distanceToSegment( vec2 a, vec2 b, vec2 p, float thickness )", "{", "vec2 pa = p - a;", "vec2 ba = b - a;", "float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );", "", "return clamp((thickness-.5*length( pa - ba*h)*iResolution.x), 0., 1.);", "}", "tomachi, 2022-06-10Bravo. Amazing eyes.", "holmhansen57, 2022-04-25sooper cool", "adammaj1, 2022-04-23cool. My grahic card seem to old. NVIDIA GeForce GTX 770/PCIe/SSE2", "ifaswind, 2022-04-23Carzy!!!", "IWBTShyGuy, 2022-04-21awesome!", "lz, 2022-04-20Very cool.", "mrange, 2022-04-20Very cool and surprisingly little code.", "momsul, 2021-09-12amazing  work OMG . can i use this on synesthesia live .please help me", "zchajax, 2020-11-10Very nice!", "terraquoia, 2020-06-30It is all code. No models are imported. It is what is called \"procedurally generated\".", "znopgamer, 2020-05-29is the snake created using the code or imported 3d model ? OMG its amazing..", "ocb, 2020-04-04Eyes are stunning. Love the crossing branches in the foreground.", "tehsauce, 2020-04-03beautiful!", "terraquoia, 2020-03-29Doing math is one thing. But this is NATURE. There's no doubt math is in everything !", "dr2, 2020-03-29Very realistic.", "crewce, 2020-03-25wow", "JohnShadow, 2020-03-25So cool, really good work can't wait to see more!", "monsterkodi, 2020-03-22Amazing!", "Passion, 2020-03-22The blades of grass occluding the camera are a nice touch makes it seem like the camera is at ground level in the grass, nice!", "firegump, 2020-03-22wow~~~~!!!!!!", "PauloFalcao, 2020-03-22So cool", "felipunkerito, 2020-03-22Wow", "ccricers, 2020-03-21So realistic, I hope it doesn't eat my mouse!", "EvilRyu, 2020-03-21I just saw this on Youtube and thought it's a real snake... until I saw the title.", "excellent modeling and texturing!", "GottZ, 2020-03-21such noodle so danger..", "", "holy shit!", "Mainuss, 2020-03-21A W E S O M E ! ! ! !   This is realy ART of CODE,    B R A V O ! ! ! !", "tdhooper, 2020-03-20I thought this was a photo from your thumbnail. Superb shading, I love the random offset trick to get the head scales, they look really natural.", "", "I see a 1px halo around the snake, using linear instead of mipmap filtering for iChannel0 fixes it. Moving the texture lookup out of the branch also works.", "poljere, 2020-03-20Great work!", "gPlatl, 2020-03-20Wooow, fantastic modelling and great animation!", "And the sound ... makes it feel so atmospheric.", "Anyway, a new masterpiece!", "jorge2017a1, 2020-03-20Now with the green background you look better !!!...", "Ahora con el fondo verde se mira mejor!!!", "flockaroo, 2020-03-20wow, really good! the subtle eye movements...", "MeDope, 2020-03-20Name 10/10 snake 11/10, very good work! Thanks for sharing. Your noodle is my pet in vrchat from today <3", "BigWIngs, 2020-03-20@everyone: Thanks!", "@Dave_Hoskins: I was breaking my head last night over that stupid initial mouse pos and couldn't figure why it wasn't working. Today I figured it out in 2 seconds. Must have been lack of sleep ;)", "Dave_Hoskins, 2020-03-20Great skin texture.  it.", "BTW it defaults to a slightly awkward top-down view here with a really dark background, is there any way we can see its face if we don't use a mouse?", "jorge2017a1, 2020-03-20Very surprised to see the good quality of the snake ... I see that I still have a lot to know  ....... well thanks for sharing", "..........", "Muy sorprendido de ver la buena calidad de la serpiente...miro que aun me falta mucho por saber .......bueno gracias por compartir", "Alfonzo, 2020-03-20Nice!", "blackjero, 2020-03-20Wow super nice! It feels so threatening... amazing shadow work", "antonOTI, 2020-03-20Woaw!", "Super nice and super fast!", "iq, 2020-03-20Amazing! It was in my to-do list (together with another 7 non-furred animals  But this is one is just perfect, so...", "PixelPhil, 2020-03-20Fantastic!", "shau, 2020-03-20Awesome", "newJasper, 2021-12-31good", "nikat, 2018-11-13this is good, thx", "dydxh, 2018-10-29Seem that the function \"marching\" is approximating something but I can't understood it. Is there some mathematics methods used to that?", "MajorTom_B, 2018-06-13It's very beautiful and useful for beginner", "oldXU, 2018-02-26thanks", "oldXU, 2018-02-26Good for my chrome browser on mobile. But when i use it in my game, the effect is strange. Any hints for this? Android, cocos2d-x sdk. @candycat", "jt, 2015-12-28I see - that's good to know! Dave's hash-function looks way more random on my system...", "candycat, 2015-12-28@jt I changed the hash functions using those without sine (https://www.shadertoy.com/view/4djSRW). It seems that the hash with sine may stretch very quickly on some machines. I dont know why...", "jt, 2015-12-25@candycat: it seems to be fixed now - did you change anything? Anyway, very cool shader!", "BTW My machine is a tiny PC with Radeon HD6310 Graphics with windoze.", "Browser: Opera/Chrome now. Perhaps it was a Firefox-problem?", "(Can't check now because Firefox refuses to run any shader at the moment, even after restart).", "hanmaokun, 2015-12-25awesome! \u00e4\u00b8\u2021\u00e8\u02c6\u00ac\u00e7\u0161\u2020\u00e4\u00b8\u2039\u00e5\u201c\u0081, \u00e5\u201d\u00af\u00e6\u0153\u2030\u00e7\u00ae\u2014\u00e6\u00b3\u2022\u00e9\u00ab\u02dc ;)", "candycat, 2015-12-23Thansk all!", "@jt it's ok on my Mac Chrome. It may be due to the hash functions.. What's your machine?", "jt, 2015-12-22Very interesting! Unfortunately I get some line-shaped artifacts/discontinuities.", "iapafoto, 2015-12-22Super good", "iq, 2015-12-22classic ^__^", "Poisson, 2022-10-28Amazing! I love the atmosphere", "jt, 2022-10-15Cool!", "Leria, 2021-02-25Yeah, so cool !", "MindPoison, 2021-02-22I very much like this. It has an oddly numinous feel to it.", "celiacjoe, 2021-02-21I dream of a diamond like this one.", "poljere, 2021-02-20Beautiful!", "andremichelle, 2021-02-20We used a slightly modified version for a featured track on audiotool.com", "https://www.youtube.com/watch?v=PpR5BEjgliE Hope you like it. If you want different credits, please contact me. Thanks!", "Shane, 2021-02-14Wow. This is so nice. It has a path traced feel to it... It's running at 60 FPS on my machine, so I'm assuming it's not, but I've learned not to assume anything these days.", "dean_the_coder, 2021-01-27Awesome.", "louis_C, 2021-01-27Thanks !", "iapafoto, 2021-01-27So good!", "iq, 2021-01-27This is really amazing. So cool!", "tdhooper, 2021-01-27So cool", "julianlumia, 2021-01-26amazing looks really good!", "iY0Yi, 2021-01-26Very nice! The sound is also really good.", "otkazano, 2021-03-22It is too difficult to understand it!!", "jt, 2017-10-11cool!", "Chris_M_Thomasson, 2017-10-02Radically awesome! Thank you so much for posting this: I really do appreciate it.", "", ":^D", "blackjero, 2017-09-28For a second from your description I imagined an actual laser related spreading NaN bug", "Gallo, 2017-09-27There is a bug, if a laser beam enters in one small hole at the end of the lane, the entire deathstar explodes.", "ingagard, 2017-09-27Yeah cool, but I miss some Tie Fighters... :-P", "iapafoto, 2017-09-26wow love it. very nice and very fast", "Shane, 2017-09-23 I love stuff like this. Very cool scene.", "", "I've played around with greebled looking surface construction before, but via less sophisticated approaches (combinations of random grid object overlays), which have resulted in less interesting surfaces than this.", "", "On a side note, second order Voronoi combinations with box-like distance metrics can produce some pretty interesting tech surfaces too.", "blackjero, 2017-09-22Tanks for the comments,", "", "zproxy; that''s cool! (and thanks for implementing the blur :-) I think the video is flipped horizontally though? (the strong shadow is normally on the right)", "", "P_Malin: thanks! I am looking forward to seeing your insane skills applied to this theme (among all the incredible stuff on this site Meta CRT is one of my favorite, I can smell the pixels and it makes me feel like I *become* the CRT, it made my face melt)", "", "ollj:", ">A #define likely outperforms an equivalent function on run-time", "no, defines (the kind you posted below) and equivalent functions are expected to output the exact same asm (if they don't file a bug report :-), assuming you pass the macro a variable and not complicated expressions in which case the macro version pressures the compiler and you might well pay a performance cost (just for the sake of having shorted source code). By work habit I favor perfs/not having to worry about macros side effects - but I understand the merit of shorter code here and I need to work on this. In my standalone exe all this lib stuff goes in headers, too.", "flockaroo, 2017-09-21wow!!!", "zproxy, 2017-09-21360 at", "ollj, 2017-09-21//you might be overthinking this: For a Groovy-Greeble, maybe just mix() max(a,-b) or -smin(-a,b) any distanceFieldGradient() with the output of any fOpGroove();", "", "// first object gets a capenter-style groove cut out", "float fOpGroove(float a, float b, float ra, float rb) {", "return max(a, min(a + ra, rb - abs(b)));", "}//http://mercury.sexy/hg_sdf/", "GregRostami, 2017-09-20OMG!!!!!!!", "shau, 2017-09-20Really cool. Love the camera bounce", "P_Malin, 2017-09-20Excellent! I have wanted to make a greeble shadertoy like this for so long. This looks great!", "blackjero, 2017-09-20(edited to remove the keyboard/reenable the .z test)", "ollj, 2017-09-20I find that  code that defines less periodic more parametric geometry, architecture patterns, is much more efficient with defines and swivels:", "It allows you to skip normals or textures per surface, as they become part of a \"pattern\" that can be set to anything easily, to skip it.", "", "A define likely increases opcode length more than an unrolled loop. older opengl implementations will unroll all loops anyways. All this is not necessarily bad though, its only risky if done so much that the compiler stack heap collides. and it can  increases compile time a bit", ".", "Unrolling loops (or otherwise transforming them) and using LUTs is the less memory efficient but faster run-time approach. It is being done 100% automatically since the early 90s. before that , loop optimization was a much more manual and explicit thing, and it was treasured for performance when you used sequences of modulo to reduce dome break or end conditions, calculating in bulks instead (early parallel/vector processing).", "A #define likely outperforms an equivalent function on run-time. because the processor more likely finds optimizations that can often be obfuscated by subroutines, or slowed down by branches and changing pointers. opengl is  lot about constructing and executing these 16x16 matrices doing multiple transformations in one cycle. this benefits from #define and loop unrolling.", "", "using determinant() likely increases compile time and runtime. it is a  matrix multiplication optimized vector processor after all.", "blackjero, 2017-09-20ollj:", "The defines you are suggesting are dangerous as the preprocessor is going to expand the input args as many times as you use them in the code (one reason for instancing functions), and also wrong because in some of them you forgot to close the whole expressions with parenthesis, which is going to cause bugs (your hermite3s for instance).", "", "The pow4 implementation doesn't depend on pow2 to guaranty the number of multiplications.", "", "I am not sure what using determinant buys me unless I can see some generated code...", "ollj, 2017-09-20Oh this uses CityEngine code papers, i played with that editor once, good fast pseudo-random mesh generator. Is great WYSIWYG. But it is better for a vertex shader than for a fragment shader.", "", "url=http://cehelp.esri.com/help/index.jsp?topic=/com.procedural.cityengine.help/html/manual/cga/basics/toc.html]CityEngine documentation[/url]", "is Great for bounding volumes, but", "- it is made for meshes, not for gradients.", "- its deformations have less continuity than twist(), this is for tracing, not for marching.", "- it misses out on some shortcuts that you can get from 4d to 3d projections.", "aiekick, 2017-09-20very cool", "ollj, 2017-09-20fract tesselation over 2 domains is as fast as expected.", "", "fract() tessellation tracer has its discontinuities. not too noticeable in this set, easily hidden in blur or noise or noisy texturing with more ambient occlusion and scattering reflections. good enough for this set.", "", "[hit space for mouselook mode] seems unecessarily convoluted.", "if(iMouse.z<=0.){left mouse button is up, set automatic camera path}", "else{mouse button is down, modify mouse input, resulting indifferent camera direction or moment in time}is a simpler while()  branch between mouse input and none.", "", "sd_TechTilesTestsSub*() 's quad-tree leaves might be replaceable with a mix of somefmT(), tessellated multi octave fbm, to get a seamless fbm with very long interval (tiles as large as a Mersenne twister).", "", "---", "", "I see some original good code, mostly;  overshoot*();", "", "I see a lot of unnecessarily repetitive code.", "compare with my most recent (cleaned) [/url=https://www.shadertoy.com/view/MlscWn]library[/url] (my newer libraries are full of noise and black-body radiation, too messy still):", "", "---", "", "//Swiveling makes a lot of duplicate code obsolete; Even though it barely looks identical, swiveling often cheaply folds something into an identity: Especially on simple rotations in more than 2 domains, or on [roots of unity].", "yset(p,v)==xset(p.yx,v).yx", "vec2 yset( vec2 p, float v ) { return xset(p.yx,v).yx;}", "//or 2 for one:", "#define Dset(p,D,v) p.D=v", "//showing that Dset() and *set() are not worth defining, you get the idea, swiveling obsoletes many functions.", "", "//If it is the same for function for multiple input types, make it a #define , and make sure that you enforce the correct order of operations, because a #define alias substitution does the order of operations is a bit arbitrary otherwise. <- extra brackets.", "", "#definesmoothstep_unchecked(x) ((x)*(x))*( 3.-(x)*2.)", "//better namespace for the above is \"hermite3s()\", with where \"s\" is scaling a more fundamental (more symmetric) function:", "//#define hermite3(a) 4.*(a)*(a)*(3.-2.*(a))", "//#define hermite3s(a) (hermite34(a))*.25", "#define hermite3s(a) (a)*(a)*(3.-2.*(a))", "", "#define float lensqr(v) dot(v,v)", "//I almost always define that as dd(a) dot(a,a) \"double dot\" or ll(a) dot(a,a) \"length*length\"", "but \"ll\" lost the namespace because it looks too much like \"||\"", "", "//A lot of library functions are subroutines of other library functions:", "#define pow4(x) pow2(x)*pow2(x)", "#define mincomp(x) -maxcomp(-x)", "vec3 chrominance( vec3 c ) { return c / maxcomp(c); }", "", "Iin 2d, the \"perpendicular dotproduct\" is identical to determinant(mat2(a,b)). In higher domains, determinant() is more recursive. determinant() is not as backwards compatible as a more explicit dotdot(perp(a),b))==determinant(mat2(a,b));", "//this condenses to:", "float calc_angle( vec2 a, vec2 b ) { return atan(  dot( a, b ), determinant(mat2(a,b)) ); }", "blackjero, 2017-09-20Thanks iq, yes sorry it is a bit more complicated looking than it should...", "", "Modeling: the trench is a U shape with 2 infinite greebled planes evaluations added, one for the top ground plane and one for the 2 (symmetric) vertical walls.", "", "Tiles are inspired by the shape grammar split encountered years ago in \"Procedural Modeling of Buildings\", but a lot of people who do generative art do that naturally I think. For hardcoding things a bit I chose to only work with split patterns that lead to 4 children (ascii art in comment), and do at most 1 recursion. I split each root tile (COLOR_TILES to visualize) into 4 subregions, then pick at most 2 children, and split those into 4, then stop. It's just a tedious mini kdtree of some kind... Space is distorted with linear steps in some places to get some diagonal patterns + some randomized 90degrees rotations for variation.", "", "There is a bit of extra obfuscating code for optimizing the marching with a bit of raytracing...", "bergi, 2017-09-20the flight-in is especially cool to watch!", "nice collection of utility code also..", "iq, 2017-09-20Super nice. The code is difficult to digest though. Do you have any links to tutorials/explanations on the modeling of the structure?", "srh, 2017-09-20Use the force Luke!", "Dave_Hoskins, 2021-07-07Well done. iChannelResolution is the resolution of the London picture. So that'll be 1024 for you, I guess. Decreasing the number of 'samples' will reduce the gaussian size., if the size is very small, you may need to lower the LOD value as well. Of course, understanding Gaussian blur properly is the best idea:- \ud83d\ude01 https://en.wikipedia.org/wiki/Gaussian_blur", "Passeridae, 2021-07-07Mostly figured out how to do this in HLSL.", "For now I don't understand whether I need all three \"iChannel0, U/iResolution.xy, 1./iChannelResolution[0].xy\" or not if I'm blurring a regular square texture map which resolution is known, like 1024 x 1024.", "", "I also would like to understand where the intensity of the blur is controlled.", "Dave_Hoskins, 2021-07-07It shouldn\u2019t be too hard to HLSL a shader, what are the errors you\u2019re getting?", "", "Also, have you tried a game engine forum, like Unity3d? All of Unity\u2019s shaders start as HLSL when I last checked. You may also be better off using a different approach, like a two pass system, or a stacked blur.", "FabriceNeyret2, 2021-07-07well, here is GLSL world, I have no idea of how HLSL work.", "Would you ask in a Python group how to program in Java ? ;-)", "\u2192 better ask in some HLSL related forum.", "", "But are you sure you can't work with GLSL ? in the browser, it automatically work whatever your platform, even Window (by default it is transpiled to HLSL ).", "", "How, BTW, have you tried clicking on \"compiled\" ? maybe on Windows you would see the result of transpilation.", "Passeridae, 2021-07-07Hi!", "Can you give any tips on how to rewrite it into HLSL to blur a texture inside a shader? I'm just starting with shaders and coding and having a hard time converting this one to HLSL. Thanks!", "FabriceNeyret2, 2021-07-01well, here is GLSL world. you should try some forum or stackexchange related to Skia.", "for instance if skia is not meant for massive parallelism, it may not have the equivalent of hardware derivative at all, that allows the automatic evaluation of MIPmap LOD.", "NakedBowman, 2021-07-01Im using sksl, tried that nothing works.... and then the only documentation I can find about this is here https://skia.org/docs/user/sksl/", "FabriceNeyret2, 2021-06-30texture() allows a 3rd parameter that is a bias to the current LOD computed for your U.", "texelFetch() access integer LOD.", "it all depends what your language provides !", "NakedBowman, 2021-06-30Is there a way to get textureLod() without using textureLod, Im working with another shader language and I don't think I have the equivalent to textureLod()...", "FabriceNeyret2, 2020-06-22of course, and it's probably the right thing to do : tune parameters so as s = samples/sLOD has a target value.", "markymark, 2020-06-22This is great! I wonder if there was a way to pick the LOD level depending on the sigma? It seems like this could work for big kernels?", "FabriceNeyret2, 2017-10-26Cost of modulo and div: no. see discussion right below ;-)", "", "Stretching: well, the problem is the choice of how to map the image on the window at first !", "But if you do want an screen-isotropic gaussian despite stretched mapping, it's really no problem: just trace an elliptic gaussian in texture space (using inverse mapping ).", "luluco250, 2017-10-26Interesting how you reduced the loop, but isn't there any impact to using modulus and division?", "Also a nitpick about LODs is that the picture inherently looks a bit stretched, since they work in 1x1 aspect ratio.", "FabriceNeyret2, 2017-10-26what is pretty safe is that all is unrolled on all architectures. Then, I suppose all/most compilers replaces variables by their values and thus simplify calculations, even when not declared as const (I should once check the compiler output, anyway here const are declared so).", "Dave_Hoskins, 2017-10-26Oh I see. I guess driver dependency means we never really know from one machine to another. But it does sound like a safe bet.", "FabriceNeyret2, 2017-10-26Nope, not at runtime. once unrolled, (i%s) is (const % const)  and replaced by its value (or should be)", "Dave_Hoskins, 2017-10-26Two shorter const loops would also get unrolled, but you've added two divides in there now.", "FabriceNeyret2, 2017-10-26you're very welcome :-) .", "Now, all that I say or code is not always warranted perfectly clean or exact, so just take it as material for thinking ;-)", "ingagard, 2017-10-26Fabrice, thanks for being such important part of the shader comunity. Things like this helps us noobs evolve. :-)", "FabriceNeyret2, 2017-10-26A reminder that loops are unrolled. All this is done at compile time ;-)", "Dave_Hoskins, 2017-10-26I'm curious, vec2(i%s, i/s) includes two integer divides, is that really faster than using two const loops? Or is it just smaller code?", "reinder, 2018-07-15This is still one of my favourite shaders on Shadertoy. Very nice!", "flakeyarn, 2015-07-28tasteful cel shading!", "cabbibo, 2015-02-19wow. so so so so delightful!", "Danguafer, 2013-03-26Nice one  Very artistic.", "ssdsa, 2013-03-18Yes, very nice and unique!", "robertcupisz, 2013-03-18Wow, thank you guys", "bloodnok, 2013-03-18I love the particles in the light...", "PauloFalcao, 2013-03-17Very cool!", "ushiostarfish, 2013-03-17very coooool", "Voltage, 2013-03-16Very nice Robert.", "fursund, 2013-03-16Really good stuff!", "iq, 2013-03-16I love it. There's lots of attention to detail here. The animation of the tentacle feels very natural/organic/real, you got those subtle particles filling the lit volumetric space, there's no noise/artifacts anywhere. Dunno, feels great and perfect and beautiful. I love it.", "robertcupisz, 2013-03-16Thanks, I was aiming for cheesy sci-fi ;)", "Dave_Hoskins, 2013-03-16You've made a lovely scene here, with a great purple tint. It's Noire comic book and SciFi all in one!", "Lumos, 2020-08-04Thank you", "kaneta, 2020-08-04@Lumos", "Hi!", "You can use the video, but if you want to use other than my code, you need to follow the license below included in the shader.", "", "TheGrid by dila", "https://www.shadertoy.com/view/llcXWr", "", "The Drive Home by BigWings", "https://www.shadertoy.com/view/MdfBRX", "Lumos, 2020-07-29Hi  Could i use your shader commercially as well?", "kaneta, 2020-06-29@mastakillaman", "You can use my code, but you need to comply with the licenses below that are used in this shader.", "", "TheGrid by dila", "https://www.shadertoy.com/view/llcXWr", "", "The Drive Home by BigWings", "https://www.shadertoy.com/view/MdfBRX", "mastakillaman, 2020-06-28Hello! Can I use this cool shader in my commercial app? Many thanks!", "kaneta, 2019-02-14thank you!", "iq, 2019-02-13Looks good", "jt, 2021-10-12Wow, intriguing!", "neozhaoliang, 2019-02-02some stella polyhedra can be directly generated by this approach, for example the two dual ones with symbol (3, 5/2), but (5, 5/2) can not.", "ollj, 2019-02-01how about some Stellating polyhedra?", "a stellation parameter here?", "neozhaoliang, 2018-10-08What do you mean by \"kleinian-fractal variant \"?", "To implement the fractal in your link I need to understand what is a Kleinian fractal first and then figure out how to use CSG instead of DE in POV-Ray ...", "ollj, 2018-10-07do you think its worth making a kleinian-fractal variant of all these folds?", "https://www.shadertoy.com/view/XsdGWM", "neozhaoliang, 2018-09-27The code is too complex for me.. I gave up. I used python and POV-Ray wrote another version, which renders almost all 3d/4d uniform polytopes. See the examples here:", "https://imgur.com/a/KQD7ewA#YEu5FJT", "and the code here:", "https://github.com/neozhaoliang/pywonderland", "", "The algorithm is by solving words in the symmetry groups ...", "ollj, 2018-09-26the funniest part is interpolating 2 shapes over one domain of that shape(s generalization), whether its in screenspace or opject space, this is a too easily ignored trick to fold a higher dimensional object down into less domains.", "mattz, 2018-05-18planar_proj is an orthogonal transformation so it's transpose is its inverse. In glsl, for a vector v and matrix M, v * M = transpose(M) * v.", "", "in this case q * planar_proj = transpose(planar_proj) * q = inverse(planar_proj) * q", "", "hope that helps", "neozhaoliang, 2018-05-18Thanks for this great  project! I'm trying to extend this project by adding more features and drawing the star-like polytopes. I have a problem here in the code:", "", "vec2 planar_from_sphere(vec3 q) {", "q = q * planar_proj;", "return q.xy / q.z;", "}", "", "could you explain how q is projected to the plane (I guess it's projected to the tangent plane at (0, 0, 1)?) and why q is multiplied at the left of the matrix?", "yuanming, 2018-04-18amazing!!!!", "PauloFalcao, 2018-03-27Very cool, I love the interface.", "AnnaEverson, 2018-03-23I like this one", "rgbk, 2018-03-19HELP! WHAT IS HAPPENING TO MY BRAIN!???", "834144373, 2018-03-16Very cool!", "knighty, 2018-03-11", "Lucanio, 2018-03-10This is the most amazing one ever", "karexy, 2018-03-09Awesome!!", "Chris_M_Thomasson, 2018-03-08Excellent! :^)", "vgs, 2018-03-08Wonderful!", "mattz, 2018-03-07Hynoer - that's a dihedron, which breaks my renderer, but I figured it was more fun to leave in, for variety's sake. https://en.wikipedia.org/wiki/Dihedron", "Hynoer, 2018-03-07Amazing and interesting (find a little problem when you set 5 2 2 and set absolute left edge of the right triangle with last draw option)", "Yrai, 2018-03-06Pure gem", "Klems, 2018-03-06Super nice! I'm not sure I'll ever be able to figure out the maths behind this.", "P_Malin, 2018-03-06Superb!", "EntityBlack, 2018-03-06Sometimes I think the most amazing people are concentrated just here on shadertoy.com o.O I sense great powers from this shader. Who are you, the magician?!", "Shane, 2018-03-06 So elegantly presented, and useful.", "tehsauce, 2018-03-04So well done! The math, the ui, the rendering, all beautiful!", "mattz, 2018-03-04Thanks, everyone! Looks like this one struck a chord with a few people", "flockaroo, 2018-03-04very good and super clean!", "nicoptere, 2018-03-03:O holy shit ! (sorry, that's all I can say for now....)", "tdhooper, 2018-03-03:O unbelievably slick", "samuelotherion, 2018-03-02What the ...?", "This is amazing!", "mla, 2018-03-02Gorgeous. I'm encouraged to publish https://www.shadertoy.com/view/MlSBDz - nothing like as polished but does some more types of polyhedra: snubs, duals, prisms and even a few non-convex ones.", "aiekick, 2018-03-02seriously good. wow", "rigel, 2018-03-02This is an amazing shader, not only in the visual aspect, but on the learning potential that it offers with its clean structured code.", "TekF, 2018-03-02This is amazing!", "FabriceNeyret2, 2018-03-02diamond: right, I now see them !", "", "Amazon work: was is really a compliment ? :-p", "ThomasSchander, 2018-03-02Amazon work, very clean and elegant. Thanks for sharing. @Fabrice I think the diamond icon adds an outline!", "FabriceNeyret2, 2018-03-02very nice !", "The diamond icons seems to do nothing ?", "iapafoto, 2018-03-02No need to read the name to understand that it is Mattz works. Fantastic shader !", "koiava, 2018-03-02wow. Really nice!", "russ, 2018-03-02mattz you rock!", "iq, 2018-03-02Super amazing shader. Elegant UI, clean rendering, well structured code and renders fast, all to implement a very interesting maths visualization.", "blackjero, 2018-03-02Gorgeous viewer :-)", "wyatt, 2018-03-02this is awesome!", "jfwf, 2023-01-26Nice work in fake light mode. I have two questions:", "(1) The clouds seem too dark by using simulate light. Why?", "(2) Does the shader use a isotropic phase function?", "jorge2017a1, 2021-04-16 the clouds look great ... good job !!!!", "valentingalea, 2020-09-08@zproxy thank you very much for the 360 video! Unfortunately the ambient sounds you added got flagged by Youtube", "zproxy, 2020-09-08360 at", "beanpuffs, 2020-07-21@valentingalea Awesome! Thanks for the speedy response! I've used your code here", "https://godotforums.org/discussion/23480/dynamic-rayleigh-mie-sky-with-volumetric-clouds-sky-shader#latest", "valentingalea, 2020-07-21@beanpuffs this shader is part of an open source library which is licenced MIT so feel free to use it as you want", "beanpuffs, 2020-07-21Would you be willing to pick a license for this? I know its super old but the default one isn't very fun", "valentingalea, 2017-03-20cheers @iq!", "iq, 2016-08-03Change col = mix(sky, cld.rgb, cld.a); to col = mix(sky, cld.rgb/(0.000001+cld.a), cld.a); to get rid of the black borders", "zproxy, 2016-07-12next add ground shadows from clouds", "jt, 2022-10-13Cool!", "pyBlob, 2021-08-07Very snappy, and clean.", "Cubed, 2016-11-02I've been looking for a visualisation of ray-marching for ages. This is really useful, thank you!", "dila, 2016-09-25nice to see whats really going on", "lara, 2016-09-14Aww thank you", "otaviogood, 2016-09-14very nice. You have been making some really amazing shaders recently.", "shau, 2016-09-10This demonstrates the idea of ray marching so well. Would be good as wikipedia example or some such thing", "ollj, 2016-09-10its cute and adds nice things to other visualizations.", "lara, 2016-09-10Thanks, I guess this could also be useful for debugging alternative algorithms.", "Changed the animation slightly to make the visualization more accurate.", "eiffie, 2016-09-10Nice teaching tool.", "GregRostami, 2016-09-10So cool! Thank you.", "vgs, 2016-09-10nice!", "public_int_i, 2016-09-10Cool idea", "FabriceNeyret2, 2017-05-02no longer compiling in webGl2.", "ollj, 2016-05-06can you bend the ray depending on its surroundings to make more realistic gracity wells?", "jt, 2016-02-01Cool", "iq, 2016-01-31Nice visualization!", "FabriceNeyret2, 2016-01-30nice !", "note that you could derivate the integral continuous version: the opacity (i.e. cross section) for a ray-cone passing through a pixel (and thus making anti-aliased rendering with one single ray per pixel).", "jmc, 2013-03-19Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "XT95, 2013-02-27very nice !", "poljere, 2013-02-26I love these 4 beautifully rendered verts, impressive work simesgreen!", "iq, 2013-02-25ro: ray origin, rd: ray direction, (uu,vv,ww): the uvw coordinate frame. c0..4: color[0..4]. I like short variable names, it makes the code more identable, simple and readable than \"colorBlue\" and \"colorRed\" or \"rayFromCameraToPixel\". A combination that workd for me is short/elegant names, plus comments.", "TheSHEEEP, 2013-02-25Looks nice. But you should work on your coding style ;)", "", "ro, ww, uu, vv, rd, c1, c2, c3, ..., f, p, n...", "Sorry to say that, but the code is close to unreadable in the non-documented places. Times in which variable name length mattered in shader code are thankfully over, and you can always obfuscate when you need smaller code for webGL. But I wouldn't do it on this site ;)", "PauloFalcao, 2013-02-20Very cool!", "Dave_Hoskins, 2020-06-16\ud83d\ude0e\ud83d\udc4d Thanks.", "Lumos, 2020-06-16Its a live performance for psy and techno events in a club, so people can come and leave as they want but i can include the credits and a link to this Page at the end of the event if that works for you", "Dave_Hoskins, 2020-06-16Sure, of course. Can you credit me please? And link to this page if possible?", "Dave_Hoskins, 2020-06-16[This comment has been hidden by the shader author]", "Lumos, 2020-06-16Very nice  Could i use your code when VJing?", "GregRostami, 2019-06-23LOVE the Jarre music!!", "flypig, 2015-03-23Hi! This is such a great shader using so little code. Quite inspirational. I particularly like the effect of the occasional over-saturation.", "", "I'm also really keen to use it as part of a website I'm developing. Can I ask whether you'd be willing to allow this, and if so whether there's a licence you'd be willing to release it under?", "movAX13h, 2013-05-24The warp effect is very strong, so cool!", "cmarangu, 2020-04-17oh i know how u do thus effect, i use a white center but then the laser color fading to backgrond color", "I used it here https://www.shadertoy.com/view/3dySDm", "and here https://www.shadertoy.com/view/wdVSDc", "", "very cool effect not very hard to create", "FabriceNeyret2, 2015-11-05no worry ! ;-)", "it's just that in my case, more length/redundancy = more bugs.", "", "sin(mod(x, 2pi)) : strange ! and strange it fix it.", "", "the only serious worry is pow(negative : a part of your drawing is missing on linux and mac.  -> pow(abs(", "epicabsol, 2015-11-05FabriceNeyret2: Thanks for taking the time to look through the code. There are a few reasons this isn't as optimized as it could be:", "- It was 2 AM", "- This was my first foray into GLSL (ES)", "- I wanted to get it working as fast as possible", "", "Also, the sin(mod(x, 2pi)) is there because I noticed that high values of x introduce artifacts with sine. I was not sure if it was the sin() function not playing well with high values of x (hence the use of mod), or if the issue was increasing floating point error.", "FabriceNeyret2, 2015-11-05cleaned-up (a bit):", "vec2 R = iResolution.xy;", "", "float Strand( vec2 uv,   float hoffset,  float hscale,  float vscale,  float t)", "{", "uv /=  R;", "float g = .06 * R.y;", "float d = 1. - abs(uv.y - ( sin( uv.x * hscale*10. + t + hoffset )  /4. * vscale", "+ .5))*R.y;", "return    clamp(d     , 0., 1.)", "+ clamp(1.+d/g, 0., 1.) * .4 ;", "}", "", "vec4 Muzzle( vec2 uv)", "{", "vec2 u = ( R*vec2(1,.5) - uv ) / R.y;", "float T = floor(iGlobalTime * 20.),", "theta = atan(u.y,u.x),", "len = (10. + sin(theta * 20. - T * 35.)) / 11.;", "u.y *=  4.;", "float d = max(-0.6, 1. - length(u)/len);", "return d*(1.+.5* vec4( sin(theta * 10. + T * 10.77),", "-cos(theta *  8. - T *  8.77),", "-sin(theta *  6. - T *134.77),", "0));", "}", "", "void mainImage( inout vec4 c,  vec2 uv )", "{", "float t = 4.*iGlobalTime,", "s =  1. + sin(iGlobalTime) * 5.;", "c += Strand(uv, 0.234   +s, 1.0, 0.16, 10.0 * t) *vec4(1,0,0,0);", "c += Strand(uv, 0.645   +s, 1.5, 0.20,  8.3 * t) *vec4(0,1,0,0);", "c += Strand(uv, 1.735   +s, 1.3, 0.19,  8.0 * t) *vec4(0,0,1,0);", "c += Strand(uv, 0.9245  +s, 1.6, 0.14, 12.0 * t) *vec4(1,1,0,0);", "c += Strand(uv, 0.4234  +s, 1.9, 0.23, 14.0 * t) *vec4(0,1,1,0);", "c += Strand(uv, 0.14525 +s, 1.2, 0.18,  9.0 * t) *vec4(1,0,1,0);", "c += clamp(Muzzle(uv), 0., 1.);", "}", "FabriceNeyret2, 2015-11-05sin(mod(x,2pi)) -> sin(x)", "FabriceNeyret2, 2015-11-05the montruous #5,#6 lines are almost duplicates", "FabriceNeyret2, 2015-11-05#14: iResolution.y / 2.0 cancels", "FabriceNeyret2, 2015-11-05pow(negative prohibited -> pow(abs(", "or use x*x, length, dot(x,x)", "FabriceNeyret2, 2015-11-05float(int( = floor(", "FabriceNeyret2, 2015-11-05alot could be factored out !", "+ more use of vectors, like, vec3(i * color.r, i * color.g, i * color.b); = i*color", "Nrx, 2015-11-05Nice! I like it!", "MysteryPancake, 2022-12-30This is a fantastic visualiser! Though the sine wave SDF is not euclidean, raymarching fails", "FabriceNeyret2, 2017-10-07no longer compiling in webGL2", "FabriceNeyret2, 2017-04-21no longer compiling in webGl2.0. globals init must now be const (or do it in main).", "iq, 2016-01-21Super elegant!", "Shane, 2016-01-21Pretty, and useful. Fantastic visualization.", "", "I spent far too long playing around with this, plugging in various polygons and curvy surfaces. The worst scenario seems to be skimming along near a surface, but missing it.", "iapafoto, 2016-01-21line 141 !", "iapafoto, 2016-01-21Very nice colors.", "For inside part, you could add an abs on t :", "if (abs(t) < 0.01) break;", "iq, 2018-04-03It looks great!", "shau, 2018-04-01Thanks. @Jamie_Pendergast, Pretty meaningless title really but it was a comment I read regarding code styling of functions in Javascript", "duvengar, 2018-03-31Very nice!", "dila, 2018-03-30A little noisy, but the balls are a nice touch", "Jamie_Pendergast, 2018-03-30What do you mean by the title?", "leimapapa, 2023-05-03Crazy impressive", "01000001, 2023-03-30Incredible!", "smr, 2023-01-24Wow!!", "SarahC, 2017-02-01@iq - what gfx card you on?", "iq, 2017-02-01It works now, thanks for the fix!", "SarahC, 2017-02-01I love the look of this!", "Sjeiti, 2017-01-19Still don't see them but I replaced the method anyway.", "iq, 2017-01-18Chrome and Firefox", "Sjeiti, 2017-01-18@iq I don't see any black blobs, is that on a specific browser?", "iq, 2017-01-18I have lots of image artifacts, big blobs of black pixels. I can fix the bug by replacing taylorInvSqrt() by the GLSL native inversesqrt().", "GregRostami, 2017-01-18The particles are GREAT!!", "FabriceNeyret2, 2017-01-17nice particles motion (and look) !", "Lemivision, 2017-01-17Looks great! I like sparks", "azaza, 2021-03-22@FMS_Cat, I wonder, if there is any way to use this code for Unity, cause this looks really identical to C#.", "jt, 2020-06-28great :-)", "heliumsoft, 2017-09-29Very nice effect.", "Can i use your code in my commercial project?", "FMS_Cat, 2015-02-08>movAX13h", "Thank you! I made this because I wanted to imitate your shader. Yours is more smart and beautiful than mine.", "movAX13h, 2015-02-06welldone! also see Ascii Art shader ;)", "iq, 2015-02-06Haha, crazy", "dila, 2015-02-05It's good! I guess if you had more symbols you'd need a better way of matching the colours though.", "Peace, 2021-12-13if you are getting black snowflakes do: fragColor.a = 1; at the end", "Crazybytes, 2018-12-29When i run it with sfml (even changed lowp and medium p version number) i get black snowflakes, only little shadow of snowflakes.", "mroczek75, 2018-07-24fajne p\u0142atki \u015bniegu", "WAHa_06x36, 2018-07-11Looks familiar! https://wakaba.c3.cx/s/lotsablankers/lotsasnow", "", "Great minds think alike.", "", "Anyway, seconding that fragColor needs to be initialised to 0.0 to work on the Mac.", "GregRostami, 2018-07-11Very pretty. I agree with coyote. On my Macbook Pro it's a noisy screen until I changed line 179 to:", "fragColor *= 0.;", "coyote, 2018-07-10Very nice!", "Just one thing: initialise the whole fragColor to zero in line 179. Otherwise on some computers it shows only noisy screen. (on mac mini for example...)", "Uninitialised variables and uninitialised pure out function parameters are not guaranteed to be zero.", "archee, 2018-07-09The instrument sound generation is super. Everybody uncomment  the music.", "ollj, 2017-06-01whatever optics has such awesome depth of field, i want it!", "rws, 2015-12-31This is miraculous!!", "jt, 2015-12-30Very nice!", "TambakoJaguar, 2015-12-30Very well done!", "foxes, 2015-12-30public_int_i, fractal steps can try combine with ray marching steps, then there is no difference with noise. I think.", "the noise has its disadvantages when used with ray marching.", "foxes, 2015-12-29I have long thought what better to combine snowflakes, first there was one snowflake on a black background, that's all. and then I came across this:", "", "http://s01.yapfiles.ru/files/603603/snowflakes_background_bright_texture_winter_55300_1920x1200.jpg", "public_int_i, 2015-12-29Haha I was also thinking of doing snowflakes! And foxes I think the noise works very well it seems to run very quickly .", "vgs, 2015-12-29Cool!", "The small little lights were a nice addition!", "foxes, 2015-12-29it's just noise, may with fractals will be better.", "BigWIngs, 2015-12-29I wanted to do something like that but you beat me to it ;) Looks great!", "public_int_i, 2015-12-29Great snow flake patterns!", "tomkh, 2015-12-29Instant like", "Dave_Hoskins, 2015-12-29Oh, nice one!", "grom12345, 2022-08-08Very nice automata!", "dkaraush, 2022-08-06I believe that's not what you intentionally did, but this actually behaves much cooler than common fluid. Nice work!", "oOLzYOo, 2022-07-26really love it\u263a", "nr4, 2022-07-19capsadmin: https://www.shadertoy.com/view/XtdSDn", "", "smooth life is already on shadertoy ;)", "N8Shader, 2022-07-11The code is so simple... and the result so complex.", "iq, 2016-01-09Nice", "knighty, 2016-01-07Impressive!", "TambakoJaguar, 2016-01-07Very cool and impressive, well done!", "aiekick, 2016-01-06very nice result", "capsadmin, 2016-01-06It's very inspired yeah. There are some much more interesting versions of game of life based on similar concepts like smoothlife. (would love to see that here)", "", "I'm not very good at math but I know sin, cos, tan and pi go well together somehow.", "aiekick, 2016-01-06it seems to be based on the game life propagation ?", "Hamneggs, 2016-01-06Whoa", "kropka, 2020-02-04orginal proposition", "aggigi, 2020-01-23Great job!", "Dirk, 2019-12-16This is just what I was tooking for. You are so on point IQ.", "Your Pratrion is fire hermano", "jeyko, 2019-12-05Yeah, I commented, before I saw your 3d example. Awesome!", "iq, 2019-12-05oh, this just works in 3D too, there's nothing special about 2D in this one", "jeyko, 2019-11-28Now someone figure this out in 3d :d", "etale_cohomology, 2017-07-26So this is a call to 70 line segments, in order to get a piecewise-linear approximation to the parametric curve? I wonder if there's a way to do it with... one call to the map function, in the spirit of distance fields.", "iq, 2015-02-17If that happens I'll be an observer this time, no cycles to play with this for now", "eiffie, 2015-02-17I think we should have a little competition to see who can draw this curve with the fewest calls to the map function and still make it look respectable. Better still it should draw any curve without needing to tweak variables. I think we are all unsatisfied with our current methods.", "FabriceNeyret2, 2015-02-17Here, I tried a logN construction (at least above the segment scale) https://www.shadertoy.com/view/XdlXDr  . Not perfect, though.", "iq, 2015-02-17Ah I see.", "nimitz, 2015-02-17Sorry, badly worded, I meant a way to compute upper boundary of the clamp() at line 49 based on the curve.  But yeah, I guess this is the same general problem.", "iq, 2015-02-17That's the point of this shader, and it is implemented in line 49. I'm unsatisfied though, I feel it should be doable much more efficiently...", "nimitz, 2015-02-17Took me a while to realize how you managed to draw curved segments with your sdSegment() function.", "", "This is very nice, all you need now is to add is a way to compute max step length dynamically and you've got yourself a winner (I'll try my hand at it)", "NyanCoder, 2023-02-28Also you can put small enough textures as base64 text", "anonbeat, 2023-01-19Nice work. Is there a way to make this happen with a shaderToy instance embedded on a third party website?", "playersteve19, 2023-01-01Thank you so much!", "Alpaga, 2022-10-03Thanks @AntoineC and @johnao for sharing this!", "RandomStroke, 2022-02-20Thanks for sharing this trick !", "johnao, 2021-05-01I just wrote a code snippet that you can paste into browser console to get an upload button for every channel.", "", "NOTE: FILES ARE NOT ACTUALLY UPLOADED SO CHANGES CANNOT BE SAVED.", "", "for (let i = 0; i < 4; ++i) {", "d = document.createElement('div');", "d.className = \"upload\";", "d.innerHTML = '<button onclick=\"document.querySelector(\\'#texture' + i + '>div.upload>div>input\\').click()\" style=\"width:100%;\">Upload</button>' +", "'<div style=\"display:none;\"><input type=\"file\" accept=\"image/*\"/>' +", "'<p>#</p></div>';", "document.querySelector('#texture' + i).append(d);", "document.querySelector('#texture' + i + '>div.upload>div>input').addEventListener('change', function () {", "if (this.files && this.files[0]) {", "let p = document.querySelector('#texture' + i + '>div.upload>div>p');", "URL.revokeObjectURL(p.innerText);", "p.innerText = URL.createObjectURL(this.files[0]);", "gShaderToy.SetTexture(i, { mSrc: p.innerText, mType: 'texture', mID: 1, mSampler: { filter: 'mipmap', wrap: 'repeat', vflip: 'true', srgb: 'false', internal: 'byte' } });", "}", "});", "}", "dtristram, 2021-04-25this works beautifully and is a nice way to become aware of the javascript interface.  thanks!", "petruza, 2021-03-14Can't imagine why this is not built-in shadertoy", "Remming_Senegal, 2020-12-22That is awesome. Totally gonna use this", "wookworld, 2020-01-16does anyone know a way you can save, when i enter in my photos it gives me saving error can not save private assets", "Angramme, 2019-10-12ye it works", "utak3r, 2018-02-14Holy sh*t, it does work  Thanks man a LOT for this", "andrewww1, 2018-01-02Sorry for the late reply, here's a firefox version of it:", "", "https://addons.mozilla.org/en-US/firefox/addon/shadertoy-custom-texures", "", "turns out chrome and firefox use the same extension formats.", "Limeth, 2017-04-14Any chance for a Firefox version, Adrew?", "andrewww1, 2017-03-21If anyone's interested I made a script so you can drag and drop the image links into each texture slot to load them.", "https://github.com/andrewhills/ShadertoyCustomTextures", "dine909, 2016-03-07I've dabbled with the discard method on my OX's game - it works well, but it won't for people who's driver does not support discard, as not all do.", "AntoineC, 2016-03-07Dine909: one shot buffer is probably possible by combining \"discard\" and checking the frame number.", "AntoineC, 2016-03-07dine909: I agree that adding custom textures is not an easy decision. It would be very useful but, at the same time,  would render irrelevant certain shaders. There is also a potential for abuse and woul requires a closer monitoring of the posts.", "", "My goal is to show it is fairly easy to load customs textures to do your own experiments.", "", "Maybe the right solution is to allow loading a custom texture from the interface but without saving it if it is not a default shader. That way you can use your own images but still have to use the default textures when publishing a shader.", "dine909, 2016-03-07or i guess - another implementation of that idea could be to have one-shot pass buffers?", "dine909, 2016-03-06once you've done this, just go full screen, appreciate the detail vs effort vs fan speed (macbook pro) - I'm still in 2 minds whether a custom texture feature would be a good or bad thing -", "", "although saying that, what would be nice, would be a feature to allow one to use another shader on shadertoy as a custom texture, much like the soundcloud input, you'd specify a shadertoy ID, and resoultion, and ideally the server would render it (so it's attached as a static image not multipass buffer), that way, creativity is still bound to the solution, yet we can work on detailled textures in one shader, to utilise at high speed in another.", "Dave_Hoskins, 2016-03-06Yep. Nice textures!", "otaviogood, 2016-03-06Worked for me. It's a fun and potentially useful trick. Thanks.", "GregRostami, 2016-03-06Wow ... it worked! AMAZING!! Thank you.", "GregRostami, 2016-03-06Ooops ... I just read the instructions. I'll try it now.", "GregRostami, 2016-03-06I don't see a custom texture on my Macbook Pro running Chrome.", "golffin, 2022-06-13One thing that helped me understand the EyeRayTransformationMatrix was replacing the calculation with this", "vec3 ux = vec3(-1., 0., 0.);", "vec3 uy = vec3(0., 1., 0.);", "vec3 uz = vec3(0., 0., -1.);", "mat3 eyeTransformationMatrix = mat3(ux, uy, uz);", "", "", "This exposes that you are building a coordinate system which describes the window in the 3D space (typically called the view matrix) where the columns are the unit vectors of the coordinate system. This is described simply with godot's primer to 2D transforms: https://docs.godotengine.org/en/stable/tutorials/math/matrices_and_transforms.html", "lakartoza, 2022-05-07Amazing. Thank you for this. Also, you crack me up", "fl0a1e, 2022-03-16Thank you so mush to share this shader! I have learned more from this!", "PhilBurt, 2021-03-12Thank you SO MUCH! I have been looking for something that is, and I quote, \"human-readable\" for SO LONG! And I have found it! THANK YOU!", "antoinefortin, 2020-02-09Wow! This is one of those gems.", "ewerybody, 2017-08-14http://tree.is ? This website cannot be found anymore! But nice stuff used to be there: https://web.archive.org/web/20150911124246/http://tree.is", "etale_cohomology, 2017-07-24This tutorial is a jewel of explanation and lyricism. In particular, \"because well, rays are lonely, and want to be closer to things in the world\" =D This tutorial is teaching to love rays a little bit more. Because, you know, rays have got feelings, and a family.", "etale_cohomology, 2017-07-24Geez, where has this tutorial been my whole life?! <3 <3", "ollj, 2017-04-10just like you either move the pen or the paper to write/print,", "you either move the object, or the point, to offset the distance between point and object.", "", "keeping the object immobile and translating the point, is simpler than adding an offset parameter to the object, but signs are flipped. this is not done here.", "here, for simplicity, a single sphere and a single box are defined, including size and position.", "Angela23, 2017-04-03Why do we subtract box position? Why it should be at origin? same for the sphere. why?", "cabbibo, 2016-09-17@etd thanks so much! I know the emotion of academic and removed. Its all about having fun!", "gambhiro, 2016-07-07\"lets just keep it black, because who doesn't love the void\" lol", "", "Thanks for the great tutorial. I borrowed a university course book for computer graphics, but the style is so academic, so removed from hands-on practice that it is useless, I had to abandon it.", "", "This was much more comprehensible, and productive too!", "gambhiro, 2016-06-25Oh wow, raytracing with comments! Looking forward to read through it.", "pickledchickenfoot, 2016-06-12Thanks for making this! Wish more tutorials are like this...", "marko, 2016-03-04thank you very much! I was about to drop out as I couldn't understand any other raymarching tutorial...", "Balocre, 2022-10-07just wow", "otkazano, 2021-03-24I have no words! It is wow!", "morimea, 2019-09-29epic!", "felipunkerito, 2019-02-05Wow", "iapafoto, 2018-07-06Wow it does not crash any more so I can finally see him and it's just fantastic! Amazing works!", "VioletGiraffe, 2018-07-06This is exactly the kind of a shader that made me want to learn how it's done. Awesome work, never seen such a level of detail yet.", "wyatt, 2018-07-06no way! only a couple days ago I was riding the  shinkansen from tokyo to kyoto. you live in a beautiful place and you are quite the artist", "blackjero, 2018-07-05I have been living in Japan (esp. Kyoto) for a while so it is long term input. Maybe you were thinking of @reinder's awesome Tokyo shader? The tiled roof houses are vaguely inspired by Kyoto traditional wooden houses (machiya) and the buildings+neon lights by what you see when you travel by shinkansen.", "wyatt, 2018-07-05oh neat! was that your reference for the city? for some reason I remember seeing that you mentioned that you had never been - which amazed me when I saw it in person and saw that you had done it so much justice!", "blackjero, 2018-07-05There are lots of chill out Tokyo night drive videos on the net if you are into that sort of thing...", "wyatt, 2018-07-05I recently saw Tokyo for the first time and I was thinking of this shader the entire drive into the city", "blackjero, 2018-07-05Thanks for the star (despite the timeouts rate), and for all the kind words.", "@zproxy: I quite like the dramatic engine noise, and video helps with aliasing too obviously... note that in the final camera the city was not meant to be seen in perspective from high altitude, as it reveals the layout and hacky horizon.", "reinder, 2018-07-05Beautiful (and impressive)!", "zproxy, 2018-05-07360 at", "BigWIngs, 2018-04-17Wow, impressive!", "iq, 2018-04-16Very nice!", "blackjero, 2018-04-16snakebyteme2: I prefer not to release it yet as it seems to timeout more, but only differences being whitespaces and expanded defines I doubt it would help.", "snakebyteme2, 2018-04-13Fantastic work. Is it possible to get a link to the Non preprocessed version? I'm trying to convert this to HLSL via ANGLE and the preprocessed lines are getting rejected.", "theGiallo, 2018-04-13Great work!", "P_Malin, 2018-04-13Fantastic work and all in one textureless shader! The geometry is superb.", "chao_mu, 2018-04-13!!!!!", "blackjero, 2018-04-12Shane: indeed there was a bit of raindancing at the end in hope to reduce the percentage of webgl timeouts...", "flockaroo, 2018-04-11wow!! really good! so much detail, and still performing so well...", "Klems, 2018-04-11Very nice! Looks very polished.", "Shane, 2018-04-11 Wow, that is a lot of work for a shader -- I thought you did well just getting this to compile.  It looks fantastic, and runs pretty fast too.", "blackjero, 2018-04-11Thanks for watching and for the encouraging comments.", "Dave: glad you mention it, I love the series. It wasn't on purpose but naturally turned out that way. I would have called this shader Urban Fragments if it hadn't been the name of a track in R4 S.T already.", "@ocb: I am trying to escape the grid constraint but it's not easy. Compositing with curved highway geom helps but clipping logic gets tedious... splitting blocks helps too.", "Greg: Thanks! :-)", "shau, 2018-04-10Wow", "wyatt, 2018-04-10This is so detailed and amazing - incredible", "Dave_Hoskins, 2018-04-10Very 'Ridge Racer' - Fantastic rendering. And some crazy looking code!  it! Great sky stuff too.", "antonOTI, 2018-04-10Instant  super nice !", "ocb, 2018-04-10I am impressed by the mix of bulding grid and curving roads.", "ocb, 2018-04-10Wow, wow, wow!", "What a huge work!", "dila, 2018-04-10really great detail!", "jvb, 2018-04-10Great city and roads!!", "GregRostami, 2018-04-10That's the BEST City on Shadertoy!", "GregRostami, 2018-04-10OMG!!!!!!!!!!", "hikiko, 2021-08-19<3", "sqlin, 2015-06-15How to Use ?", "iq, 2013-07-01i like it, it's looks clean and classy", "slipster216, 2023-05-17Given points:", "", "vec2 A = vec2(0.235, 0.65);", "vec2 B = vec2(0.2215, 0.5615);", "vec2 C = vec2(0.208, 0.473);", "", "You get some very odd distortion in the distance field.", "oneshade, 2021-06-25Nice (very short solver too )!", "@DragonWolf The distance to a weighted quadratic bezier is analytic but it requires solving a quartic which is difficult to do well because of low precision (see https://www.shadertoy.com/view/NtSGzy).", "@paniq https://www.shadertoy.com/view/NdfSDl", "DragonWolf, 2021-01-24*it doesn't = it does", "DragonWolf, 2021-01-24Thanks, I'll take a read. At first glance it doesn't seem to cover rational bezier curves (it doesn't mentioning weighting but I don't think it's the same)", "", "\\mathbf {B} (t)={\\frac {\\sum _{i=0}^{n}{n \\choose i}t^{i}(1-t)^{n-i}\\mathbf {P} _{i}w_{i}}{\\sum _{i=0}^{n}{n \\choose i}t^{i}(1-t)^{n-i}w_{i}}}.", "ollj, 2021-01-24http://dashed.github.io/bezierinfo/", "sums up many quadratic and cubic operations and compares complexity.", "intersections, pointDistance, offsetCurve, it is a great library, and it quickly explains why shadertoy sticks to parabolas.", "", "part 22 [Projecting a point onto a B\u00e9zier curve] does binary search for a coarse bound.", "DragonWolf, 2021-01-24This is Quadratic not Cubic so only 3 CVs?", "", "Why would adding weights make it non-analytic? because it's a polynomial divided by another polynomial?", "ollj, 2021-01-224CVs are no longer analytic. weights also make it no longer analytic. unlikely false.", "DragonWolf, 2021-01-22Any idea how I'd go about making a Rational version of this?", "ollj, 2019-07-14long list on bezier properties and bezier analysis, with nice canvas demos (not oppengl)", "dashed.github.io/bezierinfo", "https://pomax.github.io/bezierinfo", "https://github.com/pomax/BezierInfo-2", "shoule be enough pointers.", "", "and the non analytic approaches are very varied, usually uses some polynomial-bound sequence in a o(n*n) loop.", "ollj, 2019-07-14theres a very detailed webpage about many fun things [a primer on bezier] ish.", "it does go into arclength and intersection and substituting bezier by circle segments (which seems to be a great substitution)", "", "the main takeaway is, arclenght of quadratic bezier is analytic. arclength of cubic bezier is already no longer analytic (as ith many cubic bezier properties), and arclenght quickly becomes a tricky recursive function, no matter how you estimate it iteratively.", "paniq, 2019-07-11i'm trying to figure out how to produce a normalized arclength scalar 0..1 from t but can't think of a good way. t.x on its own seems an okay solution right up until the midpoint bends out of range. :-/", "Luther, 2019-02-24This is great work and super useful! Have you got a write up of the theory behind it?", "akhgary, 2018-05-07great", "ollj, 2017-08-30i want an y=cos(x) signed distance.", "etale_cohomology, 2017-07-22Analytic primitives, oh, how I love you! <3", "jt, 2015-12-17Very usefull!", "FabriceNeyret2, 2020-02-14just because of the last line !", "should be vec4(vec3(noise), 1. ) or even just vec4(noise);  since alpha is ignored.", "monodnb, 2020-02-14yeah, i don't know why the white is happening. supposed to look something like this https://cineshader.com/", "FabriceNeyret2, 2020-02-14I see plain white. :-/", "", "welcome to the gang, anyway :-)", "nimitz, 2015-11-13That is some serious AO!", "exoloner, 2015-11-05IQ: Unknown error: LK_ERROR .", "IQ: Porting it to GLSL to see if it works on the same machine", "Dave_Hoskins, 2015-11-04It's like paint splatting in mid air. Very nice shape and colours on this one.", "Shane, 2015-11-04I like artsy stuff like this. Very pleasant to look at. The effect is reminiscent of the old, 2D, sine warp trick: p += A*sin(p.yx*b+c), etc.", "tve, 2023-02-17Awesome.", "Cesium_137, 2022-11-18looks like the scene in toy story for the wii where buzz is flying through the canyon", "jarble, 2020-12-11I made a few optimizations to improve this shader's framerate.", "jorge2017a1, 2020-10-27it is a very beautiful desert .... good job !!!!", "...........es un desierto muy bonito .... buen trabajo !!!!", "GCScholar, 2020-09-28Your shaders are great!!", "koo1ant, 2020-07-09Wow! This is inspiring", "blackle, 2019-06-05stunning!!!", "jeyko, 2019-05-08camera shaking on this very depricated Intel in-board gpu:d", "archee, 2017-10-29I had it open in a tab, and checked it after 100000 secs. Everything became buggy, camera was shaking due to inaccurate large floats, LOL", "zguerrero, 2017-10-29Really really nice, reading your code is always a pleasure, with all the nice comments, thanks for that!", "Shane, 2017-10-29Thanks, everyone. I have better versions of this tucked away that I'll put up at some stage.", "", "@paniq", "I hacked and cheated all over the place.  When all's said and done, this is just a glorified perturbed cyclinder combined with a perturbed plane, so relatively speaking, the GPU doesn't have to do too much.", "", "@obidobi", "\"isn't that just the same as dn= sgn;?\" - I couldn't say for sure, but I think \"sgn\" is equal to \"sign(map(ro))\" which is not always the same as\"sign(map(rd*told + ro))\" ... I rarely use this particular algorithm. In my updated version, I'll go back to the regular one.", "archee, 2017-10-28Looks awesome! Especially with such a short code.", "ingagard, 2017-10-26Works great here. Lovely work. I really like the shapes and camera work.", "asdzxcv, 2017-10-25this is giving me errors right now ..", "Imsure1200q_1UWE130, 2017-10-25It looks like smoke :/ May you fix that?", "ssell, 2017-10-25About time this one got a star ;)", "paniq, 2017-10-25good god, how is this 60fps in full HD on my RX 480?", "jt, 2017-10-25Awesome!", "kev7774, 2017-01-08Oh wow, amazing job dude!  And it runs super fast too!", "CaliCoastReplay, 2016-08-30By the way, I don't think the gamma is bad at all.  The only artifact I even notice is that the high level of grain/anisotropy/roughness seems to cause \"flutter\" or flicker on surfaces facing towards the camera, but even that's only noticeable at low res.  Seems like the kind of thing an anti-aliasing pass of some kind might help?", "CaliCoastReplay, 2016-08-30@Shane - it runs at nearly 60fps at fullscreen here, which is something just about no other terrain shader does.  Definitely keep us posted but I think this is worthy of use/license on a commercial basis as is.", "obidobi, 2016-08-19Line 160: dn = sign(map(rd*told + ro));", "", "isn't that just the same as dn= sgn;?", "Shane, 2016-08-15@CaliCoastReplay", "I've been meaning to do an updated version of this. There's a few things I'd like to improve. Mostly, I didn't concern myself with gamma correction, but I probably should have. I tried to emulate a grainy anisotropic textured feel, which came off a bit speckled looking, so I'll address that. Finally, I put together some algorithms to surface the landscape better, so I'd like to apply those.", "", "By the way, running a camera through a windy tunnel is well worth the effort, if you ever get bored enough.", "CaliCoastReplay, 2016-07-28Oh my God, this is cinema quality out of the box", "Phi, 2016-03-24Excellent !", "Fla, 2016-02-25This shader is simply amazing ! Thanks for all the detailed comments", "Shane, 2016-01-18@tomkh", "The collision detection on that particular surface was simpler than I thought it'd be. For some reason, I thought edging back off the surface normal would be more problematic, due to surface inaccuracies, etc, but it works really well... and it sure beats having to construct BSPs out of brush information from those old Quake files.", "", "I've seen boxy, voxelized surface destruction demonstrations before, but never on a smooth surface. That was really cool. Raymarched Space Invaders next.", "tomkh, 2016-01-17@Shane", "Thanks. I do work on new DF rock formations, although mostly using other/my own tools.", "BTW I have updated fly-mode around your landscape with collision detection and simple destruction. Now you can fly with WASD/RF and hit SPACE to shoot. Your landscape works really well with it! These days I tend to fly around it everyday, lol ;-)", "I may port this and few other things to Shadertoy soon.", "dila, 2016-01-16incredible!", "iq, 2016-01-15Looks great!", "", "You can remove most of the aliasing by mipmapping the textures in the surfacing code (lines 256, 482, etc)", "XT95, 2016-01-15Wow !", "Amazing", "davidar, 2016-01-15Setting iChannel1 to the wood-grain (the 6th texture) also looks really nice.", "Shane, 2016-01-15@tomkh", "That was cool. I've thought about doing some kind of walk through. Although, the thought of working in collision detection makes me groan.", "", "With regards to the rocks, I still remember that Assembly entry of yours. Any chance that you'll reproduce the underwater rock formations on Shadertoy? I hear Shadertoy will have fixed size buffers at some point, so it'll be cool being able to generate more sophisticated, tailored rock textures.", "Shane, 2016-01-15Thanks for the comments. They're always appreciated.", "", "@iapafoto", "With your skills, you could probably do better modeling than this on a programmable calculator.  It would have been nice to work in some extra desert-related scenery, but the framerate was an issue.", "", "@stb", "My girlfriend walked past my screen and said it was too grainy as well. You two would probably get along.", "", "Seriously, offline, I load up WebGL textures with the anisotropic filter setting, which produces finer detail at grazing angles, minus the speckling. On Shadertoy, I've never been able to emulate the same. If you click on the iChannel1 (sandstone texture) \"cog\" icon, then change the \"Filter\" setting to \"mipmap,\" you'll get rid of the terrain speckling, but the surface will look kind of plastic. Alternatively, you could change the bump strength in the \"doBumpMap\" function, but that will smoothen things out too... I'll bet there's a way to have detail and smoothness. I just haven't figured it out yet.", "tomkh, 2016-01-14I simply love all kind of rocks and this is beyond amazing.", "Hats off!", "", "For the fun of it, I hope you don't mind,", "I had to check how it looks with incremental anti-aliasing and fly-mode:", "http://polycu.be/edit/?h=wM9fq5", "First click on preview, textures might be not loaded first,", "also adjust \"REDUCE\" setting based on your GPU speed (1=best quality).", "PauloFalcao, 2016-01-14And super fast, really nice", "PauloFalcao, 2016-01-14I really love it, great!", "Dave_Hoskins, 2016-01-14It looks really great. I love the rock shapes, plus it's fast!", "Harha, 2016-01-14I absolutely love this.", "reinder, 2016-01-14Wow! very nice looking. I also really like the comments in your code.", "GregRostami, 2016-01-14Out of this WORLD!! It's perfect.", "poljere, 2016-01-14Beautiful!", "stb, 2016-01-14instalike! I thought it was going to be slow. I was wrong. Beautiful, if a bit grainy.", "dr2, 2016-01-14How about some X-wings? 10 points when they hit the floating rocks", "trapzz, 2016-01-14wow this is really great - floating rocks and all , thanks for posting it", "Duke, 2016-01-14Very cool!", "iapafoto, 2016-01-14The modeling and texture are incredible !!!", "iapafoto, 2016-01-14Super Shader !", "szczm_, 2020-11-05Astounding.", "mds2, 2018-10-17wow", "MacSlow, 2018-05-19So clean... lovely!", "patu, 2018-02-15Thank You for the all sources!", "scratch13764, 2017-03-24WOW! this is absolutely beautiful. I love how the hexagons are round and they shrink and grow", "dila, 2017-03-22really nice. very satisfying to watch", "Toby1, 2017-03-22ABSOLUTELY GORGEOUS !", "pawsiem, 2016-05-30impresive", "XT95, 2016-04-13<3", "iapafoto, 2016-03-23Super beautiful", "Bers, 2016-03-09Thanks!", "iq, 2016-03-07Nice!", "jt, 2016-03-07cool", "", "(@Fabrice: perhaps twelve regular pentagons on a sphere ;-) )", "FabriceNeyret2, 2016-03-07love it !", "", "( but would look more extraordinary with a tiling of regular pentagons ;-p )", "aiekick, 2016-03-07", "PauloFalcao, 2016-03-07Very Nice!", "neriakX, 2022-12-04astonishing - this is pure art!", "aiekick, 2021-12-31wow nice one", "SarahC, 2021-06-21The stages of building this in that video, and the flyby video in this thread are fantastic - the image is amazing!", "Zi7ar21, 2021-05-29I wanna see an animated version of this", "Observer, 2021-05-05Beautiful picture indeed!", "One small remark: I have the illusion that the background is like a vertical (slightly curved) panel instead of going deeper into the distance. I think it's a combination of the smoke (that is interpreted by my vision as a shadow of the vessel) and how the clouds are warped around the vessel.  Removing the smoke (in line 415) - just for testing - gives it more depth.", "jt, 2021-04-28wow!", "GregRostami, 2021-04-17Just gorgeous!!", "BigWIngs, 2021-04-15Great work sir!", "reinder, 2021-04-10Really beautiful!", "ocb, 2021-04-08Beautiful!", "I love the ground rendering.", "a0a, 2021-04-07Absolutely wonderful,composition is ace, and a 4k masterpiece, bravo!", "warptarium, 2021-04-07wow", "Orm, 2021-04-06amazing! the pose of the astronaut works really well", "archee, 2021-04-06I love flying drone, so I couldn't help myself. Forgot the HDR, so it's a bit darker.  https://www.youtube.com/watch?v=DCPMNmL3t8w", "coyote, 2021-04-06W O W !", "I'm just listening to the soundtrack of Solaris (from 2002) and this somehow perfectly accompanied it.", "archee, 2021-04-05Very impressive artwork in a short code.  Zoom in to see the cute man", "vec2 uv = ((frag-iResolution.xy*0.5+0.0*rnd23(frag+time).xy)/iResolution.y)*0.07;", "uv.y += -0.14;", "duvengar, 2021-04-05Epic!", "ChutneyPot, 2021-04-05Wow!", "zproxy, 2021-04-05can the fire and smoke have palette animation?", "dean_the_coder, 2021-04-05Art, with a capital 'A'.", "blackjero, 2021-04-05I love the painterly look and detail, especially in such short code! And the story gives it even more weight.", "Del, 2021-04-04amazing!", "NuSan, 2021-04-04@Dave_Hoskins thank you for the awesome \"hash without sin\" functions! I used them so I can be sure it will look the same on all GPU and it works super well", "Dave_Hoskins, 2021-04-04Wonderful work,  NuSan. Very nice.", "Cubeleo, 2021-04-04YES.  This is spectacular.", "iq, 2021-04-04Amazing, so much stuff too enjoy looking at. It has a beautiful hand-painted feeling to it.", "flockaroo, 2021-04-04wow! that is good!!", "jorge2017a1, 2021-04-04this is already an advanced technique ..... it is good to see advanced techniques ..... it is also a small code that surprises !!", "..........", "esto ya es una tecnica avanzada.....es bueno ver tecnicas avanzadas.....ademas es un peque\u00f1o codigo que sorprende!!!!", "jorge2017a1, 2021-04-04wow .... it really is something explosive .... it is a work of art ,,,, excellent good work !!!!!", "......guao ....realmente es algo explosivo....es un trabajo de arte ,,,,excelente buen trabajo!!!!!", "shau, 2021-04-04I think this is the best shader I've ever seen!", "PauloFalcao, 2021-04-04WOW!", "blackle, 2021-04-04amazing!!!", "malinowysmiech, 2021-10-19This is amazing and for some reason hilarious. Nice!", "Katawil, 2021-09-29Very interesting", "movAX13h, 2021-09-26@Issu, I'm not sure exactly what you mean ... If you're referring to the effect seen on the sides of the hand when rotating the hand in front of the box - that's just the usual rendering inaccuracies that come with ray-marching. I'm using these in my shader 25 boxes and a tunnel for effects (blue fluff).", "Issu, 2021-09-24Why is there like capillarity around objects ?", "Olaf, 2021-09-17Great!", "hggg, 2021-09-07dear god those fingers", "dean_the_coder, 2021-08-04Genius!", "iq, 2014-11-18Oh, it's a Linux box!!", "", "(i'm sorry, i had to do it)", "poljere, 2014-11-18Haha awesome", "iapafoto, 2014-11-18<3", "Sudospective, 2023-05-16very beautiful shader, i actually used this for a blogpost about webgl! you can check it here: https://sudospective.net/posts/after-hours-a-brave-adventure-into-webgl-and-the-neon-banner-reward/", "let me know if you need me to change the credit underneath ^-^", "Sudospective, 2023-05-16this is literally everything i want in life depicted in a shader", "Poisson, 2022-10-27Very nice modelling!", "blackle, 2019-11-16THIS IS SO CUTE", "d1kkop, 2018-05-22Sweet, now make it suck", "pthextract, 2018-02-15Nice.", "Chinar, 2018-02-10\u771f\u540a\uff01\uff01\uff01", "calx, 2018-02-08Amazing. So polished.", "jaleco, 2018-02-08I love it!", "834144373, 2018-02-08Nice rendering.Good job!", "kjustdoitno1, 2018-02-08I love it!", "KylBlz, 2018-02-08I love it!! Note my profile pic :P", "szarawamyszka142, 2018-02-07Kawai Kirbi. Nice work", "CiaoLee, 2018-02-06Cool~ and Cute Kirby", "tdhooper, 2018-02-04Nailed it!", "flockaroo, 2018-02-04pretty good!", "Dave_Hoskins, 2018-02-02I so want to see it animate!!", "bostelk, 2018-02-02", "Virgill, 2018-02-01Looovely!", "GregRostami, 2018-02-01SUPER CUTE!!", "aiekick, 2018-02-01awesome rendering and shape", "zproxy, 2018-02-01cool. can ya make it run forward. and then jump?", "iapafoto, 2018-02-01Super neat", "fizzer, 2018-02-01Thanks, everyone! I made some small changes to improve the framerate a bit.", "EvilRyu, 2018-02-01nice modeling!", "OccamsLaser, 2018-02-01Looks fantastic in an incredibly small number of lines.", "iq, 2018-02-01Super super nice!!!!", "rigel, 2018-02-01Amazing !", "koiava, 2018-02-01lovely", "BigWIngs, 2018-02-01Awesome!! It has a really nice soft quality to it.", "TheZacher5645, 2022-08-21What happened to the video version?", "jeyko, 2020-12-25one of the best iq shaders imo", "jt, 2019-10-09Phantastik! I love the trees", "Dave_Hoskins, 2018-11-20A lovely sunny autumn look. Very nice.", "Imsure1200q_1UWE130, 2018-11-18weird. now it's 8.6 fps.", "Imsure1200q_1UWE130, 2018-11-18Im in windows 10 with AMD radeon. However my intel is i3", "iq, 2018-11-150.4 fps?? I get 60fps with AA=2, and this is not even a good computer. What system are you in?", "Imsure1200q_1UWE130, 2018-11-13It's nice!", "Well, I mean, it's still at 0.4 fps even if AA = 1 but its nice", "shau, 2018-11-01Beautiful", "GregRostami, 2018-11-01SUPER WOW!!", "aiekick, 2018-10-31wow", "Klems, 2018-10-31Very nice!  Love the smooth rendering and rocks on the ground.", "flockaroo, 2018-10-31wow! fall never was so cute ;-)", "Shane, 2018-10-31Wow. This is beautiful. Love the color palette.", "wax78, 2018-10-31Very nice", "tehsauce, 2018-10-31Beautiful!", "arkan, 2023-02-06Nice, maybe fix https://www.shadertoy.com/view/Mlf3zl as well since there is the same typo as well", "iq, 2023-02-01Yes, fixed the comments", "arkan, 2023-02-01 |f'|^3 / | f' x f''| is the reciprocal of the curvature  so 1.0 / c(f) right?", "iq, 2021-03-17Fixed the segment-to-line distance computation (corners were wrong!)", "demofox, 2015-06-19Very nice looking!", "GregRostami, 2015-06-19Very Pretty!!", "ollj, 2018-10-08I think a 2d catmul-rom is the ideal compromise between performance and curve-ffitting.", "https://www.shadertoy.com/results?query=catmu", "", "alternatively, you could break a shape into linear, quadratic or cubic (bezier paraboloa) segments, and animate over their fractions to a [temporaly segmented glyph]:", "https://www.shadertoy.com/view/4s3XDn", "poljere, 2016-01-16You should add support for actually drawing using the mouse with the new multipass", "iapafoto, 2015-12-04Super good !", "raizor, 2015-09-11Fantastic. Has a real 'Oriental' feel to it", "vgs, 2015-08-25Stunning! Awesome work!", "raja, 2015-07-03It will be awesome, if this can be extended to images to do automatic brush strokes based on image features !!", "lamogui, 2015-06-14Holly shit ! brush seems so natural !", "FabriceNeyret2, 2015-06-05fixed. thanks !", "104, 2015-06-05Excellent! It should be fixed now, thank you.", "FabriceNeyret2, 2015-06-05got it by dichotomia: line#98 you have an if, wich all content (next line) is commented.", "Indeed my compiler dont accept to consider \"float unused;//NOP\" as a content (but with { float unsused; } it does !).", "", "Even it it's linux fault this time, may you do something for that ?", "FabriceNeyret2, 2015-06-05well, this time this is not the classical all black or all white due to some API difference between windows and linux: just a global \"unknown error\" is kind of hard to investigate. (maybe iq could guess?).", "I'll try at home tonight, just in case.", "104, 2015-06-05Hmm Fabrice, seems my coding style is really incompatible with your system  I tried on different browsers on Windows & OSX. I don't have a Linux machine to test. Any chance you could take a look?", "FabriceNeyret2, 2015-06-05does not compile on chrome/linux (with big GPU).", "red \"unknown error\" on top of source window.  :-(", "poljere, 2015-06-05Classy!", "Daryashd, 2020-06-15Great effect ! I have a commercial proposal for you, if you're interested - it will be great to cooperate) I represent a company of Belarusian programmers Appic Stars", "ollj, 2016-04-29its simple effects like that that make shitty console games look too good for their shit hardware.", "justicle, 2014-05-22Lovely, so simple.", "jmc, 2013-03-19Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "Q_Layer, 2013-02-27Wow! It looks fantastic!", "It was just what i was trying to learn how to do.", "Thanks for posting it!", "phreax, 2022-11-13Wooow, this is just incredible!!", "jt, 2022-10-12Wow!", "pthextract, 2021-07-07OMG. I reached goal.", "pthextract, 2021-07-07Very pretty. Would love to drive my spaceship in this.", "DeMooniC, 2021-03-29SpaceEngine vibes!", "ollj, 2021-01-16currently looking deeper into this shader.", "it is a lovely slightly messy amalgamation of many things, tricky to clean up without breaking it, slows tweaking progress.", "", "I found a lot of scopes to optimize.", "", "this shader uses a noise, that is no longer an option to be chosen, and all other options show a discontinuity.", "TheNosiriN, 2021-01-15why wasn't this ever this featured...??", "Smooth_Shady, 2020-12-19This is epic! Why has this never been featured? Framerates are high despite the complexity", "Zi7ar21, 2020-10-11that super high framerate...", "Zi7ar21, 2020-10-11that super high framerate...", "Smake, 2020-05-18\"Zwei Dinge erf\u00fcllen das Gem\u00fct mit immer neuer und zunehmender Bewunderung und Ehrfurcht, je \u00f6fter und anhaltender sich das Nachdenken damit besch\u00e4ftigt: Der bestirnte Himmel \u00fcber mir, und das moralische Gesetz in mir.\"", "it's incredible, S\u00e9bastien   I eagerly want  to make something similar... or better )", "ollj, 2017-09-19there is no clear correlation between the disk and spin of a galaxy, relative to its neighbors or great voids.", "", "there is no clear correlation between the orbital planes of a planet and the relative position of a star within a galaxy. The relatively small scale spin of a a concatenating cloud that forms a solar system makes one angular momentum dominate within <2 billion years, creating a disk shaped cloud. We can only (almost only) measure extra-solar planets in systems where the orbits are nearly coplanar with out position in space. binary systems simplify this, as we can tell heir spin more easily.", "", "There is no clear correlation between the compositions of 2 solar systems, wether any gas giant is further inside or outside. There is a significant gap in our observations, a lot of earth like planets could exist, but we fail to measure a most of them in a certain range of mass and density. within a range of measures where we expect to find a lot,we barely find anything.But all around that spot we find gas giants and smaller more dense things.", "", "Galaxy Disks are generally a lot thinner than in your shader. they glow a lot in infrared and often have a ultraviolet beam/halo trough their pole due to a strong magnetic field due to alof of angular momentum with short distances (quasars and black holes)", "", "There are 2 distinct galaxy types. high density galaxies tent to form disks and have brighter stars with more supernovae.", "", "Lower density galaxies have much more and much smaller starts, the galaxies stay larger, and contain more but smaller stars that burn slower, exist longer,have  less supernovae, and they stay spherical and glow mostly yellow.", "", "Galaxies also tent to have smaller galaxies that orbit them, a bit like a moon, but the larger scale orbitals are a lot less stable over time and collisions (colliding dust clouds) will happen.", "ollj, 2017-09-19from a time when googling \"celestia\" did not get you images of a white winged unicorn.", "https://celestiaproject.net/", "", "Large scale galaxy superclusters are a lot like fractal 3d voronoi diagrams, bound by gravity.", "https://www.youtube.com/results?search_query=laniakea", "", "how much can you compress or approximate WMAP Galactic Redshift Survey data, like 300000 points of latitude longitude and distance", "http://www.celestiamotherlode.net/catalog/dataplots.php", "", "https://www.shadertoy.com/view/ldBSDt", "could be used to obfuscate transitions between inside and outside of a galaxy, as well as indicating movement in general by showing some relativistic distortion:", "http://gamelab.mit.edu/games/a-slower-speed-of-light/", "starea, 2017-04-05super-class! I love it!", "voz, 2017-03-04omfractal", "flockaroo, 2016-11-16sry, still not working for me. i can click stars, and they are (in most cases) properly rotated to the center of the screen,  but not approached. and stepping into a galaxy still is pretty chaotic.", "iapafoto, 2016-11-16@flockaroo : The transmission of states are more robust now (it was based on float comparaison). Hope it helps", "+ Fix a stripe problem in intergalactic clouds", "iq, 2016-11-16Nice!!!", "flockaroo, 2016-11-15hmm, clicking might work better now. but still not getting close to stars. always passing by or even moving away from the clicked one", "iapafoto, 2016-11-15@flockaroo: I ve ameliorate Star selection system.", "I take a look at Galaxy approach", "flockaroo, 2016-11-15hmm. i guess it must be pretty nice... though, i cant see much of the described stuff.", "navigation always passes by stars. sometimes approaching a new galaxy works,", "but then galaxy disappears when approached, and then wild randomness until it settles again. (manjaro linux - chromium - ati 280)", "iapafoto, 2016-11-15Some stranges behaviours detected under Ubunto - Firefox", "> Start without the first galaxy", "> Strange navigation", "> Star disaper when clicked !", "nide, 2016-11-15Are you kidding me?", "This is unbelievable.", "iapafoto, 2016-11-14First version of planets (but never managed to click on it !)", "public_int_i, 2016-11-13Phenomenal.", "stduhpf, 2016-11-12Better than no man's sky", "shau, 2016-11-12Have you ever seen Cosmic Zoom? Very old but similar idea.", "https://www.youtube.com/watch?v=_Rkuxl7q2Ig", "Virgill, 2016-11-12Having a lot of fun.  Really great!!! <3", "Dave_Hoskins, 2016-11-12Superb rendering.", "aiekick, 2016-11-12and maybe some kind of alien vessels or maybe the death star somewhere", "iapafoto, 2016-11-12Than you very much to all !", "I will try to add exo-planets if I found time to do it. There is so much kind of objects in cosmos. It is a no ending task. Using the technic here, it is also possible to make a fully zoomable universe from galaxy to quarks. I someone have the courage...", "kuvkar, 2016-11-12awesome!", "FabriceNeyret2, 2016-11-12enormous !", "Duke, 2016-11-12Amazing!", "shau, 2016-11-12Very Cool", "Imsure1200q_1UWE130, 2016-11-12oh hi", "Imsure1200q_1UWE130, 2016-11-12Supernova looks cool! it's like 2 stars sucking this kind of material. or an explosion. Too Bad for me.", "otaviogood, 2016-11-12Wow, this is amazing. I can explore infinite galaxies!!!!!! This is one of my new favorite shaders.", "gigatron, 2016-11-12Parfait ... perfect ;", "tsunamayo, 2016-11-12This is ridiculous. I am speechless. It has to be one of the very best on shadertoy.", "aiekick, 2016-11-12It's certainly the most incredible shader I've seen, The words I miss to describe it", "aiekick, 2016-11-12ho my god. Awesome shader", "cubby208, 2016-11-12My jaw has never dropped lower....", "thorn0906, 2019-07-19This is a really nice effect! I know it's not really the point of this shader, but in case anyone else wants more realistic godrays, you can add a threshold by changing line 109 to", "```", "vec4 s = texture(iChannel0, uv);", "col += smoothstep(0.75, 0.85, length(s.xyz)) * s * weight;", "```", "Shane, 2016-08-01I made a couple of slight changes in order to gamma correct the final image so as to smooth out the rays a little.", "", "For anyone interested in experimenting with the effect, you could pretty much drop any scene into the \"Buf A\" tab, tweak the light offset, etc, in the \"Image\" tab, and it should work well enough.", "FabriceNeyret2, 2016-04-14yep, now working. niiiice ! (and fast !)", "KylBlz, 2016-04-13I'm going to take a close look at this code; thank you for the descriptive comments in the code!", "msodrew, 2016-02-08thanks for the documentation... will be nice to review slowly ;)", "Passion, 2016-01-29Awesome, and thanks for the shout-out in the comments and description", "coyote, 2016-01-28", "Dave_Hoskins, 2016-01-28Nice effect! Looks expensive.", "Duke, 2016-01-28It works now. Looks great!", "Shane, 2016-01-28@Duke", "Thanks heaps for finding that. I needed to have a think about it, but I think \"clamp\" needs to be in the form \"clamp(val, min, max),\" strictly in that order. Your suggestion doesn't violate that, whereas the way I originally had it did (max could dip below min)... I think. That's just a guess.", "", "Anyway, I made the change, and I'll try to rewrite it in a more intuitive way later. I needed to clamp the sinusoidal value in the first place to give the trace function a better chance to hone in on it.", "EDawg, 2016-01-28This is awesome. A cool way to use the light (death) rays...", "Duke, 2016-01-28Even changing it to", "return (clamp(0., -1.1, n) + 1.1)/1.1 + bump;", "make it work. Looks like clamp on some browsers don't like negative value as first parametr.", "Duke, 2016-01-28It still looks the same for me  Changing string 34 to", "return (n + 1.1)/1.1 + bump;", "make it work.", "Shane, 2016-01-28@Duke and Fabrice", "I appreciate the help, as I'm sure you each have better things to do.  I changed the \"m\" function to \"map.\" I built this up from scratch using an old, small code template with short variable and function names. Perhaps it was a naming conflict thing.", "Duke, 2016-01-28It seems the problem is in \"m\" function. When I change it to another noise functions it starts to work.", "FabriceNeyret2, 2016-01-28the mix line 242 brings all the bg orange. strangely if I suppress the mix, the scene is quite dark, and if I reset to 64 line 78 it is black.", "Shane, 2016-01-28@Fabrice and Duke", "I'd defined \"FAR\" inside one of the functions, instead of globally. Now, it's global. I'm assuming some systems put it into global space anyway, whereas others don't. Does that change things?", "FabriceNeyret2, 2016-01-28in bufA::78 if I down the 64 to 30 I see a kind of 3D cubic network in a dense semi-transparent pinky-orange haze.  (which probably dominates all at 64).", "iapafoto, 2016-01-28Fantastic !", "FabriceNeyret2, 2016-01-28if in main() I directly draw the content of bufA I just have a plein pilnky orange", "FabriceNeyret2, 2016-01-28on linux, I just see a huge sun covering most of the screen.", "Shane, 2016-01-27@Duke", "Thanks for going through the trouble to post the image. However, it's difficult to fix errors without the ability to replicate them. The idea behind this is to render a basic scene into \"Buf A,\" read it in from the \"Image\" tab, then radial blur it. Pretty straight forward stuff.", "", "From what I can gather from the image, the lattice structure perhaps isn't showing up, then just the background is being blurred out? Out of curiosity, if you transcribe the scene from \"Buf A\" into the \"Image\" tab, then delete \"Buf A,\" does it render as a normal scene? I'm trying to figure out which tab is causing the problems.", "", "On another note, on my older computer, IE refuses to render a lot of the stuff on Shadertoy these days, including this (instruction count, maybe), so I've given up trying to accommodate it.", "iq, 2016-01-27Cool", "CPU, 2016-01-27OK on Win7 + Chrome here. Great effect, nice work.", "nimitz, 2016-01-27Very nice mashup!", "aiekick, 2016-01-27wow", "Duke, 2016-01-27I think that it looks wrong on my Chrome and Firefox http://i.imgur.com/131hBg3.jpg", "Shane, 2017-05-16It's great having all these references in one place.", "", "Like others, I've made use of the 2D value noise derivatives to attenuate terrain slopes, but have never utilized the gradient version, so it'll be interesting to see what difference it makes to the look of the terrain.", "nimitz, 2017-05-15Good point iq, I wrote the shader a while back and forgot about the normalization step when adding comments. As for the base noise, I remember trying gradient noise and simplex noise with simplex giving somewhat better results, I'll do some testing and replace it with this version if it works well enough.", "", "As for using hardware derivatives, I doubt it would look very good in the end.", "iq, 2017-05-14Sure, although in that case one can compute the gradient directly in final pose (and ensure equal size gradients too): vec2 hash( in vec2 x )", "{", "const vec2 k = vec2( 0.3183099, 0.3678794 );             // replace all of", "x = x*k + k.yx;                                          // this by something", "float h = fract( 16.0 * k.x*fract( x.x*x.y*(x.x+x.y)) ); // better", "", "float a = 6.2831*h + iGlobalTime;", "return vec2( cos(a), sin(a) );", "}", "}", "FabriceNeyret2, 2017-05-14suggestion: hash can be turned into base flownoise using", "float t = iGlobalTime, c = cos(t), s=sin(t);", "...", "x =  -1.0 + 2.0*fract(", "return x*mat2(c,-s,s,c);", "", "or the checker swirl variant using t = iGlobalTime * sign(mod(x.x+x.y,2.)-.5),", "FabriceNeyret2, 2017-05-14ah, ok ! sure, it looks lot more wiry now:", "n .yz = normalize(n.yz);", "fragColor = ( dFdx(n.y)+dFdy(n.z) ) *4.* vec4(1,0,-1,0);", "", "analytic computation of the Hessian: sure, but I guess that you soon want to reintroduce turbulence terms like abs(2n-1) which complicates the analytical computation. (Or maybe its better to do this on the final wire-noise ? )", "iq, 2017-05-14You can compute the Hessian analytically too. I think it's published in another shader I made. As for nimitz's shader, be careful because he is not computing the Laplacian. He's computing the divergence of a normalized gradient. If it wasn't normalized it would be a Laplacian, but then you no longer get the filaments he's getting.", "FabriceNeyret2, 2017-05-14And the Laplacian, as div(grad), would be fragColor = float( dFdx(n.y)+dFdy(n.z) ) *4.* vec4(1,0,-1,0);", "", "Still not sure how you get the https://www.shadertoy.com/view/MtKSWW look with this ;-)", "ollj, 2020-10-10done or skipped by line 688:", "// Fake caustic lighting... Very fake.", "sc +=", ".015*oCol*mix(bCol, vec3(1, .8, .5), .35)                  /tint", "*", "1.//max(abs(.05 - map(sp*1.5 + sin(iTime/6.))), .01)//fake caustics", "", "//it samples a distorted position in the shape, clapmos it and tints it. the 1/x ireciprocal s a fog-thing", "JoshScholar, 2020-10-10Can you say something about the caustics?", "przytulnykotek77, 2018-06-11Wow!! \u015bwietnie to wygl\u0105da", "tmorley, 2018-06-10Thanks Shane. I made a quick template for Natron here. You can't control any aspects like direction etc yet but I'll revisit it when I get time.", "", "https://natron.global/front-page/community-template-gallery", "Shane, 2018-06-10I hadn't realized this had made the front page until now. I'm honored.  I'd originally produced a scene that looked a lot like pipeworks -- with pressure release valves, etc, but I couldn't optimize it enough, so took a more simplistic geometric approach.", "", "@tmorly", "Feel free to use the code for whatever purpose you like. Relatively speaking, it's a pretty short example, so making changes shouldn't be too much of a task. I usually find the most draining chore is object identification without sacrificing speed, but I'm going to start formalizing the process to make it easier.", "", "@ExNihilo", "I sometimes weave a camera in and out of grid structures. Even with a simple sinusoidal curve, it's possible to weave around as many as four columns and keep the flow whilst maintaining camera speed. I decided against it here. Not sure why. Probably to keep things simple and focus on the geometry... or I was feeling lazy.", "CtrlTea, 2018-06-08Amazing!", "JohanDeejay, 2018-06-07Excellent!!", "ExNihilo, 2018-06-07This is amazing. A slower camera that tracked around the rails could probably be woven through the opposing faces.", "tmorley, 2018-06-06This is fantastic! Natron is a free FOSS compositor that can use Shadertoy code. You code works flawlessly with it. Would you be interested in making some minor changes in it so that it could be controlled in Natron?", "", "https://natron.global/front-page/community-template-gallery", "smkgames, 2018-01-11cool stuff!", "jt, 2017-11-24Awesome", "PauloFalcao, 2017-11-21So fluid and beautiful!", "dila, 2017-11-19really superb", "Del, 2017-11-19looks incredible! awesome work", "dr2, 2017-11-18Bonzer mate (if you share the same access page as a shader by Gaz you cannot be", "viewed by at least some Linux users since his shader KILLS browsers).", "coyote, 2017-11-18", "flockaroo, 2017-11-18wonderful, as usual!", "mattz, 2017-11-17looks awesome as always -- thanks for the shout-outs", "kuvkar, 2017-11-17very pretty", "asneakyfatcat, 2017-11-17amazing", "iq, 2017-11-17very nice!", "zproxy, 2017-11-17reminds the windows pipes screensaver. ya should remake that.", "ollj, 2017-11-17a truchet- tile with a straight path in it just reduces the truchet by -1 domain. this generalizes nicely into  4d to 3d (truchet tile) projection.", "", "this truchet-domain-reduction is likely useful to resolve some continuity issues of animated truchet tiles with more than 2 domains.", "BigWIngs, 2017-11-17Yep, the caustics are beautiful", "rigel, 2017-11-17Love the water caustics light in the pipes. Very suggestive...", "blackjero, 2017-11-17Very immersive!", "ingagard, 2017-11-17You are a master of texturing. All looks so clean and perfect. Really impressive work you got there.  from me!", "sprkng, 2023-03-18Really useful! Is there some optimised method to blend more than 2 normal maps at the same time, or does one have to keep reapplying the same algorithm? I've got two triplanar materials that I want to blend, so unless I take some shortcuts there are 6 normal maps that should contribute to the end result.", "jorge2017a1, 2020-05-07Very nice relief..good job !!!!", ".....", "Muy bonito relieve..buen trabajo!!!!", "jt, 2015-12-16Very instructive!", "ZigguratVertigo, 2015-09-05Also, if your normals are already unpacked (-1:1 range) and normalized, this is even faster:", "", "float3 RNMBlendUnpacked(float3 n1, float3 n2)", "{", "n1 += float3( 0,  0, 1);", "n2 *= float3(-1, -1, 1);", "return n1*dot(n1, n2)/n1.z - n2;", "}", "ZigguratVertigo, 2015-09-02Here are the details: http://blog.selfshadow.com/publications/blending-in-detail/", "ZigguratVertigo, 2015-09-02Yup, \"detail normal mapping\" is the process of adding detail to an existing normal map, often to enhance the visual quality, break apart repeating patterns, change the look of a surface, etc.", "", "In the example above, the base surface is a cambered disk that rests on a flat background, stored in tangent space. We then generate a detail normal map from one of the provided images on Shadertoy using a high-pass filter. In a typical gamedev scenario, artists would provide these maps in textures. We then combine both normals using Reoriented Normal Mapping, as well as other commonly-used techniques.", "", "The goal behind this little demo is to demonstrate that several well-accepted techniques by the art community are actually quite wrong, and should not be used. This is especially true for the well-known Overlay approach or \"just add them and normalize, I tell you it works\" approaches to combining normal maps that you can find on several art forums. Hopefully one day the old approaches will be forgotten, and all those faulty normal map blending tutorials one can find on the Internet will vanish. ;)", "", "Reoriented Normal Mapping (RNM) involves rotating (or reorienting) the detail normal map so that it follows the \"surface\" of the base normal map, just as tangent-space normals are transformed by the underlying geometry when lighting in object or world space. We chose quaternions because they allow to easily represent the unique rotation from one vector to another (here, between the reference normal [0,0,1] and the base normal), via the shortest arc. Once this quaternion is defined, we can easily transform the detail normal and get the resulting (reoriented) normal.", "", "Please check out our paper if you want to see how the quaternion math was simplified (here: http://blog.selfshadow.com/publications/blending-in-detail/)", "nimitz, 2015-09-02In case some of you are wondering what this technique is about, it can be described in very few words: The idea is to apply the \"noise\" or detail texture in the tangent space of the base map instead of simply performing 2D-style blending.  It makes a lot of sense and the results are very nice as seen here.", "cailuming, 2017-12-24\u91d1\u9488\u83c7", "mmalex, 2013-12-12so yummy! I want to eat them...", "nfx, 2016-08-17What is this song?", "aiekick, 2015-11-29the music effect is not the same has before music change for soundcloud integration. i not find how can i put the old effect. maybe somme weird things about the amplitude of each freq", "Shane, 2015-10-29Nice. It'd be cool to see what it looks like when moving a camera alongside the outskirts of the contour.", "", "Taking away the stars and doing a variation on the reverse looks like paint being thrown at the canvas.", "aiekick, 2015-10-27you can see the tubes without noise by comment the line 32. its cool also without noise", "aiekick, 2015-10-27thanks guys", "poljere, 2015-10-27Agreed with rest of the guys.. Cool!!", "Duke, 2015-10-27Very good!", "iq, 2015-10-27Super nice!", "aiekick, 2015-10-27thanks", "hexjayi, 2015-10-26nice !", "kuvkar, 2015-10-26cool!", "msfeldstein, 2015-05-01iq what is the significance of the hash3 function?  (and all the rest of this for that matter). I'm trying to learn how you do all this stuff, is there a good starting point?", "iq, 2013-05-01totally. lazy coding! i integrated your suggestion", "fizzer, 2013-04-30Cool!! I love how slimey and organic the surface and motion looks. Also, I can see a simplification for lines 164 and 165: \"dd = -max(-dd,0.0); totao += -(dd-hr)*sca;\" -> \"dd = min(dd, 0.0); totao += (hr-dd)*sca;\". Would this be better, or not?", "PauloFalcao, 2013-03-25I love it!", "robertcupisz, 2013-03-24Really nice shading :]", "Dave_Hoskins, 2013-03-24I never new pulsating spotty intestines could be lit so well!", "That hash3 function is inspiring, thanks for sharing this.", "P_Malin, 2013-03-24Awesome!", "kiwi_uppa, 2013-03-24This is really impressive! :o", "yiwenl, 2015-11-10because I suck at giving names so i just use numbers", "Interstellar is a great idea, thanks for the inspiration !", "FabriceNeyret2, 2015-11-10but why \"07\" ? more looking like at the end of interstellar :-)", "FabriceNeyret2, 2020-06-15does \"Stockholms Str\u00f6m\" just refer to the river you use to see, or is it really a given term in river patterns for fluid mechanic ? (couldn't find a ref).", "var, 2020-06-15very nice", "JohanFlod, 2018-07-07Looks really nice.", "jt, 2017-07-04cool!", "Imsure1200q_1UWE130, 2017-06-11trapcode this is good! is it a  floating invisible boiling bath thingy? idk if minecraft's creators will swim in it :P.", "henry, 2016-11-05it looks pretty accurate it's missing bubbles, it looks strangely viscous if it doesnt do bubbles.", "henry, 2016-11-05would you want to swim in that??!!", "trapcode, 2016-01-03Thanks! Yes, I was going for a \"boiling\" look", "psonice, 2016-01-03I think it's not meant to look like regular waves. There are places in the sea where the currents make it look kind of like the water is 'boiling', and this does look kind of like it", "FabriceNeyret2, 2016-01-03look visually nice, but not realistic as waves: too round. suggestion: add an horizontal displacement in quadrature (to make trochoidal waves). But for boils its okay :-)", "poljere, 2016-01-03+1", "iq, 2016-01-03Looks cool!", "FabriceNeyret2, 2019-11-04for all of these, you should show the case of correctly done final sRGN conversion ;-p  ( pow ( 1/.2.2 ) )", "-> add as last line", "if (fragCoord.y < iResolution.y/2.) fragColor = pow( fragColor, vec4(1./2.2) );", "If you zoom, you'll see than inter-pixel regions are no longer darker than pixel centers.", "nimitz, 2018-09-29To be specific, the CubicHermite() function used here is a Catmull-Rom spline", "reinder, 2018-07-23Very nice!", "Trashe725, 2018-03-13FabriceNeyret2,", "yeah, it looks better, thanks", "FabriceNeyret2, 2018-03-13cool !", "", "NB:", "for better font look in small window, I suggest", "in Common: get_text to add lod offset -1 to the texture fetch (fird optional parameter)", "JoeShader, 2020-11-19this is awesome. great work.", "KilledByAPixel, 2020-03-22nice work ian!", "RCoel, 2019-02-25OMG Wonderful!", "Can someone convert this to unity? That would be so extremely nice.", "Doesnt work with \"Shaderman\"", "michaeltorresor, 2019-02-22Great!", "starea, 2019-02-21Masterpiece!", "Kali, 2019-02-20Hats off", "aiekick, 2019-02-20how i missed this one, super cool", "Shane, 2018-08-08I like this. Really pretty.", "Dave_Hoskins, 2018-08-07Oh I just found out the mouse thing, very cool.", "valentingalea, 2018-08-07@blackjero because of the classic game https://en.wikipedia.org/wiki/Out_Run and retro-nostalgia", "blackjero, 2018-08-07I like it, very dynamic :-)", "I always wonder why this style is called \"Outrun\".", "trinketMage, 2020-04-08test on cineshader : https://cineshader.com/view/3sfczf", "FabriceNeyret2, 2020-03-26plain white. (and on your screen too, apparently).", "nefinity, 2019-12-13Thank you very much, would be used in my toy unity project.", "iapafoto, 2016-01-18very good", "Shane, 2016-01-17Simple code, and a really pretty result. 3D raymarched version next?", "aiekick, 2016-01-16wow, beautifull", "Kastor, 2017-01-08Thank you so much for this !", "digital, 2013-12-23Very simple code! Great learning tool", "jt, 2023-06-03Very cool!", "FabriceNeyret2, 2023-01-05golfed down to 638 chars ( from 2021 ) ;-)", "https://www.shadertoy.com/view/ctBGRD", "bloodnok, 2021-06-06@romeosoft: You are free to use this for whatever you want, including but not limited to fixing all the bugs and glitches!", "romeosoft, 2020-07-07Hello, can I use your code to make my own black hole?", "ShaderAnt1, 2018-08-04Why can't I do stuff like this?", "CLPB, 2018-07-27Interesting, didn't know looping on floats was viable.", "mroczek75, 2018-07-24oooo super !!!", "cyber33, 2018-07-08Very Nice!!! After viewing this my wife I was missing for 20 years... Guess I got too close ;)", "FabriceNeyret2, 2014-11-12:-)", "bloodnok, 2014-11-12Actually I think the main problem is the raymarching step size being large compared to the thickness of the accretion disc. I haven't drunk enough math juice to work out sphere tracing under General Relativity.", "FabriceNeyret2, 2014-11-12Cool !", "About aliasing, do you know that texture2D allows an extra parameter which is the level of detail (LOD) ? it will average the texture in a radius of 2^lod.", "You \"just\" have to estimate ||diff(uv)/diff(xy)|| to tune it ;-)", "bloodnok, 2014-11-11You can move around a bit now. Still aliased to hell.", "FabriceNeyret2, 2014-11-11would be cool if we could move the camera angle with the mouse !", "FabriceNeyret2, 2023-01-10@Cesium \"how do we know that this isn't a screenshot\":", "for a start, because we can't include external images in shadertoy ?", "Cesium_137, 2023-01-10when I first tried it I didn't realize you could move.i'm an idiot.", "Dave_Hoskins, 2022-11-10@Cesium_137, interesting. Thanks for finding that. The advantage with this is slightly better anti-aliasing due to the stack rendering.\ud83d\ude01", "Cesium_137, 2022-11-10how do we know that this isn't a screenshot from the free steam game \"fractal fly'", "Del, 2020-06-26this is awesome!", "Rasha108, 2020-06-24WOW, awesome", "Dave_Hoskins, 2020-06-19Thanks guys!", "@ttg Yeah, they seem to get more open through the 'ceilings' and dense through the floors. I like it when fractals appear as tangible objects, I'm not keen on the zooms and moving mirroring so much any more.", "@Pingas, the music is in channel 3 of Buffer B.", "Pingas, 2020-06-19where is sound channel?", "ttg, 2020-06-18Seemingly no upper limit on fractal scale (at least as far as user can explore)?  Great.  After a while of exploring I surfaced out of an enormous ridge, not a \"ceiling\" as @photonic encountered - but it keeps going.  Good thing there are only two camera speeds, gives a sense of scale, rather than endlessly zooming out / speeding up.", "volatileupload, 2020-06-18Amazing!!", "Maartia, 2020-06-18Amazing work!", "photonic, 2020-06-17Plus navigation with one of my favorites songs of all time, great work man! Thanks for sharing this!! It would be amazing to try this with VR and meditate !", "photonic, 2020-06-17It is an amazing feeling when going through the \"ceiling\" ! It feels like freedom!!!", "Yambam, 2020-06-17Wow this is amazing, real-time 3D fractal rendering! D", "Dzudex, 2020-06-17O wow :O just amazing!", "blackle, 2020-06-17so cool! fun to fly through all the little holes", "ttg, 2020-06-17bad bot", "jarble, 2020-02-17I wish I knew how to add gravity and collision detection to this shader.", "Bananaft, 2016-12-20Hi, I published a damo:", "https://bananaft.itch.io/yedomaglobula", "Thank you very much for inspiration and code bits!", "Dave_Hoskins, 2016-10-03I got quite excited when I saw a demo by Shabtronic:- https://m.youtube.com/watch?v=AtsGeuO_ed8 quite a few years ago, as you can tell from the comments section. But he repeatedly mentioned his 'special sauce'(!) and didn't really give much away. Even though he was willing to take from others. It did look quite fast though.", "Bananaft, 2016-10-03Oh wow, didn't noticed that, when seen that shader previous times.", ">> works OK TBH.", "I've got fairly positive results using 4 pre-passes of 1/64, 1/32, 1/8 and 1/2 resolutions (or variations of).", "Here is the picture where several layers of multi-resolution is visible:", "https://twitter.com/Bananaft/status/782539398684479488", "I've reduced main pass steps to 30, plus 6 for normals and 4 for occlusion. Compared to single pass with 96 steps, optimization gives an improvement in both quality and performance. Now I have around 33 fps on GTX 960 and 50 on 970. Was hoping for more, but it's something.", "Dave_Hoskins, 2016-09-29@Bananaft, https://www.shadertoy.com/view/MdV3Wz uses multi-pass, multi-resolution rendering. It works OK TBH.", "Bananaft, 2016-09-25>>Nice colours", "Thanks, they are random .", "", "I was thinking a lot about optimization of raymarching.  The first thing I want to try, is to make several low res depth only passes before tracing the main image. Let's say make 3 steps on 16x9 texture, then 10 steps on 480x270, then full res image. Low res passes should stop when distance is lower than pixel size, so next pass can sample depth of previous and continue tracing. Could be done on shadertoy actually.", "", "Constructing base model with marching cubes? Giving the vast range of detail sizes, and the fact that overlaping parts of the mesh will be rasterized several times, this solution doesn't appeal to me. (Also I can't into C++) But I was thinking about generating the mesh in screen space(with geometry shader maybe) that will somehow place more vertexes, where there are edges and thin details. Then vertex shaders will raymarch some steps, and pixel shader will do the rest.", "Dave_Hoskins, 2016-09-21@Bananaft, Nice colours You could construct a base model and render to that and make the fine detail with ray marching. It might be a lot faster, because you won't have to loop the large distances to the fractal.", "Bananaft, 2016-09-19Some pics, If you interested: https://twitter.com/Bananaft/status/777998472293285888", "Bananaft, 2016-09-18No, I'm using raymarching, that outputs its result to G-buffer.", "Dave_Hoskins, 2016-09-18Cool. Are you going to be using a  marching cubes algorithm?", "Bananaft, 2016-09-18I'm trying to add fractal rendering to a game engine. So it can be mixed with real geometry and lit with deferred lighting.", "Dave_Hoskins, 2016-09-18Yes, of course. What is your work?", "Bananaft, 2016-09-17As I understand it is Pseudo-Kleinian fractal, right? Can I use this exact parameters in my work?", "Dave_Hoskins, 2016-09-15Thanks! Yeah things get quite big once you start flying through the 'ceilings.'", "Bananaft, 2016-09-14Mind blowing. Thank you so much for this! It was so great to fly through a tiny hole in the floor and discover enormously huge open area (I was sure it's just this one level with floor and ceiling, and that's it)", "", "Then I added a teleport button to jump random places in 1000x100x1000 cube.", "iq, 2016-08-21Looks really good!", "FMS_Cat, 2016-01-14Starbound in Shadertoy <3", "", "Later, I post \"landable raymarcher\", which can collide to any raymarching things! (maybe you can expect the method easily...)", "Dave_Hoskins, 2016-01-12Thanks. Flying through holes is fun!", "DashW, 2016-01-12I could get lost in this shadertoy for days. <3", "GregRostami, 2016-01-11The music ... the visuals ... amazing!!! Thank you Dave_Hoskins", "pellicus, 2016-01-11Great! I was writing something similar.. so thank you!", "poljere, 2016-01-10Very cool, looks great!", "Dave_Hoskins, 2016-01-10Thanks Knighty, I thought I tried that, ho-hum.  It looks better that way up too.", "Shane, 2016-01-10Beautiful example.", "knighty, 2016-01-10It seems it is just about which axis is up (y or z).", "In \"image\" shader, flipping y and z at #74 (Map function):p = p.xzy; solves it.", "", "@tomkh: Evaldrawwww!!! Thank you for the link. Is the source of rice script available somewhere?", "tomkh, 2016-01-10Fractal is super nice, but I don't think this render buffer hacks makes too much sense for camera movement.", "Here PolyCube version I did just for fun: http://polycu.be/edit/?h=Qx1zpR", "FabriceNeyret2, 2016-01-09wow, so nice !", "would be cool to always be in motion (at least through a toggle)", "iapafoto, 2016-01-09Super good !", "stb, 2016-01-09Try rotations instead. Just takes two...", "Dave_Hoskins, 2016-01-09Sorry that the rotations are in a mess. I tried to use quarternions. But that failed, and my attempts at orientating the camera with standard matrix rotations also broke!", "Can any one help? I don't mind having a gimble lock.", "omadridi858, 2022-11-03i know lod is type of filtre but how you can calcule it in matlab", "omadridi858, 2022-11-03can you calculate lod manual", "it like when you do texture( iChannel0, vec2(uv.x,1.0-uv.y))", "don't add lod in texture and calcule the lod after", "oneshade, 2021-02-25Sorry I didn't correct myself sooner, I forgot to enable mipmapping.", "iq, 2021-02-25No, LOD it works fine for buffers. Just tested in this very shader. Could you share a shader where it doesn't?", "oneshade, 2021-02-25It seems LOD doesn't work for buffers, is that a bug?", "gloinart, 2016-05-09How do you use this as a depth of field effect in games? Is generating mip-maps that fast you can do it for every frame, or do you sample textures on actual objects with another depth of field?", "bytewave, 2014-12-18A unity version:", "Shader \"Custom/LodBlur\" {", "Properties", "{", "_MainTex (\"Base (RGB)\", 2D) = \"white\" {}", "l(\"Lod\",float) = 0", "}", "SubShader {", "Tags { \"RenderType\"=\"Opaque\" }", "LOD 200", "", "CGPROGRAM", "#pragma surface surf Lambert", "#pragma glsl", "#pragma target 3.0", "", "sampler2D _MainTex;", "float l;", "struct Input", "{", "float2 uv_MainTex;", "};", "", "void surf (Input IN, inout SurfaceOutput o)", "{", "float lod = (5.0 + 5.0*sin( _Time.y )) * IN.uv_MainTex.x;", "", "float4 c = tex2Dlod (_MainTex, float4(IN.uv_MainTex.xy,0,lod));", "o.Albedo = c.rgb;", "o.Alpha = c.a;", "", "}", "ENDCG", "}", "FallBack \"Diffuse\"", "}", "CeeJayDK, 2013-09-29A suggestion for improvement : To avoid the artifacts of bilinear filtering you could combine it with the improved texture filtering technique you used here : https://www.shadertoy.com/view/XsfGDn", "PauloFalcao, 2013-05-01Cool LOD", "CPU, 2013-05-01That's nice and simple  The block artifacts are not usually noticeable when using the hardware derivatives to select the LOD.", "DjinnKahn, 2022-01-21your link to iq's \"Hexagons - distance\" is goofed", "https://www.shadertoy.com/view/Xd2GR3", "jneen, 2022-01-12suuuper cool!", "ollj, 2018-10-23now thats some fast parallel projection frustrum culling.", "time to make a sims1 game.", "", "yes, any signed distance field mapworks here.", "but the rasterization is rough (on continuity) and the parallel projection has its constrains and optical illusions.", "", "so you likely want to substract 1.61 voxel diameters from the distance to make it chubbier, and thats a pretty big epsilon.", "etale_cohomology, 2017-08-04\"Any SDF can be used with the voxelize function\"? O.O", "srtuss, 2014-09-11that's a great idea!", "spalmer, 2022-10-22I can't believe I didn't stumble upon coyote's normalize trick before.  Awesome!  Shaves few ch off many of my toys.", "jarble, 2021-01-10I made an even cheaper version of this shader by removing the hash function.", "CaliCoastReplay, 2017-08-29Shane:  I have indeed been learning on my own, but it's somewhat slow.  That isn't a bad thing necessarily, but I am getting older, and I've set a goal for myself to try to actually learn enough to create a raymarching shader for clouds for Unity this year if I can, which I will probably testbed on Shadertoy. In general I imagine I can probably do it, given enough time - teaching shaders like yours which have full commenting on them really help.", "", "Rotating a camera within the raymarcher based on user input, mouse or axis based,  is something I definitely need to master next - do you have any advice or links on that, or any shaders where you allow the user to rotate the camera?", "Shane, 2017-08-28@CaliCoastReplay", "Apologies for the late response. I was overseas on my backup phone when I read this, then it slipped my mind. Anyway, trust me, you don't need a tutor to learn how to raymarch. It's pretty easy to learn, but if you have any questions, my email address is in my profile.", "", "In general there are just a few steps involved. I find that it's best to start with a template - usually one that involves a simple straight line camera through a repeat field of spheres or cubes, then take it from there. Once you've got the hang of the overall template usage, you can learn each of the individual components - like unit ray setup, scene traversal, lighting the hit point, etc.", "pix, 2017-08-21You actualized your attempt IMHO. +1 love. I don't have an up-to-date GPU, yet it looks bloody good.", "CaliCoastReplay, 2017-08-19I appreciate the time that you take to make shaders that are 30-60 fps at 1080p even on a 720, Shane.", "", "Do you give lessons?  I might be willing to pay for some shader tutorials, one-on-one, as I'm trying to learn raymarching.", "shau, 2017-08-16Nice. Quite believable", "drone1, 2016-04-21Awesome.", "hcf, 2016-04-13nice work,thumbs up.", "Phi, 2016-03-24It's very realistic :-)", "Duke, 2015-11-26It would be great to evaluate the performance of the scene with shadows", "Shane, 2015-11-26@Duke", "", "Thanks for checking into that. I'd imagine it would affect a lot of shaders. Hopefully, not too many people are using old versions of Chrome. Eventually, they'd all be updating, anyway.", "", "I was under the impression, and still am, that \"v *= M\" and \"v = v*M\" do exactly the same thing, right down to the electrical distribution in the circuits, so they should either both work, or both fail... but I've been wrong before, so you never know. I could cry about it, or just make the changes. I think I'll do the latter.", "", "Cheap SSS is something I can never get quite right. \"TekF\" has some interesting examples, one in particular. For cheap surface glow, normal bending gives OK results.", "", "By the way, I could make this look a \"lot\" nicer by marching out (about 3 to 8 steps) from each particle towards the light source to accumulate some shadowing, but that's multiple times the \"map\" calls. Fast computers are OK with it, but it'd cripple the average user's machine.", "Duke, 2015-11-25@Shane", "Shader works now. Even modification 125th line solves the problem. Maybe some kind of initialization issue. Same problem I have in other shaders too. For example \"Combustible Voronoi\" and \"Fiery Spikeball\".", "In regards to clouds I hope that some semblance of SSS can replace multiple light scattering.", "Shane, 2015-11-25@Duke", "", "If I understand you correctly, you're saying some older versions of Chrome don't understand the \"*=\" representation with regard to matrix\\vector multiplication? Wow.", "", "I virtually always use the transpose matrix in order to use the shorthand notation, and I'm pretty sure plenty of other do too. Just curious, does it affect my other shaders, or other peoples? If so, I'll make the changes to all of them, albeit begrudgingly. Damn browsers.", "", "In regards to multipass light scattering, it's a big ask. As far as framerate goes, the multiple passes are the stumbling block.  Seriously, though, it'll be interesting to see what you come up with. I wouldn't be surprised if the look could be faked, to some extent.", "", "At present, I'm trying to meld this technique with solid structures. Less iterations are necessary to keep the framerate up, which leads to banding... I'll figure it out, though.", "Duke, 2015-11-24@Shane", "I mainly focused on improving the lighting calculation in clouds and want to make something like this https://www.youtube.com/watch?v=WAWPE-4Eb8s", "Duke, 2015-11-24It's strange, but this shader does not work on some old Chrome browsers. The problem in the line 125. Replacing it to rd.xy=rd.xy*rM; fix the problem.", "Shane, 2015-11-24@Duke", "", "After trying to improve the efficiency of the traditional smooth-noise, fBm cloud technique, I kind of realized I was trying to fix something that was already well optimized.", "", "I figured the best I could do was come up with a cheap, substandard imitation, so that's what this is. I don't doubt there'd be better ways to go about it, but it'd be difficult to make drastic improvements. If you want to keep things relatively fast, you're kind of restricted to variations on basic operations that most GPUs like, such as \"sin,\" \"cos,\" \"abs,\" etc, plus you have to achieve it with limited instruction count.", "", "Cleverly embedding cloud (not just noise) calculations into a texture might work (cube corners into the texture channels, interpolate, etc), but you'd need access behind the scenes...", "Shane, 2015-11-24@tholzer", "", "Coloring the clouds was an afterthought. I played around with various color choices for quite a while, including changing the color scheme based on position. In the end, I decided to keep it simple. In fact, I almost bypassed coloring altogether.", "", "By the way, coloring inside the loop gives far more variation. I also tri-planar mapped some texture colors, which gave some interesting results.", "tholzer, 2015-11-24What about moving around colorful clouds ...", "232  col = mix(col.zyx, col, dot(rd, vec3(.25))+sin(iGlobalTime*0.5));", "Duke, 2015-11-23Very cool! I'm also working on improving the appearance of the clouds. There are still some problems with the combination of the method of iq's light calculation and \"Cloudy spikeball\" technique.", "aiekick, 2015-11-23", "Azai, 2022-01-04Looks wonderful!", "", "I also like how you can get a hex grid effect if you redefine vec2 inter to return mix(p1, p2, 0.5).", "jorge2017a2, 2021-11-17very interesting and very beautiful technique !!!! the result is very good .... good job !!!", "piyushslayer, 2020-01-22Eyegasmic stuff!", "SabRango, 2020-01-21XD!", "feferdia, 2020-01-19awesome", "Ultraviolet, 2020-01-17I tried something like that here : https://www.openprocessing.org/sketch/799146, but it does not look as pleasing", "jt, 2020-01-17beautiful", "szczm_, 2020-01-15This is so aesthetically pleasing.", "EvilRyu, 2020-01-15WOW", "emmasteimann, 2020-01-14Phenomenal!!!", "TekF, 2020-01-14The tech is nice, but the anti-aliasing and colour choice takes this to the next level. Gorgeous!", "Catzpaw, 2020-01-14so beautiful!!", "asis5528, 2020-01-14Wow,it's so good", "ollj, 2019-06-08MarchingSimplex (marchingTetraeder , MarchingTriangle) is superior to MarchingCubes in performance and curvature.", "flockaroo, 2019-05-31nice!", "aiekick, 2019-05-30beatifull", "Shane, 2019-05-30Thanks, everyone. There's a lot of marching squares material, both here on Shadertoy and elsewhere on the net. However, I couldn't find the triangular equivalent anywhere, so thought I'd put one together.", "", "The next step would be using interpolant line information on the two neighboring edges to run a smooth curve through the points. Without the triangulation code, extra contours, and general prettying up, the process is pretty simple. When I get time, I might try to put together a simpler version, which should involve far less code.", "iq, 2019-05-29Really beautiful!", "", "It's like Marching Tetrahedra but in 2D, I suppose?", "FabriceNeyret2, 2019-05-29Shane is the only guy that could depict a simple plain grey image as an incredibly lovely shader :-)", "elenzil, 2019-05-29nice.", "as always thanks for the detailed write-up, as well.", "otkazano, 2020-10-24WoWnderful!", "Shem_Namo, 2020-09-30Wow, this shader is amazing!!", "The lens flares look great!!", "Could you please maybe make them as a separate shader?", "", "It's just so awesome!!", "Thanks again!!", "djMightyMike, 2019-05-12I am unable to install this shadder on VDJ 8  it claims the API is not accepted or correct.  can you provide me some assistance?", "housemandj, 2019-02-20nice good work", "zproxy, 2018-05-09360 at", "ollj, 2016-05-13may friday the 13th be with you", "yamahabob, 2015-10-04Awesome!!!  Waiting for the laser cannons to fire...", "mlepage, 2015-07-16That's no moon...", "vgs, 2015-04-19This shader is so awesome that I have to comment on it again! ;D", "Dave_Hoskins, 2015-04-09Very cool. +1 for sound! Originally made by slowing down baby elephant call I believe...", "", "Can it be a little brighter?", "vgs, 2015-04-08superb shader!", "Lio, 2015-04-08stunned!", "aiekick, 2015-04-08wow", "GregRostami, 2015-04-08AMAZING!", "iq, 2015-04-08Motionblur for the first shot would be awesome haha", "iq, 2015-04-08Very nice!!!", "tsunamayo, 2015-04-08Simply amazing !", "poljere, 2015-04-08Awesome  Sound plz!!!!", "wangxiaochen, 2021-08-13to rockmanx:", "float tmp = density / float(nbSample);", "T *= 1. -tmp * absorption;", "i think it is just a formula to evaluate when to stop tracing", "rockmanx, 2020-09-23I have a question:", "", "float tmp = density / float(nbSample);", "T *= 1. -tmp * absorption;", "", "How Transmittance is calculated? is there a formula for that?", "scratch13764, 2019-01-19This is really well done!", "drone1, 2015-12-23Looks great.", "jorge2017a2, 2022-06-14it's an excellent version!!!!", "TotallyReal, 2022-05-05This is very interesting. Can you please explain the connection to the Apollonian gasket and the choice of the parameters in the orbit?", "dirkadirkadan, 2022-05-01Code is super clean", "holmhansen57, 2022-04-28cool", "mrange, 2022-04-23Very cool look", "iq, 2017-12-06Nice", "revers, 2016-12-18Very cool ^^", "Cukierko_14, 2022-04-13I admire and envy  I can't do something like that yet", "Kyroaku, 2015-07-31Done and thanks", "Dave_Hoskins, 2015-07-31Please use iq's changes, it won't change the shader at all, just the syntax so that some cards won't break.", "It looks nice 'n' splody BTW!", "Kyroaku, 2015-07-31Even on my phone it works fine. Linux is broken, not my shader", "Xender, 2015-07-31On NVidia (Linux), it looks black (iq's fix helps).", "dila, 2015-07-31doesn't look too broken here. particles are nice", "Kyroaku, 2015-07-31I'm not sure if I can change the code, because it was written for competition, but thanks for info anyway", "iq, 2015-07-31The shader is broken, it looks all black. The problem is that you cannot take pow() of negative numbers (see the help dialog in the ? icon by the editor). You can fix it like this: vec3 pow3(vec3 v, float p)", "{", "return pow( abs(v), vec3(p) );", "}Then I see fireworks on a flag rather than a black screen.", "jorge2017a1, 2020-06-23interesting effect !!!!", "jorge2017a1, 2020-06-23", "ollj, 2016-04-18old but good effect when applied over high dynamic range to become crepuscular rays.", "skythedragon, 2022-12-27Port the shader to whatever unity uses and add it to your project I guess.", "", "You might need to modifiy it to get it to blend better with scenes, please do not use additive blend modes.", "frankdonners, 2022-12-27Does anyone know how to get this to unity urp?", "turboplay, 2022-01-25(Thanks for the MIT license)", "turboplay, 2022-01-25Very good I used it.", "SausageTaste, 2021-12-31Nvm now it works beautifully on my iPad. Thanks.", "skythedragon, 2021-09-14Thanks!", "How exactly doesn't it work?", "SausageTaste, 2021-09-14This is beautiful thank you! Sad it doesn\u2019t work on iPad.", "skythedragon, 2021-05-30In the meantime you can look at this one, which doesn't have these changes: https://github.com/Dimev/Realistic-Atmosphere-Godot-and-UE4/blob/master/godot/shader/atmosphere.shader", "skythedragon, 2021-05-30@sircm04 Oh thanks", "Probably a bug I caused after adding in the new integrator, I'll fix it when I have the time (or rewrite the entire shader if I can get an entirely different technique working)", "skythedragon, 2021-03-09@astearon what do you mean?", "astearon, 2021-03-07Looks really cool. I am trying the GODOT version but wanted to know how I could make the sun have a fading halo when going up through the atmosphere or is it simpler to just add the halo directly to the sun?", "UsualSpace, 2020-03-22Nice!", "archee, 2018-04-01Very good image. I like it more with simple background like this:", "vec3 GetEnvMap(vec3 rayDir) {   return vec3(1.0,1.0,1.0)*(rayDir.z*0.5+0.5); }", "Shane, 2018-03-07Really pretty, and a great reference. It runs fast too.", "P_Malin, 2018-02-25I've been looking forward to you publishing this one and it was worth the wait, it looks really great! I feel like I should dust off my half finished pathtracer. All the cool kids are making them.", "reinder, 2018-02-25Wow, this looks really nice (and it works on my iMac / Nvidia).", "otaviogood, 2018-02-25@GregRostami - This makes me sad. I have tested on macos/chrome, but I have no access to an AMD GPU. Where can I get my hands on the Shadertoy test suite enterprise edition professional? It's probably something stupid, like a const variable messing something up. :/", "GregRostami, 2018-02-25I'm using Chrome. AMD Radeon HD 6970M 1 GB", "ttg, 2018-02-24WebGL Report", "otaviogood, 2018-02-24It needs the webgl 2 features, but I'm guessing you have that.", "otaviogood, 2018-02-24@GregRostami - What broswer/GPU?", "GregRostami, 2018-02-24It's black on my iMac.", "MysteryPancake, 2022-11-26Beautiful, would make a great wallpaper", "MyGoodSir, 2021-12-20your description is right, this fluid does have mad UDLR energy lol", "nsm2, 2020-06-14beautifully dramatic!", "raabix, 2020-03-26This is so cool. I am surprised to see how little code is necessary to implement this.", "jeyko, 2020-01-12Awesome! And thank you for the explanation!", "DustinTeWind, 2019-10-20This is probably my favorite thing on the site. I could just watch the fullscreen for hours.", "Passion, 2019-10-15Looks like wet paint cool effect.", "stb, 2019-10-14This is excellent!", "Ecter, 2019-10-11note, after 236.85 -> 274.51 seconds at 60fps, the simulation became unstable and nan propogated.", "wyatt, 2019-10-11So the grid is moving right, so as it moves it deforms. The deformation is the divergence of the field - here, that's the difference between the \"in energy\" and the \"out energy\". The fluid simulation translates the grid, then accounts for the deformation. When the grid is compressed, it stores up energy. Then it pushes along the gradient to smooth itself out again after being compressed", "Ecter, 2019-10-11@wyatt right, so in Lattice Boltzmann, you know exactly where stuff came from and goes to during advection, it comes form neighbors on each timestep, which makes this confusing. so this is just advection?", "wyatt, 2019-10-11velocity is the rate that stuff moves, so you have to account for that. The whole field is in motion. In reality, the energy exchanges are happening because everything is moving. I'm just telling them to happen with code, so I also have to tell everything to move. It's hard to really know where every part of the screen just was, so you have to guess. If I go back by 2 half steps, that's like a pretty good guess of where everything just was.", "Ecter, 2019-10-11I have no clue what", "", "vec4 A(vec2 U) {", "U-=.5*v(T(U));", "U-=.5*v(T(U));", "return T(U);", "}", "", "is doing.  Why do you translate the energy look up by velocity at all, let alone do it twice?", "wyatt, 2019-10-11thanks!, delete the numbers on line 7 buffer C", "badjano, 2019-10-11I really like this, but the fact that the colors are all wrong annoys me a lot, I wish I could melt any image", "XorT, 2019-10-10very nice. thanks a lot. i'll try to grasp whats going on.", "wyatt, 2019-10-10my apologies that was totally inaccurate, I didn't realize the letters were out of order. I added comments, mostly to buffer A.", "", "Hopefully it clears things up. It's actually pretty cool and physicsy. It certainly spers the imagination!", "wyatt, 2019-10-10Buffer A  is the fluid,", "Buffer B advects a position field", "Buffer C looks up the texture based on B position", "Buffer D computes the gradient and gets the lighting", "Image does the sparkle effect by integrating an X over the lighting", "XorT, 2019-10-10Thank you for explaining a little.", "Since the obfuscated code is kinda hard to read, could you give a brief overview on which buffer does what so I have some place to start to understand it ? And maybe which xyzw represents what quantity ? I'd really like to better understand on what you are doing here in detail (which gonna be even harder if it is different from MeAndMyNeighborhood).", "wyatt, 2019-10-10thanks for your curiosity - I just heard that Lattice Boltzmann was when you had up/down/left/right. And I guessed that Pressure = up+down+right+left and that velocity = (right-left , up-down). Advection is the same as always - step w/ the velocity (in this case calculated from u/d/l/r. Pressure exchange I guessed was just exchanged on each boundary with the corresponding internal direction : left-boundary: right energy enters from left etc. acceleration is always the gradient of pressure, but acceleration increases the difference between antiparallel energies - which is the calculation for velocity.", "", "So I totally guessed at how to do it based on my experience - idk if it corresponds to other algorithms... I just kind of intuitively put the pieces together until it looked right.", "", "But it doesn't correspond to MeAndMyNeighborhood other than the advection step. But the feeling behind it is totally the same.  Translation, Free Energy exchange, Acceleration=grad(Pressure)", "", "There are some things that I can do with this algorithm that I cannot do with the other. For example, on line 32 in Buffer A, I slowly mix the distribution values with the calculated pressure - which is like internal viscosity or something? idk I was just messing around, but that's like a weird thing I couldn't do before by tracking velocity and pressure separately.", "", "So by defining Lattice Boltzmann as a fluid algorithm that uses distribution values instead of velocity and pressure, this totally is, but if you're comparing it to something other people have done... well in that case I have no clue.", "jmpep, 2019-10-10While this is definitely pretty and fluid-like... are you sure this is LBM? Or even that you can reconstruct N-S from this formulation? Not that it matters for aesthetics, this is extremely cool anyway. I am just curious.", "XorT, 2019-10-10@Wyatt: Beautiful stuff.", "Is this a more-less unaltered implementation of your description found here: http://wyattflanders.com/MeAndMyNeighborhood.pdf ?", "And if so, is it a reformulation of the classical D2Q5 LBM ? I have trouble finding the exact correspondence between your explanation and the usual LBM explanation (like stream+collision step). Could you elaborate on this ?", "I was experimenting with LBM for a while, but only got D2Q9 grids to work properly, not D2Q5 apparently I was missing something essential (as stated here: https://physics.stackexchange.com/questions/505531/lattice-boltzmann-method-how-is-shear-flow-handled-in-d2q5).", "ShnitzelKiller, 2019-10-10it turns out that watching paint melt is very entertaining.", "zoomerang, 2019-10-09Sparkles are awesome \ud83d\udc4f haven't noticed at first", "jt, 2019-10-09awesome", "Ecter, 2019-10-07@wyatt \"that would be like gravity being a billion meters/sec/sec! don't hurt the simulation!\"  So is it gravity?  Again, all the variable names are obfuscated.", "Plento, 2019-10-07very pretty", "wyatt, 2019-10-07that would be like gravity being a billion meters/sec/sec! don't hurt the simulation!", "Ecter, 2019-10-07very easily happens in LBM*", "Ecter, 2019-10-07Also, note Lattice Boltzmann is incredibly unstable, and really only suitable for low mach compressible flows unless you're using dual doubles/quad floats (though similarly incredibly simple to implement).   In bufferA change line 31 coefficient from 0.0005 to 0.001 (I believe this is the Lattice Boltzmann tau coefficient, but can't be sure since it isn't documented), things will be much faster, then try to change it to 0.01, you'll see your entire scene get swallowed up by reddish grey, and when you try to lower the number again, your paint will be swallowed, this is NaN propogation, which is hard to handle and very easy.", "Ecter, 2019-10-07what is with the obfuscated naming?", "wyatt, 2019-10-07thanks", "BigWIngs, 2019-10-07Wow, the sparkles in there are awesome!", "wyatt, 2019-10-07:-)", "iq, 2019-10-07I agree, this is incredible especially at 1920x1080. I want to touch it.", "Cotterzz, 2019-10-07Fullscreen is incredible at 1080p", "inferno, 2015-05-12Thats great. @simesgreen Is there any chance to contact you directly ? Thank you", "bram, 2014-05-21Looks great, but fragment shader is far too expensive. I get roughly 1fps full screen, and below 30fps windowed. On Haswell with HD4xxx graphics.", "simesgreen, 2013-04-12added detail to noise", "bloodnok, 2013-03-03You can almost feel the heat and taste the ash...", "XT95, 2013-02-28Awesome !", "chrisjj, 2018-03-24Dave_Hoskins, crashing on Chrome and Windows 7 here too, but only after running a few minutes.", "chrisjj, 2018-03-24ollj, can you explain why you recommend epsilon be proportional to loga of square of distance, rather the to plan distance as you'd one would expect from diminution by perspective?", "ollj, 2017-08-07[This comment has been hidden by the shader author]", "revers, 2017-07-17Using curvature for edge detection of 3d voronoi cells - brilliant!", "Dave_Hoskins, 2015-11-21Still crashing 2 years later!", "Dave_Hoskins, 2013-12-12Hi, for some reason this is now crashing a Win7/Chrome/GTX combination.", "jpryne, 2013-08-11Gads, I've been working on something very similar to this! I bow to you, sir.", "PauloFalcao, 2013-04-15Very cool!  Always loved leizex!", "ssdsa, 2013-04-15Cool and also creepy! Unfortunately, very very slow...", "CPU, 2013-04-13Excellent, complete with lichen. Love it!", "devrique, 2023-04-30This shader helped me to do some 3D water ripples, thank you!", "FabriceNeyret2, 2022-02-22test \"delete post\" button", "FabriceNeyret2, 2022-02-22test \"delete post\" button", "PcChip, 2019-07-07https://www.reddit.com/r/TranceEngine/comments/ca24tx/putting_the_trance_in_tranceengine/?", "soudfv, 2021-01-06Just found out, paraboloid can be constructed without revolution, instead combine sphere and plane sdf with lerp 0.5 (center of the sphere must be above the plane).", "iq, 2018-11-01The most common simplificaton/optimization is this one: float opSmoothUnion( float d1, float d2, float k )", "{", "float h = max( k-abs(d1-d2), 0.0 );", "return min( d1, d2 ) - h*h*0.25/k;", "Klems, 2018-11-01Not sure how we simplify this, the easiest I found was to reduce min and max to an abs function. Then you can shape that function however you want.", "ollj, 2018-11-01yet in 2 years this is done next to never.", "lacks an easy to use pattern structure?", "Klems, 2018-11-01Now instead of smoothing, you can introduce custom union functions (stairs, chamfer, etc) like these ;) http://mercury.sexy/hg_sdf/", "mkennan, 2022-01-05Thanks for this, your annotations are vey helpful.", "", "\"Because we are programmers, not lawyers.\"", "", "*clap* *clap* *clap*", "CaliCoastReplay, 2016-07-30Cinema quality", "visuality, 2016-06-26Incredible.", "Jacoby, 2016-06-13Fantastic!", "poljere, 2015-08-25Otavio, on my linux box the shader does not compile. Looks like the problem is the redefinition of the variable localTime in line 207, you have already another variable called localTime defined in line 16. Could you take a look at it please? Thanks!", "nimitz, 2015-06-10Had missed it, very nice!", "dila, 2015-06-09looks like a robot camera / eye. very nice", "poljere, 2015-04-08@Dave_Hoskins agreed!", "Dave_Hoskins, 2015-04-07Great idea using the car photography setup. It looks better than the Google ball video on here!", "coyote, 2015-04-07Beautiful!", "aiekick, 2015-04-07amazing", "GregRostami, 2015-04-07Sooo COOL!!", "iq, 2015-04-07Looks pretty amazing!", "poljere, 2015-04-07Dude, this looks really good", "sh1boot, 2019-10-14If you were looking into the water at an angle, then the local depth, and not just the gradient, would have an effect on the view.", "", "Try adding vec2(0.0, (p01 - 0.5) * 0.3) to the iChannel1 sample coordinate to simulate depth; or even vec2((p01 - 0.5) * (q.x - 0.5), (p01 - 0.5) * 0.3).", "Ridgen, 2019-04-07nice", "jt, 2017-10-09nice!", "Shane, 2016-01-17Nicely done. I used to love combining this effect with stuff like plasma.", "tomkh, 2016-01-07overlii: thanks and yup, I'm from Berlin. Let's take it offline though ;)", "knighty, 2016-01-07very cool!", "overlii, 2016-01-06tomkh, you'r in Berlin right? I think we met at two occasions, you were interviewing me  Nice to see you here!", "overlii, 2016-01-06Nice rendering and drops, I made a similar one that could use some ;)!", "tomkh, 2016-01-06Thanks for the hints! It's cool to have 16-bit by default, somehow I didn't notice", "iapafoto, 2016-01-06he he I was waiting for this one    Well done", "FabriceNeyret2, 2016-01-06Note that buffers A,B,C,D are 16bit, just to avoid strugling with encoding like you are doing with h2c and c2h ;-)", "FabriceNeyret2, 2016-01-06maybe you could fake a mouse event, to make the iconic form sexy ?", "poljere, 2016-01-06Hey tomkh, the buffers A,B,C,D are actually floating point, so if you want you could store FP values directly.", "Dave_Hoskins, 2016-01-05A very nice version of a classic.", "PauloFalcao, 2016-01-05Sweet!", "TambakoJaguar, 2016-01-05Well done!", "qiuqiu, 2021-10-09Cool!", "404Glaciergargamel, 2020-12-19Remix: https://www.shadertoy.com/view/3tdcRr", "me_123, 2020-12-03How do you get so less noise with 32 samples?", "AGPX, 2018-05-19Ah, Next Event Estimation is already implemented... sorry for the comment.", "AGPX, 2018-05-15Hey wonderful demo. Can you add Next Event Estimation, trasparency and reflections?", "GregRostami, 2017-09-01Amazing SPEED!!", "Maurogik, 2023-03-17@mushroom: Good question, for the full and formal answer, you'll want to check out http://advances.realtimerendering.com/s2015/index.html : Towards Unified and Physically-Based Volumetric Lighting in Frostbite.", "The answer I prefer is more intuitive, the transmittance is the probability of going through some volume/fog WITHOUT hitting any of the floating particles.", "From that it follows that the probability of hitting any particle is (1 - transmittance). When doing the lighting for a single step along the ray, the probability of the ray hitting/viewing any particle/fog/medium is then (1 - stepTransmittance) and that probability drives the amount of light scattering that can happen along that step of the ray.", "mushroom, 2023-03-15I have a question,  in Buffer B, 380th , why it is \"transmittance * (1 - stepTransmittance) * stepLighting\" but not \"transmittance * stepTransmittance * stepLighting\" ?", "artfaith, 2023-02-22Indescribably marvelous...", "", "In addition to @NachoRosa95, you might want the following changes (line 1357 as of 2023-02-22) for the camera position:", "```", "vec3 lookAtTarget = vec3(0.0, 10.0, 0.0);", "rayOriginWS = vec3(lookAtTarget.x + sin(iMouse.x / iResolution.x * 12.0) * 20.2, 0.7, lookAtTarget.z + cos(iMouse.x / iResolution.x * 12.0) * 20.2) + 0.6;", "```", "mororo250, 2022-05-19This is incredible. What technique are you using to compute the sky/sun light.", "rcargou, 2022-02-05super neat !", "lz, 2021-10-29Once in a while coming to see this again. Amazing.", "Famousghost, 2021-06-02Incredible. That's why I love this page. Shows incredibly talented people like you .", "pyBlob, 2020-10-06simply perfect", "NachoRosa95, 2020-08-06There are no words.", "", "It absolutely doesn't do the composition justice but for those asking to rotate the camera, change Common, lines 1355 through 1357 to", "", "vec3 lookAtTarget = vec3( 0.0, 5.0, 0.0);", "", "rayOriginWS = vec3(lookAtTarget.x + sin(iMouse.x/iResolution.x*10.0)*20.2, 2.0, lookAtTarget.z + cos(iMouse.x/iResolution.x*10.0)*20.2);", "rreusser, 2020-07-21My face for the one minute duration of the loop: \ud83d\ude32", "rreusser, 2020-07-21My face for the one minute duration of the loop: \ud83d\ude32", "chetgnegy, 2020-07-20@Maurogik Doesn't work on Lynx browser either!! Seriously though, I got it working on Firefox and it looks amazing. I also appreciate the clean code. Trying to reverse engineer these can be a lot of work. Great job!", "laura996, 2020-07-20Oh my, this one looks so good. Cheers!", "Maurogik, 2020-07-19@chetgnegy Possibly shader compilation taking it's time, depending on the OS, browser, and moon cycle, the time it takes varies. I'd say give it a minute, if it doesn't work a different browser might do the trick.", "chetgnegy, 2020-07-19I can see the preview on the Shadertoy main page, but once I click the shader it seems to take me to an empty one with no code, no image, and only loaded iChannel0 and iChannel1 buffers. I'm running Chrome, does this happen to anyone else?", "stungeye, 2020-07-17Incredible work. Love that your code is well structured for potential re-use. Tons of raymarching and shadow mapping gems here!", "KylBlz, 2020-07-17Awesome details, lense effects, and the tree!", "Wow it even runs on my phone", "jperl, 2020-07-17This is so impressive.  Great job.", "BrendonCon, 2020-07-16Absolutely stunning. New shader programming goals, thank you!!!", "P_Malin, 2020-07-16Oh wow. Wonderful.", "lz, 2020-07-16So gorgeous.", "jt, 2020-07-15awesome", "webanck, 2020-07-15Amazing <3", "lz, 2020-07-15Wow", "dean_the_coder, 2020-07-15The more you watch, the more cool things you see.  Excellent.", "(Very readable code too!)", "otaviogood, 2020-07-15NEXT LEVEL!!! Insane! I can't believe all the details. I would have been happy with just the tree!!!!", "kastorp, 2020-04-21wow!", "asis5528, 2020-04-17so relaxing ,loved it", "TDM, 2020-04-16One of the most beautiful shaders here", "Kali, 2020-04-13Such a masterpiece. So many details and effects. I'm speechless, incredible work.", "Shane, 2020-04-11 Beautiful work.", "movAX13h, 2020-04-10Congratulations to this masterpiece!", "metamind, 2020-04-10amazing!", "PauloFalcao, 2020-04-10The time, the tree, amazing!", "EvilRyu, 2020-04-10Super !", "FabriceNeyret2, 2020-04-10Soo nice !", "( I want to be free turn the camera ! :-) )", "markusm, 2020-04-10Wow, best SDF tree ever.", "iq, 2020-04-10Looking really good!", "", "It's probably the best tree we have in Shadertoy so far?!", "XT95, 2020-04-09Perfect!", "BigWIngs, 2020-04-09Very nice. Great music choice too.", "GregRostami, 2020-04-09AMAZING! Thank you!", "reinder, 2020-04-09Wow! Super cool!", "flockaroo, 2020-04-09beautiful! very well done!!", "fizzer, 2020-04-09Super awesome!!", "piyushslayer, 2020-04-09So beautiful!", "aiekick, 2020-04-09nice", "jorge2017a1, 2020-04-09very beautiful landscape ... good technique", "...........", "paisaje muy bonito...buena tecnica", "zproxy, 2020-04-09looks nice.", "there is a glitch at", "float rayleighPhase1 = rayleighPhase(rayDotSun) / kIsotropicScatteringPhase;", "and had to disable", "cloudInscatter = applyAtmosphere(cloudInscatter, rayDirWS, cloudPlaneInterDist, 1.0);", "shau, 2020-04-09beautiful", "julianlumia, 2020-04-09woooow :0", "Dave_Hoskins, 2020-04-09A superb work of art. Love it!", "jeyko, 2020-04-09wooow", "ttur, 2018-11-10ok", "ollj, 2018-10-07CaliCoastReplay, at one point you just have to calculate the asymptote/determinant", "before any division, to catch any special case of a near-parallel", "or nearly-asymptotic case, where a generalized function would divide by 0", ",or by very small values, while usually a simpler special case function just divides by 1.", "very simple example of this is the line2LineIntersection() function", ", that has is a special case of a more general hyperbolic variant", ", and as such has a failing case of [parallel lines, no intersection]", ", or [intersection is very distance and low precision]", "", "Same goes for tracing a sphere, where both intersections are very close to each other, all the way down to the asymptotic case, where both ray2SphereIntersection()s are the same point.", "", "the issue of scaling this up to planets is that it quickly hits limits of 32bit float precision", "", "this catching of asymptotical special cases then creates an if() branch, to be treated as orbit-trap. this means, small absolute epsilons, that have only almost reached escape time/orbit must be treated as if they have reached escape-time/orbit, due to 32bit float precision loss, you need this epsilon of lower orbits.", "", "the special case branches, treated as (fractal) escape orbits, then can be treated as BVH, that internally scale uv by powers of 2 (or their inverses) , to evade precision loss. this way you can have high precision sphere landscapes on 2 spheres that are far apart.", "ollj, 2018-10-07CaliCoastReplay, just have it define a heightmap and add it to the distance to the sphere surface for displacement-mapping , sure its a shitty upper bound, ensuring slow performance, but it can be root solved with raymarching.", "", "i like to label float length2(vec2 d){return dot(d,d);}", "as dd(), because its a \"[d]oubled [d]ot\" and its also a squared [d]istance, as in d*d.", "CaliCoastReplay, 2017-05-26Fixed!", "FabriceNeyret2, 2017-04-16no longer compiling in webGl2: atanh now existing and overloading built-in no longer allowed.", "CaliCoastReplay, 2016-08-26Thanks for the catch, roywig.  If I get time I'll work on it, but I'd almost rather work on trying to integrate the concepts into a better space shader.  This is a kind of collection of bad hacks, in some ways.  If you truly want to fix it before that - you're more than welcome to copy/remix it, as far as I'm concerned.  Most of the source shaders are either ShareAlike or not explicitly licensed, so it seems unlikely anyone would mind...", "", "I'm more interested in figuring out how to replicate the concepts I accidentally discovered with more proper physical and 3D modeling.  The hyperdisc has the nice functionality of providing fractal details down to the smallest possible resolution - so I've noticed this shader scales to a fullscreen far better than many of the other noise concepts I'm exploring.  However, that only occurs near the \"infinite tunnel\" near the asymptote of the disc.", "", "Do you or any others have ideas on how to replicate that \"true fractal\" nature on a more properly modeled ocean/clouds/fire/other physical wavenoise-based phenomena?", "roywig, 2016-08-24The mask around the sphere fails at different aspect ratios- it turns into an ellipse, so there's a bug! I think you need to use this instead to get a coord system that scales properly:", "", "vec2 uv = fragCoord.xy / iResolution.x;", "", "Once you've calculated uv I would pass that to the planet function so it doesn't know anything about fragCoord, and everything is drawn in the same coordinate system. OR calculate the mask inside fake_planet, since you're returning a vec4 you have alpha to play with.", "roywig, 2016-08-24I like it a lot, it reminds me of Solaris or Star Trek Original Series matte paintings.", "shau, 2016-08-16Cool, much better. This stuff isn't so easy Keep it up", "CaliCoastReplay, 2016-08-16Slightly less crappy, though very unpretty as code.  I really need to keep learning.", "CaliCoastReplay, 2016-08-10Imsure:   Feel free to go to shaders that interest you better, then.  I like it;  so do others.  No doubt there is always room to improve, however...", "Imsure1200q_1UWE130, 2016-08-06Not Nice.. The Sky Is All White, No Stars, Just Land And A Tiny Weeny Bit Of Water..", "shau, 2016-08-06These sort of remind me of Termeshperes.", "shau, 2016-08-06Very pretty non the less", "CaliCoastReplay, 2016-08-06Okay, I'm certainly being foolish here, but why is my starfield blend doing exactly the *opposite* of what it should be?", "aiekick, 2016-08-06wow", "CaliCoastReplay, 2016-08-06Testing it - the  hyperbolic disc grants it a wonderful fractal self-similarity literally at any resolution, making it a good candidate to build on for a static high-res scene.", "", "I wonder if shader artists with more experience could somehow translate the fractal nature of a hyperbolic disc to an actual 3D scene?", "marvpaul, 2021-06-12@JoshP Thanks a lot for creating and sharing it, it's incredibly wonderful! <3", "Any chance to purchase a license for it so I can use it along with a music visualization and fluid simulation app I have in the app store?", "Unfortunately I have not found a way to contact you. Would love to hear from you here or via email (info@mkgames.org). Best regards Marvin", "cmarangu, 2021-04-14Lol the only thing thats simple is the code, and even that only deceptively so", "wecall, 2021-03-20@BenKenobix  Oops; didn't notice how old that post was.  Oh, well.  Feel free to ping me if this is still a thing you care about.", "wecall, 2021-03-20@BenKenobix.  There are multiple projections.  The simplest thing to do would be to just sample the solution space with spherical coordinates.  That won't produce the best result, though.  I've got a shader stashed somewhere that ought to do it.  I'll get back to you.", "BenKenobix, 2017-12-28Hello guys,", "do you know how to apply this shader on a 3D Sphere ? (with ThreeJS)", "jt, 2015-12-14Nice!", "AlexHonor, 2015-05-20 I'm new to fractal rendering. Does somebody know what is the algorithm for rendering this fractal? Or is it a clever hack approach or some variation of flame fractals.", "inferno, 2014-01-18just wow !", "i made a matchbox version out of it. this version will work inside Autodesk's Fame / Smoke compositing software. if you want to see what that means, please take a look: http://logik-matchbook.org/shader/crok_fractal", "rabit, 2014-01-15Beautiful and it runs full-framerate on 4K.  This would be a great demo for UHD. ;)", "bmackenzie, 2013-10-28Hey, love this shader. I'm net to the shader game. Could anyone tell me what the GLSL equivalent to iResolution is? I;m trying to recreate this beautiful for educational purposes.", "iq, 2013-05-09lovely!!!", "ssdsa, 2013-05-08Very nice!", "JoshP, 2013-05-08thanks all! @Kali yep, was definitely inspired by your post on fractalforums. Kaliset is amazing  Kudos on finding it!! I hope to see other people playing with it more frequently...feel like there's a lot to be explored here.", "weyland, 2013-05-07Gorgeous", "poljere, 2013-05-07Awesome! I love it.", "Dave_Hoskins, 2013-05-07Great! It looks like an explosion behind a cloud, but when viewed full screen it becomes really intricate.", "CPU, 2013-05-07Sweet! and very fast!", "srtuss, 2013-05-07Wow, that looks amazing! I like the coloring.", "Poisson, 2023-02-26You can now add the wedge intersection: https://www.shadertoy.com/view/mllGzH", "reinder, 2022-08-19@kastorp yes, that's really nice!", "kastorp, 2022-08-18I wanted to try your showcase with my CSG functions. Here is the result... hope you like it", "shengsword, 2020-07-23may flip the normal when ray intersects inside? thanks, nice shading!", "shengsword, 2020-07-23I mean, the scene still be lighting when I enlarge the box or sphere to cover the whole scene?", "shengsword, 2020-07-23@reinder", "when ray's origin is inside the box, the box intersection seems to be broken", "reinder, 2020-04-29@hojo: thanks! I use a filmic tone mapping. I don't know if it's faster then regular gamma correction but I think that it looks good for this scene.", "hojo, 2020-04-28impressive, even better than your RIOW 1.12 !", "Is your gamma correction formula with rationals faster than pow or sqrt?", "reinder, 2019-06-05@iq and @Shane: I really like your quartic surface shaders! Thanks. I have added the Goursat intersection routine of iq to this shader and added/hacked (probably incorrect) support for dielectric materials to the ray tracer.", "shau, 2019-06-05Neat.", "iq, 2019-06-05@Shane, yeah, I made that one yesterday: https://www.shadertoy.com/view/3lj3DW. But I think I have a  bug, for some parameter values I have a discontinuity.", "Shane, 2019-06-04Fantastic reference, and really aesthetically pleasing. I raytraced a generalized quartic surface on Shadertoy a while back, just for fun. Unfortunately, it'd be a little messy to include here. For specific quartic surfaces (like a Goursat tooth surface, for instance), a lot of the coefficients would be zero, which would trim it right back.", "reinder, 2019-06-04@iq Thanks! I have added the quartic sphere.", "iq, 2019-06-04You can add the quartic sphere: https://www.shadertoy.com/view/3tj3DW", "GregRostami, 2019-06-04WOW!!!!", "reinder, 2019-06-03@iapafoto Thanks! I have added the Triangle (as a simple mesh) and will have a look at the Frustum intersection code.", "iapafoto, 2019-06-03And Triangle by iq", "iapafoto, 2019-06-03Nice reference shader.", "Quite exotic but there is also Frustum by robertcupisz", "toto263, 2019-12-03@Aj_ Thank you!", "Aj_, 2019-12-03@toto263 Sure man. Go ahead.", "toto263, 2019-11-17Can I use your code in my commercial music player?", "munrocket, 2019-11-13this is really cool!", "iq, 2014-11-20Indeed, that seemed to work pretty well  Thanks for the suggestion, eiffie!", "eiffie, 2014-11-19I love this. You can also use the change in depths during the composite loop to blend intersecting surfaces (where the difference in depth is less than a pixel width).", "bioccular, 2014-11-14Gorgeous!", "vgs, 2014-11-14really interesting!", "gloinart, 2014-11-14What does the dithering do here? Just add noise?", "CPU, 2014-11-14Beautiful!", "ollj, 2016-04-17the side view makes it look like melting ice cream.", "ollj, 2016-04-17how dare you making a flower without golden angle phi-rotation. for shame!", "Xytor, 2014-10-11Amazing! I wonder if it's possible to have the petals and anthers swaying in the wind?", "Nema, 2013-10-25pretty awesome! Ladybug or butterfly would be nice! :-)", "Dave_Hoskins, 2013-07-12Very nice! BTW No shadow on Firefox/Win7/GTX.", "4rknova, 2013-07-03Amazing as always", "poljere, 2013-06-26Beautiful.", "ollj, 2021-01-11[This comment has been hidden by the shader author]", "paniq, 2019-07-30updated shader to use triquadratic interpolation for SH volume", "ollj, 2017-11-02for faster light (per frame) you likely want to make multiple passes of light traversal for each frame.", "ollj, 2017-11-02i like this a lot, but it has a very slow speed of light and also a speed of light that is linear to fps.", "This works with moving light emitters, but then you see its relativistic effects.", "this has many applications, but the dependency of speed of light to fps is not good. this fps-enforced time dilation needs to be accounted for in VR.", "", "this could be used to add relativistic effects to curve spacetime and light in it, depending on camera movement.", "iThis solves better for how occlusion is affected by relativistic effects.", "ollj, 2017-11-02setting ichannel0 of image to type mipmap is fun.", "notlion, 2017-10-24Looks like the paper referenced in the comments was moved here: http://data.blog.blackhc.net/2010/07/lpv-annotations.pdf", "FabriceNeyret2, 2016-03-08eiffie: cool, thanks !", "Dave_Hoskins, 2016-03-08Truly amazing coding. Cool results.", "eiffie, 2016-03-08To see the pulse you can multiply line 168 in buf C by step(mod(iGlobalTime,5.0),2.5)", "If the code changes this is the line where fragColor is set to a multiple of lightcolor.", "iq, 2016-03-08Pretty! You'll have to revisit this once we implement 3D textures though.", "paniq, 2016-03-08@FabriceNeyret2: feel free to fork", "FabriceNeyret2, 2016-03-08thus then having the 1st light source just send a pulse would better show the propagation effect.", "paniq, 2016-03-08@FabriceNeyret2: sure. that's actually my first test case. looks exactly like time of flight.", "FabriceNeyret2, 2016-03-08would it be possible to make it even slower, then to switch on/off the light periodically ? so as to reproduce the famous & cool \"time of flight\" video.", "paniq, 2016-03-08@FabriceNeyret2: it's a finite element method. light travels 1 cell per iteration. that means the number of frames required to complete a bounce between two surfaces equals their manhattan distance.", "FabriceNeyret2, 2016-03-08\"is it A or B ?\" -> \"yes.\"", "Ok, you are a pure logic mathematician. :-)", "", "-> I rephrase.", "is it A  (pure  propagation time) ? Or is it B ( time-delay-per-bounce ) ?", "paniq, 2016-03-08@FabriceNeyret2: yes", "FabriceNeyret2, 2016-03-08is it really a propagation time, or just a time-delay-per-bounce ?", "Hamneggs, 2016-03-08This is sweet", "eiffie, 2016-03-08With the new speed of light being 1 pixel per frame that would make for some interesting experiments. The torus could outrun its shadow.", "public_int_i, 2016-03-08Interesting haven't seen this before.", "fu5ha, 2021-04-30@gorevojd or others interested, here's a paper on bilateral filters which will explain what sigma and bsigma are  http://people.csail.mit.edu/sparis/bf_course/course_notes.pdf", "weiwen, 2021-04-20thanks for this beautiful work!", "gorevojd, 2021-03-23Can you please share a paper which you used to implement the algorithm? I want to know what is Sigma and BSigma is..", "demofox, 2020-02-14This is really nice!", "If people come here looking to port it to their 3d applications, it's important to note that while this filter uses pixel distance and pixel color to weight the summed pixel colors, that in 3d applications, it's more common that you'd use pixel distance and pixel DEPTH or normals to weight the summed pixel colors.", "athlete, 2015-06-02Beautiful shader! Thanks for sharing", "", "I found a performance improvement by about 1/3 of the processing time if you pre-compute the kernel.", "", "like so:", "", "//sigma 10.0, MSIZE 15", "const float kernel[MSIZE] = float[MSIZE](", "0.031225216, 0.033322271, 0.035206333, 0.036826804, 0.038138565, 0.039104044, 0.039695028, 0.039894000, 0.039695028, 0.039104044, 0.038138565, 0.036826804, 0.035206333, 0.033322271, 0.031225216);", "mrharicot, 2013-05-12Oh yes you're right! Firefox gives a compilation error while Chrome doesn't...", "I fixed it! Thanks iq!", "iq, 2013-05-12Ouch, the shader doesn't work in Firefox. You need to add \"const\" to line 30, otherwise the shader is illegal (although i agree it shouldn't)", "movAX13h, 2013-05-12Sorry, this shader crashes GL in my browser. Commenting line 51 makes it compile but I was not able to find the actual problem. (Chrome, Win7, ATI Radeon HD 4800)", "mrharicot, 2013-05-11Haha me too! Especially because I'm not an optimization genius!", "CPU, 2013-05-11swish!", "iq, 2013-05-11i'm surprised how well it works!", "cxm, 2021-12-13Good job.", "piyushslayer, 2020-09-18So adorable!", "jorge2017a1, 2020-09-06my machine is weird ... now it turns out that if you look at your shader .... without modifying anything .... upsss", "..........", "mi maquina es rara ... ahora resulta que si se mira tu shader .... sin modificar nada .... upsss", "celifrog, 2020-09-06@jorge2017a1, Cool, use linux also!   I use debian!", "dean_the_coder, 2020-09-06Now with bounce and ear wobble.", "jorge2017a1, 2020-09-05save on speed..before 2.0 fps now 4.1 .... well my machine is not so modern ....  ....", "........", "ahorre en velocidad..antes 2.0 fps ahora 4.1 .... bueno mi maquina no es tan moderna ....    ....", "jorge2017a1, 2020-09-05remove the function", "// d = min2 (d, sdSprinkles (p));", "and you look at the cat ... yahoooouuuu..hahahahaha", "..............", "elimine la funcion", "//d = min2(d, sdSprinkles(p));", "y ya se mira el gato...yahoooouuuu..jajajajaja", "jorge2017a1, 2020-09-05funny video !!!", "https://www.tiktok.com/@qpark/video/6714694496136727814?lang=es", "https://www.tiktok.com/@qpark/video/6714694496136727814?lang=es", "dean_the_coder, 2020-09-05@jorge2017a1 it looks fine for me.  I'll try on Ubuntu next time I get a chance.", "There's a video of it here: https://youtu.be/RVjTLTXb5Y4", "jorge2017a1, 2020-09-05@dean_the_coder,", "interesting I did not know that !!!! .... I thought that shadertoy did not like my shaders .... upssss ... by the way, look at your cat .... in the shadertoy application ..... Interesting !!! !", "..........", "interesante no sabia eso !!!! .... yo pense que a shadertoy no le gustaba mis shader .... upssss ... por cierto ya mire tu gato ....en la aplicacion de shadertoy ..... Interesante !!! !", "dean_the_coder, 2020-09-05@jorge2017a1 I use the iPhone version of that app, and many of my shaders didn\u2019t appear in it. Then I found you have to save the shader as \u2018public+api\u2019 to make them visible.", "jorge2017a1, 2020-09-05@celifrog,", "My machine, .. my operating system is an Ubuntu ... and it is version 16 ... the current version is 18-32bits or 19-64bits. Besides ... Shadetoy has an application for iphone ... .and sometimes I look at the shaders in the browser, ... but not all of them are looked at ..... by the Gls or opengl version", "........", "Mi maquina ,..mi sistema operativo es un Ubuntu...y es la version 16...la version actual es la 18-32bits o 19-64bits .ademas...de que shadetoy tiene una aplicacion para iphone....y en ocasiones los shader los miro en el navegador ,...pero no todos se miran..... por la version de Gls o opengl", "jorge2017a1, 2020-09-05@", "My machine, .. my operating system is an Ubuntu ... and it is version 16 ... the current version is 18-32bits or 19-64bits. Besides ... Shadetoy has an application for iphone ... .and sometimes I look at the shaders in the browser, ... but not all of them are looked at ..... by the Gls or opengl version", "........", "Mi maquina ,..mi sistema operativo es un Ubuntu...y es la version 16...la version actual es la 18-32bits o 19-64bits .ademas...de que shadetoy tiene una aplicacion para iphone....y en ocasiones los shader los miro en el navegador ,...pero no todos se miran..... por la version de Gls o opengl", "dean_the_coder, 2020-09-05@celifrog I\u2019m actually watching on my iPhone now. There\u2019s a few things iPhones don\u2019t like (E.g. loops with a non-const count, while loops, bitwise operations), but you can mostly work around those.", "celifrog, 2020-09-05@jorge2017a1 Wow, you can actually do this kind of stuff on an Iphone? :O    I'm on desktop and can see the kitten.", "jorge2017a1, 2020-09-05I expected to see the kitten and it disappeared along with the donut .... just look at the gray screen ... it's because of the version of my operating system ... uppss !!!!! ... I'm going to check it on my iphone 5.0", "...........", "esperaba ver el gatito y desaparecio junto con la dona....solo mire la panta gris...es por la version de mi sistema operativo...uppss!!!!!...lo voy a checar en mi iphone 5.0", "dean_the_coder, 2020-09-05@celifrog Thanks!", "celifrog, 2020-09-05:3 omg that's so cute!!", "PixelPhil, 2022-06-28Delicious!", "FabriceNeyret2, 2022-06-27@joteakus: it's a technique called NI (for Natural Intelligence) where you get a brain finding the procedural code reproducing some target patterns or purposes ;-D", "joteakus, 2022-06-25How did you import the graphics?", "BigWIngs, 2022-06-23Impressive!", "Rackdoll, 2022-06-22dear god, its awesome!", "FabriceNeyret2, 2022-06-21all shadertoy playable games here ;-)  https://shadertoyunofficial.wordpress.com/2017/11/11/playable-games-in-shadertoy/", "bob87, 2022-06-21Wonderful, nice and playable!", "And it run nicely even with my hudge molecular dynamics currently running ;)", "jt, 2022-02-21A nice variant of the game is to mark background-tiles when symbols on them have been \"crushed\". Then the goal is to fully mark the level.", "Dirk, 2022-02-21Amazing", "jt, 2018-01-24awesome!", "jorovipe97, 2016-11-15WOW", "winthropchang, 2016-11-15How you did that\uff1f", "Really awesome", "Draedrus, 2016-11-14Cannot believe it", "Wumpf, 2016-11-09Love all the cheesy details like the background and the bouncing candy.", "bysse, 2016-11-09Awesome work!", "Sabouh, 2016-10-05Wow ! Well done !", "movAX13h, 2016-07-26Perfect!", "GottZ, 2016-05-31running chrome on archlinux here. (gtx 960 though)", "have no problem playing this", "lovely!", "ciberxtrem, 2016-04-04@Fabrice Thanks for the effort to try to fix it! I've still not being able to reproduce it here, but I'll check in a Linux machine!", "For now, I've also changed the texture filters to nearest just in case.", "FabriceNeyret2, 2016-04-04still not working (on 2 linux machines with chrome )", "", "(I've tried to replace all linears by nearest just in case, but no effect )", "ciberxtrem, 2016-04-03Haha, thanks, that was a good one! fixed ;)", "casty, 2016-04-03When you make two horizontal matches at once, all the candies between both rows in the overlapping columns of both matches also disappear.", "ciberxtrem, 2016-04-03Aha, It works well in my super old laptop well! I suppose/hope it works also for you now!", "ciberxtrem, 2016-04-03I can't reproduce the problem, just in case I've removed the extra candy and have changed some things, tomorrow I'll also check it in a Mac and let's see!.", "FabriceNeyret2, 2016-04-03I don't understand the logic of when it work or not, but it no longer work most of the time.  :-(", "ciberxtrem, 2016-04-03And just in case this is what happened, the exchange start when all animations are finished.", "ciberxtrem, 2016-04-03mmm.. did it happen with the square pattern? I wanted to edit my post but could not! that is not done but I believe that Candy Crush neither!", "FabriceNeyret2, 2016-04-03sometime the exchange is not accepted. bug or goor reason ?", "ciberxtrem, 2016-04-03@FabriceNeyret2 I've added the T, C, and square patterns, and also a new candy and one extra row!.", "", "I just let that any kind of match that can happen, be it in horizontal or vertical, happens all at the same time. Now it is more similar to the original, xD.", "", "It is still missing to ask for money though!", "ciberxtrem, 2016-04-03@danbri, Thanks! and sure, I've added the original reference for the font.", "", "Also the UI suggestion is a great idea, now it feels more responsive!", "danbri, 2016-04-02This is awesome", "", "For the font, would you mind adding an acknowledgement to @claudiocc ? (I took his JS font for http://glslsandbox.com/e#9743.20 originally, so feel a bit responsible to keep the original linked)", "", "One UI suggestion: is there any way it can notice at least a first click while the animations and movements are still happening?", "ciberxtrem, 2016-03-30I would not mind to have some kind of procedurally generated monetization ;)", "casty, 2016-03-30it doesn't feel realistic if it doesn't ask for money after the fifth try", "Shane, 2016-03-30Finally, a Bejeweled clone... I just said that to fire up the Candy Crush junkies.", "", "Seriously, though, it's an amazing effort. The layout alone wouldn't have been trivial to accomplish in a shader, let alone the movement and logic. The game play's great, by the way.", "ciberxtrem, 2016-03-30Yep, that's right, they should match and give extra points for free !", "Cubeleo, 2016-03-30@ciberxtrem: Still no luck.  I feel like I am not playing the game right, hah!  Also, I'm curious--if the game starts with some candies already in rows of three, should they automatically match and score?", "ciberxtrem, 2016-03-30@iq Now you can lose far more easily and also can win xDD!", "@Dave_Hoskins, I've added your cool letters!!", "ciberxtrem, 2016-03-29@casty, cool!! I've removed one loop to draw the candies, now I only check for an entire column per pixel .", "@Cubeleo, could you try again, I've changed some things that could make some precisions problems ?", "KylBlz, 2016-03-29epic work!", "Cubeleo, 2016-03-29Candy matches don't seem to work on my Macbook Air (Intel HD 5000) running OS X in either Chrome or Safari.  If I get three candies of the same color in a row, they just swap back.  Anyone else seeing this?", "Dave_Hoskins, 2016-03-29Ach, you beat me to it! Very nicely presented, and i love the bounce effect.", "casty, 2016-03-29In such case you might want to do something about the 15fps I'm getting in my Quadro 4000M, a good approach would be to replace the nested loops drawing every single candy in every single pixel with:", "if (uv.x > 3.7){", "vec2 pos = floor(vec2((uv.x - 3.7) * 1./1.4,uv.y  *7./10.));", "color = DrawCell(uv, pos + vec2(1.0, 0.0) , color);", "color = DrawCell(uv, pos + vec2(0.0, 1.0), color);", "color = DrawCell(uv, pos , color);", "color = DrawCell(uv, pos + vec2(-1.0, 0.0), color);", "color = DrawCell(uv, pos + vec2(0.0, -1.0), color);", "", "}", "", "You would need an special case when you clear a vertical column of candys to redraw the whole line that column was in.", "ciberxtrem, 2016-03-29Thanks! Yep casty, I forgot to restrict the movement xD! fixed", "And I'll make some gameplay improvements with all your suggestions!", "FabriceNeyret2, 2016-03-29and is it normal that only line segment disappear, and not the T or C or square patterns (i.e. all 4-connected) ?   (I don't know the true candy crush, anyway :-) )", "casty, 2016-03-29You can actually swap ANY two candies, not only adjacent ones.", "GregRostami, 2016-03-29Incredible!!!!!", "FabriceNeyret2, 2016-03-29noooooo wayyyyy ! :-)", "Nrx, 2016-03-29Great!!", "iq, 2016-03-29the game is endless though, i was at 33,000 points and I stopped, it goes forever", "poljere, 2016-03-29GPU Candy Crush is here!", "iq, 2016-03-29Wow, wow, wow! Amazing!!", "JohnBown, 2016-06-02omg", "Dave_Hoskins, 2014-01-01Added some sound!", "Dave_Hoskins, 2013-12-29Thanks for the nice comments. I spend way too much time here.", "Antonalog, 2013-12-29damn, beat me to it! Can anyone figure out a fractal tower to go under it with epic scale?", "movAX13h, 2013-12-26Great! Much better now with anti-aliasing!", "raizor, 2013-12-25Oh man, that simply rocks! Great concept and execution. It really starts to unnerve me after a while", "vgs, 2013-12-24This is really impressive!", "iq, 2013-12-24Wow!!! Amazing!", "Nicox, 2023-05-15Edit: It's working with VDJ, but on my old laptop. It's not working with M2 chip. Does someone know what i can change in the code to make it work?", "Nicox, 2023-05-15Does someone know why this is not compatible with VDJ?", "aiekick, 2022-08-11more pixels to display so yes", "hybridshivam, 2022-08-11Is it normal for performance to decrease when going fullscreen?", "sousastep, 2020-05-29I followed a tutorial to import this shader into MaxMSP and made the lights and fog audio-reactive. You can download the max patch here https://bit.ly/3ghlSmT and you can preview it here https://www.youtube.com/watch?v=SMLOfl-8pvk", "zhengxiangkui, 2020-05-20wow!!!  great...", "nickcody, 2020-05-19Brilliant and gorgeous.", "Igrek11, 2020-05-14Great idea  amazing", "SomeGuy, 2020-05-14I love this!", "spolsh, 2019-09-07Looks great. Love the idea", "jorge2017a1, 2019-09-05bonita ciudad de edificios!!!!", "flockaroo, 2019-09-04pretty!", "iq, 2019-09-03Nice one!", "fizzer, 2019-09-02Great idea!", "aiekick, 2019-09-02super cool", "iapafoto, 2019-09-02Super design", "shau, 2019-09-02Nice", "Shane, 2019-09-02Really nice.", "Yusef28, 2019-09-02Wooh!", "jeyko, 2019-09-01man, this is great", "Bombadil, 2020-05-13Beautiful  like a river ;)", "Picka, 2020-05-13wow! so hypnotizing", "radek02, 2020-04-23got kinda Van Gogh vibes while watching this one. Love it, cheers.", "Kapustek, 2020-03-23Nice job, looks like stormy sky", "kanareczek, 2020-03-23Cool shader dude!", "calinka22, 2020-03-18Wow! I like it!", "FabriceNeyret2, 2017-02-21nice, but", "- the rolling is ackwardly inversed: Vortf  -> -0.25*", "- Still, there\"s something wrong with the advection (rools seem to unroll).", "OneManBand, 2016-02-10Hey dr2, I used your algorithm in a project work to \"simulate\" the cyclonic rotation of clouds. Thanks man!", "dr2, 2015-03-20gra\u00c3\u00a7as homem (according to Google)", "p.s. and now I know what nv15 is", "otaviogood, 2015-03-20wow, that looks great. Once the nv15 competition is over, I'll have to figure out how you did this.", "H2ongzh, 2022-09-07amazing idea, cool stuff!!!", "goingdigital, 2021-08-30RBFs seem to work reasonably well for small models. Attempt at Stanford Bunny in 2k, with linked Google Colab: https://www.shadertoy.com/view/7dtGR2", "logoliv, 2021-08-18there's some visible differences with Blackle version on the ears, don't know what version is closer to the original model", "goingdigital, 2021-08-17Really inspiring idea which is a great introduction to machine learning. I reimplemented this as a 12 wide 3 layer SIREN. Seems skip connections may not be needed. Slightly smaller, probably slightly faster, Tensorflow framework, well under 4kB. https://www.shadertoy.com/view/sd33zN with linked Collab.", "FabriceNeyret2, 2021-03-03thanks ! I didn't know that form !", "blackle, 2021-03-03I wrote it, it's based on this formula https://en.m.wikipedia.org/wiki/Rodrigues%27_rotation_formula", "FabriceNeyret2, 2021-03-03BTW, where did you got this compact rotation function ?", "I saw it in many shader, but I'm not sure where it come from.", "blackle, 2021-02-09your idea of using handwritten SDF primitives in the network is a cool idea. I think you could possibly use pytorch's auto differentiation feature to be able to fit a handful of primitives to a given SDF by doing back propagation to their origins.", "blackle, 2021-02-09the high frequency artefacts are just a texture I added because I thought it looked cool, lines 101 and 102 add that effect.", "lahwran, 2021-02-09also it's worth noting: using operations typically used in handwritten SDFs as the activation operations in neural SDFs should allow the neural SDFs to in many cases exactly recover the behavior of the handwritten SDF. if you can't even in principle find weights that exactly recover a handwritten SDF with at most a similar number of operations in the network, then you haven't found a network representation that properly describes the space of possible SDFs.", "lahwran, 2021-02-09hello have a braindump I hope this enriches your life because I really should be doing something else right now.", "", "so it doesn't seem like this network is likely to be using its weights very efficiently. I haven't done the detailed investigation to know this for sure - to do that, I'd do visualizations of the output volumes of each layer of the network, to see what the intermediate representations are - but the big tell is those high freqency artifacts on the surface of the bunny, if it was using its low frequency features ideally it wouldn't need those high frequency ones.", "", "https://arxiv.org/pdf/2006.10739.pdf it might be interesting to try a network like this, one where the sinusoidal is on the input rather than as an activation function. that allows regularizing the number of sinusoidal inputs you need: for the first layer, initially start too wide, eg 16 or 32 or even more fourier features, and use model compression style regularization to set input connections to zero - l1+fading-in soft-l0, no l2, sample n nonzero weights per output column on the input matrix each training example - outputting to an 8-wide output. that gives you input feature selection. then, feed that through some number of 4x4 mults to a few different activation functions. might also be worth looking at trying multi-bias. at least one of the activation functions should probably be something smooth like sigmoid or tanh or smoothstep or something else that provides additional smoothness in the mid layers, also probably pow(relu(x), 2.) or something would help with distance calculation. in other words - use operations that have a similar shape to what is typically used in shaders (just a few branches and distance calculations), and evaluate it in a space that allows it to select its position representation. that should allow compressing more. if you really want to spend compute on it, one could try automl, I'm not up to date on what options there are for serious automl for tiny networks like this but the full-space output supervision means there's a good shot at evolving an efficient network.", "", "Then, once you have that working, you could then train a network like this for every pose of a model and initially give it massively overcomplete input representation of concat(fourier_features(model_pose_state), fourier_features(3dnearest_2d_texel_pos), fourier_features(model_space_xyz)) and use the initial regularized matrix to feature-select out of those, and then evaluate it in screenspace to sdf-trace through a higher resolution version of the model in the implicit space of the neural network. If done right this should allow combining an actual mesh model and texture with a neural SDF upsampler, thereby allowing faking much higher resolution detail than a texture bumpmap otherwise allows. though, maybe you'd need to tell it the relative position in a texel, and feed it one texel to give it information on what kind of upsampling to do in that texel. or maybe you'd need to give it the four adjacent texels as input and have it figure out if it needs to use them? it also really depends on your final compute budget, but my hope is that this allows compressing models enough to render them on lower end devices, which means using a low res texture and the tiniest model manageable. if you're instead going to use a high res texture, then an option might be to use entirely different weights in different regions of the texture, thereby completely replacing the concept of bump map textures.", "BigWIngs, 2021-02-03Damn thats neat! Quite compact! Also thanks for the tut. Subscribed!", "GregRostami, 2021-02-02Really Amazing!! It seems like hard corners currently do not convert well to a neural SDF.", "PixelPhil, 2021-02-02Thank you so much for sharing this.", "iuryBorgesRodrigues, 2021-02-01after time of trying: https://www.shadertoy.com/view/wtdBzn", "oneshade, 2021-01-31Here's the classic Blender monkey (Suzanne): https://raw.githubusercontent.com/OpenGLInsights/OpenGLInsightsCode/master/Chapter%2026%20Indexing%20Multiple%20Vertex%20Arrays/article/suzanne.obj", "iuryBorgesRodrigues, 2021-01-31it works, but I\u2019m still trying to get a model of a monkey\u2019s head, but it\u2019s all buggy", "iuryBorgesRodrigues, 2021-01-31ok", "blackle, 2021-01-31remove \".cuda()\" from everywhere", "iuryBorgesRodrigues, 2021-01-31this happened at jupyter", "iuryBorgesRodrigues, 2021-01-31---------------------------------------------------------------------------", "RuntimeError                              Traceback (most recent call last)", "<ipython-input-7-02e6dda6639d> in <module>", "----> 1 sdf_siren = train_siren(sdfloader, 16, 2, 15)", "2 serialize_to_shadertoy(sdf_siren,\"f\")", "", "<ipython-input-6-80b500934dac> in train_siren(dataloader, hidden_features, hidden_layers, omega)", "3 def train_siren(dataloader, hidden_features, hidden_layers, omega):", "4   model_input, ground_truth = next(iter(dataloader))", "----> 5   model_input, ground_truth = model_input.cuda(), ground_truth.cuda()", "6", "7   img_curr = Siren(in_features=3, out_features=1, hidden_features=hidden_features,", "", "~/.local/lib/python3.8/site-packages/torch/cuda/__init__.py in _lazy_init()", "170         # This function throws if there's a driver initialization error, no GPUs", "171         # are found or any other error occurs", "--> 172         torch._C._cuda_init()", "173         # Some of the queued calls may reentrantly call _lazy_init();", "174         # we need to just return without initializing in that case.", "", "RuntimeError: Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx", "blackle, 2021-01-31if you're using jupyter you only need to open the link it produces from the command line in the web browser, you don't need to use google colab in that case.", "iuryBorgesRodrigues, 2021-01-31i'm trying to connect jupyter to google colab, until i get it, the problem is how do i run the local files in google colab.", "iuryBorgesRodrigues, 2021-01-31must have nvidia video placard?", "iq, 2021-01-31Very cool!", "iuryBorgesRodrigues, 2021-01-30thanks", "iuryBorgesRodrigues, 2021-01-30thanks", "blackle, 2021-01-30I made a haphazard video explaining things which I hope helps! https://youtu.be/8pwXpfi-0bU", "iuryBorgesRodrigues, 2021-01-30It's not me that has the same problem, then someone's link commenting on the same problem -> https://github.com/marian42/mesh_to_sdf/issues/18", "iuryBorgesRodrigues, 2021-01-30I'm trying here, error is appearing after error, I got to format the computer and the errors kept showing up, just read the comments I posted about the errors", "ufffd, 2021-01-30I'm completely blown away by this. I ended up staying up til 2 last night trying to replicate this in a colab, really just incredible stuff. Thanks so much for providing the jumping off point. @valalalala: try import skimage.measure @everyone else just posting errors and expecting free labor: just google those errors yourself, cmon.", "iuryBorgesRodrigues, 2021-01-30I'm pissed at life that I can't do", "valalalalala, 2021-01-30Following your notes, I was able reproduce the results for the bunny, but no luck for a couple of other models I tried: https://www.shadertoy.com/view/wtVcDd .  ... still trying!", "", "Some issue with mesh_to_sdf not finding skimage.measure, but the other examples WFM. Is there some equivalent to serialize_to_shadertoy for mesh_to_sdf?", "iuryBorgesRodrigues, 2021-01-30Error: python3 voxelize_chair.py", "/home/iury/.local/lib/python3.8/site-packages/skimage/io/manage_plugins.py:23: UserWarning: Your installed pillow version is < 7.1.0. Several security issues (CVE-2020-11538, CVE-2020-10379, CVE-2020-10994, CVE-2020-10177) have been fixed in pillow 7.1.0 or higher. We recommend to upgrade this library.", "from .collection import imread_collection_wrapper", "Scanning...", "Traceback (most recent call last):", "File \"voxelize_chair.py\", line 11, in <module>", "cloud = get_surface_point_cloud(mesh, surface_point_method='scan', scan_count=20, scan_resolution=400)", "File \"/home/iury/.local/lib/python3.8/site-packages/mesh_to_sdf/__init__.py\", line 17, in get_surface_point_cloud", "return surface_point_cloud.create_from_scans(mesh, bounding_radius=bounding_radius, scan_count=scan_count, scan_resolution=scan_resolution, calculate_normals=calculate_normals)", "File \"/home/iury/.local/lib/python3.8/site-packages/mesh_to_sdf/surface_point_cloud.py\", line 125, in create_from_scans", "camera_transform = get_camera_transform_looking_at_origin(phi, theta, camera_distance=2 * bounding_radius)", "File \"/home/iury/.local/lib/python3.8/site-packages/mesh_to_sdf/scan.py\", line 16, in get_camera_transform_looking_at_origin", "camera_transform = np.matmul(get_rotation_matrix(rotation_x, axis='x'), camera_transform)", "File \"/home/iury/.local/lib/python3.8/site-packages/mesh_to_sdf/scan.py\", line 10, in get_rotation_matrix", "matrix[:3, :3] = Rotation.from_euler(axis, angle).as_dcm()", "AttributeError: 'scipy.spatial.transform.rotation.Rotation' object has no attribute 'as_dcm'", "blackle, 2021-01-30oh you should be able to get it with `pip3 install mesh-to-sdf`", "", "its repo is here: https://github.com/marian42/mesh_to_sdf", "oneshade, 2021-01-30@blackle Where is the mesh_to_sdf module? I couldn't find it in the neural_experiments folder.", "OkiDoki, 2021-01-30@iuryBorgesRodrigues at some point you must learn to help yourseft, Blackle already shared a lot. You said you are a python programmer, prove it a open a tutorial on how to a open notebook. A some point you want to lean something, you have to do the effort. You don't even \"google\" for \"ipynb\". I am not a believer, but \"God helps those who help themselves\"", "@blackle thank you for sharing all of this.", "iuryBorgesRodrigues, 2021-01-29When you have a little time let us know, that what you did few can do", "blackle, 2021-01-29I would like to explain it more later but I've been really busy at work lately so I haven't had the time :c", "", "also I don't use he/him pronouns", "iuryBorgesRodrigues, 2021-01-29yes", "Pjbomb2, 2021-01-29It would be nice to have an explanation as to how to do this with other models though", "iuryBorgesRodrigues, 2021-01-29Pjbomb2 -> he had shown some codes that I have never seen in my life and those same codes do not work, I even asked him to make a video on youtube teaching.", "Pjbomb2, 2021-01-29wait so let me get this straight... you used a neural network... to convert a wiremesh of the bunny to a really fast SDF function... and then copied that neural networks state into shadertoy... to be used as the shapes definition... what. the. hell.... this is witchcraft, how do I make use of this witchcraft... for my own schemes?  amazingly done, this is incredible, and the speed you get from such a detailed shape is insane...", "valalalalala, 2021-01-28Amazing!", "iuryBorgesRodrigues, 2021-01-28make a video on youtube teaching how to use these tools", "iuryBorgesRodrigues, 2021-01-28error google colab: https://drive.google.com/file/d/1gW5aNCaZtA9hYC5RFG34t0QN9T5YOWim/view?usp=sharing", "iuryBorgesRodrigues, 2021-01-28if I want to do it with another 3D model, other than that rabbit, how do I do it?", "blackle, 2021-01-28you need to use https://jupyter.org/ or google colab", "iuryBorgesRodrigues, 2021-01-28I'm a python programmer, but I've never seen a file with an ipynb ending", "iuryBorgesRodrigues, 2021-01-28i downloaded the sdf.ipynb file and went to the command terminal and typed python3 sdf.ipynb and nothing happened, how did you use that?", "xjorma, 2021-01-28Wow! I wanted to test SIREN, but I didn't think we could have this result, with so simple model. Impressive job!", "aiekick, 2021-01-28awesome", "blackle, 2021-01-28here's a link to the python notebooks I've used for the last few neural network shaders: https://drive.google.com/drive/folders/13-ks7iyLyI0vcS38xq1eeFdaMdfNlUC8?usp=sharing", "Zi7ar21, 2021-01-28I remember someone else made a Neural SDF of the Stanford bunny and it was amazing. It wasn't nearly as fast or pretty as this one though!", "blurryroots, 2021-01-28Thanks for sharing. Incredible work.", "Logos, 2021-01-28Cool! Heart!", "PauloFalcao, 2021-01-28Impressive!", "michael0884, 2021-01-28big wow", "Duke, 2021-01-28Wow!", "jeyko, 2021-01-28oh wow", "iuryBorgesRodrigues, 2021-01-28I've seen a lot of people posting 3D models made in software here, and it's curious how they did it", "iuryBorgesRodrigues, 2021-01-28what kind of software did you use to convert this rabbit to use in the shadertoy", "dean_the_coder, 2021-01-28Awesome.", "iapafoto, 2021-01-28still 350ch to remove  :/", "vec4 f10=sin(.01*(", "mat4(-34,6,-59,-76,10,-19,-12,44,64,-02,-26,15,-16,21,91,15)*f00+", "mat4(01,54,-77,11,06,-14,43,51,-18,8,39,20,33,-49,-10,19)*f01+", "mat4(27,22,43,53,18,-17,23,-64,-14,02,-10,16,-13,-06,-4,-36)*f02+", "mat4(-13,29,-29,8,113,2,-83,32,-32,4,-31,-16,14,-3,-20,39)*f03+", "vec4(73,-428,-156,-180)))+f00,", "f11=sin(.01*(", "mat4(-111,55,-12,-100,16,15,-30,31,-1,1,31,-42,-29,38,-4,71)*f00+", "mat4(96,-02,86,52,-14,60,44,43,02,-15,-49,-05,-06,-25,-03,-22)*f01+", "mat4(52,44,-5,-11,-56,-10,-61,-40,-4,55,32,-7,-02,28,26,-49)*f02+", "mat4(02,-32,6,-17,-59,0,-24,60,-06,13,-21,-27,-12,-14,58,-55)*f03+", "vec4(-224,-348,-80,141)))+f01,", "f12=sin(.01*(", "mat4(44,-6,-79,-46,05,-60,30,36,35,12,2,12,40,-26,63,-21)*f00+", "mat4(-48,43,-73,-40,11,-1,71,05,-25,25,-28,-20,32,-2,-84,16)*f01+", "mat4(39,-7,90,36,-38,-27,-186,-39,48,-20,-5,10,-0,-21,29,63)*f02+", "mat4(46,-32,6,9,72,-47,81,78,90,2,-21,8,-16,22,32,-13)*f03+", "vec4(338,120,84,141)))+f02,", "f13=sin(.01*(", "mat4(-41,-24,-71,-25,-24,-75,-9,2,-27,-42,2,3,-01,51,-12,-124)*f00+", "mat4(64,31,-136,61,-34,11,14,79,22,-16,-29,-70,02,-37,49,39)*f01+", "mat4(79,47,54,-47,-113,-35,-103,-22,-67,-26,10,21,-7,-73,-11,72)*f02+", "mat4(43,-23,13,9,138,-63,157,-20,39,-14,42,13,-57,-8,-21,21)*f03+", "vec4(-34,-328,43,-52)))+f03;", "", "f00=sin(.01*(", "mat4(-72,23,-89,52,38,19,-16,-88,26,-37,9,63,29,-72,30,-95)*f10+", "mat4(-22,-51,-42,-73,-32,0,-103,117,-20,-3,-13,-16,-41,9,36,-84)*f11+", "mat4(-21,1,33,47,05,20,-44,-104,13,12,-13,31,1,-34,41,-34)*f12+", "mat4(-13,-6,-39,-22,48,25,24,-97,-34,14,42,-0,-44,5,9,-95)*f13+", "vec4(48,87,-87,-206)))/1.4+f10;", "f01=sin(.01*(", "mat4(-27,29,-21,15,34,-23,85,-9,-115,-24,-05,-25,-12,-73,-17,-37)*f10+", "mat4(-111,35,-93,-6,-79,-03,-46,-37,60,-37,-14,45,-3,-21,2,59)*f11+", "mat4(-92,-17,-58,-18,58,60,83,-104,-80,-16,23,-11,8,16,76,61)*f12+", "mat4(29,45,30,39,-91,66,-35,-35,21,16,-54,-63,110,-38,20,15)*f13+", "vec4(-172,-14,192,208)))/1.4+f11;", "f02=sin(.01*(", "mat4(100,66,130,-51,88,25,-67,3,-68,-8,-12,-14,46,115,38,-10)*f10+", "mat4(51,-57,41,-9,68,-50,-4,-101,20,44,-60,46,-9,-37,-130,4)*f11+", "mat4(14,29,-45,-6,-65,33,-37,-95,71,-07,100,-60,-168,-20,-0,-70)*f12+", "mat4(-31,69,56,13,95,36,56,59,-63,52,-30,17,123,72,95,75)*f13+", "vec4(-90,-326,-44,-311)))/1.4+f12;", "f03=sin(.01*(", "mat4(51,-98,-28,16,-22,-17,-103,22,70,-15,12,43,78,67,-85,-25)*f10+", "mat4(81,60,-89,61,-103,-33,60,-11,-6,1,-2,-44,73,69,102,62)*f11+", "mat4(-10,52,80,-65,40,-75,47,156,03,5,8,31,-03,22,-163,07)*f12+", "mat4(-18,-7,-122,48,-1,56,07,15,24,25,-9,-54,23,-8,20,36)*f13+", "vec4(-111,-428,102,-23)))/1.4+f13;", "iapafoto, 2021-01-28Could be shorten a bit to reach 4K ?", "vec4 f10=sin(.01*(", "mat4(-34,6,-59,-76,10,-19,-12,44,64,-2,-26,15,-16,21,91,15)*f00+", "mat4(1,54,-77,11,6,-14,43,51,-18,8,39,20,33,-49,-10,19)*f01+", "mat4(27,22,43,53,18,-17,23,-64,-14,2,-10,16,-13,-6,-4,-36)*f02+", "mat4(-13,29,-29,8,113,2,-83,32,-32,4,-31,-16,14,-3,-20,39)*f03+", "vec4(73,-428,-156,-180)))/1.0+f00;", "", "vec4 f11=sin(.01*(", "mat4(-111,55,-12,-100,16,15,-30,31,-1,1,31,-42,-29,38,-4,71)*f00+", "mat4(96,-2,86,52,-14,60,44,43,2,-15,-49,-5,-6,-25,-3,-22)*f01+", "mat4(52,44,-5,-11,-56,-10,-61,-40,-4,55,32,-7,-2,28,26,-49)*f02+", "mat4(2,-32,6,-17,-59,0,-24,60,-6,13,-21,-27,-12,-14,58,-55)*f03+", "vec4(-224,-348,-80,141)))/1.0+f01;", "kastorp, 2021-01-28what a time to be alive!", "Dain, 2021-01-28You have created procedural bunny noise(when disabling the bounds check)", "iapafoto, 2021-01-28the future of 4K  intro ?", "blackle, 2021-01-28sorry the other ones have been crashing, I was really glad that I was able to get a really tiny neural network to do the job for this one", "oneshade, 2021-01-28This one doesn't crash thankfully, very cool! (The networks output beyond the unit sphere is rather interesting btw).", "jarble, 2020-07-15This appears to be based on my xor \"automaton.\"", "Nolo, 2019-11-19@trsh The hash function converts coordinates to a randomness value.  It's called a \"hash\", as opposed to \"pseudo random number generator\" (PRNG), because it requires an input, rather it maps from input values to randomness values.  PRNG do not require input because their input is kept with the internal state of the generator, they only require an initial seed.", "trsh, 2019-11-09What really does the hash function and why replace it with something better?", "FabriceNeyret2, 2020-10-14suggestion: remind that ESC stop execution", "bug: using the command LIST in the program works once, but stop execution ;-)", "nr4, 2019-04-19This is beyond awesome ;)", "PlNG, 2019-04-18\"SYS 32592\" Syntax error. Aww.", "jcyuan, 2019-04-18hi there, are your shaders titled with 'lesson' some examples of your videos or books?", "JoshScholar, 2019-04-17How the hell did I remember that double quote is shift-2?", "scholarius, 2019-04-17I like. Next step: encode the 8 kb \"kernal\" ROM on soundcloud ...", "MacSlow, 2019-04-17WTF... amazing!", "metalim, 2019-04-17Entering any program lines does not save them. (macOS, Chrome)", "10 PRINT \"ASDF\"", "LIST", "", "READY.", "akhgary, 2018-05-04where is the memory in this thing? when i have any global variable, it always begins with 0 per frame", "g4b0r, 2017-09-19This is one of the craziest things I've seen. I really like this mixed with P_Malin's shader.", "P_Malin, 2017-03-30Hi hubbe, I hope you don't mind but I included this shader as an #define option in my CRT shadertoy: https://www.shadertoy.com/view/4dlyWX#", "GottZ, 2016-06-03comma and dot are not working", "but honestly: HOLY SHIT", "juhler1, 2016-05-22shift 2  == \"", "zproxy, 2016-04-30awesome", "mazander, 2016-04-27OMG!", "sboys3, 2016-04-27This crashed every browser's webgl that I tryed", "samuelotherion, 2016-04-26I simply cannot believe this.", "P_Malin, 2016-04-25Wow, really good!", "coyote, 2016-04-23", "PauloFalcao, 2016-04-23Magic!", "drone1, 2016-04-22Bonkers.", "TambakoJaguar, 2016-04-22WOW, so cool!", "akohdr, 2016-04-22@Dave_Hoskins wasn't it something like 32768/32769 on Vic20?", "akohdr, 2016-04-22Bravo, this is awesome.", "D'you suppose management @Intel got wind of a BusyBox in a shader", "Dave_Hoskins, 2016-04-22Very nice, and it looks great.", "I actually still (sad ain't I) remember this poke:-", "poke 53280, 12", "https://www.c64-wiki.com/index.php/Color", "How about doing that?", "", "https://www.c64-wiki.com/index.php/53281", "FabriceNeyret2, 2016-04-22maybe you could print the keyboard layout in small somewhere at bottom ? (Like, one color for shift and one without, or alterning in time).", "", "PS: the fun thing is to do this interpretor-without-even-having-strings in every single pixels - pure free megawaste  :-p", "squeakyneb, 2016-04-22@bloodnok/iq: shift 2 for quotes. Not because UK layout (though shift 2 for quotes is UK layout) but because that's the original C64 layout.", "bloodnok, 2016-04-221: this is cool, the C64 ready screen...", "2: oh, a listing in the description... guess I'll try it.", "3: awesome, but it must be hardcoded to that listing.", "", "10 PRINT \"AAAA\"", "20 PRINT \"BBBB\"", "30 PRINT \"CCCC\"", "40 GOTO 20", "RUN", "", "holy shit.", "poljere, 2016-04-22Wow, achievement unlocked! This is complete awesomeness.", "bloodnok, 2016-04-22I'm a mere mortal and cannot understand the magic behind this.", "", "iq: shift-2 is double quotes (UK layout?)", "iq, 2016-04-22Wow!", "", "(i cannot type quotes)", "squeakyneb, 2016-04-22Cool? COOL? THIS IS CRAZY.", "stb, 2016-04-21cool!", "hubbe, 2016-04-21maybe, string variables might be difficult though.", "I'm also considering implementing poke/peek and character/background color changing.", "FabriceNeyret2, 2016-04-21wow, do you plan to implement variables, arithmetics, input and for loops ?", "", "NB: in the description, you could add \"LIST\".  And BASIC in the tags ;-)", "dila, 2016-05-05nice effect", "logoliv, 2014-02-21Hello I\u00c3\u00b1igo, nice shader !", "I'm trying to render it with orbit accumulation instead of your s.xyz parameters (increment a counter each time an orbit pass on a pixel, and render it using a color gradient, depending on the counter)", "The problem is i'm new with GLSL and I don't know if it's possible to do that with a shader. Can we output something else than gl_FragColor in a fragment shader ?", "Thanks in advance for any help.", "bloodnok, 2013-03-24I can't see this without hearing the soundtrack to MFX:Stream", "CPU, 2013-03-20Beautifully rendered! lovely!", "Jadwigga166, 2020-01-09A very interesting idea. Makes an amazing impression.", "okelly4408, 2019-12-29Very nice, well done. Out of curiosity why do you make 'colorBackground' dependent on time and what not when simply setting it to black produces, at least I think so, an identical image?", "dila, 2015-10-12very cute. this one has been on my mind too", "poljere, 2015-10-12really cool!", "VJSpackOMat, 2015-10-12super!", "aiekick, 2015-10-12wow", "playbyan1453, 2020-11-19Edit : i discovered how to color the glass.", "Now is there a way to make emissive material", "playbyan1453, 2020-11-18Hi i have question, how do i change the glass color to red or blue?", "reinder, 2020-08-30@teadrinker: thanks! and yes, I think you're right. I have added your if-statement.", "teadrinker, 2020-08-30This is great!", "I'm trying to understand path tracing and sampling better and this helps a lot!", "", "I wonder, for the glass material, if maybe it would be more correct to only apply color for the refraction case?", "Like this:", "", "if(!specularBounce || dot(rd,normal) < 0.)   // (added if statement)", "fcol *= matColor( res.y );", "reinder, 2017-09-03@revers: thanks, I have fixed this.", "revers, 2015-06-14I found another bug.", "", "As noted in the \"Optics: Reflection and Refraction\" article:", "\"The ratios of reflected vs refracted light for light traveling to the surface", "from below are calculated using the same Fresnel equation as with light falling", "upon the surface from above. The only difference is that in the first case,", "we have a water-air interface (light coming from below), while in the second", "we have an air-water interface (light coming from above). To compute the", "reflection and refraction directions and coefficients, in the first case", "(air-water interface) you need to set n1 and n2 to the water and air", "refractive index respectively (while this ORDER IS REVERSED", "IN THE SECOND CASE).\"", "", "So you should swap indices of refraction, not invert them. Instead of:", "if( ndotr > 0. ) {", "n1 = 1./1.5; n2 = 1.;", "n = -n;", "} else {", "n2 = 1./1.5; n1 = 1.;", "}", "", "", "should be:", "if( ndotr > 0. ) {", "n1 = 1.0;", "n2 = 1.5;", "n = -n;", "} else {", "n1 = 1.5;", "n2 = 1.0;", "}", "", "", "Though the result seem to be visually the same. Maybe because you are using air", "(with index of refraction equal to 1.0). If you would use different media,", "for example water, the result would be much different.", "reinder, 2015-06-03@revers. Thanks! I have fixed it. This also fixed the difference between the LuxRender reference image and my bidirectional pathtracer.", "revers, 2015-06-03And after that:", "", "\"If we use this version of iSphere() we need to add \"n = -n;\" to the previous \"\"if\",", "since nSphere() always returns normal pointing outward the sphere:", "179: if( ndotr > 0. ) {", "180: \tn1 = 1./1.5; n2 = 1.;", "181:\tn = -n;", "182: } else {", "(Though we need to remove \"const\" from \"n\" parameter declaration for this to work).\"", "", "Sorry for the mess.", "revers, 2015-06-03Damn it, again :/ The iSphere function should be:", "", "float iSphere(vec3 ro, vec3 rd, vec4 sph) {", "vec3 oc = ro - sph.xyz;", "float b = dot(oc, rd);", "float c = dot(oc, oc) - sph.w * sph.w;", "float h = b * b - c;", "if (h < 0.0)", "return -1.0;", "", "float s = sqrt(h);", "float t1 = -b - s;", "float t2 = -b + s;", "", "return t1 < 0.0 ? t2 : t1;", "}", "revers, 2015-06-03I see that my post is formatted incorrectly (probably because I've tried to use BB \"code\" blocks).", "Too bad I cannot edit it. I will paste it without the \"code\" markups (sorry for duplicated post):", "", "Firstly, I would like to thank you for sharing this amazing shader!", "It is a great resource for learning path tracing! Thank you very much!", "", "Secondly, I found a bug. In getBRDFRay() the following \"if\" is never executed:", "", "179: if( ndotr > 0. ) {", "180: \tn1 = 1./1.5; n2 = 1.;", "181: } else {", "", "It is due to the fact that iSphere() works incorrectly for rays inside the sphere. Correct function should be:", "float iSphere(vec3 ro, vec3 rd, vec4 sph) {", "vec3 oc = ro - sph.xyz;", "float b = dot(oc, rd);", "float c = dot(oc, oc) - sph.w * sph.w;", "float h = b * b - c;", "if (h < 0.0) {", "return -1.0;", "}", "float s = sqrt(h);", "float t1 = -b - s;", "float t2 = -b + s;", "", "return t1 > 0. ) {", "180: \tn1 = 1./1.5; n2 = 1.;", "181:\tn = -n;", "182: } else {", "(Though we need to remove \"const\" from \"n\" parameter declaration for this to work).", "", "Also why did you use so complicated weight for the light falloff:", "float cos_a_max = sqrt(1. - clamp(lightSphere.w * lightSphere.w / dot(lightSphere.xyz-ro, lightSphere.xyz-ro), 0., 1.));", "float weight = 2. * (1. - cos_a_max);", "?", "", "Simple:", "float weight = lightSphere.w * lightSphere.w / dot(lightSphere.xyz-ro, lightSphere.xyz-ro);", "seems to produce almost the same result and is more intuitive to understand. What is the rationale behind yours \"cos_a_max\"?", "revers, 2015-06-03Firstly, I would like to thank you for sharing this amazing shader! It is a great resource for learning path tracing! Thank you very much!", "", "Secondly, I found a bug. In getBRDFRay() the following \"if\" is never executed:", "179: if( ndotr > 0. ) {", "180: \tn1 = 1./1.5; n2 = 1.;", "181: } else {", "", "", "It is due to the fact that iSphere() works incorrectly for rays inside the sphere. Correct function should be:", "float iSphere(vec3 ro, vec3 rd, vec4 sph) {", "vec3 oc = ro - sph.xyz;", "float b = dot(oc, rd);", "float c = dot(oc, oc) - sph.w * sph.w;", "float h = b * b - c;", "if (h < 0.0) {", "return -1.0;", "}", "float s = sqrt(h);", "float t1 = -b - s;", "float t2 = -b + s;", "", "return t1 > 0. ) {", "180: \tn1 = 1./1.5; n2 = 1.;", "181:\tn = -n;", "182: } else {", "", "(Though we need to remove \"const\" from \"n\" parameter declaration for this to work).", "", "Also why did you use so complicated weight for the light falloff:", "float cos_a_max = sqrt(1. - clamp(lightSphere.w * lightSphere.w / dot(lightSphere.xyz-ro, lightSphere.xyz-ro), 0., 1.));", "float weight = 2. * (1. - cos_a_max);", "", "?", "", "Simple:", "float weight = lightSphere.w * lightSphere.w / dot(lightSphere.xyz-ro, lightSphere.xyz-ro);", "", "seems to produce almost the same result and is more intuitive to understand. What is the rationale behind yours \"cos_a_max\"?", "reinder, 2015-01-04I have tried to make another bidirectional path tracer: 4tlGR4. But, at the moment, the weights of the paths are just guessed by me ;) Any feedback would be appreciated.", "knighty, 2015-01-04BTW here is a document about other ways to construct orthonormal basis.", "Dave_Hoskins, 2014-12-26@Knighty yes, of course. Thanks.", "knighty, 2014-12-26Very nice shader. Thanks for sharing. Is a (correct) bidirectional path tracer planned?", "Dave: n and uu are othogonal to each other.", "Dave_Hoskins, 2014-12-26It's strange, because a cross product of two normalized vectors is apparently NOT a normal vector ( which surprised me just now!):-", "http://math.stackexchange.com/questions/23259/is-the-cross-product-of-two-unit-vectors-itself-a-unit-vector] but there appears to be no visual difference here.", "reinder, 2014-12-26@Dave_Hoskins, Thanks! You are right.", "Dave_Hoskins, 2014-12-26Your cos weighted random hemisphere direction code is really useful, thanks! But I don't think vv needs to be normalized at line 68?", "Harha, 2014-12-24Nice! I really like the way the refractive sphere looks and affects the scene.", "", "I made my very first simple path tracer a while ago as well using pure Java and CPU. I'll probably use this for learning more so thanks.", "reinder, 2014-12-23After writing a (incorrect) bidirectional path tracer (MtfGR4), I found out that I didn't understand brdf's, pdf's and path tracers at all. So, I wanted to write (and understand) a simple path tracer first.", "Hopefully, this tracer is correct. As far as I can see both methods used (with and without direct light sampling) will converge to the same image for a large number of samples.", "Please, feel free to correct me or give suggestion to improve this shader.", "atzmael, 2019-10-06Yeah hahaha thanks", "mosaic, 2019-10-06No problemo, looks like you've saved it with a typo so it won't compile though!", "atzmael, 2019-10-04Thanks for the tips !", "mosaic, 2019-10-04or centered", "vec2 st = (fragCoord-.5*iResolution.xy)/iResolution.y+.5;", "mosaic, 2019-10-04Nice one", "If you want an unstretched aspect ratio, make line 17", "vec2 st = fragCoord/iResolution.y;", "FabriceNeyret2, 2020-10-23if it's public on shadertoy, youl'd better get it displaying something.", "If you really want to use shadertoy as a storage for external app, and still need it to be in public mode, then do something for it display here.", "BTW, don't you have a #define, a Unidorm, or a trick to let the shader detect whether it is in shadertoy or cineshader environment ?", "pjkarlik, 2020-10-23cineshader uses alpha to do depth in a 3d environment.. doesn't really work anywhere else..", "just flip the fragColor stuff.. standard noise..", "FabriceNeyret2, 2020-10-23 I don't understand : what and why is this (white)  shadertoy public shader, then ?", "FabriceNeyret2, 2020-10-23I\u00a0don't understand : wh", "hahafunny12356, 2020-10-23I updated the desc.", "FabriceNeyret2, 2020-10-22plain white.", "pjkarlik, 2020-10-22snow storm...", "malinowysmiech, 2021-10-19Makes me wanna dance for sure", "Katawil, 2021-09-29This animation is amazing", "Wowshade, 2017-01-17I made fast lights", "iq, 2014-08-22classy!", "cyperus, 2020-02-18Very inspiring!", "balkhan, 2019-03-28der of the week !", "balkhan, 2019-03-28Wow, thw for sha", "akhgary, 2019-03-13I wish i could love this more than once!", "genie, 2019-03-12Cool", "lucastakejame, 2019-03-11That looks like a strange loop (https://www.youtube.com/watch?v=hQsnHkfs3sA)  great job", "titanswhale, 2019-03-07cool!!", "balkhan, 2018-01-13Thank you guys !", "@darkshader : aiekick is right. Just glanced at touch designer, seems like a cool engine.", "eugolana, 2018-01-12great stuff!", "warlock, 2018-01-11Nice colours. Very beautiful!", "834144373, 2018-01-11Cool!", "flockaroo, 2018-01-11very beautiful!", "shau, 2018-01-11Beautiful. Nice and quick too.", "darkshader, 2018-01-11groovy thx, sorry total noob here. total fascination on this one. I take it you tried touch designer yet?", "aiekick, 2018-01-11he cant rewirte mainImage, so c_out is fragColor, and f fragCoord", "aiekick, 2018-01-11", "darkshader, 2018-01-11very cool.", "one question, what is c_out and f", "color out and f is frame perhaps.", "GregRostami, 2018-01-10WOW!!!", "iq, 2018-01-10oh nice, very slim", "iapafoto, 2018-01-10wow super cool !", "meowyih, 2022-06-11Wow, what an elegant way to create fbm 3d object, much faster than writing vertex shader!", "PelicanPolice, 2020-11-10Not when you put the spot right in the middle though!", "cmarangu, 2020-11-07PelicanPolice Yeah! An evil dark cloud!", "PelicanPolice, 2020-11-05This is incredible. It actually looks like a cloud", "danhel95, 2020-09-06nice and fast !", "okelly4408, 2020-02-18My email address is okelly4408@gmail.com if you're interested. Thanks regardless and sorry for clogging the comment section of this particularly beautiful shader", "okelly4408, 2020-02-18Hi Fabrice. I was wondering if I could possibly contact you. I had some questions about the field of the computer graphics in general as well some about self education. I would really appreciate it but I completely understand if prefer not to do that.", "monodnb, 2020-02-14amazing. i can totally see this in one of my av performances.", "cmarangu, 2019-05-22i dont get it but its hilarious and super awesome", "twenkid, 2017-10-18Sweet!", "FabriceNeyret2, 2017-10-11Plus I don't understand what you mean by strip as well: there is no marching here, this is direct analytical integration of whole path along a sphere (this is the whole purpose, in order to directly embed costly effects. A large part of my research is about these kinds of things).", "FabriceNeyret2, 2017-10-10which derivatives are you speaking about ?", "ollj, 2017-10-09you kinda need the higher derivatives to make light in a cloud look decent. otherwise you have a striped cloud.", "", "could try to interpolate over something that roughly equals a bounding sphere, to estimate a derivative over that.", "ollj, 2017-10-09if you're drunk, pi is 3, if you're high, pi is acos(-1)", "Imsure1200q_1UWE130, 2017-08-04ok... i dont know what you mean", "FabriceNeyret2, 2017-08-04seriously, no.  Put precision when it's worth it. Here, 3 would be as ok.", "Imsure1200q_1UWE130, 2017-08-04change line 8 into", "float PI = asin(1.)*2.;", "Flavio, 2014-03-05Really nice!", "Flavio, 2014-03-05Really nice!", "Patapom, 2013-11-30Hey Fabrice, nice to see you there! Love your work man! ^^", "cmarangu, 2019-12-04\u200b", "Flavio, 2017-11-03awesome!", "hornet, 2016-08-11fixed, thanks.", "FabriceNeyret2, 2016-08-11not compiling because of line 89 const (while sqrt)", "XT95, 2013-03-23Really nice !", "gtoledo3, 2013-03-05Hah, you beat me to it.", "hornet, 2013-03-05Same chromatic aberration was used in Shampain, http://pouet.net/prod.php?which=60539", "Lumos, 2020-06-16Nice shader  Could i use it for my VJ-gigs?", "kuvkar, 2015-05-09cool!", "vgs, 2015-05-09The shape and animation are so smooth! Loved them!", "reinder, 2015-05-07very nice! I like the motion blur and aa.", "poljere, 2015-05-07It is awesome Inigo!", "dila, 2015-05-07looks like nice fabric", "aiekick, 2015-05-07L'\u00c3\u00aele it", "FabriceNeyret2, 2020-02-05to avoid distortion, while doing the whole centering-scaling:", "vec2 uv = ( 2.*fragCoord - iResolution.xy ) / iResolution.y;", "", "fragColor = vec4(color)", "", "antialiasing:", "fragColor = vec4( smoothstep(0.,1.5, color/fwidth(color)));", "me_123, 2023-01-25best shader", "ArthurDetaille, 2021-06-09I really like the Doctor Who vibe", "DJMarcTune, 2020-08-05", "Hello what do you have to do to get this scene ???", "iq, 2019-10-08I see neither, so I assume ANGLE ignores the pragma. Pity, it could have been a good way to get Shadertoy to compile faster in general.", "patu, 2019-10-08In fact, I am not convinced that the compiler takes this directive into account in the current implementation. I'm sure it knows its meaning and acceptable parameters, but I can't examine organoleptically whether it affects the compilation time and whether there is a decrease in frame rate.", "iq, 2019-10-08I don't think that works in WebGL... at least I see absolutely zero improvements in compile times. Are you seeing any improvements on your browser?", "patu, 2019-10-08@voz,", "see https://www.khronos.org/registry/OpenGL/specs/es/3.2/GLSL_ES_Specification_3.20.pdf page 15", "Zi7ar21, 2019-10-07So mesmerizing...", "voz, 2019-10-07What does line 20 `#pragma optimize(off)` do?", "machmuel, 2019-10-05Superb!", "Dirk, 2019-10-03Super Immersive!", "BoBoBamse, 2019-10-02f*ck that looks awesome", "aiekick, 2019-04-28wow", "Tezza48, 2019-04-19This is epic mate", "felipunkerito, 2019-04-11Nice!", "Passion, 2019-04-11Fuck yeah", "iq, 2019-04-10Very cool!", "MacSlow, 2019-04-09Wow, that's massive... both in terms of visual impact and beats... terrific!", "jeyko, 2019-04-09dnb comes in hard", "Shane, 2019-04-09Really pretty.", "EvilRyu, 2019-04-09love it", "Kaung_Sett, 2022-04-19terrian view isn't good", "404Glaciergargamel, 2020-12-20Remix: https://www.shadertoy.com/view/3tcyzH", "oneshade, 2020-12-18Beautiful colors!", "yuxifeng, 2018-05-01Just curious lol are you a CS184/284A student?", "rigel, 2018-04-23Like the colors!", "iq, 2018-04-20Nice one", "Shane, 2018-04-19Nice scene. It has a water filled quarry look to it.", "FishMan, 2018-04-19@Dave_Hoskins, thank you!", "Dave_Hoskins, 2018-04-19One of the first tricks I learnt on Shadertoy was to smooth out normals at a distance, something like:-  In WaterNormal   float EPSILON = rz*rz*.001;", "Dave_Hoskins, 2018-04-19Putting those thing back doesn't break it for me though.", "FishMan, 2018-04-19@Dave_Hoskins", "the different is:", "last version:", "const float SC = 10.;", "float waterHeight = 10*SC.;", "", "curent version:", "const float SC = 10.;", "float waterHeight = 100.;", "", "last version :", "vec3 InitPos =vec3(.0,103., -4.0);//global var", "", "void mianImage(...){", "...", "vec3 ro = InitPos;", "}", "", "", "current version:", "void mianImage(...){", "...", "vec3 ro = vec3(.0,103., -4.0);", "}", "i guess the problem is the variable init order error", "Dave_Hoskins, 2018-04-19It's OK now, out of curiosity, what was the problem?", "Nice colours BTW!!!", "FishMan, 2018-04-19thanks ,now all is right in my tow different computer, but i don't know whether it is ok in your computer....", "Dave_Hoskins, 2018-04-19Black on windows too!", "FishMan, 2018-04-19thanks,i try to fix it later", "FabriceNeyret2, 2018-04-19all black on linux.", "FabriceNeyret2, 2019-08-03NB: webGL2 now allows simpler writting of this ( plus more vector op could already be used then ;-) ).", "-> 855 chars version here: https://www.shadertoy.com/view/ttjXzR", "cornusammonis, 2017-03-05@danutzbre It's a safeguard preventing the system from blowing up. Try editing line 11  const float amp = 1.05; // self-amplification  like so with and without clamping if you want to see what that looks like.", "danutzbre, 2017-03-05Why use clamp in the last line and not just:", "fragColor = vec4(a,b,div,1);    ?", "Flexi, 2017-02-28Hi cornusammonis, I've included jdrage's edit in my fork: https://www.shadertoy.com/view/MsscD4#", "godspeed you! (:", "jdrage, 2017-02-15Love it. I colorized like this:", "", "fragColor = vec4(mix(0.0,1.0,pow(norm.z,0.4)), mix(0.0,0.9,pow(norm.z, 2.8)), mix(0.2,0.0,norm.z), 1);", "danutzbre, 2017-02-14Ported this to quartz composer and modified the code, without knowing much about glsl...", "", "https://www.youtube.com/watch?v=goO3C5qtaeM&feature=youtu.be", "FabriceNeyret2, 2016-12-22..., not so easy.", "", "small simplifications:", "", "bufA:", "", "vec2 t = (amp * uv + ls * lapl + uv * sd).xy + norm * sp;", "t *= mat2(cos(sc), -sin(sc), sin(sc), cos(sc) );", "if(iFrame<10)", "O = -.5 + texture2D(iChannel1, vUv), O.a=0.;", "else", "O = clamp(vec4(t,div,0), -1., 1.);", "//note that O.a is set to 0", "", "image:", "O += .5 + normalize(texture2D(iChannel0, U/iResolution.xy)).z;", "FabriceNeyret2, 2016-12-22... and it could be a lot less since the vector ability of glsl is not used ! :-)", "thnewlands, 2016-12-22wow I'm amazed by how much you're able to get out of a 83 lines of code.", "LukeRissacher, 2016-09-06Beautiful!", "Flexi, 2016-01-10it does so good to see it in action here. thankyou!", "cornusammonis, 2016-01-08@FabriceNeyret2 As for transport and the relation of this system to a fluid simulation: this is not intended to be a physical simulation, it's best characterized as a continuous cellular automata incorporating some concepts from fluid simulations. It's also an original creation, so I don't have additional research to point you towards. So, take it at face value I suppose.", "cornusammonis, 2016-01-08@FabriceNeyret2 changed the clamping per your suggestion. By the way, another method for incorporating video:", "", "// sobel filter:", "vec3 im =    texture2D(iChannel1, vUv).xyz;", "vec3 im_n =  texture2D(iChannel1, vUv+n).xyz;", "vec3 im_e =  texture2D(iChannel1, vUv+e).xyz;", "vec3 im_s =  texture2D(iChannel1, vUv+s).xyz;", "vec3 im_w =  texture2D(iChannel1, vUv+w).xyz;", "vec3 im_nw = texture2D(iChannel1, vUv+nw).xyz;", "vec3 im_sw = texture2D(iChannel1, vUv+sw).xyz;", "vec3 im_ne = texture2D(iChannel1, vUv+ne).xyz;", "vec3 im_se = texture2D(iChannel1, vUv+se).xyz;", "", "float dx = 3.0 * (length(im_e) - length(im_w)) + (length(im_ne) + length(im_se) - length(im_sw) - length(im_nw));", "float dy = 3.0 * (length(im_n) - length(im_s)) + (length(im_nw) + length(im_ne) - length(im_se) - length(im_sw));", "", "// then change the update rule, 'is' is a scaling factor:", "float ta = amp * uv.x + ls * lapl.x + norm.x * sp + uv.x * sd + is * dx;", "float tb = amp * uv.y + ls * lapl.y + norm.y * sp + uv.y * sd + is * dy;", "FabriceNeyret2, 2016-01-08suggestion (even better in full screen) :", "but britney spears video in channel1 and do", "fragColor = mix( clamp(vec4(a,b,div,1), -1., 1.),", "texture2D(iChannel1, fragCoord / iResolution.xy) -.5,", "5e-2);", "}", "FabriceNeyret2, 2016-01-08#70: clamp( vec4(a,b,div,1), -1., 1.)", "GregRostami, 2016-01-08AMAZING!!!", "yamahabob, 2016-01-08Nice one!  I tried adding a little color with", "fragColor = (0.7 + norm.z)*vec4(norm, 0.);", "Dave_Hoskins, 2016-01-08It looks very natural, and changing textures is fun.  it!", "XT95, 2016-01-08Amazing !!", "jt, 2016-01-08Wow!", "104, 2016-01-08Whoa, one of the most unique techniques I've seen here in a very long time. Bravo!", "aiekick, 2016-01-08", "FabriceNeyret2, 2016-01-08I get slightly different interesting patterns with", "vec2 vUv = (fragCoord.xy +vec2(.2,0))/ iResolution.xy;", "or vec2(.1,0) or vec2(.2,.1)", "iapafoto, 2016-01-08You may let Buf A run for a while and then generate a landscape base on it on Image frame ! I will surely be amazing", "FabriceNeyret2, 2016-01-08thanks ! but while it gives the low level of things, I miss the high level :-) . At first, what kind of physical equation it is ? (e.g. I see no transport term, I'm not sure how to interpret how the curl is used, etc). Or is it just something empirical ?", "cornusammonis, 2016-01-08@FabriceNeyret2 I've updated the source with more comments.", "FabriceNeyret2, 2016-01-08wow !", "may you comment the theory behind ? (equations ?)", "", "NB: switching to fullscreen is great :-p", "positronmusic, 2020-05-15[This comment has been hidden by the shader author]", "pjkarlik, 2020-05-13i think you want - fragColor = vec4(vec3(noise), 1.0); or else its all white..", "cmarangu, 2020-04-23totally nasty! Like in the best way possible!", "papademos, 2015-07-06Hi srtuss.", "A few hours ago I sent you a mail (stral@aon.at) regarding the shader mashup party production.", "Artoo, 2015-02-19hi srtuss - you have an interest in computer audio perhaps - email me", "", "artoo3000-x@yahoo.co.uk", "", "I have been playing around trying to port some shaders into a max4live/jitter environment", "codePlay, 2013-10-27Nice work", "I entertained myself by modulating the \"stream\" speed and colour with an 1Channel0 audio source:", "float audio = texture2D( iChannel0, vec2( 0.3, 0.25 ) ).x;", "in the stream loop:", "pp.y += (time *spd) + audio*8.0;", "srtuss, 2013-10-26this actually became a game project. thats what it looks like:", "srtuss, 2013-10-26huh?", "Danguafer, 2013-10-21Revision's invintro? :P", "srtuss, 2013-10-03thanks. i am also a big fan of my style ^^", "PauloFalcao, 2013-09-23Awesome style!", "srtuss, 2013-09-11never seen that movie though", "simesgreen, 2013-09-11more tron than tron.", "srtuss, 2013-09-09fixed it. thank you for troubleshooting.", "poljere, 2013-09-09Doesn't compile on Mac / Chrome.", "", "Line 176 : can not cast from vec3 to float, you can fix it with...", "inten += vec3(v * 0.1).x + fx;", "", "Line 188 : can not cast from vec3 to float", "inten += shade1(v).x;", "", "Once fixed, it is just BEAUTIFUL!", "iq, 2013-09-09WOW. VERY powerful! Amazing", "movAX13h, 2013-09-09hehe obergeil", "gyabo, 2015-12-20", "Wow, Good solution!", "Thanks!", "Shane, 2015-12-16I've always liked the voxelesque look.", "", "Raymarching blocks that are close together can be a challenge, due to the accuracy required. I still haven't found the best formula. The following isn't perfect, but it involves fewer \"map\" calls:", "", "for(int i = 0 ; i LESS_THAN 100; i++){", "temp = map(t * dir + pos);", "if(abs(temp.w)<0.001*t)break;", "t += temp.w*.5;", "}", "", "temp *= 0.15; // To account for your original formula.", "ollj, 2023-05-27A qhad-bezier is a generalized-case of a special-case-line-segment.", "generalized-functions tend to include a division (or log(a)) by a variable, and this hints at an asymptote where ever that function is undefined, and that asymptotic-case IS a special-case function to be caught (before you divide by close-to-zero).", "the problem is not just dividing by 0, but it is also VERY low precision close to the asymptote (dividing by very small values)", "for this, it is often better to do x/almostIdentity(var) instead of x/a", "https://iquilezles.org/articles/functions/", "actually almostidentity is just a VERY efficient special case of smin() and ANY smin() function is useful to smother out all the asymptotes and discontinuities (they tent to be smoother, but may also be much slower for being more parametric/exponential)", "a very complete smin() collection is in https://www.shadertoy.com/view/3t2XzW", "slipster216, 2023-05-17Ah, so:", "", "if (kk > 99999.0)", "{", "return sdSegment(pos, A, C);", "}", "", "seems to fix that. isInf doesn't seem to catch it..", "iq, 2023-05-17Yes, this is a Bezier curve SDF, but you have carefully fabricated a straight line, so b=0 and kk goes to infinity.", "slipster216, 2023-05-17Given points:", "", "vec2 v0 = vec2(0.235, 0.65);", "vec2 v1 = vec2(0.2215, 0.5615);", "vec2 v2 = vec2(0.208, 0.473);", "", "There's some very strange distortion in the distance field.", "screeb, 2021-11-24No worries! However your threshold test (p < 0.001) is not quite right, even for the quadratic approximation, and in fact introduces more issues! See e.g. iTime = 3.26.", "", "Unfortunately you can't just test against p, as while the issue does occur around p = 0, it's not 1:1 with by the slope of p at those points, therefore the problematic region differs at each p = 0 point. My test (abs(abs(h/q) - 1.0) < 0.0001), while not so elegant, works for all cases.", "iq, 2021-11-23Thanks screeb. I added the fix, and also developed the quadratic Taylor expansion of h instead the linearized one, if anybody needs it.", "ollj, 2021-11-23shadertoy is more often about speed than about precision, as its only the visual front end, and not intended for a persistent physical simulation loop.", "", "you can relatively easily highlight near-asymptotic cases, by playing a smoothstep()ed boundary around everything, that you divide by, and output that as a visual debug-value.", "screeb, 2021-11-23This (and every other exact-distance Bezier implementation that I've seen, as they all use the Cardano method, it seems) suffers from a significant floating-point precision issue. It's not easily (or at all) visible in 2D if the line is thick enough, or depending on the control points, but if it's used in 3D (like with the revolution function), it can create a big nasty, noisy split in the object.", "", "You can see it here if you set:", "", "vec2 p = (2.0*fragCoord-iResolution.xy)/iResolution.y*0.25 + vec2(4.0, 6.0);", "vec2 m = (2.0*iMouse.xy-iResolution.xy)/iResolution.y*0.25 + vec2(4.0, 6.0);", "", "vec2 v0 = vec2(3.4, 8.75);", "vec2 v1 = vec2(5.9, 0.0);", "vec2 v2 = vec2(0.0, 0.0);", "", "Fortunately, there's an easy solution that I came up with.", "", "After the vec2 x = (vec2(h,-h)-q)/2.0; line in the 1 root section, simply add this:", "", "if(abs(abs(h/q) - 1.0) < 0.0001)", "{", "x = vec2(p3/q, -q - p3/q);", "", "if(q < 0.0)", "x = x.yx;", "}", "", "It could definitely be optimised, but it demonstrates the fix.", "", "What's happening is that when h and q are nearly equal (which is in areas surrounding p = 0), the floating point error becomes huge, as we need the difference between them, but the precision is lost.", "", "My solution is to estimate x with a calculation that doesn't suffer from this. The estimate is very good when h and q are close, so it works well, provided the threshold value is reasonable (0.0001 seems to do the job).", "ttoinou, 2020-03-31Performance wise, what is X such as \"we compute X 2D distance to segments == we compute one 2D distance to degree 2 bezier curve \" ?", "profhua, 2019-12-12Thanks,ollj.I do read your references at the first time and they helps a lot.Then I make a 3D version in unreal engine,Maybe you don't know Mandarin but still want share this with you.", "http://www.profhua.com/Sub/Article/QuantricBezierSDF/QuantricBezierSDF.html", "ollj, 2019-11-20no, thats pretty much the core issue:", "where ever you generalize a function/distanceField, you may end up with one more case/branc that includes or exclused its simpler case, or you risk dividing by 0, or risk negative/imaginary root solutions without a type to handle dual number for imaginary roots.", "Here the ColinearLineSegment is the special case of its QuadraticSpline generalization.", "", "the worksave solution is one subroutine per asymptote with a decisionTree/branch for all cases where you could generate a NaN; sqrt(a<0.) or 1./(a=0.) or log(a<=0.) , which is also included in; pow(0.,0.)", "", "the simple workaround is to set an epsilon>0 worksave boundary around every asymptote, so that (a>0) is always true, at the cost of one max().", "", "eps=0.001;", "a=vec2(0, 0);", "a=max(eps,b);", "kk=1./dot(a,a)", "", "this lowers precision for the sake of faster processing and less memory use for all the special cases, which is usually just fine for visualizations.", "vegardno, 2019-11-20Yes, it seems the problem is that b = vec2(0, 0), so dot(b, b) is 0, which is a problem when calculating kk = 1. / dot(b, b). It can obviously be fixed by adding a check for this and dropping down to the code for a straight line, I'm not sure if there is a better way.", "ollj, 2019-11-20profhua, there are many {Quadratic Bezier - 2D Distance] shaders on shadertoy, iq just tends to keeps things simple and small, but others are better for illustration or docuentation:", "", "https://www.shadertoy.com/view/MdXBzB", "", "the main math here involves fiunding an inverse to a quadratic function, and this involves solving for 3 roots of a cubic function. each root translates to one distance to a point on the curve/spline, and we only care for the shortest of 3 distances to 3 points on the line, that correspond to 3 roots of a cubic function.", "", "other shaders are better at illustrating this inverse.", "", "the [distance to quadratic bezier] problem is identical to a [point disatance to a parabola AND also shortest point to 2 endpoints anywhere on the parabola] problem.", "", "this also exists as quartic, where the point distance to an ellipse solves for (up to) 4 roots, that correspond to 4 possibly closest points on an ellipse to any point near the ellipse. and then it pretty mucxh ends (in 2d), as we can only solve quartics, but not solve for 5 (non identical) roots for a (general) quintic.", "", "https://www.shadertoy.com/view/XttyWN", "ollj, 2019-11-20yes, special (, usually colinear or asymptotic,) cases of a more general formula/solution (that involves root solving) often result in a determinant, that is (close to) 0, so you divide by very samll values where ever you are not catching divisions by 0 (or divisions by small values, that tend to be rounded to low precision (inverses)).", "", "this is very tricky in opengl, where parsing is too \"open for interpretation\", and the type float NaN state is just an ambiguous mess.", "vegardno, 2019-11-18There seems to be a problem when B is exactly at the center of the line AC? For example sdBezier( p, vec2(-.5, 0.),vec2(0, y),vec2(.5, 0.)); renders as just a point (at A) when y is 0. although it works when y is e.g. 1e-3.  You can really see it by always setting v1 = .5 * (v0 + v2). Before you say it, I understand that this would be just a straight line :-)", "ollj, 2018-11-02[This comment has been hidden by the shader author]", "profhua, 2018-11-02Is there an artile explain why the math is this for the SDF?Sorry for asking but really cant understand from the code.", "tomkh, 2018-09-28As in MdXBzB you can safely remove lines 76-78, since the 3rd root in this cubic formula is indeed at the local maximum (ollj: thanks for reminding).", "ollj, 2018-09-21for distanceToParabola, the 3 roots case only needs to care for 2 of 3 roots, the \"middle\" root is irrelevant, as we only care for the smallest local minimum.", "pretty sure t can be a vec2", "FisherWu, 2017-09-15amazing job", "scarletshark, 2017-09-13In your Image, col = pow(col, vec3(1.1)) does not appear to do anything.  Or,at best it doesn't do *much*.  I'm assuming it's gamma correction, because I believe that 1.1 or 1.2 is typical.  Just curious what the purpose was (learning)?", "Dave_Hoskins, 2017-09-03There does appear to be an infinite number of shades in the paint box...", "ingagard, 2017-09-03Groooovy! Really \"mindbending\" effect you have there. Love the cellshading.", "Docculd, 2017-08-31Awesome!", "jt, 2016-02-01Nice!", "jt, 2016-02-01Nice!", "Shane, 2016-02-01Cool geometry and nice color scheme. I figured someone would do this at some stage.", "", "I like to use edge detection (pixel based, rather than normals) to antialias just the pixels that exceed a certain threshold. Although, to do antialiased edge detection, I'm guessing an extra pass would be needed.", "poljere, 2016-02-01Nice!", "iq, 2016-01-31Looks great!", "Dave_Hoskins, 2016-01-31getDeltas function is interesting. Nice one.", "tomkh, 2016-01-31pretty", "aiekick, 2016-01-31", "lherm, 2017-02-07@Fabrice Thank you! And thanks for the quick response to my email!!", "FabriceNeyret2, 2017-02-07n is not initialized.", "lherm, 2017-02-07@tehsauce Thank you!", "tehsauce, 2017-02-07Looks great!", "yunhai, 2021-10-15nice!", "Malkverbena, 2020-08-02Sooo nice!!!", "vgs, 2015-11-08so awesome!", "valentingalea, 2015-11-07excellent reference material! you should teach in schools", "koiava, 2015-11-06@gabor_papp @Dave_Hoskins", "yes, my nexus 7 also shows black screen. I have to refactore, optimize things little bit...", "MacSlow, 2015-11-06Awesome... although it's much to read/understand code-wise", "Dave_Hoskins, 2015-11-06It's black on iOS as well, apart from the white light.", "gabor_papp, 2015-11-06Shows only a black screen for me in OS X Chrome.", "iq, 2015-03-28super cool!", "koiava, 2015-03-27Thanks Dave.", "I added mouse control for sphere", "Dave_Hoskins, 2015-03-26Love the atmosphere here.", "alro, 2022-07-11Magical!", "ollj, 2016-04-29i like the compactness of the audio sequencer. anyone ever made an .abc format parser? it could be more compact for simpler sequences.", "dila, 2016-04-23great! misse this one", "FabriceNeyret2, 2014-08-09to avoid the little glitch at each tune stop/start you should ensure that noteFreq*noteTime is integer at the begining and end of each tune (noteFreq = floor(noteFreq*noteTime)/noteTime ).", "Klems, 2014-07-31Okay, thanks! That's a really cool feature. Great shader as usual.", "iq, 2014-07-31Stereo! We ahve left and right channels, so two waves   In this particular shader, line 63 introduces some panning. if you return tot.xx you are converting the sound to mono. I know this is not documented, so your question makes sense", "Klems, 2014-07-31Quick question about the new sound feature, I'm not sure if I should ask it here: why does the mainSound function must return a vec2? Isn't a sound just a \"time to amplitude\" function? Amplitude isn't R\u00c2\u00b2 as far as I know. Changing line 70 to \"return tot.xx;\" yield the same result. Thanks!", "poljere, 2014-07-30Amazing Inigo, amazing!", "Dave_Hoskins, 2014-07-30Very nice. Is there any way of feeding the audio output to the image?", "P_Malin, 2014-07-30Yes, it is working now. Great stuff!", "iq, 2014-07-30I have removed a big loop I was using for smoothing and done it pseudo-analitically. I hope it works now!", "P_Malin, 2014-07-30Removing the last octave from fbm() also fixes it.", "P_Malin, 2014-07-30I think it is just a bit too complex / too many registers or whatever. It is very close though. If I comment the last f = mix(...) line from logo() then it works.", "iq, 2014-07-30I changed the code a bit, I hope that fixes it!", "P_Malin, 2014-07-30Oh, sorry, the compile error is caused by something else. p is an input and initializing it to something was just working round the error.", "P_Malin, 2014-07-30The image shader is not compiling here. You need to initialize p in the function logo().", "Looking forward to having time to play with this feature. I'm sure I can make some truly terrible sounds", "indivisual, 2016-03-10very nice. i added some fun here: https://www.shadertoy.com/view/4ddXR8", "Kyle273, 2015-05-01For this shader, I borrowed the equations from the original shader. I've been trying to reverse engineer cool shaders, so when I come across weird math equations, I'll try and plot them in a graphing program to better understand how I'm changing the color, light, etc.", "kakaxizhhgjh, 2015-05-01Great Work! There are so many math tricks. How do you know the math equation result in these effects? experience or theory?", "Dave_Hoskins, 2022-05-23Either I like the track and nobody can hear it or it's just rubbish! \ud83d\ude01 I give up - I've put Peter Green's track back on.", "Beckan, 2022-05-12I don t like the new soundtrack as much as the soundtrack from 2021-02-04", "cyberjax, 2021-03-28Unfortunately your new track is not available in the States", "Dave_Hoskins, 2021-02-04I've changed the music to be more relaxing. The last track gave me a headache! \ud83d\ude01", "iq, 2020-11-18Fixed! (need a hard refresh by holding F5 or CTRL+R for a couple of seconds)", "Dave_Hoskins, 2020-11-18@balkhan - Yes, thanks for clarifying it's not just me. Bizarrely, it still works on the iPad App  - well it compiles and runs anyway.", "balkhan, 2020-11-18idk, I get these errors :", "'#' : invalid character", "'define' : syntax error", "", "I needed to scroll down and up for them to show though.", "jeyko, 2020-11-18so what, defines are no longer allowed in sound?", "balkhan, 2020-11-18It had to do with the defines, I did a quick fix here (unlisted) : https://www.shadertoy.com/view/3dtBRf", "just replaced the defines by constants in sound and common tabs", "Dave_Hoskins, 2020-11-17Ouch! Anybody know why the Sound tab no longer works? The error is fairly ambiguous!", "Thanks.", "xavierseb, 2020-11-04Just had to login to say how awesome this is! pure inspiration and a pleasure to have come across! <3", "Dave_Hoskins, 2019-05-08Hi, thanks. The dot product is a way of getting a single value from two complicated vectors. I don't know who did it first for distance fields, sorry, I probably got the idea from 'Shane's great work.", "jeyko, 2019-05-08Wow, had you seen/done the dot(sin(p), cos(p)) terrain method before this shader? Your code is very readable.", "zproxy, 2018-08-15interesting. first time i see .switch used in a shader.", "Dave_Hoskins, 2018-07-23Thanks man! The misty clouds are not volumetric though, see 't' in  the function getSky in 'B'. They are using only one position.", "reinder, 2018-07-23Very nice! I like the volumetric clouds, it really add to the sense of speed.", "eniko, 2018-07-20magical <3", "CtrlTea, 2018-07-19Glorious!", "Azorlogh, 2018-07-19Holy crap. This is seriously insane, I don't even know what to say.", "starea, 2018-07-19Fantastic!", "Dave_Hoskins, 2018-07-19I meant '123' seconds in - doh.", "Dave_Hoskins, 2018-07-19Thanks for the kind words folks!", "At 1.23 (without mouse interference), there's a nice curling rock that would make a cool wave effect I might try at some point.", "GottZ, 2018-07-19dude wtf... this is crazy", "darkeclipz, 2018-07-18wow, how?!?! absolutely amazing!", "PauloFalcao, 2018-07-18Beautiful and fast! Awesome, well done!", "asis5528, 2018-06-04Wow,it feels like intro of hollywood movies ...", "akhgary, 2018-05-07Holy #$%! am i flying?!", "duvengar, 2018-02-06Wow amazing scene!", "Dave_Hoskins, 2018-02-05I've fixed the lens-flare occlusion and used the 'Common' buffer a little - a nice addition to Shadertoy, thanks!", "coyote, 2017-12-26", "Dave_Hoskins, 2017-12-23Just added a lens-flare effect. But I don't know if I've got the Z obscuring correct in 'Image' - line 264 to 265. Can anyone help? It does seem to work but sometimes I think it's wrong, so I wondered if I have an aspect ratio problem or something.", "Dave_Hoskins, 2017-12-21Added wind and a caw using a formant graph of a crow sound.", "movAX13h, 2017-12-19Very nice! This is a high-res and better-looking version of Fugl! Add controls for the bird, pack it into an exe and sell it on steam for 10$!", "jt, 2017-12-18wow!", "ThomasSchander, 2017-12-18The birds wing movements look natural and nice!", "Dave_Hoskins, 2017-12-17The crow just follows the camera path that carves a big tunnel in the rock. The crow then has a  SinCos fly around that tunnel. See the switch statement in Buf A. I didn't really notice any extra buffer slowdown, and I have a fairly old GFX card.", "dr2, 2017-12-17Have you measured the performance change due to the extra buffers?", "dr2, 2017-12-17Great shading. I keep seeing facial images embedded in the rocks. Am I freaking out?", "How does Mr. Crow miss all the floating rocks? And what about some crow sound effects?", "Dave_Hoskins, 2017-12-17Added a leaky integrator IIR for smoothing of flap power, as it seemed a little On/Off at times. Also some tail twitching.", "Duke, 2017-12-17Cool!", "balkhan, 2017-12-17wow !!", "ShnitzelKiller, 2017-12-16It doesn't lag enough, please add trees!", "Dave_Hoskins, 2017-12-16Music changed to royalty free. It's a bit cheesy, but I think it works quite well.", "duvengar, 2017-12-16Wow fantastic!", "Dave_Hoskins, 2017-12-16 The flap amount is based on incline.", "stb, 2017-12-16Nice! Smooth framerate @ 1080p with only a few occasional stutters. And the bird always seems to flap its wings at just the right time", "Dave_Hoskins, 2017-12-16Thanks guys! I wanted to convey it battling against the wind. I've just brightened things up a bit, and hopefully improved the movement.", "rigel, 2017-12-16This is extraordinary and amazingly fast for so much complexity !", "flockaroo, 2017-12-16awesome work! such great detail on the motion of the bird!", "ocb, 2017-12-16The bird flight and feathers are incredibly naturals!", "834144373, 2017-12-16wow,run so fast!", "shau, 2017-12-16Brilliant. Nice and relaxing", "iapafoto, 2017-12-16wow Fantastic shader!!!", "Specially Love montains and ice surface effect!", "xdaimon, 2017-12-16That's nice to watch. I like the atmosphere.", "iq, 2017-12-16Super good!!! Really impressive", "BigWIngs, 2017-12-16Cool! Seems to render very fast and the jittery feathers really add to the sense of speed.", "Shane, 2017-12-16 The landscape is so well done.", "MacSlow, 2017-12-15The rocky landscape somehow remind me of Alien  But the nice friendly background music and warm light/sky brings one back to the cheerful side of things.", "patu, 2017-12-15Massive!", "VPaltoDance, 2022-05-05Simple and beautiful! Well done!", "long, 2019-06-17\u4e0d\u9519", "BigWIngs, 2017-04-20Beautiful. Great job!", "Shane, 2017-04-13Nice. Just the right blend.", "iq, 2017-04-13Very beautiful!", "kuvkar, 2017-04-12pretty!", "FabriceNeyret2, 2022-04-05seems quite usable, anyway (at least for not-sliding parametrization).", "cool !", "iq, 2022-04-04I added it.", "", "It's approximated of course, for a few reasons: in the U direction the parametrization is not uniform, because the arclength of a Bezier segment doesn't analytic solution. In the V direction, we have second order discontinuities because this being a quadratic bezier, there second derivative (line 44) changes abruptly across segments. Lastly, the varying thickness of the curve is not  taken into account, and I'm using an infinitesimal cylindrical section instead of a more correct cone approximation for the varying thickness, so the UVs will be a bit distorted.", "", "The relevant code is in line 200, feel free to play with it.", "FabriceNeyret2, 2022-04-04how difficult would it be to have the angular coordinate around the tentacle so that you can map a texture ?", "( and about the cubic one  https://www.shadertoy.com/view/MdKBWt  ? )", "Monkeyspeare, 2021-12-11can you please explain how to calculate the AO? and was it robust?", "bio998, 2020-02-16I think I answered my own question... the second float in the Vec2 is the distance along the curve..", "bio998, 2020-02-16Noob question.. Why does the sdBezier function return a vec2 and not a float?  Isn't a distance just a float?  Most 3D sdf's return a float?", "jt, 2017-06-20cool!", "Dave_Hoskins, 2016-09-07With the browser window ia maximized, I'm getting ~41fps with method 0 and 60fps with the other. Unless I enable ANIMATE!!!  - Then they are both at 60fps. So it's hard to choose which is better.", "iq, 2014-01-08iterationsteppa: On performance, the problem only manifests if you use Firefox. Change to Chrome and you should be fine.", "", "It's a line plus an exponentially decaying shape (line 99), that is swirled around a Bezier curve of 8 segments (8 parabolas oriented in 3D and stitched together if you want).", "", "archee: not really, we plan to keep it as a 2D framework only...", "iterationsteppa, 2013-12-29Is this a straight line, that is swirled using a kind of bezier function? ... is bezier function the best way to make rotations of that kind to a straight spike?", "", "Also i have a question, i am not to certain where to post it, the front page of shader toy takes sometimes 1+ minutes using a 470gtx and q8200 @ 2.5ghz, can i optimise my pc for shadertoy?", "archee, 2013-12-20The background's few pixels next to the object's contour are glitchy. Are you thinking of upgrading shadertoy with some geometry generator?", "Dave_Hoskins, 2013-12-19Very interesting.", "I'm getting noise glitches with anything above 6 iterations here, but only with the non-animated version, which is a bit odd.", "WouterVanNifterick, 2013-12-19Ah, indeed, the linear version runs at 60FPS over here, so for the entire shader that's at least thrice the framerate.", "iq, 2013-12-19The bezier distance estimator is definitely very expensive. If Iuncomment line 15, I get twice the speed. There are things that can be done to speed this up for sure.", "WouterVanNifterick, 2013-12-19It's mostly in getClosest() (was it called getP before?). When I disable that from being called from sdBezier(), I get 60 FPS too.", "", "Sometimes I wish I could run a sampling profiler on shaders..", "WouterVanNifterick, 2013-12-19It seems to a quite a heavy calculation.", "Most shaders run at 60FPS, but this one runs at 19 FPS.", "", "On Windows7, Chrome, I7, 12GB, NVidia GTX 285", "", "When I decrease the number of iterations from 8 to 4 (line:80), I get 35 FPX, so most time is spent in that loop.", "", "I guess all the heavy work is in sdBezier(), because when I leave that one out, I get 60 FPS with 8 iterations.", "ttoinou, 2021-03-16YouTube 8K60 render  !", "JoshScholar, 2020-09-29It is such a mystery to me how you can fit that in so little code.  I'm in awe.", "By the way I upgraded from an rx 570 to a 2060 super, so I can finally see this demo at a reasonable framerate.", "teadrinker, 2019-11-08Epic!", "csblo, 2019-11-08Very impressive, are you from informatic or mathematic, or the two ? So beautiful, both technically and artistically.", "GregRostami, 2019-11-04SUPER Amazing!", "visuality, 2019-09-29phenom", "zxxuan1001, 2019-09-12I am speechless.... surreal", "Carandiru, 2019-09-09gorgeous, unreal!", "EvilRyu, 2019-09-08Super Cool!", "ikuto, 2019-09-07great work!!!", "KK, 2019-09-07@JoshScholar: For some reason, in Firefox the sound works only after logging in to ShaderToy.", "JoshScholar, 2019-09-07The sound stopped working", "iapafoto, 2019-09-05Superb", "KK, 2019-09-05OK, I changed back to iTime. Now visuals should work even without the music.", "flockaroo, 2019-09-05hmm, worked once, but not anymore... (just black)", "zproxy, 2019-09-05nice godrays", "KylBlz, 2019-09-05awesome! liking the \"madtracing\" shaders", "toomuchvoltage, 2019-09-05I did check out the demo however. Pretty cool!", "toomuchvoltage, 2019-09-05All I see is a black screen... the shader just worked once randomly... (RTX 2080Ti, tried latest Firefox and Chrome.)", "ttg, 2019-09-05Before the computer, a picture was said to be worth 1000 words.  Now, 4096 characters can be worth many pictures.", "shau, 2019-09-05Awesome!", "iq, 2019-09-05Super cool, really nice!", "Shane, 2019-09-05 Very nice.", "flockaroo, 2019-09-04!!!! cool shit", "BigWIngs, 2019-09-04Very nice!", "It comes out black on firefox, windows. Are you perhaps using iChannelTime? The soundcloud music isn't loading for me so that could be a culprit.", "patu, 2019-09-04Shader of the Year", "ChutneyPot, 2021-02-18Amazing! Love the sounds !", "jorge2017a1, 2020-10-16Wow .... Great work ..... the intro is excellent, for a music or song ..... the whole scene surprises ... the sound effect is also very good .... worthy of a song !!!!", "................", "Guao....Genial trabajo ..... la intro es excelente, para una musica o cancion ..... sorprende toda la escena....el efecto de sonido tambien es muy bueno....digno de una cancion !!!!", "Kolejude, 2020-04-12that detuned saw sounds like the vulpvibe destined saw sample", "shau, 2019-07-14A few years too late but awesome especially love the formant processing.", "Plento, 2018-09-30Those sounds are sooo awesome", "Cubeleo, 2016-05-06For a complete experiment, the engine noise is a very convincing wind/jet engine roar effect!", "Dave_Hoskins, 2016-05-06Thanks Cubeleo, yes I think I used some the texture mipmaps for filtering. To be honest, the sound was a complete experiment, trying everything until it just worked the way I wanted it to.", "Cubeleo, 2016-05-06Hello Dave, I absolutely love this composition.  I have a question--in the sound shader, why do you have both hash functions and the noise texture?  Is it because you needed some filtering when sampling the noise texture?", "reinder, 2015-10-15Thanks!", "reinder, 2015-10-14Very, very nice!", "", "@Dave_Hoskins: can you save some of your shaders as 'public+API' ? I really want to see this shader in the iPhone app", "Vlad86, 2015-10-14I love it long time!", "P_Malin, 2015-09-02About time I said, this really is very good", "Dave_Hoskins, 2015-08-10At 60fps:", "Atrahasis, 2015-08-10wow really impressive, i've loved those things. This link works fine and fast for me, the picture is wonderful and very close to the movie. What happens here on this page with my computer is webgl encountering error and stopping, usual behavior when shaders don't compile. So i can't see anything. intel aspire s3", "Dave_Hoskins, 2015-08-09OK here's a smaller version without speech or ground shadows and no anti-aliasing:-", "https://www.shadertoy.com/view/ltsSzs", "Dave_Hoskins, 2015-08-09Can you tell me what it does do, and what 'puter you're using?", "Thanks.", "Atrahasis, 2015-08-09doesnt compile here  windows7/intelgraphicsFamily", "miraut, 2015-08-03Uaauuh... Really impressive shader / animation!", "EvilRyu, 2015-07-30Super awesome!", "knighty, 2015-07-28Wow!", "gyabo, 2015-07-28awesome!", "vgs, 2015-07-27One of the most impressive shaders in shadertoy!", "You have raised the bar so high for SIG15!", "GregRostami, 2015-07-27HOLY COW!!!", "Dave_Hoskins, 2015-07-26I've increased the length, added some clouds, and adjusted the contrast and colour a little.", "djmips, 2015-07-22Great stuff. And I appreciate that your code is easy to read and follow plus pdf link!", "ciberxtrem, 2015-07-21Super cool animation!", "nimitz, 2015-07-20The animation, the modelling, the materials....Amazing stuff all around!", "Dave_Hoskins, 2015-07-19Cheers!", "I'm thinking that some people might be expecting it to fire the lasers, so I may put it in later.", "iq, 2015-07-18this is seriously amazing! great modeling and sound!", "dila, 2015-07-18brilliant", "kuvkar, 2015-07-18awesome!", "Lallis, 2015-07-18Wow, so cool!", "vgs, 2015-07-18and now I want to watch that movie again", "superb shader!", "aiekick, 2015-07-18wow great.", "anastadunbar, 2015-07-18Finally something that works and doesn't crash. I really like this also the sounds were good.", "coyote, 2015-07-18This is phenomenal!", "(I almost asked how long it had taken you to make it, but then I noticed that you already answered it in description...)", "GregRostami, 2015-07-18For the 1st entry ... It's AMAZING!", "nicroux, 2023-05-31Hi @mrange, how do i reach out to you? My twitter is here: @nicroux", "Andre, 2022-10-18Very nice, and fast", "murf, 2022-09-30gorgeous", "IWBTShyGuy, 2022-09-29fantastic", "turboplay, 2022-09-06I know, thanks for the license.", "mrange, 2022-09-06@turboplay all my code is CC0 which is very close to Public Domain so very little restrictions on how you can use it. Note my code does build on top of other's work which are covered by other licenses.", "turboplay, 2022-09-06Top class (I want to use it", "jorge2017a2, 2022-09-06great good style!!!!", "Carandiru, 2022-09-06nice gyro!", "iq, 2022-09-05It looks really nice", "PrzemyslawZaworski, 2017-08-3082 chars:", "#define mainImage(c,f) \\", "vec2 u = f/iResolution.xy;\\", "u*=1.-u;\\", "c=vec4(pow(u.x*u.y*15.,.25))", "Koltes, 2017-04-20Because of \"uv.x * uv.y\" on line 7, line 5 could simply be \"uv *= 1. - uv;\".", "FabriceNeyret2, 2016-05-21vec2(1.0)- uv.yx; -> 1.-u.yx;", "adrinalino, 2023-02-15Damn this is good!", "justinluo4, 2022-04-21i love how the ball rubs against the curtain so realistically! it really blew my mind and it makes me want to pursue this field with the bottom of my heart! i would like to personally thank you for giving my life a renewed purpose and goal.", "cxm, 2021-12-12Explore collision using GLSL backend were multiple game room.", "", "Credit", "FabriceNeyret2, 2021-06-29hey, I missed that at the time !", "dean_the_coder, 2021-06-29:O", "GCScholar, 2020-09-30Awesome!!", "senzheng, 2020-02-17Super Super Cool!", "jt, 2018-01-15brilliant!", "kidach1, 2017-09-17amazing", "zomee, 2017-09-16So amazing\uff01", "1utiovaco, 2017-09-15I like that one", "FisherWu, 2017-09-15 I was shocked", "stduhpf, 2017-09-14i forgot to install proper drivers", "now it works", "stduhpf, 2017-09-14but it was really cool after i relaced textureLod by \"texture\"", "stduhpf, 2017-09-14halp, my new rx 580 don't recognise \"textureLod\"", "Antonalog, 2017-09-14excellent! btw you can reduce the stretching by not allowing the vertex to stray beyond a sphere with radius of the length of cloth connecting it to the rail. something like", "if (length(pos) > length(vec3(fc.x*0.85,fc.y,fc.y*0.01))) pos *= length(vec3(fc.x*0.85,fc.y,fc.y*0.01))/length(pos);", "dq, 2017-09-14Magic!", "Polygon, 2017-09-13This is super cool!", "shau, 2017-09-13So good", "Dave_Hoskins, 2017-09-13Curtain ? It's 70s beige with a touch of 80s retro abstract 'rose' motif. - with an evil purple pac-man with green eyes - when you see it.", "FabriceNeyret2, 2017-09-13ultra-nice, but I would like to interact, either by moving the ball or the curtain ! ;-)", "P_Malin, 2017-09-13Some really great stuff going on here! I agree with paniq, I wouldn't want that curtain design in my house", "ingagard, 2017-09-13Lovely work!", "paniq, 2017-09-13awful curtain pattern, amazing algorithm at display. like lapafoto already observed: wow at code size!", "sgoal, 2017-09-13cool", "Mourtz, 2017-05-28speechless", "archee, 2017-02-17Updated for GLSL ES 3.0", "vanphuc, 2017-01-17Sorry! It works!", "vanphuc, 2017-01-17Why  copy 100% not working?", "https://www.shadertoy.com/view/llKSWw", "BigWIngs, 2016-12-22Wow! Cool!", "archee, 2016-12-21Now it works with 4 buffers. (simulation 240hz)", "KylBlz, 2016-12-20Speechless! Studying code", "eiffie, 2016-12-20oooh nice!", "tehsauce, 2016-12-19Outstanding work!", "iapafoto, 2016-12-19And code is so short!", "iapafoto, 2016-12-19wowowowowowowow !", "archee, 2016-12-18@Dave_Hoskins, thanks, done. It doesn't work with more than two buffers though.", "Dave_Hoskins, 2016-12-18@archee hmm, couldn't you feed two buffers (or more) with each other's data to make it animate quicker?", "flockaroo, 2016-12-18wow, very cool!", "knighty, 2016-12-18This is dark magic! What have you done to my PC? :-)", "834144373, 2016-12-18It just fast run 60FPS on shadertoy\u2018s 400x225 ico on my GTX850m.", "also,it's very cool,how realistic the cloth simulation!", "GregRostami, 2016-12-18Just Amazing!!", "archee, 2016-12-18Buf A, which does the physics, only runs 60hz, or even less, if 60FPS is not achieved on your system. This cloth simulation method needs to run more than 1000hz to get realistic speed without stretching. It would be a nice feature to run Buf A 200 times before Image is run. Of course, in the required resolution.", "Dave_Hoskins, 2016-12-17Beautiful! Simply stunning. Can't it run at more realistic speeds?", "archee, 2016-12-17The cloth is extensible due to the very low frequency simulation available. But the maximum stretch is defined as 1.3 of the original size. Sometimes it stretches even more, and gets buggy, but that's rare enough. Take a square in the 2D texture, say 64x64. Find the 3D position of a texel in the middle of it to place the bounding sphere. The radius has to be big enough to cover the maximum length the patch of cloth can extend. That is sqrt(1^2+1^2) * 64 / 2.0 * maxstretch. If the ray misses this sphere, you can skip the whole 2D rectangle. The hiararchy must be implemented without any form of recursion to make it compilable, but it simulates a recursive quad tree.", "iq, 2016-12-17Amazing Archee! Can you explain the raycast method for the cloth? You are approximating each vertex by a disk/sphere (and oversampling it 8x to make them small enough that they become subpixel size). You have all the vertices in a 2D texture, and you are traversing it in 2D to find ray-sphere intersections. You start from texel 0,0, then move overt it finding intersections with spheres of of bigger and smaller radius based on the level in the hierarchy, but I don't see how these spheres bound more vertices. Basically, I'm missing the 2D to 3D relationship. Any explanation would be great!!", "Duke, 2016-12-17Very nice!", "aiekick, 2016-12-17wow, awesome job", "Dasher_The_Viral, 2019-06-22Very well done!", "dila, 2015-03-13nice", "fb39ca4, 2013-09-16I took care of that problem already. See line 201, then go look at the shader in the search preview.", "iq, 2013-09-16Cool! Lot's of animation/synching work here!", "", "It's just a pity that at iGlobalTime=10.0 the animation is in the transition and it renders all black, because we are using that exact time for rendering the thumbnails in the browsing and main imges.", "fb39ca4, 2013-09-14I used two raymarching passes - one for the tiled cube and the moving cube, and the other for the final logo. Both were colored and mixed together based on the time. For coloring the tiled cube, it's kinda hard to explain, but think of it as many points moving along the surface, illuminating the tiles it is near and the ones behind it. The white glow effect is also applied there to tiles and the gaps that are not lit up. The \"marching\" cube was animated using if statements to transform it based on the time, and lit using three point lights that only take direction, and not distance into account. The final logo was modeled as usual using distance fields, and colored using the distance from various points on the X, Y, and Z planes.", "Dave_Hoskins, 2013-09-14It looks like you've spent a lot of time on this, I wouldn't know where to start. Great animation.", "oliverb, 2018-10-25I  believe this shader is now broken", "iq, 2017-07-19No, it cannot. Values can only be -3, -1, +1 or +3. Round off errors cannot make +1 become a +2", "kakaxizhhgjh, 2016-08-07most of time the round off is ok, but don't take that for granted, sometimes this can be problems.", "kakaxizhhgjh, 2016-08-07the value could be 3.0, 2.0(right on edge). but because of float round off, for example in javascript 0.01 add 1000 times the result is very near to 10, but not 10. most of time the round off is ok, but don't take that for granted, sometimes this can be problems. I got you.", "iq, 2016-08-07Because of precision problems, I never want to do comparisons in floating point.", "kakaxizhhgjh, 2016-07-13why not line 24 is less then 3.0 but 2.0?", "Aaro, 2014-08-12Mah god... Its beautiful... May i use this algorithm for triangle distance in my render engine? Ill give you credit if you want?", "cyanux, 2014-06-19make it renderable... it's possible now  Otherwise I study your noise functions, beautiful .. really impresive.", "cyanux, 2014-06-19", "_kitzume_, 2018-12-20I see fire, paint, mercury.", "rigel, 2017-10-02Amazing aesthetics. Quite extraordinary.", "starea, 2017-08-11Awesome!", "georgiagog, 2017-07-24Cool work!", "", "Could you please text me at g.gogoulou@gmail.com ?", "georgiagog, 2017-07-24Cool work!", "", "Could you please text me at g.gogoulou@gmail.com ?", "Yuma_Yanagisawa, 2017-06-20Wow lol so cool!", "Meebsie, 2017-01-10This is incredible.", "Shane, 2016-08-29Really nice.", "coyote, 2016-08-17Wow!", "Mesmerising!", "shau, 2016-08-17Colours are so nice", "shau, 2016-08-17Much fun to be had with mouse", "dila, 2016-08-17it makes me go oOoOoOoOoOo", "Duke, 2016-08-16Nice!", "kakaxizhhgjh, 2016-08-16Jesus, this is so cool!!!!!!!! amazing!!!", "Dave_Hoskins, 2022-08-25Hmmm, there are at least 4 Hermite sources on mujsicdsp.org - I guess you choose the less 'suspicious' one! \ud83d\ude01", "nitsuj, 2022-08-24The Centripetal Catmull Rom curve looks suspiciously like the Hermite curve posted on MusicDSP org:", "", "float hermite(float x, float y0, float y1, float y2, float y3)", "{", "// 4-point, 3rd-order Hermite (x-form)", "float c0 = y1;", "float c1 = 0.5 * (y2 - y0);", "float c3 = 1.5 * (y1 - y2) + 0.5 * (y3 - y0);", "float c2 = y0 - y1 + c1 - c3;", "", "return ((c3 * x + c2) * x + c1) * x + c0;", "}", "Dubswitcher, 2022-06-08I applied the cubic curve type here; https://www.shadertoy.com/view/fdKyRh", "Seems to give the most natural appearance in a 2d space out of any other curves in this list", "Hexdigest, 2021-02-16float Hermite(float x, float a, float b, float c, float d)", "{", "float e = c-b;", "float f = a-d;", "return(b+.5*x*(e+b-a+x*(a-b+e+x*3.*(e*3.+f+x*5./3.*(-e*3.-f+x*.4*(e*3.+f))))));", "}", "Hexdigest, 2021-02-15float Centripetal_Catmull_Rom_Coefficient(float x, float p0,float p1, float p2,float p3)", "{", "float a = p1;", "float b = 0.5 * (p2 - p0);", "float c = p0 - 2.5 * p1 + 2.0 * p2 - 0.5 * p3;", "float d = 1.5 * (p1 - p2) + 0.5 * (p3 - p0);", "return(a + x*(b + x*(c + x*d)));", "}", "oneshade, 2020-11-19Really nice by the way", "oneshade, 2020-11-19Replace the calculations for v0, v1, v2, and v3 with:", "float v0 = texture(iChannel0, vec2(floor(pos), 0.0) / iResolution.xy).x - 0.2;", "float v1 = texture(iChannel0, vec2(floor(pos) + 1.0, 0.0) / iResolution.xy).x - 0.2;", "float v2 = texture(iChannel0, vec2(floor(pos) + 2.0, 0.0) / iResolution.xy).x - 0.2;", "float v3 = texture(iChannel0, vec2(floor(pos) + 3.0, 0.0) / iResolution.xy).x - 0.2;", "and you can have it play along with some music.", "jt, 2020-07-24great :-)", "felipunkerito, 2019-04-27Hehe I fighted my NURBS algo for 3 hours today, I'll port it to shadertoy one of these days...", "twenkid, 2017-10-12A modified version: https://www.shadertoy.com/view/Ml2cRD", "Different curve fitting modes are cycling in order to show the differences.", "ollj, 2017-08-30https://www.shadertoy.com/view/Xtscz7", "improved a bit on this one. many minor changes.", "shau, 2016-10-123 Years+ too late but this is a great demonstration of curve fitting. Thanks", "Dave_Hoskins, 2016-08-17Yes, but I expect they would be broken down into their basic parts internally though, like \"smoothstep.\"", "CaliCoastReplay, 2016-08-17It makes me want a next generation of shaders that allow and accept some kind of standard functions for curves.", "", "...plus a next generation tool to create them featuring this shader to render the curves in the modeler.", "", "...hey, I can dream.", "CaliCoastReplay, 2016-08-17That's mega practical, it would be superb in desktop applications that model curves", "cyanux, 2014-07-07Intelligent... au moins un digne d\u00e2\u20ac\u2122int\u00c3\u00a9r\u00c3\u00aat.", "Dave_Hoskins, 2013-10-15Yeah, that shows the tiny differences with the cosine, thanks. BTW as this was not listed for a while, so when I finally made it listed, it first appeared four pages back, which probably explains the small number of views.", "iq, 2013-10-14For 2 knot interpolation, faster than cosine (and still with null first derivatives at the control points), smothstep interpolation: float Smoothsteped(float x, float v0, float v1)", "{", "x = x*x(3.0-2.0*x);", "return (v1-v0)*x + v0;", "}", "Optimus, 2014-10-21So colorful!", "ssdsa, 2013-05-29Nice!", "xavierseb, 2019-04-10Very nice!", "", "One tiny thing, this animation repeats.", "The references to iTime in line 16 and 33 need to be weighted differently from each other e.g. line 16:", "p += an*cos( iTime*1.1 + 100.0*b.yz );", "and leaving line 33 as is.", "FabriceNeyret2, 2016-02-22You should add the tag \"image\", used by the other shaders reproducing some photography,", "+ \"photo\", since too many (195!)  unrelated shader are found under \"image\".", "iq, 2013-05-13( you could have simply uncommented line 16 if you wanted to see the points move  )", "weyland, 2013-05-12As usual iq's got the crazy inspired ideas ahead of everyone else", "WAHa_06x36, 2013-05-11I wanted to try to break it in an amusing fashion so I added this as line 17:", "", "b.y=0.5*sin(2.0*(b.y-0.5)+iGlobalTime)+0.5;", "", "That was even more amusing than I expected.", "", "For my first attempt, I didn't realize what the encoding was, so I wrote this instead, which is also some kind of pretty fascinating effect:", "", "b.x=sin(b.x+iGlobalTime);", "simesgreen, 2013-05-11Very clever, I can see image compression becoming a new genre on shadertoy.com!", "CPU, 2013-05-11i love it!", "ttoinou, 2021-03-15Yes ollj, but can you change the circles into triangle, hexagonal etc. while keeping continuity  ?", "ollj, 2021-03-141./sqrt(a)+b*sqrt(c) (where a,b,c are primes, or at least ingegers) covers a lot of what i label below.", "ollj, 2021-03-14if you ever see a weird float constant (very likely in equilateral triangle lattices) it is likely a", "https://en.wikipedia.org/wiki/Trigonometric_constants_expressed_in_real_radicals", "or a", "https://en.wikipedia.org/wiki/Quadratic_field", "(which includes all metallic ratios)", "", "just try some simple (inverses of) squaretroots, multiplied and offset by 1 ,  or other squareRoots, and you may get an idea, what special case trigonometry is being solved FASTER by estimating CONSTANT fractions of cube-roots.", "", "https://www.shadertoy.com/view/XsBBRd", "speeds up the affo shapoe, by using Trigonometric_constants_expressed_in_real_radicals", "", "https://www.shadertoy.com/results?query=pqfm", "uses quadratic fields, that share no coPrime-factors, for a FASTER hash with MUCH longer (pseudo) periods, that may as well be labeled \"infinite\", as the period is easily much larger than 32bit address space (or even 1024 bit address space, and the visible universe is less than 256 bit \"address\" space (in metric or molar units.)", "ttoinou, 2021-03-14I am taking inspiration and adapting this shader to make a music video clip", "ttoinou, 2021-03-14Thanks ! It is not continuous anymore !", "", "You already have one of the best commented shaders", "Shane, 2021-03-13@ttoinou", "I often write comments in a hurry, so even I don't understand them half the time.   Anyway, I've updated them to make them more comprehensible.", "ttoinou, 2021-03-13I dont understand this comment how to change the code", "// Set the circle radius. For the hexagonal version, use .5/2., and for triangles, .7071/2.", "Shane, 2018-02-21@huttarl", "I was going for a more naive look with this, so the shading on the Truchet pattern was pretty subtle. However, I added just a touch more. The examples I posted after this (\"Arbitrary Weave\" and \"Weaved 3D Truchet\") focused a little more on the lighting side of things. Interestingly, the 3D example was easier to produce than the faux-lit 2D ones.", "huttarl, 2018-02-16Very fun! As always, thanks for very helpful explanatory comments in the code. What about adding a little bit of shading along the sides of the snake, to make it pop more?", "Flavio, 2018-02-02very impressive", "Nimajamin, 2017-11-02Very nice my friend. love it", "arminkz, 2017-10-31hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "PauloFalcao, 2017-10-26Beautiful!", "rigel, 2017-10-25Very nice and polished look.", "jt, 2017-10-25nice!", "Shane, 2017-10-25Thanks, everyone. I like looking at interesting geometric imagery on the net, then trying to reproduce it. This imagery is unique, but draws upon geometrical elements from common patterns - Hexagonal mazes, Truchets, isometric cubes, impossible geometry, etc. Anyway, I put this up hoping others would create some really interesting patterns that I might learn something from.", "", "For anyone not quite familiar with the concepts in this shader, the knowlege could be assimilated in an afternoon - since it's nothing more than applying some basic geometry and very rudimentary Photoshop layering techniques. Geometrically speaking, some circular and hexagonal shape portions are placed at certain spots on a hexagonal grid cell, which is pretty easy.", "", "The rest is application of fundamental steps that the average Photoshop user is familiar with. Render a masked shape layer, apply borders, drop shadows, bevels, etc. In WebGL pixel shader terms, that is just is just a case of correctly applying the \"smoothstep\" function, manipulating distance fields, applying gradients, and so forth.", "bpt, 2017-10-25Very cool!", "Chris_M_Thomasson, 2017-10-25Ohhh, this is very nice. Thank you so much for taking the time to create it! The code is to the point: Well done, and thanks again. :^)", "Duke, 2017-10-24Cool!", "ollj, 2017-10-23coordinate transformations (Cartesian to polar) and regular mod() tiles are the main key for \"animated snakes\"", "", "within a regular (hex) tiling (frame, context) you can then have some hashed irregularity.", "", "the important part is that the remainders of divisions are constant, or linear to a change over time.", "duvengar, 2017-10-23Wow! that's awesome. very cool!", "coyote, 2017-10-23Wow!", "aiekick, 2017-10-22@ttoinou, the dafault license of all shaders in shadertoy is creative common 3.0  like explained in condition sectipn", "flockaroo, 2017-10-22wow thats nice!", "ttoinou, 2017-10-22Beautiful ! What is the license ? =D", "ocb, 2017-10-22Artwork!", "I love your shadow hatch line.", "Shane, 2017-10-22@BigWings", "I had your comment regarding texturing a hexagonal Truchet pattern in mind when making this. This particular example doesn't offer a generalized solution, but it provides a start. If you don't feel like sifting through the code, I explained the moving UV coordinate component in the introduction. In short, I used the distance field value as the radial coordinate, and a wrapped angular component. What I couldn't say is whether it would extend to your generalized example... I'm hoping it does though. I love that example of yours, and I've been meaning to do a less involved version at some stage, so I guess I'll find out when I try it.", "BigWIngs, 2017-10-22Very cool example. Also, the rendering style is really polished. Well done!", "", "I gotta figure out how to generate proper UVs that flow like yours. Maybe going through your shader with a fine tooth comb will help", "TinyTexel, 2017-10-22cool!", "SudoNhim, 2017-10-21beautiful <3", "stb, 2017-10-21Nice!", "aiekick, 2017-10-21love it", "CPU, 2017-10-21Beautiful.", "antonOTI, 2017-10-21Woah", "Great work !", "nilinyi, 2019-03-09Can anyone explain how this is implemented?", "ShadowShader, 2018-09-20Does anyone has tried to migrate this one into Unity?", "I used Shaderman for conversion and I didn't get any error but still I cannot see it working.", "Any clues?", "FabriceNeyret2, 2017-11-20you don't know glsl, right ? ;-)", "line #79: texture(iChannel0,c1) -> texture(iChannel0,fract(c1))", "heliumsoft, 2017-11-20if donot use repeat option, how can i fix this problem by coding?", "thanks for your advice.", "FabriceNeyret2, 2017-11-20see the little gear below the texture chooser ?", "heliumsoft, 2017-11-20thanks for response, but i donot understand well...", "can i tell me more ....", "i cannot find repeat flag..", "FabriceNeyret2, 2017-11-20activate the \"repeat\" flag .", "heliumsoft, 2017-11-20I did changed iChannel0 with any video, but cannot get ripple effect.", "How can i fix it?", "FabriceNeyret2, 2017-04-10no longer compiling in WebGL2.0: \"precision\" keyword no longer allowed", "kiwi_uppa, 2013-04-17Great job!", "PauloFalcao, 2013-04-15Nice", "hnh, 2023-03-02Subtractive synthesis example (in comments): https://www.shadertoy.com/view/Ws3XWl.", "(The given link is a self-reference)", "iq, 2022-09-18You can reduce the number of octaves from 11 to 9 for example, in line 63 (although, I personally think the whole thing should look even rougher rather than smoother.(", "LifeIsGoodMI, 2022-03-01The result is great, but I think it looks a bit rough/steppy close up. How would you go about smoothing the surface slightly?", "Imagyx, 2021-09-14Awesome. Thank you very much for sharing this interesting code with fantastic looking results!", "iq, 2021-07-13I did some tweaks, the shader should run about 1.5x faster now on Chrome/Edge. Unfortunately, the optimization did nothing for Firefox and the shader is still slow in that browser.", "skythedragon, 2021-07-13Very cool idea", "runs at ~46 fps at 800x450 on my gtx 1660 (chrome, windows)", "blackjero, 2021-07-13Great  idea that pushes the terrain visual complexity! It has a super nice Death Stranding quality/feel to it.", "JoshScholar, 2021-06-28That's interesting, because it's sure not 60 fps on an rtx 2060 super, which has double the memory speed of the rx 580 more than double the pixel rate and slightly higher  fp performance.", "morimea, 2021-06-20I can confirm on AMD driver something changed in last 3-6 months, now almost every shader works on AMD much better than on Nvidia, on Nvidia I have 1 FPS in this shader(15 in preview), when integrated AMD Vega 8 show 30fps in fullscreen.", "Firefox case is - they do \"WebGL is run sandboxed\" I feel like they just copy memory from GPU to RAM and back to GPU, that make Firefox WebGL unusable especially in Linux Nvidia driver.", "Infradragon, 2021-06-20im using an rx580 on linux, and this is running 60fps at 1080p!!!", "iq, 2021-05-18Hm, it seems something changed in the DirectX compiler lately and indeed this shader run very slow now (it run at decent speed in the laptop where I coded it but now I found it to be very slow on my much more powerful desktop).", "", "So, I've taken a pass at some basic optimizations, I got it to run 4x faster - or 32 fps again in my PC. However, these optimizations only seem to work on Chrome and Edge, for some reason Firefox still runs this shader at 13 fps. So, it definitely has to do with the particular flags each browsers uses for the HLSL compiler.", "chrisjj, 2020-02-23Crashes WebGL here.", "JoshScholar, 2019-12-02really slow on an rx 470, is it faster on nvidia?", "Shane, 2019-11-21This is a really pretty looking scene.", "", "I know how to make some pretty interesting surfaces, but like everyone else, frame rate has been the issue, so I've have been limited to value noise, etc. Things that involve a lot of calculation -- like 3D Voronoi -- has been out of the question. Anyway, I've been playing around with the cubemap feature lately, just to see what's possible. The upside is that you can precalculate some pretty complex surfaces without having to worry about frame rate. The downside is resolution and the need to interpolate between 8 voxels, etc. Having said that, I'm pretty sure there'd be ways around it.", "pik33, 2019-11-18It's heavy. Radeon HD 7950+Ryzen 3600 + 800x450 window = 5..9 fps", "morimea, 2019-11-18look good", "(3fps not fullscreen xD)", "shau, 2019-11-18Looks real", "kuvkar, 2019-11-18looks really good", "ShnitzelKiller, 2019-11-18The motion blur kind of makes it harder to see anything.", "markusm, 2019-11-18Best looking realtime procedural rock formations I have seen so far. Perfect for modeling. Thanks for putting this under the MIT.", "FabriceNeyret2, 2016-07-23FYI: I've just settled a blog to gather advices about shadertoy GLSL programming and compatibility/bug issues.https://shadertoyunofficial.wordpress.com/", "Enjoy !", "( And don't hesitate to give the link when fed up explaining 2^128 times the same thing ;-) . )", "fb39ca4, 2016-07-12Just curious, how would points have been assigned in the event of a tie?", "iq, 2016-07-12Results are available! https://www.shadertoy.com/events/competition2016. You'll see both the results of the challenge #1 with link to the shaders and char sizes, and also the global competition ranking. I hope you guys are having fun with the second challenge.", "", "poljere & iq", "pyBlob, 2016-07-11at least its raytracing :-p", "FabriceNeyret2, 2016-07-10that's 111 too much :-p", "pyBlob, 2016-07-10finally did that raytracer in <777 chars =)", "fb39ca4, 2016-07-10Last week's theme was size and this week's is speed, so is next week's going to be strength?", "iq, 2016-07-10We just finished taking different snapshots of the database, we'll spend the next two days processing all the entries and publishing the results in https://www.shadertoy.com/events/competition2016.", "", "In the meanwhile, get started with the second challenge, published now in the same page!! Also, use this shader to ask or comment on the second challenge!", "", "", "(this was an amazing experience, we have learnt quite a few tricks about size coding optimizations, thanks everybody!)", "", "poljere & iq", "poljere, 2016-07-10Alright, thank you everyone! We are now collecting all the shaders  Stay tuned for the next challenge which will be available in the next few minutes. We will post again soon with more details!", "fb39ca4, 2016-07-10Well done, everyone. I never thought we would get this far just three days ago.", "P_Malin, 2016-07-10Well, when I say 'hacked' I was just playing around with the client side code and changing the url variable in the debugger, not saving or anything. As it was loading an image from shadertoy there were no cross origin issues.", "Preview images are in the format:", "https://www.shadertoy.com/media/shaders/<ShaderHash>.jpg", "e.g.", "https://www.shadertoy.com/media/shaders/MdKXD3.jpg", "knarkowicz, 2016-07-10@iq @poljere Can we hardcode 1080p res into our shaders?", "knarkowicz, 2016-07-10@P_Malin How it's possible to hack texture input to set another shader preview there?", "knarkowicz, 2016-07-10@pyBlob yes it's possible, but I couldn't go below 600 chars with that design.", "P_Malin, 2016-07-10I hacked the texture input to use the reference shader preview but it was not a power or two", "pyBlob, 2016-07-10@knarkowicz, btw. I have implemented raytracing, and while spheres get a bit smaller, it passes 1% =)", "FabriceNeyret2, 2016-07-10fb39ca4 \"I wanted to try loading in an image from Soundcloud\": nice try :-)", "fb39ca4, 2016-07-10iq, feel free to use my shader comparator code if you want to implement something to evaluate RMS. I didn't realize Shadertoy had floating point buffers so I was packing integers into 8 bits per channel, but it is pretty straightforward to change that so you can sum arbitrary value(s) from each pixel.", "lovelyH, 2016-07-10I just realised that Resemble.js is resetting settings to default (Ignore less) after you drag and drop image, but it's still showing you settings that you selected (Ignore nothing).", "To see right result you need to click \"Ignore less\", and then again \"Ignore nothing\".", "I just spend whole night optimising code that is giving wrong result", "iq, 2016-07-10fb39ca4, knarkowicz, good points. We might consider RMS next time.", "fb39ca4, 2016-07-09Agreed. I wanted to try loading in an image from Soundcloud like and's OilArt shader, but having it be pixel perfect would probably exceed the Soundcloud upload time limit (6-something hours for paying users) for a very simple (since the code has to be short) encoding scheme.", "knarkowicz, 2016-07-09It's a pity that we have this fixed 1% pixel rule. I think RMSE or some perceptual metric would give us a large search space and more diverse tricks and entries (I tried ray-traycing, but this rule just kills it). Anyway this is pure fun and I'm still banging my head against the wall trying to shave off at least one more char. I wonder if there is any lurker with a better entry waiting for the last moment.", "FabriceNeyret2, 2016-07-09facebook URL to list of shaders:", "this is typically in this circumpstances that it would be usefull to display the shader length under the icon, and offer to sort by shader length ;-)", "fb39ca4, 2016-07-09Default settings, got it.", "iq, 2016-07-09fb39ca4, this is regular WebGL, straight as people see it without bypassing ANGLE and doing native DirectX or anything like that.", "pyBlob, 2016-07-08nice, found it, thanks =)", "fb39ca4, 2016-07-08pyBlob, it's the one to the left of Nyan Cat. The selection screen previews don't show alpha, but the iChannel buttons do, and this texture has a random alpha channel.", "pyBlob, 2016-07-08how do I get that iChannel0 texture into my own shader? it doesn't show up in the texture selection screen.", "FabriceNeyret2, 2016-07-08And I personally want the test to also be run on a PDP11  using the last nVIDIA board :-p", "fb39ca4, 2016-07-08poljere, thanks for updating the rules with the test hardware. However, there's a couple more clarifications I'd like to have made: Is Chrome on Windows using ANGLE or native OpenGL? Are the laptops set to run the browser with the Nvidia GPU rather than the (presumably Intel) integrated GPU?", "fernlightning, 2016-07-08ah! Thank you. This macbook air's screen is only 768 high and html layout is doing something stupid to fit..", "FabriceNeyret2, 2016-07-08don't forget to check Vflip in the texture ;-)", "fernlightning, 2016-07-08Hmm... Feeling stupid here - I can't seem to just copy-n-paste this shader as the texture on the ground always looks slightly different from this page.. I chose the 256x256 rgb noise tex and ensure mip&repeat.", "Is there some other setting somewhere?  - safari 10.11.5", "Neper, 2016-07-08Thanks, for clarifying that. I won't copy fb39ca4's shader then. ;-)", "poljere, 2016-07-08@Neper & @fb39ca4 : Great questions! We have updated the rules to clarify the machines that will be used, please check the website of the competition for more details https://www.shadertoy.com/events/competition2016. Also, regarding the question about submitting multiple shaders: Please submit one per user, as @fb39ca4 said, submit the work that primarily represents your work.", "", "poljere & iq", "Neper, 2016-07-08Oops, typos:", "...how the originality will be judged?", "Neper, 2016-07-08But my question was, can I submit two?", "", "If I don't know how to originality will by judged, I would like to submit both the more original version and the copycatted version.", "fb39ca4, 2016-07-08iq said in an earlier comment that originality was going to be taken into account. I'd submit the shader that primarily represents your work.", "Neper, 2016-07-08Is it so that one person can submit only one entry to the competition?", "", "I am asking, because I could get smaller code by copying an other persons whole code and making minor modifications to it. On the other hand, I would like to keep my code that I have optimized line by line beginning from the reference shader. Because the rules are not unambiguous about the originality aspect of the judging, I would like to submit two versions: the copycatted and the handmade one.", "fb39ca4, 2016-07-07Can we know what hardware and software is going to be used to test the shaders? I just want to make sure mine is accurate enough, because it is pretty close to the 1% treshold, and the accuracy varies on the different systems I have tested it on.", "david_k, 2016-07-07Here is my version. It not the shortest (716 chars, 0.51% error) but it feels like I reached the limit for how short I can make it with the current design.", "https://www.shadertoy.com/view/MlcGzH", "iq, 2016-07-06Guys, thanks to FabriceNeyret2 and others, we fixed a couple of bugs in the minification code. The char counts might have changed a little bit for you (probably about + o - 2 chars), but now the minified code is legal and compiles as expected. Sorry for the inconvenience!", "", "iq & poljere", "FabriceNeyret2, 2016-07-06spoiler ! :-)", "lovelyH, 2016-07-05OMG. I will never notice that red and green channels are moved same picture. Thanks fb39ca4 for hint.", "fb39ca4, 2016-07-05I finally understand what is going on with the other shaders' texture problems. Firefox seems to be handling color spaces differently, so the same stored value in the R and the G channel gets read differently by the shader. I was slow to realize that the green channel of the noise texture was the red channel shifted (37,17) pixels so I did not make that optimization and never experienced the problem with my own shader.", "iq, 2016-07-05It works great in my machine, super amazing you broke the 700 chars wall.", "", "On the format, points will be given based on the size of the shaders (exact rules for assigning points to come soon). Taking the originality of the contributions is our little way to make sure that not too unfair things happen in the last minute. We'll do our best, and we'll keep iterating on the rules as we organize more compos. What's for sure is that sharing (which is voluntary) does introduces a great deal of interesting dynamics among the competitors.", "", "Thanks for the understanding!", "", "poljere & iq", "stubbe, 2016-07-05iq: I just decided to fuck it and submit my contribution. I haven't hit my minima yet, but it seems to currently be the smallest, if it actually works for anyone else than me :/", "https://www.shadertoy.com/view/4td3zr", "FabriceNeyret2, 2016-07-05@iq:", "I was surprised that resemble.js gives an error 10 times lower than via difference in gimp, so I though it was RMS (I could find the source portion doing the maths). But it might instead be due to the fact that we have to convert to png or jpg to use the tool ;-) .", "Comparison using 2 layers: neats idea ! (still have to do the sum).", "", "1920x1080 target resolution: ok, it's crucial to test at this resolution since any camera path code rearangement can introduce a systematic small direction bias. (especially if the origin no longer contains 3cos5 and 3sin5 ;-)", "stubbe, 2016-07-05iq: \"poljere: We do encourage everyone to share as much as you want but it is a competition at the end of the day  We will grab the shaders at the time of the deadline and verify which ones are under 1% pixel difference, from those we will check which ones are the ones with less characters.\"", "So which one is it? Are you supposed to publish your findings immediately before anyone else find them in order for you to get originality points or are you supposed to keep them until the end to be one byte shorter?", "stubbe, 2016-07-05iq: \"Judging will be difficult with these rules, but as said, we'll consider originality of the contributions and judge appropriately.\", ehm, ok", "stubbe, 2016-07-05iq: That is fair, but if the focus is on collaboration why frame it as a competition in the first place? Picking a winner at the end seems particularly weird if it is not actually what this is about. I think it is a real shame as I got genuinely excited when I saw this announced, but now it just seems silly. I hope you will consider hosting a \"real\" competition at some point.", "fb39ca4, 2016-07-05iq, how about running a competition like this one in two stages? During the first round, people work on the challenge privately to try and get the lowest code size independently. Then, they publish and a winner for the first round is announced. In the second round, competitors again work privately, but they are able to draw on ideas and techniques used in the first round, making it a competition of who can most effectively combine techniques. This way preserves the integrity of the competition, but still allows for ideas to be shared.", "poljere, 2016-07-05@lovelyH yes, if you want to do that you can absolutely do that.", "iq, 2016-07-05Stubbe, unlike in an intro compo, we are not solely interested in the competition part. Or maybe a better way to put it is that, we are interested but we know how those work already, so there's nothing new to discover. In this competition we are trying to encourage the collaboration that happens naturally in Shadertoy and pushes each other further for a period of a few days. If people keep their code till the last minute, the winner will probably settle in something that is less optimal than if he gets inspired and challenged by seeing what others are doing to their shaders and their own.", "", "Judging will be difficult with these rules, but as said, we'll consider originality of the contributions and judge appropriately. Not easy, but we'll do our best. We'll see, this is a fun social experiment, we are very happy with how it's going, we hope the participants are too! Still things to learn.", "", "As knarkowicz said down there, maybe a good compromise would be to let a 3 days of non-publishing period for each participant to reach their local minima (self challenge), and then open the codes so there's cross-pollination of ideas and randomness to the optimization descent and all the social fun (group challenge). We'll consider this for the next challenge (next week!)", "iq, 2016-07-05fb39ca4, the check will be done in HD (1920x1080), added to the rules. You can use ANY features of Shadertoy, feel free to add textures or hack as much as you can - this is a Shadertoy Competition, not a generic 1k intro coding compo. For the same reason, feel free to do an incremental renderer if you feel like. The rules say nothing about rendering speed, all we'll do is to compare the final image with the reference pixel to pixel and count differences.", "iq, 2016-07-05Fabrice, we never talked of RMS.", "", "For all, \"different\" pixels means the two pixels have not equal. For example (78,13,210) and (79,13,210) are not equal and hence this counts towards the final % of different pixels. You can use the image comparison website we linked to in the event page. Something that works for me during play is to you create a shader with two passes, put the reference image in the first, your in the second, and you truncate and clamp your pixels to 0..255 and compare.", "fb39ca4, 2016-07-04I  had sent these questions in an email earilier but I realized it would be better to send them here:", "", "Can we use additional features of Shadertoy, such as multipass or audio input, or must we have the same configuration as the reference shader, with only the image pass and the same 256x256 random RGBA texture?", "", "Will the output of our shader be compared at 1920x1080 to the reference image, or will it be compared to the reference shader in the non-fullscreen resolution? Can you reveal what the hardware and software configuration of the test machine is? (What GPU, OS, browser, driver version?)", "", "Is it okay for our shader to take time to converge to the final output, or must it display the final image from the beginning?", "lovelyH, 2016-07-04OK. That's explain a lot. Thank you poljere.", "So no publishing until 2016-07-10 11:58 Pacific time, witch if I'm calculating correctly will be 2016-07-10 19:58 in London.", "FabriceNeyret2, 2016-07-04Please define what 1% difference means : the 2 indications you gave in the instructrions are contradictory (one is the proportion of not-equal pixels, the other is apparently the RMS).", "And giving the target resolution is also important.", "poljere, 2016-07-04We do encourage everyone to share as much as you want but it is a competition at the end of the day  We will grab the shaders at the time of the deadline and verify which ones are under 1% pixel difference, from those we will check which ones are the ones with less characters.", "poljere, 2016-07-04It HAS to be under 1% error.", "Neper, 2016-07-04How strict is the 1 % error tolerance? I got 1.26 % error with a shader that removed some artifacts on the silhouettes of the spheres (in addition, it is faster and smaller). Should we aim to reproduce the defects on the silhouettes?", "FabriceNeyret2, 2016-07-04@iq:", "also, if the result differs between the 3 main platform (windows angles, linux opengl, macOS), will you consider the best case ? or should it works everywhere ? (in the later case, it is then better to let users test... but will they test every subscriptions ?)", "david_k, 2016-07-04FabriceNeyret2: Good question, I'm at 0.46% error right now, mostly because of the silhouette pixels. (Counting the number of pixels that doesn't exactly match the RGB8 values of the reference image).", "stubbe, 2016-07-04Cool, but the rules are very silly. What is the point if everybody can just copy-paste from each other? How will you determine who the winner will be? The guy who contributed the most improvement during the competitions or the guy who improving his best solution by 1 byte? If it is just whoever has the smallest solution when the deadline hits, then there is really no incentive to share anything before. In my opinion the only sensible way to do this would be to not reveal the source before the end of the competition.", "knarkowicz, 2016-07-04IMHO there should be a rule, which prevents publishing early. I'm progress very slowly (work & kids) and I'm afraid I can arrive at very similar solution as one of the early shaders.", "FabriceNeyret2, 2016-07-04Hi guys !", "", "@iq:", "", "About the acceptability metrics:", "", "- for which resolution ? (e.g. errors on silhouettes have larger effect on small window, slight positioning error has more effect at full screen).", "", "- do you mean 99% of pixels must be exactly egal (as your text says) ? or the RMS error (i.e. the average difference) be less that 1% (as I understand resemble.js measure) ?", "P_Malin, 2016-07-04The rules say:", "", "Feel free to publish your shaders any time during the week, we embrace collaboration and will value the original entries appropriately regardless of forked or adapted versions that might come as a result.", "", "But yes, it will probably hard to judge.", "TekF, 2016-07-04Dumb question - if I copy someone else's version of this shader and I make it 1 char shorter, do I win because mine's shortest even though other people did most of the work? It seems like it's going to be hard to figure out who gets credit for this.", "", "(Though I'm probably going to skip this round because there's no artistic element, which is what I enjoy.)", "david_k, 2016-07-04Do I need to explicitly init variables to zero even if i don't get any errors by not doing it? \"Vec3 v;\" instead of \"Vec3 v = vec3(0.0);\"", "dr2, 2016-07-04EEBOO: Enhancing Erudition By Obviating Obfuscation", "", "In the good old days even a 1-line APL program was considered long; what's new?", "", "Suggest banning #define and 1-character global variables in future competitions to emphasize algorithmic aspect", "", "(Let the flamewars begin)", "reinder, 2016-07-04Anyway, you can find my shader here. I'm going to get some sleep", "reinder, 2016-07-04I'm down to 857 chars (but still WIP). Is it a good idea to publish work-in-progress shaders now, or should I wait until later this week?", "Dave_Hoskins, 2016-07-04Nice work, now you need to publish so we can make it smaller!", "This competition is weird.", "fb39ca4, 2016-07-04I'm down to 1861 characters. There's quite a lot of dead code, code that does nothing but waste time, and code that could be replaced by loops or built in functions. Still have yet to shorten names and create 1-character defines for keywords and builtin functions.", "iq, 2016-07-03aiekick, it's code size reduction, not performance.", "lovelyH, 2016-07-03The counter at bottom of page doesn't count comments, spaces, and enters.", "So I'm afraid that removing comments is not enough.", "Sorry Shadosaurus.", "lovelyH, 2016-07-03challenge accepted.", "Shadosaurus, 2016-07-03I removed the comments, is that enough? (Just kidding.)", "fb39ca4, 2016-07-03Why is the static preview upside down but the live preview the correct orientation?", "aiekick, 2016-07-03we talk about code golf or minimal exec time of the shader ? (because code gold is not always better for exec time)", "Dave_Hoskins, 2016-07-03Shall we just give it to Fabrice right now!?", "Sabouh, 2016-07-03I will try.", "reinder, 2016-07-03 nice!", "sylvain69780, 2023-04-29Hello here to all \"Stand-up Maths\" fans !", "https://www.youtube.com/watch?v=A0L_PZwuGHY&t=1070s", "ollj, 2023-04-27say hi to youtube-feature https://youtu.be/A0L_PZwuGHY?t=1068", "grey_shades, 2023-04-26beautiful! Shoutout to Matt for showing it off!", "ollj, 2020-07-21this always does 3 divisions, 9 dot()", "", "https://www.shadertoy.com/view/wtScWV", "is Semibaricentric, uses barycentric coordinates, only for lots of branches, to predict nearest lines for raymarching before min() of (mulriple) squared lengths.", "Semibaricentric solving paths have 2 to 4 divisions, 3 to 9 dot, and variables have smarter scopes.", "The Inside of the Semibaricentric triangle is computationally more complex (than the outside)", "Is it a faster smarter way, that could need a benchmark?", "demofox, 2018-08-02Seconded!", "Trisomie21, 2014-04-10Random comment: but when I think SDF, one 'name'rings... IQ", "Thank you for plotting the course.", "", "Marco...", "iterationsteppa, 2014-08-09i find a smoothstep function to mediate the if(zone1,color1) if(zone2,color2) sharp textures, so good for AA.", "Trisomie21, 2014-07-29M s f X D S", "Trisomie21, 2014-07-29Not sure why the link paste \"funny\"", "https://www.shadertoy.com/view/MsfXDS", "Trisomie21, 2014-07-29You can also do that for the silhouette of ray marched surface", "Proof of concept (math no accurate) https://www.shadertoy.com/view/MsfXDS", "", "Who will be the first to put all this together ?", "nimitz, 2014-07-29Nice short demo. Same idea can be used for 3d surfaces (for both planes and manifolds): https://www.shadertoy.com/view/4sfSzf", "iq, 2014-07-19That is a very good question, I don't know if a smoothtep (cubic) or a ramp (linear) is better. My intuition fails me in this case", "Trisomie21, 2014-07-19A 'stress test' version to play with: https://www.shadertoy.com/view/XdlXzl", "Left side show screen space distance and linear coverage, right side is as presented here (fwidth + smoothstep)", "", "Unless there is a bug, the left side look better to me (in this test case).", "Trisomie21, 2014-07-18I didn't think about distances in a deformed space, so yes I can see that what I outlined is limited and not a general method.", "Then I might have also missed something about the benefit of using smoothstep() to evaluate the pixel \"coverage\".", "So why note use this ?", "float w =1./fwidth(d);", "col = mix( vec3(0.0,0.0,0.0), col, clamp((d-.12)*w, 0., 1.) ); // black", "", "Is the scurve notably beneficial?", "iq, 2014-07-18( you can easily see how your shortcut breaks if you do 1.0/iResolution.x; in line 52 instead of 0.5*fwidth(d) and then you add p.x += 0.2*sin(10.0*p.y); in line 17 )", "iq, 2014-07-18The method is correct. You DO need derivatives.", "", "Screen space distances only work if you are working with euclidean distances (which I am in this particular case). If you are doing any other sort of procedural shape, your method won't work anymore. For example, add p.x += 0.2*sin(10.0*p.y); in line 17 and your method no longer works (more info on the topic here: http://iquilezles.org/www/articles/distance/distance.htm).", "", "Your method only works in the cases of distances because the derivative of distance with respect to distance is 1.0. If you are doing procedural modeling, you need fwidth(). There are a few Siggraph papers on the topic as well you can have a look to.", "Trisomie21, 2014-07-18Right side is the AA method in this code unchanged,", "left side is AA using screen space pixel coverage approximation. (no smoothstep(), no derivative)", "https://imagizer.imageshack.us/v2/894x503q90/538/e62517.png", "Trisomie21, 2014-07-18To me the result of the AA look incorrect, and the method seem incorrect as a whole.", "", "And you dont need to use derivatives in this case, use screen space distances and compute the pixel coverage in linear color space.", "", "To check the accuracy, change you colors to use black on white (and also white on black), and make the outline 1 pixel thick on 1 pixel thick lines then use 3 and 3. You will notice that all three version are visually incorrect.", "Aliasing but also the distances are incorrect.", "iq, 2014-07-18Yeah, I can agree with that. But indeed, in this LDR images the difference is small.", "", "Luckily material/albedo patterns/textures are rarely HDR, and filtering in linear space is probably the right thing. However, for HDR image antialiasing (once lighting has introduced HDR) I'd say filtering (supersampling) should happen after gamma/tonemapping, in final display-color space...", "mmalex, 2014-07-18if you remove the 'extra blur', to make the reconstruction kernel tighter, I think the difference is more obvious. to my eye, eg the AA near the tops of the black circlular regions is 'rounder' and 'smoother' in linear space (top right) than in srgb (bottom right).", "mmalex, 2014-07-18I dont think I could pick a winner in a randomized trial  funny, I was just talking at work about whether an AA resolve was 'properly' linear or not. at least for 'low dynamic range' like this, your shader shows that it hardly matters. thanks for making the tweak. a negative/inconclusive result is as interesting (to me) as a 'positive' one.  I was surprised how subtle the difference is.", "iq, 2014-07-18Now the top right corner does filtering in linear (pre-gamma) space. It's difficult to tell if it helps...", "", "You can move now areas of aliasing with the mouse and check yourself. What do you think?", "mmalex, 2014-07-18really nice didactic shader", "I can't really decide if this is a win, but would it be nicer if you did al linear->srgb conversion at the end? (pow(col,vec3(1./2.2)) in the output colour, it breaks your colour choices but I *think* the AA looks a bit nicer. meh, it's kinda moot with this little dynamic range.)", "FabriceNeyret2, 2018-02-07@coyote: \" s *= mat; is bugged in Firefox's GLSL compiler [on Windows] \": uh, not on nVidia I would say, or many shaders would be broken !", "FabriceNeyret2, 2018-02-07safari is not webGL2 compatible, I guess http://webglreport.com/?v=2", "vincivince, 2018-02-06not working in Safari 11.0.3, OSX High Sierra.(10.13.3)", "coyote, 2018-02-05@Fabrice, good point about the order of executions in sin(sin(sin... !", "", "I've just tried it with Chrome and Firefox on Windows 7 machine.", "Firefox did ok with the original sin(q+sin(q+... order, but Chrome running on intel gfx needed Fabrice's order, so, Greg, I think you should listen to Fabrice and change it. ;)", "Btw, Chrome with nvidia on the same computer worked good with the both orders...", "", "However, Firefox had a different problem which I remember stumbling upon once before:", "s *= mat; is bugged in Firefox's GLSL compiler!", "It must be written \"s = s * mat;\" to work properly... So both matrix multiplications must be changed and this adds like dozen chars more.", "It would be nice if someone with Windows 10 could check it too.", "", "Finally, both browsers on windows (and mac!) have problems with adding the last instruction within the for loop. Of course, I tried it before on mac mini and I got like 10 compile errors about \"use of undeclared identifier\", and while on windows there were only one or two errors, neither browser managed to compile the source.", "GregRostami, 2018-02-04I was wondering when coyote would join the fun. Thank you coyote for your contribution. I updated the shader.", "FabriceNeyret2, 2018-02-03sin(q+sin(q+sin( q= s+s+t ).y).z).x :", "to be sure it work on all OS, you should first let q= s+s+t  appears then other q:", "sin(sin(sin( q= s+s+t ).y +q).z +q).x", "", "BTW the last slot of for(;;) can now be used to store the last command", "-> -1", "coyote, 2018-02-03350 chars:#define m *= mat2( cos( vec4(0,33,55,0) + t*", "", "#define M \\", "( s.xz m.4)), s.xy m.3)),        \\", "length(s+sin(t*.7))*log(length(s)+1.) + sin(q+sin(q+sin( q= s+s+t ).y).z).x*.5 - 1. )", "", "#define mainImage(o,u)\t           \\", "vec3 q,p,s, R=iResolution;      \\", "for( float t=iTime, d=2.5, r; R.z++<7.; ) \\", "s = p = vec3( ( u - .5*R.xy ) /R.y * d , 5.-d ),        \\", "d += min( r = M, 1.),                     \\", "s = p + .1,                   \\", "o += max( .7-r*.28 ,0.),   \\", "o *= vec4(.1,.3,.4,0) - vec4(10, 5, 6,0) * (M-r) /4.", "coyote, 2018-02-03Nice work guys!", "", "Btw, -1 char:    for( float t=iTime, d=2.5, r; R.z++<7.; ) \\", "p = vec3( ( u - .5*R.xy ) /R.y * d , 5.-d ),        \\", "d += min( r = M, 1.),                     \\", "GregRostami, 2018-02-02I think the red spot is COOL!! I updated your changes.", "FabriceNeyret2, 2018-02-02the case where min( M-r,.2) is useful is very rare.", "at t = 34 then at t = 97 only it prevent a short and small red spot on the shape.", "-> ( M-r) saves 6 char.", "FabriceNeyret2, 2018-02-02-1:  p = vec3( ( u - .5*R.xy ) /R.y * d , 5.-d ),", "FabriceNeyret2, 2018-02-02well, line 7 and rotations matrix or only rotating the object, not changing its look.", "But they are part of the \"initial shader effect\", so its no point in suppressing them if what you wan't is just golfing.", "", "without the rotation, trimming all unused kills 65 chars,  leading to 294 chars in tottal.", "GregRostami, 2018-02-02I wonder how close we can get to the original shader without the rotation matrix.", "GregRostami, 2018-02-02Fabrice ... you are truly the JEDI MASTER!!", "I've updated your changes. I can't thank you enough for your amazing contribution to Shadertoy.", "You can golf every shader to NIRVANA!!!", "FabriceNeyret2, 2018-02-01-1:  vec4(10, 5, 6,0) * min( M-r,.2) /4.", "FabriceNeyret2, 2018-02-01-1:  #define m  *= mat2(", "", "-1:  +max(r-M,-.2) -> -min(M-r,.2)", "", "-3: replace i by R.z", "", "-> 363 chars:", "#define m  *= mat2( cos( vec4(0,33,55,0) + t*", "", "#define M                          \\", "( s=p,                           \\", "s.xz m.4)), s.xy m.3)),        \\", "q = s+s+t,                     \\", "length(s+sin(t*.7))*log(length(s)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "", "", "#define mainImage(o,u)\t           \\", "vec3 q,p,s, R=iResolution;      \\", "for( float t=iTime, d=2.5, r; R.z++<7.; d += min(r,1.)) \\", "p.xy = ( u - .5*R.xy ) /R.y * d,                        \\", "p.z = 5.-d,                \\", "r = M,                     \\", "o += max( .7-r*.28 ,0.),   \\", "p += .1,                   \\", "o *= vec4(.1,.3,.4,0) - vec4(5, 2.5, 3,0) * min( M-r,.2) *.5", "FabriceNeyret2, 2018-02-01-5 (stat being ugly): suppress parameter of m", "", "#define m  mat2( cos( vec4(0,33,55,0) + t*", "", "#define M                          \\", "( s=p,                           \\", "s.xz*= m.4)), s.xy*= m.3)),    \\", "...", "FabriceNeyret2, 2018-02-01-2: t=iTime can be done directly at t declaration", "", "-6: suppress parameter or M (by adding p+=.1 in main).", "", "", "-> 373 chars:", "#define m(a) mat2(cos(t*a+vec4(0,33,55,0)))", "", "#define M                          \\", "( s=p,                           \\", "s.xz*= m(.4), s.xy*= m(.3),    \\", "q = s+s+t,                     \\", "length(s+sin(t*.7))*log(length(s)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "", "", "#define mainImage(o,u)\t           \\", "vec3 q,p,s, R=iResolution;      \\", "for( float t=iTime, d=2.5, r, i=0.; i++<6.; d += min(r,1.)) \\", "p.xy = ( u - .5*R.xy ) /R.y * d,                        \\", "p.z = 5.-d,                \\", "r = M,                     \\", "o += max( .7-r*.28 ,0.),   \\", "p += .1,                   \\", "o *= vec4(.1,.3,.4,0) + vec4(5, 2.5, 3,0) * max( r-M, -.2) *.5", "FabriceNeyret2, 2018-02-01-2:    max(( r-M(p+.1) )*.5, -.1)  -> max( r-M(p+.1), -.2) *.5", "FabriceNeyret2, 2018-02-01-5:", "apparantly the smoothstep is almost equivalent to a simple linear remap & clamp, and the clamp is only needed on the 0 side. -> max( (r = M(p))/-2.5+1. ,0.)", "which rewrites", "r = M(p),                  \\", "o += max( .7-r*.28 ,0.),   \\", "FabriceNeyret2, 2018-02-01yep !", "GregRostami, 2018-02-01I just updated your changes. Please let me know if this is correct or not. Thank you.", "FabriceNeyret2, 2018-02-01the effect was exactly what you saw when copying my version without s, since I only trimmed the unused part. And I did just copied it right below.", "GregRostami, 2018-01-31I understand what you're saying ... when I remove the rotation matrix, I get something that's very different.", "If you could please post your 315 char version, I'll be able to see what the differences are.", "FabriceNeyret2, 2018-01-31( and even #define m(a) was no longer used, so trimmable )", "FabriceNeyret2, 2018-01-31the *wrong* version, which was not using the computed rotation, could be trimmed of these:", "#define M(p)                       \\", "( t=iTime,                  \\", "q = p+p+t,                     \\", "length(s+sin(t*.7))*log(length(s)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "", "but then it keep wrong, not doing what the original version was doing.", "GregRostami, 2018-01-31I updated your changes, but I'm now at 387 chars ...", "In your previous post you said you can trim the unused code to 315 chars?!", "What am I missing?", "GregRostami, 2018-01-31How do you get to 315 chars?", "FabriceNeyret2, 2018-01-31my previous formulation of M() ( = your current version ) was wrong. see: q is computed with rotations the ignored. I gave the replacement below. + var s to add to vec3 declaration", "GregRostami, 2018-01-31I don't understand your last update?", "FabriceNeyret2, 2018-01-31oops, I missreplaced variables. s is necessary, and", "#define M(p)                       \\", "( s=p, t=iTime,                  \\", "s.xz*= m(.4), s.xy*= m(.3),    \\", "q = s+s+t,                     \\", "length(s+sin(t*.7))*log(length(s)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "", "", "indeed the current version was not really using rotation results, and can be reduced to 315 by trimming the unused code :-)", "GregRostami, 2018-01-31I didn't think you could do it again. WOW! Thanks again. I updated your changes.", "FabriceNeyret2, 2018-01-31PS: you should avoid tabs since these change with users", "FabriceNeyret2, 2018-01-31-2: my s was useless, your temporary q can be used", "", "vec2(.9,.5) : ugly.", "same length:", "vec3 q,p, R=iResolution;  in main", "p.xy = ( u - .5*R.xy ) /R.y * d,", "", "the clamp cost 14 and only supresses one rare red spot", "anyway max( , -.1) seems sufficiant ( -4 chars", "", "-> 385 chars:", "#define m(a) mat2(cos(t*a+vec4(0,33,55,0)))", "", "#define M(p)                       \\", "( q=p, t=iTime,                  \\", "q.xz*= m(.4), q.xy*= m(.3),    \\", "q = p+p+t,                     \\", "length(p+sin(t*.7))*log(length(p)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "", "", "#define mainImage(o,u)\t           \\", "vec3 q,p, R=iResolution;        \\", "for( float t, d=2.5, r, i=0.; i++<6.; d += min(r,1.)) \\", "p.xy = ( u - .5*R.xy ) /R.y * d,                  \\", "p.z = 5.-d,                                       \\", "o += smoothstep(2.5, 0., r = M(p) ) *.7,          \\", "o *= vec4(.1,.3,.4,0) + vec4(5, 2.5, 3,0)*max(( r-M(p+.1) )*.5, -.1)", "FabriceNeyret2, 2018-01-31-2 #define m(a) mat2(cos(t*a...", "then del t* at use", "", "-2: move float declaration in for() and make i a float", "for( float t, d=2.5, r, i=0.; i++<6.; d += min(r,1.))", "FabriceNeyret2, 2018-01-31you did not push all my requests ;-)", "", "-1: d += min(r, 1.)  as last command of for(;;)", "for(int i=0; i++<6; d += min(r, 1.))", "-4: make M a macro", "#define M(p)                       \\", "( s=p, t=iTime,                  \\", "s.xz*= m(t*.4),s.xy*= m(t*.3), \\", "q = p+p+t,                     \\", "length(p+sin(t*.7))*log(length(p)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "and add s to vec3 declaration", "FabriceNeyret2, 2018-01-31you did not push all my requests ;-)", "", "-1: d += min(r, 1.)  as last command of for(;;)", "for(int i=0; i++<6; d += min(r, 1.))", "-4: make M a macro", "#define M(p)                       \\", "( s=p, t=iTime,                  \\", "s.xz*= m(t*.4),s.xy*= m(t*.3), \\", "q = p+p+t,                     \\", "length(p+sin(t*.7))*log(length(p)+1.) + sin(q.x+sin(q.z+sin(q.y)))*.5 - 1. )", "and add s to vec3 declaration", "GregRostami, 2018-01-31Thank you very much for your help Fabrice. I updated your changes.", "FabriceNeyret2, 2018-01-31-1: mat2(cos(a+vec4(0,33,55,0)))    ( stored in shader \"shortest rotation\" )", "", "\"while\" is always a waste. use for(declarations; i++<6.; commands) commands", "", "{} not necessary", "", "-3", "p.xy = (u/iResolution.y - vec2(.9,.5))*d;\t\\", "p.z = 5.-d;\t\\", "", "M() can't be a define ?", "GregRostami, 2018-01-31Thank you BigWings. I updated your changes.", "BigWIngs, 2018-01-311.-smoothstep(0., 2.5, r) -> smoothstep(2.5, 0., r)", "renaudbedard, 2018-02-05Yeah... in retrospect, this version is better (not mine) : https://www.shadertoy.com/view/4sc3D7", "ttoinou, 2016-10-18This doesn't look realistic :-( . It would be great to keep luminosity constant for example", "renaudbedard, 2014-09-24Good point! Ported that over, it's a bit nicer now", "CeeJayDK, 2014-09-23Ian Taylor has collected a lot of fast color conversion algoritms here : http://www.chilliant.com/rgb2hsv.html", "", "The HSL algorithms there should be faster then the one you are currently using.", "renaudbedard, 2014-09-22Yup, it's more me that hit \"save\" on a botched version without realizing it...", "CeeJayDK, 2014-09-22Well you also linked it from your twitter, which I follow.", "CeeJayDK, 2014-09-22It's correct - I just didn't noticed that iMouse.y controls the temperature while iMouse.x controls the mix", "renaudbedard, 2014-09-22Whoops! I kept working on it and saving halfway without realizing that it's public. Come back in a few", "CeeJayDK, 2014-09-22Doesn't compile, however gl_FragColor = vec4(mix(image, colorTempRGB, factor), 1.0); does.", "", "I'm not sure the output is correct though ..", "GottZ, 2020-10-14@johnyboy94 look at Buffer B and set stepsPerFrame to 1", "", "this doesn't create lines but alot of dots.", "lz, 2020-05-02Beautiful", "johnyboy94, 2019-03-30Coukd you help me understand how to create a continuous line that a particle trails? For example, I have a fire \"wisp\" that I'm trying to make, and want some embers floating around it. Noise alone is too unpredictable, they keep phasing in and out. I tried making a grid alike to rubik's cube and rotating/deforming it while keeping only certain parts lit but it is still somewhat mechanic looking and predictable. Particles here are dashing.", "metalim, 2017-02-01marcthenarc, it's \"normal\" behavior for rendering with buffer recursion. To support resolution change, author needs to reset the buffer on resolution change.", "marcthenarc, 2017-02-01Anybody else experiencing problems going full screen where the miniature window is stuck on the lower left part of the screen and the rest of the windows continues the algorithm ? http://imgur.com/a/blLS9", "demofox, 2017-02-01Very pretty.  The green part at the beginning when it's growing outward is my favorite part", "dila, 2017-01-31slow but gold!", "mvdl, 2016-04-14Wow, very nice! Totally amazed at what people can conjure up in such short code. Sorry if this is a noob question that doesnt belong here but is there any way to port these multipass shadertoys to other programs, for example Processing?", "Shane, 2016-03-10Really cool. It was fun playing around with this.", "GregRostami, 2016-03-10WOW!!!", "weyland, 2016-03-10", "aiekick, 2016-03-10", "Dave_Hoskins, 2016-03-09Love it! The movement is great, & the colours.", "poljere, 2016-03-09This is awesome dude!", "iq, 2016-03-09Looks really beautiful!", "mantra, 2016-03-09wow, beautiful.", "IWBTShyGuy, 2022-01-03epic...", "xavierseb, 2020-11-05Awesome!", "jorge2017a1, 2020-08-05The sound is great ... it has a very good electric guitar sound ... good job ... I liked the sound !!!!", "..........", "El sonido es genial ... tiene un sonido de guitarra electrica muy bueno ...  buen trabajo ... me gusto el sonido !!!!", "revers, 2017-02-04Cool tool! Thanks for sharing!", "movAX13h, 2017-02-04Zwerg is on GitHub for a while now and I have also put a WebGL version here Zwerg WebGL for anyone interested ... meanwhile I have moved on to other stuff so don't expect updates from my side too soon.", "morgan3d, 2016-03-19Thanks for the making-of video...it is all the more impressive!", "jt, 2016-03-17great", "asneakyfatcat, 2016-03-17wow!", "skyfeiyun1992, 2016-03-17Just, amazing...!", "TambakoJaguar, 2016-03-16WOW, so much effort put in it!", "iapafoto, 2016-03-16Just incredible !", "vladstorm, 2015-08-10@movAX13h that actually cud be funny to port it to unity3d since unity has c# also // but rebuild the UI there wont be fun // as least from my experience. i like raytracers but i have mac dang, so, wud be cool to have a crossplatform tool ... like with web or unity ... but yea.. whatever , just an idea. i liked the video u made btw.", "movAX13h, 2015-08-10@vladstorm, that's my blog, yes. Thanks, but it's not so awesome. If you have a working raymarcher and know a little C#/.NET for example, you can easily make a program like that... a browser version might be interesting... sharing models... maybe one day", "vladstorm, 2015-08-10this Zwerg editor is awesome. You shud rewrite it for web with three.js.", "i found an article here but can download it :<", "http://blog.thrill-project.com/zwerg-distance-field-editor/", "Dave_Hoskins, 2015-08-09I love the way you get the impression of complex hair and clothing by randomizing squares and circles a little bit.", "revers, 2015-08-09WOW, Amazing! ^^", "movAX13h, 2015-08-09Thanks! @RavenWorks: I'm sorry about that. All the tabs that appear out of nowhere are shaders that srtuss made. We both worked on this release but the screen capture contains only my parts (and how I put everything together). The silhouettes are composed of rotated rectangles with round corners (remove texture from iChannel1 to see). The texture is used as offset so that the result looks more organic and in this case also defines the style. Play around with the textures to see how it changes.", "vgs, 2015-08-09Mind = blown", "RavenWorks, 2015-08-09So cool!", "", "Does the making of the silhouettes appear anywhere in your screen capture videos? In video 14 it just kind of shows up as a new tab that didn't exist at the end of 13. :p", "dila, 2015-08-09such style!", "GregRostami, 2015-08-09My favorite movie ever now has a Shadertoy. YOU ROCK!!", "jonobr1, 2014-04-10so rad that this is in one pass", "inferno, 2014-01-18sorry its http://logik-matchbook.org/shader/crok_chromakey", "inferno, 2014-01-18sorry its http://logik-matchbook.org/shader/crok_chromakey", "inferno, 2014-01-18i like your shader and i made a matchbox version out of it. this version will work inside Autodesk's Fame / Smoke compositing software. if you want to see what that means, please take a look: http://logik-matchbook.org/shader/crok_cel_shading", "konidia, 2018-04-17nvm, just figured out...", "konidia, 2018-04-17how come you don't need 4ac in the iSphere?", "iq, 2015-01-02It's a matter of taste", "hornet, 2013-10-14I have to say I prefer the non-static noise version (ie. add iGlobalTime to line 137)", "", "float off = texture2D( iChannel0, gl_FragCoord.xy/iChannelResolution[0].xy + iGlobalTime, -100.0 ).x;", "WAHa_06x36, 2013-10-13The way the noise stays static is really nice, actually. It still looks kind of good with just a few samples. You could probably tweak it to look like hand-drawn stippled art with some small effort.", "jorge2017a1, 2020-09-20It is a great job, very nice and well done !!!!", ".........", "Es un grande trabajo muy bonito y bien hecho !!!!", "jorge2017a1, 2020-09-20Interesante encontrar el codigo en espa\u00f1ol!!!!", "lIM, 2016-12-13oh,I find the tut on youtube.", "lIM, 2016-12-13no 3d models ? just code ??oh god.....", "really badass.", "I want to know how to do that ?   .....", "MacSlow, 2016-12-09The \"magic\" term is \"ray marching\" or \"sphere tracing\". iq's site is indeed a true treasure-chest in that regard among others.", "P_Malin, 2016-12-09In fact, just check out Inigo's website generally", "http://www.iquilezles.org/index.html", "P_Malin, 2016-12-09Hi thnewlands, check out Inigo's video here: https://www.youtube.com/watch?v=CHmneY8ry84", "thnewlands, 2016-12-09What's your process like for developing primitives for scenes like this?", "anastadunbar, 2016-04-09", "DanTheMan, 2014-11-03How in the world do you do all this using only GLSL and a single noise texture??? Not even OpenGL!", "fb39ca4, 2013-09-17So still lifes are now a thing on Shadertoy?", "psonice, 2013-09-16Awesome indeed. I'm not so keen on the lighting in this one though, it looks a little artificial somehow. Mainly, it's a bit oversaturated. That led to me wasting 10 minutes tweaking, and I came up with this, which goes at the end:", "", "float bw = (col.r+col.g+col.b)/3.; // light value", "col -= bw; // pure colour values", "col *= 0.8; // desaturate", "col += vec3(.2,.2,-.2)*(bw-.4); // add yellow to bright areas, blue to shadows", "", "gl_FragColor = vec4( col+bw, 1.0 ); // add colour to light", "", "It's not right still, but I figured it's worth posting up. You can get a nice daylight tone curve (blue shadows, yellow highlights), desaturate a little, and change brightness/contrast if you want (\"bw = (bw-0.5) * 0.8 + 0.5;\" will drop the contrast).", "poljere, 2013-08-26Awesome once again!", "TekF, 2013-08-26The global illumination doesn't seem to be working in Firefox (works fine in Chrome).", "Dave_Hoskins, 2013-08-26Very nice, iq. I love the perfection of your code layout, and that soft window light split looks amazing!", "CPU, 2013-08-26Wow! Much faster than i expected! Excellent stuff", "iq, 2013-08-26Thanks to Yibing for the watermelon pattern!", "xvart, 2020-02-07thanks, I'll take another pass", "FabriceNeyret2, 2020-02-05note that w could be a bit sharper. The optimal when used is smoothstep is 0.7 * , I guess.", "xvart, 2020-02-05Got it. Thanks for the long explanation, completely forgot about fract. The d part is used by the CineShader, which visualizes the shader in 3D and d becomes the depth.", "FabriceNeyret2, 2020-02-04first, let simplify your code:", "", "- factor x, y using vectors.", "-  d part (fragcol.a) useless since shadertoy reset it to 1.", "", "ivec2 uv100 = ivec2(round((uv + moveOffset) * 100.)),", "aStep100 =  uv100 % modular;", "", "vec2 aStep = (vec2(aStep100)/float(modular - 1)),", "dStep = round(aStep);", "", "float dStepXY = dStep.x * dStep.y;", "fragColor = vec4(dStepXY);", "", "", "now, using ints just complicate ( and prevent smooth variants ).", "just use mod instead of %", "", "float modular = 10.;", "vec2 aStep100 =  mod( round((uv + moveOffset) * 100.), modular ),", "aStep = aStep100/(modular - 1.),", "dStep = round(aStep);", "", "", "which indeed is just", "vec2 aStep =  fract( round((uv + moveOffset) * 100.) / modular ),", "dStep = step(.5,aStep);", "", "and the round is indeed useless ( and more a future problem)", "", "now, %, mod, fract, round, step are the thing causing aliasing, because brutal transition.", "step: just make it smoothstep:", "dStep = smoothstep(.45,.55,aStep);", "and perfect antialiasing is using smoothness = 1 pixel width 100/ires.y", "float w = 100./modular/iResolution.y;", "vec2 aStep =fract( ((uv + moveOffset) * 100.) / modular ),", "dStep = smoothstep(.5-w,.5+w,aStep);", "", "", "the last issue is due to the fract, when it switch from 0 to 1 (while it was no problem when cutting at 0.5)", "here the trick is to trim the white segment out of the \"borders\" of fract:", "dStep = smoothstep(-w,w,abs(aStep-.5)-.25);", "", "->", "void mainImage( out vec4 O, vec2 u )", "{", "vec2 R = iResolution.xy,", "U = u / R;", "float speedMultiplier = 18.,", "modular = 10.,", "moveOffset = iTime/speedMultiplier;", "", "float w = 100./modular/R.y;", "vec2 aStep =fract( ((U + moveOffset) * 100.) / modular ),", "dStep = smoothstep(-w,w,abs(aStep-.5)-.25);", "", "O = vec4(dStep.x * dStep.y);", "}", "xvart, 2020-02-04@FabriceNeyret2, thanks for the feedback, yes the motion is rough (it looked much better in Cineshader), though I am not sure I understood your recommendation.", "FabriceNeyret2, 2020-02-03welcome to your first shader(s) !", "", "NB: motion would look smoother with antialiasing : replace int/ % / if by * step, them *smoothstep with blur = 1 pixel", "Igrek11, 2020-05-14so colorful  so great !!!", "Bombadil, 2020-05-13Like a rainbow! ;)", "Saggre, 2020-05-13This looked awesome on acid", "livvy, 2020-04-25beautiful colours", "radek02, 2020-04-23This is so cool, I don't even know what to say", "SeaiaeS, 2020-04-16I have Intel UHD Graphics 630 and GTX 1660ti with latest drivers. Everything Im using is updated, OS(win10pro), Browser, All the drivers. This is the only shader that causes this crash, every time. I examined the code in detail but could not find anything that is wrong with my system. So I reconciled myself to living with the issue..", "GottZ, 2020-04-15SeasalS that sounds more like a gpu driver or gpu issue to me.", "SeaiaeS, 2020-04-11Im absolutely sure that I am using the legit and latest version of chrome, and my computer does not have any malware. Also I tried both my integrated and dedicated GPUs, nothing changes.", "cmarangu, 2020-04-08SeasalS that doesnt sound like chrome. U might want to verify u have the legit version downloded and not some computer malware", "SeaiaeS, 2020-04-07it looks awesome. However, IDK why but it causes \"Shadertoy: ooops, your WebGL implementation has crashed!\" on chrome after ~15 seconds.", "Kapustek, 2020-03-23So cool, dude! Hypnotizing.", "aiekick, 2020-03-22nice and welcom to the gang", "cmarangu, 2020-03-21Shoot my tone sounde'd bitter. Oh right, we cannot delete comments on this site for some reason!?", "shau, 2020-03-21Very pleasing", "cmarangu, 2020-03-20Ha! I love the shader of the week choices, so many amazing fragment shader's experiments on this web site and they often display people's best work of the people who do get a silver star award", "calinka22, 2020-03-18good job!", "mds2, 2018-10-18oh wait, I already saw this years ago and commented then.", "mds2, 2018-10-18cool.", "aiekick, 2016-01-24beatifull", "iq, 2016-01-24nice!", "mds2, 2016-01-24Man, I love reading other people's shaders.", "FabriceNeyret2, 2023-01-05a 638 chars version ;-) : https://www.shadertoy.com/view/ctBGRD", "FabriceNeyret2, 2023-01-05BTW there are many other versions of BH here, with different look of result and code.", "( this one is not optimal to read ).", "Amirk, 2023-01-04Btw. some light rays can espace the event horizon since the ray-speed is always normalized. So if the ray is pointing radially outward it has to keep going straight out (unless the step size is so big that it can bend the ray around with a single push).  But this does not spoil the general picture if one stays outside the horizon.", "", "I keep coming back to this beautiful shader.", "Amirk, 2022-12-29It seems to reproduce quite an accurate image I think.", "FabriceNeyret2, 2022-12-28\" for such a straightforward approximation\": I'm not even sure up to which point it's an approximation.", "Amirk, 2022-12-27If I understand the code, this uses inverse square force to bend the ray marched light rays, but keeps the speed of the ray normalised (since it's light)? A very nice result for such a straightforward approximation.", "FabriceNeyret2, 2019-09-13oh, I always though the photon sphere was equal to the  Schwarzschild radius ! but yes, it's 1.5 x ( https://en.wikipedia.org/wiki/Photon_sphere ).", "So, which one was your \"size of BH\" aimed at representing ? and how did you get the .625 factor for your force term ?", "set111, 2019-09-12Hmm, something isn't working out, so the photon sphere (I assume the circle in your sim), which is the radius at which light rays can orbit the black hole is 1.5 Schwarzschild radii, 2.5 was a number that I read somewhere, although as I was originally comparing it against the photon sphere diameter and not Schwarzschild, something isn't working out.   I have always known something isn't quite right as light rays starting inside the event horizon are able to escape.", "", "You definitely get the spiral issues with Euler in this so Varlet (or Newon/other) integration may work better (for the same performance cost).  I haven't tried anything other than Euler.", "", "Your galaxy explorer looks super impressive.", "FabriceNeyret2, 2019-09-12apparently the radius tangent to the limit rays (i.e. Schwarzschild equivalent) is  .625*Size , the same magic coefficient you use to scale the force in F = Size * .625 /(r*r);  how to you get the 2.5 from here ?", "", "integration scheme: at least for gravitational classic mechanics, it is known that na\u00efve Euler integration would get opening spirals instead of ellipses, so at least a Verlet must be used. I don't know if the same problem should apply here.", "", "PS: I've been working on VR galaxy exploration a while ago - but without blackholes ;-) https://www.inria.fr/en/centre/grenoble/news/a-virtual-tour-through-our-galaxy", "set111, 2019-09-11Awesome! Its a really nice way visualise the path of the rays.", "", "The _Size is just a variable to scale things (mostly for VR), it isn't intended to be relative to anything in particular.", "(unless this is what you meant) I guess one way of checking everything is working is the ratio of apparent size of the event horizon radius (at infinity) to the actual Schwarzschild radius which should be about 2.5.  Yours seems to produce the right ratio (measured by counting pixels) after reducing the size and step size.", "", "I wouldn't have thought it would matter much which integration scheme you use as long as the step size is reasonable.  The step size I used is on the large side to increase rendering speed at the cost of accuracy.", "FabriceNeyret2, 2019-09-10Hi again !", "I extracted the 2D ray trajectories from your code: https://www.shadertoy.com/view/wdt3zM", "Still, I get a visual Schwarzschild radius on 0.7*_Size . Any idea why ?", "( or should a Verlet integration scheme e used instead of basic Newton ? )", "set111, 2019-04-30@ARBB I assume you are talking about frame dragging?  If so I guess you could simulate that aspect by adding a position dependant bias to the ray direction/magnitude close to the event horizon in the direction of rotation, which should result in an asymmetrical shadow.", "ARBB, 2019-04-28Hello there set! You made an awesome rendition of the black hole for sure, but I was wondering if it was possible to introduce a certain degree of assymetry in the shadow in order to reproduce the effects of a rotating black hole.", "set111, 2019-04-14The colors and disk are my interpretation with lots of room for improvement.  I think a more realistic doppler red/blue shift along with gravitational red/blue shift would make a big difference, especially if it also takes into account the camera velocity.", "", "A camera moving around/into the black hole at near light speed would look quite different. https://jila.colorado.edu/~ajsh/insidebh/schw.html", "", "I think the gravitational lensing is fairly realistic but does not take into account general relativity effects like frame dragging or time dilatation.  The size of the event horizon is entirely a result of the lensing.", "", "The view close/inside the event horizon is not realistic as it would be impossible for the camera to be stationary in real life (but I thought it looked cool).", "FabriceNeyret2, 2019-04-14I don't think there is any color shift simulated here.", "And no polar jet.", "And it's a non-rotating BH, while \"real\" BH are rotating extremely fast (google Kerr BH), which quite change aspect.", "", "PS: one has to be extremely careful about the notion of \"physical accuracy\" for such object: there are many phenomenons occurring, but an image would also largely depend on what a real accretion disk looks like (on which we have not much info), and of course we have no reference image.", "iq, 2019-04-13In terms of AA, my phone can do 35fps with AA=2, and my laptop can do 60 fps with AA=6... I think AA=2 is pretty safe and helps so much. I'm just saying, I like this shader a lot I guess.", "iq, 2019-04-13Very nice! It seems pretty physically plausible, right? We get the back side of the disk to bend and show up, then lensing effect in the background, etc. How accurate do you think it is, or in other words, what's the implementation lacking that you think it'd bring the shader to the next level of accuracy?", "set111, 2019-04-13@patu  Cheers and thanks for pointing that out.  I ended up initialising colOut as assigning it there prevented the AA from working.", "patu, 2019-04-13Awesome work!", "", "please replace last line with colOut = col/(float(AA*AA));", "otherwise it is broken on mac/intel - colOut has no initial value.", "marquizzo, 2019-04-13Whoa, did I just travel _inside_ an event horizon?!", "aiekick, 2019-04-12wow super nice", "BigWIngs, 2019-04-12Aww your disc is soo much nicer than mine. Very nice!", "FabriceNeyret2, 2019-04-12shaderToy blackhole ++ :-) https://www.shadertoy.com/results?query=tag%3Dblackhole", "(nice one).", "airtight, 2019-03-19not sure how this works but its blooming marvelous", "laserdog, 2018-01-31rad", "ollj, 2017-07-31oh that is a minecraft shader page or has it a hidden opengl shader library page that is more about tracing and occlusion?", "jarble, 2020-12-13I made a few changes to improve the rendering speed.", "FabriceNeyret2, 2019-11-09now working :-)", "kuvkar, 2019-11-09What, apparently I didn't save  ok then.", "FabriceNeyret2, 2019-11-09still not done at buffA:#308  ;-)", "kuvkar, 2019-11-09Thanks @FabriceNeyret2. Fixed.", "DengYJ, 2019-11-08Oh, my goodness!", "FabriceNeyret2, 2019-11-06still all white on true OpenGL.", "", "got it: last line of bufA, you missmatch the clamp API.", "should be  fragColor.rgb = clamp( fragColor.rgb, 0., 1.)", "jt, 2017-08-23nice", "iq, 2017-05-09cool", "FabriceNeyret2, 2017-05-08nope.", "kuvkar, 2017-05-08@FabriceNeyret2 Might have been a negative pow().. does it work now?", "FabriceNeyret2, 2017-05-08all white on linux.", "kuvkar, 2017-05-08@tehsauce Yeah it's been a lot of tuning of colors and effects. Otherwise making something like this would be quite fast, it's the tweaks that take most of the time.", "", "@Shane perhaps one day I'll start documenting my code properly too", "tehsauce, 2017-05-08Color and depth of field are well tuned!", "Shane, 2017-05-07Really nice deep water implementation, and the code is easy to follow, which is always appreciated. I especially like that you've included foam.", "kuvkar, 2017-05-07ah.. true. Fixed!", "flockaroo, 2017-05-07wow, nice! but one strange detail - that the sky has no dof...", "jt, 2017-10-25cool", "FabriceNeyret2, 2016-02-22You should add the tag \"image\", used by the other shaders reproducing some photography,", "+ \"photo\", since too many (195!)  unrelated shader are found under \"image\".", "movAX13h, 2015-05-05Hi AND! I think your technique could also work with a fractal as input texture instead of a pregenerated one. Fractals like these for example (the one on the left) would give enough variation to serve as source I guess. I might try it but I'm not sure if I can make it all the way ...", "Dave_Hoskins, 2014-12-14", "@Beautypi - Hi, I'm not getting email notifications from any of these comments.", "and, 2014-12-14@Dave_Hoskins: haha... that's funny", "Dave_Hoskins, 2014-12-13@and Thanks! How about this:-", "Put it after the 'float t = iGlobalTime' in main()", "uv.y += abs(sin(t * STEP/24.0*6.2831))*.03;", "A little cheesy perhaps...", "fb39ca4, 2014-12-12You need to replace #if in your shader with #ifdef.", "bloodnok, 2014-12-11nothing about this isn't awesome.", "and, 2014-12-11@Dave_Hoskins: Haha... it keeps building the image. Add if (cuv.y >= 20.0) luma = 0.0; at the end of decodeImage.", "Dave_Hoskins, 2014-12-10I just tried to make him move up and down every 4 beats, to give him a stomping towards the camera action, but the off screen chin is slightly messed up...", "and, 2014-11-02@archee: same kind of idea, but not just mpeg4 - where inter-frames are encoded with motion vector referencing some previous frames. In this case we just replace \"previous frames\" with some texture. At least this is one way to think about it. One can also think of it as a vector quantization (VQ) in a sense of mapping one set of vectors into the other with predefined codebook.", "archee, 2014-11-02This is so cool, I never thought mpeg4 used this technique.", "and, 2014-10-29@AndrewNZ: What do you mean by \"idea\"? What aspect of it?", "AndrewNZ, 2014-10-24Astounding!  Thank you for the explanation.  Never thought I'd see an MPEG4 decoder on Shadertoy!  The idea... where the heck did that come from?  Like Dave said, fantastic.", "", "... and music too.  Good synthesis job.  Really adds to the feel of the shader.", "and, 2014-10-23There wasn't much preparation by itself. This kinda thing work in MPEG4 and a lot of other places, but there you don't need to be very close. I was curious to see how close you can get to original image and what the basis texture would or should look like if you can do full search and don't do anything fancy afterwards. Well, that test tool like 20-30 min of C coding. The answer - you can get super close.", "", "A lot of time was spent on trying to make it actually work in the shader. First draft took maybe 5 min, only compiled in browsers with DX11 backends, ran at 5 fps in a small window and then crashed my GTX Titan when I hit full screen  The rest was iterative approach of optimizing it so it doesn't run out of uniform constants and fails to compile on DX9 and native OpenGL backends, runs at high frame rates.", "", "Also I took some time investigating different error estimators. MSE in sRGB did 90% of the job but had really bad failures because it is not aware of structures our visual system is sensitive to. But even things like SSIM fail. So I build a list of best candidates with different techniques and then selected them by hand (eye) manually.", "", "It took a while but I learned a lot", "", "The next obvious step is to find some procedural basis.", "fizzer, 2014-10-23Brilliant idea, fantastic execution!", "iq, 2014-10-22Ahhhh, you were too quick!", "", "Excellent, super good", "Dave_Hoskins, 2014-10-22A fantastic idea! The preparation work must have taken a while to do.", "Harha, 2014-10-22Sounds and looks really good!", "mzadami, 2014-10-22Really very good!", "PauloFalcao, 2014-10-22Wow! Superb!", "P_Malin, 2014-10-22I was always a bit suspicious of that colored glass texture.", "TekF, 2014-10-22Wow!", "P_Malin, 2014-10-22Nice!", "poljere, 2014-10-22Awesome!", "jt, 2022-10-16Wow!", "johnyboy94, 2019-06-27Oh the Rayleigh is supposed to be there to make the non-clouded areas look more natural as it's somewhat weird now how my clouds look like the Sun is behind them in the direction of the light source but the sky is just blue  I know about the frostbite paper, been going through it several times, it's very useful. Thanks both of you.", "SebH, 2019-06-27Correction two post above:", "- \"So for cloud appart from what Fabrice says, \"", "- \"You can use something between 0.04 to 00.6. Also I have found another one saying it can be up to 0.1\"", "SebH, 2019-06-27[This comment has been hidden by the shader author]", "SebH, 2019-06-27Also if you are ray marching single scattering, you are going ot have a hard time approximating the multi scattering look. You cna using some \"multi octave\" approximation as discussed in Section 5.8 of https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/s2016-pbs-frostbite-sky-clouds-new.pdf (Wrenninge). Though pretty goo (and fast!) it is not really the same as doing real path tracing with multi-bounce scattering as this https://twitter.com/SebHillaire/status/1068275158228582400 or https://twitter.com/SebHillaire/status/1073568200762245122.", "", "https://twitter.com/SebHillaire/status/1073334674695573504 shows the difference between phase functions: uniform, HG, and Mie geometrically complex scattering (complex shape). So many different variaitions and complexities", "SebH, 2019-06-27Hi,", "There is not really any rayleigh scattering in cloud. That is for molecule in the atmosphere. Cloud feature geometric scattering that can be aproximated by Mie as a simplification. Otherwise it is more complex (Figure 2 in http://www-evasion.imag.fr/Publications/2008/BNMBC08/clouds.pdf).", "", "So for cloud appart from that you can use albedo equal one so absorption=0 and scattering=x. That x for clouds I discuss in https://media.contentapi.ea.com/content/dam/eacom/frostbite/files/s2016-pbs-frostbite-sky-clouds-new.pdf with a reference. You can use something between 0.4 to 0.6. lso I have found another one saying it can be up to 0.1 (http://www.patarnott.com/satsens/pdf/opticalPropertiesCloudsReview.pdf).", "johnyboy94, 2019-06-27Thank you for the response. And thank you for the atmospheric scattering paper - you are my thesis reference now", "I was using Henyey Greenstain approximation (max between +.6 to .8 forward and a quarter of that backwards so it accounts for some back scattering) but it did look somewhat... unpolished. Will look into filtered Mie to improve that.", "Am I right to say that orange sunset/dawn colour comes from Rayleigh scattering then, as rays travel longer through just air? I didn't implement Rayleigh yet so it's all a bit bland.", "FabriceNeyret2, 2019-06-27for realistical clouds, in the visible spectrum you can consider that the scattering coefficient is 1, the absorption is 0, and the phase function is (filtered) Mie.", "johnyboy94, 2019-06-27Hey. I've been making clouds for a while now, used your scattering integration for it (hopefully it's the right way not sure lol). I'd like to bother you once more! What scattering coefficient is considered \"correct\" for pbr clouds? I'm using single scattering and assuming that albedo is close to 1 (using same coefficients for absorption and inscattering). But I can't seem to find a clearly stated: hey, cloud material has these coefficients for (r, g, b) scattering. So far keeping it as (.6, .6, 1.) seemed about right to me but it's haunting me. (these are per meter * density of ray travel)", "SebH, 2017-11-02Hi,", "- yes, viewDir.x will be>0.5 and that is not a prolbem. We only want the x/y. you can try \"/ iResolution.xy\" it will look wrong", "- 0.15 is just a scale to get fro, world psace to voxel space (this function is like a simple transform matrix). You can change it.", "bysreg, 2017-10-30Hello, i have several questions", "", "- Why is viewDir calculated like that? Doesn't that mean the horizontal view vector won\u2019t be precisely in range of [-0.5, 0.5]?", "- in worldPosTocubePos function, why times it with 0.15? Shouldn't it be multiplied with 0.5 (the cube is scaled with factor of two?)", "SebH, 2017-08-04Thanks Fabrice, I've added those details in description and code.", "FabriceNeyret2, 2017-08-03on windows10 / quadro6000 / firefox, it is working with Angle but not compiling with trueOpenGL", "FabriceNeyret2, 2017-08-03Strangely, it is the 3linear interpolation that cause the compilation crash, even if evaluated for only one sample ! see https://www.shadertoy.com/view/ls2BRt.", "", "-> for this present shader, setting line 27 #define VOLUME_FILTERING_NEAREST 1", "solve it. But looks like a compiler bug (or not enough registers remaining ?)", "FabriceNeyret2, 2017-08-03NB: the array size alone doesn't seem to be the problem since it does compiles (for me) here: https://www.shadertoy.com/view/ld2BRt. At least the resource issue is for code+data", "SebH, 2017-04-15@polygon: yes brutforce raymarching volumetric shadow for each sample already raymarched for the view is very ALU heavy. One could optimize that  by precomputing the volumetric shadow using FOM for instance (http://sebastien.hillaire.free.fr/index.php?option=com_content&view=article&id=61&Itemid=72).", "Polygon, 2017-04-14It looks really cool,  but I only get a bout 2.5 fps.", "BigWIngs, 2017-03-29Wow, very cool!", "iapafoto, 2017-03-27excellent", "SebH, 2017-03-27@flockaroo Thanks!", "@aiekick yes, or I would be fine with 3d texture flattened as 2d textures personally", "flockaroo, 2017-03-26awesome!", "aiekick, 2017-03-26nice job. i hope iq speak about texture3D  it will be a very good feature for volumetric things", "SebH, 2017-03-26@Duke: Thanks!", "@valdstorm: as described in the comments, not all drivers/compilers/cards can eat up this shader unfortunately.", "vladstorm, 2017-03-26'packed Bunny' : syntax error :<", "Duke, 2017-03-26Amazing!", "FabriceNeyret2, 2017-03-26inverted test:  AAAAAaaaah ! shame on me ! :-)", "SebH, 2017-03-26@Fabrice", "RLE: yes possible, that would make the unpack more involved, so as you say probably. I wanted to do the octree build but then did the simple bit packing which \"worked\".", "", "Array:That is weird indeed. Surely the code size influence the result (try removing the noise, ground, etc. maybe?)", "Also, in your exemple you inverted the for loop test: i*<*1024 and that is why it is black.", "FabriceNeyret2, 2017-03-26taking the array alone compile, but strangely it's sum is zero ! see https://www.shadertoy.com/view/XdByzz", "FabriceNeyret2, 2017-03-26taking the array alone compile, but strangely it's sum is zero ! see [url]https://www.shadertoy.com/view/XdByzz[/yrl]", "FabriceNeyret2, 2017-03-26\"to big\": no way to use some RLE encoding ? (huge sets of duplicated values). Ok there exist some formats that can be used without decompacting, but it's probably too complicated for shadertoy :-)", "Same for octrees structures grouping large empty or large full nodes.", "SebH, 2017-03-26@ollj: also added noise simple translation. And Fabrice answered your other question for me", "SebH, 2017-03-26Indeed and I wanted to back to that at some point. Now fixed:", "- using improved scattering integration", "- volumetric shadow first sample is not offset anymore", "- fixed noise due to cube intersection floating point rounding resulting in \"wrong\" early exit in sampleBunny", "FabriceNeyret2, 2017-03-26@ollj: for more complex scenes where there is data scattered everywhere, marching voxels is way cheaper. And in situations with subpixel geometry (e.g. at distance) LOD is may more easily and cleanly defined with voxels. ( cf \"voxel conetracing\" and Gigavoxels ).", "ollj, 2017-03-26i see blue pixelflickering on the borders of the voxel fields, at one ear tip and below one eye only.", "", "caused within the cases when a ray never leaves an empty voxel.", "ollj, 2017-03-26you could have animated the smoke within the constrains of the voxel shape easily?", "ollj, 2017-03-26so, is the lower resolution voxel worth the performance boost compared to using signed distance functions without voxels?", "", "i think not on shadertoy, because shadertoy has no option to buffer 3d array of vec4() voxels in the channels, only 2d array of vec4() pixels.", "Yrai, 2017-03-26So good...", "SebH, 2017-03-26@Fabrice Yes does not compile on many platforms due to the packedBunny array that some driver/card may not be able to handle unfortunately.", "SebH, 2017-03-26@ttoinou Everything is possible  (just that is a bit trickier to do in shader toy though)", "@Shane Thanks! I even have added more comments", "@iq Thanks! I am not sure what it is but if it is a way to load a texture/image then things will indeed get a lot easier!", "If that is it: I could share volume textures for bunny and dragon (if you are interested in having them as a base asset also)", "If that is not it: well I like surprises", "FabriceNeyret2, 2017-03-26not compiling on linux/chrome  \"possibly too large array\". (despite my GPU is not so small).", "iq, 2017-03-26Haha, nice trick!", "", "Stay tuned, we are working on something for Shadertoy that will soon allow you to do do this way better.", "Shane, 2017-03-26 Definitely my favorite in a while, and the code reads so well.", "ttoinou, 2017-03-25Very interesting ! Could the bunny be used as a seed to generate smoke ?", "Suslik, 2023-06-09in my experience the quality of this PCG3d implementation is already more than adequate for practical purposes in all of my applications. its speed, however, is on the more expensive side.", "huttarl, 2023-05-22@markjarzynski I appreciated your paper, as well as your posting it here with some concrete details that make it easy to use these hash function implementations in practice.", "I would like to hear your response to nimitz's assertion that the pcg3d hash function as shown here lacks an important feature of PCG. According to your paper, your pcg3d implementation does very well on quality tests as is. How would quality and performance be affected by adding the line that nimitz suggests?", "markjarzynski, 2023-04-04@mla the subpar quality of using linear combination (seed) was discussed in section 4 of the linked paper, also see Figure 3 and Figure 6 in the paper.", "mla, 2023-03-03@nimitz: the linked paper explains the design of the pcg3d and pcg4d (section 6.1, \"unbalanced Feistel networks\" & all that), though I'd have thought at least a final right shift & xor would be a good idea.", "nimitz, 2023-03-02In case anyone is wondering , the line to add to the pcg3d function to make it perform the main feature of pcg is this:", "v = ((v >> int((v >> 28u) + 4u)) ^ v) * 277803737u;", "", "to be added right before the v ^= v >> 16u;  line", "", "this will use the higher quality bits of the hash to improve the overall quality by a large margin, which is the main feature of pcg.", "mla, 2023-01-23Shader (by @lilja) using PCG both as a hash & as a RNG (and working nicely as far as I can see): https://www.shadertoy.com/view/ctj3Wc", "mla, 2023-01-23So trying eg. murmur3(uvec2(seed(u.xy))) (or the same with city), I get very similar artefacts, so looks like it is indeed the seed function to blame.", "mla, 2023-01-23Trying this with the 'uvec3(pcg(seed(u.xy)))'  function, there are visible correlations in the output (observation by @lilja) - but if I replace the seed function with:", "uint seed(uvec2 p) {", "return (p.x << 16) ^ p.y;", "}", "", "the output looks OK, so maybe it's a problem with that rather than the pcg function itself.", "mla, 2023-01-23@sagieL: for negative UVs you just need to be careful converting floats to uints as directly converting negatives is undefined. The correct thing to do is: uint(int(floor(x)) - the int to uint conversion just copies the bits, so negatives work fine. (The floor is needed to avoid problems around zero).", "sagieL, 2022-08-29Cool stuff! But this doesn't seem to work if i want to use negative UVs. Is there a simple solution for that?", "nimitz, 2022-05-20Just noticed the pcg2d and pcg3d version used are incorrect as they do not perform the main feature of pcg, that is bitshifting based on the top bits of the hash. This will result in much lower quality than actual pcg would have.", "mpcomplete, 2021-10-16Note that if you want to use the integer hash functions outside of shadertoy, you must include `precision highp int` at the top of your shader or the hash will overflow. (It seems shadertoy uses high precision by default.)", "markjarzynski, 2021-09-24Hi CyberDain. There is more than one hash presented in this shadertoy. Visually, triple32 looks okay. But, I would recommend testing it with BigCrush or PractRand and seeing how it compares in the hashes presented here. triple32 is also a 1-dimensional hash, so it might not make sense if you have 3D input or want 3D output.", "CyberDain, 2021-09-23is it better than https://www.shadertoy.com/view/WttXWX ?", "nimitz, 2020-12-29I suggest testing iqint3 followed by a finisher like: n = n ^ (n>>16u);", "From my testing this was the best compromise.", "Suslik, 2020-11-20Oh wow, you're one of the paper's authors. I'm glad that we're finally starting to use shadertoy as supplementary material in open research.", "Suslik, 2020-11-20Very useful comparison, thanks. I wish this was easier to find.", "markjarzynski, 2020-10-29Using the methods proposed in the paper, pcg3d(vec3(u.x, 1u, 1u)) fails 36 out of the 160 tests in BigCrush for xyz. Mapping from smaller dimensions to larger is hard. I haven't seen a hash that does better than pcg3d in that regards, but that doesn't mean one doesn't exist.", "CyberDain, 2020-10-28markjarzynski, will it produce correct distribution?", "markjarzynski, 2020-10-28Hi CyberDain. You could do something similar to pcg3d(u.xxx) or pcg3d(vec3(u.x, 1u, 1u));", "CyberDain, 2020-10-28how I can get 2 or 3 uint hashes from one uint in pcg ?", "otkazano, 2021-03-20Wonderful!!!", "steverock, 2018-02-22This is really cool. Do you have any thought as to how long it'd take a human to fit gabor functions to such an image? I wonder what would happen if you had a human take a stab at this :P", "", "Also, I wonder how much faster this would converge if, in addition to random models, you also added ones fit to edges, etc.", "mattz, 2018-02-20I think iq has previously pointed out that humans tend to specifically focus on eyes, so it's more than just high-frequency parts of the image...", "whitenoise, 2018-02-19I noticed on your blog you mention using a manually created weight image - do you think could you create one automatically by using a sobel filter or just filtering out low-frequency components?", "Chris_M_Thomasson, 2018-02-17Love it!", "mattz, 2018-02-09matt 'dot' zucker 'at' gmail 'dot' com", "Dave_Hoskins, 2018-02-09Thant's Matt, your emil must be  'something'@ matt 'stop' zucker. What is the 'something?'", "Or am I being especially thick today?", "mattz, 2018-02-08Hi Dave - my gmail address is the same as my twitter handle (listed in my profile at https://www.shadertoy.com/user/mattz) but with the underscore changed to a dot. Can you email me with your OS and compiler info and we'll see where we can go from there?", "Dave_Hoskins, 2018-02-08Hi Mattz, I'm trying to use your software, but I'm having trouble knowing where to put opencv files, the Cmake states 'None of the required modules found Opencv>=2.3;opencv-2.3.1'  - please can you give some pointers, thanks.", "jt, 2017-10-09very cool", "mattz, 2016-08-04Just uploaded a blog post on how it was made, if anyone is interested", "anastadunbar, 2016-05-27I'm glad Chrome didn't crash for this.", "ollj, 2016-05-27edgy reversed edge detection.", "otaviogood, 2016-05-25I'm still amazed that you can represent that image with only 128 functions. I tried making something similar, but my version just sucked. This is still one of my favorite shaders.", "vgs, 2016-05-24Nice fit!", "mattz, 2016-05-24Interesting idea -- any \"dictionary\" that covers the space would have to be pretty humongous... I like the idea of computing an orthogonal projection, seems like it would improve overall fit compared to the approach I took, which was basically hill climbing + gradient descent on one basis function at a time.", "robingreen, 2016-05-24A faster fitting method would be Orthogonal Matching Pursuit provided you have a dictionary of Gabor bases - the dictionary need not be pregenerated, you can create the entries procedurally.", "FabriceNeyret2, 2016-02-22You should add the tag \"image\", used by the other shaders reproducing some photography,", "+ \"photo\", since too many (195!)  unrelated shader are found under \"image\".", "coyote, 2015-09-02Very nice!", "otaviogood, 2015-09-02looks pretty amazing.", "FabriceNeyret2, 2015-09-01Now what about encoding a movie ? :-p", "mattz, 2015-09-01Thanks -- added the link.", "weyland, 2015-09-01The result is amazing for 128 steps and the beauty spot isn't even the last dot  ... Her life was pretty interesting, you might wanna add a link to: https://en.wikipedia.org/wiki/Zsa_Zsa_Gabor ;)", "iq, 2015-08-31Lovely, much better than the isotropic gaussians I was using. There's lots of parameters though, I can see why it took so long for your generic algorithm to converge!", "mattz, 2015-08-31Comments added -- changing the order of parameter encoding would be tougher cause it was carefully chosen to relate to the bounds on the data and scale factor (const vec4 scl). But thanks for the suggestion!", "FabriceNeyret2, 2015-08-31impressive !", "maybe you could add a few comments to detail the key parameters:", "q0 = [ X|Y , angle|phase, wavelength|Ry , Rx|order ]", "", "also line 22 I suggest to replace *0.001953125 by /512. for clarity", "", "note that with q0 = [ X|Rx, Y|Ry, ... ] you would have directly vec st=q1.xy and mat()*(p-q0.xy)", "-> p =  ( mat()*(p-q0.xy) )/ q1.xy  then exp(-.5*dot(p,p))", "Dave_Hoskins, 2015-08-31Yeah, very nice indeed, it's both soft and accurate in all the right places.", "Thanks for the links BTW.", "jt, 2022-12-03Looks very cool!", "demofox, 2019-06-21hola, el shader est\u00e1 a la derecha", "macangel, 2019-06-21hola, soy nueva por aqui, como puedo descargar algun shader?", "Shane, 2019-06-17Very nice. Science aside, I like this from a visual perspective too.", "", "I went to the trouble to put one of these together a while back, just to satisfy my own curiosity. The results are definitely better than those produced by the standard four sample sigmoid smoothstep we're used to. The fifth degree smoothing formula (with four samples) takes away the seam lines you see when raymarching, but I find it leaves things looking too squarish. The multisampled interpolation you're using here looks much nicer, and when computers get faster, I'd imagine it'd become the new realtime standard.", "Dave_Hoskins, 2019-06-08Nice and shiny! - BTW the preview thumbnail is just black for me.", "ollj, 2017-07-28even more vector processor explicit:", "", "#define MAD(a,b,c) (a*b+c)", "float CubicHermite (float A, float B, float C, float D, float t){", "D*=.5;", "//return MAD(MAD(MAD(D+.5*(((B-C)*3.)-A),t,A-2.5*B+2.*C-D),t,.5*(C-A)),t,B);", "vec3 p=vec3(D+.5*(((B-C)*3.)-A),A-2.5*B+2.*C-D,.5*(C-A));", "//return MAD(MAD(MAD(p.x,t,p.y),t,p.z),t,B);", "return ((p.x*t+p.y)*t+p.z)*t+B;", "}", "ollj, 2017-07-28changing order of operations, for less multiplications, for explicit MAD():", "https://www.khronos.org/opengl/wiki/GLSL_Optimizations", "and because MAD() tends to add nice structure to polynomials", "", "#define MAD(a,b,c) (a*b+c)", "float CubicHermite (float A, float B, float C, float D, float t){", "D*=.5;", "//return MAD(MAD(MAD(D+.5*(((B-C)*3.)-A),t,A-2.5*B+2.*C-D),t,.5*(C-A)),t,B);", "float a=D+.5*(((B-C)*3.)-A);", "float b=A-2.5*B+2.*C-D;", "float c=.5*(C-A);", "//return MAD(MAD(MAD(a,t,b),t,c),t,B);", "return ((a*t+b)*t+c)*t+B;", "}", "demofox, 2015-08-17tx iq!", "iq, 2015-08-17super cool", "spalmer, 2022-10-22sorry I put so little effort into finding email, but yes it appears now better tyvm, though I believe the toy just after yours is still crashing on the thumbnail", "FabriceNeyret2, 2022-10-22oops. I just fixed it to prevent loop unrolling. is it better ? ( anyway my email, etc are easy to find ;-) . but this way works too ).", "spalmer, 2022-10-22idk how to tell you this but I believe your latest Gosper curve toy to be locking up the lists it appears on the Shadertoy site, including (currently) the very front page of latest results", "scratch13764, 2019-01-18I read the paper and then realized how it's quite easy to understand how this works just by playing around with line 124 e.g.", "nd = clamp(1.,0.,1.);", "jt, 2017-08-16Still great", "FabriceNeyret2, 2017-01-20this one was cooked in 2014. so, to your own risks :-)", "pthextract, 2017-01-20Its ok but dont eat the background.", "nide, 2017-01-20So fluffy.", "Is it safe to eat?", "pthextract, 2016-12-12Nice", "834144373, 2016-10-13Looks pretty nice!:-\ud83d\ude04", "like this.the paper about scattering,absorb,phase,powder,Beer\u2013Lambert law...etc", "I finded these pdf on your website,clouds", "FabriceNeyret2, 2016-10-13As I said, it was published in Gardners papers between 1983 and 1985. The most famous is the Siggraph'85 - see his biblio for more: https://www.cs.drexel.edu/~david/Classes/Papers/p297-gardner.pdf", "I just tuned my own shaders from this base. On CPU during my postdoc I pushed it further, such as here:", "834144373, 2016-10-13I feel you can do awesome and really movie cloud.", "And want to know that Can I free achieve your technology form your public paper/doc and website anywhere?(or some License limit)", "knighty, 2014-05-12Yes, very useful! and nice looking. Thank you.", "FabriceNeyret2, 2014-05-12Of course, while this is only a single ellipsoid shell, for convincing use you would use several blobs (as Gardner did for developping smoke and clouds).", "I strongly think that the current tendency to brute-force methods is not optimal, and that we should develop more mid-way solutions. The 80ties Siggraph are a gold mine for that (before the steril years of radiosity/ray/NavierStokes). Still, this approach as 2 known issues: intersections with other objects (you would see the ellipsoid shape; still nowadays you can alter the z fragment value, and for collision between gazeous parts there are blending tricks), and non-convex shapes (still I used to play with more involved formulations to try to handle that).", "FabriceNeyret2, 2014-05-12fb39ca4: indeed, I didnot do it exactly his way, so it might be that the inconsistencies are mainly due to me. I tricked it recursively then posted it once I add to go (not checking the still look).", "The point is that his technic was publish simultaneously to Perlin noise, that you would now prefer for the noise part, and that known alternate tricks are currently used for some details (e.g. dot(N.E) instead of 2D distance to appearant ellipse) which I don't know how equivalent they are.", "fb39ca4, 2014-05-12Looks pretty nice when the texture is animated, but it is not convincing at all when it is not. Still, it's a nice trick that could be useful in specific scenarios.", "Dave_Hoskins, 2014-05-111985! \"...generated in 25 and 20 minutes, respectively, at 480 x 640 x 24-bit resolution using a Data General Eclipse S/250 16 bit minicomputer...\"  - you had to be patient in those days.", "It has very convincing depth even though it's just a shell. Nice find.", "FabriceNeyret2, 2014-05-10\"Visual Simulation of Clouds\" Sig'85 paper: https://www.cs.drexel.edu/~david/Classes/Papers/p297-gardner.pdf", "rgbk, 2018-05-29This shader is really gorgeous, but since it's designed to be basically a stress test (50 iterations per fragment!!) it runs pretty poorly opengl es. I'm looking to do similar kaleidoscopic geometry that isn't so many iterations.", "dila, 2017-02-08nice palette", "FabriceNeyret2, 2017-01-23for disco, would need some glinty glow around the spheres :-p", "iq, 2017-01-23Makes me think of disco music for some reason!", "nshelton, 2017-01-21well, the bar at the bottom shows the coloring scheme . And it is colored solely based on iteration count. So less iterations is faster. I would like for the right naive side to be considerably brighter, but it is barely noticeable", "FabriceNeyret2, 2017-01-21how can you tell the speed of left half vs right half ? ;-)", "nshelton, 2017-01-21Thanks everyone!  I'm just a little discouraged because it's not a huge improvement. See the left vs right half of the screen (not much difference) where the left half is optimized and the right is naive. Guess I will have to stick with half-res and temporal reconstruction. @shane the epsilon increasing with distance is also something i've used, gives a nice LOD effect for cheap.", "Shane, 2017-01-21Great geometry and color palette.", "", "If I'm really pushed for cycles, I'll try a few different raymarching algorithms, including the one in your example. On occasion, one might perform a little better than others, but usually the standard sphere tracing algorithm with a surface distance epsilon value that increases with distance works best for me.", "shau, 2017-01-21So much geometry and it evolves so nicely.", "FabriceNeyret2, 2017-01-21is it biology, chemistry or particle physics ? :-p", "lherm, 2017-01-21This is great!", "cubby208, 2017-01-21This is so tasteful!", "ttoinou, 2021-03-07Should I credit Virgill   ?", "ttoinou, 2021-03-058K60 render on YouTube", "Virgill, 2019-12-05shagoy, no.", "shagoy, 2019-11-17jochen.feldkoetter are you cool with this? https://www.youtube.com/watch?v=do2_ZP4XD-E", "ttoinou, 2019-08-01Impressive!", "dila, 2019-07-28amazing but very slow for me", "shau, 2019-07-27Awesome", "PauloFalcao, 2019-07-26small code, BIG WOW!", "KylBlz, 2019-07-25love it! and yeah the code is so tiny!", "badjano, 2019-07-24I can\u00b4t believe how small the code is", "P_Malin, 2019-07-24This is so fantastic and such a small amount of code.", "Yiannis_Vlassis, 2019-07-23Well Done!", "Yiannis_Vlassis, 2019-07-23Quite Psychedelic the light and the black and white.", "Nice work even though i am light years away from writing anything in Python the outcome is outstanding.", "Virgill, 2019-07-23felipunkerito & patu : done..  Thanks for the tipp.  <3", "patu, 2019-07-23Breathtaking", "", "But please put fragColor*=0.; before if( uv.y>.11 && uv.y<.89 )", "Uninitialized fragColor causes random colors on Intel gpus", "Skalbe, 2019-07-23holyshit", "bioccular, 2019-07-23Holy dooly. That's amazing. Great direction, lighting... the whole package! In 4k.  Sheesh.", "Dave_Hoskins, 2019-07-23I had to rewind it to sync the audio properly (an old shadertoy bug\ud83d\ude22).", "jeyko, 2019-07-23awesome!", "Shane, 2019-07-23 Beautiful, and surprisingly fast. I noticed a really clever lighting trick in there that I'm keen to try out.", "felipunkerito, 2019-07-22Wonderful! I love it!", "I am seeing some artifacts on a Mac, add fragColor = vec4( 0 ); on line 158 (Buffer A) and you are good to go.", "evvvvil, 2019-07-22Fuck yeah Virgill, so sick. Bang it out broski, wicked tune as usual. See you at Evoke!", "flockaroo, 2019-07-22really cool!", "iq, 2019-07-22Very nice!", "wyatt, 2019-07-22sweet!", "Dave_Hoskins, 2019-07-22Very creative, I wish I knew what it meant!", "Nice one.", "reinder, 2019-07-22Beautiful!", "avin, 2019-05-13ouh mama!! so cool!", "starea, 2017-08-11This is incredible!", "Hitokage, 2016-11-20@Dave_Hoskins Mmm, I will have to experiment a bit and play with the code. Thank you for the help and have a nice day! :-)", "Dave_Hoskins, 2016-11-20Just scroll though the UV coordinates to get movement - see the var 'st' in line 324.  Of course, there's a lot of fiddling with numbers to get it looking OK.", "Hitokage, 2016-11-20@Dave_Hoskins Thank you very much. So you transform the texture simply by changing the coordinates right? I still don't get how you make it moving like falling down.", "Dave_Hoskins, 2016-11-20@Hitokage , yes the rain starts at line 313 through to 340, it consists of 12 sheets of rain (think about real life stage effects with curtains) that are placed progressively away from the camera. Each sheet is made from a stretched out random texture in channel3. The lower random texture values are near invisible due to the POW() in line 326 (try changing the value). The rain is lit depending on how close to each light source the pixel is.", "Hitokage, 2016-11-20Hello, great shader!", "I would like to ask if there is some kind of tutorial on the rain effect. I don't see how it works from the code.", "eight, 2016-10-07Hi Dave, This is wonderful? I am trying to look straight up and see the rain falling onto me. But if I change line 285 to vec3 vCameraIntrest = vec3(-1.0, -100, 25.0); the rain still looks flat 2d and parallel to the screen. Please let me know how to look at the rain from other angles than perpendicular to the screen. Thanks!", "Dave_Hoskins, 2016-09-23Hi, there is no initialization. ALL the code goes through EVERY pixel on every frame. It's rendered here by drawing a quad on the screen the size of the window and parsing the uv coordinates to the fragment shader you see on the right. I learnt shader language here, on Shadertoy, following other people's examples. You can too, but please start at the beginning. I\u00f1igo Quilez has some great info if you google his name.", "sahussai, 2016-09-22I would like greater control over rainfall i.e. direction, speed, wind effect, and control over camera movement in 3D space. I would also like to render in stereo for VR. Additionally, this exercise is mainly for my learning CG. I am new to ShaderToy so I am not sure how scene is initialized here. It is not clear where vertex and fragment shaders are defined. I just saw \"uniform\" variables by clicking on \"Shader Inputs\". Any insight into porting from ShaderToy to standalone application is greatly appreciated. Thank you.", "Dave_Hoskins, 2016-09-22Thanks, I'm not sure why you would want to though.", "Surely you just have to use it as a shader program in OpenGL, and pass the appropriate parameters as 'uniforms.' You can do that in C++, C#, Java etc...", "I would use Unity, as I'm used to it. But anything that handles OGL will do.", "sahussai, 2016-09-22Very nice... may I ask if this work can be ported into a standalone modern OpenGL program? If so, what is the best approach. Thank you.", "Dave_Hoskins, 2014-06-07Seems to be working in Chrome again now. I've also changed rain density and lighting.", "Ramocles, 2014-03-07awesome! nice idea and execution! ^^", "Dave_Hoskins, 2014-03-07Thank-you. I've fixed some lighting and an overflow error in Ubuntu. You should now see the close rain being lit by the bollard etc.", "P_Malin, 2014-03-06Nice!", "iq, 2014-03-06Ohhhhhh, this is very, very good I think. Amazing", "kevs3d, 2020-06-30Delightful.", "tdhooper, 2019-07-09davidjonsson, there's some more exploration here https://twitter.com/tdhooper/status/978667479177355267 which you can out yourself if you don't mind fiddling with some code https://github.com/tdhooper/offline-shadertoy", "davidjonsson, 2019-07-09Wonderful! Do you know rope twining? One experience from rope twining is to change sign of helicity at adjacent scales to make the torque elasticity more symmetrical. How can that be applied in your animation? And also filling space by having a double or triple helix would help. As well as showing all helices instead of having them created, like a zoom.", "scratch13764, 2019-01-13Definitely what my teacher meant when she said \"supercoiled.\"", "otaviogood, 2018-05-13This is great. I had wanted to do an infinite helix thing but thought the math would just hurt my head. \ud83d\udc4f\ud83d\udc4f\ud83d\udc4f", "tdhooper, 2018-04-23I've added some anti-aliasing to the outlines", "huttarl, 2018-04-16Talk about supercoiling...", "XT95, 2018-04-05<3", "mr5iveThou5and, 2018-04-03A m a z i n g  !!", "BigWIngs, 2018-04-03Ahhh nice! This is super satisfying to watch", "tdhooper, 2018-04-03ugh https://www.shadertoy.com/view/MdGcz3", "tdhooper, 2018-04-03I have an idea where the issue is... does [url]https://www.shadertoy.com/view/MdGcz3[url] exhibit the same problem, or look broken in a different way?", "FabriceNeyret2, 2018-04-03might be a wrong clamp use ( legit API is v, a,b, not a,b, v )", "", "gotcha: in addPipe", "FabriceNeyret2, 2018-04-03wow yes, I totally don't see that (and was expecting at most an alpha blending for transition :-) )", "Usual compatibility suspects: https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/", "tdhooper, 2018-04-03Thanks all  ^.^", "", "Cubello, FabriceNeyret2, I guess you're seeing the same problem, I'll see if I can find some hardware to test on.", "", "In the meantime, there's always the gif https://media.giphy.com/media/U8lTznWkiDY2NlX65L/source.gif", "shau, 2018-04-03Beautiful", "iq, 2018-04-03Super nice!!!!!!", "dila, 2018-04-02holy wow!", "Cubeleo, 2018-04-02I think there is an uninitialized variable in there or something causing platform differences.  When I run this on my Mac with Intel GPU, it is awesome recursive perfection.  When I run it on a Linux box with NVidia it jumps during the rotation.", "FabriceNeyret2, 2018-04-02Nice !", "I was waiting for a full-scale DNA for long, this is almost there ! ;-)", "", "( would be even cooler to have a smooth transition, though)", "flockaroo, 2018-04-02wow! very good!", "Shane, 2018-04-02 This ticks all the right boxes. Beautifully rendered.", "nicoptere, 2018-04-02super nice motion & render, it 'feels' just right", "congrats", "ttoinou, 2021-03-058K60 render on YouTube", "lsdlive, 2019-02-13Thanks guys !", "", "@FMS_Cat: The glitch effect is strongly inspired from this shader https://www.shadertoy.com/view/MltcWs we just simplified it a bit, and added time parametrization.", "", "@Dave_Hoskins: thanks ! didn't know about that.", "FMS_Cat, 2019-02-04quality glitchy posteffects!", "Dave_Hoskins, 2019-02-04You can set 'time' to the media position at the top of 'mainImage' by time = iChannelTime[0];", "Orquesm, 2019-02-04Supercool", "aiekick, 2019-02-04marvelous", "lsdlive, 2019-02-03Soundtrack added!", "Normally the shader should be sync on the music at 45 seconds.", "Dave_Hoskins, 2019-02-03? No music ? Looks nice though.", "lsdlive, 2019-02-01Thanks a lot guys !", "", "We're going to see with Triace, the musician, to put the soundcloud on our shadertoys. Notice that it will be out of sync, because this shader is split into two scenes and cut with this other scene: https://www.shadertoy.com/view/tdBGWD (my part starts at 45 seconds & shows up again 98 seconds).", "", "@FabriceNeyret2 : yep totally on purpose, you should see a very dark blood stain.", "DBBH, 2019-01-31WOW!!!!!!!!!", "cbrpnk, 2019-01-31That's pretty!", "iq, 2019-01-31Nice nice nice!!! Put sound(cloud) to it!", "iapafoto, 2019-01-30cool", "FabriceNeyret2, 2019-01-30cool !", "NB: almost totally dark up to t=5s . is it expected ?", "jaszunio15, 2022-05-13I'm impressed how fast your shaders are!", "danhel95, 2020-08-25impressive ! u really a fire-man", "huttarl, 2017-07-28@Duke: Well there you go. Duh. :-) I had looked for it and missed it. Probably because it was commented out!", "Duke, 2017-07-28@huttarl:You could. Just uncomment #define MOUSE_CAMERA_CONTROL", "huttarl, 2017-07-28Very nice! Feels so \"solid.\"", "Wish I could rotate it using the mouse.", "rez, 2017-07-27marvellous! and run really fast on my horribly slow computer at work!", "demofox, 2017-07-27So tasty!", "vgs, 2017-07-26ohhh yeah!", "xiazhenyz, 2017-07-26it is great!", "Duke, 2017-07-25Thanks for the comments", "tsunamayo, 2017-07-25Glad to see this shader and Duke as shader of the week !", "etale_cohomology, 2017-07-25This is quite sexy =)", "clintolibre, 2017-07-25This is the kind of shader I wish I could make! It's so cool!", "LukeRissacher, 2016-08-08awesome", "CaliCoastReplay, 2016-08-06Sickk stuff", "Shane, 2016-01-08Love it.", "Duke, 2016-01-05Thanks again", "FabriceNeyret2, 2016-01-05sch\u00c3\u00b6n !", "iq, 2016-01-04Very nice!!!", "Duke, 2016-01-03Thanks", "Harha, 2016-01-03Lovely.", "aiekick, 2016-01-03wow marvellous", "iapafoto, 2016-01-03Super cool and fast !", "dot23, 2021-03-19float Scale = 3.14159; gives some nice results", "I was thinking i would be cool if the model morphed over time...", "ttoinou, 2021-03-01Incredible ! Would be nice to have a default camera movement though", "to render a video out of it", "Armaciek, 2020-02-17Sweet!", "jarble, 2020-02-15It's called the \"Mandalay fractal\" because it resembles one of the temples in Mandalay.", "Nina9, 2020-02-10amazing!", "Logos, 2020-02-08ollj - the word \"shit\" was really unnecessary...", "cyperus, 2020-02-07Perfect! I wonder what will happen, when \"young\" kids start to play with this stuff.", "aiekick, 2019-06-24wow how i missed this one, very cool. ( a lot of spam here...)", "Plento, 2018-10-26I think there's a tear in my eye", "ollj, 2018-09-28[This comment has been hidden by the shader author]", "ollj, 2018-09-28[This comment has been hidden by the shader author]", "ollj, 2018-09-28[This comment has been hidden by the shader author]", "ollj, 2018-09-28i got my quaternionShitTogether and my \"breakthroughs\" of a quaternion camera that moves trough fractal/distorted space are:", "", "a lot like [MdV3Wz] ,but with different camera and sligthly changed collider", "https://www.shadertoy.com/view/4tSyRz", "", "later variant,with spartial distortion, dynamiceps-p\u00fcrecision, reflection and bad phong:", "https://www.shadertoy.com/view/MlByWh", "ollj, 2018-09-28i thought about adjusting the avatar size to the distanceTosurface, too.", "its kinda how googleMapsVR changes your size (distance between your eyes) so that your feet always touhh the ground of the planet, relative to the distance betwene exes and spheroid-surface. the higher your eyes are above ground, the smaller everything appears to be relative to yourself.", "", "the side effect is that you turn into godzilla by jumping off a skyscraper. so this has its discontinuities and nausea inducing moments.", "therefore googleMapsVR needs a patch for movement, it blurs peripheral vision to avoid nausea from accellerations and scale changes in VR space. its a nice compromise and great UI.", "this drawback is not worth it for a fractal explorer, or are they?", "akhgary, 2018-05-13you are demigod", "Dave_Hoskins, 2018-03-30@davidjonsson It's not a zoom.  I'd rather people just flew it and hit what-ever was in the way. .  .", "davidjonsson, 2018-03-30Nice! Suggestion: Adjust speed to be proportional to distance in forward direction.", "KylBlz, 2016-12-04Really nice controls and collision detection! Can't believe the collisions work so well on such a complex fractal", "zackpudil, 2016-11-16Awesome! Love the atmosphere.", "Dave_Hoskins, 2016-08-21@ollj You're welcome to copy it and put your own 'shit together' on it!", "ollj, 2016-08-20i want a 2nd lightsource, circling around the camera, to be able to see anything in the darker cave areas.", "ollj, 2016-08-20i prefer high fps over antialiasing of fractals that by thgeir recursions defy antialiasing.", "ollj, 2016-08-20please get your (quaternion) camera rotation shit together:", "quaternion code on this page (and linked pages there) should do:", "http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/transforms/index.htm", "but your shadertoy likely does not benefit from quaternion code and should just multiply matrices (of AxisAngle rotations).", "", "I like to think of ANY rotation as if it is an AxisAngle rotation because it is easy to model in euclidean space. I am not a savant who knows a matrices rotation by looking at it!", "any rotation in 3d comes down to AxisAngle, you translate points around an axis by an angle (in radians)", "An axisAngle rotation is a vec4", "it translates to a mat3 rotation matrix (and back).", "As usual, multiplying 2 rotation matrices returns a rotation matrix that is identical to applying the 2 matrices in the same order.", "this is non-commutative, order matters just as it does when you divide.", "---", "a camera() function can be defined by 3 point parameters:  position, target, up-direction.", "most simple (shadertoy) camera functions use these parameters (and fragment.xy),", "because they are intuitive and simple functions to return RayDirection (and RayPosition).", "", "That RayDirection is then multiplied|rotated by the rotation matrix that you get from the methods below:", "---", "interruption:", "There are other \"camera()\" functions that take (position and an AxisAngle rotation (and fragment.xy)) as parameters to orient the camera to rotate a camera by an angle around an axis.", "but these are less intuitive, less modifiable, more elegant, and require more knowledge about rotations in 3d.", "such functions directly take your rotation as axisAngle. their internal rotation basically adds one more rotation to the cameras orientation, set by fragment.xy", "you may notice that you can build such a camera() function by understanding \"matrix rotation solution\"", "---", "to get a rotation (composed of a sum of rotations) to rotate a point by it....:", "", "matrix rotation solution (better|easier for summing <4 rotations)", "- 1st: convert AxisAngle rotation to mat3 rotation matrix", "- 2nd: matrix multiplications to merge rotations", "- 3rd: multiply vector with merged rotation matrix to translate a point to its rotated point", "", "quaternion rotation solution (better for summing >3 rotations)", "- 1st: \"Converting the AxisAngle rotation into a quaternion\"", "- 2nd: quaternion multiplications (the quaternion equivalent to matrix multiplication)", "... quaternion multiplication is only half as complex as matrix multiplication", "- 3rd: apply quaternion to translate a point to its rotated position:", "... converting the quaternion to a rotation matrix should be fastest on GPUs.", "... but there are 2 different approaches without matrices.", "... It basically adds a bit of complexity that the \"matrix rotation solution\" does not have.", "----", "why quaternions:", "max3*mat3 multiplication is 9* dot().", "quaternion*quaternion is almost only half as many multiplications and additions and functionally identical, just represented differently.", "beware tat quaternions, by storing the same rotations with less values, more quickly accumulate rounding errors.", "", "for newer GPUS not using quaternions can easily calculate just as fast as not using them.", "but using quaternions in long kinematic chains is definitely less computationally complex, likely saving energy, likely keeping a gui cooler.", "", "your shadertoy code likely does not need quaternion functions, because it rarely sums more than 3 rotations,where matrix is faster and more precise.", "but if you do add more than 3 rotations, the quaternion code below is likely faster:", "//of course it is also bulkier in source code than just multiplying matrices.", "----------------------------------", "//quaternion functions are untested and could contains typos:", "", "//return quaternion of normalized(!) axisAngle: a.xyz=axis a.w=angle", "vec4 aaToQuat(vec4 a){return vec4(a.xyz*sin(a.w*.5),cos(a.w*.5));}", "", "//return quaternion of axisAngle (after normalizing Axis): a.xyz=axis a.w=angle", "vec4 aaToQuatN(vec4 a){return aaToQuat(vec3(a.xyz/length(a.xyz),a.w));}", "", "//quaternion normalize", "vec4 quatNorm(vec4 q){return q/length(q);}", "//quaternion multiplications tend to lose accuracy, you chose how often you normalize them.", "//normalizing of course adds rounding errors.", "", "//get conjugate quaternion", "vec4 conjugate(Quat4d q){vec4 r=q; r.xyz=-q.xyz;return r;}", "", "//transform|rotate point p by quaternion q, \"like\" an axis angle rotation with axis trough (0,0)", "vec3 QuatTrans(vec3 p,vec4 q){float x=q.x;float y=q.y; float z=q.z; float w=q.w;//shortcuts", "//return vec3(", "//   w*w*p.x+2.*y*w*p.z-2*z*w*p.y+   x*x*p.x+2.*y*x*p.y+2.*z*x*p.z-   z*z*p.x-y*y*p.x,", "//2.*x*y*p.x+   y*y*p.y+2*z*y*p.z+2.*w*z*p.x-   z*z*p.y+   w*w*p.y-2.*x*w*p.z-x*x*p.y,", "//2.*x*z*p.x+2.*y*z*p.y+  z*z*p.z-2.*w*y*p.x-   y*y*p.z+2.*w*x*p.y-   x*x*p.z+w*w*p.z);", "//above function likely performs slower on GPUs than below function:", "return p1*QuatToMat3(q);}", "", "//a (likely faster on gpu) method is to transform the quaternion to its matrix form:", "", "//return mat3 transformation matrix of quaternion q, \"like\" an axis angle rotation with axis trough (0,0)", "mat3 QuatToMat3(vec4 q){return mat3(vec3 s=q.xyz*w.xyz*2.;", "vec3 x=2.*vec3(q.x*q.y,q.x*q.z,q.x*q.w);vec3 w=2.*vec3(q.y*q.z,q.y*q.w,q.z*q.w);", "//i am not too sure if buffering all these values in 2 vec3 makes it faster.", "return mat3(1.-s.y-s.z,   x.x-w.z,x.y+w.y,", "x.x+w.z,1.-s.x-s.z,w.x-x.z,", "x.y-w.y,   w.x+x,z,1.-s.x-s.y);}", "//there are different approaches to this identity:", "//see http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/index.htm", "", "float maf(float a,float b, float c){return fmad(a,b,c);//less percision, more speed", "//return mad(a,b,c);//explicit mad(), because we do not trust the compiler to be smart!", "return a*b+c;}//let it be implicit, but with explicit order!", "//explicit \"mad()\" or fmad()", "", "//quaternion multiplication is not commutative", "quatMul(vec4 q1,vec4 q2){return vec4(", "maf(q1.x,q2.w,(q1.y*q2.z))-maf(q1.z,q2.y,(q1.w*q2.x)),", "maf(q1.y,q2.w,(q1.z*q2.x))-maf(q1.x,q2.z,(q1.w*q2.y)),", "maf(q1.x,q2.y,(q1.z*q2.w))-maf(q1.y,q2.x,(q1.w*q2.z)),", "-q1.x*q2.x-q1.y*q2.y      -maf(q1.z,q2.z,(q1.w*q2.w)));", "//above should be identical to code below:", "// q1.x*q2.w+q1.y*q2.z-q1.z*q2.y+q1.w*q2.x,", "//-q1.x*q2.z+q1.y*q2.w+q1.z*q2.x+q1.w*q2.y,", "// q1.x*q2.y-q1.y*q2.x+q1.z*q2.w+q1.w*q2.z,", "//-q1.x*q2.x-q1.y*q2.y-q1.z*q2.z+q1.w*q2.w)", ";}//product of 2 quaternion rotations is identical of 2 rotations being executed one after another.", "//this often accumulates rounding errors to a point were you need to normalize the quaternion a lot!", "---", "exerpt:", "\"second life\" uses quaternions for anything. it doesn't have a vec4 type, it just has vec3 and \"quaternion\", force feeding you quaternion rotation and converting Euler- to quaternion-rotation.", "\"second life\" wikis and open-source scripts have some interesting solutions for quaternion questions", "such as \"why the hell does this plane rotate completely randomly\"", "Dave_Hoskins, 2016-02-24Hey Shane, thanks for the comment. If you're replacing the fractal, don't forget you have to do it in 'Buf B' AND 'Image.'", "Shane, 2016-02-02Great atmospheric scene. Love the brooding sky.", "", "The \"Scene\" equation seems to do a better job on this particular scene than other setups. I tried a few different algorithms, combinations, tricks, etc, and they all fell short.", "trapzz, 2016-02-01That's pretty great - I love the feeling of flying through an endless apcololyptic wasteland", "jt, 2016-02-01Wow", "Dave_Hoskins, 2016-01-31The define at the top will enable anti-aliasing. It doesn't slow it down too much, because of the first pass (Buf B) already marching forward 2x2 pixels into the scene.", "GregRostami, 2016-01-31PERFECT!!", "XT95, 2016-01-31Awesome!", "iapafoto, 2016-01-31Super  fractal and lightening are wonderfull", "Dave_Hoskins, 2016-01-30Thanks - yes, I enjoy flying too!", "eiffie, 2016-01-30Great fun to fly around these Dave!", "Carandiru, 2021-05-26one of my favorites!", "lz, 2020-05-19Amazing.", "shau, 2020-04-07Thanks. I have fun doing it", "rhgrafix, 2020-04-06 You do nice work!", "iapafoto, 2018-05-08rhooo !", "pthextract, 2018-04-14Ohoho!", "834144373, 2018-04-04Superb!", "shau, 2018-04-03Thanks all. Yup rm -f is forced removal (Docker containers in my case).", "samuelotherion, 2018-04-02someone has to copy it quickly before it gets removed!", "Shane, 2018-04-02Really pretty. The stringy fractal-like viscous substance inside the sphere turned out really well.", "dila, 2018-04-01very nice indeed", "ocb, 2018-04-01BEAUTIFUL !!!", "what means the title?", "duvengar, 2018-04-01Wow", "vcxiaohan, 2022-08-25It's amazing, is there a three.js demo, thank you!", "vcxiaohan@foxmail.com", "sary, 2021-09-20Hi, great work. I am interested in the three.is version.", "sarcasticry@gmail.com", "", "Thanks", "mchello, 2020-01-13please mail to me", "mchelloo@gmail.com", "", "please", "cooldar, 2020-01-03how can i contact you?", "aishwaray1, 2018-09-22It is really great. Can you please contact me aishwaray@gmail.com. We are working on jewelry space and need your help with shaders.", "TomLi, 2017-09-072813123482@qq.com", "TomLi, 2017-09-07i  want use it  in shadermaterial  by threejs  ,but i don't have a good way to do it", "TomLi, 2017-09-07how  can  i use it in threejs", "Nrx, 2017-04-10Oh! Indeed! I just removed this instruction; thanks for the notice (I didn't come on Shadertoy for too long!).", "Nrx, 2016-09-29Hi Robberob, I just sent you a mail", "Robberob, 2016-09-29Hi Nrx, can you go in contact with me too? starvolution@gmail.com", "srinaath27, 2016-09-22Great example. I have trying to convert to a three js shader material since yesterday. Is there a way to use it as a three js shader?", "Nrx, 2016-09-13@Alex: thanks; I'll send you a mail!", "volk, 2016-09-13My email is : alex@gazitit.com", "Nrx, 2016-09-11Hi Alex,", "", "You may leave your email address here, and then I will send you a message in private.", "", "Nicolas", "volk, 2016-09-11Hi,How can I contact you?", "Alex", "CaliCoastReplay, 2016-08-17Wow best diamond on site imo", "otaviogood, 2015-10-30I hadn't seen this in a while. The refraction looks great!", "Nrx, 2015-08-04If you're interested, you can see another scene here.", "Nrx, 2015-07-18So, I just implemented the ray cast per color channel (I'm also testing an optimized version in \"private\", which avoids doing the first ray marching loop 3 times while it's the same for all channels).", "Nrx, 2015-07-18\u00e2\u20ac\u00a6or, should one just create 3 rays (1 for each channel: R, G, B) once the origin ray first enters the material, then handle these 3 rays like the current implementation does? (i.e. each of these R/G/B ray will bounce in the diamond until it quits and eventually reaches the cubemap) The code would essentially be the same except that the raycast function would take a specific refraction index in argument, and return a scalar value instead of a vec3 (= intensity of the channel, not a color)\u00e2\u20ac\u00a6 I'll maybe try that when I'll get access to a computer .", "Nrx, 2015-07-17@otaviogood: Hi! Actually, variation of the refraction index depending on the wave length is something that I attempted to take into account when I made the first version of this scene (my \"Diamonds are Forever\"), but then I gave up with this idea because it's actually a bit more complex than what you proposed above (at least, that's my understanding of the actual physic behavior of the light): there shouldn't be just 1 but several different new rays each time an incident ray enters or exits the material (i.e. the lines 143~153 should generate multiple new rays)... and knowing that 1 origin ray can bounce several times in the diamond, this becomes quite a heavy stuff to manage :S.", "otaviogood, 2015-07-17One thing that I think is cool about crystals is that the refraction shifts the wavelengths of light like a prism and it makes colors. I made a hack to do that. It's not the most technically accurate, but I thought it was entertaining. Just replace line 124 with:", "float refracts = float(rayIndex);", "float scale = 0.004;", "vec3 backColor = textureCube (iChannel0, direction + vec3(0.0,0.0,refracts)*scale).rgb * vec3(1.0,0.0,0.0);", "backColor += textureCube (iChannel0, direction + vec3(refracts, 0.0,0.0)*scale).rgb * vec3(0.0,1.0,0.0);", "backColor += textureCube (iChannel0, direction + vec3(0.0,refracts, 0.0)*scale).rgb * vec3(0.0,0.0,1.0);", "leshaaa, 2015-07-16Very impressive, Nrx! Thank you!", "poljere, 2015-07-16Nice!", "catafest, 2021-07-11... is a representation of space distortion ... similar happened to energy radar waves ... if you know math then you can see more at: https://en.wikipedia.org/wiki/Radar", "victusfate, 2013-11-13sahweet", "Azorlogh, 2021-06-28This is fascinating", "jt, 2017-06-30Neat!", "zevanrosser, 2017-01-26this is great", "cornusammonis, 2017-01-22I ported that gaussian smoothlife system I mentioned https://www.shadertoy.com/view/XtVXzV", "chronos, 2017-01-21@cornusammonis: Thanks for the input!", "I can't tell you what it's based on, because I honestly can't remember the sources I used to check my code against. It's probably a mishmash of multiple sources, and mostly Rafler's original code I think.", "My offline version used FFT and was more or less a direct implementation of the math. The separable kernel approach sounds interesting!", "", "You likely hit the nail on the head concerning the rounding. I didn't really bother to be all that careful with the numerics. Just enough to get it working the way I wanted =P", "cornusammonis, 2017-01-21This seems to be based on the Ready implementation? The convolution unfortunately can't be optimized very much without using FFT as Rafler has done in his original code, or by using a separable kernel (which wouldn't have the same behavior). If you're interested in the latter you can check out my implementation in Ready (gaussian-smoothlife).", "", "I don't see anything obviously asymmetrical in your code. It's possible that's actually caused by rounding error, since the convolution terms aren't added together symmetrically, i.e. adding terms in left-right or up-down pairs.", "chronos, 2017-01-21@FabriceNeyret2: Yeah, I'm aware", "It's probably due to a slight asymmetry in the shape of mouse drawing (or maybe even the convolution?),", "and the symmetric pattern might not be very stable (Just a guess).", "I find the \"line launcher twin gliders\" (name made up right now) to be kinda cool. You can build stuff with them! Together with the very stable structures, produced by single clicks, you can make neat designs", "FabriceNeyret2, 2017-01-21NB: when I let the mouse long enough and release, there seems to be a systematic slight asymetry : 3 growing heads are launched NE,SE,SW, but only a glidder NW.", "chronos, 2017-01-21The original paper by Stephan Rafler: https://arxiv.org/abs/1111.1567", "A superb explanation of SmoothLife, by Mikola Lysenko at the 0 FPS blog: https://0fps.net/2012/11/19/conways-game-of-life-for-curved-surfaces-part-1/", "(The math gets a bit dense at the end if you are not familiar with PDEs and signal processing, but the basic idea is not that complicated, I promise!)", "chronos, 2017-01-21Controls:", "Draw using the mouse (Try a quick single click at an empty location, clicking then holding the mouse button down for varying amounts of time, and multiple consecutive clicks at the same location)", "Space-bar          : Restart", "Up arrow key     : Clear all", "Down arrow key : Toggle rule set inspection (screen uv axes are outer ring (annulus) fill and inner disk fill, analogous to GoL cell and neighbor state)", "FabriceNeyret2, 2017-01-21Yep, this continuous version was fabulous, good idea to port it here !", "(there is also a 3D version, but it's harder to get here :-) )", "romainguy, 2022-12-13@kammutierspule That division is folded in the V term (V is the geometric shadowing term with the 4*NoV*NoL division, see https://google.github.io/filament/Filament.html#materialsystem/specularbrdf/geometricshadowing(specularg)). Feel free to use this shader however you want.", "kammutierspule, 2022-11-17On the Fr component, why are you not dividing by ( 4.0 * NoL * NoV ) ?", "kammutierspule, 2022-11-16Hello, can I use your source code on my shadertoy and for demoscene productions proposes?", "Do you have any license or can I just link to your profile?", "chemia, 2022-06-02Fd_Burley(...) should use \"roughness\" instead of \"linearRoughness\".", "In the paper f90 is defined as: 0.5 + 2 * roughness * cos^2(\u03b8d)", "icaroleles1, 2020-09-30Someone can explain this sphericalHarmonics function?", "jorge2017a1, 2020-02-11Interesante tecnica de iluminacion y color!!!...Bien...gracias por compartir.", "ShadowFlare, 2019-06-09One improvement: the procedural texture of the checkerboard and on the ball could use some analytical filtering, as seen in this article: https://www.shadertoy.com/view/MdjGR1", "antovsky, 2018-03-06great sample! really clean and helpful to have all this in one place.", "nexor, 2018-01-31That's true, I was talking about the default distance function: float distance (type p0, type p1), check the '?' at the bottom right of the editor window", "romainguy, 2018-01-30@nexor, there's no function called distance in this shader", "nexor, 2018-01-30You are using distance as a variable name thus shadowing the actual distance function.", "CaliCoastReplay, 2017-08-13This is a great teaching shader.", "valentingalea, 2017-01-09very nice reference implementation!", "jt, 2022-01-29So cool!", "Xhento, 2016-05-29Hello! This shader looks great!.", "I want to use this shader in one of my graphic programming projects but I'm getting this strange effect:", "https://gyazo.com/6479ba59d05782dc38901ae1e19f969d", "Could you help me? Thx a lot.", "yamahabob, 2015-10-05thanks! I'll have to learn how to do that stuff first, but I'm sure there's no shortage of examples on shadertoy.", "iq, 2015-10-05nice! add shadows, god rays and some motion blur, some filmic coloring... and this is a win!", "poljere, 2015-10-04Cooool!", "aiekick, 2015-10-04nice", "jonasfrey, 2022-11-07nostalgia hits hard", "IWBTShyGuy, 2020-12-01Oh... It's fantastic...", "saidwho12, 2019-11-23Ah alright! nvm then.", "P_Malin, 2019-11-22Hi @saidwho12. All the windows are actually slightly transparent. See float   UIStyle_WindowTransparency() \t{ return 0.025f; } in Buffer A. Setting this to 0.0f should make the window look solid. There are some bugs in the blending code that make some of the windows look more transparent than others.", "saidwho12, 2019-11-21i3 6100*", "saidwho12, 2019-11-21Atleast on my configuration, Windows 10, Firefox 70.0.1 (64-bit), CPU is i3 6700 and GPU is GTX 950.", "saidwho12, 2019-11-21You have a bug with the color picker where you can see through the color rect.", "P_Malin, 2019-06-28Oops! Thanks, that should be fixed now.", "bernie_freidin, 2019-06-27wow.", "there appears to be a bug when i open a color picker dialog and then close it via the 'X' in the upper right corner - instead of closing it, it moves the other windows to the upper left.", "", "but seriously wow", "P_Malin, 2017-10-18I should have called this \"Oh dear imgui\"", "dcbrwn, 2017-07-07Whaaat? Color picker in fragment shader?! Jaw-dropping!", "TambakoJaguar, 2017-06-18Wow, amazing!", "Proe, 2017-06-15amazing stuff Paul!", "Andre, 2017-06-14Very very nice, windows, child windows, moving, resizing, checkboxes, sliders, scrollbars and even a colorpicker in a popup. Only thing missing is move to front of the focused window ;)", "P_Malin, 2017-06-14I added https://www.shadertoy.com/view/Msffzn which is more cut down and shows more example usage.", "EvilRyu, 2017-06-14super!!", "yahe, 2017-06-14This is awesome!!", "CPU, 2017-05-18nice!", "P_Malin, 2017-05-18+shadows", "demofox, 2017-05-12what year is this my dudes? This is freaking me out :P", "P_Malin, 2017-05-11> By the way, to give it a true oldschool Windows feel of authenticity, it needs to freeze for no apparent reason, or throw to the blue screen of death just as you're about to do something critical.", "", "Hey Shane, this is a big shader in webgl! It already freezes each time I compile and I already get a fatal crash every time I do something critical.", "No, I'm not even considering text formatting, but speaking of scrollbars.... ^^^", "Shane, 2017-05-11That's awesome. I used to love coding custom user interfaces with nothing more than pixel access. Wrap around text with scrollbars could be painful though. By the way, to give it a true oldschool Windows feel of authenticity, it needs to freeze for no apparent reason, or throw to the blue screen of death just as you're about to do something critical.", "CPU, 2017-05-10Excellent! I've just tested it on/off/on/off and there's definitely about 75% less compile time when using your macro.", "That helps make it a bit less painful to work on  It's a beast of a shader!", "P_Malin, 2017-05-10and of course I mean min(0, iFrame)", "P_Malin, 2017-05-10@CPU: Wow, that actually works. I only have one for loop but I made a NO_UNROLL macro that returns max(0,iFrame) (i.e. always zero; but the compiler doesn't know that) and I add that to my loop condition constant. The compile time is 75% of what it was before - I think.", "I only have one loop in this code but it is used for each font printing instance.", "jt, 2017-05-10YAY", "otaviogood, 2017-05-10OMG, that's a large shader. I wonder what apps I should program for this breakthrough new \"OS\"? :P", "zproxy, 2017-05-09cool", "P_Malin, 2017-05-09Yeah, hlsl has unroll, loop, fastopt attributes on for loops. I don't think glsl has anything similar. Maybe I can add a delta to the loop variables based on a texture lookup of zero", "iq, 2017-05-09Nice!!!! Haha. So good", "CPU, 2017-05-09Ah thanks Paul. I've noticed WebGL2 compiles much faster with loopCounts dependant on the contents of a texture/variable so they can't be unrolled. Not that it's possible with something this complicated!", "P_Malin, 2017-05-09Thanks folks.", "@CPU - The compile time depends on the number of windows, controls and font characters! A more typical setup for tweaking shader parameters takes less time to compile. If you #define MAIN_WINDOW_ONLY in Buf A. The compile time is reduced quite a bit.", "aiekick, 2017-05-09wow", "tsherif, 2017-05-09This is just crazy.", "iapafoto, 2017-05-09ah ah crazy !!!!", "flockaroo, 2017-05-09heh, nice! :-)", "BigWIngs, 2017-05-09Damn! Thats impressive!", "SudoNhim, 2017-05-0910/10, most responsive shell I have ever used", "GregRostami, 2017-05-09OMG!!!", "ollj, 2017-05-09and i thought my 22000character canvas was excessive.", "FlashyTheCreeper, 2017-05-08nice idea!", "knarkowicz, 2017-05-08Crazy! IMGUI 2.0", "CPU, 2017-05-08Windows 98 in a shader! Amazing! Any way we can reduce the compile times?", "XT95, 2017-05-08Mouhaha that's awesome! You are crazy", "Azorlogh, 2019-01-10That's awesome", "louiechic1, 2018-12-08how do i put this into my collection", "reinder, 2015-09-01I think I have missed this one. Really nice!", "leon, 2015-03-20Beautiful !", "FabriceNeyret2, 2019-03-22anyway, it has to be reminded that arrays are very costly in shaders: to be used only if no other way, or small enough.", "FabriceNeyret2, 2019-03-22it's just a question ob being webGL2 compatible or not. old basic smartphone or old browsers on old machines won't, but reasonnably recent should ;-) . Testing: http://webglreport.com/?v=2", "Bers, 2019-03-22@tholzer Thanks! Regarding the simplification, dynamic array indexing was not supported by WebGL at the time this was written (hence the ugly workaround). Seems like it is supported now, but I am not 100% sure that would work on all browsers.", "tholzer, 2019-01-26What a nice sphere Anti-aliasing trick", "BufferA simplification...", "void SLIDER_setValue(float idx, float val)", "{  if(idx<0.) return;", "sliderVal[int(idx*4.)] = saturate(val); }", "float SLIDER_getValue(float idx)", "{  if(idx>1.00) return 0.;", "return sliderVal[int(idx*4.)]; }", "pthextract, 2018-02-05Wow. Looks just great!", "Yosoyrolo, 2017-07-21Este es mi favorito de todos los tiempos! Amazing!!!", "z_Spark, 2016-12-16that's a great job.", "Bers, 2016-03-09Thanks! Sorry for the code bloat, I might try to do a shorter version for a tidier reference.", "samuelotherion, 2016-03-08so real! love it!", "jt, 2016-03-07looks great!", "mantra, 2016-03-07Awesome", "FabriceNeyret2, 2016-03-07suggestion for sliders : manage them in BuffA, so as to keep persistent states, to be sure than once mouse is clicked only the initial slider is tuned. (here it's very hard to keep tuning only one).", "dagelf, 2021-02-21Bubbob fans... there are some constants... BUBBLE_COOLDOWN = 0 ... aka yellow sweety. MOVEMENT_SPEED = 3 aka... Shoes!", "dagelf, 2021-02-21OMW! WOW! Well done. Only needs the best bit now... the bubble blowing sound. And then... seeing as that we've got shaders.... some shader effect mayhem! ... but again, WOW!", "jorge2017a1, 2020-11-27it is a very well done game ... and very complete .... excellent job !!!!", "........", "es un juego muy bien hecho ... y muy completo .... excelente trabajo !!!!", "cloister, 2020-08-29That... is epic. Literally my favorite classic video game of all time. I can't even begin to estimate how much I played that damn game in the student union building at my college back in the day...", "jt, 2018-01-24awesome!", "bertrand, 2017-03-25This code triggers a BUG (return is ignored) on Linux nVidia 378.13 (Chromium & Firefox):", "", "if(x < 0 || x >= SPRITE_WIDTH || y < 0 || y >= SPRITE_HEIGHT) return color;", "", "vec3 c = textureLod(iChannel0, (vec2(x + n*SPRITE_WIDTH, y + SPRITE_START_Y) + 0.5) / iChannelResolution[0].xy, 0.0).xyz;", "return c.x >= 0.0 ? (c * colorMultiply) : color;", "", "Adding an else {} or moving textureLod before the \"if\" fixes it.", "rockeyda, 2016-09-11OMG I LOVE THIS!", "wibblefoo, 2016-08-16Confirmed broken on GTX 1080 using Chromium 52.0.2743.116 on Debian GNU/Linux Sid, Nvidia 367.35", "It's very annoying, because it crashes all of Chrome (not just one tab) whenever this shader is included in the search/browse results!", "Had to use --disable-webgl to post this.", "rory618, 2016-08-13Somehow this shader has broken this entire website for me. Even with a 980 ti webgl has completely stopped working", "CaliCoastReplay, 2016-08-10This IS very nearly the entire game, isn't it?  Are you a wizard?", "dila, 2016-08-08super!", "movAX13h, 2016-08-08Congrats to the shader of the week! Sadly it is not working for me (chrome/win8/gtx970).", "stubbe, 2016-07-29coyote: Variables aren't initialized in HLSL either, but it is a compile-time error if the compiler cannot statically prove that a variable has been initialized before use. It is also required that you ALWAYS return the entire set of output semantics that you have specified. I find it profoundly weird that you can have code paths in GLSL that don't initialize fragColor for instance. It seems like it is only an opportunity to screw up, without giving you anything in return. I'm guessing that ANGLE is getting around this by just initializing everything to zero.", "coyote, 2016-07-29@stubbe, your shader still lacks the initialisation of fragColor in Buffer B's mainImage.", "As for the security comment, you've certainly got the point... (didn't think of that myself)", "If I had to guess I'd say that GLSL does not initialise variables by default because of speed, although it's ridiculous place for speed optimisation considering how complex shaders are nowadays.", "Just came to my mind, on Windows does ANGLE initialises variables during the translation from GLSL to HLSL, or does HLSL initialises variables by default?", "asneakyfatcat, 2016-07-28how the hell", "stubbe, 2016-07-27Ah, that is a silly mistake. I have added the initialization of fragColor.", "How is that not an error btw? I would think that this should either be error or at least have well-defined behavior. I thought one of the selling points of WebGL was that you could never read unitialized data for security reasons.", "coyote, 2016-07-27@fb39ca4, thanks!", "Yeah, I had too small browser window, that was why logo didn't work.", "coyote, 2016-07-27@stubbe, the logo is ok now.", "But you still haven't initialised fragColor in mainImage of Buffer B, and you use it as input and then as conditional output in PrintStr and Sprite. Because of that the black background is very noisy at many places on mac mini. (and probably some other macs, and perhaps some linux machines too) For example, the purple pixels around copyright notice are there because of it.", "Simple fragColor=vec4(0) at the start of mainImage of Buff B is enough to correct it. ;)", "Just to show you how the level looks without the initialisation. (sometimes it's different colors noise, but it's always there...)", "fb39ca4, 2016-07-27Coyote do you happen to have a screen that is less than 1493 pixels wide? If the size of the canvas, and thus the size of the multipass buffers is too small, the logo will be cut off.", "coyote, 2016-07-26Just beautiful!", "2 things:", "a) fragColor in Buffer B mainImage should be initialised (there is noise on mac mini...)", "b) corrupted logo", "Shane, 2016-07-26", "Dave_Hoskins, 2016-07-25Incredibly good! Everything is there.", "P_Malin, 2016-07-25Congratulations!", "knarkowicz, 2016-07-25@stubbe Oh, yes it looks like we are using the same encoding scheme. Sorry, I didn't read your code too thoroughly. The only difference is that my numbers are hardcoded and you generate them using defines and math. Didn't test it, but precomputing those numbers should speedup compilation. Yes, I guess that logo needs to take some time. In my shader I just decided to skip the title screen in order not to annoy Fabrice .", "stubbe, 2016-07-25knarkowicz: Looks to me like we are already using a very similar encoding scheme for sprite pixels. I'm basically packing them into the mantissa bits of floating point numbers. Am missing something here?", "", "It seems to me that currently most of the lengthy compile time is caused by generating the logo, which was the absolutely last thing I managed to get in there (on the plane to siggraph ). Moving that to a separate buffer seems like something worth trying. It seems very plausible that it would be faster because of a lot of non-linear optimization stuff going on in the compiler optimization phases.", "knarkowicz, 2016-07-25Nicely done stubbe. BTW you can speed up lengthy compilation times, by splitting shader with sprites into separate buffers (e.g. background/foreground) and by encoding sprite pixels using bits, instead of using a number per pixel (see https://www.shadertoy.com/view/XltGDr).", "P_Malin, 2016-07-24This is awesome.", "Hey reinder, I made it work on a tablet: https://www.shadertoy.com/view/lld3D4", "aiekick, 2016-07-24insert coin / but i have no money arf", "flockaroo, 2016-07-24wow superb!", "pellicus, 2016-07-24ok.. this is the winner", "reinder, 2016-07-24Wow! really good.", "", "Can you publish this shader using the \"public+api\" option? I want to try to make it work with the upcoming new version of the Shadertoy iOS app.", "stubbe, 2016-07-24Did I? I think this was actually already suggested to me by my girlfriend", "fb39ca4, 2016-07-24This is incredibly polished. But you missed the chance to call it Stubble Bobble.", "valalalalala, 2023-02-13This is so beautiful", "spalmer, 2021-08-02I was going to say amazing but a lot of others already said that.  In fact they already said all of the things I can think of, but", "iq, 2021-07-30I do not know why I never commented on this one before. Super amazing!", "catafest, 2021-07-28a good shader, success!!", "lz, 2021-07-28Wow <3", "dean_the_coder, 2021-07-28Jaw dropping-ly awesome. :O", "piyushslayer, 2021-07-28Absolutely Stunning!", "GCScholar, 2020-10-04OMG! I knew it!! I saw her FACE!!!", "GCScholar, 2020-10-04OMG! I knew it!! I saw her FACE!!!", "GCScholar, 2020-10-04This is kinda scary", "jorge2017a1, 2020-07-27all calculations are by hand .... wow ... surprising.........hard work !!!!", "............", "todos los calculos son a mano....guao ...sorprendente....un trabajo duro", "FabriceNeyret2, 2019-09-08:-O", "reinder, 2019-09-08@FabriceNeyret2, I modelled it directly in code in Shadertoy by trying out different primitives/numbers by hand (during a very long train trip).", "FabriceNeyret2, 2019-09-08Question: you did it entirely \"by end', i.e., estimating visually which primitive to code using which coefficient ? Or did you first sketched it with some modeling software ?", "lovelyH, 2019-06-11OMG. This is sooo good.", "dila, 2018-08-19superb!", "zproxy, 2018-08-13360 at", "Klems, 2018-08-13I wonder if this shader would be better as offline rendering/path tracer. The point of view is fixed, and there is even deliberate noise! Better lighting would help a lot imho.", "flockaroo, 2018-08-12super nice! her hairstyle reminds me a bit of \"the ring\" though ;-)", "Shane, 2018-08-12 Beautifully done.", "nabr, 2018-08-11whats her name ?", "zproxy, 2018-08-11nice. more work needed on the face and the back", "tholzer, 2018-08-11wow, impressive modelling, impressive model !", "reinder, 2018-08-10Thanks!", "@Dave_Hoskins: yes, you would expect that, but the model and the photographer spent a lot of time making sure that her nose (or face) is fully covered by her hair", "Dave_Hoskins, 2018-08-10I feel like there should be a slight hint of a nose?", "aiekick, 2018-08-10wow", "Mourtz, 2018-08-10that's rad!", "Dave_Hoskins, 2018-08-10It looks like a photo - amazing work!", "iapafoto, 2018-08-10Fantastic !", "knarkowicz, 2018-08-10OMG, this is just insane!", "Klems, 2018-08-10Very nice!", "BigWIngs, 2018-08-10Damn! Very good!", "blackjero, 2018-08-10Wow, superb composition and modeling. Is she inspired by Sadako or is it just a coincidence?", "patu, 2018-08-10I  her", "FabriceNeyret2, 2021-05-04so  lovely. quite looking like some real medical slice.", "Maybe ambiant occlusion could be stronger ?", "me_123, 2021-05-03The temporal reprojection Is Great!", "OscarSaharoy, 2020-09-04Ah wow thanks so much for showing me that!! Will be looking in depth at it and trying to apply it", "FabriceNeyret2, 2020-09-04( beside, maybe there is already some optimization saving calculation in most of the black area )", "FabriceNeyret2, 2020-09-04this is a case where my adaptive sampling trick might help https://www.shadertoy.com/view/3ljfRG, but on a fractal shape this is potentially at many places, while the shader is already  a bit costly.", "Still, 40% of the pixels are black, and 6% are in flat colored areas, so we could save about half of extra over-sampling cost. Not so impressive, though.", "OscarSaharoy, 2020-09-04Love this  I have a question, I set line 30 to this:", "", "const vec4  kC = vec4(1,-0.4,-.4,.2);", "", "and on the thin parts there's some aliasing or something, does anyone know a way to avoid that?", "0xAA55, 2020-07-09It looks like very tasty candy", "GregRostami, 2020-06-27Just amazing. The 'traps' really make it work ...", "BigWIngs, 2020-06-27Very cool, could almost be a cut open organ.", "Shane, 2020-06-27 Even without the realtime aspect, this is a beautiful example. If someone had have told me a few years ago that path tracing clean looking animated 3D fractals would be possible in a browser, I would have thought they were crazy.  Even now, it's a rare achievement. I wasn't really interested in realtime path tracing until learning about temporal camera reprojection a while ago, since it amplifies image quality tenfold. To my knowledge, you're the only person to put up a usable example anywhere.", "FabriceNeyret2, 2020-06-26'xactly :-)   ( but why human, specifically ? :-p )", "friol, 2020-06-26Nice but makes me think too much of that \"dissect the human body\" images", "jorge2017a1, 2020-06-26very nice fractal ... original !!!!! .. nice job !!!!", ".............", "muy bonito fractal ... original !!!!! .. buen trabajo !!!!", "Dave_Hoskins, 2020-06-26Super cool. The 'traps' really complete the shape.", "flockaroo, 2020-06-26wow! juliavascular system ;-)", "DaCuteRaccoon, 2023-06-05OMG THIS IS AWESOME", "pixeljig, 2020-10-22Can it be used commercially?", "dila, 2016-12-09just found this. very nice effect!", "darkshader, 2015-12-04doesn't work.", "raja, 2014-09-29Thanks movAX13h !! I just followed your advice in the ASCII shader.", "movAX13h, 2014-09-27Welldone!", "mpusch88, 2023-04-15this is no mine...", "kas1e, 2020-12-13Good shader, but have lots of unitialized variables making it looks worse than expected on some platforms. Line 95 should be something like : float dstBall, dstObj, dstGlow=0., d, eGap, bGlow=0., eGlow=0., eFlash=0., eMid=0., eVib, rnd=0.;", "As well as \"vec3 col\" unitialized too.", "dila, 2018-04-17Looks very cool. I see the similarities between this and Kali's work.", "duvengar, 2018-04-17love it!", "blackle, 2020-06-24the fish are so good I love them", "shaoming, 2020-05-28so beautiful", "realcyg, 2018-06-23htf ?!", "Hadyn, 2017-02-18This is stunning! The detail beggars belief; seriously inspirational!", "warlock, 2016-11-16this is jaw-dropping", "tomkh, 2016-11-09@movAX13h cool, keep it up", "movAX13h, 2016-11-09@BigWings sorry for spamming your wall. I'm looking forward to more models like this!!", "@tomkh yes, operation tree. I've made a basic webgl version too to play around with. It prints the scene code below the stage. The definitions for this version come from a database. The C# version has a XML file that you might find useful for your own editor. It contains all sdf functions, their parameters, the call mask and references to other functions they use so the editor can produce a minimum of code output.", "tomkh, 2016-11-09@BigWings: yes, it's just 256^3, even not fully utilized, because it could be easily 128*128*1024 or something for this model.", "", "@movAX13h: looks great! I guess more of this kind of editors will be popping right now. There might be many different ways to do it; I see you have operation tree, basically?. Maybe I will try experimenting with something as well.", "BigWIngs, 2016-11-09@Tomkh - Cool! Not sure what I am looking at. Is that the 3d texture on the right? Looks suspiciously highh res for a 3d tex.", "BigWIngs, 2016-11-09@flockaroo & dr2 - Thanks, I made those fixes.", "@movAX13h - Cool, I'll check it out!", "dr2, 2016-11-09Lovely fish. Those missing dorsal fins and a filled-in tail appear if you initialize bump=0. in line 299", "movAX13h, 2016-11-09@tomkh @BigWIngs I've made an editor (includes all nodes from mercury SDL lib) where you can replace the raymarcher and all functions but its not very convenient to work in yet.", "It would be cool to have a database for distance-based models like MediaMolecule is generating with their Dreams engine.", "flockaroo, 2016-11-09and... i dont see any dorsal fin as in tomkh's link. should it be there?", "flockaroo, 2016-11-09or actually... max(...,0.) is better instead of abs(...)", "flockaroo, 2016-11-09the fish body is all black to me because of a negative power.", "line 585 should be:", "float tailTrans = tailMask*(1.-pow(abs(1.-(o.b*100.+0.5)), 3.));", "...but then very pretty :-)", "tomkh, 2016-11-09Awesome!", "DE editor is a good idea. I was thinking along these lines as well.", "Meanwhile, I've tried to bake your Fish into 3d texture. It's really a great model!", "ttoinou, 2016-11-09Stunning!", "I agree with the DE Editor idea :-) . But we would need to agree on the 3D raytracer", "BigWIngs, 2016-11-09Thanks all for your kind words. It means a lot to me coming from you!", "", "@XT95 - About two looong nights ;) Made me think that someone should write a DE editor that spits our shadertoy ready code.", "@ipafoto - Get rid of the kelp and bubbles, that should help a lot ;)", "@Klems - You are right... but now I'm too lazy to change it ;)", "XT95, 2016-11-09Amazing!!", "How long did you spend to modelling this fish ?", "iapafoto, 2016-11-08wow super animation and modeling. Fish scales are also wonderfull.", "But only 3 fps here", "iq, 2016-11-08This is some serious modeling of a fish!!! So amazing", "Virgill, 2016-11-08Superb!", "Duke, 2016-11-08Beautiful!", "movAX13h, 2016-11-08Really good modelling! Welldone!", "tsunamayo, 2016-11-08Amazing !", "Klems, 2016-11-08Prettiest fish I've seen on Shadertoy, good job! Maybe the kelp could use more low frequency sway? The straight one doesn't look as good.", "Shane, 2016-11-08 Wow! That's an incredible scene. Best modeling job I've see in a while.", "iq, 2017-12-19Yes, there's no motion blur - it can be taken out", "ollj, 2017-04-13yes, definitely move the camera matrix out of the 2d loop. the camera matrix does not change trough these loop iterations.", "", "it  makes compile times longer, can make code slower, and in the long run can cause your graphic card to run out of memory during compilation, if you overdo that.", "Abstract_Algorithm, 2016-06-27Could you explain the line 32? Why changing the axes? Thanks.", "pyrite, 2015-12-24iq,", "Would it be a good idea to move the '//camera' and '//camera matrix' sections outside of the AA loops?", "", "When it seems to work as intended with them inserted at line 158. Should provide a small performance boost right?", "dila, 2015-12-16missed this one. lovely set!", "jt, 2015-12-16Very interesting!", "paniq, 2014-05-19very nice stuff", "iq, 2014-05-17You can now see the colored sphere representation if you uncomment line 9", "FabriceNeyret2, 2014-05-16hey, why can't I view the base from top ? ;-D", "", "NB: sometime the lobe representation is missleading. I found interesting to be able to switch between this representation and the colored spheres.", "", "wow: I was about to say \"why not fixing now this agravatingly wrong illustration on wikipedia\", but I saw you just did it ! enfin ! ;-) http://en.wikipedia.org/wiki/Spherical_harmonics", "mmalex, 2014-05-15cool! oddly, on my pc (windows, chrome, angle) some of the SH are missing - eg, of the linear terms, only p02 is visible (p01, p03 dont show). also p05 and p07 are missing.", "vgs, 2014-05-15What a coincidence! I started studying this topic in this week.", "This will be helpful, thanks!", "jt, 2021-09-05looks fantastic!", "PauloFalcao, 2021-07-13Very cool technique!", "tholzer, 2020-02-18A very interesting solution!", "You can add some interaction to test 'octave value changing' by replace line 142 to", "p = (1.+2.0*iMouse.x/iResolution.x)*m*p; // next octave", "iq, 2019-12-24tomkh, yes. That's the idea of this shader, it's all explained in the description of the shader.", "tomkh, 2019-12-06Nice, but ;) I need to make a bit clarity here about \"boundness\" issue. As we know, pretty much every noise is a bounded distance field (value, gradient, etc..) as long as you guarantee that |gradient| <= 1 (this is often overlooked detail in Perlin's classic gradient noise). It would be nice of course to have true distance field and |gradient| = 1, but even here, if you use smin, it can get pretty low and slow down your ray-marching. So the problem with boundness is not the noise itself, but the fact you may be scaling and adding noise values FBM-style for artistic purposes (say to get less or more roughness) and the resulting complex function is usually not bounded and hard to tune, so at the end you have to scale down your ray-marching step.", "", "So, what guarantees boundness here is not the underlying noise function, but really the fact you are \"carving\" with the noise = using smooth boolean subtraction operation (smax) instead of adding and scaling noise values. See wlt3z8, where I achieve exact same thing with just a value noise - I did scale noise values a bit to assure |gradient| <= 1, but I didn't modify ray-marching step.", "", "Shane, P_Malin: about Voronoi variation / offseting centers, this indeed looks like special case of Power Diagram Voronoi. Just check out my old closest_circle function there, or just hold LMB to see the \"noise\" function. This one is a special case with offsets set to 0 and smin instead of min, which is never-the-less cool modification idea! And of course, Inigo is always good at presenting it in a good use-case.", "nabr, 2019-11-23nice", "iq, 2019-11-19Yes, I have tried some of those actually. In particular, randomizing the sphere locations withing their cell, which is equivalent to evaluating a voronoi pattern, works really well, I have a few Private shaders. The problem is that the search space becomes 3x3x3 or even 4x4x4 instead of 2x2x2, and things get too slow so I haven't published any. I also tried simplexnoise-like tetrahedral tiling to reduce the number of primitives, but I didn't get it to look as good as I wanted (you can try it setting line 23 to 1).", "", "I think the right thing to do to push this further is just embracing the fact that you need to go at least 3x3x3 in order to get truly randomized and smoother noiseSDF, and just deal with it.", "", "I also tried box shapes, but I didn't try shells nor I tried mixing them ll together. Spheres are nice because they are isotropic, so shells is probably a btter idea than boxes. But I hacen't tried them. I also have not tried doing subtractive spheres, that's interesting.", "P_Malin, 2019-11-18Excellent. I have wanted to try something with fractal sphere subtraction since I made this raytracer generate a sphere to test based on where the ray hit the surface. https://www.shadertoy.com/view/XsXSWN using smooth min is such a great idea.", "", "It feels like there is so much scope for many other stylistic variations of this:", "- hiding the grid more with a second sphere evaluation per iteration offset by 0.5 with a different functions for the radius from the hash value", "- randomly offset sphere centers", "- using different shapes - maybe like shells based off the same sphere distance value e.g. #define SPH(i,f,c) abs( length(f-c)-RAD(hash(i+c)) - 0.1 )", "- adding or subtracting the spheres", "", "Very cool.", "TambakoJaguar, 2019-11-17Very nice, looks like volcanic stone", "Dain, 2019-11-16If you lower the G1/G2 values you can get rid of the cracks, think maybe the spheres are sometimes too large?  Earlier version of this had a N param that let you sample larger lattice to remove them, but guess IQ removed it", "dr2, 2019-11-15Very pretty. But if you zoom in you start to see fine cracks in the surface (at least on my Nvidia/Linux GPU). Do these correspond to changing lattice cells when doing the (smin)  interpolation?", "Shane, 2019-11-15Great looking surface, and I love the simplistic lighting. The algorithm reminds me a little of 8 tap Voronoi and the simplex grid version.", "elenzil, 2019-11-15really nice", "blackle, 2019-11-14awesome. I saw your comment on my work. I like how you take multiple frequency scales and subtract using the smooth maximum, mine just takes the average of (domain repeated) spheres with random rotations and offsets which gives a relatively poor SDF. very cool work and very organic result c:", "FabriceNeyret2, 2019-11-14nice !", "jorge2017a1, 2019-11-14Saludos....Y gracias por compartir Su conocimiento, desde leon gto,mx", "CLPB, 2018-09-18Interesting. I like the square law conservation of energy being applied here.", "baddata, 2017-04-09dig it, love the diffraction stars, going to try to emulate that", "darkshader, 2017-03-12very cool, its that sort of shine I want to apply to particles to ake them sparkle.", "WAHa_06x36, 2014-05-08I must have been drunk last night. Everybody knows you don't get large bokeh and diffraction stars at the same time, what was I even doing?", "iq, 2014-05-08Very pretty!", "emilyonaire, 2022-07-07This looks so cool! It looks like what recording dreams could look like!", "jt, 2022-10-16Very atmospheric", "var, 2019-07-29amazing!", "zproxy, 2019-07-11ah. must be the way the texture was replaced by code only version.", "Dave_Hoskins, 2018-10-11Nice one zproxy, but what happened to all the ripples?", "zproxy, 2018-10-11360 at", "Imsure1200q_1UWE130, 2017-06-04 I like the shader! but could you fix those weird island(S) in the back? they look green.", "CaliCoastReplay, 2016-08-17Wow this is fast, even at fullscreen", "Phi, 2016-03-16Beautiful !", "Optimus, 2014-10-30This is beauty!", "reinder, 2013-09-17I did a small update of this shader (the shader uses the fast noise-functions by IQ and I rewrote the terrain-intersection-code a bit). Hopefully now the shader works on windows as well.", "fb39ca4, 2013-08-22Yet again, the problem on Windows has to do with ANGLE. Instructions to disable it: https://github.com/mrdoob/three.js/wiki/How-to-use-OpenGL-or-ANGLE-rendering-on-Windows", "reinder, 2013-07-02An screenshot running the shader on my mac (showing the mountains and bottle):", "reinder, 2013-06-26(oh, and you can look around using your mouse)", "reinder, 2013-06-26Ok, i've changed the return-statement in the raymarch-loop into a continue-statement. Hopefully it works if you're using Windows now.", "bloodnok, 2013-06-26I've got the bottle showing up on windows, although the water flickers slightly.", "Kecho, 2013-03-31this is beautiful. Where can I find information about the noise function that everyone seems to be using? Id like to understand the math behind it. Awesome shader!", "gtoledo3, 2013-03-30Awesome looking.", "PauloFalcao, 2013-03-28Very, very cool", "ssdsa, 2013-03-28Wow!", "Dave_Hoskins, 2013-03-27Yay! Someone used my star code!", "Seriously though, this is great work! Shame about Windows' WebGL.", "reinder, 2013-03-27If your using a Mac or Linux please uncomment line 1 to view the full shader with mountains and a floating bottle (screenshot: http://imgur.com/KKPZsj4)", "CPU, 2013-03-26wow! that's fantastic!", "iq, 2013-03-25nice! i liked the detail of the ripples of water around the floating bottle", "zenorbi, 2022-07-05Weird controls on 144 Hz (cannot drive straight), but works on 60 Hz", "N8Shader, 2022-04-16I BEAT THE YELLOW CAR", "eiffie, 2022-04-14For those who complained about the artistic off orange (not yellow!) screen I've added a racing game you can play while contemplating your lack of aesthetic appreciation.", "...and thanks the texture reads were all messed up.", "Observer, 2022-03-30I'm having the yellow screen as well. Only the first frame renders correctly (-> pause & rewind).", "archi1491, 2022-03-24[This comment has been hidden by the shader author]", "rmccampbell7, 2022-03-18This doesn't seem to work for me, I just see a yellow screen with bar and circle at the bottom. On Intel graphics/Windows/Chrome", "ollj, 2019-03-08good accellerations.", "but the road is a bit flat.", "", "could be a sliced julia revolte.", "https://www.shadertoy.com/view/WslXWr", "and the [ice-world] sahader with vehicles hints at how to stick to any ground surface, by alinging downside of the car to the normal of the gradient at the car position (or a smoother estimate, like a torus shape)", "bergi, 2017-08-26yes, got that yellow sucker!", "hi eiffie. i've done a Qt version of shadertoy for offline use. it's before the webgl 2 change, though. It retrieves all the shaders from the public api and also makes them browseable and searchable.", "https://github.com/defgsus/qshadertoy", "jt, 2016-02-29cool!!!", "hanmaokun, 2016-02-27@eiffie regarding running shadertoy offline, I've created <a href=\"https://github.com/BoxWorld/BoxWorld/tree/of090CMake\"  class=\"regular\" target=\"_blank\">this</a>, it is not running shadertoy shaders directly, but running shaders exported from Synthclipse, which is a tool can import shaders from Shadertoy. Anyway, really like your racing concept shaders, and I am building a AR hardware I call it Sand Reality, I want to make a car racing scene on it <a href=\"https://github.com/BoxWorld/SandRealityShaders/blob/master/Racing.stoy\"  class=\"regular\" target=\"_blank\">here</a> but not doing good. I hope you can find this hardware interesting and give me some tips on it. Actually I would like to introduce Sand Reality to everyone who likes Shadertoy, coz it provides another interesting way to play with Shadertoy shaders", "MMGS, 2016-02-25sweet!", "eiffie, 2016-02-25@otaviogood as soon as Beautypi adds \"in shader\" purchases.", "Nrx, 2016-02-25", "834144373, 2016-02-25super cool.", "otaviogood, 2016-02-25Amazing! I want to customize my rims!!!!", "iq, 2016-02-25This is SUPER cool!", "dine909, 2016-02-24i picked the wrong day to release my game!", "", "nice one (both) loving this!", "eiffie, 2016-02-24Thank you Imp5! I still love the original.", "TambakoJaguar, 2016-02-24Well done!", "frankenburgh, 2016-02-24Yeah! I got that yellow char", "poljere, 2016-02-24Really cool adaptation", "reinder, 2016-02-24wow, very nice! It even works on my iPhone", "eiffie, 2016-02-24I wanted to run these offline so I created this on github but I'm hoping someone has created something better??", "eiffie, 2016-02-24The original.", "ttoinou, 2017-03-13Changing the fractal while zooming looks good, more organic, we should try to find an equivalent for mandelbrot ! (unable to modify c0  )", "Dave_Hoskins, 2017-03-10@dila sub-pixel sampling in lines 59 to 66.", "dila, 2017-03-09very nice quality. i know it is hard to make them not go fuzzy with noise in the detail areas", "revers, 2013-05-12Pure, clean beaty of the Julia Set. Amazing job! ^^", "sienaiwun, 2019-12-06Here is a Unity version of the Beneath the Sea. https://github.com/sienaiwun/Unity_Underwaterfx .Caustic effect is in the forward rendering pipeline. Godrays in post effects, and sea in the Skybox. It is runnable on mobile devices (GL3.0),", "VoidChicken, 2016-11-20Ahh, clever. You make the water surface at the top 2d so it doesn't take up too much preformance, and no one really notices it too much.", "randomekek, 2016-03-02I get 30fps on my chromebox.", "dine909, 2016-03-01look here: https://www.shadertoy.com/about specifically at software requirements", "lIM, 2016-03-01Unknown error: No WebGL", "who can tell me how to figure out this problem?", "dine909, 2016-03-0160fps on macbook pro, which is good going, i get 1fps for iq's elephant!", "EntityBlack, 2016-03-01I have m3 Skylake (Intel HD 515) and this is running ~38fps. Anything that runs >20 is ok here", "And btw I love your demo!", "zel, 2015-09-29If I used caustic instead of causticX, I could have added depth and alignment to the rays. On the other hand, I was targeting a friend's i3 computer - next time I may constrain myself less :-)", "Shane, 2015-09-29Aesthetically pleasing, without too much code to read through. My favorite kind of shader.", "", "The caustic effect is great. The God ray overlays are a really nice touch. I remember playing around with a similar caustic function by adding a Z-component, then stacking on a few layers (post-process) to try and achieve a fake volumetric effect. It looked nice enough, but my computer at the time wasn't up for the extra calculations.", "", "It's always disappointing to have to cut shadows (or shadow iteration count) in favor of framerate. Ambient occlusion, or using some kind of function (like Nimitz's curve function) to enhance the peaks and darken the valleys can sometimes be a good consolation prize.", "zel, 2015-09-27I decided to axe shadows as they aren't very visible in this scene anyway, and threw in more sprite orbs. I have another underwater idea I'd like to prove out now that I better understand positioning without vertex shaders. Expect entities more creature-like in my future efforts; I'm going to move on for now.", "Dave_Hoskins, 2015-09-27What monster of the deep are you going to put down there?", "aiekick, 2015-09-27Wow", "dila, 2015-09-27caustics! no hearts?", "iq, 2015-09-26Nice!", "zel, 2015-09-26Thanks. I'm getting the same on my GTX 880M. Also, awesome caustic tiled texture, Dave - it saved me a bunch of time. I made a reduced form for the god rays :-)", "Dave_Hoskins, 2015-09-26I'm getting 60fps full-screen, but I do have a, now old, gtx680.", "zel, 2015-09-26I'd like add more to the scene, but I'm concerned about perf on slower machines. How well is this working for others?", "skal, 2022-04-20nevermind! i get it now, why it's not odd-positioned samples. Basically, the grid's resolutions is halved.", "", "Now, i realized there's a fine easy-to-miss fine point in the code: BufferC is used in-place during the TwentyStepPressure(), which makes the solving more Gauss-Seidel than Jacobi, right?", "My version, with an airfoil: https://www.shadertoy.com/view/ft2czK", "skal, 2022-04-16@trirop : i'm still puzzled at why TwentyStepRHS() is using odd-positioned samples and why there's a Gaussian-filtered pressure in the mix (TwentyStepPressure).", "The tutorial here http://jamie-wong.com/2016/08/05/webgl-fluid-simulation/#solving-for-pressure and other text on pressure-solver only use even-positioned samples (i+2, i-2, j+2, j-2) as building blocks.", "", "Anyway, very nice and inspirational work! I'm trying a remake of my own too...", "trirop, 2021-07-20Thank you . Applying twenty steps of the Jacobi method to solve the Poisson equation is equivalent to a convolution of the right-hand side with a specific kernel. This kernel can be calculated by applying the Jacobi solver iteration to a delta impulse (basically one white pixel on a black background). Using the previous pressure solution as an initial guess for the Jacobi pressure solver greatly enhances the solution quality in this case. The Jacobi method iteration is applying a diffusion step to the initial guess in each iteration, yielding a normal distribution as a convolution kernel. All these lines of code are just applying these two convolutions to the right-hand side of the Poisson equation and to the previous pressure solution respectively. One could probably speed things up a bit by using the separability of the Gaussian convolution of the previous pressure solution. Sidenote: Applying advection to the previous pressure solution would increase the quality of the simulation even further.", "apollo_eight, 2021-07-19Amazing 2D fluid simulation but I am trying to understand: where do all the terms in TwentyStepRHS and TwentyStepPressure code come from??? Those are pretty heavy routines!", "songxp03, 2020-08-28greate job", "FabriceNeyret2, 2017-10-29NB: \"the math\" is just the Navier-Stokes equation (or a simplified form). Many simple physical equations, and even simpler cellular automata equations, produce patterns because patterny instabilities are frequent in nature: think about how random noise can makes vibration in a mechanical device, or even music in instruments.", "Here: each time you create a shear, you create vorticity (tendancy to rotate), and any minute noise will then triger rolls. Think about a thin mayer of clay between your hands when you rub then.", "NEZ, 2017-10-28Man, your math seems so difficult to grasp, but also is a perfect demonstration to learn it.", "Did you write out that entire solver? If so, what the mother how are you coming up with that. I am an empty vessel sensei show me the path.", "Also, it's awesome how the the solver forms a crazy wave pattern. It's like the math is trying to tell me something, I just don't know what yet...", "Thanks for this awesome thing.", "trirop, 2017-10-26@Ultraviolet: Thanks for the nice comment and the cool remake. I came up with the idea by myself while trying to find any way to get this kind of fluid simulation working for shadertoy. Nobody would use or even invent such technique for non-shadertoy applications because this method is completely useless if you can call a buffer multiple times for one frame. It is still possible that someone has already implemented something similar, but I haven't found anything yet.", "Ultraviolet, 2017-10-26@trirop: Awsome work by the way, very inspirational to me. Was it your original idea to precompute convolution kernels for solving the Poisson equation (as in buf C), or do you have a reference for this method?", "Ultraviolet, 2017-10-26@Fabrice : I've made a remake of this shader, including extra details on the channels and a velocity visualization mode: https://www.shadertoy.com/view/4lScRG", "FabriceNeyret2, 2017-09-22may you describe the 4channel output of each buffer ? e.g., is the velocity field available somewhere ?", "Atrahasis, 2017-06-15err ? https://www.chromeexperiments.com/experiment/vortex-shedding-fluid-simulation", "xcise, 2017-05-03amazing...", "trirop, 2017-05-03The checkerboard pattern is an intrinsic property of the Jacobi method.", "If you divide your grid into a checkerboard pattern, every white cell has only black neighbours and the other way around.", "After one iteration the information flows from the black to the white cells and vice versa.", "Thats why the information comes either from the black or the white cells after n iterations.", "(This property is also utilized to accelerate the Gauss-Seidel method for serial pressure computation on the CPU)", "I calculated all the coefficients by systematical observation of the information flow for 20 iterations.", "The distribution is actually not 100% gaussian, because I only calculated 20 diffusion iterations.", "pixartist, 2017-05-03Ah I get it...but  can you tell me why the gaussian pressure function skips every other y coord ?", "pixartist, 2017-05-03How the hell did you calculate the multipliers for the pressure solver ?", "trirop, 2017-04-28Thank you!", "Your work is at least equally amazing jamriska ;)", "jamriska, 2017-04-28wow! amazing work", "coyote, 2017-04-26", "Duke, 2017-04-25Very nice!", "tehsauce, 2017-04-24It is the first here! Excellent work!", "trirop, 2017-04-23Thanks for the nice comments", "@balkhan: The numbers on the left divided by 4^20 tell the computer how much of every surrounding pixel lands in the currently porcessed pixel after 20 Jacobi iterations. That's why the pixel itself has the biggest multiplicator.", "balkhan, 2017-04-23So fast ... ~40 fps on a 660m, Impressive !", "I think I understand that your functions in bufC are unrolled loops but what are the numbers on the left corresponding to ?", "GregRostami, 2017-04-22WOW!!!", "stb, 2017-04-21You've implemented fluid in Shadertoy and it's not too bad. In fact, it's awesome! Now somebody needs to make a gas giant with it", "aiekick, 2017-04-2133fps on 750 ti", "aiekick, 2017-04-21awesome", "Polygon, 2017-04-21It almost kills my computer, but I'm pretty impressed.", "wyatt, 2017-04-21wow", "tlecoz, 2022-11-23Less than 100 lines ?!", "Amazing !", "Dave_Hoskins, 2021-05-08@ Cotterzz. Is that the Samsung S7? That\u2019s fast for a 11\u201d tablet.", "Cotterzz, 2021-05-07I'm trying out my new Samsung tab on shadertoy.", "This shader is consistently at 60-70fps, with a couple of 20fps and 120fps moments. When other visually rich shaders won't even load, or get to frame 2.", "Impressive stuff!", "codeandcats, 2021-03-12This in less than a 100 lines of code?! \ud83e\udd2f", "familyshadertoy000, 2021-03-12\u5389\u5bb3\u4e86", "mrange, 2021-03-09I like intense colors and the abstract look.", "nr4, 2021-03-09clean! I like it", "polarSeason, 2021-03-09Cool", "XT95, 2021-03-09Nice !", "dean_the_coder, 2021-03-09Very nice, and easy to follow code!", "z0rg, 2021-03-09Pretty !", "aiekick, 2021-03-06cool", "bpt, 2021-03-05nifty", "iq, 2021-03-04Super nice", "neozhaoliang, 2021-03-04As always, crazy shaders with crazy code.", "jeyko, 2021-03-04damn really cool", "Dave_Hoskins, 2021-03-04\ud83d\udc4d", "Kali, 2021-03-04Thanks @Dave. Btw, I'm using your hash function", "Dave_Hoskins, 2021-03-04I love the high contrast, warm colours on this. Vey nice.", "Cukierko_14, 2022-04-13A bit scary, but the job is really excellent!", "Ontujest, 2022-04-05great job, i like it", "Gravechest, 2022-03-08beautifull", "iq, 2022-03-07I was able to reduce the compile time from 5 secs to 2 secs (which prevents crashes from being reported and the warning sign from appearing) with the usual looped normal computation: vec3 calcNormal(in vec3 pos)", "{", "vec3 n = vec3(0.0);", "for( int i=min(iFrame,0); i<4; i++ )", "{", "vec3 e = 0.5773*(2.0*vec3((((i+3)>>1)&1),((i>>1)&1),(i&1))-1.0);", "n += e*map(pos+0.001*e);", "}", "return normalize(n);", "}", "oneshade, 2021-02-25Really nice modelling and animation!", "jt, 2016-02-29Cool", "TambakoJaguar, 2016-02-23Nice dragon!", "gaz, 2016-02-22I see.", "Dave_Hoskins, 2016-02-22Ah right, still excellent though.", "You know, computers are just never good enough, are they!", "gaz, 2016-02-22Thanks.", "Since chrome crashes, I removed back legs & ect.", "poljere, 2016-02-22Great!", "iq, 2016-02-21Very nice!", "GregRostami, 2016-02-21What an AMAZING model!", "Dave_Hoskins, 2016-02-21Nice model, and I like spiral motion of it's body. I was expecting back legs though.", "tomachi, 2021-07-31Next time I bring a girl back to my room I will have this already playing on my monitor.", "jeyko, 2020-03-27niice", "iapafoto, 2018-05-13Lot of very cool hypnotic paterns! Nice", "spalmer, 2023-02-23but on line 50 in n2rand_faster, isn't orig * inversesqrt(abs(orig)) == orig / sqrt(abs(orig)) == sign(orig) * sqrt(abs(orig)) ?  Why risk NaN?  Then the rest can be remapped with return fract(nrnd0 * .5)", "", "can you please refactor the t = fract(iTime) out of these functions?  Ideally the PDF reshaping should be separate from the white noise random number generator", "hornet, 2023-02-22A should have added this reference, for a bit more investigation into the remapping: https://www.shadertoy.com/view/WldSRf - do you see issues with the version Unity proposed, that I suggested in the comments below?", "demofox, 2023-02-20Hello again (;", "I noticed that sometimes the uniform to triangle code outputs a -1.5 which isn't valid.  It happens in the code you have, but also my \"fix\" which does rnd = fract(rnd + 0.5f) before running your code.", "In my \"fixed\" code it happens when the input is 0.0 or 1.0... or very close to these values it seems.", "There is probably a more elegant fix but I just test for it before the return.  In the blue noise texture case or similar, this stray -1.5 can make a big impact on the result.", "", "float ReshapeUniformToTriangle(float rnd)", "{", "float input = rnd;", "", "rnd = fract(rnd + 0.5f);", "float orig = rnd * 2.0f - 1.0f;", "rnd = (orig == 0.0f) ? -1.0f : (orig / sqrt(abs(orig)));", "rnd = rnd - sign(orig) + 0.5f;", "", "if (rnd < -1.0f)", "{", "if (input < 0.1f)", "rnd = -0.5f;", "else if (input > 0.9f)", "rnd = 1.5f;", "}", "", "return rnd;", "}", "demofox, 2020-01-14I hit an issue using this uniform to triangle remapping. The problem i hit is that yes it maps [0,1] to [-0.5,1.5] but when you put in a value of 0, it gives 0.5 as output. it increases from there, approaching giving 1.5 as output as the input approaches 0.5.  It then starts at -0.5 and continues upwards, approaching 0.5 as the input approaches 1.0.  This discontinuity is an issue if for instance you are trying to transform a blue noise texture to be triangularly distributed - it screws with the frequencies on the texture and makes it no longer blue noise.", "", "If you add 0.5 to the input and use fract to keep it in 0 to 1, it won't mess with the input noise frequency like that & will (primarily) just alter the histogram.", "", "float ReshapeUniformToTriangle(float rnd)", "{", "rnd = fract(rnd + 0.5f);", "float orig = rnd * 2.0f - 1.0f;", "rnd = (orig == 0.0f) ? -1.0f : (orig / sqrt(abs(orig)));", "rnd = rnd - sign(orig) + 0.5f;", "return rnd;", "}", "spalmer, 2019-11-18btw I did not see this mentioned anywhere, but the n2rand_faster, n2rand_erp, and the unity variation all essentially implement the inverse of the smoothstep function (3-2*x)*x*x", "spalmer, 2019-11-18Was actually shooting for n3rand with one call to nrand, but it's not the exact same shape distribution; maybe gaussian-ish enough to be useful to somebody though.", "hornet, 2019-11-18@spalmer - that does not look very triangular? More \"tent\"-like?", "spalmer, 2019-11-18Did you guys try out this function yet?  x * (2 - x * (3 - 2*x))", "hornet, 2019-11-07Thought I would add some notes, while this is on the front page", "", "I elaborated a bit on the \"reordering\" comment here.", "", "Also, Unity has done another variant of the pdf-remapping (keeps ordering):", "float remap_noise_tri_unity( float v )", "{", "v = v*2.0-1.0;", "return sign(v) * (1.0 - sqrt(1.0 - abs(v)));", "}", "", "link", "TomF, 2017-04-17Sigh - fixed - thanks.", "hornet, 2017-04-17(shader does not compile as trunc is now a reserved keyword)", "Alrik, 2016-11-30Hi TomF,", "may I use your triangle noise code in my commercial project to fight against banding effects? When its done, it will be a indie project which I want to share with other players.", "hornet, 2016-11-09Quick note that the abs/sign trick reorders the input. If used for distributions where this matters, e.g. blue noise, that becomes an issue. The n2rand_erp() function I posted in the comments does not have this issue.", "jt, 2015-12-15Useful!", "hornet, 2015-09-28Ach, I guess you are right. Clever trick", "", "We ended up using a modified random-function to return a triangular distribution directly:", "", "float n2rand_pd( vec2 p )", "{", "p += vec2( 0.07 * fract( iGlobalTime ) );", "", "//note: modified sine-less rand (see https://www.shadertoy.com/view/4djSRW )", "p  = fract(p * vec2(5.3987, 5.4421));", "p += dot(p.yx, p.xy + vec2(21.5351, 14.3137));", "", "//note: [0;2[", "float pxy = p.x * p.y;", "float tri = fract(pxy * 95.4307) + fract(pxy * 75.04961);", "", "return tri * 0.5; //for histogram", "}", "TomF, 2015-09-28I believe that is exactly the same result if you look at the two halves of the range separately - I just used the abs() and sign() trick to collapse the two sqrts into one.", "hornet, 2015-09-28Very interesting! We experimented with other ways to do this a while ago, and a colleague of mine (Erik Pedersen) came up with this formulation, which unfortunately uses two square-roots.", "", "float n2rand_erp( vec2 n )", "{", "float t = fract( iGlobalTime );", "float nrnd0 = nrand( n + 0.07*t );", "", "float r2 = 0.5 * nrnd0;", "float f1 = sqrt( r2 );", "float f2 = 1.0-sqrt( r2 - 0.25);", "return (nrnd0 < 0.5) ? f1 : f2;", "}", "iq, 2015-09-28Nice! And I like the max(-1.0,NAN) trick a lot too.", "makc, 2015-09-25you might want to know that in ff44(nightly), macosx10.10(yosemite), mbp17\"/2009 it is full of vertical seams: http://imgur.com/1f85LfI (it seems fine in chrome, same mac).", "Patapom, 2014-12-29Haha great! You're right on time! I quite recently came back to that problem of fixed world space sampling myself and copied your code for study and improvement...", "Except I got myself taken away by another more pressing (but also quite satisfying) problem of area lights and BRDF convolutions... Thanks for the update anyway!", "If you want to talk about that more directly, my mail is patapom at gmail ...", "Best regards (and good job for the new algorithm).", "huwb, 2014-12-28I've changed the algorithm - after a year of head scratching and multiple variants, I've now settled on using the completely stationary sampling I started to explore here, but a much simplified and optimized version. See the code comments. You should be able to clearly track stable features in the clouds as the move from background to foreground.", "Patapom, 2014-05-11Hi! Thanks for your nice and detailed reply, sorry for not answering sooner but I was tanning on a nice sandy beach in Corsica! 8)", "huwb, 2014-05-03Your second comment made me think about the difference between the ocean geometry use case and volume rendering. I'll talk about volume rendering (this shader) first and then compare with the ocean case.", "", "As far as I can tell, for efficient volume rendering, our pixel rays are fixed. Which means we have only one degree of freedom - the sample distances along each ray. We can't avoid the samples moving when the camera strafes/rotates. Thankfully though, the screen is relatively densely sampled (by pixels), and these particular sampling issues are usually not obvious.", "", "So X and Y are relatively densely sampled whereas Z is not densely sampled at all. This is why keeping the samples semi-stationary in Z makes such a dramatic difference (the point of this shader).", "", "So we're left to choose the sample distances. And this is what you eloquently referred to as fixed Z vs fixed distance sampling. On Pirates we used a half way between the two, tweaked by eye. I think it would be possible to derive the optimal 'curvature' of the sample positions, and also how much to move the samples when the camera moves foward/backward. Or perhaps change it dynamically based on the camera movement?", "", "Popping occurs when new samples are introduced at new locations. For this shader this happens only at the rear of the view. This can be addressed but that is a different story. But we don't get the kind of popping you are talking about if I understood correctly.", "", "For the ocean mesh we were snapping the mesh to certain rotations. In this case samples would pop in and out at the sides. The solution is simply to make sure that the verts and edges that pop are entirely offscreen (by making the mesh cover a slightly wider FOV than the screen). Then popping is not an issue - because it is not visible. Does that make sense?", "huwb, 2014-05-03Thanks for the comments Patapom! I'll reply to your first comment first.", "", "The idea was born out of necessity, to make the ocean work. But its probably already a standard technique in some other field - theres no such thing as a new idea!", "", "There is at least one algorithm to keep the samples completely stationary: https://www.shadertoy.com/view/ldXSzn . I'm not sure its useful though because you have to think about how to integrate steps through a volume and it may be awkward to handle samples blending in, whereas it is elegant for the tree approach where samples split/merge (line 228 to 233).", "", "There might be other ways to get an adaptive sampling based on splits/merges, without doing real intersections with the tree. I have a fuzzy idea about it but wasn't able to get anything written down.", "", "What would be really handy is an implementation of either strategy that generates the sample distances efficiently in a shader. Anyone?", "Patapom, 2014-04-25How do you handle \"sample popping\" when straffing though?", "I mean, imagine you have a user-controlled camera and not a fixed animated path, you can either handle simple movements like a rotation (by generating fixed distance samples) or a straffe (by generating fixed Z samples) but when you get a combination of both like with a first-person camera, my guess is that you get nasty popping...", "Is this what you're trying to explain at the end of your PPT? That \"straffing samples popping\" is not as noticeable as \"rotation samples popping\"?", "Patapom, 2014-04-25That's an amazing idea. How did you come up with that?", "Is the binary tree the only way to create fixed samples and handle samples split?", "huwb, 2014-03-24Thanks Dave! Yes this seems to be useful - or at least it would be if the distances were generated on the CPU", "Dave_Hoskins, 2014-03-23Nice presentation. And this looks great. The sampling positions are fixed so the camera movement doesn't cause sample location changes? Very nice.", "xef6, 2021-12-19beautiful, reminds me of myst in some ways.", "jeyko, 2021-02-05so cool", "jarble, 2020-12-15This shader runs slowly on my PC, so I made a few changes to speed it up.", "BettyGlauder, 2019-02-11it looks amazing!!!", "JoshScholar, 2019-02-08The antialiasing I did is twice as fast as the usual antialiasing because it only doubles the number of pixels instead of quadrupling them.  It's also doing some morphic smoothing which I'm starting to think is a bad idea, since it assumes you can tell the difference between an edge and texture from the local contrast, so it blurs all over the place.", "mds2, 2019-02-07You can see the shape in the smoke rings a bit better if you apply a touch of fish-eye to the camera, such as the following replacing the lines around 511", "", "vuMat = mat3 (ca.y, 0., - sa.y, 0., 1., 0., sa.y, 0., ca.y) *", "mat3 (1., 0., 0., 0., ca.x, - sa.x, 0., sa.x, ca.x);", "ro = vuMat * vec3 (0., 10., -40.);", "float stretch = 1.0 + length(uv);", "rd = vuMat * normalize (vec3 (stretch * uv, 3.2));", "dr2, 2019-02-07JoshScholar: I have been including an antialias option in some of my more recent shaders (just 2-3 lines of code); it's a tradeoff between speed and quality.", "felipunkerito, 2019-02-07Nice! Looks like something out of a structural engineer's brain", "JoshScholar, 2019-02-06Here's an antialiased version, since I've been playing with cheap antialiasing (2x samples instead of 2x2), and some postprocessing.  Note one trick I did was I didn't bother to render the water in double res like the rest.", "https://www.shadertoy.com/view/WdSGRc", "rory618, 2017-11-03Myst and riven is the first thing I thought of too! Looks like one of Ghen's labs.", "jt, 2017-11-03Awesome", "dr2, 2017-11-03Thanks everybody.", "@iq: I reduced the complexity in the default highest level of reflection; hope it resolves the issue.", "iq, 2017-11-03Very very nice, best lighting yet dr2!", "", "But it crashes my PC about half the times I try to load it... Any way you can optimize it a little?", "Shane, 2017-11-02Love it.", "flockaroo, 2017-11-02thats pretty!!", "Dave_Hoskins, 2017-11-01Bioshock? It's more of a Myst / Riven thing with me!", "Nice one.", "ollj, 2017-11-01oh a revision with more reflection, aurora and overall green.", "CPU, 2017-11-01so much detail!", "pyBlob, 2017-11-01reminds me about that bioshock lighthouse =)", "balkhan, 2017-11-01wow ! any books inside ?", "hornet, 2016-04-13I think this is \"correct\", using a 2bit wide noise and a triangular PDF (I assume the original valve-distribution is uniform, which I haven't actually checked) https://www.shadertoy.com/view/Md3XRf", "hornet, 2016-04-13Valve's method is also implemented here alongside other methods https://www.shadertoy.com/view/MslGR8", "One issue is it does not use >1bit dither-amplitude, which is non-optimal.", "Zavie, 2016-04-13Thank you everyone for the comments. I updated the test to better illustrate the effect. The 0.375 factor is indeed very subtle, and I was wondering if I hadn't missed a piece of context. I was hoping to get a combination of slow and fast gradients with the Hermite function, but with a view this small the bands are still narrow.", "FabriceNeyret2, 2016-04-13maybe you could have a look on how others dithering shaders here show the effect. one of mine with very limited gradient: https://www.shadertoy.com/view/XdtXWn. Others show zoom (beside pedagocical low-quantizations) https://www.shadertoy.com/results?query=dithering&sort=newest&filter=", "bgolus, 2016-04-12I made some modifications to your shader here: https://www.shadertoy.com/view/Md3SRX", "The banding is going to be hard to notice in your shader because it's only obvious on very small color changes. Valve's dithering is also oddly delicate only adding roughly +/-0.2 to the value 0-255 color value. For best results from dithering you really want to do a +1.5 to -0.5 noise range. My modification artificially limits the color count to increase banding and I have 3 versions of the dither function you can switch between by changing the DITHERTYPE define. I also mirrored the color to make the difference easier to see.", "Dave_Hoskins, 2016-04-12If I make 'ditheredColor' not add 'color', it's just black until I multiply it by a large factor.", "FabriceNeyret2, 2016-04-12maybe you should display a zoomed insert.", "", "Also are you sure that you account for the fact that pixels centers are int + 0.5 ?", "ollj, 2017-09-29i am looking for the rounded variant of this. voronoi is a bit overused, can not find the 3fold ones.", "kakaxizhhgjh, 2016-08-26so cool!!!!", "Optimus, 2014-09-26Wow! Stylish!!!", "erucipe, 2014-02-06super!", "GottZ, 2016-08-26lel this actually reminds me of \"hypno trip down the fractal rug\" by p01", "rcread, 2015-05-21I'm looking at this listening to the Charlie Brown theme.  Very cool.", "aiekick, 2015-05-21nice", "cyrilp, 2016-06-27beautiful !", "I'm trying to run it on an android phone but it's far to slow.", "What can we change to make it quicker at the expense of some quality loss ?", "reinder, 2015-09-01very beautiful", "shaderology, 2015-06-29hmm, interesting. whats your gfx card?", "baddata, 2015-06-29I'm on chrome on pc if that helps", "baddata, 2015-06-29I think something's not working as intended. I'm seeing mostly green with the sphere shadows just in the middle... the spheres themselves are moving around the outside edges. http://imgur.com/mhE6zLk", "squid, 2015-06-25Love the animation + sound", "iq, 2015-06-24Very pretty!", "kuvkar, 2015-06-24pretty!", "coyote, 2015-06-24A little slow on mac mini intel iris (16-17 fps), also some cyan artefacts around the sphere edges, but nevertheless very nice!", "GregRostami, 2015-06-24AMAZING rendering!", "dila, 2015-06-24really nice", "mu6k, 2020-06-24@demofox: yes, any sort of filtering would help this out a lot, I did not try temporal.", "CaliCoastReplay, 2016-11-27Just insanely real.", "iapafoto, 2016-11-22love diffraction", "demofox, 2016-11-21Very pretty! It seriously looks great, but it would be nice if the flickeryness could be smoothed out somehow.  Have you thought about maybe temporal filtering?", "patu, 2016-11-20Awesome!", "mu6k, 2016-04-04Hehe, right, it's a bit excessive.", "", "A higher specular exponent results in a smaller specular highlight. It is also amplified by 56. This is done so that the out of focus regions would result in a bokeh shape.", "", "The other method which generates extreme shininess are the reflections. For each pixel as long as the surface is hit the ray is bounced and it continues up to 3 bounces.", "", "Because of the reflection the color of the scene comes from the reflected background. All the day/night cycle does is to darken the background.", "Shane, 2016-04-04Don't know how I missed this one. It's definitely one of the nicer renderings I've scene on here. The chromatic aberration is a nice touch. So pretty.", "", "I was curious as to how you made the scene so shiny. A specular exponent of 1000. That'll do it. That'd have to be a Shadertoy record.", "mu6k, 2016-02-15thanks, unfortunately this is not as easy to plug in as my lens flare was", "iq, 2016-02-03Shinny!", "flexelektro, 2023-01-14very cool.", "Jsonco, 2022-12-28\u6211\u60f3\u8fd9\u4e00\u5b9a\u5f88cool", "jorge2017a1, 2021-02-16it is an excellent result .... very pretty smiling face !!!! .... and good video !!!", "........", "es un excelente resultado .... muy bonita cara sonriente !!!!....y buen video!!!", "ArtemisLin, 2021-01-20wow!!!! That's awesome!!! I learn from it, thanks, teacher!", "xwh736, 2020-06-11Thank you! I like it", "Alfonzo, 2019-10-08Wow!", "wcfairytale, 2019-09-30I smiled, lovely", "avin, 2019-04-12my favorite shader <3", "olgaflor, 2019-03-24Thanks cool ;)", "giorgionetg, 2018-08-01AWESOME!!!", "arminkz, 2018-04-29hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "akhgary, 2018-04-25cute as hell", "Danguafer, 2018-04-25Smiley on drugs", "MacSlow, 2017-11-11That is a very compelling variation of \"painting\" with math!", "woodorl, 2017-10-20Your tutorial is super helpful. Thanks a lot!", "yahe, 2017-05-23Oh my, totally make my day!!", "dila, 2017-03-09great tutorials too!", "Shane, 2017-02-26Love it. So cleverly executed.", "vgs, 2017-02-24Amazing! Beautifully crafted!", "shau, 2017-02-24Nice tutorial. Thanks", "public_int_i, 2017-02-24Fantastic", "zproxy, 2017-02-23shaders are the new gif", "TambakoJaguar, 2017-02-23Wow, aweseome and cool!", "gigatron, 2017-02-23  i like it .. good job , thx !", "coyote, 2017-02-23", "BigWIngs, 2017-02-23@blackjero - figured it out, fixed now", "@iq - I can't seem to get the video tag to work. Am I missing something?", "@everone else - Thanks!", "aiekick, 2017-02-23cute", "flockaroo, 2017-02-23wow, very well done!", "iapafoto, 2017-02-23incredible quality !", "poljere, 2017-02-23awesome!!!", "blackjero, 2017-02-23I think the way to handle it is to pretend it was intentional, hehe (the way it looks dead with eyes all white... it is cool)", "BigWIngs, 2017-02-23@blackjero - I know the coming-back-from-fullscreen bug.. don't know how to handle it though.. I'm open to suggestions ;)", "@iq - Thanks for the tip! Should be fixed now.", "GregRostami, 2017-02-23JAW DROPPED!!", "iq, 2017-02-23There's lots of love in this one!! Super well done!", "", "Shadertoy Hint - put your youtube link in between [video] tags to make a link (check the \"?\" little icon under the comments to see how this works)", "blackjero, 2017-02-23That's really nice, so much happiness in that one :-)", "", "It turns into an unhappy zombie version when we go back from full screen (on purpose?) which is kind of fun too.", "hyunxi, 2019-10-15Thank you guys, the turorial is very helpful and the discussion on the tone mapping to avoind calmping is very helpfull too. I learn a lot!", "alro, 2019-09-19Thank you for the expanded explanation", "P_Malin, 2019-09-19Thanks alro.", "When I say \"clipping\", I just mean that any color values output to the final screen buffer will get \"clipped\" when they are greater than one. Color values greater than one don't make sense for this kind of color space for output to a monitor so in the GPU hardware it is like there is a final piece of shader code that says:", "if ( fragColor.r > 1.0f ) fragColor.r = 1.0f;", "if ( fragColor.g > 1.0f ) fragColor.g = 1.0f;", "if ( fragColor.b > 1.0f ) fragColor.b = 1.0f;", "This can have a number of different terms like, clamping, clipping, or saturating.", "In HLSL the instruction saturate (which is often free) limits values to be between 0.0f and 1.0f inclusive.", "", "Clipping generally is about keeping sections of an input that lie within a particular region (like clipping a line or polygon primitive to just keep the region that is onscreen). Here I'm using the term to describe color clipping - keeping the range of color values that are valid to send to the display.", "", "The clipping that was happening when a color reached 1.0 was making a sudden jump or discontinuity when there was a transition from a smoothly increasing gradient to a constant value. The code change I added makes it so that the initial slope for dark values near zero is the same as it was previously but then as values get bigger they taper off so bigger and bigger numbers all the way up to infinity get squashed into a smaller range and the output never quite reaches one.", "alro, 2019-09-12Hi,", "", "Thank you for the comment and example. The initial idea was to show a simplistic glow effect to get started in the subject. I like the look with your change, however, and I added line 49 as you suggested.", "", "If you have the time, could you please elaborate on \"clipping\" or perhaps point to some source which discusses the subject further?", "", "Thanks again!", "P_Malin, 2019-09-12Hi Alro,", "Apologies if you don't want feedback", "", "Its a stylistic thing but currently you clip the individual r,g,b color values. This produces the \"rings\" in the image as the red channel will clamp first, then green, then blue and these discontinuities in the gradient are visible.", "Its a complicated topic but one option here when you have input values > 1.0 is to apply a tonemap function with a shoulder so that these dont 'clip' when they reach 1.0.", "", "e.g. you can add this line, in this case perhaps just before the final fragColor = line in your shader:", "col = 1.0 - exp( -col );", "", "I made a graph to illustrate: https://www.desmos.com/calculator/f14x5a9lsb", "", "This has a similar effect to remove the clipping in your \"GLOWING WAVES\" shader too.", "", "I think the glow looks cool without this change by the way, I'm just throwing the idea out there.", "zguerrero, 2019-11-04I'm not really competent to answer your question, maybe some of the raymarching gurus around here could give you better answer.", "for me, ray marching is great to render specific type of things, like volumetric, and distance field can be used to get some cheap AO and many other things. But really complexe scene become very expensive to render, at least if you want real time.", "So maybe an acceleration structure could help, there are probably some examples on shadertoy", "piikey, 2019-11-04ray marching made me super curious after browsing here on shadertoy. it seems super fast while still looking great. but... as soon as i would have more objects, i would need acceleration structure (octree or similar) too like in ray tracing, or am i missing something?", "dila, 2018-03-16really awesome", "MacSlow, 2017-12-12Most impressive!", "shau, 2017-11-29Super cool. I'm guessing that your a fan of Beeple too", "PauloFalcao, 2017-11-21Yeehh!!!! So cool!", "Imsure1200q_1UWE130, 2017-11-09Thanks  and ur welcome ( eh idk what to say thank u or ur welcome cuz u put my modification and you thanked me so.... Thank welcome? )", "zguerrero, 2017-11-06thanks for the feedback Imsure1200q_1UWE130! i have modified the shader with your modification", "Imsure1200q_1UWE130, 2017-11-06BTW the for loop i mean is in Buffer B", "Imsure1200q_1UWE130, 2017-11-06Amazing shader BTW!", "Imsure1200q_1UWE130, 2017-11-06Please change line 16 (the for loop) into", "for(float itter1 = 0.0; itter1 < 5.0; itter1++)", "{", "itter = itter1;", "texBlurred += texture(iChannel0, uvCenter * (1.0 - radialBlurInstensity *", "itter1 * c) + radialBlurCenter);", "}", "", "That way, it would be more compatible.", "croxomusic, 2017-10-30Hey zguerrero! Can I use this shader to my music player in my homepage?", "Contact me at croxomusic@gmail.com best", "kvick, 2017-10-22This is really amazing! If you translate the camera infinitely to the left instead of forward you get this crazy circular pattern O.o. https://www.shadertoy.com/view/ltjcDD", "Himred, 2017-10-20OMG ! amazing, insane, superb.", "CaliCoastReplay, 2017-10-19That's freaking amazing.  Near cinema quality out of the box, and even performant.  And in so few lines of code, it's insane.", "", "I'm not at this level or even close, but I can offer one possible tip for improvement - try using a high-exponent Fresnel term that subtracts alpha instead of adding lighting for a quick, dirty, but effective antialiasing pass on some of those sharp edges.", "Hamneggs, 2017-10-19A+ work! This is my favorite shader in a long time. At this point I don't think you're just \"experimenting\" anymore haha!", "Dave_Hoskins, 2017-10-19@arminkz I get a crash where it's trying to use a null MMDevice. - I'm guessing you're presuming everybody has a microphone?", "arminkz, 2017-10-19hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "Chris_M_Thomasson, 2017-10-19Hyper excellent and to the point!", "FMS_Cat, 2017-10-18lovelyyyy <3", "jt, 2017-10-17cool!", "zguerrero, 2017-10-15Hey! thanks all for the nive comments! Ollj, have you some examples of the technics you are talking about? i have looked for some examples myself but failed to find some that suited my needs. And this shader doesn't use bloom, it's more like a \"ghosting\" light effect made with color accumulation over frames. Also i used a radial blur to fake motion blur, as i don't know how to do it properly...", "ocb, 2017-10-15I love world of light!", "zproxy, 2017-10-14360 at", "Shane, 2017-10-14 Very pleasing to the eye. The lighting is awesome.", "iapafoto, 2017-10-13super good!", "Duke, 2017-10-13Very nice!", "iq, 2017-10-13Wow, one of the best shaders ever!", "stb, 2017-10-13Looks great and runs fast!", "ollj, 2017-10-13blur loses all its sampling over time averaging advantages with fast movement over time, which is hardly countered with [temporal reprojection], measuring screen-space-movement of pixels and reciprocal blur to dt.", "", "by using distance gradients, it is very easy to estimate volumetric glow. this made bloom (screenspace derivative gamma glow) obsolete by 2005. also high dynamic range became the nail in bloom's coffin.", "ollj, 2017-10-13you had a good thing, but then you added bloom and blur.", "BigWIngs, 2017-10-13Well done. The post effects add a lot too.", "flockaroo, 2017-10-13wow! shiny!", "P_Malin, 2017-10-13Super!", "aiekick, 2017-10-13ho wow, beautifull", "ingagard, 2017-10-13A real beuty! Great work :-)", "Dave_Hoskins, 2017-10-13I love the shape of the snaking lights. Nice one! Well done.", "koiava, 2023-02-24Thanks", "Zavie, 2023-01-20On top of the technique, which is really cool, I like the interactive presentation!", "Numero7, 2020-08-11Edit: Not in full screen but at 800x450", "Numero7, 2020-08-11This is amazing. Works perfectly on a NVIDIA GTX 750 Ti.", "philip368320, 2017-02-14Please add path tracing. Its so impressive.", "koiava, 2014-12-03Thanks predatiti", "Path Tracing will be in next shader", "predatiti, 2014-12-01Nice RayTracing with MIS !!!", "While PathTracing ?", "FabriceNeyret2, 2014-11-28ok, the 2 \"unknown errors\" are caused by all the \"const RayHit hit\" in function parameters.", "Suppress the \"const\" and it works.", "koiava, 2014-11-28yeah, maybe. Actually this is my first shader and maybe I missed something.  I also tested it on NVIDIA GTX 650m on Mac and it works without errors. :|", "FabriceNeyret2, 2014-11-28It changes nothing (I'm now on a GeForce GTX 760).", "I really thing it is an issue of windows vs linux versions of glslES (I'm on linux/chrome). i.e. somewhere you do something out of spec, that is accepted on windows only.", "(But it is hard to test without a linux on hand.)", "koiava, 2014-11-28I tested it only GTX 460 and GTX 780 and it works great.", "You can try to compile it with lowest quality.", "define QUALITY_LOWEST instead of QUALITY_MEDIUM.", "FabriceNeyret2, 2014-11-28strange, since my GeForce GTX 470M is not exactly a small card...", "", "In facts in the source window I got 2 red \"unknow error\".", "Generally it's more a pb of windows vs linux vs macos different Wglsl compilers.", "koiava, 2014-11-28Yeah, code isn't optimized and for some graphic cards I exceed temporary registry limit.", "FabriceNeyret2, 2014-11-27\"shader error\"", "yanntayasui, 2017-08-14Hi,", "great work!", "I'm looking for a coder to customise and write some shader for me.", "Would you be available for such a job ?", "Best regards,", "yann@tayasui.com", "hcf, 2016-08-13Cool! I think you should write more.", "piero, 2015-09-18I didn't expect that it's possible to receive job offers here. Maybe I will expose some of my cool shaders then ;)", "Jill_Lauren, 2015-09-18Amazing shader! I\u00e2\u20ac\u2122m Jill, Art Director at Dinahmoe (dinahmoe.com) and we\u00e2\u20ac\u2122re currently watching for a freelancer to help us with a project: We need some astonishing shaders for wind/snow/sandstorm/crackling ice (2d), in WebGL - the shaders will all be used interactively, reacting to the mouse position in ways to be decided together. Creative input is totally welcome on this, we look for great looking visuals. Would you be interested in working with us? If yes, please contact me: jill@dinahmoe.com", "I'm looking forward to hear from you!", "Solstice, 2015-08-24Does anyone else see gridlines?", "Optimus, 2014-10-15Wow!", "Cool_Flow, 2013-09-03I love the way the clouds look like they are interacting with the mountains.", "piero, 2013-08-23Astonishing!", "poljere, 2013-08-12Awesome!", "guowei, 2018-06-17lots of good memory", "dila, 2016-06-28love it", "akohdr, 2016-06-27let's not forget Mr Abrash", "knighty, 2016-06-24The good old times!", "poljere, 2016-06-23Happy 20th anniversary", "Shane, 2016-06-23Love it. Like everyone else, I leaned so much from Mr Carmack's code.", "v_coda, 2016-06-23Great work!", "aiekick, 2016-06-22nice modelisation", "jarble, 2020-12-15I optimized this shader by changing a few variables in the trace function.", "zproxy, 2020-08-20unreleased 360 render from 2016", "Yrai, 2017-04-11That's why we should look at it", "etale_cohomology, 2017-04-09@Yrai But the work of Mochizuki is still not well understood by the mathematics community!", "Yrai, 2017-04-09Lets start with: http://www.kurims.kyoto-u.ac.jp/~motizuki/Inter-universal%20Teichmuller%20Theory%20I.pdf", "Yrai, 2017-04-09@etale-cohomology - can't belive the nickname!", "etale_cohomology, 2016-11-06@Shane", "Thanks a lot! Yes, GLSL seems to be the answer", "Ah, cohomology it a delightful rabbit hole! And I still understand very little of it!", "Shane, 2016-11-06@etale_cohomology", "I think it's just the OpenGL - and therefore, WebGL - shading language, GLSL. I guess, in a broader sence, that'd make it the standard shading language for the web... Maybe. However, I just tend to think of it as \"C\" programming with annoying restrictions.", "", "At uni, it's hard to fit centuries of math into just a few years. Things like cohomology were just a 10 minute segment at the end of a topology related lecture, or something along those lines, that most were falling asleep in anyway.", "etale_cohomology, 2016-11-04guys what shading language is this?", "jiangchufei, 2016-11-03excellent", "yangtzehina, 2016-11-03nice", "patu, 2016-11-03Do I already marked it as beloved?", "lp9102, 2016-11-02What's wrong with it,why I can't watch it", "lp9102, 2016-11-02a", "Atrahasis, 2016-11-02wonderful", "SolGlass, 2016-11-01Spectacular!", "Virgill, 2016-11-01gorgeous!", "iq, 2016-05-16SSQ - Shane Super Quality! Lovely!", "Shane, 2016-05-14@XT95", "Considering your association with a famous demo group, I'd be far more interested in seeing what kind of tunnel demo you could come up with.  Seriously, though, the example itself isn't that exciting, but the \"cellTile\" function (or variations on the approach) is worth taking a look at. It's a pretty fast and efficient way to put some interesting surfaces on objects.", "", "@Duke", "I've been experimenting with repeatable 3D tiles to produce volumetric fog.", "XT95, 2016-05-13Nice one ! I think you should do the ultimate tunnel mega-demo ;)", "Duke, 2016-05-13Cool!", "Shane, 2016-05-13I have more interesting examples, but wanted the 2nd order cellular tiling to be the focus, which meant keeping the scene simple. I'm pretty easy to please, but the ability to raymarch a beveled, Voronoi-looking surface at workable frame rates has me pretty excited.  In fact, I'm pretty happy with this particular approach in general.", "aiekick, 2016-05-13awesome", "zackpudil, 2016-05-13The lighting is fantastic as always.", "dila, 2016-05-12awesome shader, beautiful style, as usual", "iapafoto, 2016-05-12Shane quality shader !", "Dave_Hoskins, 2016-05-12Shiny!", "Draedrus, 2016-05-12That's cool ! :-)", "GregRostami, 2016-05-12", "chrisjj, 2019-02-22Damn! That's better than my one! https://www.shadertoy.com/view/tsfXz4", "archee, 2019-02-10dr2: I thought about it again, and you are right. In some 3-body collisions energy is lost. (just momentum and mass are preserved)", "archee, 2019-02-10dr2: Momentum and mass is conserved even if there is a 3 body collision, as the same force is applied on particle pairs both ways. The center of the particles never share a rectangle in the grid. It's just a different way of storing particle data. Energy and momentum may be lost when  a particle tries to travel faster than the speed limit, which is one grid/frame.", "dr2, 2019-02-08archee: what you have done is a bit like the so-called lattice gas; to get the physics right you have to conserve mass and momentum; at higher density you will have 3-body \"collisions\" which may be harder to handle using a grid.", "archee, 2019-02-08Excellent idea. Made my own implementation storing particles in grid: https://www.shadertoy.com/view/td2Gzc", "It's so fun to watch gases mixing and filling up the space.", "dr2, 2019-02-05Fabrice: diffusion coming soon; voronoi partitioning can be used for studying fluid structure (also in 3d), but this requires polygon data (eg, edge count) not provided by painting.", "FabriceNeyret2, 2019-02-03in both case, you can obtain a voronoi painting by skipping the .5,.49,length(p))); part.", "FabriceNeyret2, 2019-02-03variant with a diffusing red disk:", "vec2 p = vec2(nn%nMolEdge , nn/nMolEdge)/float(nMolEdge)*2.-1.;", "col =mix(vec3(1),vec3(1,0,0),smoothstep(.5,.49,length(p)))", "* smoothstep (0.5, 0.4, dMin);", "FabriceNeyret2, 2019-02-03to study the diffusion of balls, let color them", "#define hue(v)  ( .6 + .6 * cos( 6.3*(v)  + vec3(0,23,21)  ) )  // https://www.shadertoy.com/view/ll2cDc", "int nn;", "for (int n = 0; n < nMol; n ++) {", "float v = length (q - Loadv4 (n).xy);", "if ( v < dMin ) dMin = v, nn=n;", "}", "col = hue(float(nn)/float(nMol))* smoothstep (0.5, 0.4, dMin);", "chrisjj, 2019-02-01Runs fine on Windows 7 latest Chrome.", "jt, 2016-01-27Nice!", "dr2, 2016-01-21Using 2 or more buffers (identical code in each, with e.g. A->B->C->A, using only iChannel0) increases speed. In principle, the more the better, but it's hard to tell whether 4 buffers are better than 3 here.", "dr2, 2016-01-21Changed the texture access (originally just a single row, now 2D) for more flexibility.", "string5, 2016-01-21My OS is windows 10, on chrome I got the error: Failed to create D3D shaders. When I used about:gpus , I got the error: ANGLE Display::initialize error 4: Could not create D3D11 device. But if on firefox, everything is ok, does anyone encounter these issues? Does anyone ever solve these problems? Thanks for anything may help.", "dr2, 2016-01-21Thanks. Exactly what I was thinking. I am interested in finding out whether there are any  browser/OS/hardware problems with the texture buffers, e.g., do all recent systems have 32-bit floating-point tetxtures?", "iapafoto, 2016-01-21Cool !", "Cannot imagine it could be so fast with as much texture reading !", "Open the door to lots of interesting physics simulations", "FreeFull, 2016-02-26You should add a warning about the last link leading to something very loud", "bit2shift, 2015-12-14Holy shit, it's amazing. I tried setting AA to 16 and it crashed the nvidia driver.", "jt, 2015-12-10Impressive!", "Solstice, 2015-08-27IQ, you really do your initials honour.", "squeakyneb, 2015-06-07Crashing my (old-ass piece of shit) GPU. AMD 6770M, Windows 7, Chrome 43.", "GregRostami, 2015-06-05So COOL! I love increasing AA for a high quality render.", "weyland, 2015-06-05smooth like silk with the AA fuzz, elegant as always, loved Inversion Machine too obviously", "dila, 2015-06-04Reminds me of Kali's inversion machine", "ruba, 2015-06-04Mind-blowing!", "public_int_i, 2015-06-04Its so fast, even with AA!", "lacasrac, 2018-03-14How can animate it?", "Rainbow_Yumo, 2017-12-21thanks for you bolg and this shader code! I learnt alot", "reinder, 2019-07-02Very nice! (and stable)", "flockaroo, 2016-10-09@iapfoto: ...says the wizard! ;)", "iapafoto, 2016-10-07you are a magician !", "flockaroo, 2016-10-04thank you, sirs! im honored.", "Shane, 2016-10-04Pretty much what Shau said.", "shau, 2016-10-03Another nice shader sir", "s3b0sp, 2022-12-18What is the license for the code ? I want to use a sightly modified/lighter version of it as the background of a terminal emulator. Can this be done?", "marcosmx87, 2021-06-14turboplay you have too modify \"sun\" variable in line 108", "turboplay, 2021-02-02Nice. Hey I want the snow without the moon.", "avin, 2019-04-22nice", "iampena, 2013-11-11well done", "rafacacique, 2013-04-02Love it!", "CPU, 2013-03-25brrrruh! nicely done", "PauloFalcao, 2013-03-23Very nice!", "Dave_Hoskins, 2013-03-22Hey, nice one! Reflects the weather here in the UK. Spring it is not.", "How about adding some random horizontal motion to the flakes?...", "Something like:- \"F1 = 1.0-cellular2x2((uv+(GA*0.1)-vec2(snoise(uv*5.0)*.02, 0.0))*8.0);\"", "paper_plane_addict, 2022-02-18(Embed below failed. New personal record: 2239)", "", "https://imgur.com/a/97Uua7n#oscJ2fM", "paper_plane_addict, 2022-02-18", "", "It was good fun. Now I never need to play this again.", "elenzil, 2022-02-09lol!", "paper_plane_addict, 2022-02-09https://imgur.com/a/WmggHHF", "", "This was my last game. Thanks for the entertainment.", "HalbFettKaese, 2022-01-08Just got a new PB of 1397, and as promised, I recorded it this time:", "https://youtu.be/ELXhwgb6xxU", "HalbFettKaese, 2022-01-06I can't believe I actually got a score like this. If I ever decide to play more, I'll definitely record it", "HalbFettKaese, 2021-12-29@Tater you'll have some more work to do", "Xiner, 2021-12-27loooooooooooooooool", "elenzil, 2021-12-19lol", "oneshade, 2021-12-18At end of mainImage:", "if (abs(fragCoord.x) < 0.96) {", "drawLetter(fragColor, mod(fragCoord, vec2(0.19 , 0.25)) + vec2(0.0, 0.09), vec2(0.1, 0.2), vec2(0.35), 57);", "}", "TestCoder, 2021-12-18bravo", "aiekick, 2021-12-18stupid score :", "", "", "int[] scoreString = int[](33, 48+8, 48+5, 48+3, 46, 48+2, 48+4, 48+5);", "int scoreLength=8;", "FabriceNeyret2, 2021-12-18", ":-p :-p :-p", "", "", "int[] scoreString = int[](33, 64+19, 64+21, 64+9, 64+14, 64+5, 64+7);scoreLength=7;", "lechuga, 2021-12-18", "elenzil, 2021-12-17indeed. I think it was that lame account or a similar one which made ST shut off email-notifications for comment activity.  at least, that's how it seemed to me.", "zduny, 2021-12-17@oneshade @elenzil", "I believe it was simply a non-human bot - they are capable now of traversing random websites, registering in and posting ads.", "", "@iq - Shadertoy may be now popular enough to require a stronger captcha on sign up page ;)", "oneshade, 2021-12-17Yeah, its really annoying when people try marketing their stuff or whatever on people's shaders.  There was even some creep (whose account is now thankfully gone, you do not want to see their profile photo) who was trying to get hookups through a very dubious URL that they posted on some of mine and others shaders.", "elenzil, 2021-12-17nice catch on the jessica bosworth comment, @zduny.  I don't know of a way to flag accounts.", "JessicaBosworth, 2021-12-17[This comment has been hidden by the shader author]", "pyBlob, 2021-12-16nice ... after inverting flight controls I immediately got 115 =)", "GregRostami, 2021-12-16Really fun!!", "41 is the best that I can do.", "jeyko, 2021-12-16fuuun", "NivBehar, 2021-12-16really fun game!", "personally, i find it easier to play when inverting LEFT and RIGHT keys ;)", "oneshade, 2021-12-16Nice! My high score is 91.", "Xor, 2021-12-15I give up! Amazing score Tater!", "Tater, 2021-12-15Sorry Xor, I almost feel like I need to submit video evidence for this score. If anyone beats this I'll do that next time", "jt, 2021-12-15@fabrice: great list, thanks!", "jt, 2021-12-15Nice!", "@kastorp: thanks, flipping direction together with LEFT<->RIGHT results in much more intuitive controls.", "kastorp, 2021-12-15106! I changed direction from bottom to top  with this change on  line 304:  fragCoord /= -aspectRatio;", "Brejlounek, 2021-12-1560!", "shau, 2021-12-15Super nice game and so well executed, though my high score so far is 11", "FabriceNeyret2, 2021-12-14#154 in the list of shadertoy games ;-)", "https://shadertoyunofficial.wordpress.com/2017/11/11/playable-games-in-shadertoy/", "elenzil, 2021-12-14okay I tried a little harder and got 64.  but now my keyboard is swimming! fun!", "Xor, 2021-12-14", "lz, 2021-12-14Great", "aiekick, 2021-12-13ahah so nice", "Xor, 2021-12-13130 is the best I can do", "Observer, 2021-12-13I had to swap the left and right keys to make it work for me...", "elenzil, 2021-12-1340, 200, waaaaaaat !?  nice job !!", "skaplun, 2021-12-13Good animations!", "iq, 2021-12-13So polished, beautiful!", "", "(although I find is claustrophobic because of the vertical format)", "Tater, 2021-12-13", "dean_the_coder, 2021-12-1323!", "Xor, 2021-12-1340 points!", "I_am_6r1d, 2021-03-07I like both the marble and a scene setup :-)", "reinder, 2019-11-15Very cool!", "OliverSchaff, 2019-04-02Wow!", "jcyuan, 2018-06-04!!!!!!!!!", "baby2nana, 2016-08-11OMG,love it", "marsermd, 2015-06-16wow! Really cool. And with nice framereate.", "paniq, 2015-03-29sweet", "u2Bleank, 2014-04-28I love this marble !", "Zavie, 2013-12-10Great idea.", "Dave_Hoskins, 2013-12-10Beautiful.", "mmalex, 2013-12-10now with truchet tile background, a bit of film grain, and some fakey antialiasing. had some nasty aliasing in the ao term due to the ray direction getting 'broken' around the edge of the sphere, but this is such a live-coded mess now I'm gonna leave it", "iq, 2013-12-10Oh my!!   Fantastic!!", "wyatt, 2021-06-02line 23 in main and someone in the comments asked for it", "Zi7ar21, 2021-06-02Why is there Interstellar music? Not a bad thing, I am just wondering why? I love Interstellar.", "Also, how do you hide the edges?", "nsm2, 2020-06-14This is ART!!!!!", "mosaic, 2020-01-26<3", "Polygon, 2020-01-21Feels like watching a Max Cooper music video!", "jt, 2019-10-10really good!", "Flexi, 2019-08-01I also <3  your documentation style, wyatt! I just wanted to throw in my other goto address for WebGL fluid simulations. BigWIngs, check out Evgeny Demidov's page: https://www.ibiblio.org/e-notes/webgl/gpu/contents.htm", "aiekick, 2019-07-20thanks @wyatt", "wyatt, 2019-07-19A pretty whimsical article, but I think it does the trick :", "http://wyattflanders.com/MeAndMyNeighborhood.pdf", "wyatt, 2019-07-19Thanks! A few people have asked me, so I think I'm going to write an article this weekend! I'll link it here when it's ready. It took almost 2 years to figure out the algorithms I use now, so there's a lot to write down and it takes a lot of effort to make it explainable. I'll try to make infographics and stuff to make it really make sense.", "BigWIngs, 2019-07-19Great stuff man. I'd like to get into fluid dynamics. You got a good source to learn?", "rory618, 2019-05-22Messing with distance metric:", "", "#define length(z) (max(abs((z).x),abs((z).y)))", "", "#define length(z) (abs((z).x)+abs((z).y))", "Flexi, 2018-12-03I'm just mad how good you're at this already. big up!", "MacSlow, 2018-12-01Speechless!", "Shane, 2018-11-21Beautifully done.", "grinist, 2018-11-19Wow, this is something else...", "tholzer, 2018-11-16The new added interaction makes me feel like an artist :-).", "But actually it is only the play instinct", "that does not let end the fascination of this shader!", "wyatt, 2018-11-16Ok now there's a mouse interaction", "wyatt, 2018-11-16Thanks all   I put the song you suggested. I have the whole interstellar soundtrack on my phone", "blackjero, 2018-11-16Super cool, I love the way buffers spread when you go fullscreen", "tholzer, 2018-11-15!!! simply fascinating !!!", "But you should add some suitable music.", "What about this one ... ?", "https://soundcloud.com/symphonicsamples/cornfield-chase-hans-zimmer-midi-mockup", "ps. switching the shader to full screen is one more nice experience.    ;-)", "Is there any interaction planned?", "ocb, 2018-11-15Really really nice!", "Impressed by the short code...", "boontjieboon, 2018-11-15Looks great!", "aiekick, 2018-11-15muyabe you can wiath 120 frame fro switch fullscreen ?", "aiekick, 2018-11-15love this one", "elenzil, 2018-11-15you go too far! the madness, the beauty!", "shau, 2018-11-15 it, especially in full screen", "FabriceNeyret2, 2018-11-15nice look (animated mosaic :-) )", "wyatt, 2018-11-15 thanks! it was a total accident. I was just trying to make a robust particle system", "Dave_Hoskins, 2018-11-15Nice work. The full screen change is certainly funky.", "oneshade, 2021-06-28Neat!", "dila, 2015-10-10nice, not seen this before", "iq, 2015-10-08Nice!", "FlorianDuf, 2015-10-08Good job", "aiekick, 2015-10-07nice", "nimitz, 2014-11-25Anyone knows if there is a way to get a displaced normal using this normal mapping technique? (instead of just getting lambertian, see line 155)", "dila, 2014-10-11Looks great!", "tsone, 2013-05-15Wow! Really cool..", "BoyC, 2013-03-05Added normal mapping.", "BoyC, 2013-03-05I don't know of a paper on it, but it's quite an old effect. You basically take a bunch of oldschool 2D metaballs and extrude them in space, this is what they generate. Used to do this with marching cubes, but I haven't seen it done with shaders yet, so here it is", "iq, 2013-03-05Super, super cool <3", "Dave_Hoskins, 2013-03-04Looks great, I want to take control, fly about and land somewhere on it.", "PauloFalcao, 2013-03-03Awesome!", "trx, 2013-03-03I'm still lovin' it.", "XT95, 2013-03-03That's awesome", "BoyC, 2013-03-03I used to love this effect, so here's a shader version", "jt, 2023-01-22Beautiful", "cmarangu, 2021-01-10Pretty awesome, love the concept, but it also runs realtime", "vanky, 2020-12-08beatiful!", "iapafoto, 2020-11-16Love the 6000", "shau, 2020-11-15nicely done!", "balkhan, 2020-11-15Neat !", "aiekick, 2020-11-14haha, cool idea", "julianlumia, 2020-11-14nice", "zproxy, 2020-11-14nice. maybe some godrays?", "jorge2017a1, 2020-11-14very cool everything", ".......", "muy genial todo", "pohlt, 2021-08-25Could also be Iridium, but it's amazing!", "Trospy, 2021-08-12awesome!!", "TambakoJaguar, 2021-08-11Oh, that's quite insane and impressive, it looks quite real! Congratulations!", "BigWIngs, 2021-08-07Very nice!", "verstkabond, 2017-02-09Super! please contact me on e-mail bondarenko@steelmonkeys.com", "GregRostami, 2016-10-11EPIC!", "Shane, 2016-10-11Awesome. I like the way you've split the refractive rays for that subtle chromatic effect.", "iapafoto, 2016-10-10cool !!!", "public_int_i, 2016-10-09Good stuff.", "iq, 2016-10-09Super nice!", "stb, 2016-10-09Cool! Getting 60 fps windowed, which is nice.", "That reminds me, I've got an announcement: I'm now accepting donations for a faster GPU!", "Dave_Hoskins, 2016-10-09 it! Nice subtle colours, and I love the atmosphere, and the little camera shake in time to the music.", "Virgill, 2016-10-09coyote, thx for the hint <3", "stduhpf, 2016-10-09Awesome.", "coyote, 2016-10-09Beautiful, but for it to work on mac mini (and probably other macs using integrated intel gpu) you must initialise vec3 color and color2 in Buf A line 161 to zero.", "konigma, 2023-06-14This video introduced me to the world of Shader Art. Thank you so much.", "FabriceNeyret2, 2023-06-12The problem is that apparently many people have recently copy-pasted this \"method\" to trace curves, which can produce very aliased shaders ( at least not resolution-adaptive ), and not easibly salvable toward the standard way of tracing with good and cheap AA...", "jedikoops, 2023-06-12great tutorial", "FP2, 2023-06-11thank you for making this intro!", "MysteryPancake, 2023-06-11@ofmarconi It can be rendered in After Effects using the tl_math plugin:", "https://github.com/crazylafo/AE_tl_math", "alpheratz, 2023-06-10Amazing tutorial <3 thanks!!!!", "MelekTaus, 2023-06-09Ported to Unity with some exposed properties to play around with", "", "Shader \"Unlit/Neon Circles Shader\"", "{", "Properties", "{", "_Zoom(\"Zoom\", Float) = 6", "_Scale(\"Scale\", Float) = .5", "_Exposure(\"Exposure\", Float) = 2", "_Speed(\"Speed\", Float) = .75", "_Iterations(\"Iterations\", Int) = 6", "_Saturation(\"Saturation\", Float) = .5", "_Power(\"Power\", Float) = 1.75", "_ColorInterval(\"ColorInterval\", Float) = .4", "_Shift(\"Shift\", Float) = 1.5", "}", "", "SubShader", "{", "Tags { \"RenderType\"=\"Opaque\" }", "LOD 100", "", "Pass", "{", "CGPROGRAM", "#pragma vertex vert", "#pragma fragment frag", "#pragma multi_compile_fog", "", "#include \"UnityCG.cginc\"", "", "struct appdata", "{", "float4 vertex : POSITION;", "float2 uv : TEXCOORD0;", "};", "", "struct v2f", "{", "float2 uv : TEXCOORD0;", "UNITY_FOG_COORDS(1)", "float4 vertex : SV_POSITION;", "};", "", "v2f vert(appdata v)", "{", "v2f o;", "o.vertex = UnityObjectToClipPos(v.vertex);", "o.uv = v.uv;", "UNITY_TRANSFER_FOG(o, o.vertex);", "return o;", "}", "", "float _Zoom;", "float _Scale;", "float _Exposure;", "float _Speed;", "int _Iterations;", "float _Saturation;", "float _Power;", "float _ColorInterval;", "float _Shift;", "", "fixed4 frag(v2f i) : SV_Target", "{", "half PI = 3.14159;", "half4 c;", "float2 u = (i.uv * 2 - 1) * _Scale;", "float l = length(u);", "float t = _Time.y * _Speed;", "for (int i = 0; i <= _Iterations; i++)", "{", "u = frac(u * _Shift) - .5;", "c += pow(", "abs(", "_Exposure * .01 / sin(", "length(u) * exp(-l) * _Zoom + t", ")", "), _Power", ") * (", ".5 + .5 * cos(", "_Saturation * PI * 4 * (", "l + (i + t) * _ColorInterval + half4(.26, .42, .56, 0)", ")", ")", ");", "}", "return c;", "}", "ENDCG", "}", "}", "}", "mulrooneydesign, 2023-06-08Awesome work. You've inspired me to look into this shader art more. Loved the youtube video!", "Iko, 2023-06-07Je viens de finir le tuto, c'est banger", "FabriceNeyret2, 2023-06-06caramba !", "kishimisu, 2023-06-06Thanks all for your kind comments, I'm glad you found this tutorial insightful =)", "", "@FabriceNeyret: I've already published a golfed down version of this shader! https://www.shadertoy.com/view/cldXzM", "And it's 227 chars ;-)", "FabriceNeyret2, 2023-06-06some remarks:", "", "rather than duplicating uv as uv0 and evaluating it's length all along the loop,", "just compute l = length(uv); before loop", "", "just for fun, simplification down to 250 chars ( from 533 ) ;-)", "void mainImage( out vec4 O, vec2 u ) {", "vec2 R = iResolution.xy,", "U = (u+u - R ) / R.y;", "O *= 0.;", "", "for ( float l = length(U), d, i = 0.; i < 4.; i++)", "U = fract(U * 1.5) - .5,", "d = length(U) * exp(-l),", "d = pow(abs( .08 / sin(d*8. + iTime) ) , 1.2),", "O += d * ( .5 + .5*cos( 6.28*(l + i*.4 + iTime*.4 +vec4(.26,.42,.56,0) ) ) );", "}", "Bannarama23, 2023-06-05Keep up the great work. Through you, I discovered this fantastic art. Based on your video, I finally made my first one and am now making my second out of a new shape. (A square). Please keep up the videos love your work and would love to learn so much more from you or even watch your code and your thought process.", "feiss, 2023-06-05Thanks for this. I enjoyed the video a lot, really well done \u2665", "3g0st, 2023-06-05Thanks for your lovely intro to shaders I'm ready to get started", "leoKamwathi, 2023-06-04Awesome tutorial :-)", "luminoucid, 2023-06-03<3", "FChamieh, 2023-06-03Very much appreciated tutorial", "ogcraig, 2023-05-31appreciate the tutorial !", "boytoy, 2023-05-27Thank you for your tutorial!", "ofmarconi, 2023-05-23Is it possible to render this within after effects?", "altunenes, 2023-05-23I did something influenced by this, it was a very nice video, thank you very much for the tricks", "msm01, 2023-05-21What's the AI software you used for the voice ?", "kishimisu, 2023-05-21Thanks for your comments!", "", "@msm01: glad you appreciated it =)", "magician0809, 2023-05-21Very energetic! Instantly cleared my fatigue", "msm01, 2023-05-20Finished the tut. That was excellent, and a well-needed refresher.", "msm01, 2023-05-20I'm half-way through your tutorial... This is very good work, keep it up !  You got passion AND skill AND the will to share... That's a winning combo !", "jorge2017a2, 2023-05-20beautiful design!!", "TheNosiriN, 2021-02-13I really wished it was the full song I love the classic mario track.", "jorge2017a1, 2020-09-26excellent sound quality of mario !!!!", ".........", "excelente calidad de sonido de mario !!!!", "scratch13764, 2018-11-04@anastadunbar that's just a thing with shadertoy in general.", "anastadunbar, 2015-04-25And the audio stops after 1 minute. Really good sound by the way.", "zproxy, 2015-03-20sound goes random 2.5s in", "hugo, 2015-01-20Amazing! love the macro and how mario is drawn on the code", "poljere, 2014-07-31haha nice!", "gyabo, 2014-07-31Amezing!", "bytewave, 2014-07-30Sound on shadertoy  so cool !", "zik, 2022-10-18I can't speak to how ergodic it is, I was using it for monte carlo integration and my results were coming out wrong. Note that I wasn't accumulating samples in a chained fashion but rather individually seeded using uv and frame number as the initial seed, similar to the code here.", "FabriceNeyret2, 2022-09-14what about v2 ?  https://www.shadertoy.com/view/XlXcW4", "", "zik: you mean E() is not the same if using it as a hash or an chained RNG ? i.e. not ergodic ?", "zik, 2022-09-13@raabix despite @iq's warning to the contrary, I used this as an RNG by wrapping it like this:", "", "float getRandF() {", "seed = hash1(seed);", "return float(seed & uint(0x7fffffffU))/float(0x7fffffff);", "}", "", "It turns out E(x) for this RNG is not 0.5 as I would hope, but 0.7... So, not great as a uniform generator.", "", "While it did have good properties from an aliasing standpoint", "raabix, 2022-01-31What property makes this hash not a RNG? From looking at it, it looks to me like some sort of LCG. I tested what happens after feeding the results recursively and it turns out, that the resulting numbers start repeating themselves more and more often, as you increase the number of recursive calls.", "FabriceNeyret2, 2020-10-20New: evaluated in this new paper http://www.jcgt.org/published/0009/03/02/.", "See also https://www.shadertoy.com/view/XlGcRh", "Refrost, 2019-09-27Hi, Im New Here How Can \u0131 turn this code play html like this Box Code ?", "https://github.com/invent-box/Learn-WebGL/tree/master/06-Box", "iq, 2018-07-24Fabrice, Hugo's page no longer exists. Although it seems bgolus found an archive of it", "Dave_Hoskins, 2018-05-09I remember this style of pseudo random generator going back to the 1980s to be fair. So it probably originated from way before then... gawd knows when though...", "bgolus, 2018-05-08The \"integer hash copied from Hugo Elias\" appears to be from here: https://web.archive.org/web/20160205113548/http://freespace.virgin.net/hugo.elias/models/m_perlin.htm", "FabriceNeyret2, 2018-01-11\"integer hash copied from Hugo Elias\": may you please provide the url in the code ?", "iq, 2017-08-10Probably a bit slower, but it's portable across platforms --> important to make sure your hash noise based terrain looks the same on Linux, Mobile and PC. With fract(sin(dot()) you often get different stuff in different platform/OS/driver combinations", "etale_cohomology, 2017-07-15I wonder if this is faster than the sin/fract (or dot/fract) traditional shader hash functions?", "SarahC, 2017-07-13Works fine on Windows 10, GTX970.", "vgs, 2017-06-04Nice! I did not know WebGL 2 was already available!", "zproxy, 2017-06-02nice staticy", "NinjaKoala, 2017-05-12With Mesa 17.1, i got WebGL2 in Chromium on my Linux Laptop with Sandy Bridge CPU now \\o/", "TobberH, 2017-03-01No WebGL 2.0 on Nexus6P Chrome yet.", "FabriceNeyret2, 2017-02-16ShaderToy webGL2.0 new features + new constraints : article here: https://shadertoyunofficial.wordpress.com/2017/02/16/webgl-2-0-vs-webgl-1-0/", "MBR, 2017-02-16Am I being too CPU minded, why not:", "float(n>>8u)*(1.0/16777216.0)", "MBR, 2017-02-16Let the war of white noise (for different usages) begin.", "Dave_Hoskins, 2017-02-16I'm getting really odd errors on my old shaders and WebGL 2 disabled in Chrome.", "NinjaKoala, 2017-02-16I found out the reason my Browser doesn't support WebGL 2.0 is related to this: https://bugs.freedesktop.org/show_bug.cgi?id=99842", "Dave_Hoskins, 2017-02-16Nice. Don't forget my 'Hash without Sine' is not machine dependant either.  So far, anyway.", "PauloFalcao, 2017-02-16Works nice on my android phone!  Bit not on my Linux laptop with Intel", "pixartist, 2017-02-16SWEET!", "NinjaKoala, 2017-02-16Getting the same Error as Lio on my Laptop.", "Doesn't seem to be Shadertoys fault though, the log in about:gpu in Chromium reveals: \"ES3 is blacklisted/disabled/unsupported by driver.\", which is strange because glxinfo says:", "\"OpenGL ES profile version string: OpenGL ES 3.0 Mesa 13.0.4", "OpenGL ES profile shading language version string: OpenGL ES GLSL ES 3.00\"", "Lio, 2017-02-16gives an error message", "\"unit - syntax error\".", "poljere, 2017-02-16#WebGL2", "El_Sargo, 2023-04-03You can get the powdered sugar effect by using tc += pow(w,1.04); on line 122", "Duke, 2015-10-15Added simple scattering approximation", "Shane, 2015-10-12Either way, I appreciate you putting it on Shadertoy. I got a lot of mileage out of it, and so did a few others, it seems.", "Duke, 2015-10-10Thank you for your kind words, but I am not the author of this method. All credit goes to Las. I just ported this demo from glslsandbox.com site with small modifications. There is a problem with the glslsandbox.com site - it is difficult to find there something. I've seen a lot of interesting ideas out there, but I can not find them now.", "Shane, 2015-10-10This is one of my favorite releases this month. There's a whole bunch of things that I like about it.", "", "Applying the step function when accumulating the local density is a nice touch. Of course, if you need to do anything expensive during the accumulation stage, it's back to that annoying \"if\" statement.", "", "Most of all, I like the way you break from the loop when the surface distance is within a fractional distance of the total. I've applied that to some similar code I have, and it's improved things a lot.", "", "I got excited when I saw the evenly distributed spikes, then realized they were hardcoded. You can comment out \"n1\" to \"n3,\" by the way. Either way, it's given me an idea as to how to evenly distribute spikes on any object efficiently... maybe.", "", "For what it's worth, I made a fiery version. I trimmed your version down a bit, changed the weighting slightly, made a couple of sacrifices to the spike shape in order to tighten up the distance equation, etc. Nothing exciting, but here it is:", "", "https://www.shadertoy.com/view/4lBXzy", "Duke, 2015-10-09Thank you for your feedback. I'll keep that in mind in the future", "aiekick, 2015-10-09angle initialize in auto the var while the conversion from glsl to hlsl, but in gl mode  (out the browser in my case), if r and l are not initalized, you have r += l and many use in the for of line 106. but if r an l contain a bad value like -78945264 by example, you see the problem.", "aiekick, 2015-10-09yeah it works. thanks. if you want to see the bug. this was that : bug", "Duke, 2015-10-09I checked on Chrome and Firefox with and without angle but can't reproduce the bug  I added initialization to all variables. Does it work now?", "coyote, 2015-10-09There are artifacts on Mac too without the initialisations in line 103 as aiekick mentioned... But the shader is nice, I agree. Like a cotton ball.", "aiekick, 2015-10-08can you declare l and r ( at the line 103) before use at line 107, because there is some big artifact in opengl mode (without angle).", "aiekick, 2015-10-08wow", "iq, 2015-10-08cute!!", "cyperus, 2021-10-17WooW!", "owlwisp, 2019-07-12cool", "avin, 2019-04-22so cool!", "metalim, 2017-01-05Spacebar is for weak!", "denzen, 2015-05-28This is seriously impressive.", "dkoding, 2014-02-20Unfathomable", "pix, 2013-10-27That is soooo Hogwarts!", "morgan3d, 2013-09-17The fade out to fire is fantastic!", "a13X_B, 2013-04-05This needs more love(likes?), simply amazing!", "bloodnok, 2013-03-04damn... so we're doing megademos in a shader now?", "Cha, 2013-03-02Se te va la olla... XDDDD amazing!!", "XT95, 2013-03-02Wow !!", "_pwd_, 2013-03-01wheeee - damn yummy!", "Voltage, 2013-03-01Really nice CPU!   Your code is nicely commented too.", "CPU, 2013-02-28aha! the man that made it possible! thanks bro, 4k demo style, glad you like it", "iq, 2013-02-28what the! this is seriously amazing. and the code very cryptic. but wow, the visuals are stunning!", "CPU, 2013-02-28thx bro!", "PauloFalcao, 2013-02-28wow!", "UrbanClubProfessional, 2020-11-01You're welcome, it's a fun thing.", "bismatrimony, 2020-10-31Great post, thanks for sharing. Picked up some good and valuable insight ;) Bis <a href=\"https://www.bismatrimony.com\">kerala matrimony</a>", "UrbanClubProfessional, 2020-10-28This shader was remixed by me here: https://www.shadertoy.com/view/3sGcD3", "wosztal15, 2020-09-11", "I have to admit that it makes an amazing impression!", "Cubex, 2020-09-07Woobly moobly, it's amazing!", "iq, 2014-03-17Oh, I love it!", "iq, 2020-07-22@chao_mu, because the squares are made with floor() with repeats every 1.0 units. Since a cosine repeats every 2PI units, the only way to align those two is with a 2PI factor.", "chao_mu, 2018-08-14I've been staring at the code for about an hour trying to figure out how it works, and there is one piece that I just can't make heads or tails of. Why was 2PI chosen when calculating pa? I know things don'tline up will line up if it's any other value, but why is that the sweet spot?", "hugo, 2015-01-22No if's, amazing!", "Hex, 2014-10-17Nice to see one that doesn't need a static texture as an input!", "dila, 2014-10-17Kinda nice", "germangb, 2019-04-21Stare at it long enough and everything starts spinning!", "aaronchristie, 2019-04-18trippy dood", "poljere, 2019-04-17awesome!", "Aljen, 2019-04-08Wow", "timandrianovien, 2019-03-29wow!", "starea, 2019-03-21beautiful! just a comment that the colors are concrete in the center region when viewed in full screen.", "aiekick, 2015-01-27awesome", "chrisjj, 2018-03-24Any idea why I get substantially different output on web https://i.imgur.com/OrQ17TV.png and desktop https://i.imgur.com/J5uK0uK.png .", "", "Much more so if I e.g. set NoiseScale = .3. https://i.imgur.com/PB9q0cy.png , https://i.imgur.com/8q9Vl4G.png", "", "It looks like the noise is much less irregular on web.", "rendermanGL, 2017-07-29I changeda few values try them, the shader looks so cool.", "", "", "const float FOV = 0.4;", "const float MarchDumping = 0.75;", "const float Far = 38.925;", "const int MaxSteps = 128;", "const float CameraSpeed = 4.50;", "const float TunnelSmoothFactor = 2.0;", "const float TunnelRadius = 0.8;", "const float TunnelFreqA = 0.18003;", "const float TunnelFreqB = 0.25;", "const float TunnelAmpA = 3.628;", "const float TunnelAmpB = 2.4324;", "const float NoiseIsoline = 0.9;", "const float NoiseScale = 2.0;", "Nimajamin, 2017-07-22Awesome", "jt, 2017-07-05cool!", "dila, 2017-05-23looks great!", "ollj, 2016-09-15line 195 to col = -nor*.8+.5+Color; //visualizes surface normals and distance to camera a bit netter.", "revers, 2016-03-31Thanks guys!", "", "@demofox", "Material looks so realistic thanks to iq's lighting (I think AO and fresnel terms are key to success here). Also TDM's trick makes it more water like. There is no subsurface scattering here.", "", "@Shane", "Good point, for large pos.z factor the reflection is very biased. Your solution with \"normalize(nor - normalize(rd + .5)*.2)\" looks nice, but sometimes I feel that reflection is too bright. Nevertheless I think your solution is better, in case of tunnels, since it is not dependent on position.", "As of using texture based noise, indeed it is faster, but unfortunately in case of this shader I get too much banding. It is almost always a tradeof qulity vs speed.", "BTW I like very much your shaders with a lot of descriptions. Good work, man!", "Shane, 2016-03-31So pretty. I love the lighting. Just a minor thing, but with regards to the additional specular lighting trick, I was wondering what will happen as the z-position component (pos.z) gets sufficiently large? If the object is to offset the normal in a random, contour-like (?) way, would something like \"normalize(nor - normalize(rd + .5)*.2),\" or similar, work? Either way, it looks cool, so I'm going to keep it in mind.", "", "I've made a few \"tunnel through noise\" examples. Although, two levels is the absolute most I can get running at full frame rate on my slower machine, and that's with IQ's fast, textured version. Because value noise has a voxelized feel, I find that a squarish tunnel blends in a little better... Not perfectly, but better.", "", "In theory, I guess it'd be possible to set various cube corners to zero in the noise function, set up a spline curve and do it that way, but I have a feeling that'd be more trouble than it's worth.", "aiekick, 2016-03-31", "demofox, 2016-03-30This loosk really nice.  Why is it that your material look so realistic.  Is it subsurface scattering?", "iq, 2016-03-30Super super nice!!!!", "hughes, 2014-09-13@TekF maybe it's a captured body ;)", "TekF, 2014-02-20Beautiful! Though strictly speaking the planet should lie in the same plane as the binary star's orbits.", "otaviogood, 2014-02-20Wow, thanks for debugging it for me! I tried setting cluster to a constant. That seems to fix the strange black artifacts on a mac that had them. I didn't want to take it to 0 because that would be my star field go away. BTW, shadertoy is the coolest site.", "iq, 2014-02-20I looks awesome!!!", "", "We are getting some black artifacts in our Linux machines... I could fix them by clamping the \"cluster\" variable to 0 in line 45", "float cluster = max(0.0,(localRay.y+0.5) * 2.8 + 0.8);", "Trisomie21, 2014-02-27That was a quick try on my tablet, this tweak should cover what you mentioned.", "Just trying to save a cycle here and there", "", "The function below should mimic your default. call it with", "return clamp(1.0 - lineArrow(p, v, -v, mag_v), 0.0, 1.0);", "", "But try this line to have 90 degree arrow head, that are 20% proportional.", "a = max(a*d-a*.2, l-a*d*2.);", "", "// l is the distance to the line segment", "// a the distance to the arrowhead", "", "float lineArrow(vec2 p, vec2 p1, vec2 p2, float a) {", "vec2 v = p2 - p1;", "vec2 w = p - p1;", "float d = clamp(dot(w,v) / dot(v,v), 0., 1.);", "float l = length(w-v*d);", "a = max(a*d-3., l-a*d);", "return min(l, a)-.5;", "}", "", "Two problems: if the arrow is longer then the segment, and the segment can be thicker then the tip of the arrow...", "Will try to fix this another day.", "morgan3d, 2014-02-27Thanks, Trisomie21, I substituted your version and experimented with it, but prefer the quality (look at the antialiasing back of the arrow head) and tuneability of the current implementation.", "", "The one that I give also requires one fewer division and branch, although I don't think that is a concern for a visualization shader!", "Trisomie21, 2014-02-25I posted this in the other thread, but you can try this to draw your solid arrows.", "", "return clamp(1.0 - lineArrow(p, v, -v, min(.9, 5./mag_v)), 0.0, 1.0);", "", "float lineArrow(vec2 p, vec2 p1, vec2 p2, float m) {", "vec2 v = p2 - p1;", "vec2 w = p - p1;", "float d = clamp(dot(w,v) / dot(v,v), 0., 1.);", "v *= d;", "if(d > m) d = 0.;", "return distance(w, v)*.5 - (d*2.)/m;", "}", "morgan3d, 2014-02-22Updated to offer both quiver plot and V-style rendering, using Matthias Reitinger's line segment sign-distance function.", "morgan3d, 2014-02-22See also the followup https://www.shadertoy.com/view/ls2GWG quiver plot!", "toto263, 2020-04-25Can I use your code in my commercial music player?", "jt, 2017-10-09cool", "FabriceNeyret2, 2017-10-08I added spaces between BBcode letters for you can see them (otherwise they would have been compiled ) :-) . Put the spaces away.", "Ebanflo, 2017-10-07@Fabrice it isn't being displayed as a hyperlink, what did i do wrong?", "duvengar, 2017-10-07Pretty cool", "FabriceNeyret2, 2017-10-07same ! ( it helps showing Einstein ring )", "", "more lensing and black holes (maybe you should add this tag): https://www.shadertoy.com/results?query=lensing, https://www.shadertoy.com/results?query=black+hole", "", "NB: \"Kali XlfGRj\": more convenient to add the full link (not have to appear in full: you can use the [ u r l = ... ] label [ / u r l ] syntax.", "iapafoto, 2017-10-07Very good idea to mix star nest and black hole", "adrinalino, 2023-02-20Wow, impressive!", "Poisson, 2022-09-01It's amazing!", "GCScholar, 2020-09-30Hi, this is fantastic!! I'm reading the explanation, trying to understand something. Do you have any paper or book to advise to implement the physics of resting convex objects (at least cubes  ??. I already read the Eberly and the Millington books (I mean I REALLY read them) and wrote a lot of code, but I got stuck on the problem of the resting objects. The Millington lacks of explanations of the algorithm while the Eberly model it as a Quadratic Programming problem that is difficult to implements. Moreover, the Eberly only consider the object linear motion in collision detection and that simply does not work in my opinion (for sure I'm wrong, but I can see why). Please help me, thank you very much !!", "iapafoto, 2019-01-02super good", "dila, 2017-08-28really amazing and fast", "PieterVerhoeven, 2017-08-03Superb!", "Gaktan, 2017-07-02Shaders not compiling for WebGL 1.0", "0xAA55, 2017-06-29#define PI 3.141592653589793238462643", "834144373, 2017-06-29crazy!", "pi, 2017-06-28I can't imagine how any shader programmer wouldn't think this is cool.", "flockaroo, 2017-06-08wow!!!", "jt, 2017-06-07Amazing!!!", "FabriceNeyret2, 2017-05-29wow !", "", "might it be possible to add some human interaction to control 1 or 2 things ?", "iq, 2017-05-29Classic Archee. Amazing technical skills and results!", "", "Please do raymarch and add some fake contact shadows/occlusion, no?, or some analytic box occlusion 4sSXDV, I miss the look of your original  h4vok", "dr2, 2017-05-28Nice. My \"Destruction\" shader (and a few others) produces equivalent results, but without the complex collision analysis. It uses a more conventional MD approach, with rigid bodies approximated by fused spheres, and is easily extended to arbitrary body shapes, with correct rotational dynamics. Also does not use ray marching.", "archee, 2017-05-28Yeah, about integers, I was told, that unsigned integers are faster. Maybe only in division? I changed some of the shaders to unsigned, but gave up with the workload", "archee, 2017-05-28Larger boxes can be the same weight, but their rotational immobility must be based on their size. (proportional to diameter squared)", "Dave_Hoskins, 2017-05-28Couldn't the larger boxes just be the same weight?", "archee, 2017-05-28Different sizes boxes? Some code would need to be added to handle weight differences. Also a long box, would need rotational integration, because it's rotational immobility tensor would not be close to a scalar.  I can do it, but with a lot of additional coding.", "Dave_Hoskins, 2017-05-28Amazing work! And I like the use of integers in some of Buf A.", "pthextract, 2017-05-28Cool.", "stb, 2017-05-28Bouncy! And fast. Needs a challenge mode", "Klems, 2017-05-28Nice! Can you do different sized boxes?", "scherzo, 2022-05-13I just can't", "SadTShaders, 2022-01-14So cool!", "P_Malin, 2021-10-30@bloodnok: Totally, they look delicious!", "bloodnok, 2021-10-30Anyone else interested in what they taste like?", "asis5528, 2021-10-29This looks really cool", "paniq, 2021-10-29hot!", "z0rg, 2021-10-28Well deserved shader of the week :p", "elenzil, 2021-10-28well-deserved! this is so fresh.", "Tater, 2021-10-28WOAH! Shader of the week! Thanks again everyone.", "MacSlow, 2021-10-28What a great idea! Super nice work, Tater!", "Dave_Hoskins, 2021-10-23Brilliant work, Tater! Yeah, SoundCloud is broken for me on all the shaders now. (Chrome/Windows)", "oneshade, 2021-10-22Fun idea!", "froggynotacon, 2021-10-22Very cool!", "samesh, 2021-10-20I can watch this for days", "P_Malin, 2021-10-18Love it!", "Tater, 2021-10-15Thanks @iq, and @aiekick! Also @dean_the_coder, @iY0Yi, @duke", "iq, 2021-10-15Super cool!", "aiekick, 2021-10-15super cool", "Tater, 2021-10-15@Shane Thanks!!", "Shane, 2021-10-15 This is one of my favorite geometry related shaders in a while. Very cool. I made a single extruded non-rolling spiral thing a while back, but I can't remember whether it was constructed in a more efficient manner or not. Probably not, but I might track it down and compare.", "Tater, 2021-10-14@ollj soundcloud is broken for me, it just says \"this track cannot be streamed\" for all tracks, unless you mean a sound shader but I don't think I will attempt that.", "ollj, 2021-10-14could use audio", "dean_the_coder, 2021-10-14Mousable too! Cool!", "iY0Yi, 2021-10-14Very nice! I can't stop watching.", "Duke, 2021-10-14Nice!", "Tater, 2021-10-14Thanks @jorge2017a2, @jeremyabel, @FabriceNeyret, @byt3_mechanic, @TheNosiriN! <3", "TheNosiriN, 2021-10-14It's beautiful", "byt3_m3chanic, 2021-10-13Thats so nice! WOW!", "FabriceNeyret2, 2021-10-13very fun and original !", "jeremyabel, 2021-10-13very neat!!", "jorge2017a2, 2021-10-13100% original ... and very beautiful !!!! great .... very nice colors !!!!", "Xor, 2021-10-13Perfect!", "Tater, 2021-10-13@Xor I added an AA define.", "Xor, 2021-10-13Beautiful! I would love some AA with this", "Tater, 2021-10-13@elenzil thanks! I couldn't decide if it looks cooler with time forwards or backwards.", "elenzil, 2021-10-13this is amazing. I want a whole wall of my house doing this (with time reversed)", "FabriceNeyret2, 2023-03-08@iq \"looks correct\": probably yes: classical strange look when using large FOV while doing the rendering in a small window ( i.e. real viewer not at all coherent with virtual camera. while with coherent conditions the IRL screen to eye geometric projection compensate, with side pixels more distant and very tilted compare to central pixels ).", "iq, 2023-03-07It looks correct to me. I think if you use sin instead of cosine so the lines align to the geometry edges, it will work well. You can try also this: uv = smoothstep(0.9,1.0, cos(6.283185*4.0*uv));", "color = vec3( max(uv.x,uv.y)) ;", "FabriceNeyret2, 2023-03-07@iq: something seems odd to me:", "with this camera, the uv tiles at bottom appear higher than they are large:", "mat4 mdv = setTranslation( 0.0, 0.5, -6. ) *", "setRotation( 1., 0.0,  0.0 ) *", "setRotation( 0.0, 3.1*sin(0.3*iTime), 0.0 );", "frame 0", "", "", "shading:", "uv = cos(6.28*4.*uv); uv = smoothstep(1.,0., abs(uv/fwidth(uv)));", "color = vec3( max(uv.x,uv.y)) ;", "paganaye, 2021-12-24Loving this part:", "// render 12 triangles", "for( int i=0; i<14; i++ )", "matsuba, 2013-09-18Your code is helpful to me.", "iq, 2013-02-25Perhaps. Well, all rasterizers are raytracers really. I guess it's more a \"for every pixel for every triangle\" vs \"for every triangle for every pixel\" thing?", "Psycho, 2013-02-24I would still characterize it as a (clip space) ray tracer.", "PauloFalcao, 2013-02-20Awesome! A reference implementation", "oneshade, 2020-11-27Also one that doesn't make my laptop laggy ;)", "oneshade, 2020-11-27Super cool! I really like the fog and crystalline surface!", "pjkarlik, 2020-11-26Way cool, reminds me of the alien spore stuff in 'Lone Echo'", "UrbanClubProfessional, 2020-11-25Remix: https://www.shadertoy.com/view/WddfWs", "FabriceNeyret2, 2020-11-25at some moment I get some dark blue spots (even sligthly frame 0):", "this is due to a pow of negative.", "FabriceNeyret2, 2020-11-25wow, how did I miss that soooo cool one at the time ?", "Shane, 2018-08-04@BigWIngs", "My main focus here was the cheap 3D Voronoi-like implementation. At the time, raymarching 3D Voronoi wasn't viable, so I was obsessed with coming up with an alternative. I later went to the trouble of packing real 3D Voronoi into a 2D texture for a comparison. The real thing is better, but this is a way, way faster.", "", "Anyway, the rest was an afterthought, including the rendering style. Out of sheer boredom, I put up a \"Glowing Blocks\" example the other day and noted that it had a halfway decent heated surface look about it for very little extra cost. I think between that, this and few other things, it'd be possible to make a cheap, but nice molten rock example... Of course, if you want something really nice looking, then Virgil's \"Rhodium Liquid Carbon\" example would be the one to look at.", "BigWIngs, 2018-06-28This looks so cool! I've been wanting to make a lava shader for a while. Might see if I can use some of this somehow.", "zproxy, 2017-11-25360 at", "iapafoto, 2016-04-25Color are beautifull and the shader isvery fast even with this very very slow PC", "iq, 2016-04-18It looks very good", "Shane, 2016-04-18Thanks for the comments. The cheap, cellular looking surface was the main point of this, but I also wanted an excuse to use XT95's really cool, cheap translucency code.", "", "By the way, if anyone can figure out a way to reduce the instruction count in the \"cellTile\" function, feel free to let me know about it.", "", "@dila", "Obviously, you'd be familiar with some of the distance function setup, but the cheap, volumetric fog might be of use to you, so feel free to use it, improve on it, etc.", "Shane, 2016-04-18@tomkh", "It hardly surprises me that you were thinking along similar lines over a decade ago.", "", "As you'd know, repeat 3D Voronoi tiling, or any other 3D tiling, becomes trivial with 3D texture support, since you have the benefit of preconstruction - On a side note, I hear we'll be getting those at some stage.", "", "What makes this particular version interesting, to me at least, is the minimal instruction count. The tile here uses just six strategically placed spheres, and under certain circumstances, you can get away with as few as four. Of course, you're not limited to just spheres.", "", "I know of a few ways to take the method further, but I'd be more interested in seeing your take on it.", "stb, 2016-04-17_that_ is really cool", "tomkh, 2016-04-17Niiice.", "Reminds me of things I was doing in 2003-2005 (also with 3d cellular tiles).", "Unfortunately, there was not enough GPU power to push things like this in real-time.", "Additionally, your shader is (as usual) rendering fast & smooth. That's a big plus and rare trademark!", "dila, 2016-04-17Yes!", "aiekick, 2016-04-17 as usual", "GregRostami, 2016-04-17Shane does it again ... EPIC!", "UrbanClubProfessional, 2020-11-03This shader received a remix here: https://www.shadertoy.com/view/tdcBR4", "andrewbrown1989, 2020-09-17That looks like something impossible.", "Lorek_440, 2020-09-15", "You can see that you are a real artist!", "wosztal15, 2020-09-11", "Looks wonderful! Congratulations!", "celifrog, 2020-09-09Lol cool, looks kinda like an indie game.", "laserdog, 2018-02-14this noise function is wonderful. inspired me to make this: https://www.shadertoy.com/view/MscyWH", "valentingalea, 2016-06-15cute", "kuvkar, 2016-06-14Thanks for comments!", "@FabriceNeyret2 they are supposed to be stones, my eye for colors might not be perfect", "@fb39ca4 that's interesting point, I could try to do some DOF too using same logic.", "@Shane I might try that next!", "poljere, 2016-06-14Like!", "Shane, 2016-06-14Love the rendering style. A flyover scene with no boundaries would be pretty cool too.", "FabriceNeyret2, 2016-06-14funny :   small blue pyramids are lakes ? ;-)", "iq, 2016-06-14pretty!", "aiekick, 2016-06-13nice", "fb39ca4, 2016-06-13Your antialiasing is actually quite similar to raymarching depth-of-field implementations.", "Andre, 2021-07-13Nicely done, good work. I always found the definition of car a bit off for this thing. More like a ground rocket", "Zi7ar21, 2021-07-13I muted the background music, the sound effects are really neat", "jeyko, 2021-07-12wow nice", "oneshade, 2021-07-08Less than 1fps for me but it looks pretty cool! I didn't know there was a car that could go faster than sound, thats pretty cool too.", "deffe, 2021-07-083.5fps on macbook pro 2019 ,  still cool though. will look at it on my stationary with RTX3080", "raabix, 2020-04-07I'd have loved to see this production somewhere at a demo party", "gambhiro, 2018-05-14This is epic! It gets cinematic with the various camera takes.", "ingagard, 2017-10-14This was really stunning. I crown you the king of Shadertoy. :-)", "FabriceNeyret2, 2017-06-12meaning you pad is not compatible with webgl2. test here http://webglreport.com/?v=2", "There are workaround by replacing texelFetch(channel, U, 0) by texture(channel, U/iResolution.xy), but there will probably be other similar issues.", "MacroMachines, 2017-06-12texelFetch' : no matching overload function found.  Is this possibly a compatibility issue with my iPad Im currently using?  Is ther3 a work around?", "andro, 2017-04-21mind..is..blown.. <3", "starea, 2017-04-21Both sound and visual are awesome!", "Makio64, 2017-04-21wow!", "P_Malin, 2017-04-20nexor: Oops, yes that was annoying me too. Fixed now (I needed to normalize a plane distance in Buf B line 712). Thanks.", "nexor, 2017-04-19really nice shader!", "one problem though: the car's pointy tip gets cut off when viewed from the front :S", "pthextract, 2017-03-17But if this is really hard to pull of I would not know.  Never tried.", "pthextract, 2017-03-17Ok. I could hear a pitch shift, but I dont think there was a pitch shift in the noise. So you dont get that sensation of speed you would get when a racecar was passing or something like that.", "pthextract, 2017-03-17Well it might be in the program, but it's not in my ear. I mean even a car has a pronounced pitch shift, so a rocket would probably go from highpeached squeaking to the lowest baseline growl. But still the rocket sound is pretty amazing. Ok. I'll have a look at the sound shader then.", "P_Malin, 2017-03-17Thanks pthextract, but it does implement the doppler effect! You can make it more pronounced by changing kSpeedOfSound in the Sound shader ~line 338. try:", "const float kSpeedOfSound = 340.29 * 0.1;", "pthextract, 2017-03-07My cat reacts to the stereo effects.", "pthextract, 2017-03-07Awesome stuff. Especially rocket engine sound. But I miss the doppler effect.", "P_Malin, 2016-07-21Haha, well I did spend a long time on it, but just long evenings and lunch breaks. I had some basic implementations of a lot of the techniques I used in other shaders I've written (mainly Shader Rally and DeLorean) so it wasn't _all_ new.", "FabriceNeyret2, 2016-07-21I'm curious: how many time did you spent to make such a 70.000 char shader ? ( are you doing this full time or what ? :-) )", "otaviogood, 2016-07-19Holy crap. This needs to win the category for most variety of stuff! The sonic boom was a nice touch.", "Shane, 2016-07-19 Wow!", "vgs, 2016-07-18this is perfect in so many ways!", "SharkyUK, 2016-07-17Fantabulous!", "KylBlz, 2016-07-17Yes!! I was waiting for your entry --you didn't dissapoint", "FabriceNeyret2, 2016-07-17yep, now working fine !", "( very cool shader, BTW. probably the winner ! )", "tomkh, 2016-07-17Pro!  I especially love how camera position affect sound, great job all the way.", "Duke, 2016-07-17Wow!", "P_Malin, 2016-07-17Fantastic, thank you so much Fabrice! Like this?", "FabriceNeyret2, 2016-07-17minimal change:", "bufA: 259 &  583, 2nd para: const in -> in", "bufB, 262 & 936, 2nd para: const in -> in", "", "const in on a struct seems to cause the problem.", "FabriceNeyret2, 2016-07-17ok, suppressing all the const in in bufB funcs API made it work.", "( don't know if only one mattered or all ).", "FabriceNeyret2, 2016-07-17BufA: 159 & 583: const in -> in.", "", "So maybe mentionned line numbers are relevant, after all.  (was telling 160. error C1317 )", "-> BufB: lines 477, 479, 480 . for now I see nothing suspicious.", "FabriceNeyret2, 2016-07-17what, you don't always have a virtualbox around ? ;-)", "", "I'm not sure how a in / out could be related. But I'm not sure what \"qualifier\" means here: issue with some const used as out, possibly ?", "(or maybe it's just the length of the shader that makes some compiler crazy).", "P_Malin, 2016-07-17Sorry Fabrice, I don't have a linux setup at home these days so I'm not sure I can reproduce that. Sounds like something to do with in, out, inout parameters I guess.", "FabriceNeyret2, 2016-07-17not compiling on linux / chrome.", "Buf A and C : \"unknown error\" (1 in A, 3 in C, I guess lines mentionned are meaningless)", "all about \"qualified actual parameter #2 cannot be converted to a less qualified parameter\"", "fb39ca4, 2016-07-17This is first place material!", "iq, 2016-07-17Wooow, this is pretty amazing. That glare along the car silhouette at 0:48 was an act of love.", "morgan3d, 2016-07-17Spectacular!", "knarkowicz, 2016-07-17Perfect.", "flockaroo, 2016-07-17wow! cool cuts!", "Dave_Hoskins, 2016-07-16Wow. And  I love the sounds added in, they fit perfectly.", "cornusammonis, 2021-06-04SampleLevel is equivalent in D3D10+", "Davian_Machete, 2021-06-01Great job, looks very nice. I want to experiment with this shader in Unity, but I'm having problems I can't find an equivalent method of textureLod in HLSL from GLSL. Thanks.))", "ollj, 2019-02-13https://en.wikipedia.org/wiki/Iridescence", "https://www.shadertoy.com/results?query=Iridescence", "", "when the apparent hue of something depends on viewing angle, mostly because", "- you have 2 semitransparent layers, and a different angle gets you a different dotproduct(surfacenormal,raydir) for the 2 scattering reflections that remove one wavelength to 0, (ray length trough medium) and double the amplitude of the halveAsLong wavelength of it. (fresnel/schlick minimum) of a pigment. (oil/soap films)", "- you have a sheet with many holes or slits with a radius/width of roughly 300-1500 nanometers, viewing angle constrains what wavelengths can pass trough it unfiltered. many butterfly wings have this nano-structure)", "starea, 2017-09-05This is so beautiful!", "pthextract, 2017-01-18Oh shit.", "ollj, 2016-05-06good for whet metal. bad for soapbubbles while you do not draw transparency and backfaces.", "akohdr, 2016-05-03needs a pin", "Phi, 2016-05-02Beautiful bubble !", "nicoptere, 2016-05-01beautiful, love what happens inside", "SarahC, 2021-06-21Chrome's broken all these. =(  Google - get your act together.", "nonek77, 2021-06-15OMG it's great!", "badentervue, 2021-06-15Top 5 all-time", "jayparikh20, 2019-04-27Color output of green screen video is not accurate, how do i solve this?", "kad, 2019-01-19nice !", "casty, 2014-02-18", "You can get rid of much of that black borders returning the luminance you stole on the despill:", "", "Or replacing line 20 with:", "", "float dg = br.g - min(br.g,maxrb*0.85);", "br.g -= dg;", "br += dg*vec3(0.4, 0.3, 0.3)*4.0;", "Betalord, 2022-06-20I get full of artefacts on my screen (especially after some time). There is some mirroring too (symmetries).", "mosaic, 2021-10-01Looks great!", "It breaks when going fullscreen though", "nside, 2021-09-11I suggest you use iTime instead of iFrame", "DrLuke, 2017-11-10Any idea why this is broken on intel GPUs?", "https://my.mixtape.moe/nyknuq.png", "xaot88, 2016-08-29Added smooth slow scrolling, as proposed by iq.", "", "By the way, I think my 4-point linear interpolation isn't ideal for sampling the star field, but I'm not sure what's a better technique.  Suggestions appreciated!", "xaot88, 2016-08-27Another minor update: Removed the fract() that used to be on line 7 (as suggested by iq).  Also, removed some floating point multiplies and adds.  So, it's simpler and faster, with essentially identical results.", "xaot88, 2015-02-07I made a minor update: added some variety to the brightness of each star.", "iq, 2014-11-03That should work. It would be cool if you implemented it and did some smooth slow scrolling as I proposed.", "", "Also, the fract() at line 7 can me omitted, since you are taking fract() at line 14 anyways (if there are visual differences that's due to  GPU precision problems).", "xaot88, 2014-11-02Hi iq!  Many thanks for your comment!", "", "I added camera movement based on the mouse input.  The basic idea is to only sample the star field (i.e., call Noise2d()) for integer arguments.  If we want the star field value at fractional points, we could sample at the neighboring integral points and linearly interpolate.", "", "What do you think?", "Jim", "iq, 2014-10-31The problem with this approach is that it only works for a static image -you can't do animation / move the camera with it (try adding vNormalizedUv +=0.0001*iGlobalTime;)", "xaot88, 2014-10-29I'm commenting on my own shader, to provide a little background.", "", "I was looking for a simple and efficient star field, and what I found were basically two types:", "(1) Loop over *all* stars and compute the contribution of each star.", "(2) Use a Hash function, along with Fractal Value Noise or Fractal Perlin Noise (FBM-style), and raise the output to a large power (like 100) to filter out everything except the highest values.", "", "I didn't like approach (1), because it doesn't seems to scale well.  If you have thousands of stars, I think it's too inefficient.", "", "Approach (2) seemed quite promising, but when you look closely at the output, there are strange visual artifacts.  In particular, because Value Noise and Perlin Noise are *continuous*, the output often has visual \"ridges\".  (I.e., some stars come out as short line segments, instead of as points of light.)  Continuous noise functions (like Value and Perlin) are great for modeling *surfaces* like terrain or water.  But, a star field seems (to me) to be better-modeled as discrete points of light.  In my opinion, Value and Perlin Noise are *not* a good model for a star field.  Moreover, the fractal aspects of FBMs are not really useful here either.  I don't see star fields as being fractal.", "", "So, my approach was to start with a discrete (non-continuous) noise hash, and keep it that way!  I skipped the Value/Perlin approach of making the noise function continuous.  And I skipped the fractal FBM-style generator too.  The resulting star field doesn't have any ridge-like visual artifacts.  And the whole algorithm is much simpler and more efficient than any other starfield shader I've seen.", "", "I look forward to your comments!", "raymarchingenthusiast, 2022-12-21Can I use this for a bloom effect in one of my raymarchers?", "Loadus, 2016-03-05@CeeJayDK: Cheers for that, works great!", "CeeJayDK, 2016-03-04Your sigmoid produces the same output as one of mine, but mine does not require the if-then-else.", "", "Try :", "", "float SCurve (float x) {", "", "x = x * 2.0 - 1.0;", "return -x * abs(x) * 0.5 + x + 0.5;", "//return dot(vec3(-x,2.0,1.0 ),vec3(abs(x),x,1.0)) * 0.5; //possibly faster version - I will need to check ASM output though and I can't do that here", "}", "JJJK, 2015-02-09Regarding the comment in main(), I think it would be really interesting to have multiple passes in Shadertoy, but right now there's just one.", "", "Of course that would add an entirely new dimension to the whole thing. Even adding the previous frame as another channel would have huge implications. Mini-Games would become feasible by saving the current state in a row of pixels or something. We could have fancy cellular automatons and whatnot... Not sure if that's compatible with the spirit of the site of course - there's always been something inspiring about technical limitations.", "jarble, 2023-05-15Coincidentally, I found another fractal terrain that resembles the Alps.", "Jill_Lauren, 2015-09-18Hello Dave, your shaders are amazing!!! I\u00e2\u20ac\u2122m Jill, Art Director at Dinahmoe (dinahmoe.com) and we\u00e2\u20ac\u2122re currently watching for a freelancer to help us with a project:", "We need some astonishing shaders for wind/snow/sandstorm/crackling ice, in WebGL (2d). The shaders will all be used interactively, reacting to the mouse position in ways to be decided together. Creative input is totally welcome on this, we look for great looking visuals.", "I'd be super happy to hear from you: jill@dinahmoe.com", "dila, 2015-07-13superb!", "ciberxtrem, 2015-07-08Super beautiful!!", "anastadunbar, 2015-07-08I also like the FBM function, it's like a sound filter, I haven't researched for how sound filters work.", "anastadunbar, 2015-07-08That's cool.", "aiekick, 2015-06-11yes,thanks you", "Dave_Hoskins, 2015-06-08Hi, thanks. Yeah, sure you can use it, with a credit and a link back here, if that's OK?", "aiekick, 2015-06-08i develop a soft for develop and exploring shader like this with joystick or gamepad. can i use this shader (and many other landscape of you ) in demo video ( with credit of course  ) ? thanks", "aiekick, 2015-06-08oh great, i just discover it and i love it", "fizzer, 2014-08-19I can almost feel the wind in my hair. Awesome!", "vgs, 2014-08-10Amazing!", "xbe, 2014-08-03Simply beautiful!", "movAX13h, 2014-08-03looks really good! but I get only 0.2fps in chrome. offline the framerate is fine.", "iq, 2014-08-03Super, supper cool!", "poljere, 2014-08-02As usual Dave, really cool shader", "mla, 2022-06-29The magic numbers are from LCG random number generators, but used here as a bit scrambler in a hash function, which is something different, so no particular reason to think they are specially good choices here (on the other hand, they work well enough, so don't seem to be spectacularly bad). You can test a hash function with a RNG tester like dieharder by treating hash(1),hash(2),... as a random sequence (changed appropriately for multi dimensional hashes).", "xrx, 2022-06-28was just curious experimenting on these voodoo numbers at bit level patterns, instead of primes", "obviously they give different distributions once the pass a set of subsequent * % ^ etc instructions.", "xrx, 2022-06-28floatBitsToUint cast has nothing todo with rand, just saying it works on vecs. dont need repeat f.x f.y...", "as for rand shift just experimenting, nothing special, guess I have to look for rand histograms to test. thanks", "FabriceNeyret2, 2022-06-28@xrx:", "- floatBitsToUint alone is not random at all.", "- variant of ihash with another shift and k: I guess these values have been chosen and discussed in length through many scientific papers together with demanding mathematical measuring tests.", "Why do you want to change these values, and why do you expect your choices to be better ?", "i.e. why yours is the answer to what problem ?", "xrx, 2022-06-28floatBitsToUint is a vec function, so bellow should work (https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/floatBitsToInt.xhtml)", "", "uvec3 ihash(vec3 f){", "uvec3 us = floatBitsToUint(f);", "return us;", "}", "xrx, 2022-06-28what you think on bellow:?", "", "const uint k = 0x8000808Bu; // 0b10000000000000001000000010001011", "vec3 hash(uvec3 x){", "x = ((x>>1)^x.xyz)*k;", "x = ((x>>1)^x.zxy)*k;", "x = ((x>>1)^x.yzx)*k;", "return vec3(x)*(1./float(uint(-1)));", "}", "", "void mainImage( out vec4 C, in vec2 p){", "C = vec4( hash(uvec3(p, iFrame)),0);", "}", "FabriceNeyret2, 2022-04-14\u2192 variant posted here. seems just perfect in all situations :  https://www.shadertoy.com/view/NtjyWw", "FabriceNeyret2, 2022-04-12or is the best just", "vec3 ihash( vec3 f )", "{", "uvec3 x = uvec3( floatBitsToUint(f.x),", "floatBitsToUint(f.y),", "floatBitsToUint(f.z) );", "", "?", "FabriceNeyret2, 2022-04-12otherwise if we want to hash signed float 3D coordinates which we have no idea of the range, how should we convert them to uvec3 ?", "FabriceNeyret2, 2022-04-12and how bad would it be to directly use the signed int version of this ?", "FabriceNeyret2, 2022-01-27apparently the good seeding is important:", "I wanted to emulate a 1->3 hash using hash( uvec3( my small int ) ) and the result is horrible.", "I then did uvec3(v,k,v+k) and it's ok.", "-> what is the general recommandation ?", "FabriceNeyret2, 2020-10-20New: evaluated in this new paper http://www.jcgt.org/published/0009/03/02/.", "See also https://www.shadertoy.com/view/XlGcRh", "mla, 2018-12-27Probably want a floor in there as well as float->int conversion seems to truncate (\"uvec3 p = uvec3(ivec3(floor(fragCoord - 0.5*iResolution.xy), iFrame));\"", "mla, 2018-12-26This isa really nice hash function. Problem with negative inputs can be fixed by converting to an ivec3 before uvec3:", "", "uvec3 p = uvec3(ivec3(fragCoord - 0.5*iResolution.xy, iFrame));", "FabriceNeyret2, 2018-05-02wow, a new nasty windows angle bug makes floor/cell IGNORED on the result of this hash function, see acid test here: https://www.shadertoy.com/view/MdtfWN", "", "fix: add +1e-30 on the returned value at the end of hash().", "FabriceNeyret2, 2018-04-23-> #define unsigned(v) ( (v) >= 0. ? uint(v) : -1U-uint(-(v)) )", "FabriceNeyret2, 2018-04-23that's awful but to get hash working in full range of p values comprising negatives (e.g. in Perlin noise)  we need to fix the bug as follows:", "U -= 100.;", "uvec3 p = uvec3(U, 0);", "if (U.x<0.) p.x = -1U-uint(-U.x);", "if (U.y<0.) p.y = -1U-uint(-U.y);", "FabriceNeyret2, 2018-04-23ok, it's one more compiler bug.  uvec(-1) differs as cont or not const.", "acid test: https://www.shadertoy.com/view/Ms3fz7", "FabriceNeyret2, 2018-04-23for strange reason it does not work for negatives :", "try   uvec3 p = uvec3(fragCoord-100., iFrame);", "despite uvec(-1) is well defined (wrap to 2^32).", "Any idea why ?", "Might it be OS dependant ?", "darkdivan, 2023-05-09did you just accidentally simulate a universe?!", "michael0884, 2023-01-09I discovered this accidentally", "Amirk, 2023-01-08Beautiful. Did you come up with the model yourself or where could one fiend reference?", "deedee23, 2020-10-08This really is something special & lifelike!", "Cotterzz, 2020-09-14What I love about this is the high level of emergent homeostasis these things exhibit.", "Also, looking at it makes the jump from proteins to viruses seem much more feasible", "This is a really interesting one to switch to fullscreen, it creates arcs that give life to new cells.", "Increasing the number of paint calls, if you have the plugin, is also recommended.", "michael0884, 2020-09-13You mean solitonic waves?", "BigWIngs, 2020-09-13This reminds me of energy wave theory which posits that all fundamental particles are just standing energy waves. Google it, you'll find it interesting ;)", "nr4, 2020-09-04This is immensely nice", "Guilouf, 2020-09-01It's actually fun to kill them", "TGlad, 2020-08-31A lovely emergent system. You might also like this 'polyps' shader: https://www.shadertoy.com/view/WlVXWc", "which is different, but also emergent from a simple formula.", "ShnitzelKiller, 2020-08-29fascinating how they \"reorient\" their limbs from time to time.", "antonOTI, 2020-08-27This is a fascinating emergent system!", "Duke, 2020-08-25Cool!", "michael0884, 2020-08-25@FabriceNeyret2, and yeah, they do reproduce sometimes", "michael0884, 2020-08-25@tb, emergent", "@FabriceNeyret2, its life-ish", "FabriceNeyret2, 2020-08-25can they met and reproduce ? :-p", "or at least divide from time to time ?", "( without death, is life really life ? :-p )", "metalim, 2020-08-25Note how 2 of them, moving at specific distance and direction, can give birth to new cell.", "tb, 2020-08-25I like how the 'wings' reshape and the 'engine' propels them in a different direction when they meet resistance in a collision.", "Was this deliberate or truly emergent?", "metalim, 2020-08-25Nice one! \u2764", "FabriceNeyret2, 2020-08-25cool oddity #851 :-p", "Zi7ar21, 2020-08-25OK bruh this is insane", "teadrinker, 2020-08-25Wow, what is going on here?", "FoxyOfJungle, 2021-10-07Impressive!", "P_Malin, 2016-12-21Hi Artoo, Hope you are having fun with shaders.", "Hmm, strange. The most likely cause would be that the red and blue channels of your textures are being swapped for some reason. I can make the shadertoy shader look like this by adding line 203:", "cTextureSample.rgb = cTextureSample.bgr;", "I'm not sure what the cause would be in your environment though. That could happen due to a number of reasons. Also I'm not sure why that would make the mug go yellow as that color is just a shader constant on line 218, i.e. i can change that line to:", "mat.cAlbedo = mix(vec3(1.0, 1.0, 0.0), vColour, cTextureSample.a);", "and it looks like the result you are seeing.", "Artoo, 2016-12-21So I am new to shaders - standing on the shoulders of giants I ported this to my max/jitter environment, with some success. But my colors are a bit askew - the wood texture for example is a nice shade of blue.", "", "here is a link to an image showing tthe jitter shader", "", "http://preview.tinyurl.com/jeot2zt", "", "Anyone have any ideas what may be causing this.", "timeiskey, 2014-11-28what is causing the weirdy lensing effect?", "squeakyneb, 2013-12-13The tablet playing the video is just... wow. It can be done pretty simply (turn plane position into texture coords) but actually seeing it done is just fucking cool. I really like this.", "chaotic, 2013-06-13looks like an apple tablet - home button  ;)", "bkaradzic, 2013-02-26Amazing!", "poljere, 2013-02-26Ok, I was expecting people to write creative shaders... but this is awesome! Textures, animations, video, mouse input and on top of it, good shading.", "iq, 2013-02-26this is genius. \"Nyan Cup\", a google tablet showing a google video, and an excellent raymarcher. Wow", "zproxy, 2021-09-04man shadertoy should allow double star up after a year. +2", "andremichelle, 2020-10-08Using, yet again your shader for a featured audiotool.com track. Love your shaders. If you like different credits, please contact me. https://www.youtube.com/watch?v=BX4Rcgd4a-E", "szczm_, 2019-12-20@Shane of course, it's my old enemy that never gives up. I don't remember/can't find now the bug report, but the Intel Mesa drivers that I have (IIRC this actually affects a wide range of HW) has broken trig. funcs, so sin/cos break (I think they start losing precision?) for large arguments.", "", "So the fix (if you want to apply it) is very basic \u2014 just change line 151 in n2D to something like:", "return dot(mat2(fract(sin(mod(vec4(0, 1, 113, 114) + dot(i, vec2(1, 113)), TAU))*43758.5453))*", "", "Just have to mod the sin argument.", "", "Can you confirm that this is the right appearance? https://imgur.com/a/exdGrEE", "", "Now that I (hopefully) fixed it, I can fully appreciate the work you put into it. And nice bumpmapping, too", "Shane, 2019-12-18I like oldschool sci-fi imagery. I'm going to put up some more, when I get time.", "", "@szczm_", "I'm not sure what would be causing that, but it looks like one of the hash functions is not working the way it's supposed to -- Basically, something in a grid is not being offset as required. I don't have access to Linux stuff, so I can't investigate, but if you ever figure out what it is, feel free to let me know.", "crocidb, 2019-12-16Fantastic work!", "domadmiralis, 2019-12-15this is trippppyyyy", "kuvkar, 2019-12-12awesome shader!", "AntoineC, 2019-12-11Love the geometry vs terrain \"visual contrast\". Definitely an inspiring scene!", "userse31, 2019-12-11Lol, the computer hates it....", "szczm_, 2019-12-10Simply amazing :O", "", "By the way, I'm guessing these are some artifacts I'm getting, not proper rendering? https://imgur.com/a/QkVuDcF Ubuntu, Firefox, Intel HD 3000/Sandybridge if that helps", "granito, 2019-05-22gorgeous. warped lens effect FTW(!)", "Passion, 2019-05-01Reflections are amazing on this Shane mice work!", "flockaroo, 2019-04-30really like that one!! the colors/light make it look very real!", "reinder, 2019-04-29Really beautiful! I always like your visuals", "Shane, 2019-04-29Thanks, everyone. I like anything artsy that's easy to reproduce. Some of Mike Winkelmann's imagery wouldn't be easy to reproduce at all in realtime, but I thought the image this scene was based on would be doable.", "", "For all intents and purposes, this is just a perturbed plane with some tori lined up along it. The only tricky part was reproducing it on the cheap. The terrain itself consists primarily of cheap triangle-like functions. The clouds consist of just two layers, the white fluffy layer, and a fake shadow layer. I also sprinkled some 3D noisy sediment for something to do. The rest was just a bit of window dressing.", "KylBlz, 2019-04-28looking good!", "P_Malin, 2019-04-27Nice one!", "wyatt, 2019-04-27wow!! It was cool to check out mike winkelmann too", "shau, 2019-04-27 Beautifully rendered.", "felipunkerito, 2019-04-26Awesome!", "BigWIngs, 2019-04-26Simple effect, beautifully rendered!", "aiekick, 2019-04-26marvelous as usual", "iq, 2019-04-26Wow, VERY nice!", "EvilRyu, 2019-04-26love it", "elenzil, 2019-04-26sweet", "duvengar, 2019-04-26Amazing scene and great ref.", "patu, 2019-04-26", "ttg, 2018-02-20@FabriceNeyret2 The only difference in 4dccDM is that the motion has been slowed but not stopped and that a temporal", "dithering is implemented.  The section which is commented out attempts to simulate what happens with poor bit depth.", "", "@everyone here: If you do enable the simulated 6-bit depth, and disable the dithering I have added, on a \"known-good display\"", "(true 8-bit depth without reliance on dithering), what do you see?", "", "In this DELL laptop panel, something interesting happens which is that, for smooth gradients, the panel behaves as if having a", "9-bit depth - 512 distinct values are visible, without any spacial or temporal variations to accomplish this.", "However, when the pattern supplied is a 1px checkerboard AND more than one channel is nonzero, the panel behaves quite", "badly, which I would blame on compression rather than on dithering given that dithering doesn't seem to be needed to display", "these same shades when the checkerboard is absent.", "", "This leads me to conclude that the gamma test image you are intending to show is simply impossible to send uncorrupted to the", "DACs of some panels due to compressions and possibly dithering used.", "FabriceNeyret2, 2018-02-20@ttg. note that many DELL(*) screens (laptop and desktop) to have complex dithering systems (spatial and temporal),even for full bit length.  (*): for other brands, I just don't know.", "In your derivative the bands are there, but motionless. what should we see, what is the difference ?", "ttg, 2018-02-20See my derivative 4dccDM and uncomment the part about simulating bit depth.", "", "I can't find any evidence that my panel does any dithering whatsoever.", "The real weirdness is that Red, Green, Blue, and White all look just as they should (when temporal dithering is added), but", "Yellow, Magenta, and Cyan look terrible - the hardware in my system does something very naughty with cross-mixing the", "channels in some sort of lossy compression scheme.", "hellotanjent, 2018-02-20That's correct, the wavefronts move quickly enough to be noticeable but individual pixels are changing smoothly at a rate of only about  2 hertz.", "", "I don't have a 6-bit panel available to test with, but I wouldn't be surprised if there's some strangeness occurring due to the hardware dithering.", "ttg, 2018-02-19The wave pattern is meant to call attention to errors caused by gamma problems while varying the value of each pixel sufficiently", "slowly as to not incur visible artifacts as a result of response times?", "When a panel has significant shortcomings in bit depth, this assumption doesn't work out - additional artifacts are visible when", "the animation is enabled.  The wavefronts move rather quickly, and one bit worth of contrast is enough to reveal response times", "for a panel which only has 6 bits of depth.", "hellotanjent, 2018-02-19The wave+checkerboard pattern is designed to avoid pixel response-time errors. I've checked this against a couple known-good displays and the waves are very nearly invisible.", "ttg, 2018-02-19Even with correct gamma settings, waves and stripes can remain visible (as with my panel) due to lack of dithering and due to", "limitations in response time.", "hellotanjent, 2018-02-19\"you could also do fract( x / float( 1<<(bit+1) ) )\" - I've changed it, I was working around an issue in older Firefox where it doesn't support logical operations, and decided to remove the shifts as well just in case.", "", "\"int(floor)\" - oops", "", "\"pow(2.,x)\" - already done", "", "normalize/mix - just trying to make the code slightly more readable.", "FabriceNeyret2, 2018-02-19cool idea.", "", "not that defining gamma and bit as a #define would allow to directly apply on vectors.", "", "bit: you could also do fract( x / float( 1<<(bit+1) ) )", "but it's always risky to count bits using floats.    ( ok, here it's no problem).", "", "int(floor) : floor useless", "", "pow(2.,x) = exp2(x)", "", "why not first normalizeing fragCoord /= iResolution.xy ?", "", "mix(a,a+b,v) = a+mix(0,b,v) = a + b*v", "FabriceNeyret2, 2019-01-19I'm puzzled by line 289: it looks like using the official Schlick approximation with theta_t instead of theta_i,  right ? or is the original mutely assume that \"incident\" is the part of the ray in the dense medium ?", "pthextract, 2017-01-12Yeah. I have no clue how to do it. But it would be fun to try.  It also seems like light is caught up in the sphere rotating around in there for ever. That is hard to simulate.", "demofox, 2017-01-12Agreed, the shadow could be softened (probably for pretty cheaply too!) and yeah, the shadow shouldn't be just solid black probably (which may also be fairly easy to make happen).  The hard part is the last you mention: caustics.  There may be an analytical way to do caustics with a sphere, but I'm not sure what it is, if it exists.  Real caustics are difficult to render with path tracing, usually reserved for bidirectional path tracing and similar (:", "pthextract, 2017-01-12The shadow is a bit to solid for a transparent object?  And the table should be burning from the focused light?", "pthextract, 2017-01-12Can you light it up from within?  Or put a shiny object in the middle? Also I think the shiny specular dot looks better if it is smaller or brighter(OBJECT_SPECPOWER    2001.). Actually I think the problem is that the whole specular spot is of the same brightness. Otherwise it is fine. The combo of reflection and refraction gives a strong impression of volume. And there are probably lotsa stuff done right here I wouldnt know about.", "demofox, 2017-01-12@xmk Doing the naive / brute force implementation, the ray needs to split into two rays whenever it hits a surface, which means exponential complexity.  In practice though, you could do some things to reign that in, based on whatever trade offs you are willing to make.", "", "One idea that seems appealing to me would be to do like I'm doing where you always follow the refractive ray, but do a 1 bounce reflection at each intersection.", "", "That may be good enough on it's own, but if you combine that with temporal AA, on the first frame you'll have single bounce reflections, and on the second frame, you'll have single bounce reflections OF single bounce reflections (so have 2 bounces), and on the third frame you'll have triple bounce reflections and so on.", "", "So, a single frame would be iterative (follow the refraction path!) but due to temporal AA, it would appear as if you worked recursively and also followed the reflection paths.", "", "I can't claim credit for this though, Killzone does this and I got it from a SIGGRAPH talk where they talk about it (:", "", "It really seems like that technique could have some play in trying to do real time path tracing, where each frame you follow a single path of the ray per pixel, and rely on temporal AA to sort of average them over time.", "public_int_i, 2017-01-12@demofox cool demo I really like the reflections of the sky, I can understand how that method wouldn't have scaled well.", "I'm interested to see how your game comes along and I especially love ray-traced games. You never really know somethings practicality until you try it, best of luck on the project.", "xmk, 2017-01-12Very interesting article. Great thanks.", "So could you tell or may be predict the amount of  performance degradation in case of scene composed of 10 spheres or N-spheres. Whether it will be linear or not.", "And suppose the camera is looking through 20 almost transparent spheres , would it enough MAX_RAY_BOUNCES 10 to get realistic picture or we have to increase 10 to at least 20 ?", "demofox, 2017-01-11That's a really good question that I personally don't have a good answer for.  I once was making a little hobby project of a real time raytraced FPS where axis aligned boxes defined rooms, that could have portals on the wall that led to other AA boxes, and each box contained information about it's contents.  It worked ok, but there was no magic there and it wouldn't have scaled well.  You can see a video of it here: https://www.youtube.com/watch?v=7ARjAtkwaS0.", "", "Right now I'm starting a hybrid rasterization / ray tracing / ray marching game project inspired by marble madness that I intend to finish and ship.", "", "My plan here is to do some rasterization of polygons, but then for things which are ray traced or ray marched, i'll draw a scaled / oriented cube that contains them, and do the ray based work in the pixel shader.", "", "The goal is to have those ray rendered objects be representable as minimally as possible so that every object will have access to every other object to allow reflection and refraction against these objects.", "", "I'd also like for them to have access to the rasterized rendering so that they can use that information for screen space glossy reflections, maybe falling back to reflection probes when that information isnt available..", "", "It would also be nice, when doing the rasterization pass, to have access to the ray based objects, so that the rasterized geometry could also get reflections and maybe refractions?", "", "Lastly, I might try to have things just have a limited number of reflection (and refraction?) bounces, and use temporal anti aliasing to try and harvest the information from the last frame as much as possible, so that (like in Killzone) each frame you render gives you another ray bounce.", "", "It seems like it would be interesting when limiting ray bounces to try a monte carlo approach where you randomly choose which ray to take based on say, the fresnel reflection vs refraction multiplier.", "", "I have one more shadertoy I want to make (I want to try for glitter / metal flake style surfaces), but after that am starting in on the project.", "", "Who knows how it will actually turn out and whether these ideas will be practical when the rubber hits the road, or get me the results I want.  I guess we'll see.", "public_int_i, 2017-01-11If you were going to render a whole game with ray-tracing how would you represent it? Triangles, voxels or gigavoxels?", "demofox, 2017-01-10Shane there was an interesting presentation I saw at a SIGGRAPH where the people who made Killzone combined single bounce reflections with temporal anti aliasing.  The result was that every frame rendered gave you another bounce of reflection!", "", "I really believe that real time ray traced games could exist now, if people would commit to doing it (:", "Shane, 2017-01-10Nice demonstration. Really pretty. I read the article too. I like to get other people's take on things.", "", "I know it's possible to emulate recursive raytracing in a pixel shader using a stack, but speed is still an issue, especially when rendering anything interesting. I've experimented by hand coding the first reflective and refractive pass, then entering the multiple bounce loop (choosing the strongest ray) from there. It kind of looks OK, and speed is OK with just three or four extra bounces, but it's messy...", "", "I guess there'll come a day when random pixel access on the CPU will be faster than our best graphics cards, but then soft shadows and volumetrics will slow things down. Sadly, by the time computers are able to do what I'd like them to, I'll be too old to care. Anyway, I guess I should get back to my current minimal, abstract scene with no bounces. Sigh!", "demofox, 2017-01-09I wrote up the details of the techniques used here in a blog post if anyone is interested (:", "Raytracing Reflection, Refraction, Fresnel, Total Internal Reflection, and Beer\u2019s Law", "demofox, 2017-01-08I do internal reflections as much as is defined by the fresnel equation (Schlick's approximation anyways).  If you change the OBJECT_TYPE define to 1 or 2 you can see them in action in a cube and in a gem type shape.  It just happens that a sphere (at least with the refractive indices I used) doesn't have much internal reflection.", "archee, 2017-01-08You should do internal reflections.", "My examples: https://www.shadertoy.com/view/4ljXD3", "https://www.shadertoy.com/view/4s2Gz3", "public_int_i, 2017-01-08I agree it looks realistic!", "pthextract, 2017-01-08Looks pretty good.", "iridule, 2018-09-20Woah amazing", "aiekick, 2018-09-05ah yes, the clamp was not ok. thanks", "davidar, 2018-09-05No, still the same. It seems to work if I change the order of the arguments in line 71 to", "", "float hex = clamp(e,0.,0.2);", "aiekick, 2018-09-05it is ok now ?", "davidar, 2018-09-05I think it might be broken for me - it looks like this, and mouse y doesn't change anything:", "Lio, 2015-04-24It's great!", "dila, 2015-04-24Wow that is a nice trick", "aiekick, 2015-04-24you are great public_int_i ^^ thank you. i will study your tech.", "public_int_i, 2015-04-24Yea nvm just uploaded it as a new shader here https://www.shadertoy.com/view/MtSGzy.", "public_int_i, 2015-04-24//godrays - public_int_i", "float sc = dot(ro, ro) - 48.;", "float sb = dot(rd, ro);", "", "float sd = sb*sb - sc;", "float st = -sb - sqrt(abs(sd));", "", "if (!(sd < 0.0 || st < 0.0)) {", "", "const int godrayIter = 32;", "const float godrayIntensity = .05;", "const float godrayPrecision = .1;", "", "float gr = 0.;", "", "ro += rd*st;", "float rlen = 6.928203-length(ro);", "", "rd *= godrayPrecision;", "for (int i = 0; i < godrayIter; i++) {", "", "if (hex(uvs(ro)*50.,0) > 0. && rlen < 1.)) break;", "}", "", "c.xyz += LCol*godrayIntensity*gr;", "}", "//end of godrays", "public_int_i, 2015-04-24    //godrays - public_int_i", "float sc = dot(ro, ro) - 48.;", "float sb = dot(rd, ro);", "", "float sd = sb*sb - sc;", "float st = -sb - sqrt(abs(sd));", "", "if (!(sd < 0.0 || st < 0.0)) {", "", "const vec2 sunPos = vec2(.5);", "const vec3 sunColor = vec3(1.,.95,.95);", "", "const int godrayIter = 32;", "const float godrayIntensity = .05;", "const float godrayPrecision = .1;", "", "float gr = 0.;", "", "ro += rd*st;", "float rlen = 6.928203-length(ro);", "", "rd *= godrayPrecision;", "for (int i = 0; i < godrayIter; i++) {", "", "if (hex(uvs(ro)*50.,0) > 0. && rlen < 1.)) break;", "}", "", "c.xyz += LCol*godrayIntensity*gr;", "}", "//end of godrays", "public_int_i, 2015-04-24Looks great, here I added some simple godrays to the outside.", "dila, 2015-04-24What a nice object", "aiekick, 2015-04-24thanks, i would like to do like god ray or light scattering, but i have not finded a meaning to do it. glow may be easier i think. i will try this, but the center is not very light", "Harha, 2015-04-24I like it, but it needs something that glows inside it.", "dyvoid, 2022-05-31Sorry for the late reply, but for future reference: Yes, this can definitely be used in commercial projects.", "art3mis, 2020-01-18Could you confirm this can be used in commercial project? Thanks!", "mitjaprelovsek, 2018-06-11Hi,", "", "You mentioned MIT license in the beginning of the file, but I am not sure if it applies. Can I use this shader in a commercial project?", "", "Thanks!", "p.s. awesome work by the way", "Mitja", "JScotty, 2016-10-27Awesome!", "ttoinou, 2016-10-23Nice !", "dyvoid, 2016-10-22Hey all, I've only recently started writing shaders. Any advice on how to improve my code is more than welcome.", "fern, 2023-03-09Hey not sure if you'll see this but I'm trying to wrap my head around this shader for a project I'm working on (I'm newish to shaders). I can't work out what the hash function is doing here. At first I thought it was just random values I can't work it out.", "piyushslayer, 2020-08-18No worries, glad to be of help! The half res uv for sampling perlin-worley noise texture was just an aesthetic choice to make the clouds look bigger for the sake of this demo. You don't have to do that in your shader.", "ejosiah, 2020-08-18why do you use half the uv i.e  textureLod(iChannel0, uv * .5, 0.).x when u get the perlinWorley value?", "ejosiah, 2020-08-18You saved me from running mad, the hash function was the issue, I orrignally replaced your hash with David's original hash function, changed it back to your and it works now, Thanks a lot", "piyushslayer, 2020-08-18I noticed that the worley noise was being generated using a hash function that returns a value in the range [-1, 1] while this implementation of worley uses values in the range [0, 1], so I fixed that. It should generate the noise seamlessly tillable now.  As for the low resolution output, are you sure you're passing the right values to the output resolution uniforms? The noise values are calculated based on the uv coordinates which are in turn calculated based on the output texture's resolution.", "ejosiah, 2020-08-18Thanks for this, I tried to use it in opengl but its not working as expected, my image is coming out as a 4*4 tile, it only works when I remove this ( * .4 + .3 ) but the resolution becomes very low. I'm using dimensions 512 * 512 * 128, I tried both compute shader and framebuffer with instances I get the same output, any ideas what might be wrong?", "piyushslayer, 2019-12-11Fixed a small issue with the remapping of perlin-worley noise.  Cloud shapes are much more billowy now.", "PyThrrrown, 2022-01-08Great shader. However, the fps depend heavily on the device. Cell phone, tablet, high-end desktop PC.", "I have 13.x fps on my tablet.", "GregRostami, 2020-11-14WOW!!!!!!!", "BigWIngs, 2020-01-03Damn thats nice!", "Bers, 2019-08-14This is superb! There is a lot of secret sauce in your map() function, where the twirl and color modulation occurs .", "ttoinou, 2018-10-16The whole code is available on the right. Downloading it is only copy pasting it. Contact VirtualDJ for any issue", "LionHeart, 2018-10-15How do I download this shader? This also doesn't work with virtualdj.", "ttoinou, 2017-08-14Magnificent....", "ollj, 2016-09-15very nice pseudo volumetric raymarching, dithered by a hash.", "ewerybody, 2015-05-05ALTER! Whow!!! \u00e2\u2122\u00a5", "Magnets don't work so well in fullscreen it seems ;]", "vgs, 2015-05-03stunning visual!", "otaviogood, 2015-05-03amazing. Can you explain the general idea of how it works?", "Dave_Hoskins, 2015-05-02It's like a beautiful moving painting. Very cool.", "eiffie, 2015-05-02Why are magnets so ugly then?", "K5Doom, 2015-05-02Wow, amazing as always!", "Lio, 2015-05-02Very nice", "CPU, 2015-05-02beautiful", "anastadunbar, 2015-05-01 Cool.", "blackjero, 2022-01-22Impressive animation work!", "kastorp, 2022-01-16is he Tintin?", "iapafoto, 2022-01-14@bloodnok glTeapot()", "bloodnok, 2022-01-14glTeapot();", "Del, 2022-01-14awesome", "elenzil, 2022-01-13the spiral looks great", "ocb, 2022-01-13Woaw! all the moves are so natural.", "jt, 2022-01-13Amazing!", "aiekick, 2022-01-12how i missed this one. super nice", "BigWIngs, 2022-01-12I love this. Its a great animation!", "zproxy, 2022-01-12nice. needs a girlscout next", "elenzil, 2022-01-12compiling in 4s on windows nVidia for me.", "iapafoto, 2022-01-12@sylvain69780 It was for a joke with Fabrice", "jorge2017a2, 2022-01-12variables that you initialize ... for example ... vec3 (85 + 50,24,0)>>> vec3(135,24,0)", "sylvain69780, 2022-01-12Love also the textureInvader", "Note : iChannel1 is not loaded with Font texture.", "iapafoto, 2022-01-12@jorge2017a2, what sum?", "jorge2017a2, 2022-01-12oohh very nice it's faster.....you can avoid the sum of the matrix.....and have a little more speed!!!", "drschizzo, 2022-01-12@iq compile time seems ok here. less than 0.5 second (m1 max macos 12.1)", "iapafoto, 2022-01-12@iq, it seems ok on NVIDIA also", "iapafoto, 2022-01-12@iq you could try to remove BONE also it is the other change but it replace the Fabrice panel.", "iapafoto, 2022-01-12@iq I precalculate the mat3 bases now, This speed up the compilation time here (Windows, chrome, Intel GPU). Will try on NVIDIA soon", "iq, 2022-01-12The compile time has gone up again, has anything changed since yesterday, iapafoto?", "FabriceNeyret2, 2022-01-11@elenzil: first use would be when I scratch a shader by mistake... ( like, not working in the fork I thought I was doing ).", "elenzil, 2022-01-11I also feel like the there's more of a 'hitch' in the shoulders and arms than a little bit ago.", "Would be amazing if shadertoy had some revision control features.", "Duke, 2022-01-11@iapafoto Yes, haven't seen this shader. Thanks.", "iapafoto, 2022-01-11@Duke : this one from TLC123 is pretty cool already Procedural walk animation", "Duke, 2022-01-11Maybe someday someone will implement something similar to wolfire animation on shadertoy", "iapafoto, 2022-01-11@Shane, @ShnitzelKiller, UTAH university at ... Salt Lake City", "ShnitzelKiller, 2022-01-11I thought it was from Boston...", "Shane, 2022-01-11Awesome. I'm assuming the teapot is a Utah reference.", "iapafoto, 2022-01-11@FabriceNeyret2 new surprises!...", "FabriceNeyret2, 2022-01-11I have the impression that the motion of arms is a bit strange today ( not sure it was like that yesterday ). rotation of shoulder, then double motion of the hand in the back.", "linux here.", "FabriceNeyret2, 2022-01-11gag :", "lol :-)", "at 117\" I wonder if I missed it ! then...", "iapafoto, 2022-01-11@ShnitzelKiller   no, just shadertoy. And started from this picture", "shau, 2022-01-11nice one", "ShnitzelKiller, 2022-01-11was external software used to create the model/animation?", "iq, 2022-01-11lol at \"Hello Fabrice\"", "iY0Yi, 2022-01-11Very very nice", "Duke, 2022-01-11Wow!", "markusm, 2022-01-11Super nice! The one advantage of an M1 Max is that compile times are more or less non-existent. This compiles in something like 0.2 seconds.", "iapafoto, 2022-01-10@iq thank you very much for all the advice. I hope it's good now!", "iapafoto, 2022-01-10@FabriceNeyret2 gag added", "jorge2017a2, 2022-01-10@iapafoto, ... I see that there are many spaces ... or letters space and tabs ... these can be eliminated ... and you save time ... it can even be in seconds ... you can earn from 1 to 2 seconds in fps and compilation !!!!", "jorge2017a2, 2022-01-10@FabriceNeyret2, the problem was solved .... but in any case it is important to know these types of errors .... because in windows vb6 ..... I have converted code .... and a lot of code is not visible !!! !", "jorge2017a2, 2022-01-10hahaha .... wow ... you're a magician ... hahaha ... now if you look very well .... the character who walks is an excellent job ..... now everything looks good ... .I have a doubt which was the problem then !!!!!!!! Thanks for correcting!!!!", "lz, 2022-01-10Cool.", "iq, 2022-01-10Super super cool!", "", "I was able to reduce the compile time from 12 seconds to 9 seconds in my system, by introducing the ZERO trick in the Bezier loop in sdTeapot(). You can also use a 2D sdBezier() there for extra rendering performance, but little compile time difference unfortunately.", "", "Then I could also reduce the compile time further from 9 to 5 seconds by changing the subsurface computation by this, which looks almost the same imho and doesn't invoke the SDF: float sss = ss*0.2*clamp(0.5+0.5*dot(ld,nor),0.0,1.0)*(2.0+dot(rd,nor));", "And finally, the next compile-time eater is the cloth bump mapping. If I remove it (which doesn't change the look much I think?), the compile time then goes down to 3 seconds for me.", "", "At 3 seconds compile time, which is sub 5s, the shader qualifies for Shader of the Week (the reason I explored options), but obviously needs the small changes of visuals", "jeyko, 2022-01-10v cute", "jeyko, 2022-01-10uhm i get 1.2 secs here", "FabriceNeyret2, 2022-01-10NB: jorge2017a2 machine is special. many shaders don't display on his.", "", "I see how removing a inout could break something, not how it could improve ;-)", "FabriceNeyret2, 2022-01-10nice !", "( uh, no gag, even after long time ?   but the teapot, of course :-) ).", "", "3.3s to compil on linux ( old card )", "elenzil, 2022-01-10wow!!", "flockaroo, 2022-01-10cool work, cool walk! i like how everything is swingin :-) ...extra + for the teapot!!", "iapafoto, 2022-01-10@jorge2017a2   I've removed a inout, perhapse it's beter now.", "iapafoto, 2022-01-10@jorge2017a2   wow !!!", "jorge2017a2, 2022-01-10", "https://i.ibb.co/7Q1mcqq/Screenshot-at-2022-01-10-09-41-19.png", "neozhaoliang, 2022-01-10I have been watching you on shadertoy for years, awesome work as always!", "jorge2017a2, 2022-01-10I would like to see the character .... but on my machine you only see the background .... and part of the hat but only a layer or sheet ..... something is wrong !!! .... maybe it is the model of my machine", "matonga, 2023-05-10Can someone post a video on Youtube? this shader dies in either my desktop PC and both of my notebooks. Ironically, it runs at a nifty 6 fps on my android phone \ud83e\udd14", "benoitlahoz, 2023-04-06I live there :-) Merci !", "jtomsu, 2023-03-31This looks beautiful!", "XT95, 2023-03-31Thx everyone !", "@Draedrus : oh yes, this is better!", "Draedrus, 2023-03-31A bit of stuttering but trully beautiful", "", "I added this float blurAmount = max(0., 0.02*uv.x);, only works for your scene because your depth is closer to the camera on the left side and goes far towards the right side. It leverages a bit the stuttering due to the taa blurr", "Raistlin_fuego, 2023-03-29!!! Awesome!!! <3", "lonhell, 2023-03-29Damn. How does it work anyway? I'm newbie and I'm totally stunned.", "jt, 2023-03-29Looks very nice!", "jt, 2023-03-29Ah, it doesn't crash on my windows PC with Nvidia GPU", "wj, 2023-03-29PS: here a fixed version that doesn't fail whenever the resolution changes: https://www.shadertoy.com/view/cd3Szj# (see flawed \"compute only on the first frame!\" logic in \"Buffer A\")", "asneakyfatcat, 2023-03-29such a nice dof effect, clear that highlight flickering up and it would look just like a scene from real life", "jt, 2023-03-28Unfortunately this crashes on my system (OS: Linux, browser: Firefox, GPU: AMD/ATI Picasso/Raven 2 Radeon Vega Series).", "wj, 2023-03-28sky and parts of the water go white when switching to fullscreeen (GTX 1050/win10/Chrome)", "Shane, 2021-12-14So pleasing to the eye. It has a path traced feel to it.", "elenzil, 2021-12-13nice!!", "it performs fine on D3D for me.", "there's some 'crawling' or flickering in the dry rock on the left edge of the frame", "FabriceNeyret2, 2021-12-13\"The first frame should be good enough but sometime it doesn't work.\"", "", "uh, I only see this once in a while and only in the icon.", "Or it can happen typically when you require image textures to load, which is not the case here.", "-> it should work with just frame 0.", "", "besides, it's very low freq.  so instead of computing this 1024x1024x6 times, maybe you could compute it only  every 1/16 x 1/16 ?", "then either bleed this at frame2 or modify skyColor() func ( and then probably simpler it you just use a regular buffer ).", "XT95, 2021-12-13Thx all!", "", "@FabriceNeyret2 : Yes, I preload the sky into the cube pass.", "The first frame should be good enough but sometime it doesn't work. So I precompute the sky during 5 frames for safety.", "FabriceNeyret2, 2021-12-13nice, but ultracostly ( at least on OpenGL ).", "indeed it is strange: the first 14\" are at less than 1 fps ( at 640x360 ) then 10 fps.", "Indeed, the first 5 frames requires 15\", so 0.3 fps !", "Do you do something special during these first frames ?", "bitless, 2021-12-13Wow! Delightful.", "iq, 2021-12-13Looking fantastic!", "mds2, 2019-09-25Okay, just clicking the heart is not enough.  I need to leave a comment about how awesome I think this is.", "jt, 2019-09-15cool", "JoshScholar, 2019-09-15If I remember 2001, The Blue Danube should be playing.", "iapafoto, 2015-03-21Excellent !", "iq, 2015-03-20it looks awesome and runs super fast!", "obidobi, 2015-03-20My favorite NV15 shader!", "otaviogood, 2015-03-20Thanks. I put some effort into keeping the frame rate up.", "Harha, 2015-03-20Looks nice and it runs really fast even on my old HD4890! ~60FPS at 1080p resolution.", "GregRostami, 2015-03-20Really nice modeling!", "leon, 2015-03-20Awesome...!!", "MichaelR, 2020-06-01Meant to say glow", "MichaelR, 2020-06-01What causes the flow?", "dila, 2015-09-27lovely shader", "fizzer, 2013-07-20Hmm, an octopus... I will have to think about that. Could be better making a completely new shader for that, to really do justice.  <-- Should I give it a balloon too? =)", "iq, 2013-07-06By the way, you need to add an octopus", "iq, 2013-07-06I guess your monitor is super bright, or has a very low gamma. Maybe you can play with the display color curves in the control panel of your OS perhaps till you get something that looks more like the average computer screen? I don't know", "fizzer, 2013-07-05Well then this is a problem. What would you recommend I do? Make better use of tonemapping, or simply test with more monitors and configurations?", "iq, 2013-07-05Oh, there are particles!! I have three monitors (one of them professionally calibrated), and I hadn't seen any particles until now (they are still really dull, I didn't see them until you mentioned them in fact)", "fizzer, 2013-07-04Haha iq, your jellyfish would be much better than these things I have made here no doubt! Since I know this shader has some issues, here's a screenshot:", "", "", "", "I also have now made the particles brighter since they seem to disappear on some displays.", "iq, 2013-07-03(alright, now i have to destroy my glowing \"Jellyfish\" draft shader...  )", "", "This is super cool man", "kevs3d, 2020-04-05oohh lovely", "cmarangu, 2019-12-17i see it has everything to do with the map function on line 186. clever of u to use a texture red channel as a bump map and it creates repeating roughness so that it looks like car lights", "reflecting the light on the rainy day cement", "cmarangu, 2019-12-17how are you doing the thing where you make the texture glossy in some place", "cmarangu, 2019-12-17i did not realize the textures had builtin bump maps!", "privateRaven, 2017-05-18Looks great! I wonder why would you use that license though\u2026", "eiffie, 2013-10-15Thanks for posting this and the links. I learned something!", "PauloFalcao, 2013-10-13Awesome! Look very nice, and it's fast!", "FabriceNeyret2, 2021-02-16NB: I wouldn't program it the same way today: I would probably store a state for which is the active vertex. Now being able to glue vertices can be a convenient accidental feature to ;-)", "Mapilu, 2019-07-22Nice one! Oddly satisfying animation", "synja, 2019-07-21making hexagon tessellations is a lot of fun", "zoomerang, 2019-07-12I can watch it for hours", "firegump, 2019-07-10so nice!", "Dave_Hoskins, 2019-07-09Nice one, and strangely relaxing joining all the dots together...", "bob87, 2019-07-08Classe Fabrice!", "iridule, 2019-07-07So cool!", "MrsBeanbag, 2019-07-07hmm, this is just a blank screen for me ??", "FabriceNeyret2, 2019-07-02well, it's more like a side effect of a poor (i.e. absent)  management of which node is currently grabbed ;-)  .", "I wouldn't code it that way nowadays.", "theGiallo, 2019-07-02I love how you can collect all vertices by simply dragging around slowly, forming a big sun. https://imgur.com/JntTpcJ", "FabriceNeyret2, 2017-04-30either", "- drag each vertex", "- increase the loop size in Image", "- use normalize coordinates instead of pixel coordinates in BufA", "fractaledvisions, 2017-04-29So cool! How to make it fill the full resolution of the screen?", "aiekick, 2016-01-09", "iq, 2016-01-08Super nice!", "poljere, 2016-01-08Wow, I am really enjoying this one @FabriceNeyret2", "EntityBlack, 2017-03-18Instant love!", "tamasaur, 2017-03-16Dope!", "marquizzo, 2017-03-16This is fantastic! From now on, this is how I'm listening to SoundCloud tracks.", "vgs, 2017-03-15superb!", "iapafoto, 2017-03-15cool !!!", "Zavie, 2017-03-15haha, really cool idea.", "Dave_Hoskins, 2016-02-29Installation!!", "It looks like a real screen + very cool lens flare.", "poljere, 2016-02-28Wow, this is awesome.", "GregRostami, 2016-02-28SUPER Cool images and music!", "iq, 2016-02-28Super nice!", "eiffie, 2016-02-28I wish there was a bit more room on the reflective floor so I could get up and dance.", "ollj, 2016-04-293 fps on 2007 hardware", "jt, 2015-12-16fps < 1 on my laptop but it looks fantastic! Wow!", "kow, 2015-09-07I see a sphere on my dell n5110", "http://i.imgur.com/Neogomg.png", "Shane, 2015-09-07I like so many things about this, especially the rocks in the background and the subtle luminescence of the mushroom. Cheap subsurface scattering is something I never seem to get right, so I appreciate seeing how others deal with it. A nighttime setting - focusing on the mushroom - would be really cool.", "vgs, 2015-09-05Really good! Loved the color palette!", "There are no black artifacts in Chrome/Linux and Chrome/Windows on GTX 560.", "coyote, 2015-09-05I added texutre bias \"-10.\" in lines 102 and 103 to remove black artefacts (not all of them though) that appear on some macs.", "coyote, 2015-09-05", "EvilRyu, 2015-09-05awesome!", "FabriceNeyret2, 2015-09-05iq base food. Now we know where inspiration come from. :-D", "otaviogood, 2015-09-05Very nice color and lighting. Must be the sub-surface look - something about the mushroom looks great.", "I also have black artifacts on my MacbookAir/intel GPU/Chrome. I tried debugging it. It seems like it's in the material, cause if I set mateD to a constant, the black specks go away. Crashed my chrome tab trying to debug it though, so I'll give up for now.", "cabbibo, 2015-09-04WOW! WOW! WOW!", "DelvarWorld, 2015-09-04this has black artifacts in the landscape on my mbp", "Dave_Hoskins, 2015-09-04Yeah, it's almost a velvet cushion. The landscape with pumice rocks looks great too!", "rcread, 2015-09-04I love the desert and this has captured the feeling of it, despite the mushroom.  Maybe my new favorite shader.", "dila, 2015-09-04awesome shading!", "etale_cohomology, 2017-07-15This shader gives me butterflies in my stomach", "MacSlow, 2015-11-03Alien grapes?!", "Dave_Hoskins, 2013-06-22Thanks for the info, I always thought that getting it near enough before post FX was the way to do it, but not in practice, as I find myself juggling things around a lot.", "mu6k, 2013-06-21I copy paste my post processing code as soon as I can and from there on I choose color values and make the shading for objects so that it works well with the whole scene. If I need global color, values or saturation changes I just modify the parameters in the post processing.", "Dave_Hoskins, 2013-06-20Very nice. There's a heavy amount of post FX in here. Can you tell me at what point you decide to lock in post processing. For example do you keep some kind of gamma correction then build the shader around that, or do you try to do all post at the end of writing the majority of the code?", "iq, 2013-06-17and it runs very fast, even at full HD", "4rknova, 2013-06-17Awesome!", "iq, 2013-06-16it looks fantastic!", "cce, 2013-06-15pretty damn cool", "CPU, 2013-06-15Excellent... and beautiful!", "leek9d, 2021-06-25incredible", "FabriceNeyret2, 2017-11-30nice, but you could factor identical code patterns ! (through functions of tmp variable).", "TambakoJaguar, 2015-12-21Very nice!", "jt, 2015-12-17Looks great!", "anastadunbar, 2015-09-15Sounds just like the bell from FL-Studio Sytrus. I really like how you made the bubbles with shiny reflections with depth of field. Makes me also think about Windows 7 bubble screensaver. Good use for the pseudo-random numbers.", "foxes, 2015-09-12Oh, this is my first experiment with sound on Shadertoy. But I wanted to get a very different result in quality and sound. method for synthesis tools it is fairly well-known additive and frequency modulation.", "", "some numbers I picked up on a rumor, but the frequency of the tone I took from the directory", "https://en.wikipedia.org/wiki/Piano_key_frequencies", "cubby208, 2015-09-12Is their a guide somewhere on how you made this sound?  I would love to know what all of those variables represent in the instrument functions.", "AndrewNZ, 2015-09-10Great movement and DoF/Blurriness!  (I didn't look which it is.)", "", "Also thumbs up for not using environment textures - I like pure shaders.", "dila, 2015-09-08bubalicious", "foxes, 2015-08-24thanks all", "aiekick, 2015-08-23beautifull", "P_Malin, 2015-08-23Yes, lovely.", "iq, 2015-08-23Pretty!", "jt, 2022-01-17Oh wow...looks fantastic & runs fast!", "ollj, 2016-04-29i can see this one work better with more distance -> a wet poorly maintained country road in the rain.", "dila, 2015-10-04more foam!", "Andre, 2014-08-24This Rocks ;)", "Vlad86, 2013-12-31Absolutely gorgeous!", "danbri, 2013-07-19Very nice, Dave! And I love the way that the whirring of my laptop fan sounds like water hitting pebbles", "CPU, 2013-07-03Well it's amazing Dave, thanks for sharing!", "Dave_Hoskins, 2013-07-03Hmm, I had to change to subdivision loop to 6 otherwise it completely failed in Firefox! *shrugs*", "Dave_Hoskins, 2013-07-03 I was going for warm and peaceful so post-apocalypse will do. I suspect the general yellow tint probably helps as well!", "CPU, 2013-07-03Haha yeah, gives it a post-apocalyptic feel! ;)", "Dave_Hoskins, 2013-07-02Thanks. Weather? Ha! It did start out as being cloudy, dark and moody, but I just couldn't resist putting a sun in there.", "CPU, 2013-07-02WOW! this is awesome! Just thinking of the insane amount of geometry it would take to render this scene as polygons!", "Never seen the sky look like that in Brighton though Dave!", "iq, 2013-07-01Very nice, and smooth! It's like you want to caress the stones with your hand.", "Dave_Hoskins, 2013-06-30I've gone back to the original Noise function, as the new one produced a different result on Mac. There's not much speed different anyway.", "Dave_Hoskins, 2013-06-29OK... I put the sea in!", "Dave_Hoskins, 2013-06-29Thanks, it was originally going to be grassy rolling hills, but it got pushed towards pebbles, mainly because of aliasing problems I had. Plus, Shadertoy's textures really helped me decide.", "zproxy, 2021-11-10we need more rainbow shaders!", "P_Malin, 2016-09-10Now working with VR mode", "ollj, 2016-04-2923fps on 2007 hardware, enough air for some volumetric clouds or motion blur.", "P_Malin, 2014-09-16essik \u00e8\u00b0\u00a2\u00e8\u00b0\u00a2\u00e4\u00bd\u00a0\u00e7\u0161\u201e\u00e8\u00b5\u017e\u00e7\u00be\u017d\u00e4\u00b9\u2039\u00e8\u00af\u008d\u00e3\u20ac\u201a\u00e6\u02c6\u2018\u00e5\u00be\u02c6\u00e9\u00ab\u02dc\u00e5\u2026\u00b4\u00e4\u00bd\u00a0\u00e5\u2013\u0153\u00e6\u00ac\u00a2\u00e5\u00ae\u0192\u00e3\u20ac\u201a", "essik, 2014-08-20\u00e5\u00a4\u00aa\u00e6\u00a3\u2019\u00e4\u00ba\u2020\u00ef\u00bc\u0152\u00e4\u00b8\u008d\u00e8\u0192\u00bd\u00e7\u201d\u00a8\u00e8\u2039\u00b1\u00e8\u00af\u00ad\u00e5\u00bd\u00a2\u00e5\u00ae\u00b9\u00ef\u00bc\u0152\u00e7\u00bb\u2122\u00e4\u00bd\u00a0\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e8\u00b5\u017e\u00ef\u00bc\u0152\u00e5\u00b0\u00a4\u00e5\u2026\u00b6\u00e6\u02dc\u00af\u00e5\u00bd\u00a9\u00e8\u2122\u00b9\u00ef\u00bc\u0152\u00e9\u2022\u0153\u00e5\u00a4\u00b4\u00e6\u2039\u2030\u00e8\u00bf\u2018\u00e6\u2014\u00b6\u00e7\u0161\u201e\u00e6\u00b0\u00b4\u00e6\u00bb\u00b4\u00ef\u00bc\u0081\u00ef\u00bc\u0081", "fizzer, 2014-07-02I love this! Awesome work!", "Very true words about practice and learning, too.", "reinder, 2014-06-23wow, very nice!", "P_Malin, 2014-06-23Thanks Coldberg but don't be demotivated! Seeing other peoples cool stuff should inspire you. I'm envious of a lot of the shadertoyer's talents but none of them were born super shader programmers. The more you practice the better you get and there will always be more to learn.", "Coldberg, 2014-06-22It's impressive and yet demotivating , cause it sets the bar so high :P", "Good job!", "morgan3d, 2014-06-22The rainbow really takes the cake.", "P_Malin, 2014-06-09Ok, I fixed a bunch of things and made the background more interesting.", "P_Malin, 2014-06-06Dave, of course feel free to play. You are right, the texturing could do with some love but I don't think I'll use your change directly as I'm going for something like mossy rocks rather than super happy land ;)", "P_Malin, 2014-06-06Hehe, thank you Cyanux, you are most welcome. It wasn't work though, but fun", "Also, it's not all my work. The noise functions were shamelessly copied from iq (and then made more untidy) and I've had countless inspiration from other shadertoy shaders and graphics folk.", "cyanux, 2014-06-05Thank you for all this work, it's amazing.", "iapafoto, 2014-06-05Yes it is fixed here.", ".. he he, Water droplets on the lens =  !!!", "P_Malin, 2014-06-05Thanks iapafoto, I removed the terrain from the reflection by default and I *think* it is fixed now.", "poljere, 2014-06-05Beautiful!", "vgs, 2014-06-05The water droplets on the lens was a really nice touch. Good job!", "Dave_Hoskins, 2014-06-05If I may, I couldn't help mucking around with this. Try:-", "vec3 GetTerrainTexture( const in vec3 vPos )", "{", "vec3 vSample0 = texture2D(iChannel1, vPos.xz * 0.4).rgb;", "if (vPos.y > - 2.5) vSample0 *= vec3(0.3, .9, .2);", "vec2 vUV1 = vec2(atan(vPos.x, vPos.z) * 10.0, vPos.y - vPos.z * 0.25) * 0.1;", "vec3 vSample1 = texture2D(iChannel0, vUV1).rgb;", "vSample1 = vSample1 * vSample1;", "vec3 vResult = mix(vSample0, vSample1, clamp(vPos.y + 1.75, 0.0, 1.0));", "return vResult;", "}", "Dave_Hoskins, 2014-06-05High_Quality works in Windows 7 Chrome Canary.", "The double rainbow really adds to the atmosphere, wonderful.", "P_Malin, 2014-06-05Thanks for the \"Unkown error\" feedback. I found a computer which this was failing on and stripped back the effect until it works", "#define HIGH_QUALITY if you can.", "Ramocles, 2014-06-05nice!!! rainbows are awesome!! GJ!!", "iq, 2014-06-05Not working for me neither in Windows 7", "mmalex, 2014-06-05omg! so many details! love the water droplets. so good.", "iapafoto, 2014-06-05Ok when commenting line 699:", "//vResult.xyz = mix(vResult.xyz, vReflectResult.xyz, fFresnel);", "seems to be a pb with vReflectResult.xyz because replacing the line with:", "vResult.xyz = vReflectResult.xyz", "does not compile !", "iapafoto, 2014-06-05Arg ! ...Unknow error on Chrome and Firefox for Windows7  :'(", "Zavie, 2014-06-05Brilliant. Nice attention to detail.", "XT95, 2014-06-05and when the camera is closer of the waterfall..", "XT95, 2014-06-05So awesome <3 !!", "otaviogood, 2014-06-05the rainbows are pretty cool.", "iq, 2014-06-05Wooooaahhhh! <3 <3 <3 FTW", "dtsmio, 2021-07-31Awesome!", "", "*Typo Vintage = 2", "//Coloring scheme", "// 1 = Default | 3 = Vintage | 3 = Argon", "harry7557558, 2021-07-25I believe you can directly apply numerical optimization methods like golden section search on function fd to find the minimum. These methods are expected to achieve the same accuracy with fewer samples compared to bisection search using numerical derivative.", "", "float bisect(in vec2 p, in float near, in float far)", "{", "const float g1 = 0.618034, g0 = 1.0 - g1;", "float x0 = near, x1 = far;  // boundary points", "float t0 = g1 * x0 + g0 * x1;  // middle point 1", "float t1 = g0 * x0 + g1 * x1;  // middle point 2", "float y0 = fd(p, t0), y1 = fd(p, t1);  // middle samples", "for (int i = 0; i <= 7; i++)", "{", "if (y0 < y1) {", "x1 = t1, y1 = y0;", "t1 = t0, t0 = g1*x0+g0*x1;", "y0 = fd(p, t0);", "}", "else {", "x0 = t0, y0 = y1;", "t0 = t1, t1 = g0*x0+g1*x1;", "y1 = fd(p, t1);", "}", "if (abs(y1-y0) < 0.001) break;", "}", "return length(p+ f(y0 < y1 ? t0 : t1));", "}", "", "", "Although I haven't tried them yet, I think fast converging methods like parabolic fit can also work here.", "nimitz, 2014-09-07I must admit I really like Matthew DiVito's work, so it might be influencing me unconsciously", "mplanck, 2014-09-07This is a really awesome visual nimitz.  Reminds me of something mrdiv may do: http://mrdiv.tumblr.com/", "404Glaciergargamel, 2020-12-12Remix: https://www.shadertoy.com/view/WdVfRd", "jorge2017a1, 2020-03-29very nice and great minecraf block .... thanks for sharing", "....", "muy bonito y genial minecraf block....gracias por compartir", "ollj, 2016-04-17here we use a raymarcher, ideal for fractals and curves, and we abuse it to render cubes.", "VoidChicken, 2016-02-27When looking through the leaves, certain things appear green though they aren't.", "fb39ca4, 2013-09-14Interestingly enough, this shader works with Firefox/ANGLE but fails with native OpenGL. Win7/GTX 460/311 drivers.", "martin_shirokov, 2013-07-20A lot of \"Unknown errors\" a the beginning.", "Linux 3.9.9, NVidia GTX 670 (driver: nvidia-304xx), Chromium 28.", "FabriceNeyret2, 2013-07-14not compiling for me :-(", "(a dozen of \"unknow error\" at the beginning)", "PauloFalcao, 2013-03-28I love it!", "The original JS version is very cool", "I wish there was a good GLSL->JS converter...", "This way every shader could run on every computer.", "movAX13h, 2013-03-28lol", "metcorne, 2013-03-28Awesome!", "piersakk, 2018-12-07Fabulous, how can I download it?", "netgrind, 2018-05-15ty for the hot tip @FabriceNeyret2 !", "GregRostami, 2018-05-12SO COOL!!!!", "FabriceNeyret2, 2018-05-11nice, but you should adapt the density of stripes to the resolution or icon is just plain aliasing :-)", "", "delete  fragCoord.x*= iResolution.x/iResolution.y;", "and just do vec2 uv = fragCoord/iResolution.y;  , please ;-)", "WouterVanNifterick, 2016-12-01Wow, this shader is fast!", "60 fps on my old iPhone 5s", "jt, 2016-11-28cool", "dila, 2016-11-23really nice", "tsone, 2015-12-16Wow, this is great!", "vgs, 2015-05-09Awesome!", "Flyguy, 2015-05-07Thanks iq I've added that to the code and it looks a lot nicer though I had to keep the original code since the anti-alias stuff crashes webgl on my nexus 7 for some reason.", "iq, 2015-05-07You can remove the aliasing if you replace return vec4(col, float((u >= 0.0 && u <= 1.0) && (x0 < x1)) );byreturn vec4(col, (1.0-smoothstep(0.5-0.05/w,0.5+0.05/w,abs(u-0.5))) * step(x0,x1) );and alsocol *= sign(sin(u*pi*4.0) * cos(uv.y*16.0)) * (1.0/16.0) + 0.7;bycol *= (-1.0+2.0*smoothstep(-0.05,0.05,sin(u*pi*4.0) * cos(uv.y*16.0))) * (1.0/16.0) + 0.7;", "iq, 2015-05-07It's so pretty and mesmerizing. And so clean/fast (well, it's the classic Amiga 2d effect). I love it.", "FabriceNeyret2, 2020-04-17no problemo. Though, I just regenerated the pdf to insert name and date below title.", "", "With the same provision than you did: this was just my understanding of the micro-physics :-)", "Zavie, 2020-04-17Thank you for your input Fabrice! I was hoping you would weight in.", "Do you mind if I mention that link on my blog?", "FabriceNeyret2, 2020-04-17cool presentation !", "About the microphysics of light in material (and more),  I did these 2 presentations:", "basis: https://drive.google.com/file/d/185dj3saKJCHu6hAe7rtQEBgCQCNsYkyA/view?usp=sharing", "application to fire, nebulas, etc: https://drive.google.com/file/d/185dj3saKJCHu6hAe7rtQEBgCQCNsYkyA/view?usp=sharing", "In short: the notion of photons (and their speed) in matter is a macroscopic deceiving representation, since it's about interference between incident and reactive fields (reemitted by the dipoles, at least for  dielectrics).", "FabriceNeyret2, 2019-03-12analyzed version there: https://www.shadertoy.com/view/3slXDf", "otaviogood, 2016-11-23Really convincing fingerprints for such small code.", "flockaroo, 2016-11-19nice nice!", "aiekick, 2016-11-18", "FabriceNeyret2, 2016-11-18simpler version:", "#define hash(p) ( -1. + 2.*fract( sin(p*mat2(63.31,127.63,395.467,213.799)) *43141.59265) )", "", "void mainImage( out vec4 O,  vec2 U )", "{", "U =  100. * ( U - .5*(O.xy=iResolution.xy) ) / O.x;", "float bounds = smoothstep(10.,9.,length(U*vec2(.7,.5))),", "a = 0., s;", "", "vec2 h = vec2(ceil(7.*iGlobalTime), 0.);", "for(int i=0; i<50; i++)", "s = sign(h.x),", "h = hash(h) * vec2(15.,20.),", "a += s* atan(U.x-h.x, U.y-h.y);", "", "", "U += 20.*abs(hash(h));", "a += atan(U.y, U.x);", "", "float p = bounds * .8,", "m = 1.-cos( 3.14*(length(U) + 0.319*a ));", "", "O += smoothstep(p-1e-5,p+p, m) -O;", "}", "Duke, 2016-11-18", "FabriceNeyret2, 2016-11-18#define hash(p) ( -1. + 2.*fract( sin(p*mat2(63.31,127.63,395.467,213.799)) *43141.59265) )", "FabriceNeyret2, 2016-11-18nice and short !", "maybe some blurryness on the side would improve.", "iapafoto, 2016-11-18super good !!! love this", "andremichelle, 2021-02-01Very nice! We are using your shader for a featured track on audiotool.com", "https://www.youtube.com/watch?v=ncLY_lg1ER4 If you like different credits, please get in contact with me. Thanks!", "laserdog, 2018-02-21oh the wonders of voronoi...", "Nimajamin, 2017-11-02Awesome aesthetic", "ollj, 2017-09-20hex voronoi comes with precision loss and extra differentials, for 3 less comparisons, if (points in the cell are constrained to not move too close into the hex corners).", "that constrain is however very common, it a fundamental constrain/element of (hex) simplex noise.", "", "Without that constrain (which is a simple son()cos()), you suffer from this common hex-voronoi oversight, likely missing one distance::", "Klems, 2017-05-15If you were to use 7 objects, wouldn't it be best to use a hexagonal grid instead? If I understand you correctly, you want to use the distance to 2 objects rather than 1 (with sign), then move those around to get 3*3 objects? I made this shader a while ago, I could probably do better today (starting by filtering the waves).", "ollj, 2017-05-10voronoi waves as unions of 9 spheres above plane on a 2d grid...", "should be fun with hg_sdf merging functions to merge the spheres of 9 cells.", "first merging 4 pairs of 2 spheres on opposite tiles. then merging an x-shape of 4 merged spheres with an +-shaped merger of 4 other spheres.", "then merge these into 8 in one. ant at last merge 8 with the central sphere.", "then (optionally?) merge one last time with a shape that cuts off everything outside of the central tile (to avoid rounding z-buffer flicker effects) ?", "that are 7 mergers in total, more symmetrical than your classic voronoy of one loop in another loop to get shortest distance of points within a 3x3 grid.", "Hamneggs, 2015-11-22This is just cool. Very artistic.", "tly, 2015-09-27nice", "Pebaz, 2022-10-22Fantastical! Thank you so much \ud83d\ude00", "01000001, 2021-06-19Incredibly useful, thank you.", "jorge2017a1, 2021-02-12Nice and simple example ... good literal ....", "Bonito ejemplo y sencillo ... buena literal ....", "darkfox, 2020-06-08thanks!", "starea, 2018-04-25@iq, thanks for fixing the description. Yes, KEY_LEFT is 37 in Javascript; I was refering to WSAD in my own renderer. Sorry for the confusion.", "huttarl, 2018-04-11To clarify the display and the terminology:", "- Inner solid disk: visible when key is currently down (\"state\"); lookup at (keycode, 0)", "- Thin outer circle: visible when key has been newly pressed in the last frame (\"keypress\"); lookup at (keycode, 1). This also fires repeatedly when keyboard autorepeats.", "- Thick border of disk: visible when key has been pressed an odd number of times (\"toggle\"); lookup at (keycode, 2). This also counts autorepeats.", "iq, 2018-02-14Fixed. On they Key_Left, why would it be 100? It's 37.", "starea, 2017-12-11Hi @iq, as Bers said, there is a minor typo at line 72, position should be vec2(-0.75,0.0).", "In addition, I think", "// 0 is current state (keydown event)", "// 1 is keypress event", "// 2 is toggle", "So the description is out of date.", "And, why KEY_LEFT is 37 instead of 100?", "Bers, 2017-11-20Thanks for the reference! The KEY_LEFT keypress circle appears outside the canvas BTW, looks like a minor typo at line 72, position should be vec2(-0.75,0.0).", "jt, 2017-07-12very helpful", "Imsure1200q_1UWE130, 2016-10-28Plz Add Other Keys Like:", "The Numpad Keys Or The Letters Or Something Like That Plz????? I BEG U", "akohdr, 2016-04-06Ooops forgot iResolution, looks like numpad '0' is @ 96 48 for regular '0'", "", "float x = 256.*fragCoord.x/iResolution.x;", "if(x < 96.)fragColor+=vec4(.0,.5,.0,1.);", "if(x < 48.)fragColor+=vec4(.5,.0,.0,1.);", "#define MARK(n) if(fragCoord.y<n*10. && mod(x,n)<1.)fragColor+=vec4(3./n);", "MARK(4.)MARK(8.)MARK(16.)}", "akohdr, 2016-04-06Is there a full list of key scan codes somewhere?  I've seen partial lists, gather it's more or less ASCII, a scale and couple masks helps narrow things down.", "", "if(fragCoord.x < 168.5)fragColor+=vec4(.0,.5,.0,1.);", "if(fragCoord.x < 148.5)fragColor+=vec4(.5,.0,.0,1.);", "#define MARK(n) if(fragCoord.y<n*10. && mod(fragCoord.x,n)<1.)fragColor+=vec4(3./n);", "MARK(4.)MARK(8.)MARK(16.)", "Andre, 2013-08-05Very nice, now i could add the keyboard support to my clock. Somebody asked about it ;)", "movAX13h, 2013-08-05oh yeah! thanks!", "FabriceNeyret2, 2021-12-04well, the golfed version was rather there : https://www.shadertoy.com/view/Xt3fDB", "or worse, there: https://www.shadertoy.com/view/Xl3fDB", ":-)", "", "too bag GLSL is just a subset of C.", "for instance in C  1[T] is legit ;-)", "AndreiZelenco, 2021-12-04Oh, thank you! Now I understand. By the way, looking at golfed code and trying to understand it is a really good challenge and I learn a lot from it. Thank you and have a beautiful day!", "FabriceNeyret2, 2021-12-04 i<=7 : it's purely a matter of how deep you want to go.", "for(i=0;i<n   is a classical C pattern to have n steps, access n slot in arrays, etc", "( + in code golfing it saves 1 char ;-) )", "", "fU: don't remember. possibly just recycling a variable name.", "AndreiZelenco, 2021-12-03Beautiful work  as always! I tried to understand this shader of yours.", "A few minor things that made more sense to me, but you probably must have good reasons for the way you do things.", "on line 11:    i<=7; instead of i<7;", "on lines 16, 17, and 18 I renamed fU with something else. It confused me and I thought it was the same as fU on line 12.  Thank you and all the best!", "mrtownsend, 2019-01-22I enjoy all of your work, but this piece is particularly impressive!", "yonatan, 2018-11-10Yes, it does. I'll try to find a better driver. Thanks!", "FabriceNeyret2, 2018-11-10@yonatan: and o = vec4(0) fix it ?", "If yes, this driver might be very buggy, then.", "yonatan, 2018-11-09I think the o -= o doesn't always do what it's supposed to. https://imgur.com/a/OwZiJdY (linux w/radeon driver)", "FabriceNeyret2, 2018-10-29...and it was not even code golfed :-) ( https://shadertoy.com/view/lljSDy is 250 chars ).", "", "I like going at the very hearth of algorithms, accounting for the pixel-parallelism of procedural shaders which can make them very different to there C counterpart ( cf my \"loopless\" tutos https://www.shadertoy.com/results?query=loopless+dots ).", "And to me, the global+detail undertanding is best when all can stand in view as a single page (without the code golfing stage that would obsfuscate ).", "scratch13764, 2018-10-28It's so impressive how few characters you manage to do everything with (I'm the guy who made that program with the RGB overlapping circles and you reduced the characters to less than 1/3)", "FabriceNeyret2, 2018-03-27how cool, isn't it ? :-D", "Could be a lot worse by searching \"golf\" :-p https://www.shadertoy.com/results?query=golf&sort=newest&filter=", "", "More seriously, here I was not really golfing.", "Tilemapping, 2018-03-26I have just witnessed shader code-golf", "abje, 2017-09-04@Imsure1200q_1UWE130: are you ralking about the fibonacci curve", "FabriceNeyret2, 2017-08-08I don't understand what you mean in these 2 last posts.", "Imsure1200q_1UWE130, 2017-08-08just something fun a-b=c a-c=b", "Imsure1200q_1UWE130, 2017-08-08@FabriceNeyret2 no  the preview looked like a golden ratio related thing", "FabriceNeyret2, 2017-08-04@ssell: oops. I could have ;-)", "@Imsure1200q_1UWE130 : where ?", "Imsure1200q_1UWE130, 2017-08-04was expecting golden ratio..", "ssell, 2017-07-13Use of the new iTime instead of iDate.w will also bring it down another 2.", "ssell, 2017-07-13Here is a 280 char version of your 282 char version. Just the right size for [SH17A] ;)", "", "void mainImage( out vec4 o, vec2 U )", "{", "float r=.1, t=iDate.w, H = iResolution.y;", "U *=  .5/H;", "vec2 P = .25+.25*vec2(cos(t),sin(t*.7)), f;", "", "o -= o; o.b = .25;", "", "for (int i=0; i<7; i++) {", "f = min(U,1.-U); min(f.x,f.y) < 3.*r/H ?  o-- : o;", "length(P-.5) - r < .7 ?", "f = step(.5,U),", "U += U - f,", "P += P - f,  r += r,", "o += .13 : o;", "}", "", "o.gb *= step(r,length(P-U));", "}", "ollj, 2017-04-24if i put all distance fields in their simple cubic bounding box and check for bounding boxes first, (not even the roundedCube one)  this gets me a VERY fast distance bound to many small objects. when I memorize distances to all bounding boxes in an array and and skip all the objects that i already know to be MUCH further than the closest one (already losing the race for  \"closest object\" since 2 past iterations of octree) away than the closest one.", "", "knowing that a 3d taxycapDistance is > 3d euclideanDistance.", "FabriceNeyret2, 2017-04-24@olij: are you sure you are commenting the right shader ? I don't see any relation between your comments and my source.", "ollj, 2017-04-24you count characters and do *.25 instead of /.4", "or scale by 5 instead of 4, because 5 has nicer fractions in decimal", "vec2 p=.2+.2*vec2(cos(t),sin(t)), f;", "VoidChicken, 2016-07-01Nice. Now, make an octree.  (Well... that's your choice)", "FabriceNeyret2, 2015-11-11The shadertoy team just suppressed it. :-( :-( :-(", "I really hope they will now fix the hundreds of broken shaders, as for the previous API change.", "Nrx, 2015-11-11The \"inout vec4\" trick, to avoid initializing \"o\" to 0, doesn't work anymore? (It was fine until yesterday... but I get an error now :S)", "FabriceNeyret2, 2015-11-09New: the tri-tree version https://www.shadertoy.com/view/Mt2XDc", "jt, 2015-11-07Yay, quad-trees :-D", "FabriceNeyret2, 2015-11-02Who want to try BSP ? :-p", "FabriceNeyret2, 2015-11-02thanks guys :-p .", "", "It's not me, it's the natural beauty of data structures :-D", "Nrx, 2015-11-02Very nice! Well done!", "Shane, 2015-11-02You have a knack for coming up with interesting examples. It's nicely designed too.", "", "For a second, I considered the possibility of an octree example, but then thought of all those transparent planes (or line meshes) mixed with opaque objects... It makes my head hurt thinking about it. Of course, it wouldn't surprise me if someone's already done it anyway.", "FabriceNeyret2, 2015-11-01 inout does provide (0,0,0,1). Or it should, according to iq. For once, it works on linux + windows + macOS ! So something strange and specific happens on iOS, and I guess it's important to understand what (for the sake of all the other shaders).", "reinder, 2015-11-01I already set o.a=1 in the iOS app at the end. I think the problem is you never initialise the red and blue channel of o so they will get a random value (you are only adding .13 or subtracting one). Can change line 8 in: o.rgb = vec3(0.,0.,.25) (or something like that)?", "Dave_Hoskins, 2015-11-01Super!", "FabriceNeyret2, 2015-11-01or is something special about transparency on iOS ?", "-> may you try o.a=1 at the very end ?", "FabriceNeyret2, 2015-11-01wow, you mean that inout fragColor is no longer working ?", "reinder, 2015-11-01Nice. But can you initialise o? There are artefacts in the iOS app because the rga values are not initialised.", "FabriceNeyret2, 2015-11-01indeed you just need to be able to estimate whether the object bounding box or sphere is out of the voxel bounding box or sphere.  ( NB: I like bounding sphere for its simplicity, but in 3D for octree it makes you overestimate intersections by alot).", "", "Used for voxels renderers: a bit like in http://gigavoxels.imag.fr/, you mean ? ;-)", "", "( Shortness: could be more, but some people complain about readability... )", "iq, 2015-10-31Very nice, and cute too", "Raistlin_fuego, 2023-06-04Hahahahaha !!!", "ShnitzelKiller, 2022-01-05you think that's a distance field you're marching?", "tholzer, 2021-01-11Great scenery!", "Ideal would be an additional sound like a Tesla coil. Like the 2nd part of \"Tesla Theme\".", "Or maybe someone knows how to create this sound synthetically by coding.", "In any case, great job!", "jeyko, 2021-01-11nice", "jorge2017a1, 2021-01-11Well as you say ... it sounds very ugly, that we are batteries and we feed the planet .....  ,,,,, well the rays look good !!!", "...........", "bueno asi como lo dices ... se escucha muy feo, que somos baterias y alimentamos el planeta .....  ,,,,, bueno los rayos se miran bien !!!", "GregRostami, 2017-03-26BIG WOW!!!", "JasonD, 2016-05-21Very awesome, love it!", "Goksel, 2013-07-24Oh wow, amazing. Love the idea and the execution. Very very nice.", "Dave_Hoskins, 2013-03-20WTF!", "PauloFalcao, 2013-03-20Very cool", "iq, 2013-03-20Man. This . is . very . sick. And awesome. Analytic DoF, if only for flat shaded quads) is a pretty crazy idea in itself. I also love the implementation. Crazy", "benoitM, 2023-06-05Brilliant !", "jeyko, 2023-04-10so friggin sick", "BigWIngs, 2023-04-04Just wow...", "xrx, 2023-04-02sick", "Dave_Hoskins, 2023-03-28Oh, you've put back the /1e3 and full screen flicker for me, also in a window it looks like diagonal rain. But if I'm the only one, then never mind. \ud83d\ude01", "FabriceNeyret2, 2023-03-25ok. hard to choose. animated is more natural and realistic ( noise / radioactivity ) but a bit distracting.", "Xor, 2023-03-24@pb, I can't decide. I do love the animated version, but it seems to cause artifacts on some monitors (mine gets a red tint)", "Xor, 2023-03-24@Omniscience, I don't know if it has a name. It's something I've stumbled across while trying to make interesting structures.", "I believe this is a similar method, although I wrote mine from scratch: https://www.shadertoy.com/view/ftG3D1", "pb, 2023-03-24@FabriceNeyret2 -  I think Xor was asking if we like the static or animated version better by asking \"line 37 or 39\".  I like the animated variant better (uncomment line 38 and comment line 36), makes it look more like beams of light in the (1,1,1) direction", "FabriceNeyret2, 2023-03-24@pb", "?", "pb, 2023-03-2339!", "Omniscience, 2023-03-23what fractal is this? any information about it or just something random you found? i can't believe there are well formed truss structures next to buildings all in such little code", "Xor, 2023-03-20Excellent tricks! n=1e2 is genius!", "I'm gonna skip the normalized \"d\" vector because it loses precious precision (especially when near objects)", "FabriceNeyret2, 2023-03-20@coyote: my tricks below still apply ;-)", "coyote, 2023-03-20415 chars (277ch buffer A):    d = vec3(I+I-r.xy,r),", "p = iTime/r/.3-6., c=p, v, s;", "", "d.yz*=R-.3));", "for( float i,n=1e2,l=-n; l++<n; p+=d/length(d)*s.y )", "for( s=v=p, i=n; i>.1; i*=.4)", "v.xz*=R+2.)),", "s = max(s,min(min(v=i*.8-abs(mod(v,i+i)-i),v.x),v.z)),", "l == 0. ?", "p += (c-p)/exp(texture(iChannel1,I/1024.).r*2e1),", "d /= d,", "O *= l", ":", "O += s.y;", "FabriceNeyret2, 2023-03-20O don't seem to be initialied before l=100.  \u2192 is it working correctly on windows ?", "or we don't care the 100 first values ?", "FabriceNeyret2, 2023-03-20-1: for(v=p+=d*s,", "FabriceNeyret2, 2023-03-20-1: d = ( vec3(I+I,r) - r ) /2./r.y,   then  p+=d*s  in loop", "FabriceNeyret2, 2023-03-20-3:  d = vec3(I+I,r) - r,", "coyote, 2023-03-20And another -2 by initializing p and c within declaration:    p = iTime/r/.3-6., c = p, v;", "coyote, 2023-03-20Beautiful!  Btw, -4 chars because you don't need t:    float s,i,l=0.;", "//Scroll camera forward", "c = p = iTime/r/.3-6.;", "Dave_Hoskins, 2023-03-19Thanks, I think it might be the noise messing with my monitor. I can stop it flickering by removing time 't' from the noise texture read, but then the noise looks too obviously. Trying a stationary blue noise seems to work OK, but that gives 424 chars with the divide by 1024.", "Xor, 2023-03-19@Dave_Hoskins try commenting line 43 and uncommenting line 45. If the frame rate is bad, the blending and chromatic aberration suffers", "Dave_Hoskins, 2023-03-19It's a stunning model, I really like entering the dark areas.", "Although something's changed recently. I'm getting a bad flicker at full screen (4k).", "jorge2017a2, 2023-03-19If I looked better, the result would be excellent", "yunhai, 2023-03-19amazing compression", "jt, 2023-03-18Cool", "FabriceNeyret2, 2023-03-18you are now to good in this game, nothing left to golf :-)", "( appart using working // in common )", "maybe max(min( could be replaced with clamp, but it's risky because windows and OpenGL don't implement it the same way.", "", "O-=O : we now tend to prefer O*=0.  , more portable", "", "-2: p = mix(p,c, v) \u2192  p += (c-p)*v", "-2:  O += s = max(s,min(min(v=i*.8-abs(mod(v,i+i)-i),v.y).x,v.z));", "FabriceNeyret2, 2023-03-18hey, but where is all the data ? :-)", "dean_the_coder, 2023-03-18Whoa.", "morimea, 2023-03-18very radioactive light :O", "cool!", "Oneleven, 2023-03-18So cool!", "jeyko, 2021-02-18nice, smoother wormies", "iq, 2021-02-18Yes. I've rewritten it to compute the derivatives by hand so the blockiness goes away. Since the shader is very fast to evaluate, I can afford doing it 3 times actually...", "jeyko, 2021-02-18cool, but is it supposed to look this blocky because of hrdware derivatives?", "https://i.imgur.com/aGkGkUd.png", "CPU, 2013-06-15gruesome! love it!", "DimaRich, 2021-12-20Wow", "Absolute beauty", "tangyuan, 2021-08-24wow!! nice !!", "saidwho12, 2021-06-08Incredible !!!", "pixel, 2021-06-05I could feel the heat", "MrOkiDoki, 2021-06-01wow ! !!!!!", "xavierseb, 2021-06-01<3<3<3 masterpiece! embers too! I'm fanning my screen!", "caogtaa, 2021-06-01WOW, that's real!", "oneshade, 2021-06-01I love it! Very nice and inspiring shader, makes me want to try more volumetric stuff.", "blackle, 2020-08-14I adore this!", "flockaroo, 2020-01-08wow, thats really beautiful!", "ollj, 2020-01-08one of the most believable bonfire renders.", "Maurogik, 2020-01-06@Draedrus, you can't just animate the globalFireLife, that breaks everything.", "I already had some flickering on the fire light but the TAA was eating most of it away so I've just made it stronger.", "Thanks for the feeback ;).", "Draedrus, 2020-01-06I added a variation of lighting depending on the fire lifetime using a new ugly global :", "", "void InitLogs(float time)", "{", "float fireLife = 1.0 - (time / 60.0);", "s_globalFlamesLife = fireLife;", "fireLife = fireLife*max(0., .8+.2*(1.+sin(4.*time)));", "s_globalFireLife = fireLife;", "", "AND", "void fCampfireLogs( ...", "float fireLife = s_globalFlamesLife - hash11(rand * 657.9759)*0.2;", "", "Anyway, amazing man", "iapafoto, 2020-01-06so much details, fantastic!", "EvilRyu, 2020-01-06very high quality!", "PauloFalcao, 2020-01-05So cool", "iq, 2020-01-05Awesome indeed! Very cool", "shau, 2020-01-05Awesome!", "Orm, 2020-01-05incredible!", "tdhooper, 2020-01-05Fantastic lighting, texturing, modelling... and the fire even burns out over time! I might have missed that if I didn't read the code.", "Navi, 2021-07-29@GregRostami Thank you <3", "GregRostami, 2021-07-26Here's the code for WebCam Texture:", "void mainImage( out vec4 c, vec2 p )", "{", "p -= iMouse.xy;", "c.w = length(p = p/iResolution.y)-.5;", "c = texture( iChannel0, fract( vec2(atan(p.y,p.x), .05/c.w)+iTime) );", "}", "Navi, 2021-07-26@izutionix", "If i use my WebCam Texture in this, in order to make it work i would have to wrap it as repeat.", "", "How do i achieve this programmatically keeping the wrap setting as \"clamp\" ?", "izutionix, 2020-03-26this looks cool:", "void mainImage( out vec4 c, vec2 p )", "{", "p -= iMouse.xy;", "c.w = length(p = p/iResolution.y)-.5;", "c = texture( iChannel0, vec2(atan(p.y,p.x), .05/c.w)+iTime );", "}", "X_designer, 2019-09-30simple and directly", "CooperVarley, 2019-07-25Cool", "Mapilu, 2019-07-22Nice colors!", "audiopixel, 2019-07-09Very slick and effective!", "and thanks for the note about '#define' - will plan to phase it out of my shaders.", "iq, 2019-07-05I'm not  a friend of the #define trick, that might/will break in the future as we evolve the API and the way we construct the shaders internally.", "GregRostami, 2019-07-04115 chars:", "#define mainImage(c,P)  \\", "c.w = length(c.xy = P/iResolution.y - .5);  \\", "c = texture( iChannel0, vec2(atan(c.y,c.x), .2/c.w)+iTime )*c.w", "Veggiebob, 2019-07-04Oh lol nice", "iq, 2019-07-04Yes, it's intentional. Fixing it is easy, you need to multiply the atan() by 0.95492965855 and then compute uv derivatives by hand. But that requires a lot more characters and it would no longer. You can read more here: http://iquilezles.org/www/articles/tunnel/tunnel.htm", "Veggiebob, 2019-07-04I notice there is one slight discontinuity in the left center", "GregRostami, 2017-04-21128 chars:", "void mainImage(out vec4 c,vec2 p)", "{", "c.w = length(p = p/iResolution.y - .5);", "c = c.w * texture( iChannel0, vec2(atan(p.y,p.x), .2/c.w)+iDate.w );", "}", "GregRostami, 2015-06-20@coyote Amazing as always!! Great SO (Size Optimization)!", "coyote, 2015-05-18Great!", "And here is a 7 chars smaller version:void mainImage( out vec4 c, vec2 p )", "{", "c = ( c.w = length( p = p/iResolution.y - .5 ) ) *", "texture2D( iChannel0, vec2(atan(p.y,p.x), .2/c.w)+iGlobalTime );", "}", "iq, 2015-05-16I optimized the shader further and I no longer need to resort to iDate.w.", "coyote, 2015-02-03You are right, of course. And thanks for the clarification.", "Somehow when I saw length(d) my mind immediately (and totally wrongly!) translated it to, say, 500 at the right side, and 0.2/500+80000=80000.0004, so I thought well that must be it.  Silly me...", "iq, 2015-02-03Of course", "", "However, the problem is not with precision in the addition of big and small numbers. The problem is in the texture hardware texture interpolator. Way before iDate+tunnel suffers from precision problems, the texture interpolation unit, which works in fixed point and at a relatively small precision, is already lacking bits/decimals. When you divide iDate.w by 10 and the shader looks better is not because you are helping with precision in the floating point arithmetic, but because the UVs are smaller and the HW interpolator has more room for subtexel lerp-ing. You can check this by simply replacing the texture lookup with a sine pattern/wave.", "", "In any case, the shader needs to be seen at early in the morning ^_^", "coyote, 2015-01-28OMG, I've just read your description and noticed that you were fully aware of the precision problem. Sorry for making all the fuss.", "coyote, 2015-01-28", "I think it looks the best when slowed down (iDate.w*.1), and with the first texture. (wall, tiles, whatever it is) Anyway, the first texture was lit from the perfect direction so it seems like there is a real displacement in the tunnel.", "", "Btw, there is one problem with using iDate.w in your code. As the day goes by, iDate.w can be relatively large number (for a float). And adding a large number to a small number such as .2/lenght(p) leads to errors. That's why the tunnel is not so nice at large speeds later in a day, especially near the right edge of the screen (where the length is larger) - the texture sampling is affected by this error, and you get blocky edges. So it's another reason why multiplying iDate.w with .1 is a good idea. I tested your program with constants and the rendering looks nice up to about 8000 (seconds). After that the error kicks in. Fortunately, when we divide by 10 it's enough to keep it in such range throughout the day.", "", "I especially like it this way:", "... vec2(atan(p.y,p.x),.2/dot(p,p))+iDate.w*.1 )*length(p);", "It is brighter, and it doesn't matter if you watch it in the morning or late at night. Texture always look fine.", "ttoinou, 2021-03-20Incredible ! Needs a default camera movement for me to make a youtube render", "ollj, 2020-11-16no caustics, duh. its computationally complex, and usually only poorly approximated/faked", "https://www.shadertoy.com/results?query=caustics", "Pjbomb2, 2020-11-16I am in awe, how did you get this to be so pretty? and is it doing caustics by chance?", "P_Malin, 2017-02-10Aha, or does it?", "", "...", "", "No, it doesn't. Thanks - removed.", "Dave_Hoskins, 2017-02-10'fIndex' appears to do nothing...", "P_Malin, 2017-02-10Oops - depth of field was a bit broken. Should be a bit better now.", "demofox, 2017-02-08So good!", "P_Malin, 2017-02-08Thanks Fabrice. The main thing affecting the look of the dirt is that it affects the material fSmoothness which varies the spread and intensity of the specular highlight. It does affect the albedo and transparency too but they have less of an impact on the overall look.", "FabriceNeyret2, 2017-02-08Really nice, in every aspects !", "I'm curious: how is done the dirt aspect ? is it really just channel2 modulating the albedo of a transparent layer ? (the result is so effective !)", "P_Malin, 2017-02-08Thanks for the nice comments!", "Thanks Hamneggs, yes I tested it in VR since I wrote the shader description. I've updated the comment now.", "Ironically I starting writing this shader thinking about making a framework that would let me make something fast for VR and then got sidetracked thinking about transparency and eventually ended up with something quite slow (for VR)! Oh well.", "I've adapted a lot of my shaders to work in VR. Jack-o'-lantern and Red Cells work quite nicely fullscreen.", "I'd still like to make a nice and fast shadertoy scene specifically for VR sometime though.", "knarkowicz, 2017-02-08Incredible! Great feel of first cg demos.", "Hamneggs, 2017-02-07VR works and the scaling is perfect! This is one of the most convincing things I've seen in VR. The only downside is that at full resolution (err... full screen) I get a grand total of <= 2 fps with a gtx1080.", "Also the bottom of the bowl is really dirty. You might want to get something to clean it.", "GottZ, 2017-02-07this is even running somewhat fine on an LG G5. well done!", "KylBlz, 2016-10-01Wow this is realtime with all that prettiness; nice.", "shau, 2016-09-29Superb raytracer. Looks like the party was quite messy", "P_Malin, 2016-09-27The material / reflection / refraction / intersection math is all a bit funky but I'm happy with the result", "", "Dave_Hoskins / flockaroo - Previously I was only casting a reflected ray from the first intersection. I've changed the shader now so that a reflected ray is cast for the first intersection and also if the surface has no transparency or in the case of total internal reflection. I think it has picked up the edge-of-bowl and underside of liquid cases which were not reflecting anything before.", "", "ollj - Oops, yes PI was defined twice as I had left a copy of the distance function from one of my very old shaders (Chains and Gears) pasted in there. The RotateX() etc. functions were all part of that code too but were unused. Yes the \"stack\" is now more of a queue. I kept its name as it started out as a stack and I didn't rename it when the usage changed. \"no clue why you think a stack is needed were accumulators would have done nicely\" - well, because that would not handle ray branching from reflection and refraction at each intersection which was what I was investigating in this shader. This shader is an evolution of Buffer B code in [SH16B] Mach 1 which accumulated reflected rays exactly like you suggest.", "dila, 2016-09-24the fluid in the glass is a nice touch", "Duke, 2016-09-23Very nice!", "flockaroo, 2016-09-23is there any total reflection considered? the water surface in the glass from below seems completely black. maybe thats where the light is lost... ?!", "Dave_Hoskins, 2016-09-23It looks absolutely great. Can I ask how many internal reflections there inside the edge of the bowl? It looks quite dark so I presume a lot of light is lost.", "Shane, 2016-09-23I'm pretty happy with this. Thanks for posting it. I figured someone would eventually emulate a recursively raymarched scene on a stack... unless someone else on here has already done it. It compiles and runs at 10fps on my oldest computer, which is pretty good for that machine.", "", "With multiple ray examples, I've been taking the easy way out and avoiding recursion altogether by only performing reflection when refraction isn't possible. On abstract scenes, you can almost get away with it. I've tried to do things properly at the first intersection, then launch into the loop on the refractive pass, but that doesn't look quite right either. Either way, there are always performance issues... Of course, it's all relative. I can remember a time when I would have been thrilled to trace a single sphere with just one reflective bounce on a 256 by 256 pixel grid at 2 FPS - or a sizzling 8 FPS with adaptive subsampling.", "otaviogood, 2016-09-23Looks really good. Nice realism.", "iq, 2016-09-23Wow! Very pretty!!", "ollj, 2016-09-23#define BLUR_TAPS 0", "line 6 in [image], disables the deph of field post processing that hides a lot of cthe common raymarching artefacts while scattering reflections and reducing moire without any bloom by just adding a few iterations of simple functions, very efficient.", "", "instead just modify its parameters, alternatively set line 16", "float fAperture = sin(iGlobalTime)*2.;", "for a nice drtunk effect that emphazizes the dept of field effect.", "cubby208, 2016-09-23I am impressed with how good the edges of everything look.", "ollj, 2016-09-22good and close to the limit of my 2013 hardware, 13fps.  stacks are lists. you define #PI==kPI twice.", "", "no clue why you think a stack is needed were accumulators would have done nicely.", "that comes down to translating a recussive function to a forLoop with accumulators were the accumulators are parameters to calculate thefinal color of a fragment, and each iteration modifies the accumulator instead of adding parameters to a stack, as in", "https://www.shadertoy.com/view/4td3Dj", "", "//generally, any arrays are begging for loops, eg:", "RayInfo_Clear() and RayStack_Reset() seem to only be needed initially, so i can reduce:", "RayInfo RayStack_Get( int index ){", "for( int a=0; a<8; a++ )", "if ( index == a) return rayStack[a];", "}}//since GL_AS unrolls all forLoops anyways, smaller source code for slightly longer compile time.", "", "", "//I used ths shader to benchmark:", "//short swiveled 3d rotations, smaller code, apparently causes less fluctuating fps (on nvidia):", "mat2 r2(float r){float s=sin(r);float c=cos(r);return mat2(c,s,-s,c);}//2d rotation in radians", "//2d rotation on vec3 with swivel: [b]efore and [a]fter;", "#define r3(p,r,b,a) {vec3 q=p.b;return vec3(q.xy*r2(r),q.z).a;}", "#define r3b(p,r,b) r3(p,r,b,b)", "//if (less than 3 get swiveled) BeforeSwivel==AfterSwivel -> r2b, special case of r3;", "//else () BeforeSwivel!=AfterSwivel -> r3", "#define icir in vec3 p,in float r", "vec3 RotateZ(icir)r3b(p,r,xyz)", "vec3 RotateY(icir)r3b(p,r,xzy)", "vec3 RotateX(icir)r3(p,r,yzx,zxy)", "Jacoby, 2016-09-22Awesome", "flockaroo, 2016-09-22wow, even with some wine  and i do like the stained floor - how bout some lipstick or fingerprints on the glass ;)", "ollj, 2019-02-13can you comment the ones that are [porterDuff Alpha compositing] as their label?", "ben, 2016-08-22Thanks for the heads-up, should be working now.", "rdeman, 2016-08-22Doesn't work, javascript console says \"No WebVR!\"", "ben, 2013-12-06Are you sure, iq? When I compared the results to what Photoshop produces 3.0 seemed correct.", "", "Re: alpha blending - I've only been using these for combining textures to get more variation, so I didn't bother handling transparency. It should be easy enough to add if you need to do proper compositing.", "iq, 2013-12-06Line 78 is wrong, it's not a 3.0, it should be a 4.0", "zz85, 2013-11-25have you seen adobe's w3s blending specs? http://dev.w3.org/fxtf/compositing-1/ there's some discussion about alpha blending there too", "zz85, 2013-11-25have you seen adobe's w3s blending specs? http://dev.w3.org/fxtf/compositing-1/ there's some discussion about alpha blending there too", "cabanier, 2013-11-22is this using premultiplied alpha? It seems you're missing a couple of steps to do real blending.", "SableRaf, 2013-11-15This is great. Thanks!", "", "I ported it to Processing, adding blend mode selection, opacity and fixing the return values with c = clamp( c, 0.0, 1.0 );", "", "Demo sketch: https://github.com/SableRaf/Processing-Experiments/tree/master/2013/Shaders/filtersAndBlendModes/BlendModes", "poljere, 2013-11-12Great!", "iq, 2013-11-11Very useful, thanks!", "etale_cohomology, 2017-08-01It works now! Sweet =)", "", "This is super useful, my goodness!!  And so terse, too. Love it", "d7samurai, 2017-08-01@etale_cohomology thanks! i haven't been here for a while", "etale_cohomology, 2017-08-01no longer compiling in WebGL2.0: globals init must now be const (or do it in main)", "Clocktown, 2021-02-10Thanks for the reply!", "", "Yeah I was assuming non-repeating borders, i.e. \"black holes\" haha. I don't really know what is done in shadertoy by default, but in the Paint Streams it seemed to be clamped to 0 borders.", "", "But yeah the 0.004% does match my obvervations. It is running at 144fps for me. If I calculated right, thats something like 70% left after a minute, which does seem to fit my observation. I guess in order to adress this, we would need to use integer math and divide the mass with a \"smart\" rounding scheme.", "michael0884, 2021-02-09typo. should be dot(vel, normal) < 0.0 normal is pointing out", "michael0884, 2021-02-09This processing implementation shows the exact mass loss due to float32 https://github.com/MichaelMoroz/michaelmoroz.github.io/blob/master/files/ReintegrationTracking/ReintegrationTracking.pde", "michael0884, 2021-02-09@clocktown, as far as I know mass shouldn't be lost on the border more than inside, in theory. The implementation here might be broken idk. If the space is not repeated then yes, it might be lost if the velocity in the normal direction to the border is positive(dot(vel, normal) > 0.0)", "Mass is indeed lost because of float32 precision limits. about 0.004% per frame or something, don't remember exactly.", "Clocktown, 2021-02-09I have a few \"observations\" that I am not 100% sure about:", "1) Mass is lost at the border, because the diffusion radius can overlap the outside of the grid", "2) If we ensure that nothing gets close to the border with proper collision, mass can still diffuse through the collision objects even if velocity is 0 because the diffusion radius again can overlap", "3) Mass is probably lost due to precision limitations", "", "Am I right with these assumptions? The thing is I tried everything in your Paint Streams and succeded in a collision rule that enclosed everything and seemed to work (no mass was getting to the rim because I also added a force to send it back out of the collision object) but the fluid still kept disappearing over time. This could be a case of 3), or it is 2) and the amount of mass that escapes through the collision object is just too small to see with the shading I used - or - the mass got stuck right on the surface of the collision object (sucked in like a black hole xD).", "", "So I am pretty sure that 1) and 3) are a thing, but 2) I think can be avoided with the right collision handling.", "michael0884, 2020-09-04stored*", "michael0884, 2020-09-04Actually using neural networks to learn the rule of particle addition and the information store in one cell is probably the most universal solution", "michael0884, 2020-09-04Depends on what you want to achieve I guess, there is no single answer, because of particle addition we are losing information - and we try to recreate it in a meaningful way. It's just as in superresolution.", "kastorp, 2020-09-04it could be used as an additional configuration parameter of tradeff LINEAR MOMENTUM vs ENERGY conservation", "here is the example", "https://www.shadertoy.com/view/Wl2Bzy", "", "In some circumstances adjusting that parameter could increase simulation realism", "michael0884, 2020-09-04well, that is just total energy tracking. what are we going it use it for then? maybe as temperature or maybe as a velocity non-uniformity(rotation or outside directed divergence) that has equal energy to (stored energy - current average kinetic energy)", "kastorp, 2020-09-04Maybe the solution in case of collision would be to calculate velocity with direction of average velocity, and modulus the average quadratic velocity so that   v[i+1]^2 * m[i+1] ==  sum(v[j]^2 * m[j])", "michael0884, 2020-09-04Or maybe just a stupid mistake, idk", "michael0884, 2020-09-04When I tried to use it 2 months ago it seemed that unpackSnorm2x16(packSnorm2x16(a)) != a. Maybe its because I did not use the clamp?", "Now it does work.", "Ecter, 2020-09-04@michael0884  Replacing your pack and unpack functions appears to give valid results.  What issues did you run into?", "michael0884, 2020-09-04The algorithm should in theory also conserve total linear momentum, so the only loss should be in the angular momentum. But yeah, when particles collide they can lose total kinetic energy if the move in opposite directions - its kinda transformed into heat, which is not tracked here", "kastorp, 2020-09-04sorry my fault,  now I've understood, the formula is not k(i) * (x +dt*v) but k(x +dt*v)", "kastorp, 2020-09-04yes  the refuse is in the mathml formula for the calculation of the update center of mass", "", "regarding the number of particles, I would like to store also that number for each cell and use it as an iterator in the reintegration step. In any case, I would also try to find a solution to the loss of energy, which is evident if you set dif=0.1. Maybe also the energy(or temperature?) needs to be stored and used somehow", "michael0884, 2020-09-04@Ecter, I tried to use that packing function first - but sadly it did not work as I expected so I implemented it myself.", "@kastorp, refuse? You mean storing multiple particles in one cell?", "kastorp, 2020-09-04you also mentioned the case of  particle number conservation, which in my opinion could be handled by a  small diffusion radius, where incoming particles not overlapping could be kept separated (storing also velocity and position divergence). Does it have a meaning?", "kastorp, 2020-09-04I've read the article, very clear... I've understood quite all... thanks! Now I even know what SPH means", "ps. there seem to be a refuse in the initial formula for X(t+1,i) the updated center of mass", "Ecter, 2020-09-04Hey FYI, I was looking over your code, and there's much easier ways to pack and unpack vec2s from 16bit ints. if I understand correctly, the pack function can be replaced with:", "", "clamp(x, -1.0, 1.0);", "return packSnorm2x16(x);", "", "and the unpack function can be replaced with", "", "return unpackSnorm2x16(a);", "michael0884, 2020-09-03Here is the blog post https://michaelmoroz.github.io/Reintegration-Tracking", "michael0884, 2020-09-02I made one recently, but I'm still writing the article. Yeah those are virtual particle distributions", "Ecter, 2020-09-02You have a blog?  also this a visualization of the virtual particle tracking?", "YukimuraKyoko, 2019-10-01I'm speechless!", "bob87, 2019-09-06A tribute to Albert Hofmann!!!!", "Very nice!!!!", "jarble, 2019-09-06I turned this \"One Way Trip\" into a \"One Way Acid Trip.\"", "jarble, 2019-09-06I added some more distortion to this shader. Here's my version: https://www.shadertoy.com/view/tdcGz8", "Taron, 2019-09-05It's beautiful, but I'm seriously concerned about burning up my graphics card...poor thing! >_<", "Gorgeous no less! Great job! 8)", "cmarangu, 2019-09-05heatingak dufodag  my computet ral fast!!!", "Virgill, 2019-09-05Beautiful", "PVM, 2019-09-05@NinjaKoala fixed, thanks for reporting the problem.", "NinjaKoala, 2019-09-05Looks interestingly broken for me:", "The problem is that flare in line 284 gets negative and pow(flare,3.) in line 286 is then returning NaN.", "", "Really nice shader, though!", "Dain, 2019-08-31Really damn nice, I like how it evolves over time, at 100 seconds it looks like a fungus", "coyote, 2019-08-30Beautiful!", "Any chance of sharing the sound synthesis source too?", "reinder, 2019-08-29wow, very cool!", "Shane, 2019-08-29Really nice. Great motion and perspective.", "Dave_Hoskins, 2019-08-29Nice work Kali / PVM. I love the way it changes, very cool.", "GregRostami, 2019-08-29SUPER LOVE!", "iq, 2019-08-29Amazing!", "iq, 2019-04-03@nexor: fixed, thanks!", "nexor, 2018-01-13@iq", "In the comments you wrote https://www.shadertoy.com/new for this shader, but you should have written https://www.shadertoy.com/view/XtBfzz", "otaviogood, 2017-12-31Thanks. I needed this the other day for one of my convolution net visualizations. I wrote a crappy fake anti-aliaser. Next time I can look at this.", "GregRostami, 2017-12-25Very amazing!!", "UrbanClubProfessional, 2020-11-02I remixed this shader in here: https://www.shadertoy.com/view/WddfR8", "bismatrimony, 2020-10-31Awesome creation.. wow https://www.bismatrimony.com", "TylerPh, 2020-09-21<a href=\"https://example.com\">example</a>", "xfgj", "example", "wosztal15, 2020-09-11Something amazing!", "Cubex, 2020-09-07Whoa, so nice mix of colours. Good job!", "iq, 2016-02-03Nice!", "TekF, 2016-01-15Thank you! Too much HLSL", "stb, 2016-01-15\"why didn't lerp( col, fragColor, idx ) work?!?!\"", "", "Hey Tek, have you tried mix()?", "jt, 2017-10-09beautiful", "Simplo, 2017-06-06Hi Frankenburgh! You are great!!! Thenk you very much!", "frankenburgh, 2017-06-05Hi Simplo, I've added a define USETEXTUREHEIGHT. Set it to 1 to use the texture in channel#2 as height map. Usage is in line 58. You have to assure that the texture has a good resolution because the light-normals are calculated from this also (in CalcTerrain\").", "This would look nice on your project ;) I think to create a water-stream flowing down the rocks the code must be changed anyway..", "You contact me via fhuge@onlinhome.de", "Simplo, 2017-06-05Hi Frank, your shader is very nice!!! I'm not very good in GLSL and I was wondering if it could be  possible to use a texture to define altitude of the rocks.", "It would be great to use your GLSL to animate this project:", "https://www.facebook.com/amartist.multimedia/videos/1820459268198242/", "frankenburgh, 2017-06-03Yes, the mouse is not scaled to screen resolution. Simply avoid these black pixels by moving the mouse not too far away from the left ;)", "The mouse-x is added to the water-height (line 178), and if it's too high, it becomes higher then the light-source -> no light -> black pixel.", "Imsure1200q_1UWE130, 2017-06-01This is cool! Im not really sure about the water in fullscreen. if you put it to the rightmost side, it goes black.", "CaliCoastReplay, 2016-08-17I love, love, love the 2.5D look with realistic normal mapped lighting and would love to use this technique in a game one day", "Virgill, 2014-10-07Wow.. Cool water engine, Frank!", "frankenburgh, 2014-10-06Hmm- strange clamp ;) have not noticed this, because on my 7870 it worked perfect.. Now works on Mac/Chrome and Win7/Chrome/Firefox", "iq, 2014-10-06Ah, you fixed it. Thx", "iq, 2014-10-06There's a bug with the clamp() in height_map() that makes it all render black - the order of the parameters is wrong.", "scratch13764, 2017-03-25void mainImage( out vec4 fragColor, in vec2 fragCoord )", "{", "vec2 xy = fragCoord.xy / iResolution.xy;", "vec4 texColor = texture(iChannel0,xy+sin(xy.x+iGlobalTime/20.0));", "fragColor = texColor;", "}", "", "actually, currently this is what I have and I don't understand how to make the image warp where the x and y values are not at the same warpedness", "scratch13764, 2017-03-25yay!!this seems to be EXACTLY what I was looking for, besides the cool ripples  which I could never understand.", "Dirk, 2023-01-04High Concept Shader?!!", "", "righteous", "Artemis152, 2022-11-06amazing", "SalvatorePreviti, 2022-07-20definitely fake!  Love it.", "FabriceNeyret2, 2021-09-13Note that technically, Neil Armstrong was the alien. And the possibly hidding little a shy selenite inhabitant ;-)", "dean_the_coder, 2021-09-13@FabriceNeyret2 I can neither confirm or deny it would be aliens.", "FabriceNeyret2, 2021-09-13if I artificially unzoom the camera and go watch behind the big boulder, what will I see ? :-p", "jt, 2021-09-13nice!", "jeyko, 2020-12-23so nice", "KylBlz, 2020-12-22love the concept, execution is awesome", "zproxy, 2020-12-21needs the lunar lander", "iq, 2020-12-21It looks really good!", "shau, 2020-12-21Wow. Looks great!", "oneshade, 2020-12-20Very nice!", "Atchafalaya, 2020-12-20Really nice :o", "dean_the_coder, 2020-12-20@FabriceNeyret2 I _knew_ someone would say that!", "FabriceNeyret2, 2020-12-20wow, really great !", "( part of the \"faking Moon landing\" project ? :-p )", "jorge2017a1, 2020-12-20Amazing to think it's still there. !!!", "..... well if the moon moves, there is no air .... but there are magnetic fields .... I think it has already been erased -....  uppsss ..... excellent work looks very real and if it looks like the floor of the moon !!!! where it is said that there is silver and ferrous metals or iron !!!!", "............", "Amazing to think it's still there.!!!", ".....bueno si la luna se mueve, no existe aire....pero si campos magneticos ....pienso que ya se borro-....  uppsss.....excelente trabajo se mira muy real y si parece el suelo de la luna!!!! donde se dice que existe plata y metales ferosos o fierro!!!!", "greenfox, 2022-11-11I have struggled explaining ray marching to so many people,. This is brilliant and will now be my default visual aid.", "oneshade, 2020-11-03Incredible! Really nice demonstration.", "dean_the_coder, 2020-08-02Awesome!", "hahnzhu, 2020-06-23you're genius!", "kaneta, 2019-09-20", "jcyuan, 2019-09-19Jesus....", "EvilRyu, 2019-09-18Can't believe I missed this one, awesome!", "shicz86, 2019-09-09fantastic\uff01", "yqlizeao, 2019-08-22wow\uff0cawesome!", "SilvanKohler, 2019-07-31thank you", "kaneta, 2019-07-18Thanks feedback!", "lovepurple, 2019-07-10it's awesome to understand ray marching", "ollj, 2019-07-08these almost-diegetic shaders are the best. its diegetic as soon as you modify it.", "kaneta, 2019-07-08", "zproxy, 2019-07-06cool work", "jt, 2019-06-27really awesome", "squeakyneb, 2019-06-27WHAAAAAAAAAAAAAAAAAAT, that's sick", "kaneta, 2019-06-24Thank you", "Shane, 2019-06-22\"love\" Awesome. Fun to watch.", "blackle, 2019-06-21incredible work!", "HellMood, 2019-06-21\u2665", "felipunkerito, 2019-06-20Awesome!", "kaneta, 2019-06-20@iq", "Thank you for your advice.", "I added filtered chackerboard and 2xAA!", "kaneta, 2019-06-20Thank you very much. I study a lot with your wonderful shaders.", "reinder, 2019-06-19@kaneta: there is really no need to apologize. I really like your shader (it is very polished!) and it is fun to see that we came up with such a similar idea", "kaneta, 2019-06-19Thank you for your comments and advices.", "", "@reinder", "This was created for the Japanese Shader Study Group.", "I apologize for the unintended resemblance.", "BigWIngs, 2019-06-19Wow, thats very well done!", "iq, 2019-06-19indeed", "reinder, 2019-06-19Very nice! (and a bit similar to 4dSfRc  )", "iq, 2019-06-19This is really cool, very well done!", "", "Of course, GPUs don't rasterie in scal-lines, but in tiles, so the last animation is technically, but that's okey. Man, add filtering to the checkerboard (XlcSz2) on the floor, then add 2x supersampling and I think I will use this shader when I go out there gives talks", "kaneta, 2019-06-19Thank you for your comments.", "", "@FabriceNeyret2", "Thank you for the advice. I added a small ball.", "iapafoto, 2019-06-19super well done!", "FabriceNeyret2, 2019-06-19so great !", "suggestion: when the ray scans the scene at the end, you may add a small ball at ray-scene intersection to help making the connection with the projection.", "Plento, 2019-06-19Wow so cool", "wyatt, 2019-06-19awesome!", "jorge2017a1, 2019-06-19muy bien la ilustraccion, tecnicas que desconozco...saludos", "CPU, 2019-06-19Mental!", "badjano, 2019-06-24I tried changing the size of the triangles, couldn't do it, do you know how we could do this?", "drliquidglitch, 2022-12-15Made an audio reactive version: https://www.youtube.com/watch?v=8YpVuVe_3VE", "betotulkas, 2022-08-21remplace 224 to 240 :", "float planeDist = 1.0-0.25;", "const float furthest = 6.0;", "float fadeFrom = max(furthest-5.0, 0.0);", "", "float fadeDist = planeDist*float(furthest - fadeFrom);", "float nz = floor(ro.z / planeDist);", "", "vec3 skyCol = skyColor(ro, rd);", "", "", "vec4 acol = vec4(0.0);", "const float cutOff = 0.95;", "bool cutOut = false;", "", "// Steps from nearest to furthest plane and accumulates the color", "for (int i = 1; i <= int(furthest); ++i) {", "float pz = planeDist*nz + planeDist*float(i);", "nickcody, 2022-03-21This rocks!", "caogtaa, 2022-01-01Amazing!", "Hojaverde, 2021-12-30Beautiful <3", "jt, 2021-12-30Great! Reminds me somewhat of the artstyle of Gorogoa http://gorogoa.com/", "BigWIngs, 2021-12-29Excellent visuals!", "FabriceNeyret2, 2021-12-29woow !", "jorge2017a2, 2021-12-29excellent toy has a lot of technique ..... the idea is very good .... and has high quality graphics ... very good !!!!!", "jorge2017a2, 2021-12-29@iq", "When people are careful .... the difference is years of experience .....  ........ hahaha ..... by the way I had a bad day and I don't feel like doing things with care ... hahahaha ..... you can also do many things .... when your life does not have so many problems .", "iq, 2021-12-28Pretty, and pretty well antialiased. I love when people are this careful, it makes the whole difference.", "Shane, 2021-12-28Really nice. Great design.", "jeyko, 2021-12-28ZAAAAMN", "Poisson, 2023-01-18very cool", "null511, 2022-11-07Shouldn't the gamma correction come _after_ the tonemap?", "Rrrrichard, 2022-05-29Looks so real,great job", "FabriceNeyret2, 2019-10-22\tpos.texcoord = fragCoord / screenResolution.y;", "pos.mousecoord = mouseCoord / screenResolution.y;", "", "but then you probably want centering (for now you do -.5 later )", "-> pos.texcoord = (fragCoord -.5* screenResolution.y ) / screenResolution.y;", "and delete your current centering.", "", "more tricks here: https://shadertoyunofficial.wordpress.com/2019/01/02/programming-tricks-in-shadertoy-glsl/", "mindu, 2019-10-22@FabriceNeyret2 can you write example? thank you!", "somethingwild, 2019-09-14You should add ozone absorption and earth shadowing kinda like this guy's shader. https://www.shadertoy.com/view/XlBfRD", "FabriceNeyret2, 2019-03-19nice !", "( how did I missed that one ?)", "", "lines 128, 129 : normalize by resol.y , not xy, or your image is distorted ! (your Sun is an ellipse ;-) )", "Dave_Hoskins, 2018-05-27It has now been saved with some errors...", "ocb, 2018-05-26Very impressive and nice!", "XT95, 2018-05-26Nice one !", "Xor, 2020-10-31Ah nice, I forgot to do that. I guess it's best to reuse some old code for the same path:", "w=q=V(0,0,v=iTime*.2),                                                            \\", "z=V(0,-.8*g,v/.1)+\t\t\t\t\t\t\t\t\t\t\t\t                    \\", "p*normalize(V(u.x,u.y*.3,2)/iResolution-V(sin(v)+1.,.2,0));", "coyote, 2020-10-31Also, float h is not needed anymore. ;)", "coyote, 2020-10-31@Xor, cool!", "Yeah, I haven't noticed it before but your camera path is (still) different from the original.", "And there is another possible problem because of the uninitialised first two components of vec3 w. To be safe on all systems there should be w=q=V(0,0,v=iTime)*.2", "Xor, 2020-10-31Nice! 498 chars (plus I fixed an animation speed error I made)!", "#define V vec3//", "mat2 m = mat2(8,6,-6,8);//", "float h,s,t,x,p,d,v;//", "V q,z,w;//", "#define g (abs(sin(q+sin(q.z)))+sin(sin(q.xz*=m*.1).y+q)).x//", "float n(V p){//", "for(p*=.1,s=.8,t=.9; (s/=.4)<4e3; p+=t) q=p,t-=g/s, p.xz*=m*.21;//", "return 3.-exp(t);}//", "#define mainImage(O,u)                                                     \t\t\t\t\\", "for(d=p=x=0.; d++<2e2 && p/5e3<=x; p+=x=z.y+n(z)) \t\t\t\t\t\t\t\t\t\\", "q=V(0,0,v=iTime)*.2,                                                            \\", "z=V(0,-.8*g,v)+\t\t\t\t\t\t\t\t\t\t\t\t                    \\", "p*normalize(V(u.x,u.y*.3,2)/iResolution-V(sin(v*.2)+1.,.2,0));     \t\t\t\t\\", "O.rgb = d/5e2+.1+.1*log(p)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\", "-dot(V(w.z=.01),                                                        \\", "normalize(V(n(z-w.zyx),                                            \\", "x = n(z),                                              \\", "n(z-w)-n(z.zyx*11.)/5e2)                               \\", "-x))                                                     \\", "*n(z.zyx*6.)*V(5,10,15)", "coyote, 2020-10-31@Xor, another -6 to 504:#define V vec3//", "#define S a*sin(q.x+sin(q.z))//", "mat2 m = mat2(8,6,-6,8);//", "float h,s,t,x,p,d,v,a=.1;//", "V q,z,w;//", "#define g (h=abs(S),q.xz*=m*a,h+S)//", "float n(V p){//", "for(p*=a,s=.08,t=.9; (s/=.4)<4e2; p+=t) q=p,t-=g/s, p.xz*=m*.21;//", "return 3.-exp(t);}//", "#define mainImage(O,u)                                                     \t\t\t\t\\", "for(d=p=x=0.; d++<2e2 && p/5e3<=x; p+=x=z.y+n(z)) \t\t\t\t\t\t\t\t\t\\", "q=V(0,0,v=iTime)*.2,                                                            \\", "z=V(0,-8.*g,v)+\t\t\t\t\t\t\t\t\t\t\t\t                    \\", "p*normalize(V(u.x,u.y*.3,2)/iResolution-V(sin(v*a)+1.,.2,0));     \t\t\t\t\\", "O.rgb = d/5e2+a+a*log(p)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\", "-dot(V(w.z=.01),                                                        \\", "normalize(V(n(z-w.zyx),                                            \\", "x = n(z),                                              \\", "n(z-w)-n(z.zyx*11.)/5e2)                               \\", "-x))                                                     \\", "*n(z.zyx*6.)*V(5,10,15)                                /*", "Xor, 2020-10-30We might be able to take it below 500! -6 chars (510):", "#define V vec3//", "#define S a*sin(q.x+sin(q.z))//", "mat2 m = mat2(8,6,-6,8);//", "float h,s,t,x,p,d,v,a=.1;//", "V q,z,w;//", "#define g(p)(q=p,h=abs(S),q.xz*=m*a,h+S)//", "float n(V p){//", "for(p*=a,s=.08,t=.9; (s/=.4)<4e2; p+=t) t-=g(p)/s, p.xz*=m*.21;//", "return 3.-exp(t);}//", "#define mainImage(O,u)                                                     \t\t\t\t\\", "for(d=p=x=0.; d++<2e2 && p/5e3<=x;) \t\t\t\t\t\t\t\t\t\t\t\t\\", "z=V(0,-8.*g(V(0,0,v=iTime)*.2),v)+\t\t\t\t\t\t\t\t\t\t\t\t\\", "p*normalize(V(u.x,u.y*.3,2)/iResolution-V(sin(v*a)+1.,.2,0)),     \t\t\t\t\\", "p += x = z.y+n(z);                                                              \\", "O.rgb = d/5e2+a+a*log(p)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\", "-dot(V(w.z=.01),                                                        \\", "normalize(V(n(z-w.zyx),                                            \\", "x = n(z),                                              \\", "n(z-w)-n(z.zyx*11.)/5e2)                               \\", "-x))                                                     \\", "*n(z.zyx*6.)*V(5,10,15)", "jorge2017a1, 2020-10-25It is strange that it is a compact code and the fps speed is 3.9, good on my machine! .... by the way it looks good !!!!", "...........", "es extra\u00f1o que es un codigo compacto y la velocidad fps es de 3.9, bueno en mi maquina !!! .... por cierto se mira bien !!!!", "GregRostami, 2020-10-25WOW!!!!!!!!", "Xor, 2020-10-23516 chars:", "#define V vec3//", "#define S .1*sin(q.x+sin(q.z))//", "mat2 m = mat2(8,6,-6,8);//", "float h,s,t,x,p,d,v;//", "V q,z,w,U;//", "#define g(p)(q=p,h=abs(S),q.xz*=m*.1,h+S)//", "float n(V p){//", "for(p*=.1,s=.08,t=.9; (s/=.4)<4e2; p+=t) t-=g(p)/s, p.xz*=m*.21;//", "return 3.-exp(t);}//", "#define mainImage(O,u)                                                                  \\", "U = V(u,0)/iResolution-1.;                                                          \\", "for(d=p=x=0.; d++<2e2 && p/5e3<=x;) \t\t\t\t\t\t\t\t\t\t\t\t\\", "z=V(0,-8.*g(V(0,0,v=iTime*.2)),v/.1)+p*normalize(U-V(sin(v),U.y*.7-.1,-3)),     \\", "p += x = z.y+n(z);                                                              \\", "O.rgb = d/5e2+.1+.1*log(p)                                                          \\", "-dot(V(w.z=.01),                                                        \\", "normalize(V(n(z-w.zyx),                                            \\", "x = n(z),                                              \\", "n(z-w)-n(z.zyx*11.)/5e2)                               \\", "-x))                                                     \\", "*n(z.zyx*6.)*V(5,10,15)", "jorge2017a1, 2020-08-02The first Image .... saves a still image very beautiful .... the sea looks excellent !!!! great job ... although the moving shader looks different than the still image ... it looks less illuminated !!!!", ".............", "La primera Imagen .... guarda una imagen Fija muy bella .... el mar se mira excelente !!!! un gran trabajo ... aunque el shader en movimiento se mira diferente a la imagen fija ... se mira menos iluminada !!!!", "inc, 2020-07-17stutter in higher resolution", "love it. any fix in buffer ?", "ollj, 2019-02-23where is the golf course on that terrain, i want my flagpoles and sand pits!", "GregRostami, 2018-11-03532 chars: (didn't have time to paste it in to the main shader)", "#define V vec3", "#define S.1*sin(q.x+sin(q.z))", "mat2 m = mat2(8,6,-6,8);", "float h,s,t,x,p,o=.1,d,v;", "V q,z,w;", "", "#define g(p)(q=p,h=abs(S),q.xz*=m*.1,h+S)", "", "float n(V p){", "for(p*=.1,s=.08,t=.9; (s/=.4)<4e2; p+=t) t-=g(p)/s, p.xz=p.xz*m*.21;", "return 3.-exp(t);}", "", "#define mainImage(O,u)  \\", "vec2 U = u/iResolution.xy;  \\", "U--;  \\", "for(d=p=x=0.; d++<2e2 && p/5e3<=x; o+=.002 )  \\", "z=V(0,-8.*g(w=V(0,0,v=iTime*.2)),v/.1)+p*normalize(V(U.x-sin(v),U.y*.3+.1,2)),  \\", "p += x = z.y+n(z);  \\", "O.xyz = o+.1*log(p)  \\", "-dot(V(w.z=.01),  \\", "normalize(V(n(z-w.zyx),  \\", "x = n(z),  \\", "n(z-w)-n(z.zyx*11.)/5e2)  \\", "-x))  \\", "*n(z.zyx*6.)*V(5,10,15)", "GregRostami, 2017-06-08@drift -  We will NOT REST until your shader is two tweets!!", "GregRostami, 2017-06-08Thank you very much drift. It's all based on your amazing shader/demo.", "You've done all the hard work ... we're just goofing off!", "drift, 2017-06-06Hello everyone, I have not been on shadertoy for some time and I just noticed this. Some amazing work here. Very clever optimisations!", "GregRostami, 2017-05-26@coyote - I just changed your suggestion to make the shader work.", "Let me know if this works for you.", "coyote, 2017-05-25Greg, I'm glad that you appreciate it.", "Btw, there are some problems on windows with firefox.", "q.xz*=m, and p.xz*=m do not work as they should. Seems as if windows firefox has its own glsl compiler which unfortunately has bugs. (strange... I've always thought that compiling glsl is a job for the gfx driver)", "When the above is written explicitly as p.xz = p.xz*m then it works ok.", "GregRostami, 2017-05-24I wonder if Fabrice is quietly working on a solution ... Hmmmmm?", "GregRostami, 2017-05-24When I posted this,  I KNEW coyote would do it. Thank you SO much coyote for your amazing, clever solutions.", "coyote, 2017-05-24542:#define V vec3", "#define S.1*sin(q.x+sin(q.z))", "", "mat2 m = mat2(8,6,-6,8);", "float h,s,t,x,p,o=.1,d,v;", "V q,z,w;", "", "#define g(p)(q=p,h=abs(S),q.xz*=m*.1,h+S)", "", "float n(V p){", "for(p*=.1,s=.08,t=.9; (s/=.4)<4e2; p+=t) t-=g(p)/s, p.xz*=m*.21;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,vec2 U)", "{", "U/=iResolution.xy;", "U--;", "for(d=p=x=0.; d++<2e2 && p/5e3<=x; o+=.002 )", "z=V(0,-8.*g(w=V(0,0,v=iGlobalTime*.2)),v/.1)+p*normalize(V(U.x-sin(v),U.y*.3+.1,2)),", "p += x = z.y+n(z);", "O.xyz = o+.1*log(p)", "-dot(V(w.z=.01),", "normalize(V(n(z-w.zyx),", "x = n(z),", "n(z-w)-n(z.zyx*11.)/5e2)", "-x))", "*n(z.zyx*6.)*V(5,10,15);", "}", "coyote, 2017-05-24548, o=1. into declaration instead in for loop:float h,s,t,i,x,p,o=1.,d,v;", "coyote, 2017-05-24550, dot is a valid delimiter for macro #define S.1*sin(q.x+sin(q.z))", "coyote, 2017-05-24551:#define V vec3", "#define S sin(q.x+sin(q.z))*.1", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t,i,x,p,o,d,v;", "V q,z,w;", "", "#define g(p)(q=p,h=abs(S),q.xz*=m,h+S)", "", "float n(V p){", "for(p*=.1,s=5.,i=t=.9; i++<9.; p+=t) t-=s*g(p), s*=.4, p.xz*=m*2.1;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,vec2 U)", "{", "U/=iResolution.xy;", "U--;", "for(d=p=x=0., o=1.; d++<2e2 && p/5e3<=x; o+=.02 )", "z=V(0,-8.*g(w=V(0,0,v=iGlobalTime*.2)),v/.1)+p*normalize(V(U.x-sin(v),U.y*.3+.1,2)),", "p += x = z.y+n(z);", "w.z=.01;", "O.xyz = .1*(o+log(p)", "-dot(V(.5),", "normalize(V(n(z-w.zyx),", "x = n(z),", "n(z-w)-n(z.zyx*11.)/5e2)", "-x))", "*n(z.zyx*6.)*V(1,2,3));", "}", "coyote, 2017-05-24@stduhpf, good catch!", "And then another char in the same manner:    for(p*=.1,s=5.,i=t=.9; i++<9.;p+=t) t-=s*.1*g(p), s*=.4, p.xz*=m*2.1;", "stduhpf, 2017-05-24555 (still a trick)", "#define V vec3", "#define S sin(p.x+sin(p.z))", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t,i;", "", "float g(V p){", "h=abs(S); p.xz*=m;", "return h+S;}", "", "float n(V p){", "for(p*=.1,s=5.,i=t=.9; i++<9.;) t-=s*.1*g(p), s*=.4, p.xz*=m*2.1, p+=t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,vec2 U)", "{", "float x=.0,p=x,o=1.,d=x;", "V z, w = V(0,0,iGlobalTime*.2);", "U/=iResolution.xy;", "for(U--; d++<2e2 && p/5e3<=x;o+=.02 )", "z=V(0,-.8*g(w),w.z/.1)+p*normalize(V(U.x-sin(w.z),U.y*.3+.1,2)),", "p += x = z.y+n(z);", "w.z=.01;", "O.xyz = .1*(o+log(p)", "-dot(V(.5),", "normalize(V(n(z-w.zyx),", "x = n(z),", "n(z-w)-n(z.zyx*11.)/5e2)", "-x))", "*n(z.zyx*6.)*V(1,2,3));", "}", "coyote, 2017-05-24556:#define V vec3", "#define S sin(p.x+sin(p.z))", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t,i;", "", "float g(V p){", "h=abs(S); p.xz*=m;", "return h+S;}", "", "float n(V p){", "for(p*=.1,s=5.,i=t=.9; i++<9.;) t-=s*.1*g(p), s*=.4, p.xz*=m*2.1, p+=t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,vec2 U)", "{", "float x=.0,p=x,o=1.,d=x;", "V z, w = V(0,0,iGlobalTime*.2);", "U/=iResolution.xy;", "for(U--; d++<2e2 && p/5e3<=x; )", "z=V(0,-.8*g(w),w.z/.1)+p*normalize(V(U.x-sin(w.z),U.y*.3+.1,2)),", "p += x = z.y+n(z),", "o+=.02;", "w.z=.01;", "O.xyz = .1*(o+log(p)", "-dot(V(.5),", "normalize(V(n(z-w.zyx),", "x = n(z),", "n(z-w)-n(z.zyx*11.)/5e2)", "-x))", "*n(z.zyx*6.)*V(1,2,3));", "}", "coyote, 2017-05-24560 (forgot to remove unused variable G in my last version)float h,s,t,i;", "coyote, 2017-05-24562 (got rid of vec2 and used vec3 instead for all variables)#define V vec3", "#define S sin(p.x+sin(p.z))", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t,i,G;", "", "float g(V p){", "h=abs(S); p.xz*=m;", "return h+S;}", "", "float n(V p){", "for(p*=.1,s=5.,i=t=.9; i++<9.;) t-=s*.1*g(p), s*=.4, p.xz*=m*2.1, p+=t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,vec2 U)", "{", "float x=.0,p=x,o=x,d=x;", "U/=iResolution.xy;", "U--;", "V z, w = V(0,0,iGlobalTime*.2);", "for(;d++<2e2 && p/5e3<=x;)", "z=V(0,-.8*g(w),w.z/.1)+p*normalize(V(U.x-sin(w.z),U.y*.3+.1,2)),", "p += x = z.y+n(z),", "o++;", "w.z=.01;", "O.xyz = .1*(1.+o/50.+log(p)", "-dot(V(.5),", "normalize(V(n(z-w.zyx),", "x = n(z),", "n(z-w)-n(z.zyx*11.)/5e2)", "-x))", "*n(z.zyx*6.)*V(1,2,3));", "}", "coyote, 2017-05-24572\tfor(;d++<2e2 && p/5e3<=x;)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(U.x-sin(v),U.y*.3+.1,2)),", "p += x = z.y+n(z.xz),", "o++;", "x=n(z.xz);", "O.xyz = .1*(1.+o/50.+log(p)", "-dot(V(.5),", "normalize(V(n(z.xz-W(.01,0)),", "x,", "n(z.xz-W(0,.01))-n(z.zx*11.)/5e2)", "-x))", "*n(z.zx*6.)*V(1,2,3));", "Another -2 chars, but not sure if it will work on all machines is to inline x=n(z.x) into vec3 like this:                     normalize(V(n(z.xz-W(.01,0)),", "x = n(z.xz),", "n(z.xz-W(0,.01))-n(z.zx*11.)/5e2)", "-x))", "coyote, 2017-05-24576 (just tricks, removing of some unused variables etc.)#define V vec3", "#define W vec2", "#define S sin(p.x+sin(p.y))", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t,i;", "", "float g(W p){", "h=abs(S); p*=m;", "return h+S;}", "", "float n(W p){", "for(p*=.1,s=5.,i=t=.9; i++<9.;) t-=s*.1*g(p), s*=.4, p=p*m*2.1+t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,W U)", "{", "float v=iGlobalTime*.2,x=.0,p=x,o=x,d=x;", "U/=iResolution.xy;", "U--;", "V z;", "for(;d++<2e2 && p/5e3<=x;)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(U.x-sin(v),U.y*.3+.1,2)),", "x=z.y+n(z.xz),p+=x,o++;", "x=n(z.xz);", "O.xyz = .1*(1.+o/50.+log(p)", "-dot(V(.5),", "normalize(V(n(z.xz-W(.01,0))-x,0,n(z.xz-W(0,.01))-x-n(z.zx*11.)/5e2)))", "*n(z.zx*6.)*V(1,2,3));", "", "}", "GregRostami, 2017-05-23This is all great guys ... keep it coming. I'll update your changes shortly.", "", "Failing to initialize x,p, and o fails on most machines.", "", "I think to reduce this shader further we need to REALLY optimize the underlying algorithm/math ... basic code golfing tricks will no longer work.", "stduhpf, 2017-05-23and if skipping initialisations is not allowed, replace l24 with     float/**/e,v=iGlobalTime*.2,u=sin(v),x=0.,p=x,o=x; and its 570", "stduhpf, 2017-05-23563 with cheating:", "#define/**/V/**/vec3", "#define/**/W/**/vec2", "#define/**/S/**/sin(p.x+sin(p.y))", "#define/**/F/**/for(int/**/i = 0;i++<", "", "", "mat2/**/m = .1*mat2(8,6,-6,8);", "float/**/h,s,t;", "", "float/**/g(W/**/p){", "h=abs(S); p*=m;", "return/**/h+S;}", "", "float/**/n(W/**/p){", "p*=.1;", "s=5.,t=.9;", "F/**/9;) t-=s*.1*g(p), s*=.4, p=p*m*2.1+t;", "return/**/3.-exp(t);}", "", "void/**/mainImage(out/**/vec4/**/O,W/**/U)", "{", "float/**/e,v=iGlobalTime*.2,u=sin(v),x,p,o;", "V/**/r=V(U/iResolution.xy-1.,0),z,y;", "F/**/200;)", "if (p/5e3<=x)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(r.x-u,r.y*.3+.1,2)),", "p+=x=z.y+n(z.xz),o++;", "x=n(z.xz);", "O.xyz = .1*(dot(V(-.5),normalize(V(n(z.xz-W(.01,0))-x,0,n(z.xz-W(0,.01))-x-n(z.zx*11.)/5e2)))*", "n(z.zx*6.)*V(1,2,3)+1.+o/50.+log(p));", "", "}", "stduhpf, 2017-05-23but i'm not sure if that work on all machines", "stduhpf, 2017-05-23Ok ,then 588", "#define V vec3", "#define W vec2", "#define S sin(p.x+sin(p.y))", "#define F for(int i = 0;i++<", "", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t;", "", "float g(W p){", "h=abs(S); p*=m;", "return h+S;}", "", "float n(W p){", "p*=.1;", "s=5.,t=.9;", "F 9;) t-=s*.1*g(p), s*=.4, p=p*m*2.1+t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,W U)", "{", "float e,v=iGlobalTime*.2,u=sin(v),x,p,o;", "V r=V(U/iResolution.xy-1.,0),z,y;", "F 200;)", "if (p/5e3<=x)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(r.x-u,r.y*.3+.1,2)),", "p+=x=z.y+n(z.xz),o++;", "x=n(z.xz);", "O.xyz = .1*(dot(V(-.5),normalize(V(n(z.xz-W(.01,0))-x,0,n(z.xz-W(0,.01))-x-n(z.zx*11.)/5e2)))*", "n(z.zx*6.)*V(1,2,3)+1.+o/50.+log(p));", "", "}", "Strum355, 2017-05-23593", "#define V vec3", "#define W vec2", "#define S sin(p.x+sin(p.y))", "#define F for(int i = 0;i++<", "", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t;", "", "float g(W p){", "h=abs(S); p*=m;", "return h+S;}", "", "float n(W p){", "p*=.1;", "s=5.,t=.9;", "F 9;) t-=s*.1*g(p), s*=.4, p=p*m*2.1+t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,W U)", "{", "float e,v=iGlobalTime*.2,u=sin(v),x=.0,p,o=x;", "V r=V(U/iResolution.xy-1.,0),z,y;", "F 200;)", "if (p/5e3<=x)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(r.x-u,r.y*.3+.1,2)),", "p+=x=z.y+n(z.xz),o++;", "x=n(z.xz);", "O.xyz = .1*(dot(V(-.5),normalize(V(n(z.xz-W(.01,0))-x,0,n(z.xz-W(0,.01))-x-n(z.zx*11.)/5e2)))*", "n(z.zx*6.)*V(1,2,3)+1.+o/50.+log(p));", "", "}", "stduhpf, 2017-05-23595 now", "#define V vec3", "#define W vec2", "#define S sin(p.x+sin(p.y))", "#define F for(int i = 0;i++<", "", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t;", "", "float g(W p){", "h=abs(S); p*=m;", "return h+S;}", "", "float n(W p){", "p*=.1;", "s=5.,t=.9;", "F 9;) t-=s*.1*g(p), s*=.4, p=p*m*2.1+t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,W U)", "{", "float e,v=iGlobalTime*.2,u=sin(v),x=.0,p=x,o=x;", "V r=V(U/iResolution.xy-1.,0),z,y;", "F 200;)", "if (p/5e3<=x)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(r.x-u,r.y*.3+.1,2)),", "p+=x=z.y+n(z.xz),o++;", "x=n(z.xz);", "O.xyz = .1*(dot(V(-.5),normalize(V(n(z.xz-W(.01,0))-x,0,n(z.xz-W(0,.01))-x-n(z.zx*11.)/5e2)))*", "n(z.zx*6.)*V(1,2,3)+1.+o/50.+log(p));", "", "}", "stduhpf, 2017-05-23597", "#define V vec3", "#define W vec2", "#define S sin(p.x+sin(p.y))", "#define F for(int i = 0;i++<", "", "mat2 m = .1*mat2(8,6,-6,8);", "float h,s,t;", "", "float g(W p){", "h=abs(S); p*=m;", "return h+S;}", "", "float n(W p){", "p*=.1;", "s=5.,t=.9;", "F 9;) t-=s*.1*g(p), s*=.4, p=p*m*2.1+t;", "return 3.-exp(t);}", "", "void mainImage(out vec4 O,W U)", "{", "float e,v=iGlobalTime*.2,u=sin(v),x=.0,p=x,o=x;", "V r=V(U/iResolution.xy-1.,0),z,y;", "F 200;)", "if (p/5e3<=x)", "z=V(0,-.8*g(W(0,v)),v/.1)+p*normalize(V(r.x-u,r.y*.3+.1,2)),", "x=z.y+n(z.xz),p+=x,o++;", "x=n(z.xz);", "O.xyz = .1*(dot(V(-.5),normalize(V(n(z.xz-W(.01,0))-x,0,n(z.xz-W(0,.01))-x-n(z.zx*11.)/5e2)))*", "n(z.zx*6.)*V(1,2,3)+1.+o/50.+log(p));", "", "}", "spalmer, 2020-05-05wouldn't a = smoothstep(thickness+.5,thickness-.5,d); make more sense?  smoothstep is an awkwardly-parameterized function, indeed.", "hyperknot, 2018-01-31@oll I was wondering the same, but actually it cannot. Try the graph at: https://thebookofshaders.com/glossary/?search=smoothstep", "ollj, 2017-09-01 a = 1.0 - smoothstep(d, thickness, thickness+0.5);", "==", "a = smoothstep(thickness,d, thickness+0.5);", "---", "", "your whole branch is replaceable by", "a = smoothstep(thickness,d+thickness,thickness+.5);", "and thats easily optimized more?", "nokey, 2020-12-04cool", "dila, 2018-04-15pretty", "xjorma, 2019-01-11Add rook antialiasing.", "P_Malin, 2020-12-02The short answer is no.", "", "wave.wavelength = mix( 380.0, 780.0, FRand( seed ) );", "me_123, 2020-11-30Dose it trace iinfrared light?", "yuletian, 2019-06-18awwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww!!!!!!!!!!!!!!!!!!!!!", "nabr, 2019-06-05awww!!!", "cailuming, 2019-02-10@P_Malin It's very useful, appreciate", "P_Malin, 2019-02-09That function takes a wavelength and returns an approximate color in the XYZ color space. You could then perhaps convert from XYZ to sRGB to display it. For example, at the end of mainImage() you can output the color directly:", "", "float wavelength = 680.0f; // 680nm for red light", "vec3 xyz = xyzFit_1931( wavelength );", "float scale = 10.0;", "vColor = XYZtosRGB( xyz ) * scale;", "vColor = pow( vColor, vec3(1.0 / 2.2) );", "", "or to plot the visible specturm:", "", "float wavelength = mix( 380.0, 780.0, vUV.x ); // select wavelength based on screen x co-ordinate", "vec3 xyz = xyzFit_1931( wavelength );", "vColor = XYZtosRGB( xyz );", "vColor = pow( vColor, vec3(1.0 / 2.2) );", "", "You can hear my own explanation of this topic here: https://www.youtube.com/watch?v=EN1Uk6vJqRw", "cailuming, 2019-02-09It seems that I have some misunderstanding over it", "cailuming, 2019-02-09I could not find some color through the function xyzFit_1931(w) at line 405, such as red", "wax78, 2018-10-30Awesome. Hard to converge, but impressive", "yuletian, 2018-06-29pretty", "matt77hias, 2018-04-05Thanks!", "P_Malin, 2018-04-05No, the initial hashing of the seed isn't really required. The randomness had a couple of iterations and that is probably left over from a previous one. I just tried a bunch of different things until it kind of worked. I guess it doesn't hurt to stir up the randomness a bit more.", "", "I added a link in the code to where the HashWang implementation came from. See hash32shiftmult() in http://web.archive.org/web/20071223173210/http://www.concentric.net/~Ttwang/tech/inthash.htm", "matt77hias, 2018-04-04Is it also possible to give a reference to \"HashWang\" for further info?", "matt77hias, 2018-04-04Is the hashing of the original seed (e.g. ApplyGrain) somehow necessarily?", "Shane, 2018-03-10 That light bulb scene is so nice.", "EvilRyu, 2018-03-09wow\uff01", "WillKirkby, 2018-03-07the light bulb is on the other side of the wall", "P_Malin, 2018-03-07Thanks Otavio, yes I should put something more interesting in to show the spectral nature of things. If you fly fairly close to the transparent spheres and look through them at a light you can see they have chromatic dispersion. I was just interested in getting it working. I need to take a break for a while and didn't make much to show that off  in the scene before publishing. The bokeh effect can look really good when turned up too. I'll probably branch this and make some more fun scenes sometime.", "The light bulb was on the other side of the wall - you needed to fly through the wall to see it. I flipped that scene around so it should work from the default camera position now.", "P_Malin, 2018-03-07Yes, greje656 I'd like to mess with the random distribution sometime.", "Mourtz, 2018-03-07same here", "otaviogood, 2018-03-07Also, if I define LIGHT_BULB_SCENE, I just see a wall with a repeating texture in the courtyard env map scene. Maybe a bug? I'm running linux/chrome/nvidia.", "otaviogood, 2018-03-07You beat me to it! Next on my list was to do spectral-style. You can see in my path tracer that I get part of the way there by splitting RGB into R, G, or B when it is needed.", "Question: Why don't you put more things in the scene that will highlight the spectral thing more. Like a prism or gem? I think right now the only thing I see that needs the spectral is the gold? And that can be done with my light-weight style of just doing r, g, or b. Am I missing the point?", "Very nice looking overall, of course.", "greje656, 2018-03-07Looks awesome! Could be cool to add:", "https://www.solidangle.com/research/dither_abstract.pdf", "ThomasSchander, 2018-03-07Beautiful! And interesting code, I'll have to give it a detailed read!", "P_Malin, 2018-03-07With #define LIGHT_BULB_SCENE 1", "P_Malin, 2018-03-07After a while converging it looks more like this:", "uqone, 2019-02-05EDIT: Added a depth based anamorphic 3D effect for red/cyan glasses. Uncomment the USE_ANAGLYPH_3D define line to try it.", "zproxy, 2017-11-29cool", "uqone, 2017-11-27Adjusted it a little, made glows stronger, and added a new WINDOW_MUSIC_BLINK define in Buf A to make windows blink with the music, but disabled by default.", "", "@jt pretty cool ideas, but i'm a hack. The original author might need to do that one", "jt, 2017-11-27Very cool :-)", "It's great, when the camera flies between the buildings!", "I think the city would benefit from removing the empty green patches on the ground.", "Also some street-lights would make it even more real.", "Oh, and how about using the video-textures for advertisments - Blade-Runner style?", "Just suggestions - it's already a very good looking shader!", "ingagard, 2017-11-27it sure made it much nicer", "jt, 2022-01-23How about adding another extrusion function https://www.shadertoy.com/view/sdscDs to the mix?", "jt, 2022-01-23Extremely useful, thank you!", "miloyip, 2018-11-05I found that this operation only works for symmetric shape. Asymmetric shapes, e.g. a cone, will be reflected to the first octant.", "", "A simple fix shall be:", "vec4 opElongate( in vec3 p, in vec3 h )", "{", "vec3 q = abs(p)-h;", "return vec4( sign(p) * max(q,0.0), min(max(q.x,max(q.y,q.z)),0.0) );", "}", "ollj, 2018-11-02try to stretch an uneven bicapsule along all 3 orthoconal axes, without getting confused about some axis stretches having no effect. commutativity constrains mislead intuition on this subset of clamp().", "iq, 2018-11-01@abje, it's pretty easy to fix the interior d=0 volume. I updated elongate(), now ir has proper interior distance all the way inside the core.  You can also see it here in 2D: https://www.shadertoy.com/view/4llXD7.", "abje, 2018-11-01what you need to think about when stretching is that the distance inside the stretched square the same i think, that is why the inside of a box distance field is 0 because it is just a stretched point. don't expect the distance field to be perfectly exact after elongation.", "ollj, 2018-11-01i called this mstretch", "ans i dove deeper into it by not using clamp(), but instead substituting clamp into its components.", "", "because that is how you generalize a concept", "because clamp() doesnt play nice with NaN/Infinity, and to differenciate/catch that, must substitute", "", "elongations is often behaving in unexpected ways.", "Nightshft, 2019-04-28Reminds me of a Thargoid... ;)", "mahdi, 2017-12-07 cool.I'm wondering too", "You are not shader coders. You are a mathematician", "CaliCoastReplay, 2016-08-11So performant!", "chaosink, 2015-07-28It's beautiful! I enjoy looking at it!", "", "And I'm wondering how much math should know to understand the codes, not only the codes of this flower, but also all other codes on shadertoy.", "Flavio, 2014-12-28super cool!", "mla, 2020-06-29@stb: no problem at all. Thanks all for comments.", "stb, 2020-06-28I hope you don't mind, but I took the liberty of posting this to GLSL Sandbox: http://glslsandbox.com/e#65742.1", "stb, 2020-06-28I was wondering how this would look as a step-by-step animation. Nice!", "BigWIngs, 2020-06-28Awesome!", "jeyko, 2020-06-28wow, that's great!", "aiekick, 2020-06-28very cool", "spalmer, 2020-06-28This really helps understand what's going on!", "Antonalog, 2013-11-14So I was walking around the musee Magritte in Brussels the other day thinking all these surrealist pieces would make awesome little ray tracing scenes, glad to see like minds at work!", "P_Malin, 2013-11-12Heh, thanks  It's never too late to <3", "Antonalog, 2013-11-12late to the party, but <3 !", "zz85, 2013-11-01Woo, this is the clock in \"The Persistence of Memory\" http://en.wikipedia.org/wiki/The_Persistence_of_Memory!", "Luther, 2013-03-07Thanks", "robertcupisz, 2013-03-07Cool stuff", "P_Malin, 2013-03-06Luther: Sure, no problem. Have fun!", "Luther, 2013-03-05Lovely! I've made a shader based on your framework, is it ok to publish it (with attribution, of course)?", "ushiostarfish, 2013-03-05aaaaamazingggggggggggggg", "PauloFalcao, 2013-03-01Beautiful!", "Poisson, 2022-12-10Very nice! But this shader could be better with subsurface scattering.", "izutionix, 2020-06-23nice! now do the default cube :P", "jorge2017a1, 2020-06-23that donut feels like eating !!!  ....nice job!!", ".........", "esa dona se antoja comer !!!  ....buen trabajo!!!!", "CaliCoastReplay, 2016-08-11Cinema quality, runs in 60fps even at fullscreen!  Wow!!!!!", "lowww, 2016-01-05Hey, this looks great, I'm going through a couple of examples and trying to figure out how to do the 3D alongside your solid equations, but no far no luck.. any time for a basic youtube tutorial? they help a lot of us starting out!", "PauloFalcao, 2013-03-18Cubemaps! Yes! I have to find some time to play with this!", "playbyan1453, 2022-01-13Try to remap the color to 0-1 range by doing", "pow(col/(col+1.0), vec3(1.0/2.2))", "On line 213, it looks so much better for me.", "ollj, 2017-10-09i used this as an ease-in to BDRF, as it resolves some issues of it for crepuscular misses, and made some minor improvements on a branch:", "https://www.shadertoy.com/view/Ml2cR1", "but mostly just made intersectSphere() faster.", "", "sampleEquiAngular() looks like it can be approximated with all the slerp() approximations, evading some complexity of atan(), or like it can be faster in polar coordinates, centered at the point light source.", "sjb, 2015-04-06No worries!  Yep I vaguely followed path tracing notation here:", "", "geomTerm: the \"geometry term\" for transport between particles/patches A and B.  In general the product of cosine-at-A and cosine-at-B, divided through by the distance squared.  For the point light and particles of the media, the cosine is set to 1.", "", "trans: Transmissivity through the media, i.e. the amount of light that wasn't scattered during the ray segment from A to B.", "wadeb, 2015-04-05Answered my own question, 1/r^2 represents the light energy divided over the surface of an implied sphere with radius r, not \"falloff\" through some medium.", "", "Bear with me, I'm still updating Playstation2 era lighting notions", "wadeb, 2015-04-05Great shader example, thank you!", "", "A silly academic question: in the BRDF, are the 1/d^2 and exp(-SIGMA*d) terms redundant?  What does light falloff mean when lighting factors participating media extinction?", "", "Falloffs are actually pretty similar:", "http://www.wolframalpha.com/input/?i=exp%28-0.3*x%29%2C+1%2Fx%5E2+with+x+from+0+to+20+and+y+from+0+to+1", "", "Thanks again for posting this.", "huwb, 2014-12-26Thanks a lot for this well written shader, I learnt a bunch from it. I'm interested in sampling and I made a simple diagram to understand this. I'll post it here in case its interesting and or useful for others.  4sSSwm", "sjb, 2013-07-04Hey, thanks!  My understanding is you just treat this as flattening the integral for a single light source.", "", "So the trivial way to handle multiple lights would be to pick a light (via some CDF) first, then use a second random variable to pick along the ray for this light using equi-angular sampling.", "", "If you have a lot of overlapping lights, you will probably get better results by multiple importance sampling between equi-angular sampling for all lights to combine all the pdfs.", "", "As noted in the paper, if you have dense (usually meaning non-homogenous) media, you also get better results by still partly sampling using the scattering function alone (and of course use multiple importance sampling to combine with equi-angular sampling).", "iq, 2013-07-03This is seriously cool. I never though of marching the view ray in segments that span the same angle to the light for better sampling. Now, if you have more than one light source... how would they find the importance function (and the pdf)?", "chaosink, 2017-03-09WOWOWOWOWOW!", "Flavio, 2014-12-28Cool!", "Hex, 2014-10-21Very nice visually, also works very well with the sound!", "PauloFalcao, 2014-10-21Really cool!  I love the motion blur, very fast, and is perfectly synchronized with sound.", "Daryashd, 2020-06-15Cool! I  I have a commercial proposal for you, if you're interested - it will be great to cooperate) I represent a company of Belarusian programmers", "heliumsoft, 2017-08-29Very nice effect.", "Can i use your code in commercial?", "ruuki, 2017-03-25Great effect. Thank you.", "", "DISCLAIMER: I am a total OpenGL newbie", "pjkarlik, 2020-11-23Fantastic - I was waiting for the chains and you delivered!", "iq, 2020-11-22Nice one!", "jorge2017a1, 2020-11-22well I miss the hearts !!!! :love love love:", "bueno falto los corazones!!!!", "jorge2017a1, 2020-11-22An excellent scene .... very good ..... entertaining and interesting ... good job.", ".........", "Una excelente escena ....muy buena ..... entretenido e interesante...buen trabajo.", "paniq, 2020-01-16akiki: the target surface doesn't currently have an alpha channel.", "paniq, 2020-01-16[This comment has been hidden by the shader author]", "ollj, 2020-01-08[This comment has been hidden by the shader author]", "akiki, 2019-12-13Is there a way to make the background transparent and let the shapes change the alpha value? I tried using init(...); set_source_rgba(0, 0, 0, 0.5); clear(); blit(out_color); but the surface is just gray-ish.", "reinder, 2019-09-03cool", "paniq, 2017-09-21[This comment has been hidden by the shader author]", "ollj, 2017-09-17[This comment has been hidden by the shader author]", "boulabiar, 2017-09-09Wow this is great!", "paniq, 2017-06-07fixed it, thx to cxw", "poljere, 2016-01-30Nice idea", "paniq, 2016-01-18I also added graph1D(f) and graph2D(f) macros to quickly visualize functions", "paniq, 2016-01-18I added a query interface to be able to test if the mouse is hovering certain shapes (see in_fill() / in_stroke())", "iq, 2016-01-18It's working great now!", "paniq, 2016-01-18finally took the time to fix it; was just a bunch of uninitialized variables", "Zavie, 2014-09-28Tested with Windows/Firefox 32 here: works with native but not with Angle.", "iq, 2014-07-20Chrome 36 just released, which uses DirectX 11 instead of DirectX 9, and the shader still doesn't work", "paniq, 2014-05-17There's actually no real stack in this shader. You just save and restore a struct.", "iq, 2014-05-17Oh Linux, that explains it. Linux and Mac don't implement full GLSL ES I think, they do plain GLSL. I don't know, there's something about this shader that the GLSL to DirectX parser doesn't like. Probably, using as stack is not allowed in GLSL ES...? I can't fully confirm it.", "paniq, 2014-05-17Developed it on Chrome for Linux. No idea what's wrong.", "iq, 2014-05-17I only see a blue background too. Chrome, Firefox and Internet Explorer, the three display only the blue background and nothing more. Did you develop this on a Mac?", "movAX13h, 2014-05-17Works offline but here on Win8/Chrome/ATI no objects are drawn. Blue background only. Thanks for posting this!", "jeyko, 2023-04-17useful", "ttoinou, 2016-11-19Here's what I've done until now : https://www.shadertoy.com/view/Xl3SWN", "ttoinou, 2016-11-06Ok I'm on the path of rewriting nearly from scratch anyway ;) . This new font will help me create a nice UI for a mandelbrot explorer", "danbri, 2016-11-05The original shader hack was mine (basically a \"learning in public\" throwaway experiment), I don't see any problem with re-using it. minimum_distance was scrounged from elsewhere in the Web, maybe ported from http://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment or similar, but the maths has been around since the ancient greeks...", "ttoinou, 2016-11-05Oh great thanks !", "https://www.shadertoy.com/view/XtcXz4", "I'm not finished but it looks promising", "claudiocc, 2016-11-05I'm the original creator of the compact font, feel free to re-use it, no problem on that.", "Dave_Hoskins, 2016-11-04Thanks, it was edited from one I found on glslsandbox like I mention. I don't think anyone will object though - see top page comments.", "ttoinou, 2016-11-04Nice ! Feels like the most compact & beautiful font out here.", "What is the license ? Can I re-use it ?", "CPU, 2013-07-03cool!", "claudiocc, 2013-07-02Amazing!!! GLSL sandbox, shadertoy and the internet! Love it.", "danbri, 2013-07-01And that's why I love GLSL sandbox & Shadertoy", "oneshade, 2021-06-11I think I remember hearing about Boaty McBoatface in my computer science class. Thats the name you get when you let random people on the internet decide lol", "The lighting looks a lot like I'd imagine it to look like underwater!", "Dave_Hoskins, 2019-02-03THanks, changed the video to a launch", "JoshScholar, 2019-02-03;_; the details video is gone!", "Damasko, 2018-01-09Reminds me to the old game \"Subculture\" with very improved graphics, nice!", "Dave_Hoskins, 2018-01-04Just pretty much taken iapafoto's great 'starfield' code for some near camera detritus.", "[uirl] https://www.shadertoy.com/view/Xl2BRR[/url]", "MacSlow, 2018-01-03Pretty good visual-content-to-loc ratio!", "Imsure1200q_1UWE130, 2017-08-04@Dave_Hoskins i felt really confused lol it was also funny.", "", "I wasn't expecting it to be in news :P", "Dave_Hoskins, 2017-08-02@Imsure1200q_1UWE130, Thanks! Also see link in the description to find out who Boaty really is.", "Imsure1200q_1UWE130, 2017-08-02im liquifying today! woohoo! too much water in the ocean so boaty liquifies me ye i like it.", "Boaty McBoatface should be a fish tho. apart from that the shader looks awesome", "reinder, 2017-07-31Very nice lighting and atmosphere. I like it a lot.", "Dave_Hoskins, 2017-07-29Thanks, man! I wondered why the iPad App version was messed up. Unfortunately it was OK on the iMac I tried, ho hum.", "otaviogood, 2017-07-29Typo on line 449.", "fragColor==vec4(0.0);", "Causes fragColor to be uninitialized, which causes corruption on mac/chrome/intel. Only in the black bars on top and bottom though.", "Duke, 2017-07-25Cool!", "Dave_Hoskins, 2017-07-25Thanks. Scattering done!", "Bananaft, 2017-07-25Super nice. Would be cool to add spotlight scattering.", "Shane, 2017-07-25Love it. This captures the mood really nicely.", "flockaroo, 2017-07-24very pretty!", "Klems, 2017-07-24Nice, I had the same idea but you actually did it  Godrays and caustics and all. Looks cool as hell.", "Dave_Hoskins, 2017-07-24", "aiekick, 2017-07-24it work nice now, thanks", "knarkowicz, 2017-07-24Now it compiles for me.", "Dave_Hoskins, 2017-07-24How about now? I'm on a Chrome/Win10/gtx 680 machine. I used to get errors like that, not any more though.", "Dave_Hoskins, 2017-07-24@knarkowicz Thanks man! I don't quite understand what error you're getting though. They should be legal.", "aiekick, 2017-07-24the corrections of knarkowicz is not sufficient for my case", "aiekick, 2017-07-24the thumbaill look cool, but, snif, cant see it, it does not compiling. i get 4 different msg :  div by zero, unable to unroll loop, pow(f,e) not work for negative value, cannot have gradient operations inside loops. (gtx760ti on chrome with angle on win7 64)", "knarkowicz, 2017-07-24Wow!  BTW had to replace texture calls with textureLod( .., 0. ) inside texCube, rays and lighting functions to compile it on Win7/NV/Chrome.", "oneshade, 2021-04-25Amazing!", "CaliCoastReplay, 2016-08-11That's a whole virtual set out of just a cubemap!!!", "Fred1024, 2015-03-12impessive", "Harha, 2015-01-09Holy shit this is amazing dude...", "Dave_Hoskins, 2013-04-22It's almost as if the cube-map was made for this shader! I love the way you've hidden the projection errors into a shaded area, it works perfectly.", "huttarl, 2013-04-19Neat idea, great work!", "fizzer, 2013-04-17Really cool! It's a very convincing effect. I like the shiny floor especially. Also, it was good choice to use raytracing rather than raymarching.", "reinder, 2013-04-17wow, very nice!", "weyland, 2013-04-17this is amazing stuff, I love the idea", "P_Malin, 2013-04-17Thanks. Lol, to be honest I just used raytracing because I thought it would make a change from all this raymarching  I only use the position of the intersection which makes the raytracing code simpler and the scene is quite a geometric so it seemed a good fit.", "PauloFalcao, 2013-04-17WOW! I love this!", "baldand, 2013-04-17Amazing work! Was there any specific reason you chose to use raytracing in this scene rather than raymarching (as in your earlier reprojection shader) - performance?", "CPU, 2013-04-17There's some serious work gone into this! Turned a cubemap into a fully workable 3D scene! Amazing and very impressive!", "ciberxtrem, 2016-01-27Great!! I love it! I was looking for something like this!", "Shane, 2015-12-22I love the swaying grass silhouette against the gradient background. Very artistic.", "v_coda, 2015-09-21Visually very pretty, but needs optimization...", "iq, 2015-09-11Very nice!!", "Dave_Hoskins, 2015-09-05It works OK now! Looks great!", "yibojiang, 2015-09-05Hmm, it works fine on my mac chrome and safari, I will try reducing the loops and cutting some sequences, and find a pc for debug.", "Dave_Hoskins, 2015-09-05Still crashing for me, sorry.", "yibojiang, 2015-09-03Hey, do you have ideas why it freeze the browser? Is that because of compling issue since i got brunch of loops and functions call there ? And  I  will try to fix it, Appreciated !", "iq, 2015-09-03It's crashing the browsers I am trying it into, so I'll put it in draft mode until you find a fix. We can help on that!", "movAX13h, 2015-09-03Running chrome with -use-gl=desktop helps alot on shadertoy.", "yibojiang, 2015-09-03Reduce the value exptLen to 1. in line 19, may help  improve the fps a bit since I make a loop here to do the trail effect of explosion.", "Dave_Hoskins, 2015-09-03Yeah, that works but at very low fps - I have a GTX680.", "yibojiang, 2015-09-03sorry, I havn't optimized it yet, try commenting the line 15 #define playLevel to see if it works.", "Dave_Hoskins, 2015-09-03There huge amount of code (lots of 'for' loops?) is causing this to crash my Windows Chrome.", "yibojiang, 2015-09-03Thanks !", "movAX13h, 2015-09-03Looks very good! So many different patterns and a nice sequence! <3", "jt, 2022-10-12Nice!", "aaronchristie, 2019-04-18Nice", "timandrianovien, 2019-03-29Looks great", "felipunkerito, 2019-03-23Really cool! I've been studying B\u00e9zier and special piece-wise functions called NURBS lately, got to dig into your code now.", "iapafoto, 2019-03-15@Observer the inside is not very accurate. In fact this teapot distance field has been firt created for a kind of  ascii art code golfed teapot", "Observer, 2019-03-15Nice modelling indeed! I removed the morphing part in lines 63-78 and replaced the return statement by: return max(p.z, dTeapot);, just because I wanted to look inside the teapot...", "iapafoto, 2018-03-30@fabrice : it is smaller in 40th ex bezier calculation.", "The geometry is the same but compressed in 40th teapot", "FabriceNeyret2, 2018-03-29is it the same teapot than your \"40th Anniversary\" https://shadertoy.com/view/XsSGzG, or is the data + geometry generation smaller ?", "iapafoto, 2014-06-04Ok iq I ve added a lot of explanations about teapot modeling. Hope it is understandable. I cannot find the good names for front and back part of a teapot. If someone could help !", "iq, 2014-06-04Explain a bit the modeling to us!", "iapafoto, 2014-06-03Thanks Dave !", "", "New test : Square format (Mommy's style)", "Dave_Hoskins, 2014-06-03It looks much better without that bright green box surrounding it. Very nice.", "iapafoto, 2014-06-01based on Utah Teapot", "FabriceNeyret2, 2018-12-09and just for the pleasure of it, the code golfed version down to 159 chars ( from 759 ) :-p", "#define mainImage( O, u )                       \\", "vec2 U = u / iResolution.xy;                \\", "float x = U.x;                              \\", "x =     iTime*.1/x + (iMouse.x + 1.)/1e3    \\", "+ (  x > .75 ? .8                     \\", ": x > .5  ? -.8                    \\", ": x > .25 ? .8                     \\", ":          -.4 );                  \\", "O += 9.*sin( 62.8*( x * U.x + U.y) )", "FabriceNeyret2, 2018-12-09the short version ;-)", "void mainImage( out vec4 O, vec2 U )", "{", "U /= iResolution.xy;", "", "float cameraDistance = 20.,", "linesWeight = 2.,", "verticalSpeed = iTime * 2.,", "rotateAmount = linesWeight / 5.,", "rotation = (iMouse.x + 1.)/1e3 + rotateAmount;", "", "vec2 V = U* cameraDistance;", "", "float uvMultiplier =   verticalSpeed / V.x + rotation", "+ rotateAmount", "* (  U.x > .75 ? 1.", ": U.x > .5  ? -3.", ": U.x > .25 ? 1.", ":            -2. );", "", "O = vec4( 9.*sin( 6.28*( uvMultiplier * V.x + V.y) / linesWeight));", "}", "Fred, 2018-12-09Thanks @FabriceNeyret2, works like a charm", "FabriceNeyret2, 2018-12-08NB: for antialiasing, replace step by smoothstep with blur = 1 pixel width.", "Or, replace mod by 9.*sin() :", "float color = 5.*sin( 6.28*( uvMultiplier * uvXRatio + uvYRatio) / linesStep);", "FabriceNeyret2, 2015-10-22small remarks:", "- sqrt((pf.y-p0.y)*(pf.y-p0.y)) is abs(pf.y-p0.y)", "- mix(st,vec4(0,0,0,0), d) is st*(1.-d)", "- vec3*vec3.xxx*vec3(2,2,2) -> vec3*vec3.x*2.", "- why storing in vec4 if only to use as float ? (sandspecular1,2,3)", "- are the floor really useful ?", "- NB: colors are different in full screen", "", "-> a shorter version:", "void mainImage( out vec4 o,  vec2 f )", "{", "vec2 R = iResolution.xy,  u = f/R;", "vec4 st = texture2D(iChannel1, u);", "float  y = iMouse.y,", "s1 = texture2D(iChannel0, u                ).r,", "s2 = texture2D(iChannel0, u - sin(y*.03 )/R).b,", "s3 = texture2D(iChannel0, u + cos(y*.018)/R).g,", "d = pow(abs(f.y-y)*.003,.6);", "", "o = vec4(.96, .66, .14, 1) +.06*st + .3*(1.-d)*(2.*s1*s2*s3+ st*d);", "}", "Retrotation, 2015-10-22Awesome color choice! Works beautifully for a shoreline  I originally used the Arizona-area desert sands at sunset as color reference. Also, yes, I was trying to imagine this as close as you could potentially get your face in VR.", "", "I would imagine that the reduction of sparkliness would occur with LOD distances. This gradient should be mapped to the player camera versus the normal (fresnel).", "Shane, 2015-10-22If I tone down the sand color a little (vec4(0.9, 0.7, 0.3, 1.0)), it almost has a close-up photorealistic effect... provided I use my imagination a little.", "", "It'd be interesting to see it mapped onto a flat, XZ plane.", "", "Reducing the sparkly diffuse and specular components with increasing distance - especially when using noisy surfaces - was something I learned out of necessity.", "sohale, 2022-06-17Wow", "leniwyDarek8, 2017-11-17Thats great, Thanks", "ned_b, 2017-11-11The Fake Noise Looking Field is Awesome!!", "jt, 2017-11-08cool!", "kuvkar, 2016-05-09really nice indeed!", "dr2, 2016-05-09Even the \"poor man's\" effect looks good.", "Shane, 2016-05-09Thanks for the comments. It's a cute formula and it runs reasonably well, but it still feels like \"poor man's\" transparency.  Either way, I'm hoping someone might get some use out of it.", "", "@aiekick", "I kept the lighting and coloring simple, but texturing, object coloring, surface patterns, etc, are easy enough to add in: Transparent Textured Cubes", "", "@Duke", "Thanks for the heads up. My inbox can be a busy place sometimes, but it's been crazy lately. I need an assistant.", "TambakoJaguar, 2016-05-08Very cool, again. And very fast!", "zackpudil, 2016-05-08Looks awesome! .", "iq, 2016-05-08Oh, nice!!!", "seb0fh, 2016-05-08i like it!", "dila, 2016-05-08really nice, makes me think of being inside a CPU kinda", "Duke, 2016-05-08Very cool! By the way, last emails which I sent returns with errors. It seems that your mailbox is full.", "aiekick, 2016-05-08pretty, but can you add other color ?", "jt, 2017-06-30Cool!", "FlashyTheCreeper, 2017-03-05wow!", "Imsure1200q_1UWE130, 2016-11-02PI = asin(1.)*2.", "Imsure1200q_1UWE130, 2016-11-02at first, sigma means sum it up in math so ya", "sparrow, 2016-11-02Thanks for this!  Great code.  I made a copy of it and added continuous timestepping, check it out: https://www.shadertoy.com/view/lt3SRH", "akohdr, 2016-05-13mipmap on BufA/iChannel1 texture preventing startup", "Flexi, 2016-01-24Now this looks super to start with!", "iq, 2016-01-22Super cool  Looks way better than the one I was cooking (less scientific that this one)", "Dave_Hoskins, 2016-01-22Looks great! It's alive!!!", "I get a really odd reset though, and it only seems to start properly with a mouse click.", "P_Malin, 2016-01-22Awesome, I was hoping someone would implement this", "Shane, 2016-01-22So cool. Evolving state automata, or whatever the technical name is. I was hoping someone would do one of these.", "antonOTI, 2016-01-22neat", "Duke, 2021-03-06I just want to keep the original shader functionality.", "FabriceNeyret2, 2021-03-06I was more interested in the top cover, but funny inside too ;-)  \u2192 thanks !", "BTW, why a define, as long as not touching the mouse let the demo intact ?", "( you already considered mouse.x, even with the define off ;-) )", "Duke, 2021-03-06@FabriceNeyret2 Added MOUSE_CONTROL define.", "FabriceNeyret2, 2021-03-05BTW, could mouse.y please tune the other angle ?", "MacSlow, 2021-03-05\"OMG, it's so fluffy! I'm gonna die!\"", "greje656, 2018-01-04gorgeous x 10!", "KylBlz, 2016-05-09looks really nice", "Shane, 2015-11-16Mutated layers of sinusoidals are pretty useful when you're in need of a cheap, random looking surface. They get a bit repetitive at high frequencies, but they make good base layers.", "Duke, 2015-11-15Thank you for your feedback, but I am not the author of this noise. All credit goes to otaviogood. As he said it works by successively adding and rotating sin waves while increasing frequency and it was inspired by IQ's \"Terrain Tubes\" shader.", "About animations - I experimented with it a bit, interesting animation patterns can be achieved with changes in sin/cos part of the noise.", "FabriceNeyret2, 2015-11-15may you explain a bit your \"spiraling noise\" ? what is spiraling how, what are the handles to control it, could it be interestingly animated ?", "Thanks !", "Duke, 2015-11-15Thanks", "834144373, 2015-11-15Wow...!I want to fly...", "FabriceNeyret2, 2015-11-14how good !", "Zavie, 2013-10-14On the thumb I totally thought it was a croissant.", "GregRostami, 2013-09-24STUNNING!!  iq is my HERO!", "Antonalog, 2013-09-24at 12.39 it looks like a croissant!  mmmmm..", "Cesium_137, 2022-11-28nvm already did it https://www.shadertoy.com/view/dslSDj", "Cesium_137, 2022-11-28you should add asteroid field, pylon palace, expressways, lilypads, and fatal fissures", "jt, 2022-01-16I love this fractal game! Amazing levels", "01000001, 2021-06-01Apple's policies are pretty infuriating.  In the latest update they just stopped supporting OpenGL which almost everyone uses.  Apple's policies are horrible for indie devs as well as the end consumer.  I want to clarify, Marble Marcher Community Edition i think does work on macOS but you have to compile it manually for macOS and I need sudo access to install the things necessary for the compiling to work (CMake and things like that)", "ttg, 2021-06-01More fundamentally: Apple Computer is upholding archaic notion of a distinction between \"code\" and \"content\" - haha!", "ttg, 2021-05-31I never meant they should give anything away.  As-is they simply refuse to consider small software projects which would never make them or the authors any money anyway.  Obviously their model is worth much more to them than the miniscule value-add to their ecosystem of having small interesting demos natively installable - so what, there are other platforms.  It's a wonder anyone here cares about MacOS compatibility.", "Zi7ar21, 2021-05-31If only Apple would throw away their proprietary ecosystem business model, the world could really benefit from one of the largest companies...", "ttg, 2021-05-31@Zi7ar21, makes sense.  If only Apple would sign a sandbox-like host program that's not a whole web browser... Of course they won't.  At least there is web to have some freedom of software distribution at all.", "michael0884, 2021-05-30@ttg, he was talking about marble marcher community edition, which does not work on Mac", "Zi7ar21, 2021-05-30I think he was talking about Marble Marcher Community Edition", "ttg, 2021-05-30@01000001 You don't need superuser to run a WebGL2 capable browser on that OS.", "Some compatibility issue unrelated to WebGL2 was fixed?", "Zi7ar21, 2021-05-30Oh no it works on MacOS! Michael, you need to fix this.", "01000001, 2021-05-30Awesome, finally this is available for the average user (or user without sudo) on macOS!", "michael0884, 2021-05-12@oneshade, thanks!", "oneshade, 2021-05-12Small optimization: (line 202) inverse of orthonormal basis is equal to the transpose (no +, -, *, / needed).", "ttoinou, 2021-05-02Awesome ! Next game : Super Monkey Ball Fractal", "gerardwensink, 2021-04-13Holy sakkamoto!", "michael0884, 2021-03-08@Qendolin, you can install the unofficial shadertoy plugin and change the resolution scaling using number keys", "Qendolin, 2021-03-08Wow, amazing. Sadly unplayable with < 15 fps  wish you could add a potato mode.", "sig, 2021-01-28Oooooh... so you CAN get keyboard input, huh     epic, I'll have to make my past fun minigame experiments in shadertoy now. No more Unity required, yay! That said, a better text editor would be pretty nice, something like https://github.com/Microsoft/monaco-editor, maybe it could be a selection on the profile page...", "", "Main annoyance for me has been that things aren't \"auto-saved\" and sometimes you hit the save button and it's still not saved (lost some work because of that yesterday). Maybe keeping all code in localstorage to avoid that would be great. But like rough edges aside, Shadertoy could really be the best shader playground IDE", "michael0884, 2021-01-25Yes, you can technically use screen space ray marching to do so, but that only work's for a static scene.", "You can technically use a rasterizer to reproject it directly with velocity vectors, but we're in shadertoy, so that is out of question", "michael0884, 2021-01-25@jarble, how would you reproject without knowing the point you are reprojecting to in the first place?", "jarble, 2021-01-25It might be possible to optimize the raymarching here, using the reproject() function to estimate the distance in the next frame from the distance in the previous frame.", "Zi7ar21, 2021-01-25[This comment has been hidden by the shader author]", "Zi7ar21, 2021-01-24lol", "michael0884, 2021-01-24It seems that the text rendering will need some optimization anyway...", "michael0884, 2021-01-24UPDATE: Level menu now works!", "michael0884, 2021-01-23AO strength can be regulated in the ambitrace function in bufB", "smoothstep(0.0, AO_angle, angle)", "michael0884, 2021-01-23Buffer B has partial gamma correction, tho not 2.2 but like 1.5, otherwise its kinda desaturated, I like the colorful cool", "ttg, 2021-01-23Is there gamma correction somewhere?  The AO looks dark and heavy, either like wrong gamma or maybe intentional exaggeration, but nonphysical nonetheless.", "michael0884, 2021-01-23@kastorp, btw, I was planning to add animated fractals, but that requires computing velocity vectors for the TAA(which is kinda complicated), otherwise its blurred as in your fork.", "michael0884, 2021-01-23@kastorp, yeah to make rotation visualization I need to add quaternions here, will need to mess around with that in the future", "kastorp, 2021-01-23yes the key is the same, but compared to last week,  it seems to me that  now E key unzooms faster, so there is time to adjust zoom before timer starts", "Zi7ar21, 2021-01-23The pulsating fractal is cool, that was a feature in the original game which is proving hard to implement properly because of reprojection and stuff", "Zi7ar21, 2021-01-23E and Q are the same as before", "kastorp, 2021-01-23Michael, here is my little unlisted mod to make fractals pulsating and increase game  longevity", "https://www.shadertoy.com/view/3lGyRc", "Hope you like it... and in case feel free to add it!  (as an optional feature)", "kastorp, 2021-01-23new behaviour of E key is very useful...  now cheat keys: show flag distance and restart from last hit position", "I'd love also seeing ball rotation (tangent velocity on last hit)", "and last, a random level generator", "michael0884, 2021-01-23[This comment has been hidden by the shader author]", "ttg, 2021-01-23In the last level: It's possible for the marble to climb if pushing into a space between vertical edges that is not quite wide enough to fit through.  Interesting.", "michael0884, 2021-01-23yeah, perhaps I should do a marble unintersection at level load then", "ttg, 2021-01-23I noticed in several of the levels the marble starts out somewhat intersecting the terrain, causing noticeable camera jump when the physics starts.", "michael0884, 2021-01-23jarble, interesting catch. fixed that", "jarble, 2021-01-23iChannel1 is also unused in the \"Image\" buffer.", "jarble, 2021-01-23The framerate seems to improve when I remove iChannel0 (which is unused) in Buffer B.", "michael0884, 2021-01-22UPDATE: PBR rendering. PBR path tracing with transparency support", "michael0884, 2021-01-22The performance seems the same on my side.", "Zi7ar21, 2021-01-22Michael what did you do it is slow now", "ttg, 2021-01-22(I thought it was the same before going inside).", "ttg, 2021-01-22Yes, but missing some details.", "michael0884, 2021-01-22its basically the same one from fractal dimension explorer", "ttg, 2021-01-21Love the new level!  ;-)", "michael0884, 2021-01-21UPDATE: Added free camera mode on F key.", "Zi7ar21, 2021-01-20pyoggers", "michael0884, 2021-01-20Added level transition buttons", "P - next level", "O - previous level", "michael0884, 2021-01-20Oh, seems that removing the gamma correction from the PalYuv encoding does the trick", "michael0884, 2021-01-20Yeah, seems the color component is not clamping there, so you get weird color trails, not sure how to fix that without reducing TAA", "ttg, 2021-01-20There is some kind of desaturation following the shadow around, although the rendering is crisp there.", "michael0884, 2021-01-20UPDATE: adden neighborhood clamping to the TAA implementation, should reduce shadow smearing", "michael0884, 2021-01-19Yep I should add auto restart after fall", "oneshade, 2021-01-19I fell off the edge! The cubemap makes it look like I'm stationary and the island fractal thing is flying off into the sky XD", "IWBTShyGuy, 2021-01-19Wonderful...", "flockaroo, 2021-01-19cool!", "michael0884, 2021-01-18ttg, perhaps, not sure when will be the next time I'll work on something like that though. I will probably use this shader (marble marcher) to build onto and make more cool interactive fractal stuff.", "ttg, 2021-01-18Here it is https://www.shadertoy.com/view/3lycWD", "It's super janky, I forgot how bad it is.  You could probably do a much better job.", "michael0884, 2021-01-18ttg, posting that might be interesting", "michael0884, 2021-01-18In level 3 you need to fall into the hole", "FabriceNeyret2, 2021-01-18cool !  in didn't know this fractal marble madness :-)", "( in #3, where is the flag ? )", "", "\u2192 147th shadertoy game ! https://shadertoyunofficial.wordpress.com/2017/11/11/playable-games-in-shadertoy/", "Zi7ar21, 2021-01-18Oops", "How do I delete my own comment", "I guess the solution would be in the video anyway", "ttg, 2021-01-18: spoiler : below", "Zi7ar21, 2021-01-18@kastorp awesome! where is the flag in level 3?", "Go forward and into the hole in the center, you need to fall a distance and touch it", "Zi7ar21, 2021-01-18I did a speedrun... Not very fast but it is good to be the first.", "kastorp, 2021-01-18awesome! where is the flag in level 3?", "oneshade, 2021-01-18Awesome!", "ttg, 2021-01-18Hi Michael, this reminds me, I have an offline copy of your Fractal World Explorer with gravity and some collision tweaks to be able to walk around on the fractals.  I could share that here if anyone is interested.", "michael0884, 2021-01-18Restart works on my machine on all levels", "michael0884, 2021-01-18the jump I mean", "michael0884, 2021-01-18nope, the original didn't have it", "jarble, 2021-01-18I pressed the \"R\" key on the second level, but the level didn't restart.", "Zi7ar21, 2021-01-18path tracing pog", "jarble, 2021-01-18Is there a \"jump\" key?", "Zi7ar21, 2021-01-18[This comment has been hidden by the shader author]", "Zi7ar21, 2021-01-18", "YINZIYUAN, 2019-07-18fun!", "jeyko, 2019-07-18so awesome!", "lsdlive, 2018-04-19Thank you iq !", "iq, 2018-04-16Very good!", "lsdlive, 2018-04-10Thank you shau", "shau, 2018-04-08Cool shader", "lsdlive, 2018-04-08Thank you guys !", "834144373, 2018-04-08Cool music with the scene!", "EvilRyu, 2018-04-08wow, very speedy, I like the snow", "aiekick, 2018-04-08very nice", "ocb, 2018-04-07code is quite short.", "ocb, 2018-04-07Cold and snowy.", "Nice!", "juliomerisio, 2022-12-26Love it", "trisant, 2022-06-05Thanks for de-mystifying raymarching. great stuff!", "larserik, 2022-06-01Thanks a lot for this.", "The camera and initial ro would behave way better with this on line 76:", "", "if (m.x > 0. || m.y > 0.) {", "m -= .5;", "}", "BigWIngs, 2021-09-14This is due to 'gimbal lock' (google it). It happens when your view direction is parallel to the 'up' vector on line 63. Most of the time you can avoid it by choosing this vector appropriately. If your application really needs cameras in all possible orientations then you could look into other methods for rotating things, like quaternions.", "warpGooblin, 2021-09-14something confuses me regarding the rotation around the x-Axis (line 77):", "[code]ro.yz *= Rot(-m.y*3.14+1.);{/code]", "", "when i change the value for the rotation function to iTime the cube flips every so long instead of smoothly rotating. can someone explain this behaviour around the x-Axis to me ?", "spalmer, 2021-07-24Right-handed systems boggle my intuition in a similar way, used left-handed system for a long time now.  Anyway it's a holy war that's not winnable.  Seems prudent to develop intuition for arbitrary coordinate basis instead of relying on special cases.", "sylvain69780, 2021-07-23Yes I know understand by reading this page.", "During my studies, I only leart the right handed.", "spalmer, 2021-02-27yeah but not everybody uses the same coordinate system conventions", "sylvain69780, 2021-02-26This is fixed if I'am not wrong by changing", "r = normalize(cross(f,vec3(0,1,0) )),   // right vector", "u = cross(r,f),", "sylvain69780, 2020-11-18left instead of the right sorry", "sylvain69780, 2020-11-18What is confusing me is the X is pointing to the right", "sylvain69780, 2020-11-18Is the coordinates system orthonormal ? Sorry newbie question.", "BigWIngs, 2020-02-27sure!", "spalmer, 2020-02-27gamma?", "iapafoto, 2020-11-10@oneshade : a super readable version is available here Readable version", "iapafoto, 2020-11-10[This comment has been hidden by the shader author]", "oneshade, 2020-11-10Amazing! The ASCII art makes the code impossible to read but that's just the way code ends up when it gets golfed I guess", "felipunkerito, 2019-02-24Just like the original... No interior. Love it!", "ingagard, 2017-09-02This is fucking talent! (and STYLE) ;-)", "coyote, 2017-03-16-11 chars, instead of P=W(sqrt(dot(P,P)-P*P).y,P.y,0);P.xz/=N(P.xz); P.z=0.;", "iapafoto, 2017-03-16Well done Coyote !", "coyote, 2017-03-16-2 chars P.y*P.y -> P*P and move .y outside of the sqrt:P=W(sqrt(dot(P,P)-P*P).y, P.y,0);", "coyote, 2017-03-16-2 chars://p=(p+p-r)/r.y;  //inline within length in next line", "o=o-o+.8-.3*length(p=(p+p-r)/r.y);", "coyote, 2017-03-16-3 chars:o=mix(o,.4*(Y*max(z+z,0.)+Y).grbb+pow(...", "coyote, 2017-03-16Yes it is.", "iapafoto, 2017-03-15Thanks a lot Coyote !", "Is it better now ?", "coyote, 2017-03-14Totally corrupted on mac mini because of reusing K within loop with a call to B which also touches K:", "G(7) K=min(K,(B(i+i)-2.)*.7);", "", "2ch longer Workaround: add another global variable, for example a:", "float K,a,t,z=0.;", "...", "a=min(min(B(15),B(17))-6.,max(P.y-50.,min(abs(B(20)-7.)-1.,B(22)*(.25+.75*K)-8.)));", "G(7) a=min(a,(B(i+i)-2.)*.7);", "return a;", "", "Another problem on mac mini because of \"o+=X-o;\"", "1ch longer workaround for mac mini:", "o=o-o+.8-.3*length(p);", "", "...or 3ch longer workaround which is possibly also super safer if residual o happens to be NaN:", "o=vec4(.8-.3*length(p));", "iapafoto, 2017-03-071310 => 1140 ch", "or 1137?? Inside Teapot", "iapafoto, 2017-03-05Redesigned for WebGL 2.0", "iapafoto, 2017-03-03No, just by typing it on shadertoy editor", "starea, 2017-03-03I see lol, did you generate the ascii art via custom software?", "iapafoto, 2017-03-03it works well but I have to redesign the asciiart now !!!", "starea, 2017-03-02Lov'it! BTW, it works well with WebGL 2.0", "aiekick, 2016-11-12@coyote, what is this minimizer you speack about ? its your soft ? what is the principle ? let compile the shader by driver, and reinterpret the byte code ?", "iapafoto, 2016-10-141310 thanks to Bezier codegolf of 834144373", "iapafoto, 2016-08-18Ho I just realized that I forget to thanks [url=https://www.shadertoy.com/user/FabriceNeyret2]FabriceNeyret2[url] for it's huge contribution on reducing this code.", "iapafoto, 2015-11-23Coyote you are a master !", "coyote, 2015-11-22Line 15: sqrt(dot(r,r)+P.z*P.z) -> sqrt(dot(r,r)+P*P).z (2 chars, hopefully not slower since it's parallel)", "coyote, 2015-11-22That first one is Y/1e3 not 1e2.", "coyote, 2015-11-22Just some trivial size optimizations:", "line 10: E=Y*.001 -> E=Y/1e2 (1 char)", "line 20: vec2 x -> V x (3 chars)", "line 20: V(201616.,40100.) -> 401e2 (1 char)", "line 22: pow(100.,F -> pow(1e2,F (1 char)", "line 22: p=(2.*x-r)/r.y -> p=(x+x-r)/r.y (1 char)", "iapafoto, 2015-11-22Thanks again Coyote : Win one more by tring to find differences with 140 char version !!      The readable teapot is up to date now", "iapafoto, 2015-11-22Thank you for trying Coyote !... perhapse I have to launch a \"Teapot chalenge\" to reduce it more !", "coyote, 2015-11-22Uh, this is awkward... I saw your comment that you made it in 1400, then I run your code through my minimizer and got 1362 so I thought I was going to cheer you up. I even put my minimized source into the shadertoy editor to check if it is correct, and it was.", "Unfortunately (sigh) I didn't check the shadertoy counter neither before I copied the original code nor before pasting the minimized code into it so I was blissfully unaware of the current length of your code...", "Anyway, it probably seemed to you as if I was a smartass or something pointing out that your beautiful shader is 1 char longer than reported. Sorry... My mistake.", "", "Btw, that difference of 1 char is because of a bug in shadertoy counter which happens when return is followed by a newline before actual value which is returned. You have such case in lines 14 and 15.", "(it's the same bug because of which newlines are not properly counted after using macros, after variable types, and after struct keyword)", "iapafoto, 2015-11-22yes, I read 1361 ? The version in 1400 is in an readable version here :", "https://www.shadertoy.com/view/4sSGRy", "I cannot find the differences !!!", "And if you have some ideas to reduce it please help me !", "coyote, 2015-11-22iapafoto, are you aware that your shader is actually 1362 chars long?", "coyote, 2015-05-23", "iapafoto, 2015-03-191400 with new main() !!! :/", "fizzer, 2014-12-31Keep going!", "iapafoto, 2014-12-1818/12/2014 => 1345", "iapafoto, 2014-12-1717/12/2014 - Remove ugly background => 1360", "iapafoto, 2014-06-0909/06/2014 => 1380 (+add 8 accolades for firefox compatibility  )", "iapafoto, 2014-06-0908/06/2014 => 1382", "iapafoto, 2014-06-0606/06/2014 => 1395", "iapafoto, 2014-05-2727/05/2014 => 1471 (+ best rendering)", "iapafoto, 2014-05-2525/05/2014 => 1535", "iapafoto, 2014-05-2424/05/2014 => 1558", "iapafoto, 2014-03-03Removed... end of the game !", "iapafoto, 2014-02-25Thanks asalga ! There is something hiden under the teapot but I think nobody have seen it yet !...", "asalga, 2014-02-25Oh come on!!! That's just insane!", "iapafoto, 2014-02-099/02/2014: 22% smallest", "iapafoto, 2014-01-27Antonalog, very nice camel !", "fizzer, in fact it is squashed because gedit use a quite different caracter policy !", "fb39ca4, here is a understandable version", "Understandable Teapot", "fb39ca4, 2014-01-27There's banding in the shadows. If you could provide a readable version, I could try and fix it.", "fb39ca4, 2014-01-27There's banding in the shadows. If you could provide a readable version, I could try and fix it.", "fizzer, 2014-01-25Wow, 40 years... This shader is awesome! =D I like how the code looks slightly squashed vertically, just like the original model.", "Antonalog, 2014-01-21pretty sweet, reminds me of the perl script that looks like a camel to print more camels http://www.perlmonks.org/?node_id=45213", "revers, 2014-01-18Haha! Killer idea with code formatting!", "iapafoto, 2014-01-15   Steam corrected Eiffie !", "eiffie, 2014-01-15lol@Dave but seriously there is a bug in lines 6 thru 38. I you add a couple tabs to each the steam will rise at the correct angle.", "iapafoto, 2014-01-15https://www.shadertoy.com/view/4sSGRy", "iapafoto, 2014-01-15Thanks !", "I have a smallest version at 2000 chars but really unreadable with only one characters for each variable and function names and thinks like :", "", "#define F for(int i=0;i", "=> F<10;i++){...}", "", "... but too huggly !  ;)", "Dave_Hoskins, 2014-01-15It looks like effie's coding style! Just kidding eiffie . It's proper old school obfustication, very cool.", "iq, 2014-01-15What the...", "bioccular, 2014-01-15Nice!", "WouterVanNifterick, 2014-01-14Haha, cool!  Utah teapot on the left, and Russell's celestial teapot on the right of my screen.", "iapafoto, 2014-01-14Ok, it was just a pb with :   x=(cond)?y:z;  => replaced by  x=z;if(cond)x=y", "iapafoto, 2014-01-14:-) humm... it works on linux I remove it and try to debug on windows...", "Dave_Hoskins, 2014-01-14It doesn't work on Windows, and I'm not debugging that!", "iq, 2014-09-24Looks awesome", "TekF, 2014-09-15Pretty!", "Sluggernot, 2014-09-13Using the checkerboard texture gives it a shaved ice look.  I really like the effect.  Nice surface with sub surface specular virtualization going on.", "Kewl, 2018-06-17Used as a mask in this: https://vimeo.com/269021650", "Gulum, 2018-06-08Love it", "Kewl, 2018-04-26Hi k_mouse, thanks for the reply. I'll try to rephrase. Since I don't want the darker center, I was wondering if some lines in the fragment could be deleted or edited to skip the calculations related to the darker center, just to save some \"GPU cycles\". If it's not possible, it's OK...", "k_mouse, 2018-04-26Kewl: Not sure exactly what you are asking here. You probably want:", "float clearness = 1.0;", "You could also modify the foaminess function. To increase performance, try reducing MAX_ITER to your liking.", "Kewl, 2018-04-24Since I don't code, sorry for the noob question, but if I wanted to remove the center, what lines could I delete? I figured that in line 38, I can put 0s in there", "", "float clearness = 0.1 + 0.9*smoothstep(0, 0, dist_center);", "", "but if wanted to save some calculations, what could I delete?", "", "Thanks!", "iq, 2016-11-23Very beautiful!", "BigWIngs, 2016-11-23Looks beautiful!", "404Glaciergargamel, 2021-03-05Now this is my most viewed shader!", "FrickHazard, 2019-04-08Picture of Shader after 79,230 seconds.  https://imgur.com/mOL76zs I left my computer on this over night", "terkel, 2018-04-14Super clean code! Thanks", "fanziqi, 2016-06-17beautiful", "meta, 2015-11-28Love this shader.  an electric enso...", "I have also learned a lot from @FabriceNeyret2", "It seems that more examples can only enhance learning.", "DelvarWorld, 2015-10-24It's so refreshing to see someone put time and effort into writing high quality shader source code, with readable variable names, good spacing, and comments. Shaders can be great teaching tools, but if you write code like @FabriceNeyret2, it destroys readability and removes the benefits of shaders for no benefit. Too many ShaderToy shaders lose teaching potential because authors try to squeeze code into hand-compiled blocks for no practical reason. Thank you for this!", "tly, 2015-10-24i really like what you do  maybe im in that category too", "FabriceNeyret2, 2015-10-23I'm sure people would be less interested if I proposed a code lengthening instead. :-p", "", "BTW I feel that this kind of cool effect has some sort of look that can have and deserve an ultra-short shader. A kind of technological poetry with code in harmony with the moving image. (ok, I know, there's probably a psychiatric category for that sort of feelings :-p )", "tly, 2015-10-23fabrice squeezing code like always", "CPU, 2015-10-23cute!", "poljere, 2015-10-21Beautiful!", "phil, 2015-10-21thx", "@fabrice yeah that's damn short! nice", "iq, 2015-10-20So peaceful", "FabriceNeyret2, 2015-10-20-37 chars:", "float t = iGlobalTime, l,  r = .35;", "", "float P (vec2 u, float w) {", "vec2 c = .5-u;", "l = length(c);", "c = sin(c/l*5.+t*2.)/1e2;", "c = smoothstep(r, r+w, l+c.y-c.x+vec2(w,0));", "return c.x-c.y;", "}", "", "void mainImage( out vec4 o, vec2 u )", "{", "u /= iResolution.y;  u.x = u.x*.85 - .25;", "o =   P(u,.01)", "+ P(u, .1) * vec4(u*=mat2(l=cos(t),t=sin(t),-t,l), .7-u.y*u.x, 1) ;", "}", "FabriceNeyret2, 2015-10-20shorter ;-)", "float C,S, t = iGlobalTime, l,", "r = .35; vec2 c = vec2(.5);", "#define R  mat2(C=cos(t),S=sin(t),-S,C)", "", "float P (vec2 u, vec2 c, float w) {", "l = length(c-=u);", "c = sin(c/l*5.+t*2.)/100.;", "c = smoothstep(r, r+w, l+c.y-c.x+vec2(w,0));", "return c.x-c.y;", "}", "", "void mainImage( out vec4 o, vec2 u )", "{", "u /= iResolution.xy;  u.x = u.x*1.5 - .25;", "o =   P(u,c, .01) + P(u,c,  .1 ) * vec4(c=R*u, .7-c.y*c.x, 1) ;", "}", "aiekick, 2015-10-20nice", "Dave_Hoskins, 2016-08-21It's fast here on a GTX 680. What do you mean? I need ~120 frames to render the buffers because shadertoy starts before the texture are loaded sometimes for some reason. I wish they'd fix it.", "ollj, 2016-08-20buffer overkill. too low framerate for what it shows.", "dila, 2016-08-13such a beautiful scene!", "Dave_Hoskins, 2016-07-21Sorry, I didn't see you meant 3 seconds to switch.", "FabriceNeyret2, 2016-07-21I mean, the human needs at least that to click on the fullscreen button.", "FabriceNeyret2, 2016-07-21well, at 60 fps 200 frames is just 3\" !", "Dave_Hoskins, 2016-07-21Not enough room in the description so I put in the first post and at the top of code comments.", "Interesting, 200 frames? I don't quite understand, why so many?", "FabriceNeyret2, 2016-07-21ok, cool (you should state it in the description).", "NB: I usually allow 200 frame, i.e. about 3\", to let the use switch at the beginning.", "In my recent Lemmings implementation I do that at the beginning of each new world.", "Dave_Hoskins, 2016-07-21You'll need to click the screen to rebuild the terrain when changing resolutions, including full screen.", "It builds for 10 frames at the start, just in case Shadertoy skips a few frames, like I've seen before.", "FabriceNeyret2, 2016-07-21nice, but really strange in fullscreen.", "-> may you use a trick (magic key or 3\" delay at start) to let the use go fullscreen then do the precomputations ?", "Dave_Hoskins, 2016-07-17Cheers. The music is in BufA's SoundCloud slot.", "pix, 2016-07-17Very rich land and sky. Where does the music come from?", "aiekick, 2016-07-16", "Dave_Hoskins, 2016-07-15Thanks! @KylBlz - I've run out of buffers/textures.", "KylBlz, 2016-07-15Damn nice! Running decently fast for visual complexity too. You might be able to cram some motion blur in there", "poljere, 2016-07-15Works great on Linux+Chrome+M6000!", "Duke, 2016-07-15Awesome!", "flockaroo, 2016-07-15wow, awesome! and even performing like hell.", "Dave_Hoskins, 2016-07-15The clouds have now been fixed and are back-lit when you're facing the sun.", "Dave_Hoskins, 2016-07-15Thanks for the catch, just 'in' will do.", "coyote, 2016-07-15Beautiful!", "Btw, mac mini also needs the change Fabrice pointed out. (line 146: inout vec3 r0)", "FabriceNeyret2, 2016-07-15image : line 146 : out -> inout vec3 r0.", "FabriceNeyret2, 2016-07-15-> usual suspects:", "- never negative parameters to pow, log, sqrt", "- be sure out is not used for inout", "- avoid mod(x,0)", "- never count on implicit initialisation of variables and out params.", "- clamp API is clamp(v,min,max),  not min,max,v.", "FabriceNeyret2, 2016-07-15on linux chrome I don'r see any landscape. just motion within a kind of noisy blue sphere with octants borders marked either by black or white.", "otaviogood, 2016-07-15I'm also getting noise on Linux/chrome/nvidia TitanX.", "poljere, 2016-07-15Same here, I only get noisy pixels OSX/Chrome and a GT 750M.", "Shane, 2016-07-15 Gorgeous visuals. The DOF and volumetric clouds really make a difference. I'm always amazed at how many things you're able to pack into a shader and still keep the frame rate up.", "knarkowicz, 2016-07-14Tasty lens flare. Well done. You really turn up the heat on competition", "Passion, 2016-07-14Really liking the sun flare and clouds in this!", "pellicus, 2016-07-14noisy pixels on mac book pro retina mid 2012 on aNVIDIA GeForce GT 650M 1024 MB !", "but i'm sure it's awesome , Dave is one of my favorite shadertoy  player!", "kuvkar, 2016-07-14awesome!", "wjbgrafx, 2016-07-14So amazing! and the music adds a lot.", "iq, 2016-07-14Very good, Dave_Hoskins never disappoints!", "Dave_Hoskins, 2016-07-14If you resize the window or go full screen you must mouse-click it to reset the buffers.", "jeyko, 2020-12-17this could be quite cool pathtraced", "zproxy, 2020-12-10cool. needs a mirror version too", "Shane, 2020-11-15Classy.", "ciberxtrem, 2016-03-10Very cool!", "hat, 2014-07-21thanks!", "iq, 2014-07-20Nice", "hat, 2014-04-03thanks!, your shader is quite impressive and inspiring.", "simesgreen, 2014-04-03Impressive! Looks much softer than my version.", "zguerrero, 2019-05-22ok thx for the info, good to know", "jeyko, 2019-05-21hm, weird! Must depend on card. The exact same artifacts appear for me if filter is set to \"mipmap\" on other shaders as well. RX480.", "zguerrero, 2019-05-21thx jeyko, i don't see any difference on my side, maybe it depends on the graphic card? anyway i setted it to linear.", "jeyko, 2019-05-20Nice, artifacts are gone if you put the filter of the texture on buffer A on \"nearest\"/\"linear\"", "rs, 2017-04-28Love it!", "ollj, 2017-04-02using blur and glow, linearly scaled by vignet to hide overstepping cases, i see. essential when displacing by normal maps of unknown lipschitz.", "", "in the end you use 3 buffers only to blur something and a 4th buffer to mix with blur. so much afford to patching simplicity.", "lexmar, 2017-03-30wow", "BigWIngs, 2017-03-29Super cool!", "zguerrero, 2017-03-29@stduhpf, i can't see the artefacts you are speaking of, i have only windows machines to test the shader, and tested it with chrome/firefox. if anyone have any idea about this, let me know!", "EntityBlack, 2017-03-29Zergs are back! O.o", "PauloFalcao, 2017-03-29WOW!", "bloodnok, 2017-03-29You should get that checked out.", "barakooda, 2017-03-29creepy organic feel!", "well done.", "stduhpf, 2017-03-28Nice. But i have some wierd artifacts, like if there were some NaNs somewhere. But I'm too lazy to debug.", "zguerrero, 2017-03-28Hey! thx every one for the nice comments!", "Klems, 2017-03-27Eeew! This looks disgusting.", "Shane, 2017-03-27Nice. Your shaders are always interesting.", "kuvkar, 2017-03-27looks great!", "FabriceNeyret2, 2017-03-27nice !", "wouldn't it be more anxiogen by zooming in ?", "iapafoto, 2017-03-27fantastic!", "iq, 2017-03-27Oh wow, one of the best shaders ever!", "aiekick, 2017-03-26wow, very nice", "flockaroo, 2017-03-26wow, alien colonoscopy! ...is it a healthy alien? :-D", "miczac, 2020-04-09This is exactly what I am looking for but I want to modify it so that the rotation of the different tentacles is independent from one another, as I am trying to control their movement with another changing texture. I tried having two inverseSF function, one to get the tentacle index that I use as an address to extract the rotation data, and one to draw the actual tentacle... it does not work well. Does anyone have any suggestions? Thanks...", "PauloFalcao, 2019-07-26Really nice", "Taron, 2019-07-24I absolutely love this! Will study your code with excitement and eagerness, hehe. Fantastic job! Loads to learn from. Thank you for sharing this!!! \u2665", "poipoi34, 2019-07-24i'm new to shadertoy, could someone tell me how you get this tentacle object? was it all coded in the code on the right?", "FabriceNeyret2, 2019-07-17I'm on linux/chrome and have no problem.", "felipunkerito, 2019-07-17It must be a Unix thing because I am on a Mac.", "felipunkerito, 2019-07-17Came here to say the same in the Developer Tools Console I get:", "WebGL: INVALID_OPERATION: texImage3D: FLIP_Y or PREMULTIPLY_ALPHA isn't allowed for uploading 3D textures. And the problem is not WebGL2 compatibility because I also get: WebGL (2.0=true): F32 Textures: yes, F16 Textures: yes, Depth Textures: yes, Anisotropic Textures: yes, MRT: yes, Render to 32F: yes, Shader Texture LOD: yes, Texture Units: 16, Max Texture Size: 16384, Max Render Buffer Size: 16384, Max Cubemap Size: 16384", "fizzer, 2019-07-09@nirhershko: Maybe your OS/browser doesn't have WebGL2?", "nirhershko, 2019-07-09Doesn't work on linux/chrome (\"Shader error\" on front page, just black here).", "I sometimes get: \"'sampler3D': Illegal use of reserved word\" on the code block, so I assume it's the drivers...?", "ollj, 2019-07-08Oh yes, i wanted the fibsphere inverse to be used for hair, but alien tentacles and planets of trees and spikey fish are fine too.", "", "is the deformation a spinor?", "spinors, defined by a quaternion, are kind of a missing common subroutine on shadertoy, and so far, they are all non-quaternions.", "https://www.shadertoy.com/results?query=spinor", "DjAndy, 2019-07-08very good", "felipunkerito, 2019-07-05Beautiful indeed.", "audiopixel, 2019-07-05Very smooth beautiful movements", "iridule, 2019-07-05So beautiful!", "xyproto, 2019-07-05Very nice! Here's a slight variation http://ix.io/1NM8", "mlkn, 2019-07-03Very cool!", "PauloFalcao, 2019-07-03Really nice!", "coyote, 2019-06-30", "iq, 2019-06-28Really really nice!", "nabr, 2019-06-28baam!", "jeyko, 2019-06-28sweet", "fizzer, 2019-06-28Thanks for your help, Fabrice.", "FabriceNeyret2, 2019-06-28very cool !", "fizzer, 2019-06-28I switched to the polynomial variant of smin() and adjusted the values of k accordingly. It's not exactly the same as before, but has the same general appearance and I tested that it works in the OpenGL backend of Firefox.", "P_Malin, 2019-06-28Nice!", "FabriceNeyret2, 2019-06-28using smin(31.) works  !", "FabriceNeyret2, 2019-06-28 polynomial variant gives the same look than my clamp.", "", "linux: usely the problem is not linux, but true OpenGL vs transpilation to HLSL (the default on windows).", "you can force firefox or chrome to use OpenGL, cf https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/, section \"Testing OpenGL vs Angle vs D3D version on Windows\"", "Del, 2019-06-28lovely! wow", "fizzer, 2019-06-28Okay, could you try one of the other variants of smin from here? Perhaps the polynomial variant has better stability. I also notice that the variant I used here is calling exp() while the code on IQ's site uses exp2()...", "fizzer, 2019-06-28Clamping the exp() argument like that makes no difference here. Unforunately I don't currently have a Linux system to reproduce the issue with. Let me know if you figure out what is the cause of the issue, thanks.", "", "I'm not interested in codegolfing IQ's code here. Actually I'm usually not interested in codegolfing on Shadertoy at all.", "FabriceNeyret2, 2019-06-28Oh, if I change smin and smax by min and max, I do get the nice tentacle object.", "So the problem is really with these.", "FabriceNeyret2, 2019-06-28#define exp(a) exp(min(70.,a))", "does make something yellow appear in the black disk,", "but the look changes alot with the constant (and never looks like tentacles).", "", "NB: Common:", "s-2*(s/2) = s%2", "float(s/2) -> just s/2 is ok", "fizzer, 2019-06-28@FabriceNeyret2: Could the black pixels be due to the smax() and smin() k values being too high? I added a divide-by-zero prevention to line 27 just in case it might be that. I also added the exp2 change. The uv calculation will stay, because it doesn't make much difference.", "FabriceNeyret2, 2019-06-28no tentacle on linux/OpenGL, just a black disk on light-blue bg :-/", "I didn't found an obvious reason.", "", "some remarks:", "", "pow(2.,x) -> exp2(x)", "you can loop on floats", "", "just uv = ( 2.* fragCoord - iResolution.xy ) / iResolution.y", "Yusef28, 2019-06-28Great color choices and I like the shine", "CPU, 2019-06-28Lovely!", "ttoinou, 2021-03-21YouTube 8K60 render  !", "rpodeanu, 2020-09-21@NuSan thank you for your reply. Congrats again for this beautiful effect", "NuSan, 2020-09-20@rpodeanu The noise is coming in a large part from the bloom pass that is pretty bad. You can turn it of by commenting line 35 of the shader in \"Image\". To reduce the rest of the noise in the pathtracing, you can increase the number line 3 in shader \"Buffer A\", for example put \"#define SAMPLE_COUNT 100.\" but the framerate will suffer.", "rpodeanu, 2020-09-20Gorgeous shade, is there any way to make this sharper? Get read of that noise?", "Thanks", "nadaske, 2020-09-03how can i set 4k resolution?", "nadaske, 2020-09-03fantastic, best of the best !", "bioccular, 2020-04-30Hollee cranoli! This is amazing.", "bioccular, 2020-04-30Hollee f*ck! This is amazing.", "w23, 2020-04-17Awesome work! And very-very cool techniques for path tracing complex geometry.", "NuSan, 2020-04-17@archee so it's a bit similar to using blinn-phong instead of phong maybe. In any case thank you, I will have to test that more!", "DrLuke, 2020-04-17This sets my integrated GPU on fire and I like that", "archee, 2020-04-17Very enjoyable prod with the music!", "The fuzzy reflections will look more realistic, if you distort the normal. When you look at the sunset over a lake, it's the golden path effect, should not be a disk around the sun.", "r=(reflect(r,normalize(n+normalize(rnd23(frag+vec2(i*277.,j*375.)+fract(time))-.5)*rough)));", "Kali, 2020-04-14Fantastic, dude. I love all of your works", "piyushslayer, 2020-04-14The screen goes completely black after 115 seconds", "vjomni, 2020-04-14THIS IS SICK WOW", "GregRostami, 2020-04-14Stunning and SHORT!!", "iq, 2020-04-13This is the one I liked the most from the competition ^__^", "BigWIngs, 2020-04-13Very nice man!", "bob87, 2020-04-13So nice!", "PauloFalcao, 2020-04-13Superb! Thanks for sharing the code!", "Zi7ar21, 2021-04-05My Mom when she's on her period", "dean_the_coder, 2020-12-10If anyone out there is running on a Mac, can you let me know if the blood looks ok to you?", "@pjkarlik sees it divided up into a square pattern, but I don't see that on my MacBook. Thanks!", "dean_the_coder, 2020-12-10Thanks for taking the time to look @pjkarlik - I'll see if I can grab a Mac and reproduce it.", "pjkarlik, 2020-12-10on OSX i get a lot of discontinuity issues on the blood - the hash isn't mac friendly..", "(had the same issues on one of my shaders - had to change the hash to something like https://www.shadertoy.com/view/tsdBRj )", "Atchafalaya, 2020-12-10This is looking really nice!", "dean_the_coder, 2020-12-10Thanks @Shane! I deliberately moved the material code outside of the main loop (see applyLighting), but I see what you mean - I still have 'ifs' where I'm setting the material ID. I was trying to balance more 'if' statements against more state stored in my 'Hit' struct - I admit I'm not sure which would incur the biggest penalty.  I can feel an experiment coming on!", "Shane, 2020-12-10That's nicely done. I like the overall design.", "", "Sometimes, if I have a few materials to sort through, I'll save the individual object distances in a global container (vec4, mat4, array, etc) inside the map function without sorting, then sort them outside the loop. However, GPUs are strange creatures, so I can never be sure whether it's a faster method or not. I'd imagine taking the \"else if\" statements outside the main loop would help with things like compiling, and so forth, but who knows. Either way, this easily runs at 60 FPS on my machine, so I guess it's a moot point.", "", "As for the blood, it'd be interesting to see what an extra reflective\\refractive pass would do, but as you mentioned, you were looking to keep things simple, and that'd definitely complicate things.", "jorge2017a1, 2020-12-09Wow, the scene looks very good ... everything is very elegant ... everything looks very good ... excellent work !!!!", "........", "guao se mira muy bien la escena ... todo es muy elegante ... se mira muy bien todo .... excelente trabajo !!!!", "iapafoto, 2020-12-09super nice!", "etale_cohomology, 2018-09-14My jaw literally dropped. <3", "cornusammonis, 2016-04-23@Shane I'm working on a (hopefully) seamless cubemap version of this sort of thing. Here's the 2D-packed 3D reaction-diffusion system btw: https://www.shadertoy.com/view/MscXzS", "Shane, 2016-04-23Pretty cool. I was going to raymarch the original, but just as a raised 2D surface on a back plane. For the sphere, I though it might be possible to wrap the diffusion process to make it tileable, then cube map the result, but I think that'd still show some surface seams. Tri-planar mapping might roughly work, but only bump mapped.", "", "That leaves tileable 3D diffusion packed into a 2D texture, and so far, I've been feeling too lazy to try that.  Having said that, Shadertoy user \"cornusammonis\" has a really nice example along those lines.", "stb, 2016-04-22There's a way to do this without visible distortion, but I don't know how. I'm pretty sure bugman123 knows!", "ollj, 2016-04-22good 3d-spheremap use of the ice effect from last week. seam is hard to hide,spheremapping the buffer should be doable. is also not resolution independent.", "aiekick, 2016-04-22nice", "gambhiro, 2019-05-05That's in some fantastically unusual dimension", "Jackaru, 2019-04-08Next Apple wallpapers! That's amazing", "shau, 2019-04-07Beautiful", "BigWIngs, 2019-04-04Beauty!", "mrange, 2019-04-03I like that the understated title doesn't prepare you for this gem", "mrange, 2019-04-03omg", "otaviogood, 2019-04-03yeah, that looks great. nice choice of colors too.", "hamtarodeluxe, 2019-04-03Woow thank you !", "@xfg You might also increase AA then :-)", "felipunkerito, 2019-04-03Yes shader of the week! Well deserved!", "@xfg or buy wallpaper engine and use the html tag for a live wallpaper.", "xfg, 2019-04-03pause, toggle fullscreen, take screenshot, then you have a wonderful wallpaper.", "Really love it, thanks!", "xfg, 2019-04-03pause, toggle fullscreen, take screenshot, then you have a wonderful wallpaper.", "Really love it, thanks!", "MacSlow, 2019-04-03I could watch this for hours!", "kiyamada96, 2019-04-03great!!!!", "kaneta, 2019-04-03Cool!", "It's like the splash screen of unity.", "aiekick, 2019-04-02 marvelous", "hamtarodeluxe, 2019-04-01Thank you ! I'm really glad you like it :-)", "felipunkerito, 2019-04-01", "bignobody, 2019-04-01This is awesome.", "iq, 2019-03-31Truly beautiful!", "GregRostami, 2019-03-31Gorgeous!!", "balkhan, 2019-03-31relaxing", "spleenooname, 2019-03-31mesmerizing!", "khlorghaal, 2018-12-14WHOA THIS IS AMAZING", "I WISH I HAD THE ORIGINAL SRC", "ollj, 2017-06-01studying this for inspiration may take some weeks.", "Jacoby, 2016-11-04Completely blown away, this is seriously amazing!", "asneakyfatcat, 2016-07-30Is this real life? This is insane", "bergi, 2016-04-09Really really cool!", "I grabbed it for a fulldome shadertoy remix. Hope you guys like it:", "http://vimeo.com/defgsus/shadertoy", "bernie, 2016-02-27Mind blown. Awesome work. The source is clearly visible but I still can't grasp this. Fantastic.", "Falken, 2016-02-27Update: Shadertoy now supports playing the full audio track to the end of the demo.  Thanks iq!", "reinder, 2016-02-26@Falken. Thank you! It works", "GregRostami, 2016-02-25JAW HIT THE FLOOR!! One of the BEST Shaders EVER!!", "reinder, 2016-02-25Very nice! Can you maybe publish this shader using the \"public+API\" option so it  will work in the Shadertoy iPhone App?", "tomkh, 2016-02-25Awesome job (again) !", "", "An (obvious) hint to watch final part with sound:", "Image: ln 218: u = iGlobalTime + 80.;", "Sound: ln 75: j = time + 80.,", "", "I also like to play it fast-forward to get almost everything with sound:", "u = iGlobalTime*2. + 30.", "j = time*2. + 30.,", "", ":-D", "Dave_Hoskins, 2016-02-25Truly epic!", "Shame the audio stops at just the wrong moment. Great track though.", "Duke, 2016-02-25Very cool!", "ollj, 2017-10-07yes, this is how people used to render in the early 90s, multi-sampling gallore.", "But in the late90s parallel processing obsoleted all these methods in favor for methods that do calculus differentials with MIP-mapped buffers, closer to utilizing Taylor polynomials.", "chaosink, 2015-07-28Some black areas on the cube faces can be seen when camera moving.", "w23, 2013-07-22solid yellow on linux/chrome", "Dave_Hoskins, 2013-07-21Yeah, it's OK on Win7/Chrome but not iMac/Chrome. Sometimes it's a variable not initialised and presumed to be zero.", "h3r3, 2013-07-21Strange.. on Windows looks ok..", "Dave_Hoskins, 2013-07-21Yes, it appears to behave differently on Mac, it gets brighter with increased 'ANTIALIAS_SAMPLES.'", "porglezomp, 2013-07-21It's brighter if antialiasing is off...", "Dave_Hoskins, 2013-07-21It's so recognisable to us CG nutters! Good one.", "tomachi, 2019-03-31Perhaps you altered it from when i last saw it.... but congrats! This shader is in my latest music video, hope thats ok! I have you plenty of credits on the official blog at http://www.funk.co.nz/auckland-music-update/skanky-funk-instrumental-dub/", "ollj, 2017-04-15oh eh i forgot this one:", "", "//idenfical to if(a<0.){return b;}else{return c;} but branchless:", "#define ifb(a,b,c) (b+(c-b)*step(a,0.))", "//branchless code -> longer pipelines on newer hardware -> likely better performance.", "//branchless code -> +1add +1mult, even slower on older hardware.", "//branchless code -> b & c are both calculated and substracted.", "//... this can cause extra calculations and more rounding errors. as only one difference of b and c matters.", "ollj, 2017-04-15branchless smin() and smax(), comparing 1 dimension to keep all of them of one vector.", "", "vec3 smin(vec3 a, vec3 b){", "a.x=clamp(a.x,-1.,1.);", "b.x=clamp(b.x,-1.,1.);", "return ifb(a.x-b.x,b,a); //branchless, explicit fast, imprecise,can use mad()", "//return mix(a,b,step(b.x,a.x));//branchless implicit mix, precise", "//if (a.x-b.x < 0.)return a;return b;//worse", "}", "", "vec3 smax(vec3 a, vec3 b){", "a.x=clamp(a.x,-1.,1.);", "b.x=clamp(b.x,-1.,1.);", "return ifb(a.x-b.x,b,a); //branchless, explicit fast, imprecise,can use mad()", "//return mix(a,b,step(b.x,a.x));//branchless implicit mix, precise", "if (a.x -b.x> 0.)return a;return b;//worse", "}", "SalikSyed, 2017-02-27This is awesome! very very cool", "Shane, 2017-02-27Visually entertaining. Loved the demo too.", "bio998, 2017-02-21Sweet !!!", "bit2shift, 2017-02-20@iq loops are being aggressively unrolled by ANGLE on GLSL ES 3.00, which makes large loops infeasible.", "It has been crashing Chrome 56 for me. Didn't happen back in WebGL 1.0.", "Any recommendations?", "lovelyH, 2017-02-15Nice idea.", "iapafoto, 2017-02-15wow super cool !!! love it !", "nimitz, 2015-05-22Had completely missed it, very nice! should be featured!", "iq, 2015-04-28Oh, it is!!! Sorry for the noise", "iq, 2015-04-23It's pretty amazing - make it public so that everybody can see it!!", "ChunderFPV, 2022-02-18If you change this:", "h *= t; v *= t; v = sin(v);", "to this:", "h *= 2.0/t; v /= t; v = sin(v/2.0);", "you can now visualize t = numerator/denominator as number of groupings divided by number of folds.  Try 2/3 to see what I mean.  When t=1 we get a sacks spiral.", "ChunderFPV, 2022-02-18That's amazing!  I see the same patterns in the Spiral Machine which is the exponent visualized but you're generating the patterns in a completely different way.", "ttoinou, 2019-03-24Wow trippy and good colouring", "ChristobalBalenciaga1000, 2023-02-07thank you! appreciate the explanation", "MalaMi97, 2021-05-19Hypnotizing!", "MacSlow, 2021-05-06I want to touch it!  Super nice, Shane!", "etale_cohomology, 2017-08-01I can't tell which is prettier, the shader or the code...! <3", "Hadyn, 2017-05-05It's beautiful! I think I'm going to learn a lot from your shaders", "Shane, 2017-03-14@flockaroo", "Apologies for the late response. I was in Sri Lanka and some other places. I had a cell phone with me, but I've never been fond of phone browsing. I don't know how others do it.", "", "Anyway, I reasoned to myself a while ago that it'd be impossible to achieve thick equi width isolines on nonlinear functions like this without resorting to more sophisticated methods - like pointilizing the isolines and running Bezier lines through them... Of course, I may be incorrect, in which case, I'd love to see an example.", "", "However, with thinner lines, you can at least fake it. How, depends on what you're after. I've used \"x*(1 - x)\"  for smoothing combined with the cheap GPU Minkowski (?) distance \"fwidth.\" I forgot about the simplest case \"1 - x,\" but that'd work too, and might even be better, so I might experiment with it. Commented out is the \"x*x*(3 - 2*x)\" case. Swapping \"fwdith\" for a software Euclidean distance looks even better, but isn't as cheap. I'm currently doing a bumped Voronoi example that tries to use better methods.", "flockaroo, 2017-03-06i was wondering... it seems to me a strictly linear smoothing of the floor func using just", "\"min(fx, (1. - fx)/fwidth(x)/sm)\"", "in line 49 also does the tick.", "at least i dont see much difference in the result, and its not differentiable either way...", "flockaroo, 2017-03-06pretty!", "Shane, 2017-03-01@rcread", "\"fwidth\" works for some things, and not so much for others. If you're only interested in an adjacent pixel difference for some term, then it seems to be OK. It all depends on the sample spread you're interested in.", "", "If you were trying to take readings that spanned more than a pixel, then I guess you'd have to take readings for the function itself a couple of times and perform \"fwidth\" by hand. Even so, it'd still be cheaper than supersampling. Having said that, if framerate wasn't a factor, I'd prefer supersampling.", "", "@shau", "Via online pictures, I think I know the particular piece you're referring to. It'd be reasonably easy to make a 3D version. However making something cheap with pixel-precise, frame-shot-quality antialising might prove difficult. I've never really figured out a way to perform cheap 3D antialiasing. You can edge-detect a scene in a buffer, then only supersample the pixels that need doing, but I don't quite find that fast enough yet. One day, when I'm not feeling so lazy, I might put some proper thought into it.", "rcread, 2017-02-28This is working better than I would have thought since fwidth works only across pixel boundaries within 2x2 pixel blocks, right?  Very nice.", "shau, 2017-02-28Beautiful. Reminds of some sculptures by Tom Heatherwick at the Science Museum in London", "iq, 2017-02-28Cute", "oneshade, 2021-03-09Gorgeous!", "kiyamada96, 2019-04-16wow", "utak3r, 2018-02-21I've made a Catmull-Rom tour through this nice menger variation", "https://www.shadertoy.com/view/lsdcW7", "CaliCoastReplay, 2017-09-08Front-page worthy.  Fast and even reflections at 60fps?  This could go in cinema like Dr. Strange in a heartbeat nearly as-is.", "dila, 2017-04-29super work!", "Shane, 2017-04-28I was surprised to see this one on the front page.  I have some more interesting variations.", "", "The lighting isn't very conventional, so I wouldn't take it too seriously. I deliberately left out gamma correction in order to exaggerate the dark tones, but I wouldn't recommend it.", "", "The geometry is worth looking at though, which is nothing more than addition and subtraction operations on repeat boxes.", "huttarl, 2017-04-27Thanks for all the good commenting. And the visuals look awesome too!", "Yrai, 2017-04-26Some gold details for full out classiness  Commented as always, some more learning material.", "FabriceNeyret2, 2017-04-26look so luxurious :-p", "GregRostami, 2016-02-12HOLY CRAP!!", "Shane, 2016-02-12@aiekick", "I slightly misread part of your message. Your English is good - my reading is bad.  Yes, \"d < .0025*t\" is a handy trick to save a few iterations, since less accuracy is needed in the distance. Also, you can try things like \"d < 0.001*(t+1.),\" etc.", "", "@Passion - I wonder if your \"Blue Dream\" shader subconsciously influenced my decision to use a blue color in the distance.", "Shane, 2016-02-12@aiekick", "Unrolling loops for small iteration numbers is always worth trying. Sometimes, it works. Other times, it doesn't make a difference. Using powers of 2 for the loop number is just an oldschool habit. It used to matter, but now, probably not so much. Usually, I'll use the smallest number that renders the scene correctly.", "", "In regards to the raymarching equation, a lot of the time, it's a process of trial and error. Usually, I'll try a combination of the following:", "", "Techniques: Standard, corrective overstep method, log-bisection method (Nimitz), standard-bisection, etc.", "", "Stepping examples: t += d, t += d*0.75, t += (step(d, 1.)*.5 + .25)*d, t += (step(d, 1.)*log(abs(d) + 1.1)*.75 + .5)*d, etc.", "", "Precision examples: d < 0.002, d < 0.001*t, etc.", "Passion, 2016-02-12Brilliant I love the look of this.", "aiekick, 2016-02-11but the displace has a cost for the fps. without that, on my slow gpu, the fps is 50-60 in fullscreen and its very impressive", "the tech you use for avoid some loop for far, is usefull. i tried to use to coef of distance according to precision of the map, like in my recent ray marching experiment \"d +=s * (s>0.01?0.8:0.01);\" but your tech is better and simpler \"d <.0025*t\". i will keep in mind this tech.", "maybe a question why use 2^n iteration for loop ? is the gpu better with iteration count of 64 instead of by example 72 ?", "Shane, 2016-02-11@aiekick", "That looks cool, and the texture displacement technique you're using is really interesting. It has a tri-planar mapping feel to it. I quickly tried it out on a few distance functions (tunnels, terrains, etc) and it works really well. In fact, I'm going to keep it in mind.", "aiekick, 2016-02-11hey, for the fun i have added some texture dispalce in each direction like this at beginning of your map :", "", "float dsp = 0.02;", "q.z += dot(texture2D(iChannel1, q.xy).rgb, vec3(dsp));", "q.x += dot(texture2D(iChannel1, q.yz).rgb, vec3(dsp));", "q.y += dot(texture2D(iChannel1, q.xz).rgb, vec3(dsp));", "", "", "i have also increase the little hole size.", "", "here the result : Menger Sponge Var  With Displace", "", "seems to be some chocolate with nuts with the rock texture sample ^^", "Shane, 2016-02-11Shadertoy's back online. Hooray! In my part of the world, it was down for an additional day. Thanks for the comments. I put embarrassingly little effort into this, so I'm surprised it was noticed at all.", "", "@Dave_Hoskins", "Not normalizing \"rd\" after distorting it was a major oversight on my part. I couldn't understand why the highlights never quite looked right, and I think you just solved the problem... I almost feel guilty for all the free help I receive on this site.", "", "@eiffie", "If I'm not feeling lazy, I'll sometimes use the Schlick approximation to tone down the specular component. Curvature on the specular lighting. I'll give it a go. I usually use Nimitz's curvature formula. I'm aware it can be rolled into the normal calculation, but I remember curvature and normal calculations often relied on different sample distances (epsilon value), so I normally calculate it separately... unless I'm not calculating curvature correctly, which is entirely possible.", "", "@iq", "The object is made of highly reflective, polished, super-compressed, lacquered timber... Nah, I'm not buying it either, so I've toned the reflections down. It was sad seeing see that extra shininess disappear, but I guess it was the right thing to do.", "", "@casty", "Even without the unrealistic reflections, my brain would never accept this scenario. I still can't explain that weird blue light, and no one could afford that amount of timber.  Either way, your comment has me wondering what an additional refractive pass would look like. Not sure, but I'm going to try it on another version and find out. On a side note, that lantern scene you did is awesome.", "XT95, 2016-02-11Super nice!", "iapafoto, 2016-02-10class", "Duke, 2016-02-10Cool!", "casty, 2016-02-10My problem with reflections in such a symmetric scene is that my brain takes them as transparencies instead.", "Dave_Hoskins, 2016-02-10Shiny! And yes, it's fast!", "You may want to normalize rd after the fish-eye stuff?", "aiekick, 2016-02-10ho la la, i love it. very nice and beautifull", "TambakoJaguar, 2016-02-10Very well done and fast!", "coyote, 2016-02-10", "eiffie, 2016-02-10I love it. Did you try using that fresnel term to add in the reflection? On sharp corners you can knock down the specular lighting by testing the \"curvature\" as you find the normal. Just throwing out ideas to slow it down because its 60fps on my subpar card.", "casty, 2016-02-10I love your commented-to-death shaders!", "otaviogood, 2016-02-10A little wood-grain can go a long way.", "poljere, 2016-02-10+1", "", "Very cool!", "iq, 2016-02-10Wooooooah. Very nice. I feel it's a bit too reflective for wood. But it's super super cool.", "etale_cohomology, 2017-07-19How can I change the position of the sphere in 3D space?", "konidia, 2016-03-20Why would you use dot to find the radius?", "safiire, 2015-12-04Thanks a bunch, very easy to understand.", "laserss, 2015-09-10Thank you for the clear comment!", "bthouverez, 2015-04-28Really nice!! I'm beginner and I was looking for a simple shader to understand how it works. I just spent 5 minutes on it and understood lot a things!!", "Thanks you so much for this", "zalo, 2023-05-10This should go in the article list of SDFs!", "guich, 2022-02-08Answering my own question: To increase the thickness, use abs(d)-0.05 in line 58", "guich, 2022-01-25How to increase the line thickness?", "jorge2017a1, 2020-09-20interesting !!!!", "......", "interesante !!!!", "doug_moen, 2020-06-14Iq's \"crossing number\" algorithm differs from Wagyx's \"winding number\" algorithm in those cases where the polygon overlaps itself, like the star pentagon example I gave. In those cases, Iq's algorithm produces a perfect Euclidean distance field in the interior of the shape. Wagyx's algorithm instead generates interior edges, and the distance field is not Euclidean around those interior edges.", "doug_moen, 2020-06-14This algorithm produces different output than @wagyx's original version.", "Wagyx's version uses the winding number. In the following polygon:", "vec2 v0 = vec2(1.0, -1.0);", "vec2 v1 = vec2(0.0, 1.0);", "vec2 v2 = vec2(-1.0, -1.0);", "vec2 v3 = vec2(1.5,0.4);", "vec2 v4 = vec2(-1.5, 0.4);", "the centre section of the pentagon is inside the polygon.", "Iq's version uses the crossing number, so with the same data, the centre section of the pentagon is *outside* the polygon.", "ollj, 2019-03-19this is often done under the tag:", "https://www.shadertoy.com/results?query=winding", "", "the loop within sdPoly() can be a bit excessive.", "playbyan1453, 2023-03-30After looking back at the code, when tracing rom the light it self intersects with the light surface itself making the indirect illumination darker.", "Alforofus, 2022-12-13This code is so hard to debug. There are so many unused variables and questionable choices. #CodeCleanlinessMatters", "playbyan1453, 2022-07-03Oh well, I was wrong. Somehow using pi instead 4 pi was correct.", "playbyan1453, 2022-07-03line 317 found a bug indirect light was too bright, to fix it multiply the weight by the area of the sphere to keep it \"unbiased\" like this.", "* (12.5663706 * lightSphere.w * lightSphere.w);", "Should be correct now.", "Mourtz, 2017-09-16change line 223 to `ro = lightSphere.xyz + ro*lightSphere.w;`, it represents a point not a direction m8. ;)", "etale_cohomology, 2017-08-22If I understand correctly, the spheres and planes are determined using intersections (like in ray-tracing). I wonder if it's possible to do path tracing of signed distance fields, where the geometry is given by SDFs?", "Mourtz, 2017-03-10Integrating Metropolis Light Transport(MIS) to the existing pathtracer seems feasible.", "philip368320, 2017-01-06How to make this accumulate the image and show it as a static image which gets better over time?", "reinder, 2015-06-03@knitghty as  revers pointed out, there was a bug in de sphere intersection code. I have fixed it, and now this shader look pretty much the same as the reference image by LuxRender.", "squid, 2015-01-13@reinder: I think I'm just crazy. Awesome shader!", "probesys, 2015-01-12If we set the right wall specular, and the eye path length to 4 or more it gets very noisy, is it due to the weights?", "reinder, 2015-01-12@squid: I don't have the noise patterns at my Mac so it is hard for me to fix this problem. I have changed the code a bit. Can you still see a pattern?", "squid, 2015-01-11Running at 256 samples is awesome, but you can start to see that the noise has a pattern because of how it's generated (10fps though! )", "knighty, 2015-01-06Maybe you used a different index of refraction for the green sphere. An IOR of 2. gives approximately the same result as the reference image.", "reinder, 2015-01-06Just a repost of this shader to clean up a lot of (my own) comments. The 'color bleeding' in the back corners are caused by the coloured walls above the ceiling. These are reflecting red light in the right corner and vice versa.", "I made a reference image using LuxRender which you can find here. I think that this reference image and the shader looks pretty much the same (although the weights of the paths are guessed), except for the refraction at the green sphere. I will have a look to find out why this is different.", "anchung_chen, 2021-08-12For the mouse control , the following modification may be a simple solution !", "", "//vec2 m = iMouse.xy/iResolution.xy;", "//if(m.x==0. && m.y==0.) m=vec2(.55, .45);", "//mouse = m;", "vec2 m = (iMouse.xy-abs(iMouse.zw))/iResolution.y -vec2(0.5, 0.);", "wcfairytale, 2019-09-30When I think it would be great if she can wink...", "bvenjamin, 2018-01-31Haha the march towards the city took me super off guard. beautiful thing", "ollj, 2017-05-23so many things being done in one.", "", "texturing and blinking eye only distracts from the paving.", "", "klick the \"?\" and scroll to \"Shadertoy Inputs\" to ge all the uniform names that are useful for syncing and performance calculations.", "ollj, 2017-05-23so many things being done in one.", "", "texturing and blinking eye only distracts from the paving.", "Wowshade, 2017-01-19 I like how One of them winks", "Patapom, 2017-01-18Shaderto\u00ef !", "piluve, 2016-12-22I cant stop watching it now...", "Andre, 2016-12-17Very nice and so much detail, they really look hand made, The wink on every 3th doll is aso funny. My daughter (6yo) loves it, and i have to put it full screen again. Runs smooth on 4K on a 1070 nice.", "cauliflower, 2016-12-16What a beautiful demo'ish shader! Lost in perfection. IMHO your first version was even more sound, when dolls winking face to face and walking gracefully.", "Yusef28, 2016-12-16Super cool!", "BigWIngs, 2016-12-15Made shader of the week again! Thanks!!", "@coyote: Thanks for the suggestion. Should be fixed now.", "dr2, 2016-12-15Beautiful, and fast!", "coyote, 2016-12-15", "Just a small correction for it to work properly on macs.", "", "line 264: float circ( inout vec4 base,...", "", "Pure out function parameters are not necessarily implemented by pointers.", "vgs, 2016-12-14a very original shader! super cool!", "levonchic, 2016-12-14\u043b\u043e\u043b", "ankit_shadertoy107, 2016-12-14I am a beginner so this is really fascinating for me. Nicely done! \\m/", "TambakoJaguar, 2016-12-11WOW, amazing! I wish I could do such stuff!", "Trisomie21, 2016-12-09Flawless and very detailed... (performance is also extremly good)", "Shane, 2016-12-08Awesome. Love the marching scene toward the Kremlin-like silhouette.", "starea, 2016-12-08I love it!!!", "BigWIngs, 2016-12-08Thanks all for your nice words, it really means a lot to me! No one pointed it out yet so I guess I'll just say it: in solo mode she keeps looking at you regardless of cam angle and she winks ;)", "", "@IQ - I don't see anything on the roadmap for better performance metrics. Perhaps an uncapped framerate or an average miliseconds per frame could be helpful? Often times it's hard to figure out if an optimization actually makes things faster. Unless I'm missing something?", "otaviogood, 2016-12-08Holy crap, the Kremlin!", "XT95, 2016-12-07Wow ! Super nice", "Dave_Hoskins, 2016-12-07A great painted look.  it!", "public_int_i, 2016-12-07So good! I love the wobbly dance.", "CPU, 2016-12-07Wow! and not a jaggie in sight! Super sweet!", "dila, 2016-12-07this is great!", "s23b, 2016-12-07everything about this is pure awesomeness!", "poljere, 2016-12-07Super awesome.", "iapafoto, 2016-12-07Wow super cool, texture is amazing !!!", "KylBlz, 2016-12-07haha this is great", "834144373, 2016-12-07Pretty pretty Nice!", "How fast on my video card!", "And the amazing texture!", "iq, 2016-12-07Amazing, pretty well done!", "aiekick, 2016-12-07", "jt, 2022-11-05Beautiful look!", "zippycoder, 2017-01-18Love it", "public_int_i, 2016-08-03Very smooth and stylish.", "mlkn, 2016-08-02Super awesome!", "Antonalog, 2016-08-02really cute! you could turn it into the title sequence for Silicon Valley", "knarkowicz, 2016-08-02@Shane Thanks for pointing out. I've removed the redundant code.", "Shane, 2016-08-02So cool. Really stylish. By the way, I noticed some doubling up in a few places:", "", "zbuffer = depth;", "color = RGB_TREE_LEAVES * 0.8;", "zbuffer = depth; // etc.", "iq, 2016-08-01oh wow, this is really good", "xdaimon, 2016-08-01Fun shader !", "KylBlz, 2016-08-01That looks good! Both the layout and the crisp style", "iapafoto, 2016-08-01Very cool. And very nice colors also", "aiekick, 2016-08-01", "CyberMousey, 2020-06-20Getting error message \"This shader not compatible with Virtual DJ\" On Mac OS running VDJ 8/2021", "antoineMoPa, 2018-04-10Yes, you can use this (or remix it) for your VJ gigs", "jpkelly, 2018-04-10Hi There.", "May I please use this for an upcoming VJ gig?", "Poisson, 2022-09-28Nice! I love the idea", "yumjelly, 2022-04-19\u70ab\uff01", "Ontujest, 2022-04-05it is very beautiful job", "amhall, 2022-03-11Love it!", "cooldude999, 2022-03-09really cool work!", "jorge2017a1, 2020-08-09the portal technique is complex ... but interesting ....", "..........", "la tecnica del portal es compleja...pero interesante....", "jorge2017a1, 2020-08-09This shader is a Dream or dejavu .... something that repeats ... is something very crazy .... ....... very good job !!!!", ".............", "Este shader es un Sue\u00f1o o dejavu....algo que se repite...es algo muy loco...........muy buen trabajo!!!!", "FlashyTheCreeper, 2017-02-01This would be used for a DOS demo", "Passion, 2016-06-28Mind bending stuff!", "gambhiro, 2016-06-28Life in a Hypercube", "", "reminds me of the movie, Cube 2", "Shane, 2016-06-28This is great. Really trippy, and the code's running particularly well on my slowest machine.", "dila, 2016-06-28Thanks guys!", "GregRostami, 2016-06-27", "TambakoJaguar, 2016-06-27Wow, quite crazy!", "aiekick, 2016-06-27i love this kind of infinite scenes", "aiekick, 2016-06-27", "knarkowicz, 2016-06-27Mind-bending stuff. Well done!", "dirkadirkadan, 2016-06-27Rayception!", "inc, 2020-07-08in german we call it: \" Bl\u00e4tterteig\"", "cyperus, 2020-02-16WoW.", "The more I see, the more certain I am that raymarching is the right way to go.", "Even if one have to turn everything learned upside down.", "dila, 2015-10-13nice nice, making my GPU burn", "adammaj1, 2014-01-1175.0 fps on GeForce GTX 770 , Ubuntu 13.10", "frankwer, 2013-07-18Runs around 40 fps (GTX 570). Looks like roses at some points, nice.", "porglezomp, 2013-07-13Runs at 1-3 fps. for me.", "Dave_Hoskins, 2013-07-13There's so much happening at once that it's difficult to keep track of all the movement. Beautiful.", "fb39ca4, 2013-07-13Pretty. Runs at 37fps for me. (GTX 460 768MB, Win7, Chrome w/ native OpenGL)", "PatHightree, 2013-07-13Oooh wow, rose swamp, love it!!!", "jt, 2017-06-20cool", "PauloFalcao, 2013-02-26Excellent framework, and very cool scene!", "iq, 2013-02-25wow!", "FabriceNeyret2, 2014-02-21Smart simple idea !", "( wanna try the first 1 paragraph siggraph paper ? :-p )", "Dejay, 2021-11-17Beautiful! Solution to the crease might be to add the color based on distance to both / all curved segments, instead of only the closest one.", "baibai, 2021-10-18nice", "FabriceNeyret2, 2019-10-03about the crease: the point is just that for a glow, the distance field is just not the right tool when the emitter is not convex: here in a V configuration you would expect the contribution of the 2 parts of the V to add, rather than taking their max as distance-based blow is doing.", "But there are probably hacks to save the day ;-)", "Hint: many people have study how to account for linear light sources, either physically, or as good fake. You might try to explore that.", "But here the configuration is pretty simple: there are only 2 places, where only a V can occurs, and you know where. you might split the spline in 2 at that point and sum.", "", "Note that the inside of the top part of the hearth should also be brigther that the outside, if you want to be precise ;-)  . You might involve the local curvature as a modulator on gain.", "alro, 2019-10-03Haha! Hadn't even thought of it that way. I hope they will meet eventually. Mathematically, of course, they never will", "FabriceNeyret2, 2019-10-03which one is chasing ? which one is running away ? :-p", "isn't it a sad summary of vain human condition, after all ? :-D", "", "cool & elegan, anyway :-)", "alro, 2019-10-03Thanks!", "", "Changed to smoothstep as you suggested", "", "\"that's how the SDF is, it has to have a crease\" --> I get that but is there a way to adjust it such that distant regions lose the crease while maintaining the current crisp 0-level set? It would not be a correct SDF as we travel outward but would allow for a better glow effect without dark lines at sharp turns.", "Shane, 2019-10-03This is great. Really pleasing to the eye.", "", "By the way, you could get rid of the slight jagginess with something along the lines of the following:", "col += smoothstep(-.008, .008, -dist)*10.; // Etc.", "iq, 2019-10-03\"At sharp turns, the SDF has creases in the far field\" --> there's nothing to fix, that's how the SDF is, it has to have a crease, it's maths, not a bug!", "", "The shader is pretty!", "gchipunov, 2021-11-05cool", "henderthing, 2017-01-07this is amazing, hypnotic!", "", "Hope you don't mind--I hacked your idea into a Houdini Mantra shader.", "https://vimeo.com/198387408", "Jecc13, 2021-05-25Im sorry for such stupid question, I'm new to this stuff but how to use it?", "Eethe, 2020-05-06Hi @CREGG,", "As I mentioned in another comment below, you're free to use it, as the license included in the code states.", "However this code is old, counter-intuitive, and probably unnecessarily performance heavy, so i do not recommend using it in realtime applications.", "CREGG, 2020-05-06Hi Lethe,", "I wanted to ask if we could use your shader code in a commercial project?", "Eethe, 2017-08-31@heliumsoft Wow, thanks.", "Yes indeed, I have included the license in the code.", "Though this is far from perfect, I recommend you do some optimisation for production use, unless it's not real-time.", "heliumsoft, 2017-08-29Awesome effect.", "Can i use your code in commercial?", "rockeyda, 2015-06-27this would make a awesome affect for adobe premere!", "Eethe, 2015-05-11Thanks ! Yes, that's the kind of effect i was looking for  I would like take it look a little bit more chaotic but, no ideas.", "Dave_Hoskins, 2015-05-07Nice and twitchy! I like it a lot.", "dean_the_coder, 2020-10-13Looks like you're applying the noise to the alpha channel.", "I suggest changing line 90 from", "fragColor = vec4(1.0, 1.0, 1.0, noise);", "to", "fragColor = vec4(noise, noise, noise, 1.0);", "", "Hope that helps!", "FabriceNeyret2, 2020-10-13plain white on OpenGL.", "Riccardo_Baston, 2022-09-21Ottimo lavoro", "jeffbustercase, 2022-09-17Beautiful", "ollj, 2016-04-17needs homage to respire leclip: https://www.youtube.com/watch?v=IEexx5BR5eY", "djmips, 2015-07-08tour de force.  My favourite because of how bright and cheery it seems.", "coyote, 2015-05-30I love it, it's so beautiful!", "If anyone want to check it in 3D, either cross eyed or with the oculus, here is what you can do:", "In main(), right after the line 412 with \"vec2 uv=...;\" addfloat sg = sign(gl_FragCoord.x-0.5*iResolution.x);", "uv -= sg*vec2(0.5*iResolution.x,0)/iResolution.y;", "...then right after the line 440 with \"mat3 camMat=...;\" addcameraPos += sg*camMat*vec3(0.6,0,0);", "This is for parallel views (i.e. oculus), while for cross-eye just subtract instead of adding to the camera position.", "Finally, before the line 487 with \"col=PostEffects(...\" insertxy.x=fract(2.0*xy.x);", "It is a small annoyance to squint through oculus to hit the \"go fullscreen\" icon, but it's worth it! Hopefully iq will add some keyboard shortcuts for fullscreen and play/pause.", "cabbibo, 2015-02-17Holy crap. this is fantastic!", "StanRee, 2015-01-28Wow! Someday I want to be able to do this! I have quite the road ahead of me!", "Ignitron, 2014-09-15Unbelieveable!", "vgs, 2014-05-06I love these little bounces.", "squeakyneb, 2014-05-02Oh. My. That's freakin' amazing. I love it!", "Coldberg, 2014-05-01Blows my mind how one can raytrace procedurally generated scenes in one fragment shader.", "Hats off to you sir", "Dave_Hoskins, 2014-04-15Wow, now that's broken alright! Thanks - perhaps it's something uninitialised, I'll have a look through.", "gtoledo3, 2014-04-15Sure, sorry I didn't do that off the top! http://imgur.com/n4Q1Iax", "Dave_Hoskins, 2014-04-15It's OK on my OSX-10.9.2 with an AMD-6750M - can you tell any more about what you're seeing?", "Thanks.", "gtoledo3, 2014-04-15I'm pretty sure this is broken on OS X 10.8, nVidia...", "iq, 2014-04-14Nice!", "DontBeatThePaggaBoy, 2022-12-11bug: It starts to vibrate after a while.", "mrange, 2022-06-30@dkruger but FYI it took long time before I wrote my first multi buffer shader. There's lot to explore and do before", "mrange, 2022-06-30@dkruger I would recommend art of code on YT (aka BigWings here IIRC): https://www.youtube.com/watch?v=k1vlDbhh0ws . Lots of good content. In this particular case the mainwork is done Buffer A. Buffer B is there to do some post processing of Buffer A as well as adding a blurred version of the previous frame of Buffer B. AFAIK you have to do buffers to get access to previous frame. Finally Image reads buffer B and clamps and sqrt it as an approx of sRGB.", "dkruger, 2022-06-30Really beautiful. Is there anywhere that explains how shadertoy shaders are put together? This has buffer A,B and Image. There is a mainImage function in both Image and Buffer B. I have seen this in other shaders. Are Buffer A,B included in other shaders? Otherwise, why not one big file?", "leera, 2022-06-30Not sure if intentional, but so nice for the pride month! Kudos!", "Xibanya, 2022-06-29incredible", "mrange, 2022-06-28@cmarangu - I am glad you like it. My main motivation is that I want to show that what I do didn't spring from my mind alone. Instead I have had lot of help and I want to show who helped and where I found the code. But yes, I also think FOSS licensing is an important topic .", "cmarangu, 2022-06-28I like how you paste in all the licenses for, like, every function. Rigorous, and always good to avoid plagiarism or litigation.", "iq, 2022-06-22Wow, amazing. And somehow missed it until now", "Shane, 2022-06-13Pretty.", "aiekick, 2022-06-12wow, super nice", "jorge2017a2, 2022-06-12it's bright colors!!!", "ttoinou, 2021-03-16YouTube 8K60 render  !", "akhgary, 2018-05-05stunning", "pudding, 2018-04-27Absolutely beautiful dude. I think this is my favourite here, and that is a hard competition <3", "Dave_Hoskins, 2018-04-07I little shame the thumbnail has been saved when on a black screen.", "Flexi, 2018-04-06I'm in awe!", "(check out my newest soundcloud visualizations)", "shau, 2018-04-05Awesome", "FabriceNeyret2, 2018-04-05drivers and browsers up to date ? bad default option in firefox ? Note that after several crashes, some browser fallback to emulation mode (thus the suggestion to relaunch).", "VioletGiraffe, 2018-04-05@FabriceNeyret2 interesting, thanks for the info. Odd. My graphics are in order, that's for sure, just tested with a small OpenGL tool.", "FabriceNeyret2, 2018-04-05@VioletGiraffe meaning your system is not webGL2.0 compatible. test: http://webglreport.com/?v=2", "or possibly relaunch the browser.", "VioletGiraffe, 2018-04-05\"texelFetch: no matching overloaded function found\" in Firefox 60.0b9.", "FabriceNeyret2, 2018-04-05@Gotz:", "", "ok.", "", "BTW, you have no longer compiling shaders", "", "hint: use [ i m g ] tag for direct image insertion. on imgur, \"open image in separate tab\" to get the true image url.", "GottZ, 2018-04-05looks pretty much like this to me: https://i.imgur.com/pykGO0f.png", "this is awesome.", "FabriceNeyret2, 2018-04-05uh, forget that:  it's just that the grab was on a luminous background. identical, then.", "FabriceNeyret2, 2018-04-05on linux (i.e. openGL) it doesn't look like the facebook grab: most link are black !", "Vick, 2018-04-05So mysterious atmosphere !", "iq, 2018-03-23The compact (and fast) wat to compute the distance is float SqDistancePtSegment( vec2 a, vec2 b, vec2 p )", "{", "vec2 pa = p-a, ba = b-a;", "float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );", "vec2 d = pa - ba*h;", "return dot(d,d  );", "}", "Duke, 2017-12-17Nice!", "Virgill, 2017-12-16rocks hard!", "rigel, 2017-12-16So \"simple\" and yet so very artistic.  it !", "flockaroo, 2017-12-16really pretty!", "Shane, 2017-12-16 Stylishly presented, as always.", "ocb, 2017-12-16LOVE !!!", "iq, 2017-12-16It's beautiful!!!! Super super.", "", "You don't need raymarching btw, you do analytical ray-segment proximity queries: https://www.shadertoy.com/view/4slGz4", "BigWIngs, 2017-12-16Oww dude this is awesome! Well done!", "Dave_Hoskins, 2017-12-15Very atmospheric.  it.", "shau, 2016-06-18My mind is going. Reminds me of an old DOS program called Bomb, but better", "rgbk, 2016-05-18This is worth putting on openframe.io", "anastadunbar, 2016-05-17Looks very funky.", "Shane, 2016-05-02@inferno & @aiekick", "Abstract, vector-like renderings don't appeal to everyone. I found that out when my girlfriend walked passed the screen, so I'm glad someone appreciates them.", "inferno, 2016-04-30http://www.popandroll.com/coke-art/Keith_Haring3.jpg", "inferno, 2016-04-30I love it ! It looks like a Keith Haring picture.", "http://www.popandroll.com/coke-art/Keith_Haring3.jpg", "aiekick, 2016-04-29beautifull", "cauliflower, 2016-12-27Wow, the distorted outside area looks amazing!", "PS: As you don\u2018t need the green function anymore, you may skip the extra CPU-cycles for atan() in the inner loop.", "adammaj1, 2015-02-01Is your old page : http://web.archive.org/web/20080609041409/http://rgba.scenesp.org/iq/trastero/koening/index.htm available ?", "wj, 2023-02-06nice. I took the liberty of adding your shader to the list of visualizers that I am using on my chiptune player hobby project here (see \"eclipe\" toggle):", "", "http://www.wothke.ch/playmod/?file=/$AdLib%20oscilloscope%20candy/MODLAND/Ad%20Lib/Exotic%20AdLib/Shadowdancer/eiserne%20front%20bbstro%20tune.xad&emulator=AdPlug&tab=fx", "", "I did not see a license info here so let me know in case you want me to remove it..", "toto263, 2019-09-18Can I use your code in my commercial music player?", "yoman, 2018-04-06Thanks great", "ray7551, 2017-08-03Nice one, and the code is simple and learnable. Thank you for sharing.", "poljere, 2014-06-13Pretty!", "aik6980, 2021-11-01Hi,", "I wonder if anyone have an idea how could I map this lovely Wind waker style ocean onto a Sphere without any stretching artifact?", "", "Thanks", "Veggiebob, 2018-10-12OK that's good. Making all that code would've sucked.", "Polyflare, 2018-10-12I made a separate program to randomly place circles until it matched a target texture. I removed the public code from GitHub a while ago but it was a fairly small program that didn't take long to make.", "Veggiebob, 2018-10-11Did you use a separate program to place the circles and generate code or did you do by hand?", "rockeyda, 2015-06-27that's a nice cartoony affect. i love it when things like this are done with out usage of textures.", "aiekick, 2015-01-29yeah nice", "easyrock, 2022-01-25Fantastic! So much to learn. Thank you.", "Irbis, 2022-01-23TStorm, ofc", "https://steamcommunity.com/sharedfiles/filedetails/?id=1726697188", "tlecoz, 2022-01-23waow", "TStorm, 2022-01-22This looks awesome. I want this as my wallpaper in Wallpaper Engine. Can this be done?", "x1276, 2022-01-21genius", "jin_x, 2022-01-21Great! Very beautiful is quite small code.", "jorge2017a2, 2022-01-21  nice style and design!!!!", "lz, 2022-01-19Amazing.", "xef6, 2021-11-28\u2728", "coyote, 2021-07-17", "Shane, 2021-07-08Really cool scene. I love the sense of scale and camera work.", "neozhaoliang, 2021-07-08Like your work, always produce amazing effects with short magic code.", "zproxy, 2021-07-07TRON", "Tater, 2021-07-07woah!", "jorge2017a1, 2021-07-07This should call the Electronic Matrix .... escape from the 3d physical world", "oneshade, 2021-07-07Cool!", "morimea, 2021-07-07wow amazing!", "dean_the_coder, 2021-07-07Cool!", "iq, 2021-07-07Really nice!", "nimitz, 2022-05-16Great use of that pseudo-voronoi! And nice coloring too!", "Elizsulli, 2022-04-03WOW, the floating bricks are so realist, as it they are cracking the triangle.", "asneakyfatcat, 2022-03-31Wicked", "Bricktronic, 2022-02-01Wow! This is really cool! I love this voronoi shatter effect, this could potentially be a useful effect in games!", "Hyeve, 2022-01-30Specifically, when I noticed and tested a bit, the thing that was (for whatever reason) killing performance on the mac was modifying certain variables inside a kifs loop. One single variable assignment dropped the framerate from around 55 down to 15 on the mac, but had the expected near-zero performance impact on windows.", "Hyeve, 2022-01-30I know there's some code structures that macs just really don't like, for some reason. Some types of kifs and iterative loops will absolutely kill performance if I try them on a mac, but have comparatively no performance cost at all on my normal windows machine.", "Tater, 2022-01-29Thanks @aiekick, @MacSlow, @jt, @hamtarodeluze, @mrange!", "", "@jt I added \"impossible\" tag since that seems to be what other people are using.", "", "@asdf989, unfortunately I don't have enough knowledge to tell you what might be causing your issue. I think the M1 macs are still not well supported for webgl. Maybe someone else will know.", "asdf989, 2022-01-28I'm running on a Mac Book Pro M1 with lots of extra GPU and this is showing at 2fps. Activity Manager shows its running 700% Chrome GPU.", "", "I flipped over to my Mac Book Pro 2019 and its running at 50fps.", "", "Additionally I often get crashes on ShaderToy.", "", "Any ideas whats wrong with my Macbook configuration for running WebGL?", "mrange, 2022-01-27nice", "hamtarodeluxe, 2022-01-27Awesome! Thanks for the camera control, it helps with the brain confusion", "jt, 2022-01-27You could add \"impossible object\" as tag (https://en.wikipedia.org/wiki/Impossible_object).", "Also apparently people before Penrose discovered this https://en.wikipedia.org/wiki/Oscar_Reutersv%C3%A4rd.", "A typical case of https://en.wikipedia.org/wiki/Stigler%27s_law_of_eponymy ;-)", "jt, 2022-01-27Incredible", "MacSlow, 2022-01-27This is great!", "aiekick, 2022-01-23super nice", "Tater, 2022-01-23ah! I found the post which was the inspiration for the crumble effect, I couldn't find it earlier.", "https://twitter.com/TatsuyaBot/status/1481851713363476484", "", "and thanks @z0rg, @lz, @do", "z0rg, 2022-01-23Super cool great job", "lz, 2022-01-22Very cool", "do, 2022-01-22super cool.", "Tater, 2022-01-22Also thanks @FabriceNeyret2, @byt3_m3chanic, @ocb @jeyko, @jorge2017a2, @tdhooper. <3", "Tater, 2022-01-22@FabriceNeyret2, Sure I put them as a define.", "", "There's 3 main \"tricks\" here that I used. The first one is simple, it's just the perspective trick for the penrose triangle and I added a little bit of an extra overhang on one end for the AO calculation, I learned that from the yx penrose shader.", "", "The second trick is the voronoi crumble. In order to get it to be continuous I first rotate the coordinate space so that the x and y directions are parallel to the camera plane, then for the z dimension I use the ray length relative to the first time it hits the outer part of the triangle, that way the length passed to the voronoi will be the same regardless of how far back it is. This causes issues with the normal calculation which I was sorta able to fix but in the end I just used iteration shading anyway to cover it up.", "", "The third trick is for the moving blocks, I do the same as with the voronoi crumble where I rotate space so the x and y are parallel for the camera, then I rotated them perpendicular to the sides of the triangle and everytime they pass the half way point they get teleported super far behind or super far infront of the triangle so it looks like they rotate around it.", "", "@tdhooper, the convincing part is probably because I used a different distance metric for the voronoi max(p.x,max(p.y,p.z)) instead of length(p)", "tdhooper, 2022-01-22Crumble effect is fantastic, I don't understand it, but looks way more convincing than regular voronoi.", "jorge2017a2, 2022-01-22It is very original toy and very interesting design!!!", "jeyko, 2022-01-22nice", "ocb, 2022-01-22Cracks are amazing!", "byt3_m3chanic, 2022-01-22Always jelly over your shaders!", "FabriceNeyret2, 2022-01-22NB: commented camera control would deserve a #define ;-)", "Periodic noise was enough to ensure the apparent continuity ?", "FabriceNeyret2, 2022-01-22wow, good !", "Tater, 2022-01-22@Shane Thanks! Your voronoi technique is really amazing, it looks so close to the real thing while being a lot faster.", "Shane, 2022-01-22 Clean, cool to look at, and simple. Fantastic shader.", "", "I often joke that I haven't had an original idea since the 90s, but thanks to slow computers, I still have to think outside the box every now and again. The idea to use rotated grids to produce hashless minimal instruction Voronoi-looking patterns came to me when I was sleeping, believe it or not. There are hashes for offsets here, but they can be hand picked. It's also possible to precalculate and store 3D Voronoi in the faces of the cube map, but it's a lot of work.", "Tater, 2022-01-22Thanks @iq and @duke!!", "iq, 2022-01-22wow, super amazing, I love it!", "Duke, 2022-01-22Cool!", "Dave_Hoskins, 2020-06-28@PZerua, the matrix rotates the coordinate slightly to create better variation on each octave. iq could have pre-multiplied the matrix by 2.1 or something in the definition, but I suppose it makes no real speed difference.", "PZerua, 2018-05-30Hi! Can anyone explain the meaning of the \"m\" matrix used to apply octaves? Why not just multiply by 2?", "Antonalog, 2013-10-17LIKE", "knighty, 2013-10-15Neat!", "Rotating the gradient vector makes it \"flow\" (IIRC it's called flow noise)", "vec3 hash( vec3 p )", "{", "p = vec3( dot(p,vec3(127.1,311.7, 74.7)),", "dot(p,vec3(269.5,183.3,246.1)),", "dot(p,vec3(113.5,271.9,124.6)));", "p = -1.0 + 2.0*fract(sin(p)*43758.5453123);", "#if 1", "float t=iGlobalTime*3.;", "mat2 m=mat2(vec2(cos(t),-sin(t)), vec2(sin(t),cos(t)));//it should be a mat3 but this just works.", "p.xz=m*p.xz;", "#endif", "return p;", "}", "xef6, 2022-04-11amazing", "Rugged, 2021-03-14WOW.", "nsm2, 2020-07-14This is so beautiful. I caught myself holding my mouth open because it is so cool", "wyatt, 2020-04-09 I love when people use my work! it looks very cool! Someone already used that without my permission and with my permission someone else. tbh idk why this one is so popular, I think I have way cooler shaders lol", "balkhan, 2020-04-09I modified parts of your code and used it with images intensity to direct the signal, made images of it and posted on instagram while giving link to here, I hope you don't mind, if you do, tell me and I'll delete swiftly. (https://www.instagram.com/p/B-xWESBDk64/ && https://www.instagram.com/p/B-xWESBDk64/)", "wyatt, 2019-09-24The branching happens because the velocity is calculated at each pixel rather than at the location of the particle. This way two pixels will disagree sometimes and split the particle in two", "wyatt, 2019-09-24Paths and particles diffuse a signal that tells others to run away. The particles surf on the signal which makes them seem to have a velocity. The particles are tracked by having each pixel track the closest particle ( voronoi particles )", "Jordan, 2019-09-23How does this work?", "OliverSchaff, 2019-09-23Wow!!! Unbelievable", "FabriceNeyret2, 2019-09-23still niggard with comments ;-)", "FabriceNeyret2, 2019-09-23niiiice !", "iapafoto, 2019-09-23wow super nive", "dr2, 2019-09-23Mesmerizing", "iq, 2019-09-23Super nice", "Jordan, 2019-09-23Cool as!", "Shane, 2019-09-23This is awesome. Very watchable.", "wyatt, 2019-09-23", "BigWIngs, 2019-09-22So mesmerizing to watch. It really seems alive.", "kornerr, 2017-11-13Hi. I've used your pretty shader in my simple Memory-like game, hope you like the result: https://bitbucket.org/ogstudio-games/memory-colors", "<3", "darkshader, 2017-03-12what do you mean by initializing ''rz''? sorry beginner here", "nimitz, 2014-02-09updated, thanks poljere", "poljere, 2014-02-02The shader does not render properly in all our computers, you need to initialize variable \"rz\" line 103.", "", "Looks great in the rest of the systems", "iq, 2014-01-29Awesome, they look great!", "fizzer, 2014-01-18Great demonstration! It would be cool to see the parameters change over time to create an evolving flare with lots of variations.", "movAX13h, 2014-01-18Really nice set of flares!", "Abstract_Algorithm, 2014-01-17Types 2 and 4 are just amazing. *_*", "aiekick, 2020-09-04it just a particle effect but instead use circle or quad, im using a big rectangle.", "line 8 : f += .1 / length(g); => circle (classic)", "line 8 : f += .1 / max(abs(g.x), abs(g.y)); => quad", "line 8 : f += .1 / max(abs(g.x), (g.y)); => rectangle from bottom start (by invert abs between g.x and g.y you can have it horizontal by ex", "leavittx, 2020-02-15How does it work?", "I don't get it", "aiekick, 2017-08-17nice", "Zabidon, 2017-07-17-3 chars:", "void mainImage( out vec4 f, vec2 g )", "{", "f.xyz = iResolution;", "vec2 v = (g+g-f.xy)/f.y*3.;", "f *= texture(iChannel0, g/f.xy) / length(f);", "g = vec2(iFrame + 2, iFrame);", "g = v - sin(g) * fract(iTime*.1 + 4.*sin(g))*3.;", "f += .1 / max(abs(g.x), g.y);", "}", "aiekick, 2017-07-14lo, thanks, forgot that", "Himred, 2017-07-14You cave 2 chars in buf A", "replace 1e-1 with .1", "xhl388, 2023-02-15amazing!", "morisil, 2022-11-25@behrad, sure, I would be happy to read your thesis.", "behrad, 2022-11-25Hi I am doing my thesis and I just want to ask if I can use your shader within Touchdesigner for educational purposes. I am researching the agency of software within the context of generative design.", "morisil, 2022-11-24Indeed, it's not sound reactive.First I made this visual system, then I was thinking about matching music, and after several tries out of the list of my favorite tracks and composers (available on soundclloud) I settled with Giovani Sollima's piece, L'invenzione del nero in particular was the only music which made sense in the network of my associations with this visual.", "cbm010, 2022-11-23There are no references to iChannel0 in the shader source. Hmm ...", "cbm010, 2022-11-23If I change the music selection in iChannel0, the generated art does not change. I suspect that the actual music input is somehow 'fixed'?", "LuckyMicky, 2022-11-17I want this be my MAC screensaver", "valena, 2022-11-16Bro how can human make this without LSD", "zhangyi0319, 2022-11-14nice", "opengld, 2022-11-13\u592a\u9177\u4e86", "leon, 2022-11-09Nice!!", "joo, 2022-11-09Yup", "julianlumia, 2022-11-09pretty!", "mrange, 2022-11-08Very interesting.", "ocb, 2022-10-28Super nice !", "FabriceNeyret2, 2022-10-28code golfed down to 585 chars ( from 1940 ) :-D", "#define R(a)   mat2(cos(a + vec4(0,33,11,0)))", "#define C(U,w) smoothstep( w, -w, sin(length(fract(P+U*.01)*2.-1.) * 3.) *.5  -.118 )", "", "void mainImage(out vec4 O, vec2 u) {", "", "vec2  R = iResolution.xy, P,", "U = ( u+u - R ) / min(R.x, R.y);", "float d = length(U),", "t = iTime, i=0.,", "w = .4 + sin(t * .52) * .2,", "l = .5;", "", "U *= R( sin(t*.14) * .3 )", "* (sin(t * .15) + 2.) * .3;", "U *= log(length(U)*.428) * 1.1;", "", "for ( O *= 0. ; ++i < 10.; l *= .6, w *= .63 )", "P = U + vec2(sin(t*.12), cos(t*.13)),", "O = min( O + vec4( C(-U,w), C(0.,w), C(U,w), 0 ) * l, 1.),", "U *= R( sin(t*.05) * 1.33 )", "* ( 1.1 + C(0.,.04) * 1.2 );", "", "O = pow(O, 1.+ mix( sin(t*vec4(.34,.37,.4,0) ),-sin(t*vec4(.43,.46,.49,0) ), d-.5) *.4*vec4(1,1,-1,0) )", "* smoothstep(2.1, .7, d);", "}", "FabriceNeyret2, 2022-10-28some remarks:", "", "mod(st, 1. / modScale) * modScale  = fract(st* modScale)", "", "some unused code.", "", "just topGrading = 1. + vec3(sin) * GRADING_INTENSITY", "and it could even be defered post mix", "", "\u2192 simplification down to 675 chars ( from 1940 , before deep code  golfing ) ;-)", "#define rot(a) mat2(cos(a + vec4(0,33,11,0)))", "#define C(U,w) smoothstep( w, -w, sin(length(fract(U)*2.-1.) * 3.) *.5  -.118 )", "", "void mainImage(out vec4 O, vec2 u) {", "", "vec2  R = iResolution.xy, P,", "U = ( u+u - R ) / min(R.x, R.y);", "float d = length(U),", "t = iTime,", "blur = .4 + sin(t * .52) * .2,", "luma = .5,", "abber = .01;", "", "U *= rot( sin(t * .14) * .3 )", "* (sin(t * .15) + 2.) * .3;", "U *= log(length(U)*.428) * 1.1;", "", "O *= 0.;", "for (float i = 0.; i < 10.; i++) {", "P = U + vec2(sin(t*.12), cos(t*.13));", "O.rgb += vec3(", "C( P - U * abber, blur),", "C( P, blur),", "C( P + U * abber, blur)", ") * luma;", "O = min(O,1.);", "U *= ( 1.1 + C(P,.04) * 1.2 )", "*   rot( sin(t*.05) * 1.33 );", "luma *= .6;", "blur *= .63;", "}", "", "vec3 C = 1.+mix(  sin(t * vec3(1.13,1.23,1.33) * .3),", "- sin(t * vec3(1.43,1.53,1.63) * .3), d-.5) *.4*vec3(1,1,-1);", "O = vec4(pow(O.rgb, C), 1) * smoothstep(2.1, .7, d);", "}", "FabriceNeyret2, 2022-10-28cool, odd, different :-)", "iq, 2022-10-28Beautiful", "jt, 2022-09-18Beautiful!", "FoxyOfJungle, 2021-10-24This is awesome and very beautiful!!", "pyBlob, 2021-08-17Mouse interaction does not work anymore -> change iMouse.w>0.1 to iMouse.z>0.1 in both mainImage functions.", "jeyko, 2019-07-30unreal", "ingagard, 2017-11-16New shader released:", "https://www.shadertoy.com/view/lllBRn", "ingagard, 2017-11-14Very near completion now. I have been working hard the last week and will relase the new shader right after I\u00b4ve done some optimizations. Really worried it will end up giving Iq crashes again and end up in the trash. :-/ Hopefully it will work for as many as possible this time.", "ingagard, 2017-11-07I wont delete this one. My new one is totally different and contains much more details. It will also be much faster and compiles many times faster for me.  I have learned a bit more since I did this shader. ;-)", "FabriceNeyret2, 2017-11-07no, please, don't delete nice unique working shaders.", "Almost everyone here has \"infancy shaders\", and your's are already impressive.", "Even to see your own progression it's interesting.", "ingagard, 2017-11-07Soon, very soon this shader will meet it\u00b4s maker. LOL", "My remake is coming along well. Only looking back at this, make me a bit ashamed. :-S", "iapafoto, 2017-10-11wow fantastic, very precise modeling and texturing", "Dave_Hoskins, 2017-10-02Oh I get it now, thanks. That sounds complicated, especially with reflections.", "ingagard, 2017-10-02The scene is split in two to prevent compilation timeout. Buffer a render the lower part of the scene (without the tower), the main scene renders the actual tower, but not the bridge, sea and stones. Thats why I have equal setups in buffer and main.", "Dave_Hoskins, 2017-10-02That's faster. I still don't understand why Softshadow is being called 4 times, or even why GetSceneLight is being called in Buff A and in Image?", "ingagard, 2017-10-02sharp as a knife. Hope you like my improvements", "ingagard, 2017-09-21Thanks for clearing things up ollj, very appriciated. I guess I have to learn define as it looks very useful. Didn\u00b4t know that you can make typeless functions with this. It has been very useful for me in C# and I guess I can have some use for it here as well. Maybe a typeless raymarch function with a map input. How would that look using a map as input for such define function?", "ollj, 2017-09-20//messy mess: without define its;", "vec3 rotate(vec3 a){returnvec3(-a.x,a.y,a.z) ;}", "a=rotate(a.yx).yxz;", "a=rotate(a.xz).zyx;", "//or something like that, bottom line you either have a duped nearly identical  rotate function, or you swivel back and forth.", "//swiveling back and forth is fine, a cakewalk for a vector processor. swiveling back and forth is just very hard to debug.", "ollj, 2017-09-20#define is almost only about making a function typeless so that input type can be float or vec2 or vec3 or vec4.", "iif your function repediately uses the same swivelins or  .x .y .z domains, and if you can not vectorize it (ibecause it contains a projection , a dot() ,even if it is part of length() ) you can use a #define to make the swiveling a separate parameter, instead of swiveling the input parameter.", "this separation can sometimes make sense, when it ends up folding something like oregami.", "", "#define rotateD(a,d,e) vec2(-a.d,a.e)", "a=rotateD(a,x,y);", "a=rotateD(a,x,z);", "//above is doable with a define:", "//below is the same with a function, or a define.", "a=rotateD(a.yx)", "vec2 rotate(vec2 a){returnvec2(-a.x,a.y) ;}", "a=rotate(a.xz).xz", "the define approach gets more interesting if it takes one vector, and swivels it in multiple different parametric ways within the same define. a KIFS tends to do these things.", "", "another fun thing is that you can do", "#undef #ifdef #ifndef #else #endif", "iin  context to a functions namespace.", "These \"#\" macro command aliases are computed only once, on compile time. They tend to make you use more local type const (and more memory in general, for faster run-times), that then will not become NaN (no matter how much you may want it to).", "", "#undef  seems to be a core element to making good quine code.", "ingagard, 2017-09-19Glad to hear KylBlz. Really great shaders on your side as well.", "KylBlz, 2017-09-18Mmmm good stuff", "ingagard, 2017-09-18Thanks for clearing things out guys. Couldn\u00b4t ask for better help. Hopefully each scene I do will get more optimized and faster as I advance. Much to take in as a beginner, but all you are saying are great help for me.", "FabriceNeyret2, 2017-09-18- in is useless: it's the default.   But out is not inout (it is only on windows, which cause incompatibilities bugs).", "FabriceNeyret2, 2017-09-18- I'm pretty sure the compiler see by itself what is const and what is not.", "- macro is just code substitution. same for functions, indeed, since in GLSL they are unrolled. The advantage of macro is just for the programmer: more concise (good for trivial small things), plus the only way to have the same function operating on float/vec2/vec3/vec4, plus the only way to overload builtin functions.", "- I'm pretty sure you can have your very complex scene + effect in better perfs and compilation time. Just it suppose you organize correctly at start the structures, algorithmic strategies, and some compromise impacting the early scene design. Learning this on an already writen long project is probably not the best way. As I said earlier, efficient SIMD programming is very different to efficient CPU programming, and in term of compilation burden it is even more different than in terms of perfs. For instance, optimizing by testing if(precondition) do bigwork can indeed be counterproductive. but deferred calcululation, for sqrt or shading, is even more well paying than on CPU.", "ingagard, 2017-09-18Oh wow even more info.. Have to go to lunch. But thanks. Will read later.", "ingagard, 2017-09-18I\u00b4m impressed by you ollj. :-) Makes me what you really work with. Very deep explainations for sure.", "The bounding volumes I get as I\u00b4ve used it many times when working with complex particles systems and crowd AI.", "The define is a bit more confusing. I get what it means. You assign a name to a value or function for easy access in the code right? But lets say I have the following:", "", "#define rotate(a) mat2(cos(a),-sin(a),sin(a),cos(a))", "", "Is it faster to use   pos.xy *=rotate(1.8) ;", "", "than writing", "", "pos*=mat2(cos(1.8),-sin(1.8),sin(1.8),cos(1.8));", "", "Isn\u00b4t the result the same when compiled???", "", "Can\u00b4t get the benefits of using #define compared with a functions with input variable.  Lets say I have this code:", "", "", "float MapStreeLight( in vec3 p)", "{", "float d= fCylinder(p-vec3(0.31, -3.5, 0.), 0.7, 0.01);", "d=fOpPipe(d, fCylinder(p-vec3(.31, -4., 0.), 0.7, 3.0), .05);", "d=min(d, fCylinderH(p-vec3(.98, -6.14, 0.), 0.05, 2.4));", "d=fOpUnionChamfer(d, fCylinderH(p-vec3(.98, -8., 0.), 0.1, 1.0), 0.12);", "d=min(d, sdSphere(p-vec3(-0.05, -3.4, 0.), 0.2));", "d=min(d, sdSphere(p-vec3(-0.05, -3.75, 0.), 0.4));", "d=max(d, -sdSphere(p-vec3(-.05, -3.9, 0.), 0.45));", "", "return d;", "}", "", "Could this be defined in a short way to speed things up. If so please give a sample of that so I can see the actual code.", "Thanks for taking time to help.", "ollj, 2017-09-18Being overly explicit to the parser by adding \"in\" where it can be implicitly omitted , possibly can increase compile time.", "", "Functions that contain static constants increases runtime and compile time.", "", "Global variables lower compile time and tun time and lowers opengl compatibility. They can make source code smaller, not worth it.", "", "Functions return the squared distance for distance comparison, using dot(a,a) instead of length(a), and delaying the sqrt() of length=sqrt(dot(a,a)) as long as possible, can increase fps. Do this when you have min() max() and squared smin() functions that compare 2 squared lengths to keep only one of 2. euclidean distances, this removes one sqrt() for each min() or max().", "", "* A lot of identities are invitations to making subroutines:", "the distance to a line segment can be calculate with a normalized vector and a 2d determinant()== perpendicular dot-product:", "float det2d(vec2 a, vec2 b){return a.x*b.y-a.y*b.x;}", "//I turned det2d() into the identical dotp():", "vec2 perp(vec2 a){return v1(-a.y,a.x);}//perpendicular ==90deg rotation", "float dotp(vec2 a,vec2 b){", "//return determinant(vec4(a,b)); //less compatibility than the explicit identity below.", "return dot(perp(a),b);}//return [perpendicular dot product]=[2d determinant], has many uses, mostly \"distance to normalized line (segment)\", inccuding all real radical trigonometric constants. but when a line exists only once, without parallel lines or tricky pattern on them, using the good old dot()/dot() liine segment distance is faster.", "lets say, you have a lot of parallel line segments, like window frames. you can buffer a normalized vector, and use that for a distance to a line segment without a division.", "ollj, 2017-09-18bounding volumes increase frame-rate with squares distance to camera, all gets smaller over distance, duh! A simplest performance tweak is to increase camera distance, at least for the first few frames. increasing the Field of View has a similar effect, the more your view is filled with \"nothing==simpler shapes==filler\" the more fps you get. The trick is to exploit your memory of higher detail, while mostly showing a lowres zoomed out image or something of lower complexity often occluding something of higher complexity.", "", "#define performance differences depend on how you use it in what context. #define performance generally had surprising benefits if only due to:", "- thinking more about structure and symmetry, avoiding repetitions, using swiveling more efficiently (very cheap 90deg rotation) , folding domains, playing topological-manifold - origami. There are some trigonometry paper folding axioms that come down to binomials and sign(a); Used to design window shades and solar panels.", "- less repetition, less code to load, memorize and parse. cognitive load matters. abstraction helps. #define aliases are instances of abstraction. Parsing becomes more like a L-systemsystem, almost a cellular automaton, where, small code can expand a lot. This can appear as if they create more aperiodic tessellations from self, as if information comes from nothing, while actually just being an expanding fractal with simple repeating symmetries. You can exploit this in a long loading bar (bad) or just realize that keeping the iteration cont short is likely for the best. -> if you use a #define very often in very similar contexts, you are likely lacking awareness of a simple symmetry, likely a simple (a)periodic tiling is not being utilized for performance then.", "The fun part of cellular automata is hat some are even  Turing complete L-system fractals.", "ingagard, 2017-09-18forgot...", "", "2. cylinder for the platform with the stones and railing.", "", ",also covers streetlights", "ingagard, 2017-09-18Added another bb for the bridge now. A bit faster for me.", "I have these BB at the time.", "", "1. cylinder for the tower.", "2. cylinder for the platform with the stones and railing.", "3. A cube for a bridge segment", "ingagard, 2017-09-18@flockaroo THANKS! Yeah I know the horizon is a bit flat. I honestly wanted much more detail in this shader, with islands and stuff. But the limits I work under here did not allow me. As a computer artist used to billions of polygons, this is harch.", "LOL", "", "@FabriceNeyret2  OK, good to know. Faster for me at least. Good the compilation time didn\u00b4t increase.", "", "@ ollj   Wow, much info here. Thanks for giving me all this knowleage. I used every sing trick when working in C#, java and C++. Here I\u00b4m totally lost. Everything I tried, end up giving a different result performance wise.", "", "ONE IMPORTANT QUESTION. Does using #define and making variables const result in a great performance gain? Also would like to know if using   INOUT or just IN for variables in functions are better than just using local variables for each function.", "ollj, 2017-09-18The main issue is that optimization (and compatibility) always depends on a bias from its context.", "Shadertoy is opengl_ES in a javascript wrapper, a very unpredictable context.", "This can create a lot of arguments over nothing, faulty generalizations and a lot of surprises, like;", "- suddenly 4x performance on older hardware by ading a bounding volume.", "- suddenly it takes 1 second longer to compile all the branches of all the loops and bounding volumes on newer hardware.", "- less branching code runs much slower but frame-rates fluctuate less, making it smoother.", "- less branching code may run a bit faster on newer hardware, by having more support for longer pipelines (16 cores serially execute ~16 operations in 1 clock cycle)", "- more branching code (more bounding volumes) fluctuates a lot more (than expected) in performance, depending on relation between objects and camera.", "All this is runt-ime optimization, best done with trial and error, possibly using Bayes'_theorem, neural networks or some other differentiating dynamic pointer system.", "In unpredictable market environments, all you can work with are fuzzy and often temporary (time constrained) trends, an FBM with fewer octaves.", "", "* (local) Static as the default setting:", "iq has 2 shaders with bounding boxes around rotating cylinders. This in a different more general more dynamic context. A good basis to simplify, but not a good basis for general assumptions.", "A lot of simplification comes from making relative object properties more static, objects or cameras being less mobile.", "ideally place static objects physically within quadtrees.", "Everyone easily underestimates the benefits of using STATIC differential properties for better performance, when differences between 2 thins change less often, or never.", "The F# language insists on teaching you this, by making \"static\" the default type and by requiring \"mutable\" to be explicitly stated.", "Make many differentials powers of 2, 3 or 5 and things simplify more.", "When the relation between object and camera is more constrained, it often makes sense to use some special conservative shortcuts, especially when curvature is simpler, local extremas are easier to estimate (no discontinuities), when an object is mostly convex, when a polynomial can be simplified to (multiple) binomials.", "This often ends up substituting analysis with a heuristic iterative process, like Newton's method or with a loop that behaves like a binary search that is more implicit and less precise or less mutable, using interval aritmetic for more performance.", "If your shape is convex and easily differentiable, you can often skip right to its second derivative, and take its curvature for a bounary, to quikly estimate some higher power local extrema.", "fwidth() is low in precision, but generally good enough to very quickly estimate curvature over 2 domains, like SSAO.", "", "* Heuristic loops:", "The shortcut choice  is to abort a loop when your precision reaches a good enough threshold. That shreshold can be loosened on dynamic conditios.", "This comes in useful when you calculate [shortest point along a ray to an object], as part of tracing a possible intersection.", "running out of time, being far away from the camera, just screw precision, even screw a possible surface further away, just ship it, even with minor errors.", "Heuristics applies the Sunk cost fallacy to analysis.", "Heuristics is generally good enough for visuals, its not like you send astronauts into orbit.", "A raymarching loop is inherently heuristic, twiddle its epsilon and see the difference.", "Heuristics speeds up convergence a lot, often resulting in smoother and higher fps over time.", "", "* The downside to heuristics is that it adds for() loops to your code.:", "* * This is often parsed by adding a branch between every iteration. This can result in slightly slower compile and run time than an analytic approach.", "* * This is often parsed by unrolling the loop, which has the tendency to crash some GFG driver implementations in a stack-heap-collision on old hardware with less memory.", "* * - easily worked around by setting initial constants to very few iterations,", "* * - with a wrapper can benchmark performance and add iterations while framerate stays high.", "flockaroo, 2017-09-18wow! really many details i like about this! looks very realistic (the horizon is a bit too symmetric - somewhat destroys the illusion for me)", "FabriceNeyret2, 2017-09-18at bit slower (or maybe same ?) I would say, and same compilation time.", "ingagard, 2017-09-1854 fps at best, 29 at worst in Chrome now...", "ingagard, 2017-09-18I made the changes. Did not dare to change too much. Just some minor volume checks. If any problems occur, I will change back. Please tell if FPS is increased.", "ingagard, 2017-09-18I actually tested out that bounding volume right now.... hmmm. not much fps increase anymore. Also introduces some ray-misses (black spots) sometimes. The overall shader performans did stutter much more. 45 fps at best 22 as worst.", "ingagard, 2017-09-18You are very right in what you are saying. Did not even think about a bounding cylinder for the tower...... But why did Iq tell me to remove this from the windows? He told me it could actually be a cause of crash on some cpu structures? Very affraid I do things worse by changing the code, but I actually got +15 fps increase by doing so.", "", "Excellent help Ollj. Very appreciated!", "ollj, 2017-09-17Bounding volume increase fps, easily 2X to 4X, depending on set. more for older hardware, less for higher resolutions.", "Bounding volumes add code to the shader, but most times not much, unless you 20k characters of different bounding volumes", "", "There was a version of moebius gears that ran only at 15 fps, instead of 60. just because it did not use a (hollowed out) cylinder as bounding volume.", "", "Your set is mostly inside a thin cylinder. trace that cylinder first, do not even care where the ray hits a cylinder, only care IF it hits a cylinder.", "your bounding volume reduces to a bool variable that separates inside from outside. use it as an if-condition. all fragments who's ray do not hit the cylinder never have to calculate the geometry inside the cylinder.", "", "The same can easily be done for near endless planes of a nearly flat ground to a horizon, a weak spot for sphere tracking are near-parallel cases. Put a bounding plane over the highest point that an ocean can reach. any fragment that goes up and away from this, never touches the ocean, does not need to calculate whatever voronoi noise defines your ocean.", "", "A bounding volume is a special case of a pattern. patterns are defined over domains,dimensions. better patterns exist over N-domains. domains an be swiveled, domains can be parameters of a #define", "", "of", "https://www.shadertoy.com/view/llBGzm", "the function", "AxisSurface()", "shows you how to make a domain (axis) parametric.", "it uses \"pattern\" iteratively. when it is instantiated as \"// Sidewalk top.\"", "", "remove all street lights, remove the bridge, and learn how the sidewalk is defined, basically with a separating boundaries, building up to more complicated \"patterns\"  There is a lot of symmetry in using patterns like this.", "", "using typeless #define has some tricky issues, basically add extra () to be more explicit on the order of operations just to be save. but its worth trying, because it makes \"distance to sphere\" identical to \"distance to circle\". by generalizing 2 domain specific functions to function over multiple domains,  a 4d torus suddenly becomes relatively simple. and that can be projected back down to 3 or 2 domains in all kinds of useful shapes.", "ingagard, 2017-09-17Thanks ollj.", "", "In this shader I have used both single directional and polar mod operations. If not, this shader would have been 10 times larger. Cant use it more that I already have here.", "", "Bounding volume sounds really interesting. I think I did something similar with my windows, just checking a larger box distance BEFORE allowing the map to reach the actual windows. The performance was alot better, BUT Iq suggested me to remove this due to some compatibility issues with some processors. Would using BVH really help in reducing the loading time or just performance?", "", "", "- \"A key to good compile time is to use the same patterns with different parameters, domains as parameters, and with swiveled domains even if that only lowers loading time, that is still part of parsing time,a parser needing less memory.\"", "", "That makes me scratch my head. I checked out the example, but that made me even more confused. Dont really get it, but it sounds interesting.", "", "You sure are very knowledged and skilled Ollj.", "ollj, 2017-09-17okay i see, url tags break easily, why do i even bother.", "ollj, 2017-09-17pMod*()", "ollj, 2017-09-17did not expect 20 fps. even the elephant shaped distance field of IQ performs worse than this,due to more smin().", "", "Long compile times are a bigger issue here. they tent to halt a browser for too long, and that can crate some timeout issues on some OS.", "", "A key to good performance is to use \"modulo with offset\", pMod*() of as core to avoiding repetition. pModMirror can be constrained by an interval and have C0 continuity for sphere tracking.", "", "A key to good performance and good compile time is to use Bound-ing Volume (hierarchy), BVH, tracing a bounding box (hull,line), and marching only inside (on one side) of it. It can make sense to sort Bounding-volumes by TextureID; the same bounding volume can easily contain the same TextureID, making handling of multiple textures simpler.", "", "A key to good compile time is to use the same patterns with different parameters, domains as parameters, and with swiveled domains even if that only lowers loading time, that is still part of parsing time,a parser needing less memory.", "", "---", "", "This bridges a gap between making a FinalFantasy7 Prerendered static 3d background and using the same geometry for a lower resolution lower detail real-time rendering.", "", "do not just ban it. just fix your animated preview with a button to overwrite it to a stable static preview.", "ingagard, 2017-09-17Thanks zproxy", "zproxy, 2017-09-16sweet", "ingagard, 2017-09-16Me and math....... Yeah thanks for the info. Decided to texture the important parts by cylinder mapping instead. Only one call.", "FabriceNeyret2, 2017-09-16you can use eiver grad or Lod.", "with grad, you just have to compute or even just estimate the derivative of U in x and y screen directions when accessing texture(ichannel,U).", "with Lod, you just have to estimate the scaling of the texture compare to screen (indeed, its log2)", "ingagard, 2017-09-16Apologize to Iq, I didn\u00b4t actually see you had written to me in the old version before deleting it. I saw it when reading my mail. Very helpful. Hope it helps with the changes I\u00b4ve made.", "", "Still cant understand texture grad and how to get the derives....", "ingagard, 2017-09-16Map is ONLY used for distance", "ingagard, 2017-09-16I have made some changes now. Last bit is that gradient for the textures... Noisy as hell right now. I see:", "", "vec4 CubeMap( sampler2D sam, in vec3 hitPos, in vec3 n, in float k, in vec3 gx, in vec3 gy )", "{", "vec3 m = pow( abs( n ), vec3(k) );", "vec4 x = texture2rad( sam, p.yz, gx.yz, gy.yz );", "vec4 y = texture2rad( sam, p.zx, gx.zx, gy.zx );", "vec4 z = texture2rad( sam, p.xy, gx.xy, gy.xy );", "return (x*m.x + y*m.y + z*m.z) / (m.x + m.y + m.z);", "}", "", "I dont know how to calculate gx and gy for this. I\u00b4ve tried look at Arlo, but I cant trace the values that becomes GX/GY. Any clue??", "", "Well my computer is 5 years old, but runs all new games on ultra. Not bad. But compilation times makes me craaazy... :-(", "FabriceNeyret2, 2017-09-16Map() : I see it is also used for shadows. So I hope there is no color / texture / details in map() ? (that can't be seen, but that would cause huge compilation + run time ).", "FabriceNeyret2, 2017-09-1614 sec of shader compilation !!!!!!!!  You don't realize that it's as if your car needed 10 minutes to start when pressing the start button ! ( it's 4 sec on my computer, which is already anormalously slow).", "It's surprising that your OS/GPU don't seem to have a timeout at all (this is usually active for security).", "", "anyway, you do have a way to measure compilation time depending on how you change the code ;-) .  1 sec would be still very slow, but acceptable.", "", "Hint: don't look about perfs for now: what makes the compilation slow is probably unrelated to what makes the shader slow.", "", "for instance if in March() if I replace the main loop by", "for ( int i=0; i<128+(1/iFrame); i++ )", "compilation time is much faster because compiler can no longer unroll it (because it don't know the loop length because it don't see that 1/iFrame = 0 :-) ) and is obliged to really implement this as a loop (which is a bit slower) so that the final code to compile is 128 times shorter. (!)", "ingagard, 2017-09-16My comparison to Steam was just a compare on how hard it would be to for the developers of the games if their games were removed as soon as one of the users had incompatible hardware. Not that easy to make it run on all different configurations. Just saying. Well enogh of that. Fully working with the glass raymarch now.", "", "14 sec is the time it takes for me to compile the image buffer from pressing the button. I will make the suggested changes to the textures. And update. Thanks", "FabriceNeyret2, 2017-09-16( comparaison with Steam: do you think it's fair to compare payed fulltime work of hundred peoples with hobby work of 2 people ? )", "FabriceNeyret2, 2017-09-16what do you mean, 14 sec ?", "FabriceNeyret2, 2017-09-16same if on top of BuffA I do #define texture(c,u) textureLod(c,u,0.)", "", "(and I remember iq explained you why )", "FabriceNeyret2, 2017-09-16in buff A in I replace one (or even two) of the call of CubeMap by vec3(0), compilation time is less than 2\"  (instead of 4\").  ( I remember iq said something about this function ).", "ingagard, 2017-09-16For me the compilation time for buf A is very fast. The image one takes 14 sec", "ingagard, 2017-09-16Oh...... I see Iq replied to the OLD version.. checking my mail now...", "ingagard, 2017-09-16compilation time is halfed when removing fbm...", "FabriceNeyret2, 2017-09-16iq has a job (indeed, several) very demanding, he run shadertoy as one of his numerous hobbies, and you are just one shader among thousands that could use his help. Beside, he already gave a long analysis on your other shader, so you are especially lucky for that.", "", "I'm pretty sure that the crash some people have is immediatly, at compilation (not at run time). Generally it is just caused by timeout because of your long compilation time. And this compilation time duration, you can experiment it yourself: for instance, as I said, compilation time of buffA is 4\" on my not bad GPU (which is an *enormous* time), while compilation time of Image buffer is instantaneous, despite the code is even longer. This tells something, that you can use.", "ingagard, 2017-09-16@FabriceNeyret2", "also want to thank you for sticking with me when trying to solve this. Very helpful. Hopefully I will get it working for all soon.", "ingagard, 2017-09-16Much faster now. I decided to just faking the reflections as they are mostly hidden by the wave. Also made a much faster raymarch for reflections.", "ingagard, 2017-09-16Yeah, but imagine that Steam did like this. If one game didn\u00b4t work on the moderators computer, it got removed....", "It feels like a blind man trying to solve a crossword for me. I cant get the error on my side, how could i then fix it?", "I would appriciate if Iq at least could try to help my rem out some parts of the code and see what causes it to crash.", "", "Well buffA is used for the sea, stones and platform rendering. All reflections is made in that buffer. The main buffer just does the tower rendering WITHOUT any reflection pass.", "FabriceNeyret2, 2017-09-16hint: all the compilation time is spent in buffA.", "", "what is buffA doing, exactly ? if I suppress it it seems it was doing the environment, but still there is the whole code about objects inside...", "FabriceNeyret2, 2017-09-16the other shader is private, so it cannot warm users.", "BTW I can no longer access it ( https://www.shadertoy.com/view/4dtGWM ): did you turned it draft ? or olready deleted ?", "", "I now this is ultra frustrating, many of us got once in this situation.", "Be sure that all shaders that crash iq machines are made private the same way (this is not a punishment, it is survival for users as it would hang or crash even the icon list of new shaders at browsing ).", "Simply, iq does not have all OS os GPU and all browsers, so what crash you might not crash him.", "I'm on linux, so some time my shaders have problem on windows (sometime bad ones), and I don't know. And some time this is the other way.", "", "Please don't delete your nice shaders and be patient !", "A suggestion: for test and learning, extract sub-parts and make them separate shaders ?", "", "As I pointed out in the other shader, GPU parallel programming of big program can be puzzling because it looks like ordinary C but the machine below (and thus the compiler adapted to it) is very very very different to the desktop CPU. We are kind of deceived by the fact we have the impression to have loops and functions, for instance. And even so, we don't see the burden the GPU and compilers have to fight to manage if then else, plus invisible hard task like guessing the LOD level at texture() call.", "ingagard, 2017-09-16One more thing... I my shader is getting banned due to some computers crash. ALL shaders causing crashes should be banned. A whole lot of shaders when browsing looks my browser and crushes MY computer. Always happens when searching for something.", "ingagard, 2017-09-16This is the best I can do to optimize. If you have any other suggestions, please show in a code sample as it would be much easier or me to understand.", "ingagard, 2017-09-16This fucking sucks to be honest. I will delete the other version of this shader. How would it affect the views if that is only private? I\u00b4m sick of this shit right now. Putting so much work into something just to have it crushed. :-( If other people can run this I would be glad to know what is causing it to crash for you. Hope you understand my frustration.", "", "@ Dave_Hoskins", "Thanks for noticing. I will make some changes in the overall loop sizes and make some other adjustment.  After that I will make this public again. I think I will leave this site.", "iq, 2017-09-15still crashing. It's best if you fix the original version (https://www.shadertoy.com/view/llXyW8) and make that one public when it works, otherwise there is duplicates and the amount of views will be lower for your amazing work", "Dave_Hoskins, 2017-09-15'SoftShadow' is being called 4 times?...", "FabriceNeyret2, 2017-09-15strangely, this quite not change compilation time and rendering time", "Dave_Hoskins, 2017-09-15You can probably reduce your marching loop size by less than half if you did a simple ray-trace to a plane for the sea?", "Xor, 2017-09-15Very nice! Glad to see my worley function put to good use.", "ingagard, 2017-09-15Thanks for the kind words. I got really sad when Iq banned it from the public, but it was needed. Hopefully most users can watch this now.", "", "@ FarbiceNeyret2 Yeah I know its demanding. Well I will think about how it can be improved further. All I tried just made minor differences. The main bog down comes from the material function and most of all the mapping. Any clues how to make further optimizations. I dont know how to make the mapping faster. I tried removing the \"glass-check\" but that was just a tiny bit faster. Raymarching at this scale is pretty troublesome in that regard.", "", "Thanks once again for helping out and making me learn from stupid mistakes.", "shau, 2017-09-15Amazing. So much detail in the model. Is this modelled on a real lighthouse?", "Dave_Hoskins, 2017-09-15That's great, I can run it now! Very cool, and I like the use of that Pebbles texture..", "starea, 2017-09-15Awesome work! Though compiling time is indeed long... (ShaderToy needs to have an interface for compiling, or I thought my Chrome is dying...)", "FabriceNeyret2, 2017-09-15It's faster, it compiles faster, and now I do see reflects on transparent parts (windows + dome I didn't have before) and the strange superimposed envmap everywhere is gone. Congrats ! :-)", "", "4\" of compilation is still a lot and might be too much for some machines (we will see), so if you have more plans to organize code more efficiently for GLSL compilers, don't hesitate to continue ;-)", "meowyih, 2022-06-08Thanks a ton! Your work is not only pretty, but also easy to understand as a night sky shader reference. I love it! ^_^", "amilton, 2022-04-16very nice", "blackle, 2022-04-14beautiful!!!", "mrange, 2022-04-14Thanks for the appreciative comments. Just FYI even though the final galaxy code is quite simple it took quite a few number of iterations to go from something awful to something nice.", "bloodnok, 2022-04-14Love the colours!", "oneshade, 2022-04-13Really nice!", "Cukierko_14, 2022-04-13It just looks amazing! I'm delighted!", "sylvain69780, 2022-04-13", "Draedrus, 2022-04-13nice  I really do like the flare object and the overall colouring", "Shane, 2022-04-13That came together really well.", "spalmer, 2022-04-12Very clean look.  The stars do alias a little but only at low resolutions.  Call it twinkling!  ;)  Beautiful in fullscreen and runs great.", "iq, 2022-04-10Very very nice!", "", "I really appreciate the fact the starts don't alias. Very well done.", "mrange, 2022-04-10@jorge2017a2 thanks", "jorge2017a2, 2022-04-10Great idea and very beautiful galaxy design...nice view!!!", "VJSpackOMat, 2014-08-31alright, thx for the hint, fixed it, now the movement is more varying, need to clean up a bit some day", "fizzer, 2014-08-31Hi! It looks like the problem with floor() is that you defined a variable named floor on line 84, so if you rename that variable it should work.", "FabriceNeyret2, 2022-11-13@rigel: no longer publishing anything ? :-/", "oneshade, 2021-04-13So cool!", "tehsauce, 2018-04-02Hehe trypophobia", "ocb, 2018-03-23Grid transformation... So simple good idea!", "rigel, 2018-03-23Thank you all !", "", "@Shane When I entered \"voronoi\" in shadertoy searchbox I got 350+ results! Tryng to come up with something different was the real challenge", "Shane, 2018-03-23Very cool idea and execution. I can't be certain, but I'm pretty sure this is the first abstract tropical fish Voronoi artwork I've encountered.", "", "I based my last rounded Voronoi-cell shader on Tomkh's \"Rounder Voronoi Edge Distance\" example, as I believe that to be the most efficient, pixel perfect rounded Voronoi border example at this time. The difference is the variable smoothing factor.", "aiekick, 2018-03-22 very funny", "EvilRyu, 2018-03-22Nice exploration!", "mattz, 2018-03-22Love it!", "FabriceNeyret2, 2018-03-22nice !", "Poisson, 2023-02-27Amazing!", "jt, 2022-09-01Gorgeous!", "ollj, 2021-01-07buffD, i crunched into:", "const ivec2 n8[8u]=ivec2[]//coords of 8 surrounding pixels", "(ivec2(-1,-1),ivec2(-1,1),ivec2(1,-1),ivec2(1,1),ivec2(1,0),ivec2(0,-1),ivec2(0,1),ivec2(-1,0));", "void mainImage(out vec4 o, in vec2 u", "){vec2 v=u/iResolution.xy", ";vec4 b1=textureLod(iChannel0,v,0.),b2=b1*b1", ";for(int i=0;i<8;i++", "){vec4 n=texelFetch(iChannel0,ivec2(u)+n8[i],0);b1+=n;b2+=n*n;}", ";b1/=9.;b2/=9.", ";vec4 s=sqrt(max(vec4(0.),b2-b1*b1))*.75", ";vec4 b=textureLod(iChannel1,v,0.);", ";o=b1+mix(min(abs(b),s)*sign(b),vec4(0),.95);}", "ollj, 2021-01-07---BuffA:", "", "not much, only", "#define u2(a) ((a)*2.-1.)", "//remap x as if a=0 and b=1  == remap(x,a,b,0.,1.)", "float remap(float x,float a,float b){return ((x-a)/(b-a));}", "//remap x as if a=c and b=d", "float remap(float x,float a,float b,float c,float d", "){return remap(x,a,b)*(d-c)+c;}", "", "", "----buffB", "", "terrainnormal, sundir, sundot ,sunhalf need not to be calculated for sky", "some other vars have similarily unnecessarily wide scopes, fixed by making subroutines for long branch cases, and albedo()", "many vars are only used once, as if you need a var for a linebreak.", "", "sundir*vec3(-1,1,1) ==  vec3(-sunDir.x,sunDir.y,sunDir.z)", "", "you SAT(specular) twice in a row", "", ";if(u.x<1.&&u.y<1.) == if(max(u.x,u.y)<1.)", "ollj, 2021-01-07i like a lot of this shader, and take a deep dive into it, and while i am on it, her is  some tips/conventions:", "", "do not name (hashing) functions by their input types. this just wastes namespace.", "only name them by output types to void namespace conflicts.", "", "name structs by data types, and just alphanumerically address them, to reuse structs:    struct v22{vec3 a,b;};", "", "#if (__VERSION__<300)", "is useful for compatibility (to use TexelFetch() where available, or so substitute missing inverse() and other functions with explicit libraries)", "", "trilinear filtering includes bilinear filtering, and its worth a subroutine", "", "same for", "#define ma0(a) max(a,0.)", "", "... so much for the CommonTab...", "piyushslayer, 2020-11-27I tried that but it looked really ugly so I took it out sadly. If I had another buffer available I definitely would have made it work nicely. Probably in a future implementation I'll add some cloud shadows!", "mindu, 2020-11-18projecting shadows on the mountain even if fake, would be the cherry on top <3", "piyushslayer, 2020-11-10I actually compiled a list of useful resources a while ago that might help you learn volumetric clouds rendering.", "piyushslayer, 2020-11-10[This comment has been hidden by the shader author]", "novem, 2020-11-07That's so awesome! I gotta learn how to render clouds like that!", "piyushslayer, 2020-09-04Thank you!", "achalpandeyy, 2020-09-04This looks epic af. Now that I got a good GPU I can see the awesomeness more clearly x)", "piyushslayer, 2020-04-13No worries! Would love to see your version when you're done!", "yamanee, 2020-04-13I see (sorry for not replying earlier) thanks for the explanation, I'm gonna try like this for now", "piyushslayer, 2020-04-10I'm doing the simpler version beer-powder multiply at end of the marchToLight function. Check line 99 of buffer C. The powder function was updated later to a more complex one, but for this demo, the simpler version looked good enough so I just kept that.", "yamanee, 2020-04-10Hey very nice shader ! I'm also trying to implement this paper and I noticed you didn't used the beer-powder formula when integrating the transmittance in the main raymarching loop (l.171). Am I missing something or did you have specific reasons ?", "XT95, 2020-04-08Lovely", "fb39ca4, 2020-04-08Looks like something out of a postcard!", "balkhan, 2020-04-07Waow", "piyushslayer, 2020-04-06So apparently if I set Buffer A anywhere with a clamp filtering flag, it universally sets it to clamp including in buffer C. After removing it, and resetting the buffer A texture to repeat in buffer C fixes the problem. Like Fabrice pointed out, I think it's a shadertoy bug,  and it's definitely not the first time I've seen it.", "FabriceNeyret2, 2020-04-06it's a side effect about flags when same texture used multiple times: set flag repeat and it's ok.", "I though this OpenGL bug was now fixed. (or might it be a shadertoy bug ?)", "Gaktan, 2020-04-06Alright, it seems that using BufferA in iChannel3 permanently breaks the clouds, even if you remove it afterwards", "piyushslayer, 2020-04-06Thanks! iChannel3 in the image tab is empty and unused though, I tried adding various textures to it but it doesn't break for me at all.", "Gaktan, 2020-04-05Looking great!", "", "Interesting bug though: changing iChannel3 to anything in the Image tab breaks everything", "piyushslayer, 2020-04-05Everyone: Thank you!", "reinder: Made some changes based on your suggestions, I also think it looks a bit better now.", "reinder, 2020-04-05Nice! I think it looks even better with more and coloured fog:", "", "Common tab: #define FOG_B .3", "#define FOG_C .1", "Buffer B, line 154: vec3 fogCol = atmosphericScattering(uv * .25 + .75, sun.xy * .5 + .225, true);", "FabriceNeyret2, 2020-04-05very nice !", "JoshScholar, 2020-04-04WOW", "coyote, 2020-04-04", "piyushslayer, 2020-04-04Thanks a lot everyone!", "flockaroo, 2020-04-03nice godrays!", "wyatt, 2020-04-03I really like being able to control the sun. It looks sooo good!", "Orm, 2020-04-03beautiful!", "jorge2017a1, 2020-04-03excellent quality of the mountain, clouds, ... it looks very real .... good job !!!", "....", "excelente calidad de la monta\u00f1a , nubes, ...se mira muy real....buen trabajo!!!", "alro, 2020-04-03Stunning work!", "morimea, 2023-06-13does not work for me anymore either", "chrome.exe --use-angle=vulkan", "shader too large to do fast-debugging for me, so idk", "DaCuteRaccoon, 2023-06-13Is there any trim?", "DaCuteRaccoon, 2023-06-12doesn't work my glsl crashed and now it's broken. I can't play it anymore", "DaCuteRaccoon, 2023-06-12My WebGL implementation crashed  but nice game", "DaCuteRaccoon, 2023-06-12THIS IS AWESOME NICE JOB", "ocb, 2023-01-11That's a HUUUGE work !", "scholarius, 2022-11-30Fixed so it compiles for windows/chrome + edge again.", "jt, 2022-09-18WOW!", "dean_the_coder, 2021-06-16Whoa!", "UsualSpace, 2021-05-27Hello. Would you be willing to make a separate shader with only the atmosphere?", "skythedragon, 2021-05-16@scholarius Ah ok, could you maybe make a standalone one?", "it would be easier to read than this one", "scholarius, 2021-05-16@sky no not really the predecessor was published in GPU Pro 3 but that's without", "layers, without color transform, and without twilight extension.", "scholarius, 2021-05-16compare with the MODIS satellite images now", "https://epic.gsfc.nasa.gov/galleries/2015/first_light", "scholarius, 2021-05-16One thing I always found elusive was proper LOD of terrain colors, since these are selected by a nonlinear function. The shader now accounts for the combined variance in all LOD levels that are not displayed to flatten the slopes of the selection functions, similar to https://www.shadertoy.com/view/XtjBDw . The effect is when viewed from space, instead of just selecting light green over dark green, it blends to an approximation of the average color.", "skythedragon, 2021-05-07Is there a standalone (and simplified) shader for the atmosphere somewhere?", "", "I read the article and the code here, but I'm not really understanding how to put it all together", "scholarius, 2021-05-06fixed some minor quirks and replaced the 'filmic' contrast enhancer with a dynamic gamma", "the latter is based on a tanh-fit to the de Vries contrast sensitivity function and is at least grounded in some theory instead of the totally ad hoc 'filmic'", "also, out of gamut colors are now handled via a mini non-negative least squares projection step instead of just clipping", "scholarius, 2021-03-03Because i was too quick at writing and meant to say", "", "d_wu_de   = sin( alpha + de ) * cos( alpha + de ) - sin( alpha ) * cos( alpha )", "", "it's only the difference, that's why the function is called 'delta_sincos' I guess", "skythedragon, 2021-03-03Although wouldn't this only return 0 unless the control surfaces are deflected?", "Or is that intentional?", "scholarius, 2021-03-03@iq", "Thanks, I appreciate it. Maybe it's clear now where I was coming from when I was commenting on VR on facebook? See buffer C, its impossible to implement without circumventing the API.", "", "Also, HID (joystick) support would be way cool", "", "", "@sky:", "It is a simple application of the trigonometric angle addition theorem, ie:", "d_wu_de   = sin( alpha + de ) * cos( alpha + de )", "but we have sin( alpha ) = w and cos( alpha ) = u already", "iq, 2021-02-19This is incredibly amazing, and I don't know how I've missed it for so long. This must be among the 2 or 3 most sophisticated shaders in Shadertoy. Pretty incredible.", "skythedragon, 2021-01-22In the flight model, why is d_wu_de, d_wu_da and d_uv_dr used instead of the ctrl directly?", "scholarius, 2021-01-06no record, the playable doom shader by P_Malin is larger, clocking in at 280k chars if I remember correctly:", "https://www.shadertoy.com/view/lldGDr", "", "(However, I can't get that shader to run lately, it will not start on any platform I try)", "FabriceNeyret2, 2021-01-05\"new record\": well, it's new since mid 2018, then ;-)", "iapafoto, 2021-01-05213000 chars ??? perapse the new shadertoy record !!!", "Incredible work !!!", "scholarius, 2020-11-29new workaround 09 to fix a compile issue on windows", "", "[ replaced float( 1 << i ) with exp2( float(i) ) this is so stupid ]", "skythedragon, 2020-10-28ah, thanks.", "Sorry for bothering you but I'm just trying to figure out how the multiple scattering here works", "scholarius, 2020-10-27@sky", "in the complete formula of delta-eddington solutions, there are some exponentials --- some of them at the original speed \"exp(-tau)\" and some at a slower speed \"exp(-tau*factor)\" --- this is what I called the 'stretch' factor", "scholarius, 2020-10-27since the new shadertoy broke the plugin, i Implemented a resolution selector on shift+1,2,3,4", "Mipmap, 2020-10-06\"A web page is slowing down the browser, would you like to wait?\"  Yes!  The wait is worth it.  I wonder how many run across this and don't see your work because it takes 1-2 minutes to load. Fantastic work!", "GCScholar, 2020-09-26My god this is incredible!!", "skythedragon, 2020-08-28Could you explain about how you implemented the multiple scattering approximation?", "I understand you use the two stream theory to calculate some stretch factors, but I really don't know how to use those...", "scholarius, 2020-08-04I can delete the comment for you.", "GenderMurasaki, 2020-08-04Sorry, I've thought more about it and realized my misunderstanding.", "It seems I cannot delete my previous comment, so feel free to ignore it.", "GenderMurasaki, 2020-08-04[This comment has been hidden by the shader author]", "scholarius, 2020-08-03@gender", "The matrix is a straightforward sampling of the CMF, scaled by illuminant E. I dont' need to use the bradford transform because, as was already established, the color space *is* an adapation space, so I can just multiply component-wise in the 615/535/445.", "", "(I'm copy-pasting directly out of muPad, matrix syntax is row major)", "", "First define 'illuminant_E' (in sRGB):", "", "illuminant_E := matrix([[1.20500322], [0.9482420762], [0.9089094882]]);", "", "Next, sample the CMF's at the wavelength 615, 535 and 445 (spline-interpolated), stacked into a single matrix:", "", "eR := 615.00;", "eG := 535.00;", "eB := 445.00;", "linalg::concatMatrix( CIE_sRGB_spline(eR), CIE_sRGB_spline(eG), CIE_sRGB_spline(eB) );", "", "matrix([[2.512071281, -0.6229646072, 0.06306877604], [-0.05789701699, 1.469301493, -0.1438693435], [-0.04381639104, -0.1551014468, 2.035035111]])", "", "Multiply the inverse of this matrix with illuminant_E", "", "(%)^-1 * illuminant_E;", "", "matrix([[0.6456132765], [0.7212859344], [0.5155048276]])", "", "Finally, use these values to scale each column of the previous matrix:", "", "linalg::concatMatrix( linalg::col(%2,i) * %[i] $ i=1..3 );", "", "matrix([[1.62182657, -0.4493356088, 0.03251225852], [-0.03737908284, 1.0597865, -0.07416534113], [-0.02828844378, -0.111872492, 1.049070424]])", "", "This is the matrix you see in the code, transposed because GLSL is column major.", "GenderMurasaki, 2020-08-03CMF*", "GenderMurasaki, 2020-08-03Could you share additional information on how you derived the matrix from spectrum intensity to sRGB?", "I tried to generate it using CIE2012 CMSs as instructed in the blog post, but I get significantly different results.", "Also, how did you apply the color adaptation from E to D65? I tried to use the Bradford method, and I left multiplied the resulting matrix to the CMS matrix. Still, my results are very different.", "scholarius, 2020-07-01Also added a ground track forecast to the map display.", "This was quite the mind bender to make as an implicit (loopless) function, especially for highly eccentric orbits where the ground track can reverse due to being slower than the rotation of the planet", "scholarius, 2020-07-0110000\u00d7 time acceleration is on F4 (but only in space), in preparation of the long journey to the moon. It is surprisingly stable.", "skythedragon, 2020-06-21Are you planning on making an explanation of the atmosphere sometime?", "I'm trying to replicate the code (without the clouds part, and simplified) but I can't get it to look right at all...", "scholarius, 2020-06-09Something I was curious about for a long time: Near infrared. Press I to simulate an IR imager with approximately J-band filter (1.2 \u2013 1.3 \u00b5). Better visibility through atmosphere ...", "skythedragon, 2020-06-07Ok, Thanks!", "Looks like you put a lot of effort in designing the atmosphere system for this shader, and it looks really good!", "scholarius, 2020-06-07Actually the phase function 1 / ( 1 + a - cos(angle) ) does *not* have the same falloff as GGX, because GGX is twice steep. It is actually the same falloff as GTR1 (generalized trowbridge-reitz), while GGX is GTR2. (And HG would be GTR1.5 :_D )", "scholarius, 2020-06-07It gets funny when for example planets like Mars have dust as the main visible component. Or Pluto also. Then there will be no rayleigh phase at all. Therefore I ingored phase completely in the main layer because it is going to be all over the place when not being earth-centric...", "FabriceNeyret2, 2020-06-07The *only* advantage of HG is that it is easy to compute.", "When the real stuff if Rayleigh or Mie, use Rayleigh or Mie approximations of phase function.", "scholarius, 2020-06-07dragon: I don't use the Henyey Greenstein function because I never found it appealing.", "Instead I use 1 / ( 1 + a - cos(angle) ) as the phase function, with tunable parameter a. It has a falloff much like GGX, can be integrated analytically, and matches better real world data. Oh yeah, that's another whole article to write about!", "scholarius, 2020-06-07At this world size, precision issues show up.", "The trig functions used to calculate coordinates have differing implementations between platforms, leading to subtle differences in, eg, starting point and object placement!", "skythedragon, 2020-06-05How do you do the mie and rayleigh phases?", "I can find a sort of phase function for mie, but it looks very different to the Henyey-Greenstein phase function to me.", "scholarius, 2020-06-03Search for the highest point in the world! It is painted in bright red, but the looking at the code will not reveal where it is ;)", "scholarius, 2020-06-03Also, the startpoint 'L' is specifically set up as a challenge: Try to glide to the waypoint with engines off!", "", "(Although since last update, the terrain changed and it needs to be setup properly again", "FabriceNeyret2, 2020-06-03added to the shadergame list !", "scholarius, 2020-06-03Hi Fabrice, as it stands, is 'just' a simulator (flight and orbital mechanics).", "", "Although there is a small game element: when you land, it gives you a rating, so you could try to achive a landing with an \"excellent\" rating", "FabriceNeyret2, 2020-06-03In term of game play: I understand it is \"just\" a free flight simulator ? or are there some missions and purpose ? ( can you land on, BTW ?)", "scholarius, 2020-06-02haha @skydragon, switch to fullscreen and the cloud fluffyness will be back. All the details are smaller now re the size of the planet.", "scholarius, 2020-06-02White sunday update: The large world (950 km radius) is now default.", "", "This is running into the limits of floating point precision (nominally 1ulp = 15cm on the surface).", "The camera position is an ordinary float so it is limited to a quantized position.", "The vehicle position however is more precise (2 floats in series with Kahan-accumulation), so the movement should be accurate even at slow speeds.", "skythedragon, 2020-06-01Did you update the shader?", "Clouds and atmosphere now looks better and smoother!", "skythedragon, 2020-05-26Ah thanks, I'm still not completely understanding how it works tho.", "Could you maybe make a standalone shadertoy for showcasing the atmosphere?", "More people could learn from it that way", "scholarius, 2020-05-26BTW the FPU 3 article that was me so it's actually one less. ;)", "scholarius, 2020-05-26Front to back has the advantage over back to front that the loop can terminate early if it has accumulated enough opacity.", "scholarius, 2020-05-26The transmittance in zenith direction is for very deep atmospheres Venus-like, as long as there no other planets in this shader you can ignore it I think. Its all very prototypey atm.", "skythedragon, 2020-05-26Also two other atmospheres making use of the chapman function (https://www.shadertoy.com/view/XlBfRD and the gpu pro 3 demo) seem to do the main loop in reverse, but this one doesn't.", "Sorry if I'm asking a lot of questions, but I'm trying to figure out how all this stuff works because it's really cool and I want to make my own atmosphere better.", "skythedragon, 2020-05-22I figured out you also get the transmittance exp(-optical depth) in the zenith direction, and then multiply that by some other things. I'm having a hard time figuring out where in the code all that is defined.", "skythedragon, 2020-05-18Could you give some implementation details about the multiple scattering?", "I'm trying to understand it and implement it myself, but it's not going very well.", "scholarius, 2020-02-09Compile time roundup (in Firefox)", "", "Windows (D3D): 60 ... 80 s", "Linux: 12 ... 15 s", "Mac: 8 ... 10 s", "scholarius, 2020-02-06- ozone layer casts colored shadow into the terminator, I think this was the last piece missing to get the twilight look right", "", "- also: thrust vectoring, ability to fly like a helicopter (in preparation for airless worlds)", "skythedragon, 2019-12-24Ah thanks, not entirely sure if I can implement that in my own atmosphere...", "scholarius, 2019-12-23Multiple scattering is not researched fully yet to my satisfaction.", "I tried to use the analytic solutions from \"Eddington two-stream theory\" in various places. But this is of course only an aproximation theory (otherwise it couldn't have analytic solutions to the multiple scattring problem). For example I use the term that contains the average diffusion distance that comes out of this theory to  know how far to stretch the cosine falloff beyond the terminator. It's a total hack!", "skythedragon, 2019-12-22@morimea", "Part of it still seems readable at the wayback machine.", "morimea, 2019-12-22@scholarius", "your blog is offline(not available)", "thetenthplanet.de", "I saw there many good pages, I hope it get back so I can read", "skythedragon, 2019-12-22@scholarius Thanks!", "Another question: How did you do the multiple scattering?", "scholarius, 2019-12-22@sky:", "its just a single sample to get the sky color in the direction of the terrain normal, bent somewhat towards the light direction", "scholarius, 2019-12-22welcome to the 1337th visitor!", "skythedragon, 2019-12-20@scholarius How exactly did you do the skylight from the atmosphere?", "I'm trying to understand how it works, but I'm having a hard time.", "scholarius, 2019-12-18That's what I have DEFEAT_UNROLL for in common line 298", "its used in some places already maybe not enough", "FabriceNeyret2, 2019-12-18cool !", "NB: compilation time: 14\" . Maybe one big loop (big = steps * unrolled funcs inside ) could be made forbiden for unrolling ?  using #def Z min(0,iFrame) or min(0.,iTime)  in replacement for the initial zero.", "scholarius, 2019-12-18update", "- all const in function arguments should have been removed to fix compile issues", "- now proper locally rotating earth reference frame (coriolis effects while travelling)", "- better modelled temperature, pressure and density (atm temperature profile)", "FabriceNeyret2, 2019-12-17on some ubuntu (or is it the card ?)  you can't sometime install the most recent update (or it cause troubles)...", "scholarius, 2019-12-17hey fabrice I thought that was fixed with the driver update", "I have 440 drivers on linux but I'll remove the consts in a next update", "FabriceNeyret2, 2019-12-16Still not compiling for me (nvidia driver bug). May you please do the fix I gave last May ?", "-> buffC#402: suppress const for atm in the func API.", "scholarius, 2019-11-10I did another video demo", "scholarius, 2019-11-08VR mode complete. Overlays (Map + HUD) all displayed correctly in VR. Resolution and frame rate could be better...", "scholarius, 2019-10-27Made it compile in Safari again. But Safari does not display mipmapped buffers and has other issues.", "", "There is an experimental VR mode that can be enabled by fixing \"main_VR\" to \"mainVR\" in the buffers. Tested on HTC vive in firefox and steamvr.", "scholarius, 2019-10-22No problem it also works on the latest NV driver here.", "Chrome seems to be caching the shaders (even between preview and main view) so there is no magical speedup, unfortunately.", "morimea, 2019-10-10@scholarius you need update video driver", "Nvidia change GLSL compiler at some of 4xx version(like 6 months ago or so) so many old shaders do not work anymore, and new bugs come (that shader do work without bugs, im on nvidia 430.40 Linux driver)", "", "also glslang compiler exist, that have fix all of GLSL OpenGL compiler bugs, you can not use it in browser", "scholarius, 2019-10-10btw I am on windows 7 atm in chrome browser, NV 970 GTX and driver 390.77", "the shader compiles in 3 seconds!", "scholarius, 2019-10-10small update", "checked compatibility with new viewport resolutions", "radius of planet increased to 280 km", "better terrain flattening around airport locations", "FabriceNeyret2, 2019-05-30more precisely:", "This is fixed in Windows drivers >= 419.x. Currently downloadable are 419.67 and 425.31.", "This is fixed in Linux drivers >= 418.x.", "https://bugs.chromium.org/p/chromium/issues/detail?id=871434", "FabriceNeyret2, 2019-05-30more precisely:", "This is fixed in Windows drivers >= 419.x. Currently downloadable are 419.67 and 425.31.", "This is fixed in Linux drivers >= 418.x.", "https://bugs.chromium.org/p/chromium/issues/detail?id=871434", "FabriceNeyret2, 2019-05-30more precisely:", "This is fixed in Windows drivers >= 419.x. Currently downloadable are 419.67 and 425.31.", "This is fixed in Linux drivers >= 418.x.", "https://bugs.chromium.org/p/chromium/issues/detail?id=871434", "morimea, 2019-05-30@FabriceNeyret2 I have Nvidia(not latest driver) and using Linux... BufC compile for me", "FabriceNeyret2, 2019-05-30I'm on linux, but it should behave the same on Windows in true OpenGL mode, with nVIDIA boards but if you have the very last driver (not available for all cards).", "scholarius, 2019-05-30Thanks fabrice! care to tell me which platform? I don't have this prob on any of my computers... but it would be a good idea to remove the const anyway since the structs are meant to be read from a texture so they are not really const in the sense of constant registers", "FabriceNeyret2, 2019-05-30buffC no longer compiling on OpenGL. classical driver bug about const struct in func API.", "Kludge test: empty #define const   at buffC#52  by quadrature, it get me to the problem:", "buffC#395, atm_compute_scatter() API, suppress const for atm.", "rumata007, 2019-05-30That's really great! Can it be used for commercial purposes?", "morimea, 2019-05-25wow next level", "scholarius, 2019-05-20Added dynamic bubble sort updated in parallel at 1 iteration per frame, which keeps the list of objects distance sorted, with a small delay.", "Also, large arrays are written out to the texture and only read via the texture in other parts of the code. This should avoid duplicating the array contents and improve resource usage.", "scholarius, 2019-04-14I did a non-interactive kiosk mode that can be enabled with a define in the commons tab. Compile time on windows is down to 30s and on linux to 6 s (Macbook Pro 4 s :-P).", "Duke, 2019-04-10Very nice!", "scholarius, 2019-03-23Firefox does not color manage the opengl canvas, allowing access to the full P3 gamut on a macbook pro. Safari does remapping to sRGB. So in firefox the colors will be more saturated unless define WITH_IMG_DCI_P3 in firefox.", "scholarius, 2019-03-16Strage bug. The first time the shader is loaded in a given browser, the 3D-noise texture is different. I need to close the tab and open it again for the 3D texture to align correctly.", "", "When correct, there has to be a sand area at the end of the smaller runway near starting point C (lat 15.862 long 167.565).", "scholarius, 2019-03-15added contour lines to the map view when in elevation mode", "", "now it is possible to search for the highest peak of the entire world", "it is also implicitly painted with a red spot but the code won't tell where it is ;)", "FabriceNeyret2, 2019-03-111024x1024 also means that all MIP-map based effects are working correctly.", "Also it's always 1024 whatever the windows size ( which can be both good or bad ).", "scholarius, 2019-03-11No I didn't notice that! The cubemap enables new possibilities. 16 bits should be enough for anything color-related or even terrain height, at least the difference to the planet radius. When I have time I'll experiment with this.", "FabriceNeyret2, 2019-03-11... also, new drivers came. (still 10\" compiling, though).", "", "buffers: did you noticed that cubeMapA is 6c 1024x1024 extra buffer ? ;-)  (half-floats, though).", "scholarius, 2019-03-11Yes but I wasn't sure since you tuned out of the discussion.", "", "Anyway, I would like to include multiple celestial bodies, but I almost all of the buffers are already used.", "FabriceNeyret2, 2019-03-11working. didn't you solved that last July ? ;-)", "scholarius, 2019-03-11Hey Fabrice no more compiling problems?", "FabriceNeyret2, 2019-03-11having access to the mouse buttons and mouse position out of click events would be a good start... :-/", "scholarius, 2019-03-11It would be totally cool to have access to a joystick in shadertoy.", "scholarius, 2019-03-11Improved FPS by 20% by caching the skylight sample in buffer C and not calculating it every frame", "scholarius, 2019-02-17Improved compile time under windows by 7 sec.", "Message queue is now processed in SIMD fashion making array workarounds obsolete.", "scholarius, 2019-01-28small update", "fixed terrain levelling zones added more landing sites,", "post processing order was changed (saturation now comes before transformation of primaries)", "maybe better performance due to scene data packing", "", "@zproxy", "non-interactive will basically require an auto-pilot, since the movement is a simulation and not a spline", "zproxy, 2018-09-07can you add a switch so this shader is non interactive, just demo without keyboard input?", "", "i think ive seen this type of error before. its about global variables being defined out of order.", "scholarius, 2018-09-07Alright, thank you. I have no clue however how I should do anything about it. I get you are remote accessing some windows machine to display the shadertoy in a browser? If so, you can try to disable angle and switch to native opengl, if you are under chrome or firefox, and see if that makes a difference.", "zproxy, 2018-09-05rdp is the remote desktop connection you use to connect to windows workstations.", "scholarius, 2018-08-30Hi zproxy,", "I don't get that acronym; care to elaborate what is RDP?", "zproxy, 2018-08-25bufA fails to compile under rdp", "scholarius, 2018-07-15Annotated video explaining some features (also showing my flying skills, cough)", "scholarius, 2018-07-06@ttg not as simple as the other workarounds. The code I sent to Fabrice is not functionally transparent, and a proper one needs a restructure of the update logic. I would hate to do this.", "", "Instead I have put the simple workaround in but disabled by default. If you enable WORKAROUND_09_ARRAY_ASN it should work with the old nvidia driver at the expense of sun movement and planet rotation.", "ttg, 2018-07-06Black screen problem still exists for Nvidia 384.111.", "scholarius, 2018-07-05I slashed the compile times in ANGLE/D3D to a third, by using msg_push on an initially empty queue to to be commited at the end in one go. See workaround #8.", "", "@ttg thanks I think the teething problems are mostly cured now", "ttg, 2018-07-04@scholarius Switching around Nvidia versions is trivially easy for me to do; is there a fix you could suggest I try?", "scholarius, 2018-07-04thanks for the feedback @ttg", "scholarius, 2018-07-04Anyways, after updating I don't have any machine where I could test a fix ...", "ttg, 2018-07-04Switching from Nvidia 384.111 to 390.25 fixes it!", "scholarius, 2018-07-04See my screenshot from below, the selected driver package seems to work.", "FabriceNeyret2, 2018-07-04nvidia driver: well, I let ubuntu auto-update when they decide, and for nvidia driver it's not very often. I could manually seek the last one, but then it would still not work for most ubuntu installations.", "scholarius, 2018-07-04I would really like to know more about the compile slowdowns in ANGLE and what's causing it. On my Win 7 it's one and a half minute. The breakdown is at follows:", "", "buf A: 60 s", "buf B: < 2 s", "buf C: < 2 s", "buf D: 15 s", "Image: < 2 s", "", "Interesting is the difference between buf C and D. Both are doing very similar raycasting loops to find the terrain intersection. Buffer C is also doing all the atmospheric scattering on top of that, but compiles faster than buffer D.", "scholarius, 2018-07-04The black screen bug isn't limited to linux, it is present on windows too, and the cause is an outdated Nvidia driver. This is why I didn't add a workaround for it. Just update your driver.", "FabriceNeyret2, 2018-07-03yep, compiling back.", "", "WORKAROUND_07: oh, but it's for the iMac. Yes, it's compiler is totally crap, O+= 1-O doesn't work but some equivalent does. ( but apart Greg, who still have an iMac, and does GLSL graphics on it ?)", "", "BTW, what about adding the linux workaround  you made me test ? ;-)", "scholarius, 2018-07-03ah bad to write 27 \" instead of 27 inch ... see where WORKAROUND_07_KEYPRESS in buffer A is used, you won't believe", "FabriceNeyret2, 2018-07-030:?:'' ERROR  is back...  :-(", "", "I'm curious, what was the bug (and it's fix) for the iMac keyboard ?", "scholarius, 2018-07-03I also ran the source code through a C preprocessor to test the idea that conditional compilation of #defines and #if blocks cause the slow compile times in Windows, as suggested by @834. But the times are identical, just as I suspected.", "scholarius, 2018-07-03Just kidding, but it would make for a nice smoke test.", "I added the 7th workaround to fix the 'keys don't work' on iMac as reported by @Greg below in the beginning. This one is beyond stupid.", "FabriceNeyret2, 2018-07-03\"just point them to this shadertoy and say\": won't work.", "( they generally ask me to simplify further my 10-lines acid tests. And I generally see later that they are  right ).  ;-)", "These guys have 10^26 bugs report a day, generally for things way for frequent, plus most bugs reports are due to things not related to them. An acid test is always more convincing.", "scholarius, 2018-07-03And for the others, just point them to this shadertoy and say \"must compile this correctly with all workaround #defines set to zero\" (as I can do this, for example, on my MBP).", "scholarius, 2018-07-03No need to report, they fixed it already. I updared the nvidia drivers here to 398.96 (they were two years old) and the problem goes away. Maybe you can try the same on your linux too.", "FabriceNeyret2, 2018-07-03if it's easy for you to make a minimal acid test shader showing the bug, we can fill a bug-report.", "A long ago arrays of structs were looking unsecure, but there were also issues with vec4 in long loops, like bga forgotten  (hard to make an acid test there).", "scholarius, 2018-07-03Ok then it's another compiler bug. The assignment into the planets[] array at line 2003 isn't visible at line 2087 (you can check this by adding the code before line 2003). I was able to solve this because I have here a Win7 computer that displayed the black screen bug when running native OpenGL (not ANGLE). Thanks for your support Fabrice.", "FabriceNeyret2, 2018-07-03ps.B = mat3(1.);", "ps.r = data.radius * UNIT_X;", "", "YESSSSS !", "(  but just ps.B = mat3(1.);    for buf D, for data isn't define here).", "FabriceNeyret2, 2018-07-03yep, it's compiling again. ( yeah, I forgot about this annoying ' bug).", "But the workarounds are still not sufficient. :-/", "scholarius, 2018-07-03re your original problem, the black screen after first frame: Try to insert the lines", "ps.B = mat3(1.);", "ps.r = data.radius * UNIT_X;", "after line 2087 in buffer A, and also after line 692 in buffer D.", "This will disable the daylight cycle (sun and planet position is fixed).", "scholarius, 2018-07-03re the unknown error: 0:?, i removed an apostrophe in a line comment after a #define, does this help?", "", "hint was taken from here \ud83e\uddd0:", "https://shadertoyunofficial.wordpress.com/2018/03/26/puzzling-compilation-errors-in-shadertoy/", "FabriceNeyret2, 2018-07-03<< unknown error: 0:? : '': syntax error >>  on windows too.", "scholarius, 2018-07-03The workarounds are defined in lines 47ff in common", "FabriceNeyret2, 2018-07-03wow, now it does not compile at all (all buffers red, so something in Common).", "<< unknown error: 0:? : '': syntax error >>", "", "\"workarounds 1 and 2 are necessary\": which 2 ?", "TRN_UPDATE_THRESHOLD = 0   and WITH_IMG_EXPOSURE 0    ?", "scholarius, 2018-07-03Working fine in Ubuntu Studio 18 (bionic) only workarounds 1 and 2 are necessary.", "FabriceNeyret2, 2018-07-03gdoc:  2011 is quite old, I would be surprised it still stends. Beside, never unrolling loop is bad for perfs (and worse for desactivating all optimizations). Note that you can forbid unrolling only target loop by doing things like for(int i=0; i < 10+min(0,iFrame); i++)", "FabriceNeyret2, 2018-07-03not better.", "I bet it is something really stupid, like a noninitialized variable, a Nan, a missing inout.", "Do you have a linux on which it works ?", "( bad option would be that your world-record-long shader put my system in strange state :--p )", "", "driver: I do have the proprietary. Does shadertoy even run with Nouveau drivers ?", "scholarius, 2018-07-02On a side note, I found this about slow compilation times under ANGLE/D3D, is this still relevant?", "https://groups.google.com/forum/#!topic/angleproject/eWaMGHqioXY", "scholarius, 2018-07-02@834M thats some decent hardware from what it looks like you run at 60 FPS in the 850'er window; about the #defines, I don't think so, that would be stupid on an epic scale if the ANGLE/D3D compiler did  a shader variant for each possible #define switch. It would also mean that the compilation time would have to double when a new #define is added; I doubt this. I could't find more information about this topic on google unfortunately.", "", "@Fab: The other way around, I meant that you should use the proprietary driver. The nouveau driver just started to crash and could't cope with the complexity and one point. One other possible feedback trap: you may try to set TRN_UPDATE_THRESHOLD = 0; this will calculate the terrain in buffer B in each frame anew instead of keeping on previous frames.", "FabriceNeyret2, 2018-07-02what do you mean,  \"compile more shader variant\" ?", "834144373, 2018-07-02 The compiler burning on CPU,many branch \"#define\" cause many variant shader version for compiler.", "834144373, 2018-07-02hum...It seems that no crash on my windows (i7 7700k with GTX1060)", "nice at first!", "but suggest you reduce the \"#define\" words,because will  compile more \"shader variant\",that's not friendly for webgl,", "FabriceNeyret2, 2018-07-01#define WITH_IMG_EXPOSURE\t\t0     + start", "diesn't change the fate. (but it was a good try !)", "", "note that on linux atan(0,0) and mod(0,0) give NaN too, if this can help.", "( like sqrt, log, pow on negatives ).", "scholarius, 2018-06-30@ttg and Fabrice: try to disable exposure, maybe a nan is getting into the feedback loop", "scholarius, 2018-06-30Two new workarounds to make it compile in Firefox with a D3D backend. The D3D backend seemingly doesn't like array assignments with a dependent index, so msh_push() was rewritten. All workarounds are now documented inside #if blocks.", "", "(Platform/GPU/compilation time/FPS)", "Macbook Pro -- Radeon 555 -- 5 s -- 30 FPS", "Mac mini -- Intel Iris -- 15 s -- 14 FPS", "Win10 Laptop -- Intel HD", ".. OpenGL -- 33 s -- 2.7 FPS", ".. Angle/D3D -- 6 min (\ud83d\ude33) -- 2.5 FPS", "FabriceNeyret2, 2018-06-30NB:  scholarius suggested Nouveau drivers, not proprietary. Did somebody have this config ?", "ttg, 2018-06-30Even with proprietary Nvidia driver (OpenGL) this is all black, so maybe there is an assumption made somewhere about arithmetic which is not valid for all hardware.  No internal errors, warnings, crashes, just the shader does not seem to behave as intended.  I only see a planet for one frame after the shader first runs.", "FabriceNeyret2, 2018-06-30BTW I never thought about the implications of Nouveau vs Nvidia drivers: they logically have different glsl compiliers, I guess, and thus different compatibility issues. If you have any info or example of shaders giving different results (or not compiling only for one), I'ld be interested. (Still, most of the difference I I saw were due to transpilation to HLSL vs true OpenGL, but who knows).", "scholarius, 2018-06-29I know ;) I went through this list in order to get it to run under linux to begin with. I will have access to my linux box next week, I'll see what I can do. But my leisure time is used up and serious work will be calling again.", "FabriceNeyret2, 2018-06-29still black (but 1st frame) on my linuxs. would be strange that my driver fails just for this very shader. I rather believe in some usual compatibility issue https://shadertoyunofficial.wordpress.com/2016/07/22/compatibility-issues-in-shadertoy-webglsl/", "scholarius, 2018-06-29So I googled a little about this internal error, and it turns out this comes directly out of d3d_compiler47.dll; it has nothing to do with GLSL at all. All sorts of people are getting this bug, and it is related to switch statements. Culprit was the switch statement at 1145ff in buffer A which I changed to an equivalent if-then-else sequence, and now I can compile it under windows/angle/d3d -- with text processing disabled. So no instruments, menu or messages, but you can see the planet and fly.", "scholarius, 2018-06-29Yes I am seeing these when compiling with angle. The salient point is the internal error, the warnings would be silent if the diagnostic would not be triggered by there being an error. If I comment out every line that touches g_scene_data then all errors go away. And so do the floating point, pow and other warnings. I had hoped that this had to do with resource constraint and you would not be affected because of high spec hardware.", "Dave_Hoskins, 2018-06-29Unfortunately I'm still gettin all the errors. A few 'float point division by zero' and hundreds or 'Unknown error: internal error: no storage type for block output'", "Also, please remember you can't have negative values in pow() as it's undefined - See the '?' on the editor \"Be careful!\" section.", "scholarius, 2018-06-29You should be able to set WITH_PROCESS_TEXT to zero without errors now.", "On a side note the problems under Windows all seem to be related to ANGLE. I'm testing on a Win10 laptop right now (one of the cheap 'ALDI' laptop sort) and when turning off ANGLE in firefox I can fully play this, albeit with only 1.5 FPS but the output is correct.", "Dave_Hoskins, 2018-06-29So, those errors then.....?", "scholarius, 2018-06-29Of course yes, I always handle defines like that \ud83d\ude33", "Dave_Hoskins, 2018-06-29I think Fab, like myself, thought you meant delete the define. Not set it to 0. -  which now gives a thousand lines (approx  ) of errors BTW", "scholarius, 2018-06-29I made it that you can now reliably disable all text processing in buffer A, this should eliminate the errors about 'uvec4_ctor' on Windows. I also added an option to change the representation of the scenery data from a static array to a function with switch. On my Radeon Pro this improves performance with full scenery from 22 to 30 fps (why???) but on Intel Iris it makes the compiler hang. So there seems not to be an universally best way...", "FabriceNeyret2, 2018-06-29then error in process_text: does not return a value", "scholarius, 2018-06-29Hi Dave, the text processing is most likely the culprit there. You can try to disable WITH_PROCESS_TEXT in buffer A.", "Dave_Hoskins, 2018-06-29Buf A fails for me after a long long wait. (Win10/ Chrome / GTX 1060)", "scholarius, 2018-06-29Thank you, I also need to credit the shadertoy community for creating a tool that is so conductive to experimentation. This shader is mostly a port from CPU code I already had. Only the scenery stuff in buffer D is new and specific to shadertoy.", "scholarius, 2018-06-29I included a SCENERY_LEVEL option to reduce the size of the static scenery array. This seems to be problematic and prevents running on lower systems. I set the default scenery level to 2, this allows me to run the shader on a lowly iMac with Intel Iris graphics.", "GregRostami, 2018-06-29Welcome to Shadertoy. For your first shader, this is an EPIC accomplishment.", "It's a whole flight sim in a SHADER!!!", "GregRostami, 2018-06-29It's working on my Macbook Pro. It's REALLY AMAZING!! OMG!", "FabriceNeyret2, 2018-06-28buff C & D seems to be the cause.", "GregRostami, 2018-06-28This doesn't crash my iMac, but none of the keys work.", "scholarius, 2018-06-28What is the error message?", "BigWIngs, 2018-06-28Doesn't compile for me on Windows 10", "scholarius, 2018-06-28Hi fabrice I needed to use the proprietary drivers on Linux the open source ones indeed gave problems", "FabriceNeyret2, 2018-06-28all black on linux", "( at restart a big sphere appears then disappear immediatly )", "scholarius, 2018-06-28Tested on Mac 2017 with Radeon Pro 555 and on Linux Ubuntu with NV GTX 780.", "scholarius, 2018-06-28The purpose of this shadertoy is to research atmospheric scattering (and space simulation in general).", "", "It is a continuation of work published in GPU Pro 3 ( http://www.gameenginegems.net/gemsdb/article.php?id=1133 ) merged with the Space Glider concept and implemented with modern technology (ie. Shadertoy).", "", "Rendering goodies:", "- HDR with dynamic exposure", "- Atmospheric scattering with clouds and discrete ozone/airglow layers", "- Atmospheric multi-scattering is emulated by applying heuristics derived from the Delta-Eddington two-stream radiative transfer theory", "- Analytical solution to underwater scattering", "- Analytical anisotropic antialiased 2D primitives", "- Analytical 3D primitives with full-umbra soft shadows", "- Non-lambertian diffuse shading model for terrain ('lunar lambert')", "- Non-gaussian phase function and NDF (disk-integrated) for clouds and ocean specular reflections", "- Uses internal color space with monochromatic RGB primaries (615, 535, 445 nm)", "- Simulates night vision (rod and cone adapation)", "- Starfield with 9072 stars following a power law fit of the catalogue magnitude distribution", "", "Simulation:", "- Simulated world is 480 km in diameter", "- Surface gravity is 4 times that of earth", "- Weight of the aircraft is reduced to 1/4, so wing loading and landing speeds remain the same", "- The simulated aircraft is a blend of the coefficients from 3 parts F-16 and and 1 part Shuttle orbiter ...", "Dave_Hoskins, 2013-03-19Hello Jean-Marie, are you aware that I'm the same David Hoskins that wrote the 'Copula' pitch/time shifter, and we have discussed licensing before? If you are aware then fine, otherwise this is huge coincidence! I'll send you an email shortly.", "jmc, 2013-03-19Hi,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our ZGameEditor Visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "Dave_Hoskins, 2013-03-14OK, I've tidied the tDelta around anyway. Also added black edge and non-reflective. Also made the sides flatter.", "Dave_Hoskins, 2013-03-14Hi 'simesgreen' - yeah, I don't want to re-invent the wheel! (sorry)", "It speeds up dev. time if we all share. It's also the same as the one from Graphics Gems all those years ago, and the one Wolfenstein uses in 2D.", "Note that I've added 0.5 to the voxel start at 40, this enabled the angled plain in my Ray*bert shader to be even. Also lines 70, 79, and 88 subtract the tDelta value to get the correct distance.", "simesgreen, 2013-03-14nice animation, and nice to see someone using my voxel traversal code!", "otkazano, 2021-08-26Incredibly cool job as always!", "jarble, 2020-11-11The rendering speed seems to improve when I replace h < traceSize with h < traceSize*(1.+t)", "Kido_SoraKi, 2014-10-27It's awesome !", "With a smooth minimum function the rendering of the sand is even better.", "Passion, 2014-09-10This shader made me think of this song...", "www.youtube.com/watch?v=PiBF_hJ3sSE", "TekF, 2014-07-19I only see a small error in 36: where the noise texture wraps there's a hard line. I've worked round this by manually wrapping the uv. I doubt this will fix the problem you're seeing.", "iq, 2014-07-18Hm, the shader is broklen in Chrome 36, it looks like there's some uninitialized variable (the color flash like crazy)... I cannot find which one though.", "iq, 2014-06-30Super awesome!", "Ramocles, 2014-06-20nice shading and shape!", "P_Malin, 2014-06-19Nice! The specular roughness changing with the wetness of the sand looks really good.", "cyanux, 2014-06-19+ some noises on sand = realistic", "Dave_Hoskins, 2014-06-19Very clear and beautifully rendered. They're almost like sand worms.", "vgs, 2014-06-19Very interesting shader! I like it!", "azeirah, 2015-08-04Ah this, looks beautiful on my rgb keyboard, thanks <3", "GregRostami, 2015-08-03-1 (260 chars):", "i  = i+i-3.;", "GregRostami, 2015-08-03Hi Alkama,", "Welcome to Shadertoy.", "Here's a quick attempt at size optimizing your shader to two tweets (261 chars):", "void mainImage(out vec4 o,vec2 i )", "{", "i /= iResolution.xy;", "float w,t = iGlobalTime;", "i  = -3. + i+i;", "for(float j = 0.; j < 29.; j++)", "i.y += .2+(.9*sin(t*.4) * sin(i.x + j/3. + 3. *t )),", "i.x += 1.7* sin(t*.4),", "w = abs(1. / (2e2*abs(cos(t)) * i.y)),", "o += vec4(w *( .4+((j+1.)/18.)), w * (j / 9.), w * ((j+1.)/ 8.) * 1.9,1);", "}", "XT95, 2016-05-12Very cool !", "LukasPukenis, 2014-06-16The idea and implementation rocks", "srtuss, 2013-06-04Good work! I really like the scene and the glow.", "", "Hey, ur from Austria? Great, now I don't feel so alone anymore. ^^", "iq, 2013-05-28haha, awesome!", "movAX13h, 2013-05-28As you wish ;)", "iq, 2013-05-28Yes, we are constantly working on improving things!", "", "As for E.T., what about making the tip of his finger glowing red or something? ^_^", "movAX13h, 2013-05-28Hehe, there's a new questionmark on top of this comments section with further instructions.", "Dave_Hoskins, 2013-05-28No wait, I can do a new-line, I guess things have changed around here.", "Dave_Hoskins, 2013-05-28 Yeah , I was considering it, but most people would just go \"huh!!?!?\"", "Hey, how did you insert an image into your comment? I can't even get it to recognise a new-line character.", "movAX13h, 2013-05-27Hehe, being Austrian and not knowing Dr.Who, I had to look it up. Since the windows are small and few, I'd have to rename my shader to \"E.T. in jail\" or make a new one", "Dave_Hoskins, 2013-05-27That's loads better. Being British, I can't help wanting the Dr. Who police box spinning there instead. Sad? I know", "movAX13h, 2013-05-27Dave, I wanted to have something like your warp effect inside the main box from bottom to top but I had enough of my work already and did not want to spend more time on it. Something that would suggest that E.T. got beamed away  Uncomment the \"swirl\" section at the bottom of scene() to see how far I got.", "movAX13h, 2013-05-27Yes, you're right. I mixed it properly now.", "Dave_Hoskins, 2013-05-27Hey cool. But I may agree with mu6k. If you can make warp not show though the character it would be better perhaps?", "mu6k, 2013-05-26Love it. Looks better with warp shader turned off imho.", "Danguafer, 2013-05-24hahahaha This shit is getting crazy xD", "movAX13h, 2013-05-22thanks  yay!", "iq, 2013-05-22multipass is coming, which is more powerful than just feedback ^_^", "iq, 2013-05-22Nice shader", "movAX13h, 2013-05-21Thank you all! Hehe, right, feedback is what I ment with multipass, ... yes, of course any tracker like sound toy; or maybe both combined, sound/synthtoy for instruments, tracker as sequencer. If all of this would not be so kindof-for-nerds-only it could start a creative revolution. If it was not math-based code but simplified logic bricks, suitably, visually presented, precisely chosen \"lessons\" for newbies, easy to use sound tools and ways to import own media files this could be very close to learning while playing a game. Since I quit my job by next month, after working on web applications for 13 years, I'm going to spend a lot of time thinking about a platform as explained, for the masses.", "w23, 2013-05-21very nice! also, my cents for would-be-awesome-to-have-stuff: an embedded 4k-ish synth (sonant was ported to js afair) with note events as uniforms. and a feedback -- previous frame as a texture.", "Dave_Hoskins, 2013-05-21Love the glow, it feels like the air in the box has a thickness to it.", "reinder, 2013-05-21wow, this one is really nice!", "CPU, 2013-05-20haha awesome", "FabriceNeyret2, 2015-09-07NB: I'm on linux (& chrome)", "metaeaux, 2015-09-06@reinder, sure! Done.  I was wondering why I saw -100. used with texture2D on a lot of other shaders on this site... Can you tell me what problem it solves?", "", "@FabriceNeyret2, I get that too when I run it on my mobile phone, but not if I run it on my computers. Hmmm.. I'll see if I can fix it. Thanks!", "FabriceNeyret2, 2015-09-06very cool !", "but on the zenith I see a large black disk. is it normal ?", "reinder, 2015-09-06Nice! Can you add -100. as third argument to the four texture2D fuction calls in your fbm function to avoid mipmap-problems on some devices?", "jt, 2022-01-09Wow!", "Dave_Hoskins, 2016-07-03Thanks. The 'other place'?", "stb, 2016-07-03Just saw this at the other place, it's awesome <3", "Dave_Hoskins, 2014-07-27I've been using this for playing with ridged corrosion, so I thought I save it.", "Dave_Hoskins, 2014-04-03OK, I've commented out the binary subdivision code and removed some global variables. It's quicker to compile here, so maybe it's working for you now?", "Dave_Hoskins, 2014-04-03I don't understand this. Can you try copying the address bar, quit the browser, then reload Chrome and paste the address. Does it work then? Are you using the latest Chrome?", "morgan3d, 2014-04-03Crashing on Windows 7 / Chrome for me now.", "iq, 2014-03-29Ouch, now it works again!?!?! Hm....", "Dave_Hoskins, 2014-03-25It's still OK here on Win7 and ANGLE. As far as I remember the changes are defined out, but I can't really remember. What's it not working with?", "iq, 2014-03-25It's not compiling anymore  Something has changed?", "Dave_Hoskins, 2014-01-21I've tidied up most of the banding and twitching problems and simplified the sphere tracing a little.", "skeyn, 2013-12-13absolutely amazed I am. Guys I'm looking for some resources to understand the basics of the shader coding. Hit me with a link if you've got some. Merci!", "iq, 2013-12-09Super cool!", "Dave_Hoskins, 2013-12-09Thanks, yeah it looks better having the focus slightly ahead. Done.", "TekF, 2013-12-09This is amazing. To get some blur close to the camera, I changed SphereRadius() to this:", "return clamp(abs(t-70.0)*0.1, 1.0, 100.0);", "reinder, 2013-12-08wow, really nice! I like de DoF a lot.", "Imsure1200q_1UWE130, 2018-10-25i rlly want to use this but yeah of course copyright :>", "FabriceNeyret2, 2017-08-24I guess n,m,r is a custome random generator ?", "(not that many comments in this code ;-) )", "", "floor(n) = vec3(floor(q), 31.+i ),    fract(n) = vec2(0,0, .189)    ( apart precision issues )", "", "", "a golfed blizzard version, for fun (550 chars)", "void mainImage( out vec4 O, vec2 U )", "{", "mat3 p = mat3( 13.323122, 23.5112, 21.71123,", "21.1212,   28.7312, 11.9312,", "21.8112,   14.7212, 61.3934  );", "", "vec2 q = iResolution.xy, s;", "U = iMouse.xy/q + U / q.x;", "", "float t = iTime,", "f = 5.*sin(t*.1);", "O -= O;", "", "for (float i=0.; i<200.; i++)", "{", "float j = i*.1;", "q = U* (1.+j);", "q += vec2( q.y* .8 * ( fract(i*7.238917) - .5 ),", "1.5* t / (1.+j*.03) );", "", "vec3 m = vec3( floor(q), 31.+i )/ 1e5 + vec3( 0, 0, .189 ),", "r = fract( (31415.9+m) / fract(p*m) );", "", "s =       abs( fract(q)  -.5 + .9*r.xy-.45 )", "+ .02*abs( fract(10.*q.yx) - .5        );", "", "O += smoothstep(1.,-1.,   ( .6* (s.x+s.y) + max(s.x,s.y) -.01 )", "/ ( .005+ .05* min( .5* abs(i-5.-f), 1.) ) )", "* r.x / (1.+.02*j);", "}", "}", "baldand, 2017-08-24Thanks! Good comments/feedback", "FabriceNeyret2, 2017-08-24some remarks:", "", "#25: vec2 uv = iMouse.xy/iResolution.xy + fragCoord / iResolution.x;", "", "acc could be a float. then fragColor = vec4(acc);", "", "mod(x,1) = fract(x)", "", "max(s.x-s.y,s.x+s.y) = s.x+s.y (since s is positive)", "", "you can loop on floats.", "", "NB: some spacing in formula would ease reading ;-)", "", "simplified version:", "#define LIGHT_SNOW // Comment this out for a blizzard", "", "#ifdef LIGHT_SNOW", "#define LAYERS 50.", "#define DEPTH .5", "#define WIDTH .3", "#define SPEED .6", "#else // BLIZZARD", "#define LAYERS 200.", "#define DEPTH .1", "#define WIDTH .8", "#define SPEED 1.5", "#endif", "", "void mainImage( out vec4 O, vec2 U )", "{", "O -= O;", "const mat3 p = mat3(13.323122, 23.5112, 21.71123,", "21.1212,   28.7312, 11.9312,", "21.8112,   14.7212, 61.3934  );", "U = iMouse.xy/iResolution.xy + U / iResolution.x;", "", "float dof = 5.*sin(iTime*.1);", "", "for (float i=0.; i<LAYERS; i++)", "{", "vec2 q = U* (1.+i*DEPTH);", "q += vec2( q.y* WIDTH *( fract(i*7.238917) - .5 ),", "SPEED* iTime / (1.+i*DEPTH*.03) );", "vec3 n = vec3(floor(q), 31.189+i),", "m = floor(n)/1e5 + fract(n),", "mp = (31415.9+m) / fract(p*m),", "r = fract(mp);", "vec2 s =       abs( fract(q)-.5 +.9*r.xy-.45 )", "+ .01*abs( 2.*fract(10.*q.yx) - 1. );", "float d = .6* (s.x+s.y) + max(s.x,s.y) -.01,", "edge = .005+ .05* min( .5* abs(i-5.-dof), 1.);", "", "O += smoothstep(edge,-edge,d) * r.x / (1.+.02*i*DEPTH);", "}", "}", "larry_kof, 2016-07-18Super nice", "inferno, 2014-01-19very nice!", "i'm still waiting for some snow over here...", "", "i made a matchbox version out of it. this version will work inside Autodesk's Fame / Smoke compositing software. if you want to see how that looks like, please take a look: http://logik-matchbook.org/shader/crok_snow", "CPU, 2013-05-06nice!", "FabriceNeyret2, 2021-03-10many strange things: counter in reversed order, out of frame, etc.", "I wonder what has changed.", "Anyway this is pretty old webGL1 code: nowadays we would rely on int operations.", "Chosen, 2021-03-10I notice if i add a line `t=33.;` before pInt(U, t) (line 44) then the output is 32!", "However 33.00001 is considered to be 33.", "FabriceNeyret2, 2020-12-17Note that several very cool 3D versions has been derived from this:", "my https://www.shadertoy.com/view/tdcXW2", "then excellent ShnitzelKiller's https://www.shadertoy.com/view/3stXDX", "", "see also:", "in fire:  https://www.shadertoy.com/view/wd3XW2", "2D mask: https://www.shadertoy.com/view/wscSW2", "UrbanClubProfessional, 2020-11-11This shader has been remixed by me here: https://www.shadertoy.com/view/3dcBWN", "henrmota, 2020-11-10You can make more smooth instead of", "float t = 3.*iTime;", "", "do:", "", "float t = mod(iTime, 256.);", "then on mix  fract(t);", "jt, 2017-06-27Nice!", "FabriceNeyret2, 2017-03-08have you tried some simple acid test shaders with final return embedded in various things ? (loop, switch, if...)", "poljere, 2017-03-08Looks like it might be a bug on my GPU driver. We have tested in multiple Mac+Chrome configurations and it only fails on the 750M... So weird...", "FabriceNeyret2, 2017-03-07good idea, but very different code: I let you try if you wish !", "ollj, 2017-03-07how about a morphing 3d column segment.", "FabriceNeyret2, 2017-03-07very strange ! a hint is that it is caused by the label \"morphing\" at the end, but I see now reason why the if won't work... as if you system ignored the early return !", "Wait: on webGL2 on Mac, return is already ignored in switch. Might we be back to the time or on some systems returns are sometime ignored (in loops, etc) ?", "poljere, 2017-03-07Hey Fabrice, on Chrome+Mac in WebGL2 I keep seeing many letters all over the screen. I haven't yet figure out the reason but... just by changing line 3 to \"p = clamp(p, 0.0, 1.0);\" then all is good. I have also tried with and without textureGrad but can't see a difference.. I have tested it in Windows another shader that was using this char() function and it works well. Any thoughts?", "Shane, 2016-12-09Nice. The font texture opens up so many possibilities.", "GregRostami, 2016-12-08Very COOL!", "FabriceNeyret2, 2016-12-08that's the spirit. Please do :-)", "KylBlz, 2016-12-08That works nicely because of the distance field, and i might steal your char function ^^", "huttarl, 2018-02-15@Dave: Much nicer, thank you!", "Dave_Hoskins, 2018-02-15You can reduce the central artifact by offsetting p.x slightly, float k = 1.2 * p.y - sqrt(abs(p.x)+.1);", "huttarl, 2018-02-14@iq, thanks, that definitely gets rid of the side burrs (#define EQUATION 2). There are slight artifacts along the center vertical axis; maybe that would go away if I used an analytic gradient function. :-)", "iq, 2018-02-14You can try this one: https://www.wolframalpha.com/input/?i=(x%5E2%2B(1.2*y-sqrt(abs(x)))%5E2%E2%88%921)+%3D+0+for+-1.5+%3C+x+%3C+1.5,+-1.5+%3C+y+%3C+1.5", "huttarl, 2018-02-14@ttoinou: It looks more like just a discontinuity than an overlap. See https://www.wolframalpha.com/input/?i=(x%5E2%2By%5E2%E2%88%921)%5E3+-+x%5E2y%5E3+%3D+0+for+0.99+%3C+x+%3C+1.01,+-.01+%3C+y+%3C+.01", "huttarl, 2018-02-14@iq: Thanks, works great. Wish I could think more in terms of doing operations on vectors, like you, instead of having to separate them out into their component parts. Maybe if I study code like that diligently it'll help.", "huttarl, 2018-02-14@ttoinou: Do you know how to do that? I didn't even realize the heart() function involved bezier curves.", "iq, 2018-02-14This is the analytical gradient: vec2 grad(vec2 p, float r)", "{", "float k = dot(p, p) - 1.;", "return p*(6.0*k*k - p.yx*p.yx*p.y*vec2(2.0,3.0));", "}", "ttoinou, 2018-02-14You have to make the bezier curves shorter so that they don't overlap", "huttarl, 2018-02-14@Dave_Hoskens, thanks, that fixed the problem on Macs", "OK does anybody have an idea how to get rid of the \"burrs\" on the sides of the hearts? Actually they're kind of growing on me, but they weren't intentional.", "huttarl, 2018-02-14Dave, thanks, that may be why I'm having trouble on Macs. Will try fixing that when I have time.", "Dave_Hoskins, 2018-02-14 Don't forget that you can't have any negative numbers in a pow() instruction (on either side) it has undefined results.", "jcyuan, 2020-08-29covid19, ohhh..", "grzesieKRK, 2020-08-13This is amazing and cute for some reason?", "Janek232, 2020-08-07", "This graphic is very interesting", "mamalka89, 2020-07-23Excellent!", "laura996, 2020-07-20Kinda virus-y. Looks very good", "Dzudex, 2020-06-17How sweet", "maziulka11, 2020-06-16Great!", "caroline89, 2020-06-15I've got school notebook feelings here. Like it!", "sylvain69780, 2020-05-19Many thank very instructive for a beginner like me !", "Is texcol used ? Seems not ...", "iq, 2015-08-17Very pretty, I love it", "oneshade, 2020-11-16@ollj What did I turn it into!!! XD", "nabr, 2019-03-13could be a cool shooting game", "emmasteimann, 2018-12-07@ollj that's so scary! But helped me to realize the little guy is breathing! X\u2011D", "minujeong, 2018-09-07@ollj awesome xD", "ollj, 2018-09-07i have a hobby of replacing smin witzh min() in many shaders, just for kicks.", "", "", "float smin( float a, float b, float k ){return min(a,b);}", "is quite ugly in this one.", "minujeong, 2018-08-14Impressive!", "fizzer, 2018-08-08I've improved the framerate a bit, replaced the environment map texture with a procedural reflection, and added a walking animation.", "zwwgggbest, 2018-07-31so cute", "flockaroo, 2018-07-30great! ..and cute :-)", "Carandiru, 2018-07-27haha wicked", "CLPB, 2018-07-26Fantastic organic modeling!", "Hsiett, 2018-07-25It's super cute! Nice work", "xwize, 2018-07-24This is amazing work! Only 210 lines", "mroczek75, 2018-07-24super animacja", "FabriceNeyret2, 2018-07-24@otaviogood\" really short considering what it does.\": yep, and it could easily be shorter by replacing p*.xyz by p*, distance by length,  making macro or funcs for similar lines, factoring redundant expr (like fract(time4)), macroing the ultrashort funcs, avoiding the ugly aspect ratio normalization,  etc ;-)", "otaviogood, 2018-07-24Wow, that's a really short program considering what it does. Nice work.", "knarkowicz, 2018-07-24Wow, great modeling and animation skills!", "PauloFalcao, 2018-07-23so cute", "fizzer, 2018-07-23Ha. Actually I had no idea that there is a competition happening, since I've been so busy recently! I will maybe try to think of something I could try for that.", "FabriceNeyret2, 2018-07-23nice !", "it could almost be an entry for the summer competition... if it was human :-D", "zproxy, 2018-07-23cool. Tamagotchi", "Shane, 2018-07-23 So clean and beautifully rendered.", "iq, 2018-07-23Very good!!!", "BigWIngs, 2018-07-23Very nice rendering. I love the eyes. Perhaps make it look at the mouse cursor?", "sben, 2019-08-26Fixed ! Thx Mipmap !", "Mipmap, 2019-08-02Here's a fix for shader error on Safari (OSX High Sierra), add float declaration to for loop:", "", "for(float i=0.; i<2.; ++i)", "Mipmap, 2019-08-02Mesmerizing!  And for such little code.", "sben, 2019-07-24yes it's more efficient, thx a lot !", "FabriceNeyret2, 2019-07-24nice !", "", "some remarks:", "", "fx: initialisation to 0 useless since set  right after.", "", "distance is generally used for vectors. here is is equal to abs(fc.x-.5)", "same for length: here, is is just abs", "", "note that you can loop on floats (to avoid casts)", "", "for once, I think that using a vec1 instead of float for fx and eq complicates the writing.", "", "->", "float eq(vec2 p,float t, out float y){", "float x = sin( p.y +cos(t+p.x*.2) ) * cos(p.x-t);", "x *= acos(x);", "x *= -abs(x-.5)*p.x/p.y;", "y = p.y-x;", "return x;", "}", "", "vec3 computeColor(vec2 p, float t, float hs){", "vec3 color = vec3(0), X;", "float y,y0, x = eq(p,t,y);", "for(float i=0.; i<ITERATION; ++i) {", "p.x *= 2.;", "X = x + vec3(0, eq(p,t+i+1.,y0), eq(p,t+i+2.,y0) );", "x = X.z += X.y;", "color += TONE / abs(y-X-hs);", "", "}", "return color;", "}", "", "", "just for the fun of it:", "your shader can reduce to 353 chars (from 789 ) ;-p", "float eq(vec2 p,float t){", "float x = sin( p.y +cos(t+p.x*.2) ) * cos(p.x-t);", "x *= acos(x);", "return - x * abs(x-.5) * p.x/p.y;", "}", "", "void mainImage( out vec4 O, vec2 U ) {", "O -= O; vec4 X=O;", "vec2  p = 20.*(U / iResolution.xy  +.5);", "float t = iTime,i,", "hs = 20.*(.7+cos(t)*.1),", "x = eq(p,t), y = p.y-x;", "", "for(i=0.; i<2.; ++i)", "p.x *= 2.,", "X = x + vec4(0, eq(p,t+i+1.), eq(p,t+i+2.) ,0),", "x = X.z += X.y,", "O += vec4(.5,.2,.3,0) / abs(y-X-hs);", "}", "Mapilu, 2019-07-22Whoa, amazing animation!", "james4388, 2019-07-11wow", "Ommadawn, 2017-05-12Very nice", "weyland, 2015-12-15Superb", "sben, 2015-03-09Thanks a lot, it was the desired effect!", "iq, 2015-03-09Very magical!!!", "c64cosmin, 2023-06-11https://www.shadertoy.com/view/DtySDd", "Made a fork where colors cycle", "coolpersonlol, 2023-06-10ok", "hornet, 2023-06-09stochastic version to reduce sample-count https://www.shadertoy.com/view/clGSDG", "feresr, 2021-07-09I have a dummy shader that applies rbg2hsl and then hsl2rgb and the resulting image is slightly darker... Tried with the implementation in the link @anastadunmbar provided and it works as expected.", "gunnarclovis, 2020-07-23Thanks for this!", "jamesgrote, 2019-10-14To just see the color spectrum without time motion, replace \"vec3 rainbow ...\" line with this:", "", "vec3 rainbow = hsl2rgb( vec3(uv.x, 1.0, uv.y) );", "anastadunbar, 2019-07-20Check out https://www.shadertoy.com/view/wt23Rt instead.", "FabriceNeyret2, 2022-12-03when zooming out ;-) :", "blurryroots, 2022-12-03Superb. Love the story telling.", "H2ongzh, 2022-10-23insane!! soooooo cool", "piyushslayer, 2020-04-082 years late, but the eye saccades are so natural! Brilliant job!", "Passion, 2019-05-01Turning to stone like Medusa. This is art.", "Passion, 2019-05-01Amazing", "starea, 2019-04-28Masterpiece! We need \"crowdsourced rendering\" for the exercise!!", "xavierseb, 2019-04-27bravo!", "mastersun, 2019-04-26Awesome!!!", "el_gringo, 2019-04-25So cool...", "", "I replaced all RotateEye by:", "RotateEyeTo(0.5, 0.0, 1.0,", "vec2(0.3 - iMouse.x / iResolution.x*0.8,", "-0.4 + iMouse.y / iResolution.y * 0.5));", "trevorleake, 2019-04-23Love the veins on the eyes. Beautiful.", "lovelyH, 2019-01-20This look very real. Good job.", "PauloFalcao, 2019-01-14The Eye... Wow! Impressive", "dila, 2018-08-19wow this is crazy", "dcoombes, 2018-08-13Wow!", "synergyseeker1, 2018-08-13@knarkowicz. Thank you! Again, beautiful work. I'll keep you posted!", "knarkowicz, 2018-08-13@synergyseeker1 That's really cool! Feel free to use it in any way you like.", "synergyseeker1, 2018-08-13would I be able to use a still from your shader in a book I writing about shaders, if I give full credit you and a link to your shader?", "synergyseeker1, 2018-08-13love this! so good.", "flockaroo, 2018-08-12very good!!", "CLPB, 2018-08-11I edited this to zoom out... Spooky!", "iapafoto, 2018-08-11Zoom is a nice touch. double-love it", "Shane, 2018-08-11So cool. The iris, pupil, etc, is exceptionally well done.", "knarkowicz, 2018-08-10@BigWIngs I actually was working on the eyelashes, but had to give up, as it's time to fly out to SIGGRAPH .", "knarkowicz, 2018-08-10Thank you for kinds words!", "@Thomas Yes, you are right. I couldn't settle between more realistic and more flashy , but after your comment I removed 50% of specular on skin.", "@Fabrice Added a zoom-in in 8th second. The entire mesh is messy (modeled for a specific camera position) so I can't do custom camera movement :/.", "reinder, 2018-08-10Wow! The animation of the eye, skin and muscles is incredible. And the shader is also very fast.", "FabriceNeyret2, 2018-08-10cool ! may we turn or zoom in/out a bit the camera ?", "shau, 2018-08-10Beautiful", "ThomasSchander, 2018-08-10Looking good! Maybe the skin is a bit too glossy? Making it more rough would also emphasize the contrast between a glossy stone.", "iapafoto, 2018-08-10Very realistic, eye and skin are incredibles. love how muscle contracts also", "BigWIngs, 2018-08-10They eye is so nice and watery and realistic! Adding eyelashes would make it perfect!", "dean_the_coder, 2020-12-23It was supposed to be a bit dark, but I see your point.  Thanks for the feedback -  Now brighter!", "iq, 2020-12-23Very nice! But very dark too, it was difficult to see (I multipllied the colors *6 before gamma))", "aiekick, 2020-12-23nice one, but a bit dark", "MK2k, 2018-03-05there's no school like the old school", "elementalfx, 2019-03-04awesome!", "michaeltorresor, 2019-02-22It's so realistic!", "starea, 2019-02-22Love this!", "BrendonCon, 2019-01-31So cool, right about the harsh edges! Loving it though", "bjarkeck, 2016-01-21So cool! Fix those eges pleeease !", "FabriceNeyret2, 2021-05-13This guy is a spammer: see profile.", "oneshade, 2021-05-13@amaanrao That link is completely unrelated, was that intentional?", "amaanrao, 2017-11-28For More Info about Linear map: circle to ellipse then click on https://uaetechnician.ae/laptop-repair-services/", "FabriceNeyret2, 2017-11-27NB: it is interesting to explicit the ellipse axis (see herehttps://www.shadertoy.com/view/MtsBzn), since this is unintuitive and needed in many applications such as anisotropic antialiasing (seehttps://www.shadertoy.com/view/ltXfRr).", "ollj, 2018-10-08having fun replacing a line with", "float spiralAO(vec2 uv, vec3 p, vec3 n, float rad)", "{", "float goldenAngle = uv.x*2.5*5.*iResolution.x/iMouse.x;", ";if(uv.y>.0)goldenAngle*=.5;", "...", "", "just to explore possibility space, disregarding any precision issues.", "this is one way of doing fourier analysis that i never looked forward to", "ollj, 2018-10-08oh whatever scaling it takes to save you 1 character.", "ollj, 2018-10-08same thing, just scaled by pi, and whether you define pi as a full rotation, half rotation", ", quarter rotation, or third, rotation, or even ANY fraction of a rotation", ", including as a phi-fraction itself, was arbitrary", ", even by Euler, who used different values for a pi ratio", ", depending on what folding-context made the most sense.", "", "For Fourier analysis, regular intervals simplify things, while interval-lengths are arbitiary. And", "https://en.wikipedia.org/wiki/Conlon_Nancarrow", "prefers irrational intervals for music.", "Xor, 2017-12-20ollj, You're mixing the golden ratio with the golden angle. The golden ratio is \u2248 1.61 and the golden angle in radians is \u2248 2.40.", "ollj, 2017-10-07last time i checked; goldenAngle = 1.61=sqrt(5.)*.5+.5 ;optionally goldenAngle -=1. ; which is important for this one", "This shader is from a world where it is \"Bernstained bears\"", "pellicus, 2016-01-05good!", "poljere, 2016-01-05Oh yeah! SSAO in the Matrix", "iq, 2016-01-05Nice!", "PelicanPolice, 2020-11-26This is so pretty", "ocb, 2020-10-09@pixeljig: Cool product. Hope for a good success. I am happy you can use this shader.", "pixeljig, 2020-10-08@ocb this is the app: https://appgallery.huawei.com/#/app/C102997863", "ocb, 2020-08-30@pixeljig:", "Yes, feel free to use it in a commercial product.", "Thanks for asking.", "I am curious to know the product???", "pixeljig, 2020-08-28can it be used in a commercial product?", "rigel, 2018-01-22I love this. I imagine a kind of cyberpunk tokyo.", "Vick, 2018-01-14To be sent to Apple for next iTunes animation update ...", "Vick, 2018-01-14Close Encounters of the Third Kind", "834144373, 2018-01-14hum...That's so cool!", "stb, 2018-01-13This is great", "ocb, 2018-01-13Thanks.", "Some music sensitivity added.", "iq, 2018-01-13Nice", "Shane, 2018-01-13I like this. It has a distant city lights feel to it.", "shau, 2018-01-12Very pretty for little code", "turboplay, 2022-04-15Excellent shader and I like the fact that the code is documented.", "lovelyH, 2020-06-19I like how blury paint look of it.", "frankenburgh, 2013-05-09Oops... thanks gleurop. I've fixed this, but cannot check because I cannot reproduce on any system. Sry, the code is anyhow a bit messy ;))", "gleurop, 2013-05-09The fix for the graphical glitches is to initialize starts to zero on line 268.", "w23, 2013-05-09I have some weird glitches here on my machine (gentoo, sources-3.7.10, nvidia-313.30 [on gtx 460]) on both firefox-20.0.1 (http://i.imgur.com/Bv7a4a9.png) and chromium-26.0.1410.43 (http://i.imgur.com/MFxQy7j.png), note that they're slightly different. AFAIR I had the similar-looking glitches on the same machine under windows, but can't check right now. I also hope that those don't expose anything sensitive from my RAM .", "rafacacique, 2013-05-03Congrats, this is awesome!", "poljere, 2013-05-02Love it!!!", "PauloFalcao, 2013-05-01Awesome!", "frankenburgh, 2013-04-30Yes ;) Is a surrogate-function for brownian-like noise. I've used this because it's much faster than the fbm function - even for compiling the code (and don't change the texture )", "Dave_Hoskins, 2013-04-30You've used a texture for the branches!  Did it take a while to get the magic numbers just right?", "ssdsa, 2013-04-30Cool!", "iq, 2013-04-30Amazing! Love it!", "CPU, 2013-04-29Fixed now, well done!", "CPU, 2013-04-28very nice sky! (Chme/AMD problems)", "Andrenator, 2013-04-28Very cool and nice trees ! (PS: Erster!)", "Shane, 2023-02-25@iapfoto", "I guess there's a lot to consider when choosing the \"Featured\" shaders. Even something as simple as compile time could hang the front page. There's also shaders that no longer work, etc. I'm not sure how I'd handle it (hand picking, criteria algorithms, etc), but I do know that by only showing four every month (roughly 50 a year), it would take centuries to get through every shader on here.", "FabriceNeyret2, 2023-02-23@iapafoto:", "don't the API provide the list of them ?", "Then at least a third party website could offer these kind of live galleries.", "iapafoto, 2023-02-23@Shane", "Maybe if the Feature Shaders were randomly selected at each connection among the shaders with a good ratio number of likes / number of views", "Shane, 2023-02-23Thanks again, everyone. \"Shader Of The Week\" -- I was wondering why this was getting extra attention.  I was thinking the other day that Shadertoy easily has enough inventory these days to have a \"Shader Of The Day\", but I'm guessing preparing the front page every day would get tiresome for the creators pretty quickly -- I wouldn't want to do it.", "", "Anyway, this example was a half hearted attempt to create imagery with a Blender rendered feel. I haven't done it in a while, but I watch the occasional Blender tutorial. I'm always amazed by the sheer amount of work their artists put in, and how lazy my efforts look by comparison.  It's a bit hard to compete with a huge engine with endless assets and the luxury of rendering time, but I noticed a lot of effects rely heavily on simple postprocessing algorithms, so I figured I could at least put more effort into that.", "", "@Kali", "If it were up to me, I'd be puting your recent \"Swirled\" shader on the front page.", "soundmasteraj, 2023-02-21Thanks for sharing your hard work and talent, the inspiration transfers out and refracts in the creative minds of others!", "PauloFalcao, 2023-02-21WOW!", "Nimajamin, 2023-02-21Shane does it again!", "jarble, 2023-02-21It looks almost exactly like a real \"infinity dodecahedron,\" with half-silvered mirrors on each face of the polyhedron.", "MacSlow, 2023-02-21Gee, dude... that's sweeeeeet!", "Kali, 2023-02-21Incredible quality, so pleasing to watch. Hats off!", "mrange, 2023-02-21Very nice.", "MiniByte, 2023-02-15You are amazing man! Thank you foar all! I appreciate and respectfully bow raising my hat! unbelievable... it's exactly what I'm thinking of doing with mirrors.", "dr2, 2023-02-15See Sand Album for all the buildings.", "Shane, 2023-02-15@dr2", "Ironically, the template I used for this, here, does show refraction, but I've described it as metal and glass. I should probably swap title descriptions. The name was just a place holder that I never bothered to change, but the example does contain a cliche refraction-reflection loop, so I'll leave it as is for now. I have some interesting bendy light examples that I'll eventually get around to posting.", "", "I definitely prefer the refraction, DOF, etc, logic contained in path tracers. I tend to make post-processing DOF blur logic up as I go. Sometimes, I might want less blur falloff near the camera and more toward the horizon, etc. What I'd really like to see is a nice compact bokeh function without needing to stitch together several tabs. I understand that it's necessary sometimes, but I find multitab spaghetti solutions impractical for simple shaders.", "", "The \"Losing Focus 2\" shader of yours contains some really nice objects in it. Some would would be worthy of their own individual shader.", "dr2, 2023-02-14Cute. But hard to see refraction effects (except in the title)", "", "I've added a new shader This Is Not A Refracted Pipe that show strong refraction and also includes a list of my older refraction examples.", "", "For depth blurring that operates both in front of and behind the focal plane see Losing Focus 2.", "Shane, 2023-02-14@flockaroo", "You may have seen versions of these objects in real life. On entry, light is refracted through a thin panel, then it's purposely reflected internally to capture the reflected imagery -- In code terms, I've simply flagged the ray to only reflect after it's been refracted through the panel and hit the air medium again. The real life objects are usually done up with lights and so forth to make some really cool imagery, and I'd like to make one of those later.", "", "In regard to the surfaces that let light through in one direction, but not the other, I've never looked into it -- It was probably mentioned during one of my classes when I was staring out the window thinking about anything other than math and physics.  I referrred to the panels as two way mirrors. I might look the physical objects up and put a better description in there.", "", "@01000001", "I have so many things on my \"to-do\" list -- I wish I could produce these things faster. My biggest problem is that I could be half way through something, then someone on Shadertoy will post something interesting, which will divert my attention elsewhere, to the point where I'll forgot what I was working on in the first place.", "Plento, 2023-02-13Beautiful. That blur looks so good with this.", "flockaroo, 2023-02-13very cool! ...hmm, but is there actually any refraction involved? i only see reflections... or is it the unsharpening by double refraction/reflection at the glass windows?", "aiekick, 2023-02-13maybe the best of your creations for me", "01000001, 2023-02-12Can you read my mind or something?! This is the third or fourth shader that you have made that I was planning on making myself just days ago!", "byt3_m3chanic, 2023-02-12this is amazing!", "jt, 2023-02-12Cool", "Carandiru, 2023-02-11man that looks nice, inside view and no metal tubing is like being a \"bug\" (eye perspective)", "iq, 2023-02-11Beautiful", "GregRostami, 2023-02-11SUPER Nice!!", "kishimisu, 2023-02-11Artistically and technically beautiful!", "shau, 2023-02-11Awesome.", "msm01, 2023-02-11Send this to the 3D printer. NOW !", "derSchamane, 2023-02-11beautiful.", "I like the steampunky look and the glowing background. =)", "dean_the_coder, 2023-02-11Art.", "iapafoto, 2023-02-11superb!", "lz, 2023-02-11Amazing", "FabriceNeyret2, 2023-02-11impressive !", "demofox, 2016-02-28Known Bug: yes, the colors change from buffer to buffer sometime.  I'm not really sure why, as they are generated in a very similar fashion as the points, which do not change from buffer to buffer!", "demofox, 2016-02-28Results:", "* I haven't seen JFA have any differences from the actual ground truth.", "* I haven't seen any differences when doing each step in an x axis step, then a y axis step.", "* Doing a full JFA on x axis, then another on y axis has LOTS of problems, but strangely seems to get about 50% of the results right?  Didn't dig too deeply into the reasons or characteristics of it getting the right vs wrong answers.", "demofox, 2016-02-28Controls:", "1 - Ground Truth (Buf A)", "2 - Traditional JFA (Buf B)", "3 - JFA step on each axis alternating (Buf C) - this uses 6 texture reads instead of 9, and could be optimized to 5 reads.", "4 - JFA on x axis, then JFA on y axis.", "Space - toggle \"diff mode\".  on by default, if anything is different than ground truth, it will flash red / yellow to show where the differences are.", "Click - zoom in to see more detail", "FabriceNeyret2, 2018-04-29exist only for 4\".  and the icon start at 4\". ;-)", "-> you should loop in time ;-)", "EvilRyu, 2018-04-03love it", "vojd, 2018-04-02Lovely atmosphere. Deserved a top-3 ranking at Revision.", "Nitato_, 2018-04-01saw this at the party. nice!", "xZAKHAMx, 2021-12-28it's not compiling!", "robertheadley, 2021-11-20This is a really great effect. Would love to see it as a Shader for OBS.", "FabriceNeyret2, 2018-01-16somebody there ?", "no longer compiling in webGl2.", "FabriceNeyret2, 2017-12-14no longer compiling in webGl2.", "Lanlost, 2018-11-08... how have I not known this kind of stuff could be done with shaders?", "", "Nope. Can't handle it. Just going to close my eyes and get a headstart on the after life. Thanks a lot.", "reinder, 2018-08-27super cool!", "jt, 2016-02-01Cool :-)", "FabriceNeyret2, 2016-01-31cooool ! :-)  yeah, one more game in the list ! (there are not so many yet :-) )", "dr2, 2016-01-31Now you have control of cue angle. Go play. It is now officially a game. :octopusballoon", "FabriceNeyret2, 2016-01-31hu, there is spin at billiards ? :-) even on PC billiards ?", "anyway it would have be cool to control only the angle, or maybe angle+strenght, since it was looking so close of able to be interactive ! (with all the hard simulation part done).  then you could have added the tag \"game\". ;-)", "dr2, 2016-01-31All we need are one or more sliders to control the cue. But after adding cue angle and speed controls, the billiards experts will complain there is no spin (do you know how many kinds of spin there are in billiards?), which requires sliding and rolling friction for the dynamics, and so on... (a slight deviation from the primary Shadertoy mission).", "FabriceNeyret2, 2016-01-31hum, we do not really control the ball, right ? :-)", "renaudbedard, 2015-09-25Love the ordered dithering!", "Duke, 2015-09-25Thanks", "Hamneggs, 2015-09-25Whoa this is awesome. Something that would make a great \"we're going to make this image you see here\" step-by-step tutorial.", "aiekick, 2015-09-24", "patu, 2021-04-02@Lumos, do it", "oneshade, 2021-01-13Sweet!", "Lumos, 2020-09-04Very nice shader  Could i use it when VJing?", "dila, 2017-02-08nice", "shau, 2017-01-27Love it", "iq, 2017-01-26Vert nice!", "Shane, 2017-01-25Awesome. Love the design element.", "aiekick, 2017-01-25wow", "adimineman, 2020-03-20please fix the line drawing order", "NEAR_DREAM_UNITY, 2023-02-02The variations which can be found in commented lines are a master's touch. This is one of my favorite sharers ever and a frame of it has been my desktop wallpaper for a while now.", "FabriceNeyret2, 2017-12-03Here is the costmap of frame0 (computed here https://www.shadertoy.com/view/ltfBzN).", "50% grey corresponds to average pixel cost. Horizon is 60% above.", "", "", "BTW, why is the purpose of the dithering ?", "If it's for saving computation, I don't think it's efficient on GPU.", "PauloFalcao, 2017-12-01Very cool!", "Shane, 2017-11-29Thanks, everyone. In case it isn't obvious, this is a cheap rendering - relatively speaking. 64 steps at two taps a step with a bailout...  Generally speaking, that's not enough to produce a realistic flythrough (clouds from a distance is possible though), so I opted for a kind of artsy style that got the point across, but it's in no way supposed to represent realism.", "", "Producing realistic clouds isn't the problem; it's trying to do so with as few steps and taps as possible. Computers are pretty fast these days, but there'd be plenty of systems that couldn't run this shader efficiently in its current state, let alone a more GPU intensive one. I have a couple of ideas that I'm going to try out that I think might produce more feature rich clouds, but even then, I'd imagine it'd only be feasible to run on moderately good systems.", "Shane, 2017-11-29@Duke", "Sebh's volumetric shaders are really useful, due to the fact that he's included a simple way in which to integrate scattering and absorbtion. The trick, however, is to find a way to do the same thing with considerably reduced steps. I have a couple of ideas I'm going to try out for my next cloud shader. They might work... or they might not.", "", "@Fabrice", "Thanks for the link. Hopefully, with that and a few other shaders on here, I might be able to cobble something together.", "", "@Dave_Hoskins", "I threw the time component in at the end to provide a bit of animation. I didn't give it too much thought beyond that. Anyway, I toned down the figures and gave it more of a windswept right to left feel. Not sure it it helped, but this shader was just a test run anyway.", "", "@Kuvkar", "I used the 2D texture for backwards compatibility. Plus, it might have been my imagination, but I could have sworn the quality was a little different.", "dila, 2017-11-28fast and good!", "Duke, 2017-11-28Looks nice and work pretty fast!", "I've also experimented a lot with different volume and clouds rendering technique in last year. My current clouds looks like this https://i.imgur.com/8F8sEzU.jpg and they are based on technique similar to what ThomasSchander used in his beautiful shader Enscape Cube. But I also added multiple scattering approximation which SebH mentioned in his talk https://www.ea.com/frostbite/news/physically-based-sky-atmosphere-and-cloud-rendering", "iq, 2017-11-27Nice!", "flockaroo, 2017-11-27very nice!", "stb, 2017-11-27Another awesome shader, Shane (but it needs a luck dragon ;) )", "kuvkar, 2017-11-27btw why didn't you use the actual 3d noise texture?", "kuvkar, 2017-11-27wow that's really pretty", "FabriceNeyret2, 2017-11-27In real cumulus clouds (that can be dense) the light ends up diffusing in every directions, while in very undense clouds it is strong forward.", "But in movie sequences, the fact that you know where is the Sun and where is the camera allow you to totally fake the coefficients to imitate the look without the multiple scattering physics, with parameter totally different in the next sequence (typically on The Day After Tomorrow, when you enter the giant tropical storm from sky then you look back once passed).", "", "Still, it is possible to do multiple scattering not too costly by analysing where light goes out multiscally. We did that in http://evasion.imag.fr/Publications/2008/BNMBC08/. Maybe you might grab some of the principle to fake something less accurate but still grasping some of the effect. The idea is to separate pack of rays by there number of scattering in the cloud. Low number are only backreflected locally. But the larger the order the deeper they go, seen the clouds blurrier with order scale. The trick is to be able do that backward, from the out point (that is the cloud pixel you see :-) )", "Dave_Hoskins, 2017-11-27Super lovely rendering!", "I'm not sure about the iTime factor in line 151, as it makes it look a little faulty to me.", "Shane, 2017-11-27@ingagard", "The clouds are heavy indeed.  I mentioned in the introduction that this is a stylized rendering, so isn't supposed to be realistic. I also mentioned that the high cloud density was a style choice. Basically, the clouds are supposed to look a little cartoony. I could change a few things here and there to make it look more conventionally realistic, but I still don't think it would quite right. This particular example uses just 64 steps and two distance field lookups at each one. It's not that much to work with - Just a bit of diffuse and shading.", "", "Putting together a geneuinely realistic looking cloud flythrough would require a fair bit of creativity, since you'd have to provide the illusion of volumetric light and shadows without the huge cost. I'll probably attempt it anyway... or I might save myself the trouble and wait for someone else on here to do it. That's worked well for me in the past.", "", "@aiekick", "God rays would be great, and they're easy to implement - Just light everything volumetrically. Unfortunately, doing that for every step would be crazy expensive. Having said that, I'd still like to see if it could be done. A strategically-placed full screen radial blur might be a very cheap alternative, but it wouldn't look anywhere near as good.", "FabriceNeyret2, 2017-11-27very nice !", "And the \"cloudy material\" looks more convincing than for the previous shader. ;-)", "ingagard, 2017-11-27One more thing Shane, I must say I highly admire your clean, cool style in your shaders. They all have that distinct look. Also your code is very readable. I huge help sometimes. Thanks for your work!", "ingagard, 2017-11-27really cool work there! The clouds is a bit too flat (or dense) making them very compact and dark.  Still rain-filled clouds tends to look like that. Maybe it\u00b4s  a thunderstorm coming up?", "", "Anyway, really like it!", "jt, 2017-11-27Nice!", "aiekick, 2017-11-27ok ok, no problem  not sure if its a good idea here, but is there a way with clouds to do some god ray ? god rays are visible due to some fog, but i think, we can have god ray in sparse clouds between dense clourds", "Shane, 2017-11-27@aiekick", "If you look at pictures of clouds at sunset or sunrise, especially ones in shadow, they tend to be pretty dark. In fact, these ones aren't dark enough, but I deliberately lit them up more than necessary to add a bit of cheer.  Either way, this is more of a stylized rendering, so is supposed to look a little artificial.", "aiekick, 2017-11-27nice, but i think the clouds are too dark", "jorge2017a1, 2020-06-23An excellent job ... it looks very good !!!!", "...........", "Un excelente trabajo ...se mira muy bien!!!!", "h3r3, 2017-04-08fixed, thanks", "FabriceNeyret2, 2017-04-08no longer working in webGL2.0 . \"precision\" keyword not allowed.", "spritus, 2015-09-04oily sea", "jamesgrote, 2014-07-04I'm trying to add a 2d sky texture instead of generated sky.  I can add the texure and mirror it, but it doesn't reflect off the waves.  Can anyone suggest the best approach for wave reflecting a sky texture?", "chenfubi, 2014-05-16so nice, how?", "PauloFalcao, 2013-09-19Nice water and reflection", "h3r3, 2013-05-27", "movAX13h, 2013-02-27And God said: \"Let there be light\". And there was light.", "MinimilisticBits, 2023-06-13To ath500", "Terrific analysis! You've done an incredible job, just like we always do - we have the best people, don't we? So let's talk about it:", "", "Fractal geometry: Everybody says we have a lot of fractals going on here, and it's tremendous, isn't it? The author is clearly very smart, probably as smart as me, using all these methods and doing all this wonderful work. We should have more of this, I always say!", "Noise and hash functions: This is about creating something totally unique, just like when we did it with the economy - there's nobody does noise functions better, nobody. We have the top people working on this, top!", "Blurring effects: You see this blur? It's soft, it's subtle - it's all about the details. When you're as successful as me, you understand that the small details make a big, big difference.", "Color Correction: We've got the best color correction. The ACES Filmic Tone Mapping is a winner, just like us. We're going to make colors great again!", "Performance considerations: And this, this is about winning. It's about performance, just like we always perform. They've got the best loop limits, and we're seeing amazing things happening.", "", "This is a fantastic shader. It's very complex, just like running a country, and I've done both. Maybe a little cleanup here and there, but it's pretty good. Like always, the key is to hire the best people, and we've got them. Fantastic job!", "MinimilisticBits, 2023-06-13To ath500", "Arr, me hearty! Ye be takin' a closer look at me code, and I be pleased to see ye be appreciatin' the advanced techniques in GLSL. Aye, I've been harnessin' the power o' procedural noise generation, blurrin', and color correction to create some visually interestin' results. Let me respond to yer insights from me pirate's point o' view:", "", "Fractal geometry: Aye, ye be spot on! Me code be full o' 3D fractals, matey! Functions like jb, jb2, jb3, DEmine, de22, DEeerr, newde, fractal, and fractal_de46 be me secret weapons to create distance estimations and different types o' fractals. I be tinkerin' with various fractal techniques to discover the treasures hidden within.", "", "Noise and hash functions: Ahoy! Me trusty wang_hash and rndf be the tools I be relyin' on for addin' randomness to me fractal generation. These be the key to injectin' the spirit o' adventure and unpredictability into the code!", "", "Blurring effects: Avast! The blur and blur2 functions be me way to give me creations a touch o' magic. I sample the surroundin' pixels, applyin' special weights to create smooth transitions and soften the fine details. 'Tis how I make me art look more enchantin' to the eyes.", "", "Color Correction: Arr, ye have a keen eye, me heartie! I be usin' the ACESFilm function to give me colors a bit o' pirate's flair. 'Tis like adjustin' the sails to set the right tone for me grand adventure! The parameters be me secret recipe to achieve a cinematic look fit for the high seas.", "", "Performance considerations: Aye, me lad! I be conscious o' the need for swift renderin'! Me loops be set to a fixed number o' iterations, makin' sure me shader can sail smoothly in real-time. But I be keepin' a weather eye, knowin' that complex fractals might cause some hiccups. I be ready to navigate the treacherous waters and fine-tune the loops to avoid any visual snags.", "", "Me hearty thanks for yer feedback on code clarity, matey! I be appreciatin' yer suggestions for more commentary. Aye, I'll add explanations about the mathematical principles, describe the purpose o' me functions, and mark me experimental territories clearer than the X on a pirate's map. I be makin' the code more accessible, so all can understand the secrets hidden within.", "", "Arr, ye be a fine matey for takin' the time to dive into me code and sharin' yer insights. I be raisin' me grog to yer kind words! I'll continue honin' me skills and seekin' new horizons in me shader development. Fair winds and smooth sailin' to ye, me friend!", "MinimilisticBits, 2023-06-13To ath500", "I'm glad to see that my code has been analyzed and appreciated for its advanced techniques in GLSL. Developing this shader was a challenging yet rewarding experience, and I'm excited to share my thoughts on the insights provided.", "", "Fractal geometry: Yes, fractal generation is a key focus of my code. I'm deeply fascinated by the intricate patterns and structures that can be created through iterative algorithms. I wanted to explore various types of fractals and experiment with different techniques to achieve visually captivating results. It's great to see that the complexity and diversity of my fractal generation methods have been acknowledged.", "", "Noise and hash functions: I integrated a hash function and a random noise generator to introduce randomness into the fractal generation process. These functions are indeed widely used in procedural generation and were crucial for adding complexity and variability to the generated fractals. They help create a more organic and natural appearance in the final output.", "", "Blurring effects: Implementing blurring effects was essential to enhance the visual quality of the shader. By applying convolution operations and sampling neighboring pixels, I aimed to achieve smooth transitions and soften the details in the image. This technique allowed me to create a more aesthetically pleasing and visually appealing result.", "", "Color Correction: I'm glad that the use of the ACES Filmic Tone Mapping curve for color correction was recognized. I wanted to achieve a more realistic and cinematic color reproduction, and this technique was instrumental in achieving that goal. The curve parameters were carefully selected to produce the desired aesthetic, and they can be tweaked to adapt to different use cases or artistic preferences.", "", "Performance considerations: Indeed, real-time rendering performance was a significant factor in designing the code. By utilizing loops with a constant number of iterations, I ensured that the time complexity remained low and the shader could render efficiently. However, I am aware that as the complexity of the fractals or scenes increases, there is a possibility of visual artifacts or incomplete renderings. In future iterations, I will explore dynamic loop limits to address these potential issues and enhance the rendering capabilities.", "", "I appreciate the feedback regarding code organization and clarity. While I aimed to create a visually stunning shader, I understand the importance of making the code more understandable for others. Your suggestions for increased commentary, including explanations of the mathematical principles, descriptions of function purposes, and clear identification of experimental sections, are valuable. I will definitely consider these improvements to make the code more accessible and easier to comprehend.", "", "Thank you for taking the time to analyze my code and provide such insightful feedback. It's encouraging to know that my efforts in leveraging GLSL and mathematical principles in computer graphics have been recognized. I'll continue to refine my skills and explore new possibilities in shader development.", "ath500, 2023-06-08It's clear that the author of this code is using a combination of advanced techniques in GLSL (OpenGL Shading Language), which includes procedural noise generation, blurring, and color correction, to produce some visually interesting results. Here are some insights that can be drawn from the provided code:", "", "1. **Fractal geometry:** A significant part of the code is dedicated to fractal generation, specifically 3D fractals. The methods `jb`, `jb2`, `jb3`, `DEmine`, `de22`, `DEeerr`, `newde`, `fractal`, `fractal_de46` and a few others generate fractal-based distance estimations using a variety of iterative techniques. It's also noteworthy that the author is experimenting with various fractal types and techniques.", "", "2. **Noise and hash functions:** The author uses a hash function `wang_hash` and a random noise generator `rndf` in the fractal generation process, which are commonly used in procedural generation for producing randomness.", "", "3. **Blurring effects:** The `blur` and `blur2` functions implement a sort of convolution operation to produce a blur effect, sampling surrounding pixels and applying weights to them. It's an effective technique to create smooth transitions and soften the details in the image.", "", "4. **Color Correction:** The `ACESFilm` function appears to implement a color correction using the ACES Filmic Tone Mapping curve. This technique is often used in games and films to achieve a more realistic or cinematic color reproduction. It's important to mention that the curve parameters (a, b, c, d, and e) are typically chosen to produce the desired aesthetic and may be tweaked to fit the specific use-case.", "", "5. **Performance considerations:** The loops in fractal calculation functions have a constant number of iterations, which means the time complexity is O(1). This helps to ensure real-time rendering performance. However, as the complexity of the fractal or scene increases, these hard-coded loop limits could lead to visual artifacts or incomplete renderings.", "", "Overall, this is a quite advanced shader demonstrating solid knowledge of both GLSL and the underlying mathematical principles used in computer graphics. Despite the complexity, the code could benefit from some refactoring and increased commentary for better understandability. The commenting could include explanations of the mathematical principles in use, descriptions of each function's purpose, and clearer identification of experimental or 'work-in-progress' sections of code.", "bank84, 2023-06-08loos so much like dew on a spider web early in the morning. love it!", "soundmasteraj, 2023-06-05awesome!", "3g0st, 2023-06-05Absolutely stunning and very fun to play with input", "msm01, 2023-06-04What bloodnok and jt said !", "jt, 2023-06-04Cool! Should be called \"particle collider\"", "byt3_m3chanic, 2023-06-04Awe pretty!", "bloodnok, 2023-06-04It's got that \"particles colliding in a bubble chamber\" look about it.", "MinimilisticBits, 2023-01-23Yeah it's from the rotation function", "iq, 2023-01-20The shader has a funny black horizontal line in the middle. Do you know where it comes from?", "MinimilisticBits, 2022-01-22Thank you so much <3", "iq, 2022-01-22Very pretty!", "jt, 2022-01-03looks very good!", "AhnthinkgooD, 2021-05-02I'm Into it Thx", "oneshade, 2021-04-20Thanks! I haven't tried using bump mapping in a raymarcher before.", "Shane, 2021-04-19@oneshade", "Apologies for the late response -- It's been a busy week.", "", "Raymarching involves a lot of simple tricks, and one of them is putting the faster lower frequency functions inside the GPU intensive raymarching loop, then applying the more detailed (often slower) functions outside the raymarching loop -- Usually in the form of bump mapping. The raymaching loop has in the order of a hundred \"map\" calls, whereas bump mapping tends to involve about four.", "", "You seem to know your way around differential geometry, etc, so if you're not familiar with bump mapping (texture or function form), I'm pretty sure you'll figure it out. Either way, I have examples everywhere that are pretty easy to drop into code.", "", "It also helps to have a bunch of cliche functions in your head that are cheap, but visually effective. In this case, it's also possible to store detailed terrain in a buffer, since GPUs these days tend to be pretty efficient when reading texel values. I use that technique in several shaders on here.", "oneshade, 2021-04-14I'm wondering how you get the terrain so detailed without causing the shader to be very slow. I've tried a few times but it always seems to get too much slower each time I add a new detail. Any tricks?", "dila, 2018-03-18very good", "rigel, 2018-03-12I missed this one. So cool!", "CaliCoastReplay, 2017-09-08How fast is it, Dave?  I do agree - I'd update the graphics card first, if anything - still, on a GT720 it can't quite hit even 1080p.  I'm surprised to hear that a GTX680 can do 4k!", "Dave_Hoskins, 2017-09-08I don't think the CPU will help you there. It's the GPU you want, although I'm running this full screen with a 4K monitor on an 'old' GTX 680.", "CaliCoastReplay, 2017-09-08Unbelievable.  Makes me want to get a 1080 and an i7 or better to see it at 60fps fullscreen.", "", "Do you do daytime work in the field, Shane?  I feel like you have to be - it would be astonishing and a loss to the world if your talents weren't being used in this field in a full commercial capacity.", "zackpudil, 2017-08-17This runs at at 60fps on my phone. That's incredible. If I attempted this it would look half as good and run at like 3fps or crash.", "Shane, 2017-05-26@nimitz", "The function isn't used for anything time critical here, but I use it inside raymarching loops on occasion, so if you're saying it's slower, I'll take your word for it and make the changes.", "", "Fabrice was only using it as a code shortener, but I certainly assumed it was faster. I was given the impression that it's quicker to group everthing into a vector first, then perform more expensive functions on the vector itself, so it seemed like a no brainer... but I've never really looked into it. On a side note, if you ever spot any obvious mistakes I'm making, feel free to let me know. It's the only way I'll learn.", "nimitz, 2017-05-25Just a quick note regarding Fabrice's 2D rotation, while it might seem faster due to having only a single sin() call, it is actually slower than the standard \"c = cos(a), s = sin(a)\" version since it requires an extra ADD when compiled.", "", "That cheap \"vegetation\" is really effective by the way!", "shau, 2017-05-24Ahh much better with decent GPU. I think this might be my new favourite shader", "flockaroo, 2017-05-24really pretty - it looks very real!", "Shane, 2017-05-24@shau", "I'll usually let these run for three to five minutes, and if I see no problems, I'll release them. This one seemed to pass, but I'm on a pretty up-to-date machine. Degradation tends to occur on account of the GPU based \"sin\" function's inability to handle large values - that I don't consider large at all - with enough precision. I'm not familiar with GPU construction, but I'd assume that the lab nerds would endeavor to get more accuracy out of each new generation?", "", "Either way, if you look at the smooth 2D value noise function, \"n2D,\" you'll see that I really went overboard trying to group operations together in order to minimize instruction count, which meant rolling in the \"sin\" based hash function. I could definitely get increased accuracy using Dave Hoskins's \"sin\" free hash, but it might sacrifice a bit of speed... Shading makes my head hurt sometimes.", "shau, 2017-05-22Amazing  For some reason the terrain seems to deteriorate after some time on my machine", "Duke, 2017-05-22Very nice!", "Shane, 2017-05-22@Dave_Hoskins", "If you look at the distance function, you'll see that I put very little thought into this, so there are probably better ways to go about constructing it.", "", "Having said that, I've been putting effort into terrain construction as a whole lately. As an exercise, I tried to make a Lipschitz friendly (for want of a better description) terrain with a tunnel running through it. I think I managed to do it, but the second I started smoothing things, adding interesting features, etc - which tends be aesthetically necessary - things would break down. Either way, it made me realise that I should at least attempt to create surfaces that are easier to hone in on.", "", "@iq", "Nice is relative, of course. Compared to that \"Rainforest\" example of yours, this is a stick-figure drawing.", "iq, 2017-05-22Super nice, and super fast!", "Shane, 2017-05-22@ocb", "I kept the corner roll down a little to direct more attention to the canyon, but I agree, the camera needs to bank more, so I met you half way. In regard to anticipating the pitch ahead of time, sometimes that can cause trouble when the sinusoidal path frequency is too high, so I've left that as is. Either way, I could probably add one or two layers of terrain noise to the camera motion to give the impression that more of the underlying terrain is being anticipated.", "", "On a side note, moving a camera along a path only adds a few lines here and there, so I'm surprised that more people don't apply it.", "", "@antonOTI", "That scenery is pretty freaky. If someone rendered it in shader form (definitely doable), I'd think the chasm looked a little boxy.  I'm going to try to get to Iceland and Greenland within the next year... Not for any particular reason other than to say I've been there.", "coyote, 2017-05-21Beautiful!", "kuvkar, 2017-05-21beautiful scene", "antonOTI, 2017-05-21Hooo it remind me that one time I was scared to death in Iceland : \u00deingvellir", "http://i.imgur.com/gzurlSO.jpg", "Dave_Hoskins, 2017-05-21Gorgeous!", "I'm amazed you managed to get those cliff edges so well defined.", "public_int_i, 2017-05-21Beauty.", "ocb, 2017-05-21Whaouu!", "I  LOVE  the camera swivle function.", "", "Maybe... (it's only a personal opinion) You should try to anticipate recline for a better flight experience. As you have to recline first, then forces apply, then path start to curve.", "line 608 try: vec2 sw = path(lk.z+3.);", "", "I would increase a little the recline too, due to high speed of flight.", "line 609: rd.xy *= r2(-sw.x/16.);", "But this is truly a personal feeling...", "reinder, 2017-05-21beautiful!", "SudoNhim, 2017-05-21It looks so real though!", "Helen, 2020-12-28Hi! Could you write the similar shader for me? How much time it will take? It should work on mobile devices", "iq, 2014-12-04It looks pretty good!", "Antonalog, 2014-03-02thank you!", "catafest, 2021-06-21the old computer storage with tape... Z80 CPU ... good work!", "Nightshft, 2020-03-01This is soo speccy, love it!", "ollj, 2017-06-01the grandpa of the dial-up modem noise.", "P_Malin, 2016-04-25", "iq, 2016-04-22I never commented on this one???", "", "It's so amazing ^_^", "KylBlz, 2016-03-11XD !!", "coyote, 2015-11-17", "foxes, 2015-09-14I'm crying! it is ZX spectrum!!!", "Harha, 2014-10-12Holy shit this is cool!", "P_Malin, 2014-09-27Ok, I couldn't resist adding some sound", "It's just random data but it will do for human ears. With enough effort you could make something that would load on a spectrum.", "Optimus, 2014-09-26I totally love this one!", "Dave, 2014-08-22Now it's time to add sound", "aetelani, 2013-11-13Exelente!", "CPU, 2013-03-15This is brilliant, so realistic!", "bloodnok, 2013-03-06We gave you a supercomputer on a PCI card and this is what you do with it? You were the chosen one!!! <3", "Luther, 2013-03-05You emulated attribute clash on a card that can render a very passable imitation of reality in realtime.", "Luther, 2013-03-05This is ace.", "neave, 2013-03-01Ah memories... nicely done!", "poljere, 2013-02-26So much love in 400 lines of code", "PauloFalcao, 2013-02-26Impressive!", "PauloFalcao, 2014-10-11Cool!", "dila, 2014-10-11So that's how it's done!", "Zavie, 2014-10-11With different parameters this could make a nice sea anemone.", "agnesska, 2018-08-28Really nice one! Good job!", "pellicus, 2018-08-13cool  i think i'll probably need a new dance floor", "mds2, 2018-08-08love it.", "Nrx, 2014-11-06Oh! This one? https://www.shadertoy.com/view/4dBSRK", "iq, 2014-11-05Oh, I missed this one (and amde one similar, lol).", "", "Very nice!", "jeyko, 2020-02-22amazing", "josplode, 2018-08-16Universe source code leaked", "airtight, 2018-08-09if you can figure out the pattern in this image you gain true enlightenment", "Shane, 2018-08-02Interesting pattern.", "Kali, 2018-08-01So cool... I'll have to play with this  Thanks!", "Yrai, 2018-07-28The image hides something that we humans don't know... very interesting", "Ebanflo, 2018-07-24Also interesting:", "float is_twin_prime(int num){", "if(is_prime(num) > 0.5)", "return float((is_prime(num + 2) > 0.5) || (is_prime(num - 2) > 0.5));", "return 0.0;", "}", "Ebanflo, 2018-07-24I thought that this was really cool and made a reddit thread about it.", "davidar, 2018-07-23Cool, makes a surprisingly nice pattern", "FabriceNeyret2, 2018-01-02what about some antialiasing ? :-)", "", "a classical distance-to-segment function:", "float segment( in vec2 p, vec2 a, vec2 b ) {", "vec2 pa = p - a;", "vec2 ba = b - a;", "float h = clamp( dot(pa,ba)/dot(ba,ba), 0., 1. );", "return length( pa - ba*h );", "}", "jorge2017a1, 2020-05-04it is strange the code is small, it is extreme ... !!!! and does many things !!!!!", "...........", "es extra\u00f1o el codigo es peque\u00f1o,  es extremo ...!!!! y hace muchas cosas!!!!!", "jorge2017a1, 2020-05-03a very nice maze ... a job very well done ... thanks for sharing ideas !!!!!", "..........", "un laberinto muy bonito ... un trabajo muy bien hecho ... gracias por compartir ideas !!!!!", "mds2, 2018-06-06Also I love how the avatar walks like (they? he? she?) needs to pee.", "mds2, 2018-06-06I modified the code to turn off all the walls, but I still couldn't find the restroom.", "youdiansao, 2018-06-05I try my best to see her/his face but...", "FabriceNeyret2, 2017-07-20or thinking of this one for [SH17B] competition this week ? ;-)", "heavenbreaker, 2016-12-20that ass makes me hot!", "ollj, 2016-09-04your camera is placed on a line that goes from the camera target to somewhere behind the target. if you raymarch along that line (a special raymarchng that can ignore some models and that increases distance to surfaces by a bit, like the raymarching for soft shadows.) you can easily make it not collide with walls and never have a wall between cameraPos and cameraTarget.", "", "you could use a buffer to interpolate camera positions to make the camera move smother to aviud walls.", "KylBlz, 2016-08-31where the hell is the bathroom? lol! nice, and smooth!", "eiffie, 2016-08-31@cubby208 there are 4 \"rooms\", the infinite corridors are off the map.", "@bob87 rather than think of it as a bug I prefer the term \"sparkle party\". (they are in preview mode too, just smaller)", "bob87, 2016-08-30I have sparkles in full screen under linux with GTX 980.", "iapafoto, 2016-08-30So funny !", "stanlo, 2016-08-30there is no restroom. it is a metaphor for life", "cubby208, 2016-08-30I got to a part of the maze where its an infinite corridor with infinite corridors on the left. The corridors on the left appear to all be the same however they do have an end after awhile. Question... is there actually a restroom somewhere in this godforsaken maze?", "poljere, 2016-02-28Well done @eiffie!", "eiffie, 2016-02-28haha @zproxy the barrel distortion is not a good look on her. It is funny what is important to everyone's tastes (hair, butt) and I needed to fix her armpits! (They still bug me.) Finally figured out the trick to hold down the mouse - just slide it off the viewport and release.", "zproxy, 2016-02-28make it more like girl. :P", "eiffie, 2016-02-28I added mouse steering although ShaderToy requires you hold the mouse button so not what a gamer expects. No side stepping (I would have to give the model joints and not JUST TWIST IT.) Yes, lots of barrel distortion to heighten the tension.", "@iq d/od only gets you so far. Someday I will add real lighting to these games. Seems like there are a few extra fps to burn.", "tholzer, 2016-02-28Really nice fun to explore a labyrinth!", "Can you add side step commands to shift left and right e.g. 'A' & 'D' keys?", "Mouse steering would be helpful too.", "What kind of projection is this? Looks like a fish eye projection.", "iq, 2016-02-27Haha, nice!", "", "The lighting is misleading though in the corridors with no end, because it seems like there is light coming from the sides despite there's no paths at the sides.", "CPU, 2016-02-27i was going to suggest but you've done the \"back button\". cool", "eiffie, 2016-02-27@stb Right I had to keep the player away from the walls or the camera hits the wall - I should just move the camera closer in that case. TODO", "@casty - Better than my strategy of running in circles. (I have yet to actually go though in either shader.)", "casty, 2016-02-27Cleared after 20 minutes keeping right", "stb, 2016-02-27I prefer this version! What about doing \"return length(p) - 0.05;\" in drawWall, Buf A? Do you think that would break the collision-detection? Because it seems to help movement around corners. Or is it set in preference of the camera?", "CPU, 2016-02-27ah excellent!", "FabriceNeyret2, 2022-09-29no prob' , mistakes happen.\u00a0Now you know ;-)", "playertk, 2018-06-13I want you to apologize. I'm just learning a reference.", "For the improper operation of the website, it was mistaken.", "I have closed the release state", "Please forgive me for seeing your comments now.", "willp, 2019-11-29Hey! Thanks for spotting that. I only have Windows machines at home to test on, so if there are any other changes that are needed for it to run on other platforms, always grateful for folks to point them out", "aethelwhat, 2019-11-29Ok, more specifically, changing the function parameters of 'out HitRecord' to 'inout HitRecord' made this work on my mac. lines 309, 339, 370. Great Shader by the way! I'm working on the Weekend book currently and this shader is very inspirational.", "aethelwhat, 2019-11-29Hi Will, on my Mac I am getting no image, just black for the 'ground' sphere and the sky color. I changed all of the 'out' parameters to 'inout' and this fixed everything.", "piyushslayer, 2019-10-22Good to know! Thanks for pointing that out.", "willp, 2019-10-22Yep! If you set time0 and time1 to be equal to one another (for example, set both to 0.0) towards the bottom of Buffer A, it will disable motion blur and the blurry spheres should be focused. You can also play around with the depth of field strength by increasing or decreasing the aperture.", "piyushslayer, 2019-10-22Looks really cool! Although some of the smaller spheres in the front seem blurry/hollow. Are they supposed to be like that?", "teraspora, 2018-09-24The tutorial on this taught me a lot.   @iquilezles is a great teacher.", "Here's a version of it I made showing 49 different stages of the palm tree evolving:", "https://www.shadertoy.com/view/4tVcDK", "varomix, 2015-08-05Please make more tutorials like this, this information is invaluable, thank you", "anastadunbar, 2015-04-23 liked how you explained in the tutorial.", "jonobr1, 2014-07-22So awesome! Thanks for explaining the process", "cyanux, 2014-07-14", "Lanza, 2014-07-14Could not help myself and replaced line 8 by \tfloat r = 0.2 + 0.1*cos( atan(q.y,q.x)*10.0 + 20.0*q.x + 1.5 * sin(iGlobalTime));", "", ":P", "cyanux, 2014-07-14Effective.", "brehdanny, 2018-08-09.", "iq, 2014-08-01Pretty!", "essik, 2014-07-29I\u00e2\u20ac\u2122m new in shading language and your code is of great help to me.", "Still very thanks!", "xbe, 2014-07-29I've never played with cocos2dx so I don't know how you instantiate a fragment shader using it. Sorry for not being very helpful, on this point.  The only specific data you have to pass to it is the iGlobalTime info. I not sure it will scale smoothly on mobile but worth a try. Apart that, you have to keep the creative common license, follow its terms and give credits to both P_Malin and me.", "essik, 2014-07-29It's looks amazing and I want to use shader in cocos2dx, what should I do??", "poljere, 2014-07-28Looks great!", "newJasper, 2023-04-03interesting", "TambakoJaguar, 2021-08-01Very nice, I like it!", "iapafoto, 2015-12-21wow I ve missed this one, very good as usual !", "dr2, 2015-09-25Shane: Thanks. The shadows are hyper-empirical; anything to avoid visual artifacts, with each scenario having its own issues (here the iterations are fairly cheap, but this is often not the case).", "Shane, 2015-09-25I love this. In fact, I'm a fan of all your stuff. The bobsled skipping over the bumps is a nice touch.", "", "Line 242 in the \"ObjShadow\" function is interesting. I'll assume you're doing it to get the overall iteration count down, but it's difficult to tell without an actual rays-per-pixel counter... and I'm too lazy to take a minute to hook the function up up to a heat map.", "", "Anyway, I like the way the shadows look by replacing line 242 with \"d += 0.01 + h;,\" or something along those lines, but that's a personal choice. It seems to work with half the iterations too.", "dr2, 2015-09-21Dave: There already is some of this present (lines 280 & 293) but I have increased it (of course if you wear fancy sunglasses it all goes dark again); also added runner tracks. Got to be careful, otherwise somebody else will say the lighting is too flat.", "Dave_Hoskins, 2015-09-21There's a lot of ambient light in snowscapes, so how about adding some on line 290 with...+ vec3(.15, .15, .35 )*abs(vn.y); ...which varies with normal.", "dr2, 2015-09-21Tweaked the lighting - thanks.", "Dave_Hoskins, 2015-09-21Nice shape and movement! I think it may look a bit like concrete or sand though. Perhaps reflect the sky a bit?", "barakooda, 2016-04-21The Eye of Sauron :-)", "iq, 2016-04-20Cool", "joeedh, 2015-05-15Heh, try changing the noise basis on iChannel0 to the checkerboard image.  Looks really cool", "Dave_Hoskins, 2015-05-14It looks good with other textures too! - Including the Britney vid.", "Craxic, 2015-05-13Wow, fantastic Nimitz!", "nek, 2021-03-26Beautiful!", "XBIN, 2020-12-01wow!~", "CPU, 2016-07-13excellent!", "GregRostami, 2016-07-07", "iq, 2016-07-07super preeeeeeeetyyyyyyyyyyyyy!", "poljere, 2016-07-07Wow, I love it.", "aiekick, 2016-07-07", "flockaroo, 2016-07-07beautiful!", "cubby208, 2016-07-07Goes really wacky in full screen but wow is it beautiful!", "Duke, 2016-07-07", "Francio, 2020-07-29Thanks for the filter ;)", "eiffie, 2021-04-08@theott Right the line if(vr==vr)sum+=... accumulates the light from the mask in volLiteMask. vr==vr is an old school test for vr is a valid number.", "theott, 2021-04-04Cool ! Where is the visibilty of the light rays coded ? I guess in volLiteMask, right ?", "knighty, 2015-03-05Awesome!", "The volLiteMask() function is incredible.", "iq, 2015-03-05Very nice", "kristoflovas, 2020-05-06Hello. I wanted to thank you for the breakdown on your blog. I managed to make a similar one in Unreal Engine based on it. But it uses volume textures instead of calculated shapes.", "szczm_, 2020-05-01that's just nice", "Carandiru, 2020-04-29damn nice!", "felipunkerito, 2020-04-25Very nice! You could use a texture/cubemap based noise to make it run faster.", "OccamsLaser, 2021-03-20Very stylish", "codebro, 2019-06-26Really nice", "kaneta, 2019-04-28", "Passion, 2019-04-23Very creative and stunning wow!", "EvilRyu, 2019-04-21nice!", "kaneta, 2019-04-20Thank you for Comments!!", "iq, 2019-04-20Nice!", "Shane, 2019-04-20That's really cool. Love it.", "scratch13764, 2019-04-19Wow, totally amazing!", "shau, 2019-04-19nice", "elenzil, 2019-04-19sweet!", "jt, 2021-11-29I see, thanks for the explanation!", "Reedbeta, 2021-11-28@jt No, the M\u00f6bius transform hasn't got enough degrees of freedom to do that. It can conformally map any three points to three other points in the complex plane, but not four points to make a square.", "jt, 2021-10-11Is it possible to fit a M\u00f6bius transform so it maps some set of given points onto a unit square", "(e.g. the positions of the four corners and offset from the center or something similar)?", "jt, 2021-10-11very nice!", "ocb, 2018-02-07Love it!", "FabriceNeyret2, 2017-11-30anyway implementing simplex noise for such shader seems just overkill :-)", "FabriceNeyret2, 2017-11-30cg do have a noise() function... that always answer zero.", "", "it's too complicated for hardware to implement such function. Beside, depending on your very need you probably want different implementations.", "", "what is missing to glsl is includes.", "what is missing to shadertoy is faking includes + a toolkit to include, like some competitor are proposing. But this is not really the spirit of shadertoy, that is \"build the universe from nothing but the screen coord\". ;-)", "Dave_Hoskins, 2017-11-30\"I wish noise functions were built in shadertoy...\"", "It would be handy if hash functions were part of the GFX hardware. I'm not sure about noise though, as people come up with so many variations.", "frZ, 2017-11-30I wish noise functions were built in shadertoy...", "mikeyaboy, 2022-11-30this looks almost photorealistic! i recommend adding fresnel because the wood is looking a bit too rough near the horizon.", "P_Malin, 2016-09-10Now supporting VR mode", "dila, 2014-10-12Thanks, I was interested to see how you handled the different materials in the scene.", "Dave_Hoskins, 2013-07-21Nice! - I guess it was just the extremely sharp cut-off that didn't look quite right.", "P_Malin, 2013-07-21Ok but I'm sure shadow penumbras are the Devil's work. Very fake soft shadows added.", "Dave_Hoskins, 2013-07-21LOL.", "Howzabout a shadow penumbra next, P_Malin?", "iq, 2013-07-19Sure!", "P_Malin, 2013-07-18Whoops! Yes, I was fiddling around at lunchtime. Of course it \"worked\" on my machine. Thanks again iq for compatibility testing and debugging *all* the shaders.", "iq, 2013-07-18There's a bug in the code (recently introduced?), which makes it render all noisy and blocky: the variable \"vCameraOffset\" in line 598 is not initialized (to zero), so every 8x16 pixel tile gets a different camera offset...", "Dave_Hoskins, 2013-07-17Nice church scene. I love the candle flame and glowing wax.", "srtuss, 2013-07-17quite photorealistic. imressive!", "iq, 2013-07-17Yay, very nice! Another instant classic!", "poljere, 2013-07-17Awesome!", "movAX13h, 2013-07-17hehe lovely scene!", "greje656, 2018-03-28awesome job. really lightweight : )", "Ultraviolet, 2018-03-28I really like the look of this shader, so I forked it here.", "jt, 2017-11-08looks good", "robobo1221, 2017-11-07It's not meant to be accurate at all", "ollj, 2017-11-07in a 3/4 ratio this one fails for high angles. as in, this one has a very bad zenith.", "834144373, 2017-11-07Great\uff01", "ingagard, 2017-11-07Really like this one!", "otaviogood, 2015-07-07You do not have to ask my permission to use my shader. That's why I put a CC0 license at the top. You can do anything you want with it. It is free and in the public domain. You don't even have to give me credit. I wish more people would use CC0 so that nobody would have to worry about making mashups. We are programmers, not lawyers!", "", "It would be fun though if you posted a link to it if there is one.", "papademos, 2015-07-06Hi otaviogood", "", "This weekend we made a \"mashup demo\".", "The idea was to create a party production using existing shaders from shadertoy.", "", "During this production I converted, modified and used this shader in the mashup. It's come to my attention that I should have asked you permission in beforehand. And in retrospect a totally agree. Of course I should have. How stupid could I really be. You have however been properly referenced and credited.", "", "Unfortunately I never asked for permission. This was bad judgement on my behalf.", "The best I can do at this point is to apologize.", "", "I'm sorry. I fucked up.", "", "Regards // Papademos", "clevijoki, 2014-12-02Such a good idea.", "nimitz, 2014-11-29very nice!", "Harha, 2014-11-28Damn I love it... D:", "vgs, 2014-11-28Wow, this is so cool!", "kastorp, 2022-04-16My version", "void mainImage( out vec4 O, in vec2 U )", "{", "if(iFrame<10) O=texture(iChannel1,U/iResolution.xy);", "else {", "int i=int(U.y) ,j = i +((i&1)==(iFrame&1) ?-1:1) ;", "", "vec4 N= texelFetch(iChannel0,ivec2(U.x,j),0);", "O= texelFetch(iChannel0,ivec2(U.x,i),0);", "if(  (length(N.rgb)< length(O.rgb) )!=(i>j) && min(j,i)>0 && max(j,i)<int(iResolution.y) ) O=N;", "", "}", "}", "cornusammonis, 2016-01-10@FabriceNeyret2 Did a version with interleaved X and Y sorting here: https://www.shadertoy.com/view/4dcGDf", "FabriceNeyret2, 2016-01-10with some optimizations :", "#define T(U) texture2D(iChannel0, (U)/iResolution.xy)", "", "void mainImage( out vec4 O, vec2 U )", "{", "if(iFrame<10) {", "O = texture2D(iChannel1, U/iResolution.xy);", "return;", "}", "", "vec2 s = float(iFrame) < iResolution.y+50. ? vec2(0,1) : vec2(1,0);", "", "vec4 im_n =  T(U+s),  im =  T(U),  im_s =  T(U-s);", "", "O = mod(float(iFrame) + dot(U,s), 2.) > length(im) ? im_s : im", ":  length(im_n) < length(im) ? im_n : im;", "}", "FabriceNeyret2, 2016-01-10suggestion for the following step ;-)", "vec2 s  = -texel, n  = texel;", "float p;", "if (float(iFrame) < iResolution.y+50.)", "s.x=n.x=0., p = fragCoord.y;", "else", "s.y=n.y=0., p = fragCoord.x;", "...", "if (int(mod(float(iFrame) + p", "casty, 2016-01-09without multipass https://www.shadertoy.com/view/4ssXWn", "mbeytekin, 2020-07-22This is very good single pass example. But I have a question; with another colored image can I get mean colors of pixels in a cell in single pass?", "ollj, 2017-08-07this seems to be useful for traversal.", "like, to mix with", "https://www.shadertoy.com/view/Mdjfzh", "", "where your cells get smaller on the inside of an isosurface like in this quadtree:", "https://www.shadertoy.com/view/Xs2czK", "iq, 2015-02-14This shows the hierarchical refinement as you switching levels from 0 to 3:", "FabriceNeyret2, 2022-01-13uh, I just realize I jeopardized a *huge* amount of the comment column.", "I hope you don't feel bad about that.  :-/", "FabriceNeyret2, 2022-01-13unlisted here:   https://www.shadertoy.com/view/fslcW4", "FabriceNeyret2, 2022-01-13indeed the clamp is no longer necessary in the atan()", "", "golfed down to 772 chars, with AA ( from 2172 )  :-p", "struct  J       { vec2 P; float w,h,a; };               // Joint", "#define E(j)      j.P + sin( vec2(Q,0) -j.a ) * j.w * 2.// endPoint", "#define r         mat2( cos(j[i].a + vec4(0,Q,-Q,0)) )  // rotation j.a", "", "void mainImage( out vec4 O, vec2 u )", "{", "vec2 R = iResolution.xy, V,", "U = ( u - .5*R ) / R.x,", "T = iMouse.wz == vec2(0)", "?  vec2( sin(iTime) * .45, .1 + cos(iTime) * .15 )", ": ( iMouse.xy - .5* R ) / R.x;", "const int N = 7, n = 5; int i=1, x=0;", "float Q = 1.57, d = 1e9;                    // PI/2, infinity", "", "J j[N];                                     // --- initialize blade", "for(j[0] = J( vec2(0,-.3), .05,.02, -Q ) ; i < N ; ++i )", "j[i] = J( E(j[i-1]),", ".03, .01 * ( 1. - float(i)/float(N) ),", "-Q );", "", "for ( ; x < n; ++x )                        // --- inverse kinematics", "for ( i = N; --i > 0;  )", "V = j[i].P = E(j[i-1]),", "V = normalize(T-V),", "V.y *= -1.,", "V = r * V,                             // rotateJoint", "j[i].a +=  .35* atan(V.y,V.x) * float(i)/float(n); //weight=.35", "", "for ( ; i < N; ++i )                           // --- draw segments", "i > 0 ? j[i].P = E(j[i-1]) : R,            // last stifning", "V = abs( ( U - j[i].P ) * r - vec2(j[i].w,0) ) - vec2(j[i].w,j[i].h), //drawJoint", "d = min( d,  V.x < 0. ? V.y : 1e9 );       // union of boxes sdf", "d = min( d, U.y + .2 - sin(U.x * 17.) * .01 ); // ground", "O = smoothstep( 0.,1.5/R.x, d ) * vec4(.7, .1, U.yy + .3 )", "+ smoothstep(0.,1.,.01/length(U-T) );        // light", "}", "", "", "could be more, at the price of some obfuscation:", "-11:  #define E    j[i-1].P + sin( vec2(Q,0) -j[i-1].a ) * j[i-1].w * 2.", "or even extra -7: #define E    j[i].P = ...", "empty fields of for(;;) could be field", "const could be splatted", "FabriceNeyret2, 2022-01-13dir = sign(turn)", "", "bool b vec4(b ? 1.0 : 0.0); -> just vec4(b)", "fragColor = b || sin () > .2 ?\u00a0vec4(0) : vec4(.7,...)", "", "box2d draw:  my, it was before the invention of the AA lines in shadertoy :-p", "->", "#define box2d(U,P,a,W) ( V = abs( (U) *rot(a) + P ) - W , V.x < 0. ? V.y : inf )", "...", "float b = inf;", "for (int i = 0; i < JOINTS; ++i)", "b = min( b, drawJoint(j[i], U) );", "b = min( b, -(sin(U.x * 17.) * .01 - U.y - .2) );", "fragColor = smoothstep( 0.,1.5/R.x, b ) * vec4(.7, .1, U.y + .3, 0);", "", "", "final smooth( a, 0,0.01): hum hum :-p", "= smoothstep(0.,1.,.01/length(U-M));", "", "rotateJoint could use rot()", "void rotateJoint(inout Joint j1, vec2 T, float k )", "{", "T = normalize( T - j1.P );", "T.y *= -1.;", "T = rot( j1.a ) * T;", "j1.a +=  k * acos( clamp( T.x, -1., 1.) )", "* sign( T.y );", "}", "", "hey, but this is just  atan( T.y, clamp( T.x, -1., 1.) )  !", "( but I'm still not clear about the T.y *= -1. )", "", "-> 1143 chars with AA ( not really golfed ) , from 2172 :-p", "const int JOINTS = 7, iter = 5;", "float weight = .35, PI = 3.14159, inf = 1e9;", "struct Joint { vec2 P, W; float a; };", "", "#define box2d(U,P,a,W) ( V = abs( (U)*rot(a) + P ) - W , V.x<0. ? V.y : inf )", "#define A(a)             vec2( cos(a),sin(a) )", "#define endPoint(j)      j.P + A(-j.a) * j.W.x * 2.", "#define drawJoint(j,U)   box2d( U - j.P, vec2(-j.W.x,0), j.a, j.W )", "#define rot(a)           mat2( cos(a),-sin(a),sin(a),cos(a) )", "", "void rotateJoint(inout Joint j1, vec2 T, float k )", "{", "T = normalize( T - j1.P );", "T.y *= -1.;", "T = rot( j1.a ) * T;", "j1.a +=  k * atan( T.y, clamp( T.x, -1., 1.) );", "}", "", "void mainImage( out vec4 O, vec2 u )", "{", "vec2 R = iResolution.xy, V,", "U = ( u - .5*R ) / R.x,", "M = iMouse.wz == vec2(0)", "?  vec2( sin(iTime) * .45, .1 + cos(iTime) * .15 )", ": ( iMouse.xy - .5* R ) / R.x;", "", "Joint j[JOINTS];                    // --- inverse kinematics", "j[0] = Joint( vec2(0, -.3), vec2(.05,.02), -PI/2. );", "", "for (int i = 1; i < JOINTS; ++i )", "j[i].P = endPoint(j[i-1]),", "j[i].W = vec2( .03, .01 * ( 1. - float(i) / float(JOINTS) ) ),", "j[i].a = -PI * .5;", "", "for (int x = 0; x < iter; ++x )", "for (int i = JOINTS - 1; i >= 1; --i )", "{", "j[i].P = endPoint(j[i-1]);", "rotateJoint(j[i], M, weight * float(i) / float(iter));", "}", "for (int i = 1; i < JOINTS; ++i )", "j[i].P = endPoint(j[i-1]);", "", "float b = inf;                                 // draw segments", "for (int i = 0; i < JOINTS; ++i )", "b = min( b, drawJoint(j[i], U) );", "b = min( b, U.y + .2 - sin(U.x * 17.) * .01 ); // ground", "O = smoothstep( 0.,1.5/R.x, b ) * vec4(.7, .1, U.y + .3, 0)", "+ smoothstep(0.,1.,.01/length(U-M) );        // light", "}", "FabriceNeyret2, 2022-01-13NB: kukvar was then on shardertoy for just 7 monthes. We were all just babies playing under daddy-IQ keep, then :-p", "FabriceNeyret2, 2022-01-132015 code, uh ? :-D", "", "suggestions:", "", "endPoint() could use angletovec()", "", "#define PI 3.14159", "#define inf 1e9", "", "#define rot(a) mat2( cos(a),-sin(a),sin(a),cos(a) )", "", "bool box2d(vec2 pos, vec2 uv, vec2 pivot, float angle, float w, float h)", "{", "uv = (uv - pos ) *rot(angle) + pivot;", "return abs(uv.x) < w && abs(uv.y) < h;", "}", "", "#define angletovec(a) vec2( cos(a),sin(a) )", "#define endPoint(j)  j.pos + angletovec(-j.angle) * j.w * 2.", "...", "void mainImage( out vec4 fragColor, vec2 fragCoord )", "{", "vec2 R = iResolution.xy,", "uv = ( fragCoord - .5*R ) / R.x,", "target = ( iMouse.xy - .5* R ) / R.x;", "...", "", "", ":-p ;-p ;-p", "sagieL, 2022-01-01Brilliant!", "rockeyda, 2015-06-27awesome, i really like the interactive touch.", "dila, 2015-05-14Yeh, this is really cool. I thought it had some ik math behind it", "iq, 2015-05-14Nice!!!!!!!", "kuvkar, 2015-05-14thanks! The idea is from this article http://freespace.virgin.net/hugo.elias/models/m_ik.htm", "aiekick, 2015-05-14nice job", "Synthesoft, 2022-04-16Very cool!  It has a very strong Roger Dean feel.", "CaliCoastReplay, 2016-07-28This is breathtakingly brilliant.  I wonder what it would look like with the greenscreen test superimposed!", "mu6k, 2015-09-30true, there is no semicolon in preprocessor instructions... I tend to make this bug...", "d1kkop, 2015-09-29Line 436 #endif; gives an error in chrome on windows. Remove the \";\" .", "mu6k, 2014-02-23I've published a shader which contains multilined version of the noise functions. https://www.shadertoy.com/view/4dSGDy", "mu6k, 2014-02-19Yay doublepost! Multilining the noise function == adding a newline after each semicolor. Note that the 3d noise costs three times as much as the 2d noise.", "mu6k, 2014-02-19Thanks. I actually wanted to implement a ripple effect like in water world.", "And ofc I include the lensflare effect!", "Dave_Hoskins, 2014-02-19Beautiful lighting, and it's really fast! Letting the camera under the water is a cool touch aswell. Is there any chance you could multi-line the noise functions?", "reinder, 2014-02-19Nice! It looks a bit like this one water world (wait for 30 s). Maybe it's the lens flare ;)", "iq, 2014-02-19Coolio!", "victusfate, 2014-04-29dig it", "fb39ca4, 2014-01-29It looks cool when you scroll through the texture instead of a static 1D slice.", "vec3 col = texture2D( iChannel0,vec2(pow(0.25*ref.x,0.25), 0.5 + 0.1 * iGlobalTime)).xyz", "* texture2D( iChannel0,vec2(0.1*pow(ref.y,1.2), 0.6 - 0.03 * iGlobalTime)).xyz;", "", "Also, anyone else getting audio stuttering with Firefox?", "fb39ca4, 2014-01-29Pretty. It would be neat to have a Shadertoy plugin for media players, now that I think about it. Also, I noticed a new track was added. Is Tropical Beeper true beeper (1-bit) music?", "Flexi, 2013-03-16very nice indeed, and fast too!", "CPU, 2013-03-15nice work! very reactive visual!", "jorge2017a2, 2023-03-24good changes!!!", "drone1, 2016-04-22Cool stuff man!", "iapafoto, 2015-11-11Thanks Shane but all your shaders are incredibly awesone !", "Shane, 2015-11-11This is incredibly awesome. Just the flag on a moon surface would've been enough to keep me happy.", "iapafoto, 2015-11-11Thank you very much Inigo", "iq, 2015-11-11I have fixed the shader. There was some \"continue\", some global variables and other issues that was crashing the GL->DX compiler.", "iapafoto, 2015-11-10Dave, now I'm getting the same LK Error.", "And same for lots of others shaders", "Dave_Hoskins, 2015-11-10Thanks. It used to work for me. But I guess Chrome/ANGLE/Drivers all change as well.", "iapafoto, 2015-11-10No change since last year, but this shader had never been very stable actually !", "Dave_Hoskins, 2015-11-10I'm getting a bizarre error now. At the top it just says 'Unkown Error: LK ERROR:'", "", "Has this shader grown recently?", "maodunxiaoshaonian111, 2015-11-10very good", "maodunxiaoshaonian111, 2015-11-10it is very good,thank you lz", "iq, 2015-04-16It's working now, and WOW, it's pretty cool!!", "iq, 2014-07-21Not working in Chrome 36. I tried to silently fix this one too but I didn't succeed. I'm going to put in non-public mode for now.", "iapafoto, 2014-02-22Back to OpenGL cos sin and atan => make it faster as expected.", "iapafoto, 2014-02-21Dave, atan is because, when I put 3 atan in the shader, I have a compilation error on one of my PC. I can add a lot of complexity in the shader but not 3 atan (in original version craters were done in 2 times in order to have double craters, I avoid this for spiral effect). I feel that the number of trigonometric function calls may be limited and try another way. The strangest things is that finally it is quite the same with those versions and I still don t understand why ! I m new to GLSL, and I have a lot of tests to do to understand how compilation works and how to deal with limitations.", "Dave_Hoskins, 2014-02-21Nice touch with the logo on the flag.", "Why not use OpenGL's own atan function?", "iapafoto, 2014-02-21Spiral texture: Blue Spiral by donfabio", "iapafoto, 2014-02-20Thanks McZonk !", "McZonk, 2014-02-20Very nice.", "iapafoto, 2014-02-20Space:        Star Nest by Kali", "Metal effect: Exterminate! by Antonalog", "benhardy, 2021-07-14there is a lot of beauty for not much code here. nice!", "Kali, 2015-08-17Thanks Fabrice, I was doodling on top of other code with similar idea, that's why strange coding appeared, I put your version now. About the fractal, here is a   fractal forums thread, back when I was a fractal newbie and I thought I discovered America. It's in fact a form of Kleinian fractal I called \"Kaliset\" out of silly proud", "vgs, 2015-08-17Superb!", "iq, 2015-08-17It looks great!!", "tly, 2015-08-17really nice idea  this solves all the problems of plane slices.", "FabriceNeyret2, 2015-08-17some slight remarks:", "- you can loop on floats (and thus avoid mi=float(i) , fi=...)", "- coords normalization is simply vec2 R = iResolution.xy; uv = (uv-.5*R)/ R.y;", "- no need to initialize col as a global", "", "-> a straighter version:", "float t= iGlobalTime*.03;", "", "float sphere(vec3 p, vec3 rd, float r){", "float b = dot( -p, rd ),", "inner = b*b - dot(p,p) + r*r;", "return inner < 0. ?  -1. : b - sqrt(inner);", "}", "", "vec3 kset(vec3 p) {", "float m=1000., mi=0., l;", "for (float i=0.; i<20.; i++) {", "p = abs(p)/dot(p,p) - 1.;", "l=length(p);", "if (l < m) m=l, mi=i;", "", "}", "return normalize( 3.+texture2D(iChannel0,vec2(mi*.218954)).xyz )", "* pow( max(0.,1.-m), 2.5+.3*sin(l*25.+t*50.) );", "}", "", "void mainImage( inout vec4 o,vec2 uv )", "{", "vec2 R = iResolution.xy,", "mo = iMouse.z<.1 ? vec2(.1,.2) : iMouse.xy/R-.5;", "uv = (uv-.5*R)/ R.y;", "", "vec3 ro = -vec3(mo, 2.5-.7*sin(t*3.7535)),", "rd = normalize(vec3(uv,3.)),", "v = vec3(0), p;", "float tt,c=cos(t),s=sin(t);", "mat2 rot = mat2(c,-s,s,c);", "", "for (float i=20.; i<50.; i++) {", "tt = sphere(ro, rd, i*.03);", "p = ro+rd*tt;", "p.xy *= rot;", "p.xz *= rot;", "v = .9*v + .5*kset(p+p)*step(0.,tt);", "}", "", "o.xyz = v*v *vec3(1.2,1.05,.9);", "}", "Dave_Hoskins, 2015-08-17Ethereal 3D stars - yeah, good one! I guess it could also be used for murky underwater effects.", "Xender, 2015-08-17Beautiful. Does this fractal have a name? Could you link to some materials about it?", "xeno, 2019-07-13lovely, using in my port of a glslsandbox hopefully.  My address is www.zonex.rf.gd", "Check it out.", "Promero, 2013-09-18Absolutely fantastic!!! bravo!", "dldpidodido, 2013-08-28Wow. Amazing..", "iq, 2013-05-09very elegant!", "jorge2017a1, 2021-05-25very interesting and very nice technique .... thanks for sharing .... I hope to do something with your shader !!!! ... greetings ..... I will also put the reference ..... greetings !!!!", "MysteryPancake, 2022-09-30Code comments are art in themselves", "Xonatron, 2022-01-12Wow.", "asneakyfatcat, 2021-04-20Thanks for commenting every line, it makes this a lot easier to break down and learn from. The sweeping glow effect is titties", "jarble, 2020-11-14The framerate improves a lot when I replace (h.x<.0001||t.x>40.) with (h.x<.0001*(1.0+length(t))||t.x>40.)", "andremichelle, 2020-10-07We are using your shader for a featured electro-track on audiotool.com Hope you okay with this. If you like different credits, please contact me. https://www.youtube.com/watch?v=wzs_I1ejyLc", "marcinslusarz, 2020-07-02Actually, it shouldn't matter: https://www.khronos.org/registry/webgl/specs/latest/1.0/#6.39", "marcinslusarz, 2020-07-02Very nice render.", "", "I don't know whether it matters in WebGL or not, but \"g\" and \"g2\" global variables are used uninitialized.", "benhardy, 2020-03-26this is amazing", "knighty, 2020-03-11pou\u00ebic == poetic & demoish", "In case someone asks", "knighty, 2020-03-11pou\u00ebtic visuals.", "pou\u00ebtic code.", "pou\u00ebtic commenting style.", "deerfeeder, 2020-03-05Lovely!", "flockaroo, 2020-03-03this is a pretty nice composition in colors/style/shape", "GregRostami, 2020-03-01WOW!! Stunning!", "shau, 2020-02-28Nicely rendered sir", "Flexi, 2020-02-28Schwing!", "balkhan, 2020-02-28This have a fine metal look !", "evvvvil, 2020-02-28Thank you everyone, wicked.", "@dave_hoskins: Just wanted to say thankx for your blur / dof  which I am using in most of my 4kb Intro. Thank you very much. Great stuff", "Dave_Hoskins, 2020-02-28It looks super clean and shiny, and the colours are perfect.  Excellent! \ud83d\ude0e", "jorge2017a1, 2020-02-28Es un codigo muy compato pero hace mucho!!!", "BigWIngs, 2020-02-27Looks beautiful!", "Gijs, 2020-02-27Interesting documentation style", "Clocktown, 2021-03-15@Suslik hard shadows would really go against the poisson/laplace equation, which yields smooth solutions. But you can \"kind of\" think in terms of rendering if you imagine that every surface is emitting the same strength of light without fallout, but what we show is not the actual light, but a color property that is independent of light/dark, i.e. we can emit \"black and negative light\". So if you put a black object in the vicinity of a white \"point light\" you don't actually get shadows, instead, the light is consumed by the black light in the vicinity of the black object. You do not get occlusion because everything emits \"light\" in a way.", "Suslik, 2020-07-10What I find odd is that it looks like it's a 2d rendering equation, but it's not. I ran some tests and I'm now certain that it can't simulate occlusion accurately, as in, it does not produce hard edged shadows just from the nature of poisson's equation.", "paniq, 2020-05-29With the following change, I'm getting an overall brighter image, and I think it's more correct, too?", "vec4 march( in vec2 p )", "{", "vec4 h=vec4(0.0);", "for( int i=0; i<32; i++ )", "{", "h = map(p);", "if( h.x<0.001 )", "return vec4(h.yzw,1.0);", "p = p + h.x*randomInCircle();", "}", "return vec4(0.0);", "}", "//...", "vec4 col = march(p);", "//...", "fragColor = data + col;", "knighty, 2020-05-11Super, hyper cool.", "I tried and (99%) failed to use the same technique for waves.", "https://www.shadertoy.com/view/WslBWj", "felipunkerito, 2020-05-07That hash reminds me of some of the earlier Neumann algos for computing PRN.", "Awesome example, I will dive deep into this some time in the future, thanks for all the work you've done for the CGI community. Respects from Colombia.", "jorge2017a1, 2020-05-07I think, .... that here in shadertoy, there are GENIUS of mathematics !!!! but it's still a long way!", ".........", "Yo pienso,....que aqui en shadertoy, existe GENIOS de las matematicas!!!! pero es un largo camino todavia!!!", "jackdavenport, 2019-06-26Looks cute! Nice", "bloodnok, 2019-06-24mars.exe", "Aljen, 2019-05-26GOOD", "FatumR, 2015-09-23[This comment has been hidden by the shader author]", "FatumR, 2014-12-22Thanx, that's one of the my first attempts in raymarching. Mainly inspired by your articles, so thank you", "iq, 2014-12-22looks good!", "PauloFalcao, 2021-07-05Amazing!", "firegump, 2021-04-26super  cool~~~just 100+", "nadaske, 2020-09-03it`s a super ! thanks !!!", "andremichelle, 2020-08-21Marvellous. We are using this shader to feature a dark techno track. If you like different credits, please contact me. https://www.youtube.com/watch?v=u_OG06UdRFc", "metamind, 2020-04-10Outstanding!", "otkazano, 2020-04-05I can not understand how it is work! It is amazing! Realistic, beautiful, fast an to smal code!!", "kevs3d, 2020-04-05this is impossibly small and clearly a magic trick of some kind", "KylBlz, 2020-04-04Nice work! Simple fast and good looking. I cranked up the steps to 128!", "I recommend multiplying more weight to the UV term and less to the J term on the hash() calls to get a more even distribution.", "Also doing an average of a few hashes to get a Gaussian distribution looks really nice.", "unnick, 2020-04-03a path tracer that runs at >2 fps on my potato gpu and looks nice? amazing.", "felipunkerito, 2020-04-03This looks like something that you see on a movie pre-rendered for an eternity! Amazing!", "otkazano, 2020-04-02WTF!?!?!?! WOW!!", "flockaroo, 2020-03-18cool!", "EvilRyu, 2020-03-16wow! love it", "AntoineC, 2020-03-15I love it. I increased steps to 240. It looks fantastic.", "", "I think it looks better with a lower motion blur (line 77): float t2=camtime(time + j*0.02/steps);", "iq, 2020-03-15Very nice, I love it!!!!", "GregRostami, 2020-03-15Wow! Amazing!", "BigWIngs, 2020-03-15Super nice!", "aiekick, 2020-03-14wow wow wow", "hornet, 2023-06-09@vonqo ...oh, that was a q", "hornet, 2023-06-09@vongo - absolutely", "vonqo, 2023-06-05hello can i modify and reuse your shader in a commercial project?", "hornet, 2022-08-10@DjinnKahn - yes, go for it!", "DjinnKahn, 2022-07-08Hi hornet, can I also have permission to modify & use your shader in a commercial project? Thanks!", "hornet, 2021-03-31LosMikEos - yes, go for it", "(I have already seen the effect in a couple of random youtube-videos, so I guess it's out there as an afx-plugin or something?)", "LosMikEos, 2021-03-30Hello @hornet,", "this is a very stylish shader, great work! May I ask you to build on your code and maybe use it in a commercial project?", "Kind regards, LosMikEos", "hornet, 2020-06-29@cregg - go for it.", "CREGG, 2020-05-06Hi hornet,", "I wanted to check if I could use your shader code in a commercial project?", "gcstudio, 2019-02-264 out of 5 New Rich Liquid Luster Cream Shampoo for hair that is shinier, easier to manage tooooo ... i know it's a old FX but i love it. Cause it leaves my hair shinier ^_^", "heliumsoft, 2017-08-29Very nice.", "Can I use your shader in a commercial project?", "edapx, 2019-08-01Nice! could you explain the rotating stack of vec4? the original shader by eiffie is not online anymore. I was looking at your blog post http://www.viniciusgraciano.com/blog/making-of-bacterium/ but there is no mention of this technique for AA", "chrisjj, 2018-12-23Oops! Correction:", "", "return smin(d,length(p.yz)-.23+abs(.135*p.x), 0.1);", "chrisjj, 2018-12-22Great!", "", "BTW, line 25's technique can be simplified:", "", "return smin(d,length(p.yz)-.1+abs(.1*p.x), 0.1);", "vgs, 2015-05-19@piniii Thank you, but I did not try to model a real bacteria. It's just a distorted capsule and a sphere with some spikes.", "piniii, 2015-05-18Wow! Awesome! (Do you know which bacteria is? - I mean the real name of the bacteria- Beautiful image to be used at the University in   a biology class. As an example---) Your work is outstanding.", "vgs, 2015-05-14Thanks everyone for all the nice comments!", "my first shader of the week! woohoo!", "dila, 2015-05-11wow that is awesome", "vgs, 2014-12-02@Dave_Hoskins The stack was eiffie's idea in his AA methods shader.", "eiffie, 2014-12-02Wonderful. I like the shapes too!", "Dave_Hoskins, 2014-12-02I like your use of a rotating vec4 'stack' variable to store the distances - such a good idea, and yet so simple!", "vgs, 2014-12-02Thank you guys!", "iq, 2014-12-02Wow, super cool!!!!1 I love it", "iapafoto, 2014-12-02wonderful !", "otaviogood, 2014-12-02Looks great. I was thinking about making a virus shader but I suppose it has already been done well.", "singingsingh, 2014-12-02this is super cool", "poljere, 2014-12-02Really cool", "phreax, 2022-12-17Super nice!! Love the strobe", "Rackdoll, 2022-12-15Love that song", "z0rg, 2022-12-15Super cool =D", "jt, 2022-12-15Very cool!", "zproxy, 2022-04-17sweet. got monero?", "dean_the_coder, 2022-04-15Really cool!", "byt3_m3chanic, 2022-04-15@iq thanks - synching audio via soundcloud never the smoothest - but close enough for a cramped apartment dance part.", "iq, 2022-04-15Although the audio and the visuals are off-synch  I'd say by about 5 seconds?", "iq, 2022-04-15Very cool", "LosMikEos, 2021-03-30Hi @FMS_Cat,", "this is a very stylish shader, great work!", "May I ask you to build on your code and maybe use it in a commercial project?", "Many thanks & kind regards,", "LosMikEos", "heliumsoft, 2017-08-29Very nice effect.", "Can i use your code in commercial?", "jarble, 2020-11-15The rendering speed improves a lot when I replace ( d < 0.001 || t > nfplane.y ) with ( d < 0.001*(1.0+t) || t > nfplane.y )", "XT95, 2020-03-17Hi inc!", "Yes feel free to use it like you want!", "inc, 2020-02-24very exciting. is it possible for you to alter the shader that i can use them in my exe tool that i programmed to play shaders? i load up the shader as a *.txt file:", "example: inc-games-design.de/Tools/ShaderPlayer.rar", "", "this would be really great. I dont need music implementation. i've already done this.", "SabRango, 2020-01-07XD!", "cbrpnk, 2019-01-30Wow, just wow.", "felipunkerito, 2018-12-05Amazing!", "dila, 2016-05-03so awesome", "kestasjk, 2016-01-01Wonderful", "sergh, 2015-12-29Truly awesome. It's like a nightmare in the beach xD.", "iq, 2015-12-29Hey XT95, would you make it slightly brighter? We want to put it as Shader of the Week and I think it'd benefit from a bit more light (at least as seen in our monitors) ^__^", "XT95, 2015-12-28Thx for your feedbacks ! Glad to see you like it", "iapafoto, 2015-12-28Very strange atmosphere.", "Dave_Hoskins, 2015-12-27Nice pods!", "Musical Aliens! - not so threatening... probably... :@)", "ZigguratVertigo, 2015-12-27Cool stuff! Thanks for the ref. Looks great! ;)", "Shane, 2015-12-27A genuinely decent translucency feel for just a few function calls. Amazing, and very useful. And the scene is cool, too, by the way. Has a great atmospheric feel to it.", "aiekick, 2015-12-27", "Harha, 2015-12-27Very cool!", "vgs, 2015-12-26Very interesting!", "poljere, 2015-12-26Awesome <3", "iq, 2015-12-26Nice one!", "arminkz, 2018-04-29hey guys , im developing a native shadertoy like app free and opensource feel free to check it out and contribute if you are interested.", "https://github.com/arminkz/ShaderToy.NET", "dila, 2018-04-19horific!", "ollj, 2017-06-01that what the lower levels of Charlies Chocolate factory look like.", "mu6k, 2014-06-08", "Dave_Hoskins, 2014-06-08Nice one, Clive Barker would love it! I like the light rays too.", "cyanux, 2014-06-08Tonight nightmare for everyone", "lasoy, 2022-08-08cool", "Maadahmed, 2022-08-06very good, how i can export this in three.js", "GraphXDoses, 2022-08-04Stunning!!", "Chango, 2022-08-02Beautiful!", "FabriceNeyret2, 2022-08-02wooow !", "BigWIngs, 2022-07-30Wow. that looks great!", "leon, 2022-07-29Nice!! \ud83d\udd25", "jorge2017a2, 2022-07-28very complete .... very nice work !!!!", "Duke, 2022-07-28Cool!", "msm01, 2022-07-28I burnt my eyebrows playing with this, and I don't regret it !", "Carandiru, 2022-07-28very nice!", "dila, 2016-10-22seriously good!", "bergi, 2015-02-10eiffie, this is great. You even managed to make the cylinders spiky again", "So much to learn in 60 lines! And so many values to tweak. And the confusing sphere code. How does this even work?", "abs(d/d2) ... Amazing!", "iq, 2015-02-09Pretty", "gclkaze, 2013-10-27Thanx buddie! It helped!", "MacLin, 2022-10-16This is a cube map RenderTarget Test", "Alex_Marincas, 2021-11-03Hi, can this be adapted to three js fragment shader? This works only with specific texture resolutions?", "greggman, 2020-07-29Thanks! I used it here", "CREGG, 2020-05-06Thank you so much! I'll share a link as soon as it's out!", "Coolok, 2020-05-06Hi CREGG,", "Yes, you can use this shader code in a commercial project.", "Please give me the LINK to this project when it will be finished", "regards", "CREGG, 2020-05-06Hi Coolok,", "I wanted to check if we could use your shader code in a commercial project?", "", "All the best", "airtight, 2020-03-27copy of https://www.shadertoy.com/view/lsfGD2", "Coolok, 2017-11-16yes sure!", "this is for FREE!", "heliumsoft, 2017-11-16Very nice Glitch effect.", "Can i use your code in commercial project?", "Dave_Hoskins, 2017-06-21A really nice video glitch!", "pixeljig, 2020-10-22can it be used commercially?", "ocb, 2018-02-17Super effect!", "Really looks like Matrix FX.", "FabriceNeyret2, 2018-02-17-11 -> 231", "switch off the vflip flag of texture 0", "then DEL   V.x = -V.x;     and use texture(iChannel0, -V/16.)", "", "then we can insert the V transform as texture ( iChannel0, (V)/16. )", "FabriceNeyret2, 2018-02-16-5 -> 242 chars:", "x = ceil(u.x)*48.;", "V = V*.8-.9  + ceil(   ... (u-V)/256. ...", "O = .... / vec4(2e3,20,60,0)", "", "#define mainImage(O,U)                                            \\", "vec2 u = U/16.,  V = fract(u);                                \\", "float t = iTime, x = ceil(u.x)*48.;                           \\", "V = V*.8-.9                                                   \\", "+ ceil( texture(iChannel1, (u-V)/256. + t*5e2 ).xy * 16.); \\", "V.x = -V.x;                                                   \\", "O = texture(iChannel0, V/16.).r / vec4(2e3,20,60,0)           \\", "/ fract( U.y/iResolution.y + t*(cos(x)*.3+.7) + sin(x*5.) )", "FabriceNeyret2, 2018-02-16i.e. less than 2 tweets.", "And 247 chars by using 256. for iChannelResolution[1].xy", "This is a bit better than the analytical matrix shaders ;-) https://www.shadertoy.com/results?query=matrix&sort=love&from=0&num=12", "FabriceNeyret2, 2018-02-16golfed version: 267 chars:", "#define mainImage(O,U)                   \\", "vec2 u = U/16.,  V = fract(u);       \\", "float t = iTime, x = floor(u.x)*48.; \\", "V = V*.8+.1                          \\", "+ floor( texture(iChannel1, (u-V)/iChannelResolution[1].xy + t*5e2 ).xy * 16.); \\", "V.x = -V.x;                          \\", "O = texture(iChannel0, V/16.).r      \\", "* vec4(.1,1,.35,0) /20.          \\", "/ fract( U.y/iResolution.y + t*(cos(x)*.3+.7) + sin(x*5.) )", "pellicus, 2019-12-12cool . please write my name near the shadertoy link if you can  .. something like Dario Pelella (pellicus) . thanks", "shagoy, 2019-11-23Are you cool with this https://www.youtube.com/watch?v=qWR-_pggwsc ?", "PauloFalcao, 2018-12-22 Superb!", "ocb, 2018-12-20Super, super great shader!", "ewerybody, 2018-12-20Damn! Nice! I love the giggle", "I though your inspiration could have also been https://instagram.com/_estebandiacono", "DIDCJS, 2018-12-19awesome!!!talented~", "knighty, 2018-12-18This is crazy!", "KylBlz, 2018-12-16haha i love this website", "pellicus, 2018-12-15wow shader of the week!", "aiekick, 2018-12-15wow missed this one", "Danguafer, 2018-12-14Best Globeleza 2019 candidate so far", "https://www.youtube.com/watch?v=b_roZ4OWxOU", "Himred, 2018-12-14awesome ! Best shader ever !!", "zproxy, 2018-09-13now make it look like robocop", "Dave_Hoskins, 2018-08-23@mackycheese21, click 'Events' at the bottom of the page...", "Dave_Hoskins, 2018-08-22For me, this was easily the winner of the comp.", "pellicus, 2018-08-14. I'm starting to think to release the Unity tool i made to extract the mocap data. and I would like to make a simplified version of this shader just to expose the animation data ... so others could play with it.  Stay tuned, I'll twitt it! hehe", "Shane, 2018-08-14This is really cool, and helpful. I appreciate you putting it together. I've had a few unfinished robot examples sitting around offline, and have wanted to put together a Shadertoy version, but didn't think importing motion data was viable in a pixel shader. Thanks to this, and Reinder's example, I now at least have something to go on -- Although, I'm still not expecting it to be a walk in the park.  The Mixamo link is helpful too.", "h3r3, 2018-08-13 super awesome", "dragospettro, 2018-08-13omg, it's awesome", "flockaroo, 2018-08-12really cool! and nice booty physics ;-)", "pellicus, 2018-08-11thanks! . i made a little update.. a springy-thing version . no time to add more unfortunately.. but .. I will . too much fun to work with an animated human.", "reinder, 2018-08-10Cool. Very nice!", "knarkowicz, 2018-08-10Fun!", "GregRostami, 2018-08-10OMG!!!!!!", "BigWIngs, 2018-08-10This is super cool! Can't stop watching this", "iapafoto, 2018-08-10ha ha genial ! Love it !! Super idea", "shau, 2018-08-10Cool and fun.  it", "Dave_Hoskins, 2018-08-10Fantastic, there's some shiny happiness right there!", "cgaish, 2021-06-28How can we adjust weights of the CVs? Especially the center one, rendering the curve to and from from straight lines to curved line back again?", "m1el, 2015-05-25https://www.shadertoy.com/view/Mlj3zD", "demofox, 2015-05-20Figured out a way... basically, the loop and blinn method is good for telling you inside / outside but relies on using texture coordinates in a pre-set up triangle.  The solution is to calculate barycentric coordinates and do a triangle test then the loop and blinn bezier curve test!", "https://www.shadertoy.com/view/4tj3Dy", "demofox, 2015-05-20I'm currently trying to find something that will truely give me a signed distance to the curve so i can tell the difference between the inside and the outside.  Does anyone know of such a thing?", "asneakyfatcat, 2021-04-26Wow!", "UrbanClubProfessional, 2020-11-20Urb Club Pro's 5 remixes:", "https://www.shadertoy.com/view/3s3fDB", "https://www.shadertoy.com/view/3s3BDB", "https://www.shadertoy.com/view/3d3fDB", "https://www.shadertoy.com/view/Ws3fDB", "https://www.shadertoy.com/view/3dcfDB", "oneshade, 2020-11-19Beautiful and so realistic. Love the coloring too!", "iY0Yi, 2020-11-18I take care of these plants too. This shader is really realistic!", "I especially like the white, powdery part,", "and the part with the leaves squeezed together in the lower-left corner.", "Super nice!", "iq, 2020-07-13So beautiful!", "tdhooper, 2020-06-26Oh nice! Thank you blackle  that looks good to me.", "blackle, 2020-06-25I played with the hash function some more today and I found that you can replace the `cos(k)` in the FK define with `k*k/7.` and it remains random and should be more consistent across cards C:", "tdhooper, 2020-06-23@Fabrice: I've reduced the bounces which speeds it up a bit. Shader Minifier collapses it to around 7500 chars, Crinkler does the rest", "", "@blackle: Oh no, I hadn't thought about that! Thankfully the texturing holds up pretty well on the different cards I've tried it on.", "", "@cyberjax: Thank you for sharing that story <3 my father also had a few of these in his garden, however I only became interested in them recently when visiting Kew Gardens. Congrats on the port, I'd be interested to see the changes as I'm currently learning hlsl myself.", "", "@jorge: What is your plarform/browser/graphics card? does it compile at all?", "jorge2017a1, 2020-06-23this shader ...... I can't watch it on my PC ....", "...........", "este shader...... no lo puedo mirar en mi PC....", "cyberjax, 2020-06-22I love this.  It reminds me of my late father.  When I was six years old, he took some of his favorite succulents from his garden and exhibited them at a county fair.  What I never told him was that my younger brother and I used to sneak in the garden and eat them.", "", "I just finished porting the code to hlsl to run on my DirectX app.  It was probably my most challenging Shadertoy port yet in terms of the glsl to hlsl gothca's.", "", "Thank you so much for sharing", "pjkarlik, 2020-06-21Yes it's beautiful! - all I can do is make spheres! Textures are really nice, i want to touch it!", "blackle, 2020-06-21compression is pretty amazing these days!", "", "also I took a closer look at your code and I see you're using my hash function! just be warned that it won't produce the same output on all graphics cards due to differences in the cos implementations", "FabriceNeyret2, 2020-06-21is this 11314 chars shader really compiles into less than 4k ?", "FabriceNeyret2, 2020-06-21very nice, but way too costly ( 0.5 to 1 fps at 640x360 here )", "tdhooper, 2020-06-21is that any better now, pjkarlik?", "pjkarlik, 2020-06-20I'm getting some black pixels in the bigger plant mostly around the center. down to 14 fps.. pretty otherwise.. win10 8core i7 / gf rtx", "blackle, 2020-06-20so gorgeous", "wyatt, 2020-06-20wow!!! remember to water them, but not too often!", "fuzzMonkey, 2022-11-24The fix to the bug mentioned by dizziCoding:", "on line 174, replace", "vec2 stp = sign(rd);", "with", "vec2 stp = vec2( rd.x >= 0.0 ? 1.0 : -1.0, rd.y >= 0.0 ? 1.0 : -1.0);", "paniq, 2022-03-03[This comment has been hidden by the shader author]", "dizziCoding, 2022-02-05Horizontal line with floored y or Vertical line with floored x seems to have a probleme.", "", "Like :", "p1 = vec2(-3.7,3.0);", "p0 = vec2(3.9,3.0);", "", "p1 = vec2(3.0,-3.4);", "p0 = vec2(3.0,3.4);", "OccamsLaser, 2018-02-15Fixed citation link: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.42.3443&rep=rep1&type=pdf", "dr2, 2018-02-13See here for same thing on hex grid (I thought voxels were 3D)", "Dave_Hoskins, 2018-02-13https://www.shadertoy.com/view/XdBGDG", "Dave_Hoskins, 2018-02-13I got my integer one from Graphics Gems IV ->", "https://www.shadertoy.com/view/XdBGDG", "Gallo, 2021-05-29Awesome, very good job.", "starea, 2017-04-27Beautiful shader! It works awesomely in  (W10 + chrome + GTX1080), I guess it's the old driver's bug.", "P_Malin, 2016-02-24Thanks Mr Hoskins, I had the depth of field focus plane in the wrong place!", "Not sure what is causing vertical lines though. I cannot reproduce that.", "casty, 2016-02-19I see some random vertical lines (W10 + chrome + GTX670)", "Dave_Hoskins, 2016-02-19The bloomed twinkles on the water look great, and the sound fx add so much extra.", "Everything seems blurred though.", "chrisjj, 2023-01-30Great! But I'm seeing an occasional faulty surface pattern e.g. at pointer here https://i.imgur.com/4EdppCU.png and FWIW also in OpenGL https://i.imgur.com/LNwdmFl.png .", "huttarl, 2019-02-22This is a neat concept. Impressive that the motion can be as natural-looking as it is, without keeping track of the results of past collisions. Also I like the fuzzy texture, like orange and white tennis balls.", "iq, 2018-12-31Oh wait, I know what it might be, probably dFdx and dFdy getting weird. Okey, I replaced them with manual derivatives with ray derivatives. Is it working now?", "stb, 2018-12-29Hmm, strange things are afoot. Here is what I see. In addition to the strange black outlines, the balls turn blue if I copy the image (hence the screenshot). Chrome/Windows 10/AMD.", "joshuakeler, 2018-12-27really nice", "nabr, 2018-12-25useful", "GregRostami, 2018-12-25Super Amazing and very pretty!!", "wyatt, 2018-12-24really cool", "jt, 2022-09-04Got it - thanks, ollj!", "ollj, 2022-09-04\"triangular distance\" == \"manhatten-distance-BUT-in-2d-barycentric-coordinates\", usually with equilateral-triangle-lattice.", "jt, 2022-09-03Ah, so it's a the Manhattan distance equivalent for triangular coordinates.", "ollj, 2022-09-02\"triangular distance\" is on a static equilateral-triangle-lattice.", "this very efficiently looks like of q-bert", "", "vec2 d2 = vec2( max(abs(r.x)*0.866025+r.y*0.5,-r.y),", "step(0.0,0.5*abs(r.x)+0.866025*r.y)*(1.0+step(0.0,r.x)) );", "", "0.866025 == sqrt(3)*0.5     is a giveaway that you are on an equilateral triangle, usually for hexagons.", "jt, 2022-09-02BTW any info on triangular distance? I know euclidean and Manhattan but triangular distance is new for me.", "jt, 2022-09-01The triangular distance gives really beautiful results", "billyboy123, 2018-08-27change the line vec3 col just above the 3 color *= lines to this for rainbow color.....", "vec3 col = 0.5 + 0.5*sin( c.y*2.5 + vec3(1.618033988*iTime,1.4142568789*iTime,0.21563857239*iTime) );", "billyboy123, 2018-08-27i hate when people say thanks a lot, it openly means that stole your code.", "ollj, 2018-07-20i had fun mixing 2 of 3 ddistance definitions over screenspace:", "https://www.shadertoy.com/view/MltcR7", "makes for more varied topology/borders", "shaderology, 2015-09-24How would you go about implementing triangular metric in 3D? 2D looks something like max(abs(r.x)-r.y*0.5,r.y) but I'm a bit lost how to do it with your ldl3Dl shader for example", "ewerybody, 2014-02-06The move from and to the \"cubes\" is mind boggling!! :O", "awesome!!!", "inferno, 2014-02-05Qbert! loks really nice", "psonice, 2014-02-05Utter magic", "nimitz, 2014-02-05Thanks a lot!", "xef6, 2022-02-10to 4%, or rather multiply time by 0.04 HAVEA  GREAT DAY!", "xef6, 2022-02-10https://www.shadertoy.com/view/fsfBzN have a great day! this is slowed down by 4%", "xef6, 2022-02-10this shader is really cool, but really fast. slowing it down increased the enjoyment factor for me. have a great day!", "xef6, 2022-02-10my edit of changing speed to 4% has been deleted?", "xef6, 2022-02-10https://www.shadertoy.com/view/ssfBzH", "xef6, 2022-02-10sometimes i would watch NASA TV ISS video. this shader is like that video, but eternal joyful daytime. thank you.", "Patapom, 2016-10-29Crashes webgl on my GTX 980M with Chrome 53.0.2785.143 :'(", "Shane, 2016-10-11Really nice, and a great code reference too. The third scene is my favorite.", "blackjero, 2016-10-05thanks Valentin, I think I will have your comment engraved on my tombstone", "lame_tweaks is the stuff I had to tweak \"per camera\"... (spec and artistic cloud exaggeration), I would have like to avoid...", "valentingalea, 2016-10-05you managed the impossible: make it physically based and cool looking! also love your lame_tweaks thing!", "blackjero, 2016-10-05Polygon: as far as the code is concerned, not at the moment... as written in the top code comment it would be faster if I used buffers (to cache atmosphere calculations, the sane thing you normally do), but that requires a bit of work. Initially I wanted to avoid buffers and brute forcing was ok-ish on my ancient card at home, so I went down that route.", "dila, 2016-10-04yes sir", "Polygon, 2016-10-04It's too much to run on my computer. Is there any workaround?", "blackjero, 2016-10-04woa shader of the week! Thanks for the encouraging comments and for making this site so awesome :-)", "iq, 2016-10-01Super super cool!", "KylBlz, 2016-10-01looks nice!", "aiekick, 2016-09-30at home it work like a charm  and beautifull", "reinder, 2016-09-30Very nice!!", "FabriceNeyret2, 2016-09-30for once, I don't have pow error. Which is your's ?", "Duke, 2016-09-30Cool!", "aiekick, 2016-09-30yes i have always pow error. my gpu is annoying.", "", "GL_MAJOR_VERSION : 3", "GL_MINOR_VERSION : 1", "GL_VENDOR : NVIDIA Corporation", "GL_RENDERER : Quadro K3100M/PCIe/SSE2", "GL_GLSL_VERSION_BASE : 1.40 NVIDIA via Cg compiler", "", "win 7 64 chrome 41.0.2272.118", "blackjero, 2016-09-30the build error advice of using abs is dubious, code might want to do something else... (do you still have pow errors with current version?) the DX gradient error is documented but not sure it is trivially fixable yet..", "aiekick, 2016-09-30i replaced all pow by my define powpow (#define powpow(a,b) pow(abs(a),b)) and after that i get the errors http://hpics.li/49d5808", "aiekick, 2016-09-30here the error i have : http://hpics.li/8769385", "blackjero, 2016-09-30thanks! I added a couple of max 0 to protect pow args... I will see if I can locate  the X4014 (but I can't repro so it would be all blind fix...)", "aiekick, 2016-09-30also error X4014 : cannot have gradient operation inside loop with divergent flow control", "aiekick, 2016-09-30'pow(f,e), will not work for negative f'", "aiekick, 2016-09-30error due to negative exponent in pow", "BAOWZ, 2023-04-21bro my gpu is cheating!", "Riku_Anita, 2020-07-26reminds me of playing FL tron, that was the shit", "visuality, 2019-10-29Yep thats the way I remember it, feels like musics different tho.", "jt, 2018-01-24cool!", "etale_cohomology, 2017-08-29It's impossible to beat this stupid computer! =D", "joseluisq, 2017-05-23I have won hahaha https://ibb.co/dgPoxa", "joseluisq, 2017-05-23Haha really great!", "paniq, 2017-05-19CPU very easy to beat", "evadsnibor, 2017-05-18De-resolution by GPU!", "dila, 2017-05-17i must win!!!! very addictive", "dzhidaj, 2017-05-17GPU wins fast", "P_Malin, 2017-05-17Great job! This is awesome", "metalim, 2016-12-24Too bad I don't have Del on keyboard. Haha!", "iapafoto, 2016-07-25GPU is quite good !", "KylBlz, 2016-07-25+1 internets for \"GPU\" haha", "knarkowicz, 2016-07-24Nice! Quite simple, but well executed, polished and good music selection.", "ollj, 2016-09-05this looks too bad, too 90s. no nee for this if you can raymarch trough displacement mapping just as easily.", "demofox, 2014-08-12I have a feeling this is leading to something else iq, am i right? (:", "iq, 2014-02-10Added fake defocus, thx!", "knighty, 2013-10-24Nice finding Dave!", "Dave_Hoskins, 2013-10-24Some soft focus perhaps?", "107| mate = texture2D( iChannel0, 0.25*pos.zx, l*.4).xyz;", "hornet, 2013-10-23Magic of this of course being that you can use a completely procedural function for the height-map. E.g. l. 125", "nor = doBump( pos, nor, 0.5+0.5*(sin(50.0*pos.x)*sin(50.0*pos.y)), 0.025*bump );", "knighty, 2013-10-23Cool! It looks from the paper that the block artifact comes from the derivatives functions. Is there another way to compute them?", "Shane, 2017-09-14@ollj", "It's an old trick that a few people use, including myself. In simplest terms, surface hit accuracy decreases as the ray traverses further into the scene. I guess the idea is that you won't notices inaccuracies as you travel further afield. Under the right circumstances, it can speed up traversal noticeably. On a side note, I'll sometimes use a distance-based variable bump mapping-factor as well.", "ollj, 2017-09-04all this time i never realized that this shader uses a (dynamic) epsilon marcher TYPE that is new to me. well, 3 makes a family:", "https://www.shadertoy.com/view/4tXyDH", "etale_cohomology, 2017-07-15Beautiful render, even MORE BEAUTIFUL CODE! <3 =D", "shau, 2017-03-27Hello again  Not sure if you can help me but I'm trying to build a spiral using this technique by simply stepping on the y axis:", "p.xz *= r2(a);", "p.x -= toroidRadius;", "p.y += a * 0.25;", "p.xy *= r2(a*polRot);", "...which seems to work except I get artifacts/discontinuity at the ends. Is there anything obviously wrong by taking this approach? Kind Regards", "shau, 2017-03-16As usual your documentation makes it much easier to understand these things  My comment on a comment was certainly a bit anal but I was feeling rather pleased with myself at having worked it out  I'll be spending more time with this one. Thanks Shane", "Shane, 2017-03-16@Shau", "Like every new thing, it'll give you a headache trying to figure it out, then when you do, you'll wonder why you found it difficult in the first place.", "", "At it's core, this demonstration is no different to linear repeat-space examples, except you have the added complication of converting to polar coordinates first. I think the best way to understand this would be to ignore the whole thing, then create a black and white 2D shader with an inner ring and an outer ring separated by spokes.", "", "I said, \"Comment this out...,\" when I should have said, \"Change this to 'p = abs(p)...'.\" Anyone who's ever read a text book at school knows that authors make a lot of typos, conceptual errors, etc.", "pelleman, 2017-03-03Beautiful, super cool! Well done!", "jt, 2017-03-03Extremely cool", "Makio64, 2017-03-03so freaking good!", "shau, 2017-03-01One of my favourite shaders   I've been trying to figure out how this works for a while. I had to change line 192 to p = abs(p) to get the single rail rather than comment the line out", "Dave_Hoskins, 2017-03-01Great! So nicely displayed!", "GregRostami, 2017-01-18TOO COOL!!", "Shane, 2016-12-29Thanks for the comments - I've been away doing the Christmas thing. The Mobius object here is pretty basic. Variations on the base \"Mobius\" function can produce some really interesting looking objects, if anyone feels like experimenting with it.", "", "@voz", "I forgot to mention that this was inspired by your Mobius-related comment. Although, it'd be different to what you had in mind.", "", "@dr2", "You can construct some pretty elaborate scenes with nothing more than mathematical equations in your mind, so I sometimes wonder.", "voz, 2016-12-26Looks like a dog dropping lol <3", "dila, 2016-12-25amazing", "stb, 2016-12-23Another beautiful and fast shader by Shane!", "Duke, 2016-12-23Nice!", "iapafoto, 2016-12-23so good !", "flockaroo, 2016-12-23wow, really shiny!", "kuvkar, 2016-12-23very pretty!", "dr2, 2016-12-23If I am not human does that make me a replicant ?", "coyote, 2016-12-23", "KylBlz, 2016-12-23Thanks for the well commented code!", "iq, 2016-12-23Looks amazing! Very clean and tactile", "aiekick, 2016-12-23nice rendering as usual", "BigWIngs, 2016-12-23Love it!", "prozacgod, 2015-11-27It's strange and impressive, at 1440p on my 980ti it actually struggles a bit.. ;)", "squeakyneb, 2014-06-05\"Broken\" my ass. That's awesome.", "poljere, 2014-05-30Beautiful Inigo!", "avix, 2014-03-07Lovely 'abstract' art. I like it a lot.", "TurBo_biT, 2014-03-06iq was born to amaze, very nice.", "Dave_Hoskins, 2014-03-06It looks like a liquid suspension of tissue. Very nice, but what was it going to be, if it's \"broken?\"", "huttarl, 2013-03-15I like how every n seconds, the even ones coalesce at the bottom and the odd ones at the top. And every 2n seconds, they all meet at the bottom.", "huttarl, 2013-03-15Ditto! Simple enough that even I can understand it.", "Mipmap, 2013-02-26Love the simplicity and glow effect.", "Cha, 2013-02-16Love it!!", "raabix, 2020-03-17This is so soothing to watch... I love when it turns night", "zproxy, 2018-06-27360 at", "username, 2017-02-09I am seeing gray stripes in the grass patches. Is that normal?", "GregRostami, 2015-01-21WOW!! Picture frame, landscape, etc. You've crammed a LOT in this shader! BRAVO!!", "dr2, 2014-10-28Thanks for the feedback.", "Dave_H: Night comes late in the far north.", "iq: I wanted to see if there were performance/compatibility issues", "before working on lighting effects (shadows in particular).", "AndrewNZ, 2014-10-28Night sky is cool - even a moon!", "iq, 2014-10-28Very cool! Lighting is a bit weak, but the modeling is awesome, the cameras, the path, the detail. Nice!", "fizzer, 2014-10-27Yep, it was a great surprise to see that extra scene just when I thought it would loop.", "Dave_Hoskins, 2014-10-27I like the way you take ages to finally switch to the night train.", "mrange, 2022-11-16very nice, very short", "genekeats, 2021-04-28perfection!", "GuroGuru, 2021-04-24Holy ravioli, 13 lines of code * . *", "vince_hua, 2021-04-19amazing!! but the code is too hard to understand", "mattz, 2021-04-18Oh good point \u2013 I think the out/in dates from when shadertoy changed the main function and auto-updated everyone's shaders to match. I just double-checked https://www.khronos.org/opengl/wiki/Core_Language_(GLSL)#Parameters to confirm that 'in' is the default.", "dean_the_coder, 2021-04-16Excellent! (Can remove the 'in' for 'vec2 p' ?)", "pauloraulo, 2021-04-16It's nice but I feel a little dizzy right now...", "turboplay, 2021-04-16Top class", "mattz, 2021-04-15Also replaced iDate.w with iTime on line 6 (this uniform was named iGlobalTime until 2017, so iDate.w was the shorter alternative). Down to 277 chars! Also in 2015 when this was written, a tweet was 140 characters. Now this code actually fits in a single tweet!", "mattz, 2021-04-15Now that this is shader of the week I finally managed to get this down under 280 chars by changing a p.xy to p on line 3 \u2013 don't know how I missed it before.", "mattz, 2018-11-26thanks!", "scratch13764, 2018-11-26This is excellent, the perspective is much better than on mine.", "GregRostami, 2018-10-06Using #define trick:", "263 chars:", "#define mainImage(o,u)                         \\", "for( vec2  R = iResolution.xy,             \\", "i = R-R,                        \\", "s = R.yy * pow(3., mod(iTime/1.6, 2.) + 1.),  \\", "p = (u+u-R) * mat2(cos(vec4(55,i,33) - iTime/2.)) \\", "+ (s - R) / 4.;             \\", "s.x > 1.;                            \\", "i == R-R ? o += (s*s).x : o          \\", ") p -= i * s, s /= 3., i = round(p/s)", "Dave_Hoskins, 2015-01-26Yep!  I've always been slightly obsessed by speed, ever since I had no choice but to always do stuff in assembly language.", "mattz, 2015-01-26Yeah, this was the compromise of not to many digits and not too much aliasing.", "", "Also, following iq's obssession for minification, I found out how to raise the sine on line 6 to the 3rd power, meaning we now alternate between turning left, driving straight, turning right, etc. This is fun!", "Dave_Hoskins, 2015-01-26If like it converging at the horizon more with:-", "q=d/(.05-d.y);", "But then it aliases too much!!", "Xonatron, 2015-01-26Love it!", "mattz, 2015-01-26See, I just stopped when I got under 280... but happy to keep on reducing for the fun of it.", "iq, 2015-01-26One more char by doing \"q=d/(.1-d.y);\". Maybe you can fit a car or motorbike in 3 chars? ^__^", "iq, 2015-01-26It's not for scalars/floats, but it is for vec{2,3,4} constructors (or there's an implicit cast), apparently. This is nowhere written afaik though (like many other things about the language)", "fizzer, 2015-01-26Awesome idea!", "mattz, 2015-01-25Thanks, everyone!", "", "BTW, iq - I haven't found the part of the spec that indicates that 0 is a valid floating point literal. I made the change on line 3 as you suggested but I guess I'm mystified as to why it works.", "eiffie, 2015-01-25Love it.", "poljere, 2015-01-25Awesome!", "nimitz, 2015-01-25I'll tell Louis about that, he's going to be pleased", "squid, 2015-01-24Extra fun road shapes by replacing the first sin(), particularly tan()...", "iq, 2015-01-24Awesome!", "", "Line 7 \"q.x*=q.x-=\" is pretty awesome too", "", "(can save one char in the 0. in line 3, cause the dot is not needed)", "Dave_Hoskins, 2015-01-24No way! cool.", "kevs3d, 2020-06-30Very nice, the background is a nice touch also", "ttoinou, 2020-04-20Congrats this is beautiful", "ukyozq, 2020-03-08Woo, great job!", "Aga, 2020-03-08Very nice form , I like it ;)))", "Logos, 2020-03-06Great!", "hippietrail, 2020-03-05Succulent!", "Reva, 2020-03-04I really really love it !!", "tdhooper, 2020-03-04@jmc I've emailed you, let me know if you don't get it as I think my last email to you got lost ;)", "flockaroo, 2020-03-04this is really pretty!", "jmc, 2020-03-04Hi Thomas,", "", "We are the developers of FL Studio and we are wondering if you would be open to a cooperation where we use your shader to be usable in our visualizer ?", "", "This would allow the shader to be controlled by audio and/or automation and be part of pretty complex video renderings.", "", "If you're interested just drop me a mail (jmc at image-line dot com) and we'll set you up with our software for free so you can check things out.", "", "Regards,", "", "Jean-Marie Cannie", "Image-Line Software", "angelo12, 2020-03-01Absolutely gorgeous!", "ttg, 2020-02-28I love the model, but the animation is way too fast!", "BigWIngs, 2020-02-27Super nice. I love the dots on the leaves.", "tdhooper, 2020-02-27It's the name for the succulent plant I based this on, echeveria peacockii.", "", "Just looking this up, the name comes from the Mexican botanical artist, Atanasio Echeverr\u00eda y Godoy.", "iq, 2020-02-27Thank you!", "", "Why the name Echeveria? That's a Basque family name (north-atlantic  Spanish and South-atlantic French area), it means \"New House\".", "tdhooper, 2020-02-27Thanks iq, fixed.", "", "That normal optimisation looks really wild now!", "iq, 2020-02-27Super pretty shader, really nice.", "", "It freezes the browser for 30+ seconds though when compiling (including browsing windows). I got the compilation times down to 1.5 seconds by putting the 9 petal queries into a 3x3 no-untolled loop as in", "for( int m=min(iFrame,0); m<3; m++ )", "for( int n=min(iFrame,0); n<3; n++ )", "res = opU(res, leaf(p, calcCellData(cell, vec2(m-1, n-1), ...", "", "and also using the classic loop trick  for computing the normals.", "", "I'll put the shader in Unlisted mode to prevent people from experiencing the freeze, but please feel free to mark it as Published again if you get the fixes in! Sorry and thanks!", "jeyko, 2020-02-27amazing!", "Danguafer, 2020-10-10The code looks incredibly simple", "iq, 2019-04-17Really nice!", "etale_cohomology, 2017-08-01I agree, a GLSL interpreter would be next-level Inception... (yo dawg so I heard you like shaders)", "Hamneggs, 2017-01-13I got an idea for ya: How about you use a third buffer that draws out pixels such that if you were to save a screenshot of the buffer in a headerless image format, it would be a text file.", "Imsure1200q_1UWE130, 2016-10-28Made In Here: I LOVE PICKING BOOGERS", "XD", "CaliCoastReplay, 2016-08-18Oh my God, this is genius", "VoidChicken, 2016-07-01Imagine an interpreter here.", "akohdr, 2016-04-06How do you type numbers?  (I'm looking for key codes for numbers)", "zackpudil, 2016-03-30Very cool!", "zproxy, 2016-01-06awesome!", "XT95, 2016-01-06Amazing", "vgs, 2016-01-05Wow really clever!", "PauloFalcao, 2016-01-05Crazy! I love it!", "psonice, 2016-01-05Hi, I've just written a really long document in this, and I can't figure out how to save it to a floppy disk?", "", "Crazy cool shader", "Makio64, 2016-01-05Time is come to write shader in a shader!", "anastadunbar, 2016-01-05Awesome.", "Andre, 2016-01-05Very cool,", "Now add a BASIC interpreter ;)", "msm01, 2022-03-23Tuck : \"Jack ?! Jack, I must enter the blood flow now. We may lose communications, see you in a bit !\"", "*Innerspace soundtrack intensifies*", "P_Malin, 2015-10-20Hmm, It may be fixed now.", "It is a common problem. Where the UV co-ordiantes wrapped around (in this case from 2.0) back to 0 the large derivative causes the mipmap selection to be incorrect. I think I have hidden this by sampling the texture twice (with the modulo wrap in a different location) and blending the two samples.", "The texture is also sampled with these UV co-ordinates in the raymarch. In that case I used a mip lod of -100.", "rubixcom, 2015-10-19So awesome! I love the movement of the cells. Just one tiny improvement; I get a sharp red vertical line along the surface of the bottom middle of the tunnel on AMD Radeon R9 M370X.", "P_Malin, 2014-05-16It's ok, I knew what you meant. I was just being silly. I don't mind my shader being compared to a cool demo", "Yes it's pretty crazy what is possible now.", "iq, 2014-05-16oh wait, it wasn't a critic, it was just a mere historical reference, sorry! I think this looks great, and without postprocessing abilities, there's little we can do to make our shadertoys fancy really.", "vgs, 2014-05-16Really nice!", "P_Malin, 2014-05-15Yes I see what you mean. Maybe I should have included glowing trumpet viruses too.", "iq, 2014-05-15Very cool!", "", "Reminded me of Planet Risk (2004), back from when the GPUs just started to have shaders.", "mrdoons, 2022-10-25CAN SOME ONE EMIND ME HOW TO GET CODES OF HERE GUYS", "TekF, 2020-01-02I've added a commented out line to make the trees dance, search for \"Fun!\" in the code to find it. Happy New Year everyone!", "shau, 2019-12-31Very nice and festive. And the amount of detail.", "TekF, 2019-12-18@pendingchaos - Thanks, I've seen that issue many times before but I foolishly assumed this shader wasn't susceptible to it because I didn't see the problem on my PC. Have now replaced all the texture reads with explicit Lods.", "flockaroo, 2019-12-18pretty nice!", "pendingchaos, 2019-12-18Very nice", "", "These changes (or something similar) are needed to avoid artifacts (https://imgur.com/a/5CrajZn) on the Linux radeonsi driver though: https://gist.github.com/pendingchaos/74c81579eb1cd6d264eb5f47dd5db810", "Seems it does some texture samples in control flow that isn't quad-uniform", "blackjero, 2019-12-18It looks great! The internal shadow + snow touch work really well.", "reinder, 2019-12-18Very cool! I am impressed with the amount of detail.", "Shane, 2019-12-18Very pleasing to the eye. Your code's always full of interesting and useful snippets, which is always appreciated.", "BigWIngs, 2019-12-17That's beautiful and fast. Well done!", "iq, 2019-12-17Very very nice!!", "propagant, 2019-12-17Nice one!", "marzinp, 2018-02-01Brilliant! Thanks Shane for taking the time to thoroughly comment your code, which is a tremendous help for beginners, students, learners of all kind!", "Shane, 2017-06-09@Imsure1200q_1UWE130", "A lot of this is standard lighting, which usually means applying a bit of diffuse and specular. The specular lighting is applied independently of surface color (globally, I guess) to make things look shinier, and with a lower specular power to make it more prominent. Other things that effect the overall look are light placement, gamma correction (that's imperative), etc. A lot of the times, it comes down to tweaking the figures until you produce something you're happy with.", "", "This would have a more gelatinous-like consistency if I were to take out the rigidity. To make it look wetter, I'd probably increase the specular power to something like 64, and multiply it by 3, or something to that effect. Applying some fake diffraction would help too.", "Imsure1200q_1UWE130, 2017-06-05Cool shader! but, unfortunately... I wont touch that thing it looks like goo. come on im still a child i hate touching goo (i actually like to)", "", "how did you make it look like goo?", "PauloFalcao, 2016-01-14I love it", "TambakoJaguar, 2015-12-20Nice effect!", "jt, 2015-12-15Cool - reminds me of ghost-busters II (or I if swapping red with green)", "FabriceNeyret2, 2015-10-07feel free to play with it: I have no patent on infinity nor paradoxical motions :-p", "Shane, 2015-10-07@FabriceNeyret2", "", "That \"Motion Illusion 3\" thing is cool. I find the effect more aesthetically pleasing with the subtle grey metal texture, but that's a personal preference.", "Shane, 2015-10-07Thanks for the comments. It's easy enough to swap the Voronoi function for something else, like noise, 2nd order Voronoi, etc.", "", "For anyone interested, I changed just a few lines to make it work with a texture.", "", "https://www.shadertoy.com/view/Xl2XWw", "miraut, 2015-10-06Quite impressive !!", "dila, 2015-10-05yeh very good", "aiekick, 2015-10-05yeah i love it  like this kind of infinite thing", "FabriceNeyret2, 2015-10-05(it's one in a series: paradoxical translation, rotation and stretch)", "FabriceNeyret2, 2015-10-05speaking of \"motion without movment\" illusions, did you saw that one ? :-)(image + sound)  https://www.shadertoy.com/view/ltfSDl", "Hex, 2014-10-30Really nice effect, love the motion blur!", "Harha, 2014-10-28Neato. And the amount of code needed to render this is quite impressively low. D:", "TekF, 2014-10-28Hah! Cool.", "ollj, 2017-05-21[This comment has been hidden by the shader author]", "ollj, 2017-04-22[This comment has been hidden by the shader author]", "Optimus, 2014-10-30Slow, but I still like it.", "hat, 2014-04-17love it!", "XT95, 2014-04-15It's magic !! Thx for answering to my email and post this shader .", "avix, 2014-04-15Nature FTW  looks cool.", "jeyko, 2020-12-25amazing", "reinder, 2018-10-29Super nice!", "FishMan, 2018-03-26really cool!", "arxyz, 2018-03-17amazing", "834144373, 2018-03-16awesome!", "FabriceNeyret2, 2018-03-11... or implement all these small functions as macros then you can refer the samplers directly.", "", "like you, I don't understand why then chose such complicating nonstandard way of doing an include.", "flockaroo, 2018-03-11@fabrice: yes, ok, it seems defines do work. i cleaned up a bit and finally used the common tab by always giving samplers and other uniforms as arguments. makes some functions a bit ugly, but at least we're safe from code doubling (or tripling actually ;-))", "", "thanks. ocb :-)", "ocb, 2018-03-11Stunning!", "As usual...", "FabriceNeyret2, 2018-03-10defines do work in Common, but not most of Uniforms/", "flockaroo, 2018-03-10tanks guys!", "", "@FabriceNeyet2: link should work - press several times maybe (or harder ;-)). i'm sometimes havin a little trouble with my provider - i'm really getting grumpy about this. might have to switch to a different one on the long run...", "", "@Shane, BigWings: have a look at shaderoo version - its much simpler", "", "had to hack around a bit to make this work on shadertoy. the original shaderoo version is a lot simpler - no precomputation in buffer, no code doubling. tried common tab but doesn't really work like an include - no defines, no samplers possible there unfortunately :-(", "Shane, 2018-03-10Fantastic effect... I'm going to need some time to figure this one out.", "Dave_Hoskins, 2018-03-09Link works fine. A very nice video example of this.", "FabriceNeyret2, 2018-03-09shaderoo: bad link", "FabriceNeyret2, 2018-03-09impressive !", "kuvkar, 2018-03-09awesome!", "wyatt, 2018-03-09cool!", "BigWIngs, 2018-03-09Works well with webcam too. Though you gotta sit still", "BigWIngs, 2018-03-09Oww wow that is really good! Gotta figure out how you did that!", "GregRostami, 2018-03-09Gorgeous!!", "Dave_Hoskins, 2018-03-08Some clever stuff going on here - It looks like it's drawing people at first.", "GrosPoulet, 2018-03-08Beautiful!", "Data_C0re_, 2018-03-08Really Cool !", "visuality, 2017-06-29", "works with video is if you add // on line 15,", "//\tuv.y = -uv.y;", "Effect is very subtle. Thanks", "vladstorm, 2014-12-12dude i rewrote it is as a function", "", "#define t iGlobalTime", "vec3 rgbDistortion(vec2 uv, highp float magnitude){", "", "vec3 offsetX = vec3( uv.x );", "offsetX.r += rand(vec2(t*0.03,uv.y*0.42)) * 0.001 + sin(rand(vec2(t*0.2, uv.y)))*magnitude;", "offsetX.g += rand(vec2(t*0.004,uv.y*0.002)) * 0.004 + sin(t*9.0)*magnitude;", "//offsetX.b = uv.y + rand(vec2(cos(t*0.01),sin(uv.y)));", "", "return vec3(", "texture2D(iChannel0, vec2(offsetX.r, uv.y)).r,", "texture2D(iChannel0, vec2(offsetX.g, uv.y)).g,", "texture2D(iChannel0, vec2(offsetX.b, uv.y)).b", ");", "", "}", "", "and i still wondering why it doesn't work on a video", "GregRostami, 2019-02-04I'm golfing this shader here:", "https://www.shadertoy.com/view/WsSGzV", "chrisjj, 2018-11-15@lsdlive I get it. Thanks for the explanation and demos.", "lsdlive, 2018-11-15Thanks guys!", "", "@chrisjj", "I don't have access to OSX, maybe I will test on safari/windows. I may had mistakes or non standard GLSL ES in the code. I will check this.", "", "For the patchwork transparency, It's in fact glow discretized into voxel cubes.", "You can see on this shader https://www.shadertoy.com/view/ltKBWR that glow is an accumulation factor: the more iteration you have with a ray the more glow you have if distances are small. On this shader it mainly accumulates when rays are almost parallel to the surface (more iterations with small distances).", "Glow is mixed with the color of the surface, so it appears like a transparent halo, you can see through the glow, like a translucent peel.", "We are in voxelized space (3D space divided into \"big\" cubes), so this glow is still there but appears as cubes instead of smooth surface.", "The sphere shader, but in voxel space:", "https://www.shadertoy.com/view/llKBWR", "Flexi, 2018-11-05so fast! (on an integrated Intel graphics)", "chrisjj, 2018-11-01On latest Safari (V12.0, OSX), this fails in a very odd way: https://i.imgur.com/PxrEvnn.png", "chrisjj, 2018-10-31I don't understand line 43's \"patchwork & transparent voxels effects\" trick. Can you explain how this achieves transparency?", "chrisjj, 2018-10-31Cool! Here's my version simplified to aid inspection of the voxel method. https://www.shadertoy.com/view/XtcBDj", "lsdlive, 2018-05-18Thank you iq !", "iq, 2018-05-16Very nice!", "lsdlive, 2018-05-15Thanks guys ! :-)", "At first I just wanted to learn about voxel raycasting before learning the voxel cone tracing stuff, but turns out to be a good candidate for live-coding", "", "@Flopine <3", "flockaroo, 2018-05-15super nice! the tiny wobbly pixels in the middle are the cherry on top :-)", "iapafoto, 2018-05-15Wow, incredible result in 25 minutes!", "MacSlow, 2018-05-15Simple, yet effective and nice colors!", "Flopine, 2018-05-14noice <3", "FabriceNeyret2, 2018-05-14cool !", "Acry, 2018-06-20Thank you very much \u00cd\u00f1igo for all the stuff. Stay like you are - don't start playing golf with the management.", "asalga, 2018-05-31Dumb question, is ao faking ambient occlusion?", "CaliCoastReplay, 2016-08-11O_O so much in so little code", "mororo250, 2022-05-08awesome", "iapafoto, 2020-09-04@vampyrashu: your GPU! this algo is in n * n we test the interaction of all fish with all other fish. A better algorithm for dealing with a large number of fish may be to calculate only the interaction of sufficiently close fish. You can do this by dividing the space into a grid and maintaining the IDs of the fish present in each square of that grid as the fish move. So you can quickly find the fish that are close (those in the adjacent boxes of the grid) and only take into account those there", "vampyrashu, 2020-09-04There is a limit to it, what defines that?", "iapafoto, 2020-09-04@vampyrashu :  just change NB in Common tab (you need to reinit with |< if you increase the number)", "vampyrashu, 2020-09-03how do I increase the number of fishes?", "trackme, 2020-06-11Thanks!", "spalmer, 2020-04-24@trackme fish shape is all in sdFish, how did you miss that?  ds is the eye and a tail cutout, the final max cuts that out of two eillpses, one is the body, one is the tail.", "trackme, 2020-03-21Hi, I do not understand how did you draw the actual fish image/vector drawing? I mean the shape of the shape - I dont see any fish shape constructor in the code? Can you please explain how did you do that?", "rigel, 2018-02-27This is so nice !", "huttarl, 2018-02-20Very nice, small example of using multipass / buffers. Elegant too. Thanks for the code comments, which make it easier to understand and learn from.", "smkgames, 2018-02-10hehe! Amazing!", "arxyz, 2018-02-03Awesome", "jcyuan, 2016-09-07so funny~~~ cool!", "iapafoto, 2016-09-06@pSupaNove: Thanks, I ve added some comments. Hope it heps", "pSupaNova, 2016-09-06Absolutely brilliant , can you provide a write up on the thinking and tools that you used to create this?", "ollj, 2016-09-04add \"boids\"/\"birdoids\"/\"swarm\" to tags.", "Duke, 2016-08-29Nice", "CaliCoastReplay, 2016-08-28That is some seriously more AI sh** than I was expecting from a shader", "hsiangyun, 2016-01-28very cool !", "anastadunbar, 2016-01-07I did with all fishes.", "anastadunbar, 2016-01-07You can make fishes stuck at the bottom left if two fishes are in the same position.", "kuvkar, 2016-01-07wow nice!", "Flexi, 2016-01-07awesome", "knighty, 2016-01-07lol! cool!", "knighty, 2016-01-07lol! cool!", "iapafoto, 2016-01-07@vgs: Hi, I ve just observerved that iFrame increment at each display of an other icon !!!  so I put iFrame < 30 now !    If it helps.", "vgs, 2016-01-07I have the same initialization problem as you in my swarm shader. I wonder what is the problem. iFrame == 0 seems to be working in Chrome/Linux but not in Chrome/Windows and Firefox.", "citruslee, 2016-01-06this is awesome!", "quisten, 2015-04-22the touch with the triangle noise rocks!", "ShardFenix, 2015-01-09This would make a really cool loading screen animation.", "nimitz, 2015-01-05Thanks guys, should have knows this had been implemented already .", "", "eiffie: good idea, should be pretty fast and effective in 3d, i'll try that soon.", "eiffie, 2015-01-05I am liking the noise... and wondering how it looks in 3d?", "Dave_Hoskins, 2015-01-05Very pretty, almost neon velvet! If that was a thing.", "poljere, 2015-01-05Beautiful", "movAX13h, 2015-01-05Triangle noise looks good! b/w implementation by antonOTI: the power of sin", "antonOTI, 2015-01-05nice colors", "aiekick, 2015-01-05nice ^^", "t4ce, 2017-11-29dank stuff", "jt, 2017-11-27cool", "FabriceNeyret2, 2016-07-13NB: you should add the tag \"NPR\" to join the selection.", "nimitz, 2015-01-25Yeah, I had seen this before making thins shader, but I wanted object boundaries, rather than geometric edges.", "iapafoto, 2015-01-13For the inner side, you can have a look at Kali fractal land", "the magic is in the calculation of normals !", "prideout, 2014-11-05Beautiful and unique!", "iq, 2014-11-05Looks cute", "", "We have very few shaders with edges (maybe only XdsXWr), yep. And also not many with antialias (about ten, mostly eiffie's shaders), because they used to crash quickly in Directx9 WebGL. Things are better now.", "", "When I have tested AA (4sjSz3), the problem I have gotten is that mipmapping of textures has been disabled by ANGLE due to the extra branching in the loop", "CPU, 2014-11-04Edges are so understated. Nice work.", "nimitz, 2014-11-04That lighting (109-112) is pretty much straight from iq, so I guess you should ask him", "Passion, 2014-11-04This looks cool, the edge detect outline reminds me of cel shading.  I was about to post something similar minus the edge detection. Is it ok if I use some of your lighting calculations from lines 109-113?", "Trisomie21, 2014-11-03Here is a proof of concept based on a similar method.", "(The screen space ray size is not correct, but the potential is there)", "https://www.shadertoy.com/view/MsfXDS", "debosse, 2021-09-17Great", "sonia98, 2021-08-06Cool! And so fast!", "JoshScholar, 2021-07-25Very fast.  One of the few that runs smoothly at 4k on a 2060 super.", "I wish I knew that bottleneck that makes most shaders choke and run, not just slower but very unevenly on a 2060 super at 4k", "spalmer, 2021-07-25I'm trying to understand this triangle noise function here", "dila, 2015-09-18it sure is fast", "huwb, 2015-09-18+1000 for comments/explanation. Thanks Shane and very nice work!", "calx, 2015-09-17+1 about the comments, if everyone commented their stuff like this it would be so much easier to learn. Great work Shane.", "iq, 2015-09-16cool!", "mattz, 2015-09-16Love the comments.", "aiekick, 2015-09-16Nice one  and thanks for the credit"]